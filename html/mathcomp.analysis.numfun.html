
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.numfun</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.numfun" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>

<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">
<h1 class="title">Module mathcomp.analysis.numfun</h1>
<div class="coq">
<span class="vernacular">From</span> <span class="id">HB</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id">structures</span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id">all_ssreflect</span> <span class="id">ssralg</span> <span class="id">ssrnum</span> <span class="id">ssrint</span> <span class="id">interval</span> <span class="id">finmap</span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html">mathcomp_extra</a></span> <span class="id"><a href="mathcomp.classical.boolp.html">boolp</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html">classical_sets</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html">fsbigop</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="mathcomp.classical.functions.html">functions</a></span> <span class="id"><a href="mathcomp.classical.cardinality.html">cardinality</a></span> <span class="id"><a href="mathcomp.classical.set_interval.html">set_interval</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="mathcomp.analysis.signed.html">signed</a></span> <span class="id"><a href="mathcomp.analysis.reals.html">reals</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html">ereal</a></span> <span class="id"><a href="mathcomp.analysis.topology.html">topology</a></span> <span class="id"><a href="mathcomp.analysis.normedtype.html">normedtype</a></span> <span class="id"><a href="mathcomp.analysis.sequences.html">sequences</a></span>.<br/>
<br/>
<div class="ssrdoc markdown">
# Numerical functions                                                      
                                                                           
This file provides definitions and lemmas about numerical functions.       
                                                                           
```                                                                        
   {nnfun T &gt;-&gt; R} == type of non-negative functions                       
             f ^\+ == the function formed by the non-negative outputs      
                      of f (from a type to the type of extended real       
                      numbers) and 0 otherwise                             
                      rendered as f ⁺ with company-coq (U+207A)            
             f ^\- == the function formed by the non-positive outputs      
                      of f and 0 o.w.                                      
                      rendered as f ⁻ with company-coq (U+207B)            
             \1_ A == indicator function 1_A                               
```                                                                        
                                                                           
</div>
<br/>
<span class="gallina-kwd">Set</span> <span class="vernacular">Implicit</span> <span class="vernacular">Arguments</span>.<br/>
<span class="id">Unset</span> <span class="id">Strict</span> <span class="vernacular">Implicit</span>.<br/>
<span class="id">Unset</span> <span class="id">Printing</span> <span class="vernacular">Implicit</span> <span class="id">Defensive</span>.<br/>
<span class="vernacular">Import</span> <span class="id">Order.TTheory</span> <span class="id">GRing.Theory</span> <span class="id">Num.Def</span> <span class="id">Num.Theory</span>.<br/>
<span class="vernacular">Import</span> <span class="id"><a href="mathcomp.analysis.topology.html#numFieldTopology.Exports">numFieldTopology.Exports</a></span>.<br/>
<br/>
<span class="id">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="hierarchy-builder">HB.mixin</span> <span class="vernacular">Record</span> <span class="id">isNonNegFun</span> (<span class="id"><a name="aT:1">aT</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="rT:2">rT</a></span> <span class="id">:</span> <span class="id">numDomainType</span>) (<span class="id"><a name="f:3">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#aT:1">aT</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#rT:2">rT</a></span>) <span class="id">:=</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span class="id"><a name="fun_ge0:5">fun_ge0</a></span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span class="id"><a name="x:4">x,</a></span> (<span class="id">0</span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:3">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:4">x</a></span>)<span class="id">%R</span><br/>
<span class="id">}</span>.<br/>
<span class="id"><a name="NonNegFun">HB.structure</a></span> <span class="vernacular">Definition</span> <span class="id">NonNegFun</span> <span class="id"><a name="aT:9">aT</a></span> <span class="id"><a name="rT:10">rT</a></span> <span class="id">:=</span> <span class="id">{f</span> <span class="id">of</span> <span class="id">@isNonNegFun</span> <span class="id"><a href="mathcomp.analysis.numfun.html#aT:9">aT</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#rT:10">rT</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:11">f}</a></span>.<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"{ 'nnfun' aT >-> T }"</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">0,</span> <span class="id">format</span> <span class="id">"{ 'nnfun'  aT  >->  T }"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"[ 'nnfun' 'of' f ]"</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">0,</span> <span class="id">format</span> <span class="id">"[ 'nnfun'  'of'  f ]"</span>).<br/>
<span class="vernacular">Notation</span> <span class="id"><a name="::form_scope:'{'_'nnfun'_x_'>->'_x_'}'">"{ 'nnfun' aT >-> T }"</a></span> <span class="id">:=</span> (<span class="id">@NonNegFun</span>.<span class="id">type</span> <span class="id">aT</span> <span class="id">T</span>) <span class="id">:</span> <span class="id">form_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id"><a name="::form_scope:'['_'nnfun'_'of'_x_']'">"[ 'nnfun' 'of' f ]"</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::form_scope:'['_'the'_x_'of'_x_']'">[the</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#::form_scope:'{'_'nnfun'_x_'>->'_x_'}'">{nnfun</a></span> <span class="id">_</span> <span class="id">>-></span> <span class="id">_}</span> <span class="id">of</span> <span class="id">f]</span> <span class="id">:</span> <span class="id">form_scope</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#is_true">is_true</a></span> (<span class="id">0</span> <span class="id"><=</span> <span class="id">_</span>)) <span class="id">=></span> <span class="id">solve</span> <span class="id">[apply:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#fun_ge0">fun_ge0]</a></span> <span class="id">:</span> <span class="id">core</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id"><a name="fimfun_bin">fimfun_bin</a></span>.<br/>
<span class="vernacular">Context</span> (<span class="id"><a name="T:14">T</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="R:15">R</a></span> <span class="id">:</span> <span class="id">numDomainType</span>).<br/>
<span class="vernacular">Variables</span> <span class="id"><a name="fimfun_bin.f">f</a></span> <span class="id"><a name="fimfun_bin.g">g</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfun_bin.T">T</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfun_bin.R">R}</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="max_fimfun_subproof">max_fimfun_subproof</a></span> <span class="id">:</span> <span class="id">@FiniteImage</span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfun_bin.T">T</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfun_bin.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#fimfun_bin.f">f</a></span> <span class="id">\max</span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfun_bin.g">g</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
 <span class="gallina-kwd">by</span> <span class="id">split;</span> <span class="id">apply:</span> (<span class="id"><a href="mathcomp.classical.cardinality.html#finite_image11">finite_image11</a></span> <span class="id">maxr</span>). Qed.</div>
<span class="hierarchy-builder">HB.instance</span> <span class="vernacular">Definition</span> <span class="id">_</span> <span class="id">:=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#max_fimfun_subproof">max_fimfun_subproof</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfun_bin">fimfun_bin</a></span>.<br/>
<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"f ^\+" (at level 1, format "f ^\+"</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"f ^\-" (at level 1, format "f ^\-"</span>).<br/>
<br/>
<span class="vernacular">Section</span> <span class="id"><a name="restrict_lemmas">restrict_lemmas</a></span>.<br/>
<span class="vernacular">Context</span> <span class="id">{aT</span> <span class="id">:</span> <span class="id">Type}</span> <span class="id">{rT</span> <span class="id">:</span> <span class="id">numFieldType}</span>.<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> (<span class="id">f</span> <span class="id">g</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#restrict_lemmas.aT">aT</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#restrict_lemmas.rT">rT</a></span>) (<span class="id">D</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#restrict_lemmas.aT">aT</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="restrict_set0">restrict_set0</a></span> <span class="id"><a name="f:20">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:20">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#patch_set0">patch_set0</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="restrict_ge0">restrict_ge0</a></span> <span class="id"><a name="D:21">D</a></span> <span class="id"><a name="f:22">f</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="x:23">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:21">D</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:23">x</a></span> <span class="id">-></span> <span class="id">0</span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:22">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:23">x</a></span>) <span class="id">-></span> <span class="gallina-kwd">forall</span> <span class="id"><a name="x:24">x,</a></span> <span class="id">0</span> <span class="id"><=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:22">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:21">D</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:24">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">f0</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span> <span class="id">=></span> <span class="id">//</span> <span class="id">/set_mem/f0-></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="ler_restrict">ler_restrict</a></span> <span class="id"><a name="D:25">D</a></span> <span class="id"><a name="f:26">f</a></span> <span class="id"><a name="g:27">g</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="x:28">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:25">D</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:28">x</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:26">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:28">x</a></span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:27">g</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:28">x</a></span>) <span class="id">-></span> <span class="gallina-kwd">forall</span> <span class="id"><a name="x:29">x,</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:26">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:25">D</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:29">x</a></span> <span class="id"><=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#g:27">g</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:25">D</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:29">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
 <span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">f0</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span> <span class="id">=></span> <span class="id">//</span> <span class="id">/set_mem/f0-></span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="mathcomp.analysis.numfun.html#restrict_lemmas">restrict_lemmas</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="erestrict_ge0">erestrict_ge0</a></span> <span class="id">{aT}</span> <span class="id">{rT</span> <span class="id">:</span> <span class="id">numFieldType}</span> (<span class="id"><a name="D:32">D</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#aT:30">aT</a></span>) (<span class="id"><a name="f:33">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#aT:30">aT</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::type_scope:'\bar'_x">\bar</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#rT:31">rT</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="x:34">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:32">D</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:34">x</a></span> <span class="id">-></span> (<span class="id">0</span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:33">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:34">x</a></span>)<span class="id">%E</span>) <span class="id">-></span> <span class="gallina-kwd">forall</span> <span class="id"><a name="x:35">x,</a></span> (<span class="id">0</span> <span class="id"><=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:33">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:32">D</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:35">x</a></span>)<span class="id">%E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
 <span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">f0</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span> <span class="id">=></span> <span class="id">//</span> <span class="id">/set_mem/f0-></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="lee_restrict">lee_restrict</a></span> <span class="id">{aT}</span> <span class="id">{rT</span> <span class="id">:</span> <span class="id">numFieldType}</span> (<span class="id"><a name="D:38">D</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#aT:36">aT</a></span>) (<span class="id"><a name="f:39">f</a></span> <span class="id"><a name="g:40">g</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#aT:36">aT</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::type_scope:'\bar'_x">\bar</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#rT:37">rT</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="x:41">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:38">D</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:41">x</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:39">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:41">x</a></span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:40">g</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:41">x</a></span>)<span class="id">%E</span> <span class="id">-></span> <span class="gallina-kwd">forall</span> <span class="id"><a name="x:42">x,</a></span> ((<span class="id"><a href="mathcomp.analysis.numfun.html#f:39">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:38">D</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:42">x</a></span> <span class="id"><=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#g:40">g</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:38">D</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:42">x</a></span>)<span class="id">%E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
 <span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">f0</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span> <span class="id">=></span> <span class="id">//</span> <span class="id">/set_mem/f0-></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="restrict_lee">restrict_lee</a></span> <span class="id">{aT}</span> <span class="id">{rT</span> <span class="id">:</span> <span class="id">numFieldType}</span> (<span class="id"><a name="D:45">D</a></span> <span class="id"><a name="E:46">E</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#aT:43">aT</a></span>) (<span class="id"><a name="f:47">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#aT:43">aT</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::type_scope:'\bar'_x">\bar</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#rT:44">rT</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="x:48">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#E:46">E</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:48">x</a></span> <span class="id">-></span> <span class="id">0</span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:47">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:48">x</a></span>)<span class="id">%E</span> <span class="id">-></span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.numfun.html#D:45">D</a></span> <span class="id">`<=`</span> <span class="id"><a href="mathcomp.analysis.numfun.html#E:46">E</a></span> <span class="id">-></span> <span class="gallina-kwd">forall</span> <span class="id"><a name="x:49">x,</a></span> ((<span class="id"><a href="mathcomp.analysis.numfun.html#f:47">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:45">D</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:49">x</a></span> <span class="id"><=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:47">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#E:46">E</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:49">x</a></span>)<span class="id">%E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
<span class="id">move=></span> <span class="id">f0</span> <span class="id">ED</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/restrict;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=></span> <span class="id">[xD|xD]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">mem_set//;</a></span> <span class="id">apply:</span> <span class="id">ED;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#in_setE">in_setE</a></span> <span class="gallina-kwd">in</span> <span class="id">xD</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=></span> <span class="id">//</span> <span class="id">xE;</span> <span class="id">apply:</span> <span class="id">f0;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#in_setE">in_setE</a></span> <span class="gallina-kwd">in</span> <span class="id">xE</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span class="id"><a name="erestrict_lemmas">erestrict_lemmas</a></span>.<br/>
<span class="id">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id"><a name="erestrict_lemmas.T">T</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="erestrict_lemmas.R">R</a></span> <span class="id">:</span> <span class="id">realDomainType</span>) (<span class="id"><a name="erestrict_lemmas.D">D</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#T:50">T</a></span>).<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> (<span class="id">f</span> <span class="id">g</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.T">T</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::type_scope:'\bar'_x">\bar</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.R">R</a></span>) (<span class="id">r</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.R">R</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="erestrict_set0">erestrict_set0</a></span> <span class="id"><a name="f:53">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:53">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#patch_set0">patch_set0</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="erestrict0">erestrict0</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> <span class="id">0</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.T">T</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::type_scope:'\bar'_x">\bar</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.R">R</a></span>) <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
 <span class="gallina-kwd">by</span> <span class="id">apply/funext</span> <span class="id">=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch/=;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="erestrictD">erestrictD</a></span> <span class="id"><a name="f:54">f</a></span> <span class="id"><a name="g:55">g</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:54">f</a></span> <span class="id">\+</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:55">g</a></span>) <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:54">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span> <span class="id">\+</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:55">g</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
 <span class="gallina-kwd">by</span> <span class="id">apply/funext=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch/=;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP;</a></span> <span class="id">rewrite</span> <span class="id">?adde0</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="erestrictN">erestrictN</a></span> <span class="id"><a name="f:56">f</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::ereal_scope:'\-'_x">\-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:56">f</a></span>) <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::ereal_scope:'\-'_x">\-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:56">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
 <span class="gallina-kwd">by</span> <span class="id">apply/funext=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch/=;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP;</a></span> <span class="id">rewrite</span> <span class="id">?oppe0</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="erestrictB">erestrictB</a></span> <span class="id"><a name="f:57">f</a></span> <span class="id"><a name="g:58">g</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:57">f</a></span> <span class="id">\-</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:58">g</a></span>) <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:57">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span> <span class="id">\-</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:58">g</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
 <span class="gallina-kwd">by</span> <span class="id">apply/funext=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch/=;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP;</a></span> <span class="id">rewrite</span> <span class="id">?sube0</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="erestrictM">erestrictM</a></span> <span class="id"><a name="f:59">f</a></span> <span class="id"><a name="g:60">g</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:59">f</a></span> <span class="id">\*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:60">g</a></span>) <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:59">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span> <span class="id">\*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:60">g</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
 <span class="gallina-kwd">by</span> <span class="id">apply/funext=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch/=;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP;</a></span> <span class="id">rewrite</span> <span class="id">?mule0</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="erestrict_scale">erestrict_scale</a></span> <span class="id"><a name="k:61">k</a></span> <span class="id"><a name="f:62">f</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span class="id"><a name="x:63">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.numfun.html#k:61">k%:E</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:62">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:63">x</a></span>) <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span> <span class="id">=</span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="x:64">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.numfun.html#k:61">k%:E</a></span> <span class="id">*</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:62">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas.D">D</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:64">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
 <span class="gallina-kwd">by</span> <span class="id">apply/funext=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch/=;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP;</a></span> <span class="id">rewrite</span> <span class="id">?mule0</span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="mathcomp.analysis.numfun.html#erestrict_lemmas">erestrict_lemmas</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id"><a name="funposneg">funposneg</a></span>.<br/>
<span class="id">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id"><a name="funepos">funepos</a></span> <span class="id"><a name="T:65">T</a></span> (<span class="id"><a name="R:66">R</a></span> <span class="id">:</span> <span class="id">realDomainType</span>) (<span class="id"><a name="f:67">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#T:65">T</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::type_scope:'\bar'_x">\bar</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#R:66">R</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span> <span class="id"><a name="x:68">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#maxe">maxe</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:67">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:68">x</a></span>) <span class="id">0</span>.<br/>
<span class="vernacular">Definition</span> <span class="id"><a name="funeneg">funeneg</a></span> <span class="id"><a name="T:69">T</a></span> (<span class="id"><a name="R:70">R</a></span> <span class="id">:</span> <span class="id">realDomainType</span>) (<span class="id"><a name="f:71">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#T:69">T</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::type_scope:'\bar'_x">\bar</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#R:70">R</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span> <span class="id"><a name="x:72">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#maxe">maxe</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::ereal_scope:'-'_x">-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:71">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:72">x</a></span>) <span class="id">0</span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg">funposneg</a></span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id"><a name="::ereal_scope:x_'^\+'">"f ^\+"</a></span> <span class="id">:=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#funepos">funepos</a></span> <span class="id">f</span>) <span class="id">:</span> <span class="id">ereal_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id"><a name="::ereal_scope:x_'^\-'">"f ^\-"</a></span> <span class="id">:=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#funeneg">funeneg</a></span> <span class="id">f</span>) <span class="id">:</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id"><a name="funposneg_lemmas">funposneg_lemmas</a></span>.<br/>
<span class="id">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id"><a name="funposneg_lemmas.T">T</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="funposneg_lemmas.R">R</a></span> <span class="id">:</span> <span class="id">realDomainType</span>) (<span class="id"><a name="funposneg_lemmas.D">D</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#T:73">T</a></span>).<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> (<span class="id">f</span> <span class="id">g</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.T">T</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::type_scope:'\bar'_x">\bar</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.R">R</a></span>) (<span class="id">r</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.R">R</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="funepos_ge0">funepos_ge0</a></span> <span class="id"><a name="f:76">f</a></span> <span class="id"><a name="x:77">x</a></span> <span class="id">:</span> <span class="id">0</span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:76">f^\+</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:77">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/funepos</span> <span class="id">/=</span> <span class="id">le_maxr</span> <span class="id">lexx</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orbT">orbT</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="funeneg_ge0">funeneg_ge0</a></span> <span class="id"><a name="f:78">f</a></span> <span class="id"><a name="x:79">x</a></span> <span class="id">:</span> <span class="id">0</span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:78">f^\-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:79">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/funeneg</span> <span class="id">le_maxr</span> <span class="id">lexx</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orbT">orbT</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="funeposN">funeposN</a></span> <span class="id"><a name="f:80">f</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::ereal_scope:'\-'_x">\-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:80">f</a></span>)<span class="id">^\+</span> <span class="id">=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:80">f^\-</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
 <span class="id">exact/funext</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="funenegN">funenegN</a></span> <span class="id"><a name="f:81">f</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::ereal_scope:'\-'_x">\-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:81">f</a></span>)<span class="id">^\-</span> <span class="id">=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:81">f^\+</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
 <span class="gallina-kwd">by</span> <span class="id">apply/funext</span> <span class="id">=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/funeneg</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="funepos_restrict">funepos_restrict</a></span> <span class="id"><a name="f:82">f</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:82">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D</a></span>)<span class="id">^\+</span> <span class="id">=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:82">f^\+</a></span>) <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
<span class="gallina-kwd">by</span> <span class="id">apply/funext</span> <span class="id">=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch/_^\+;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP;</a></span> <span class="id">rewrite</span> <span class="id">//=</span> <span class="id">maxxx</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="funeneg_restrict">funeneg_restrict</a></span> <span class="id"><a name="f:83">f</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:83">f</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D</a></span>)<span class="id">^\-</span> <span class="id">=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:83">f^\-</a></span>) <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
<span class="gallina-kwd">by</span> <span class="id">apply/funext</span> <span class="id">=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/patch/_^\-;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP;</a></span> <span class="id">rewrite</span> <span class="id">//=</span> <span class="id">oppr0</span> <span class="id">maxxx</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="ge0_funeposE">ge0_funeposE</a></span> <span class="id"><a name="f:84">f</a></span> <span class="id">:</span> (<span class="gallina-kwd">forall</span> <span class="id"><a name="x:85">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:85">x</a></span> <span class="id">-></span> <span class="id">0</span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:84">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:85">x</a></span>) <span class="id">-></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'{'_'in'_x_','_x_'}'">{in</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:84">f^\+</a></span> <span class="id">=1</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:84">f}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
 <span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">f0</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">=></span> <span class="id">Dx;</span> <span class="id">apply/max_idPl/f0</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="ge0_funenegE">ge0_funenegE</a></span> <span class="id"><a name="f:86">f</a></span> <span class="id">:</span> (<span class="gallina-kwd">forall</span> <span class="id"><a name="x:87">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:87">x</a></span> <span class="id">-></span> <span class="id">0</span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:86">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:87">x</a></span>) <span class="id">-></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'{'_'in'_x_','_x_'}'">{in</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:86">f^\-</a></span> <span class="id">=1</span> <span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> <span class="id">0}</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
<span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">f0</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">=></span> <span class="id">Dx;</span> <span class="id">apply/max_idPr;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_oppl">lee_oppl</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppe0">oppe0</a></span> <span class="id">f0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="le0_funeposE">le0_funeposE</a></span> <span class="id"><a name="f:88">f</a></span> <span class="id">:</span> (<span class="gallina-kwd">forall</span> <span class="id"><a name="x:89">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:89">x</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:88">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:89">x</a></span> <span class="id"><=</span> <span class="id">0</span>) <span class="id">-></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'{'_'in'_x_','_x_'}'">{in</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:88">f^\+</a></span> <span class="id">=1</span> <span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> <span class="id">0}</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
 <span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">f0</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">=></span> <span class="id">Dx;</span> <span class="id">exact/max_idPr/f0</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="le0_funenegE">le0_funenegE</a></span> <span class="id"><a name="f:90">f</a></span> <span class="id">:</span> (<span class="gallina-kwd">forall</span> <span class="id"><a name="x:91">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:91">x</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:90">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:91">x</a></span> <span class="id"><=</span> <span class="id">0</span>) <span class="id">-></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'{'_'in'_x_','_x_'}'">{in</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas.D">D,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:90">f^\-</a></span> <span class="id">=1</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::ereal_scope:'\-'_x">\-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:90">f}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
<span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">f0</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">=></span> <span class="id">Dx;</span> <span class="id">apply/max_idPl;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_oppr">lee_oppr</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppe0">oppe0</a></span> <span class="id">f0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="gt0_funeposM">gt0_funeposM</a></span> <span class="id"><a name="r:92">r</a></span> <span class="id"><a name="f:93">f</a></span> <span class="id">:</span> (<span class="id">0</span> <span class="id"><</span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:92">r</a></span>)<span class="id">%R</span> <span class="id">-></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span class="id"><a name="x:94">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:92">r%:E</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:93">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:94">x</a></span>)<span class="id">^\+</span> <span class="id">=</span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="x:95">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:92">r%:E</a></span> <span class="id">*</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:93">f^\+</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:95">x</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
 <span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">?;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> <span class="id">=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/funepos</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#maxeMr">maxeMr//</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mule0">mule0</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="gt0_funenegM">gt0_funenegM</a></span> <span class="id"><a name="r:96">r</a></span> <span class="id"><a name="f:97">f</a></span> <span class="id">:</span> (<span class="id">0</span> <span class="id"><</span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:96">r</a></span>)<span class="id">%R</span> <span class="id">-></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span class="id"><a name="x:98">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:96">r%:E</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:97">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:98">x</a></span>)<span class="id">^\-</span> <span class="id">=</span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="x:99">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:96">r%:E</a></span> <span class="id">*</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:97">f^\-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:99">x</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
<span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">r0;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> <span class="id">=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/funeneg</span> <span class="id">-muleN</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#maxeMr">maxeMr//</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mule0">mule0</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="lt0_funeposM">lt0_funeposM</a></span> <span class="id"><a name="r:100">r</a></span> <span class="id"><a name="f:101">f</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#r:100">r</a></span> <span class="id"><</span> <span class="id">0</span>)<span class="id">%R</span> <span class="id">-></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span class="id"><a name="x:102">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:100">r%:E</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:101">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:102">x</a></span>)<span class="id">^\+</span> <span class="id">=</span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="x:103">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::ereal_scope:'-'_x">-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:100">r%:E</a></span> <span class="id">*</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:101">f^\-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:103">x</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
<span class="id">move=></span> <span class="id">r0;</span> <span class="id">rewrite</span> <span class="id">-[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]</a></span>(<span class="id">opprK</span> <span class="id">r</span>)<span class="id">;</span> <span class="id">under</span> <span class="id"><a href="mathcomp.classical.boolp.html#eq_fun">eq_fun</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinN">EFinN</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mulNe">mulNe</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funeposN">funeposN</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#gt0_funenegM">gt0_funenegM</a></span> <span class="id">-1?ltr_oppr</span> <span class="id">?oppr0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="lt0_funenegM">lt0_funenegM</a></span> <span class="id"><a name="r:104">r</a></span> <span class="id"><a name="f:105">f</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#r:104">r</a></span> <span class="id"><</span> <span class="id">0</span>)<span class="id">%R</span> <span class="id">-></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span class="id"><a name="x:106">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:104">r%:E</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:105">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:106">x</a></span>)<span class="id">^\-</span> <span class="id">=</span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="x:107">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::ereal_scope:'-'_x">-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:104">r%:E</a></span> <span class="id">*</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:105">f^\+</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:107">x</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
<span class="id">move=></span> <span class="id">r0;</span> <span class="id">rewrite</span> <span class="id">-[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]</a></span>(<span class="id">opprK</span> <span class="id">r</span>)<span class="id">;</span> <span class="id">under</span> <span class="id"><a href="mathcomp.classical.boolp.html#eq_fun">eq_fun</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinN">EFinN</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mulNe">mulNe</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funenegN">funenegN</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#gt0_funeposM">gt0_funeposM</a></span> <span class="id">-1?ltr_oppr</span> <span class="id">?oppr0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fune_abse">fune_abse</a></span> <span class="id"><a name="f:108">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#abse">abse</a></span> <span class="id">\o</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:108">f</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:108">f^\+</a></span> <span class="id">\+</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:108">f^\-</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> <span class="id">=></span> <span class="id">x</span> <span class="id">/=;</span> <span class="id">have</span> <span class="id">[fx0|/ltW</span> <span class="id">fx0]</span> <span class="id">:=</span> <span class="id">leP</span> (<span class="id">f</span> <span class="id">x</span>) <span class="id">0</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee0_abs">lee0_abs//</a></span> <span class="id">/funepos</span> <span class="id">/funeneg</span>.<br/>
&nbsp;&nbsp;<span class="id">move/max_idPr</span> <span class="id">:</span> (<span class="id">fx0</span>) <span class="id">=></span> <span class="id">->;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#add0e">add0e</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">fx0;</span> <span class="id">rewrite</span> <span class="id">-{1}oppr0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinN">EFinN</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_oppr">lee_oppr</a></span> <span class="id">=></span> <span class="id">/max_idPl</span> <span class="id">-></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#gee0_abs">gee0_abs//</a></span> <span class="id">/funepos</span> <span class="id">/funeneg;</span> <span class="id">move/max_idPl</span> <span class="id">:</span> (<span class="id">fx0</span>) <span class="id">=></span> <span class="id">-></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">fx0;</span> <span class="id">rewrite</span> <span class="id">-{1}oppr0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinN">EFinN</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_oppl">lee_oppl</a></span> <span class="id">=></span> <span class="id">/max_idPr</span> <span class="id">->;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#adde0">adde0</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="funeposneg">funeposneg</a></span> <span class="id"><a name="f:109">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:109">f</a></span> <span class="id">=</span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="x:110">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:109">f^\+</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:110">x</a></span> <span class="id">-</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:109">f^\-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:110">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> <span class="id">=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/funepos</span> <span class="id">/funeneg;</span> <span class="id">have</span> <span class="id">[|/ltW]</span> <span class="id">:=</span> <span class="id">leP</span> (<span class="id">f</span> <span class="id">x</span>) <span class="id">0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-{1}oppe0</span> <span class="id">-lee_oppr</span> <span class="id">=></span> <span class="id">/max_idPl</span> <span class="id">->;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#add0e">add0e</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-{1}oppe0</span> <span class="id">-lee_oppl</span> <span class="id">=></span> <span class="id">/max_idPr</span> <span class="id">->;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#sube0">sube0</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="add_def_funeposneg">add_def_funeposneg</a></span> <span class="id"><a name="f:111">f</a></span> <span class="id"><a name="x:112">x</a></span> <span class="id">:</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:111">f^\+</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:112">x</a></span> <span class="id">+?</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#::ereal_scope:'-'_x">-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:111">f^\-</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:112">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/funeneg</span> <span class="id">/funepos;</span> <span class="id">case:</span> (<span class="id">f</span> <span class="id">x</span>) <span class="id">=></span> <span class="id">[r|</span> <span class="id">|];</span><br/>
&nbsp;&nbsp;<span class="id">[rewrite</span> <span class="id">-fine_max/=|rewrite</span> <span class="id">/maxe</span> <span class="id">/=</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ltNyr">ltNyr|rewrite</a></span> <span class="id">/maxe</span> <span class="id">/=</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ltNyr">ltNyr]</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="funeD_Dpos">funeD_Dpos</a></span> <span class="id"><a name="f:113">f</a></span> <span class="id"><a name="g:114">g</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:113">f</a></span> <span class="id">\+</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:114">g</a></span> <span class="id">=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:113">f</a></span> <span class="id">\+</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:114">g</a></span>)<span class="id">^\+</span> <span class="id">\-</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:113">f</a></span> <span class="id">\+</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:114">g</a></span>)<span class="id">^\-</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
<span class="id">apply/funext</span> <span class="id">=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/funepos</span> <span class="id">/funeneg;</span> <span class="id">have</span> <span class="id">[|/ltW]</span> <span class="id">:=</span> <span class="id">leP</span> <span class="id">0</span> (<span class="id">f</span> <span class="id">x</span> <span class="id">+</span> <span class="id">g</span> <span class="id">x</span>).<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-{1}oppe0</span> <span class="id">-lee_oppl</span> <span class="id">=></span> <span class="id">/max_idPr</span> <span class="id">->;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#sube0">sube0</a></span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-{1}oppe0</span> <span class="id">-lee_oppr</span> <span class="id">=></span> <span class="id">/max_idPl</span> <span class="id">->;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#add0e">add0e</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="funeD_posD">funeD_posD</a></span> <span class="id"><a name="f:115">f</a></span> <span class="id"><a name="g:116">g</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:115">f</a></span> <span class="id">\+</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:116">g</a></span> <span class="id">=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:115">f^\+</a></span> <span class="id">\+</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:116">g^\+</a></span>) <span class="id">\-</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:115">f^\-</a></span> <span class="id">\+</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:116">g^\-</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
<span class="id">apply/funext</span> <span class="id">=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/funepos</span> <span class="id">/funeneg</span>.<br/>
<span class="id">have</span> <span class="id">[|fx0]</span> <span class="id">:=</span> <span class="id">leP</span> <span class="id">0</span> (<span class="id">f</span> <span class="id">x</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#add0e">add0e</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">-{1}oppe0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_oppl">lee_oppl</a></span> <span class="id">=></span> <span class="id">/max_idPr</span> <span class="id">->;</span> <span class="id">have</span> <span class="id">[|/ltW]</span> <span class="id">:=</span> <span class="id">leP</span> <span class="id">0</span> (<span class="id">g</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-{1}oppe0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_oppl">lee_oppl</a></span> <span class="id">=></span> <span class="id">/max_idPr</span> <span class="id">->;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#adde0">adde0</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#sube0">sube0</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-{1}oppe0</span> <span class="id">-lee_oppr</span> <span class="id">=></span> <span class="id">/max_idPl</span> <span class="id">->;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#adde0">adde0</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#sub0e">sub0e</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
<span class="id">-</span> <span class="id">move/ltW</span> <span class="id">:</span> (<span class="id">fx0</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">-{1}oppe0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_oppr">lee_oppr</a></span> <span class="id">=></span> <span class="id">/max_idPl</span> <span class="id">-></span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">[|]</span> <span class="id">:=</span> <span class="id">leP</span> <span class="id">0</span> (<span class="id">g</span> <span class="id">x</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#add0e">add0e</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-{1}oppe0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_oppl">lee_oppl</a></span> <span class="id">=></span> <span class="id">/max_idPr</span> <span class="id">->;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#adde0">adde0</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#addeC">addeC</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move</span> <span class="id">gg'</span> <span class="id">:</span> (<span class="id">g</span> <span class="id">x</span>) <span class="id">=></span> <span class="id">g';</span> <span class="id">move:</span> <span class="id">g'</span> <span class="id">gg'</span> <span class="id">=></span> <span class="id">[g'</span> <span class="id">gg'</span> <span class="id">g'0|//|goo</span> <span class="id">_]</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">move/ltW</span> <span class="id">:</span> (<span class="id">g'0</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">-{1}oppe0</span> <span class="id">-lee_oppr</span> <span class="id">=></span> <span class="id">/max_idPl</span> <span class="id">=></span> <span class="id">-></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_num_oppeD">fin_num_oppeD//</a></span> <span class="id">2!oppeK</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/maxe</span> <span class="id">/=;</span> <span class="id">case:</span> (<span class="id">f</span> <span class="id">x</span>) <span class="id">fx0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funposneg_lemmas">funposneg_lemmas</a></span>.<br/>
<span class="id">#[global]</span><br/>
<span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#is_true">is_true</a></span> (<span class="id">0</span> <span class="id"><=</span> <span class="id">_</span> <span class="id">^\+</span> <span class="id">_</span>)<span class="id">%E</span>) <span class="id">=></span> <span class="id">solve</span> <span class="id">[apply:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funepos_ge0">funepos_ge0]</a></span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span><br/>
<span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#is_true">is_true</a></span> (<span class="id">0</span> <span class="id"><=</span> <span class="id">_</span> <span class="id">^\-</span> <span class="id">_</span>)<span class="id">%E</span>) <span class="id">=></span> <span class="id">solve</span> <span class="id">[apply:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#funeneg_ge0">funeneg_ge0]</a></span> <span class="id">:</span> <span class="id">core</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id"><a name="indic">indic</a></span> <span class="id">{T}</span> <span class="id">{R</span> <span class="id">:</span> <span class="id">ringType}</span> (<span class="id"><a name="A:119">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#T:117">T</a></span>) (<span class="id"><a name="x:120">x</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#T:117">T</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#R:118">R</a></span> <span class="id">:=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#x:120">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:119">A</a></span>)<span class="id">%:R</span>.<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"'\1_' A" (at level 8, A at level 2, format "'\1_' A"</span>) .<br/>
<span class="vernacular">Notation</span> <span class="id"><a name="::ring_scope:'\1_'_x">"'\1_' A"</a></span> <span class="id">:=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#indic">indic</a></span> <span class="id">A</span>) <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id"><a name="indic_lemmas">indic_lemmas</a></span>.<br/>
<span class="vernacular">Context</span> (<span class="id"><a name="T:121">T</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="R:122">R</a></span> <span class="id">:</span> <span class="id">ringType</span>).<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> <span class="id">A</span> <span class="id">D</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.T">T</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="indicE">indicE</a></span> <span class="id"><a name="A:123">A</a></span> (<span class="id"><a name="x:124">x</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.T">T</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_A</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:124">x</a></span> <span class="id">=</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#x:124">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:123">A</a></span>)<span class="id">%:R</span> <span class="id">:></span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.R">R</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="indicT">indicT</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_[set:</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.T">T]</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> (<span class="id">1</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.R">R</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
 <span class="gallina-kwd">by</span> <span class="id">apply/funext=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indicE">indicE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#in_setT">in_setT</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="indic0">indic0</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_</a></span>(<span class="id">@set0</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.T">T</a></span>) <span class="id">=</span> <span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> (<span class="id">0</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.R">R</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
 <span class="gallina-kwd">by</span> <span class="id">apply/funext=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indicE">indicE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#in_set0">in_set0</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="preimage_indic">preimage_indic</a></span> <span class="id"><a name="D:125">D</a></span> (<span class="id"><a name="B:126">B</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.R">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_D</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.analysis.numfun.html#B:126">B</a></span> <span class="id">=</span> <span class="gallina-kwd">if</span> <span class="id">1</span> <span class="id">\in</span> <span class="id"><a href="mathcomp.analysis.numfun.html#B:126">B</a></span> <span class="gallina-kwd">then</span> (<span class="gallina-kwd">if</span> <span class="id">0</span> <span class="id">\in</span> <span class="id"><a href="mathcomp.analysis.numfun.html#B:126">B</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:125">D</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span> (<span class="gallina-kwd">if</span> <span class="id">0</span> <span class="id">\in</span> <span class="id"><a href="mathcomp.analysis.numfun.html#B:126">B</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'~`'_x">~`</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:125">D</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
<span class="id">rewrite</span> <span class="id">/preimage/=</span> <span class="id">/indic;</span> <span class="id">apply/seteqP;</span> <span class="id">split</span> <span class="id">=></span> <span class="id">x;</span><br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=></span> <span class="id">B1;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=></span> <span class="id">B0</span> <span class="id">//=</span>.<br/>
<span class="id">-</span> <span class="id">have</span> <span class="id">[|]</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">x</span> <span class="id">\in</span> <span class="id">D</span>)<span class="id">;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span> <span class="gallina-kwd">in</span> <span class="id">B0</span>.<br/>
<span class="id">-</span> <span class="id">have</span> <span class="id">[|]</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">x</span> <span class="id">\in</span> <span class="id">D</span>)<span class="id">;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span> <span class="gallina-kwd">in</span> <span class="id">B1</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">have</span> <span class="id">[xD|xD]</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">x</span> <span class="id">\in</span> <span class="id">D</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span> <span class="gallina-kwd">in</span> <span class="id">B1|rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span> <span class="gallina-kwd">in</span> <span class="id">B0]</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">have</span> <span class="id">[xD|xD]</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">x</span> <span class="id">\in</span> <span class="id">D</span>)<span class="id">;</span> <span class="id">[rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="gallina-kwd">in</span> <span class="id">B1|rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="gallina-kwd">in</span> <span class="id">B0]</span>.<br/>
<span class="id">-</span> <span class="id">have</span> <span class="id">[xD|]</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">x</span> <span class="id">\in</span> <span class="id">D</span>)<span class="id">;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="gallina-kwd">in</span> <span class="id">B1</span>.<br/>
<span class="id">-</span> <span class="id">have</span> <span class="id">[|xD]</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">x</span> <span class="id">\in</span> <span class="id">D</span>)<span class="id">;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="gallina-kwd">in</span> <span class="id">B0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="image_indic">image_indic</a></span> <span class="id"><a name="D:127">D</a></span> <span class="id"><a name="A:128">A</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_D</a></span> <span class="id">@`</span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:128">A</a></span> <span class="id">=</span> (<span class="gallina-kwd">if</span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:128">A</a></span> <span class="id">`\`</span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:127">D</a></span> <span class="id">!=</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id">0]</span> <span class="gallina-kwd">else</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>) <span class="id">`|`</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">if</span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:128">A</a></span> <span class="id">`&`</span> <span class="id"><a href="mathcomp.analysis.numfun.html#D:127">D</a></span> <span class="id">!=</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_':'_x_']'">[set</a></span> <span class="id">1</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.R">R]</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
<span class="id">rewrite</span> <span class="id">/indic;</span> <span class="id">apply/predeqP</span> <span class="id">=></span> <span class="id">x;</span> <span class="id">split</span> <span class="id">=></span> <span class="id">[[t</span> <span class="id">At</span> <span class="id">/=</span> <span class="id"><-]|]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/indic;</span> <span class="id">case:</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">t</span> <span class="id">\in</span> <span class="id">D</span>))<span class="id">;</span> <span class="id">rewrite</span> <span class="id">?</span>(<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE,</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span>) <span class="id">=></span> <span class="id">Dt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[right|left];</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifT">ifT//=;</a></span> <span class="id">apply/set0P;</span> <span class="gallina-kwd">exists</span> <span class="id">t</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">[];</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn;</a></span> <span class="id">rewrite</span> <span class="id">?negbK//</span> <span class="id">=></span> <span class="id">/set0P[t</span> <span class="id">[At</span> <span class="id">Dt]]</span> <span class="id">->;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">t</span> <span class="id">=></span> <span class="id">//;</span> <span class="id">case:</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">t</span> <span class="id">\in</span> <span class="id">D</span>))<span class="id">;</span> <span class="id">rewrite</span> <span class="id">?</span>(<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE,</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="image_indic_sub">image_indic_sub</a></span> <span class="id"><a name="D:129">D</a></span> <span class="id"><a name="A:130">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_D</a></span> <span class="id">@`</span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:130">A</a></span> <span class="id">`<=`</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_';'_x_';'_'..'_';'_x_']'">[set</a></span> <span class="id">0;</span> <span class="id">1]</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.R">R</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#image_indic">image_indic;</a></span> <span class="id">do</span> <span class="id">![case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP=></a></span> <span class="id">//=</span> <span class="id">_]</span> <span class="id">=></span> <span class="id">//</span> <span class="id">t</span> <span class="id">[]//=</span> <span class="id">->;</span> <span class="id">[left|right]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fimfunE">fimfunE</a></span> (<span class="id"><a name="f:131">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.T">T</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas.R">R}</a></span>) <span class="id"><a name="x:132">x</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.numfun.html#f:131">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:132">x</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::ring_scope:'\sum_'_'('_x_'\in'_x_')'_x">\sum_</a></span>(<span class="id"><a name="y:133">y</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#range">range</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:131">f</a></span>) (<span class="id"><a href="mathcomp.analysis.numfun.html#y:133">y</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_</a></span>(<span class="id"><a href="mathcomp.analysis.numfun.html#f:131">f</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#y:133">y]</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:132">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigD1">fsbigD1</a></span> (<span class="id">f</span> <span class="id">x</span>))<span class="id">//</span> <span class="id">/=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indicE">indicE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">mem_set//</a></span> <span class="id">mulr1</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig1">fsbig1</a></span> <span class="id">?addr0//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">y</span> <span class="id">[fy</span> <span class="id">/=</span> <span class="id">/nesym</span> <span class="id">yfx];</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indicE">indicE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#memNset">memNset</a></span> <span class="id">?mulr0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_lemmas">indic_lemmas</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="xsection_indic">xsection_indic</a></span> (<span class="id"><a name="R:137">R</a></span> <span class="id">:</span> <span class="id">ringType</span>) <span class="id"><a name="T1:138">T1</a></span> <span class="id"><a name="T2:139">T2</a></span> (<span class="id"><a name="A:140">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#T1:138">T1</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#T2:139">T2</a></span>)) <span class="id"><a name="x:141">x</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:140">A</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:141">x</a></span> <span class="id">=</span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="y:142">y</a></span> <span class="id">=></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_A</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#x:141">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#y:142">y</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#R:137">R</a></span>)) <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id">1]</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
<span class="id">apply/seteqP;</span> <span class="id">split</span> <span class="id">=></span> <span class="id">[y/mem_set/=|y/=];</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indicE">indicE</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_xsection">mem_xsection</a></span> <span class="id">=></span> <span class="id">-></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/xsection/=;</span> <span class="id">case:</span> (<span class="id">_</span> <span class="id">\in</span> <span class="id">_</span>) <span class="id">=></span> <span class="id">//=</span> <span class="id">/esym/eqP</span> <span class="id">/[!oner_eq0]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="ysection_indic">ysection_indic</a></span> (<span class="id"><a name="R:143">R</a></span> <span class="id">:</span> <span class="id">ringType</span>) <span class="id"><a name="T1:144">T1</a></span> <span class="id"><a name="T2:145">T2</a></span> (<span class="id"><a name="A:146">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#T1:144">T1</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#T2:145">T2</a></span>)) <span class="id"><a name="y:147">y</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#ysection">ysection</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:146">A</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#y:147">y</a></span> <span class="id">=</span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="x:148">x</a></span> <span class="id">=></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_A</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#x:148">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#y:147">y</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#R:143">R</a></span>)) <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id">1]</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
<span class="id">apply/seteqP;</span> <span class="id">split</span> <span class="id">=></span> <span class="id">[x/mem_set/=|x/=];</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indicE">indicE</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_ysection">mem_ysection</a></span> <span class="id">=></span> <span class="id">-></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/ysection/=;</span> <span class="id">case:</span> (<span class="id">_</span> <span class="id">\in</span> <span class="id">_</span>) <span class="id">=></span> <span class="id">//=</span> <span class="id">/esym/eqP</span> <span class="id">/[!oner_eq0]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="indic_restrict">indic_restrict</a></span> <span class="id">{T</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.pointedType">pointedType}</a></span> <span class="id">{R</span> <span class="id">:</span> <span class="id">numFieldType}</span> (<span class="id"><a name="A:151">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#T:149">T</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_A</a></span> <span class="id">=</span> <span class="id">1</span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:151">A</a></span> <span class="id">:></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#T:149">T</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#R:150">R</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
 <span class="gallina-kwd">by</span> <span class="id">apply/funext</span> <span class="id">=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indicE">indicE</a></span> <span class="id">/patch;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="restrict_indic">restrict_indic</a></span> <span class="id"><a name="T:152">T</a></span> (<span class="id"><a name="R:153">R</a></span> <span class="id">:</span> <span class="id">numFieldType</span>) (<span class="id"><a name="E:154">E</a></span> <span class="id"><a name="A:155">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#T:152">T</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_E</a></span> <span class="id">\_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:155">A</a></span>) <span class="id">=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_</a></span>(<span class="id"><a href="mathcomp.analysis.numfun.html#E:154">E</a></span> <span class="id">`&`</span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:155">A</a></span>) <span class="id">:></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#T:152">T</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#R:153">R</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
<span class="id">apply/funext</span> <span class="id">=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">/restrict</span> <span class="id">2!indicE</span>.<br/>
<span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=></span> <span class="id">[|]</span> <span class="id">xA;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#in_setI">in_setI</a></span> <span class="id">xA</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">andbT</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#in_setI">in_setI</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">xA</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbF">andbF</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span class="id"><a name="ring">ring</a></span>.<br/>
<span class="vernacular">Context</span> (<span class="id"><a name="aT:156">aT</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.pointedType">pointedType</a></span>) (<span class="id"><a name="rT:157">rT</a></span> <span class="id">:</span> <span class="id">ringType</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fimfun_mulr_closed">fimfun_mulr_closed</a></span> <span class="id">:</span> <span class="id">mulr_closed</span> (<span class="id">@fimfun</span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.aT">aT</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.rT">rT</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
<span class="id">split=></span> <span class="id">[|f</span> <span class="id">g];</span> <span class="id">rewrite</span> <span class="id">!inE/=;</span> <span class="id">first</span> <span class="id">exact:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_image_cst">finite_image_cst</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">fA</span> <span class="id">gA;</span> <span class="id">apply:</span> (<span class="id"><a href="mathcomp.classical.cardinality.html#finite_image11">finite_image11</a></span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="x:158">x</a></span> <span class="id"><a name="y:159">y</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:158">x</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#y:159">y</a></span>)).<br/>
Qed.</div>
<span class="vernacular">Canonical</span> <span class="id"><a name="fimfun_mul">fimfun_mul</a></span> <span class="id">:=</span> <span class="id">MulrPred</span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfun_mulr_closed">fimfun_mulr_closed</a></span>.<br/>
<span class="vernacular">Canonical</span> <span class="id"><a name="fimfun_ring">fimfun_ring</a></span> <span class="id">:=</span> <span class="id">SubringPred</span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfun_mulr_closed">fimfun_mulr_closed</a></span>.<br/>
<span class="vernacular">Definition</span> <span class="id"><a name="fimfun_ringMixin">fimfun_ringMixin</a></span> <span class="id">:=</span> <span class="id">[ringMixin</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.aT">aT</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.rT">rT}</a></span> <span class="gallina-kwd">by</span> <span class="id"><:]</span>.<br/>
<span class="vernacular">Canonical</span> <span class="id"><a name="fimfun_ringType">fimfun_ringType</a></span> <span class="id">:=</span> <span class="id">RingType</span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.aT">aT</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.rT">rT}</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfun_ringMixin">fimfun_ringMixin</a></span>.<br/>
<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> (<span class="id">f</span> <span class="id">g</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.aT">aT</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.rT">rT}</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fimfunM">fimfunM</a></span> <span class="id"><a name="f:162">f</a></span> <span class="id"><a name="g:163">g</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:162">f</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:163">g</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:162">f</a></span> <span class="id">\*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:163">g</a></span> <span class="id">:></span> (<span class="id">_</span> <span class="id">-></span> <span class="id">_</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<span class="vernacular">Lemma</span> <span class="id"><a name="fimfun1">fimfun1</a></span> <span class="id">:</span> (<span class="id">1</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.aT">aT</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.rT">rT}</a></span>) <span class="id">=</span> <span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> <span class="id">1</span> <span class="id">:></span> (<span class="id">_</span> <span class="id">-></span> <span class="id">_</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<span class="vernacular">Lemma</span> <span class="id"><a name="fimfun_prod">fimfun_prod</a></span> <span class="id"><a name="I:164">I</a></span> <span class="id"><a name="r:165">r</a></span> (<span class="id"><a name="P:166">P</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'{'_'pred'_x_'}'">{pred</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#I:164">I}</a></span>) (<span class="id"><a name="f:167">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#I:164">I</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.aT">aT</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.rT">rT}</a></span>) (<span class="id"><a name="x:168">x</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.aT">aT</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id">\sum_</span>(<span class="id"><a name="i:169">i</a></span> <span class="id"><-</span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:165">r</a></span> <span class="id">|</span> <span class="id"><a href="mathcomp.analysis.numfun.html#P:166">P</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#i:169">i</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#f:167">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#i:169">i</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:168">x</a></span> <span class="id">=</span> <span class="id">\sum_</span>(<span class="id"><a name="i:172">i</a></span> <span class="id"><-</span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:165">r</a></span> <span class="id">|</span> <span class="id"><a href="mathcomp.analysis.numfun.html#P:166">P</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#i:172">i</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#f:167">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#i:172">i</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:168">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
 <span class="gallina-kwd">by</span> <span class="id">elim/big_rec2:</span> <span class="id">_</span> <span class="id">=></span> <span class="id">//=</span> <span class="id">i</span> <span class="id">y</span> <span class="id">?</span> <span class="id">Pi</span> <span class="id"><-</span>. Qed.</div>
<span class="vernacular">Lemma</span> <span class="id"><a name="fimfunX">fimfunX</a></span> <span class="id"><a name="f:175">f</a></span> <span class="id"><a name="n:176">n</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:175">f</a></span> <span class="id">^+</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:176">n</a></span> <span class="id">=</span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="x:177">x</a></span> <span class="id">=></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:175">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:177">x</a></span> <span class="id">^+</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:176">n</a></span>) <span class="id">:></span> (<span class="id">_</span> <span class="id">-></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
<span class="gallina-kwd">by</span> <span class="id">apply/funext</span> <span class="id">=></span> <span class="id">x;</span> <span class="id">elim:</span> <span class="id">n</span> <span class="id">=></span> <span class="id">[|n</span> <span class="id">IHn]//;</span> <span class="id">rewrite</span> <span class="id">!exprS</span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfunM">fimfunM/=</a></span> <span class="id">IHn</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="indic_fimfun_subproof">indic_fimfun_subproof</a></span> <span class="id"><a name="X:178">X</a></span> <span class="id">:</span> <span class="id">@FiniteImage</span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.aT">aT</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.rT">rT</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_X</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
<span class="id">split;</span> <span class="id">apply:</span> (<span class="id"><a href="mathcomp.classical.cardinality.html#finite_subfset">finite_subfset</a></span> <span class="id">[fset</span> <span class="id">0;</span> <span class="id">1]%fset</span>) <span class="id">=></span> <span class="id">x</span> <span class="id">[tt</span> <span class="id">/=]</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!inE</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indicE">indicE;</a></span> <span class="id">case:</span> (<span class="id">_</span> <span class="id">\in</span> <span class="id">_</span>) <span class="id">=></span> <span class="id">_</span> <span class="id"><-;</span> <span class="id">rewrite</span> <span class="id">?eqxx</span> <span class="id">?orbT</span>.<br/>
Qed.</div>
<span class="hierarchy-builder">HB.instance</span> <span class="vernacular">Definition</span> <span class="id">_</span> <span class="id"><a name="X:179">X</a></span> <span class="id">:=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_fimfun_subproof">indic_fimfun_subproof</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#X:179">X</a></span>.<br/>
<span class="vernacular">Definition</span> <span class="id"><a name="indic_fimfun">indic_fimfun</a></span> (<span class="id"><a name="X:180">X</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.aT">aT</a></span>) <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::form_scope:'['_'the'_x_'of'_x_']'">[the</a></span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.aT">aT</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.rT">rT}</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_X]</a></span>.<br/>
<br/>
<span class="hierarchy-builder">HB.instance</span> <span class="vernacular">Definition</span> <span class="id">_</span> <span class="id"><a name="k:181">k</a></span> <span class="id"><a name="f:182">f</a></span> <span class="id">:=</span> <span class="id"><a href="mathcomp.classical.cardinality.html#FImFun.copy">FImFun.copy</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#k:181">k</a></span> <span class="id">\o*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:182">f</a></span>) (<span class="id"><a href="mathcomp.analysis.numfun.html#f:182">f</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.classical.cardinality.html#cst_fimfun">cst_fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#k:181">k</a></span>).<br/>
<span class="vernacular">Definition</span> <span class="id"><a name="scale_fimfun">scale_fimfun</a></span> <span class="id"><a name="k:183">k</a></span> <span class="id"><a name="f:184">f</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::form_scope:'['_'the'_x_'of'_x_']'">[the</a></span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.aT">aT</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring.rT">rT}</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.numfun.html#k:183">k</a></span> <span class="id">\o*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:184">f]</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="mathcomp.analysis.numfun.html#ring">ring</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_fimfun">indic_fimfun</a></span> <span class="id">{aT</span> <span class="id">rT}</span> <span class="id">_</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id"><a name="comring">comring</a></span>.<br/>
<span class="vernacular">Context</span> (<span class="id"><a name="aT:185">aT</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.pointedType">pointedType</a></span>) (<span class="id"><a name="rT:186">rT</a></span> <span class="id">:</span> <span class="id">comRingType</span>).<br/>
<span class="vernacular">Definition</span> <span class="id"><a name="fimfun_comRingMixin">fimfun_comRingMixin</a></span> <span class="id">:=</span> <span class="id">[comRingMixin</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#comring.aT">aT</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#comring.rT">rT}</a></span> <span class="gallina-kwd">by</span> <span class="id"><:]</span>.<br/>
<span class="vernacular">Canonical</span> <span class="id"><a name="fimfun_comRingType">fimfun_comRingType</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">ComRingType</span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#comring.aT">aT</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#comring.rT">rT}</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfun_comRingMixin">fimfun_comRingMixin</a></span>.<br/>
<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> (<span class="id">f</span> <span class="id">g</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#::form_scope:'{'_'fimfun'_x_'>->'_x_'}'">{fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#comring.aT">aT</a></span> <span class="id">>-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#comring.rT">rT}</a></span>).<br/>
<span class="hierarchy-builder">HB.instance</span> <span class="vernacular">Definition</span> <span class="id">_</span> <span class="id"><a name="f:187">f</a></span> <span class="id"><a name="g:188">g</a></span> <span class="id">:=</span> <span class="id"><a href="mathcomp.classical.cardinality.html#FImFun.copy">FImFun.copy</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#f:187">f</a></span> <span class="id">\*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:188">g</a></span>) (<span class="id"><a href="mathcomp.analysis.numfun.html#f:187">f</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:188">g</a></span>).<br/>
<span class="vernacular">End</span> <span class="id"><a href="mathcomp.analysis.numfun.html#comring">comring</a></span>.<br/>
<br/>
<span class="hierarchy-builder">HB.factory</span> <span class="vernacular">Record</span> <span class="id">FiniteDecomp</span> (<span class="id"><a name="T:189">T</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.pointedType">pointedType</a></span>) (<span class="id"><a name="R:190">R</a></span> <span class="id">:</span> <span class="id">ringType</span>) (<span class="id"><a name="f:191">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#T:189">T</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#R:190">R</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id"><a name="fimfunE:198">fimfunE</a></span> <span class="id">:</span> <span class="gallina-kwd">exists</span> (<span class="id"><a name="r:192">r</a></span> <span class="id">:</span> <span class="id">seq</span> <span class="id"><a href="mathcomp.analysis.numfun.html#R:190">R</a></span>) (<span class="id"><a name="A_:193">A_</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#R:190">R</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#T:189">T</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id"><a name="x:194">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:191">f</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:194">x</a></span> <span class="id">=</span> <span class="id">\sum_</span>(<span class="id"><a name="y:195">y</a></span> <span class="id"><-</span> <span class="id"><a href="mathcomp.analysis.numfun.html#r:192">r</a></span>) (<span class="id"><a href="mathcomp.analysis.numfun.html#y:195">y</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#::ring_scope:'\1_'_x">\1_</a></span>(<span class="id"><a href="mathcomp.analysis.numfun.html#A_:193">A_</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#y:195">y</a></span>) <span class="id"><a href="mathcomp.analysis.numfun.html#x:194">x</a></span>) <span class="id">}</span>.<br/>
<span class="hierarchy-builder">HB.builders</span> <span class="vernacular">Context</span> <span class="id"><a name="T:202">T</a></span> <span class="id"><a name="R:203">R</a></span> <span class="id"><a name="f:204">f</a></span> <span class="id">of</span> <span class="id">@FiniteDecomp</span> <span class="id"><a href="mathcomp.analysis.numfun.html#T:202">T</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#R:203">R</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:204">f</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span class="id"><a name="Builders_20.finite_subproof">finite_subproof:</a></span> <span class="id">@FiniteImage</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Builders_20.Builders_20.T">T</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Builders_20.Builders_20.R">R</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Builders_20.Builders_20.f">f</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">have</span> <span class="id">[r</span> <span class="id">[A_</span> <span class="id">fE]]</span> <span class="id">:=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Builders_20.fimfunE">fimfunE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span> <span class="id">-></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Builders_20.Builders_20.f">f</a></span> <span class="id">=</span> <span class="id">\sum_</span>(<span class="id"><a name="y:208">y</a></span> <span class="id"><-</span> <span class="id">r</span>) <span class="id"><a href="mathcomp.classical.cardinality.html#cst_fimfun">cst_fimfun</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#y:208">y</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indic_fimfun">indic_fimfun</a></span> (<span class="id">A_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#y:208">y</a></span>) <span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply/funext=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">fE</span> <span class="id"><a href="mathcomp.classical.cardinality.html#fimfun_sum">fimfun_sum</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="hierarchy-builder">HB.instance</span> <span class="vernacular">Definition</span> <span class="id">_</span> <span class="id">:=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Builders_20.finite_subproof">finite_subproof</a></span>.<br/>
<span class="id"><a href="mathcomp.analysis.numfun.html#Builders_20.Builders_20">HB.end</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id"><a name="Tietze">Tietze</a></span>.<br/>
<span class="vernacular">Context</span> <span class="id">{X</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.topology.html#Topological.Exports.topologicalType">topologicalType}</a></span> <span class="id">{R</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType}</a></span>.<br/>
<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id"><a name="Tietze.::ring_scope:'3'">"3"</a></span> <span class="id">:=</span> <span class="id">3%:R</span> <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span class="id"><a name="Tietze.normalX">normalX</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.topology.html#normal_space">normal_space</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="urysohn_ext_itv">urysohn_ext_itv</a></span> <span class="id"><a name="A:214">A</a></span> <span class="id"><a name="B:215">B</a></span> <span class="id"><a name="x:216">x</a></span> <span class="id"><a name="y:217">y</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#closed">closed</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:214">A</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.topology.html#closed">closed</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#B:215">B</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:214">A</a></span> <span class="id">`&`</span> <span class="id"><a href="mathcomp.analysis.numfun.html#B:215">B</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:216">x</a></span> <span class="id"><</span> <span class="id"><a href="mathcomp.analysis.numfun.html#y:217">y</a></span> <span class="id">-></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id"><a name="f:218">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R,</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'['_'/\'_x_','_x_','_x_'&'_x_']'">[/\</a></span> <span class="id"><a href="mathcomp.analysis.topology.html#continuous">continuous</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:218">f,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.numfun.html#f:218">f</a></span> <span class="id">@`</span> <span class="id"><a href="mathcomp.analysis.numfun.html#A:214">A</a></span> <span class="id">`<=`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:216">x],</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:218">f</a></span> <span class="id">@`</span> <span class="id"><a href="mathcomp.analysis.numfun.html#B:215">B</a></span> <span class="id">`<=`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#y:217">y]</a></span> <span class="id">&</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#range">range</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:218">f</a></span> <span class="id">`<=`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'`['_x_','_x_']'">`[x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#y:217">y]]</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
<span class="id">move=></span> <span class="id">cA</span> <span class="id">cB</span> <span class="id">A0</span> <span class="id">xy;</span> <span class="id">move/normal_separatorP</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.normalX">normalX</a></span> <span class="id">=></span> <span class="id">urysohn_ext</span>.<br/>
<span class="id">have</span> <span class="id">/</span>(<span class="id">@uniform_separatorP</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span>)<span class="id">[f</span> <span class="id">[cf</span> <span class="id">f01</span> <span class="id">f0</span> <span class="id">f1]]</span> <span class="id">:=</span> <span class="id">urysohn_ext</span> <span class="id">_</span> <span class="id">_</span> <span class="id">cA</span> <span class="id">cB</span> <span class="id">A0</span>.<br/>
<span class="id">pose</span> <span class="id">g</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span> <span class="id">:=</span> <span class="id"><a href="mathcomp.classical.set_interval.html#line_path">line_path</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">\o</span> <span class="id">f;</span> <span class="gallina-kwd">exists</span> <span class="id">g;</span> <span class="id">split;</span> <span class="id">rewrite</span> <span class="id">/g</span> <span class="id">/=</span>.<br/>
<span class="id">-</span> <span class="id">move=></span> <span class="id">t;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.analysis.topology.html#continuous_comp">continuous_comp;</a></span> <span class="id">first</span> <span class="id">exact:</span> <span class="id">cf</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@continuousD</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span> <span class="id"><a href="mathcomp.analysis.normedtype.html#NormedModule.Exports.::form_scope:'['_'normedModType'_x_'of'_x_']'">[normedModType</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R^o]</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#continuousM">continuousM;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg_cst">cvg_cst</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply:</span> (<span class="id">@continuousB</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span> <span class="id"><a href="mathcomp.analysis.normedtype.html#NormedModule.Exports.::form_scope:'['_'normedModType'_x_'of'_x_']'">[normedModType</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R^o]</a></span>) <span class="id">=></span> <span class="id">//;</span> <span class="id">exact:</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg_cst">cvg_cst</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#continuousM">continuousM;</a></span> <span class="id">[exact:</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg_id">cvg_id|exact:</a></span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg_cst">cvg_cst]</a></span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-image_comp</span> <span class="id">=></span> <span class="id">z</span> <span class="id">/=</span> <span class="id">[?</span> <span class="id">/f0</span> <span class="id">-></span> <span class="id"><-];</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.set_interval.html#line_path0">line_path0</a></span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-image_comp</span> <span class="id">=></span> <span class="id">z</span> <span class="id">/=</span> <span class="id">[?</span> <span class="id">/f1</span> <span class="id">-></span> <span class="id"><-];</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.set_interval.html#line_path1">line_path1</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">-image_comp;</span> <span class="id">apply:</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#subset_trans">subset_trans</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#image_subset">image_subset</a></span> <span class="id">_</span> <span class="id">f01</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.set_interval.html#range_line_path">range_line_path</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Context</span> (<span class="id"><a name="A:219">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span>).<br/>
<span class="vernacular">Hypothesis</span> <span class="id"><a name="Tietze.clA">clA</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.topology.html#closed">closed</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span>.<br/>
<br/>
<span class="id">Local</span> <span class="vernacular">Notation</span> <span class="id"><a name="Tietze.:::'3'">"3"</a></span> <span class="id">:=</span> <span class="id">3%:R</span>.<br/>
<br/>
<span class="id">Local</span> <span class="vernacular">Lemma</span> <span class="id"><a name="tietze_step'">tietze_step'</a></span> (<span class="id"><a name="f:221">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span>) (<span class="id"><a name="M:222">M</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><</span> <span class="id"><a href="mathcomp.analysis.numfun.html#M:222">M</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'{'_'within'_x_','_'continuous'_x_'}'">{within</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A,</a></span> <span class="id">continuous</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:221">f}</a></span> <span class="id">-></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="x:223">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:223">x</a></span> <span class="id">-></span> <span class="id">`|f</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:223">x|</a></span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#M:222">M</a></span>) <span class="id">-></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id"><a name="g:224">g</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R,</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'['_'/\'_x_','_x_'&'_x_']'">[/\</a></span> <span class="id"><a href="mathcomp.analysis.topology.html#continuous">continuous</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:224">g,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="x:225">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:225">x</a></span> <span class="id">-></span> <span class="id">`|f</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:225">x</a></span> <span class="id">-</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:224">g</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:225">x|</a></span> <span class="id"><=</span> <span class="id">2/3</span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#M:222">M</a></span>) <span class="id">&</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="x:226">x,</a></span> <span class="id">`|g</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:226">x|</a></span> <span class="id"><=</span> <span class="id">1/3</span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#M:222">M</a></span>)<span class="id">]</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
<span class="id">move:</span> <span class="id">M</span> <span class="id">=></span> <span class="id">_/posnumP[M]</span> <span class="id">ctsf</span> <span class="id">fA1</span>.<br/>
<span class="id">have</span> <span class="id">[]</span> <span class="id">:=</span> <span class="id">@urysohn_ext_itv</span> (<span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span> <span class="id">`&`</span> <span class="id">f</span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'`]'_'-oo'_','_x_']'">`]-oo,</a></span> <span class="id">-</span>(<span class="id">1/3</span>) <span class="id">*</span> <span class="id">M%:num]</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span> <span class="id">`&`</span> <span class="id">f</span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'`['_x_','_'+oo'_'['">`[1/3</a></span> <span class="id">*</span> <span class="id">M%:num,+oo[</span>) (<span class="id">-</span>(<span class="id">1/3</span>) <span class="id">*</span> <span class="id">M%:num</span>) (<span class="id">1/3</span> <span class="id">*</span> <span class="id">M%:num</span>).<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.topology.html#closed_setSI">closed_setSI;</a></span> <span class="id">exact:</span> <span class="id"><a href="mathcomp.analysis.topology.html#closed_comp">closed_comp</a></span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.topology.html#closed_setSI">closed_setSI;</a></span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.analysis.topology.html#closed_comp">closed_comp</a></span> <span class="id">=></span> <span class="id">//;</span> <span class="id">exact:</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#interval_closed">interval_closed</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIACA">setIACA</a></span> <span class="id">-preimage_setI</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">eqEsubset;</a></span> <span class="id">split</span> <span class="id">=></span> <span class="id">z</span> <span class="id">//</span> <span class="id">[_</span> <span class="id">[]]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!set_itvE/=</span> <span class="id">=></span> <span class="id">/[swap]</span> <span class="id">/le_trans</span> <span class="id">/[apply]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">leNgt</span> <span class="id">mulNr</span> <span class="id">gtr_opp//</span> <span class="id">mulr_gt0//</span> <span class="id">divr_gt0</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">mulNr</span> <span class="id">gtr_opp//</span> <span class="id">mulr_gt0</span>.<br/>
<span class="id">move=></span> <span class="id">g</span> <span class="id">[ctsg</span> <span class="id">gL3</span> <span class="id">gR3</span> <span class="id">grng];</span> <span class="gallina-kwd">exists</span> <span class="id">g;</span> <span class="id">split</span> <span class="id">=></span> <span class="id">//;</span> <span class="id">first</span> <span class="id">last</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">ler_norml</span> <span class="id">-mulNr;</span> <span class="id">apply:</span> <span class="id">grng;</span> <span class="gallina-kwd">exists</span> <span class="id">x</span>.<br/>
<span class="id">move=></span> <span class="id">x</span> <span class="id">Ax;</span> <span class="id">have</span> <span class="id">:=</span> <span class="id">fA1</span> <span class="id">_</span> <span class="id">Ax;</span> <span class="id">rewrite</span> <span class="id">2!ler_norml</span> <span class="id">=></span> <span class="id">/andP[Mfx</span> <span class="id">fxM]</span>.<br/>
<span class="id">have</span> <span class="id">[xL|xL]</span> <span class="id">:=</span> <span class="id">leP</span> (<span class="id">f</span> <span class="id">x</span>) (<span class="id">-</span>(<span class="id">1/3</span>) <span class="id">*</span> <span class="id">M%:num</span>).<br/>
&nbsp;&nbsp;<span class="id">have:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_'|'_x_'in'_x_']'">[set</a></span> <span class="id">g</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:227">x</a></span> <span class="id">|</span> <span class="id"><a name="x:227">x</a></span> <span class="gallina-kwd">in</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span> <span class="id">`&`</span> <span class="id">f@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'`]'_'-oo'_','_x_']'">`]-oo,</a></span> <span class="id">-</span>(<span class="id">1/3</span>) <span class="id">*</span> <span class="id">M%:num]]</span> (<span class="id">g</span> <span class="id">x</span>) <span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">move/gL3=></span> <span class="id">->;</span> <span class="id">rewrite</span> <span class="id">!mulNr</span> <span class="id">opprK;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-ler_subl_addr</span> <span class="id">-opprD</span> <span class="id">-2!mulrDl</span> <span class="id">natr1</span> <span class="id">divrr</span> <span class="id">?unitfE//</span> <span class="id">mul1r</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-ler_subr_addr</span> <span class="id">-2!mulrBl</span> <span class="id">-</span>(<span class="id">@natrB</span> <span class="id">_</span> <span class="id">2</span> <span class="id">1</span>)<span class="id">//</span> (<span class="id">le_trans</span> <span class="id">xL</span>)<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">ler_pmul2r//</span> <span class="id">ltW//</span> <span class="id">gtr_opp//</span> <span class="id">divr_gt0</span>.<br/>
<span class="id">have</span> <span class="id">[xR|xR]</span> <span class="id">:=</span> <span class="id">lerP</span> (<span class="id">1/3</span> <span class="id">*</span> <span class="id">M%:num</span>) (<span class="id">f</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_'|'_x_'in'_x_']'">[set</a></span> <span class="id">g</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:228">x</a></span> <span class="id">|</span> <span class="id"><a name="x:228">x</a></span> <span class="gallina-kwd">in</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span> <span class="id">`&`</span> <span class="id">f@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'`['_x_','_'+oo'_'['">`[1/3</a></span> <span class="id">*</span> <span class="id">M%:num,</span> <span class="id">+oo[]</span> (<span class="id">g</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> <span class="id">x</span> <span class="id">=></span> <span class="id">//;</span> <span class="id">split</span> <span class="id">=></span> <span class="id">//;</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">in_itv</span> <span class="id">//=</span> <span class="id">xR</span>.<br/>
&nbsp;&nbsp;<span class="id">move/gR3</span> <span class="id">=></span> <span class="id">->;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ler_subr_addl</span> <span class="id">-2!mulrBl</span> (<span class="id">le_trans</span> <span class="id">_</span> <span class="id">xR</span>)<span class="id">//</span> <span class="id">ler_pmul2r//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">ler_wpmul2r</span> <span class="id">?invr_ge0</span> <span class="id">?ler0n//</span> <span class="id">ler_subl_addl</span> <span class="id">natr1</span> <span class="id">ler1n</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">ler_subl_addl</span> <span class="id">-2!mulrDl</span> <span class="id">nat1r</span> <span class="id">divrr</span> <span class="id">?mul1r//</span> <span class="id">unitfE</span>.<br/>
<span class="id">have</span> <span class="id">/andP[ng3</span> <span class="id">pg3]</span> <span class="id">:</span> <span class="id">-</span>(<span class="id">1/3</span>) <span class="id">*</span> <span class="id">M%:num</span> <span class="id"><=</span> <span class="id">g</span> <span class="id">x</span> <span class="id"><=</span> <span class="id">1/3</span> <span class="id">*</span> <span class="id">M%:num</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id">grng;</span> <span class="gallina-kwd">exists</span> <span class="id">x</span>.<br/>
<span class="id">rewrite</span> <span class="id">?</span>(<span class="id">intrD</span> <span class="id">_</span> <span class="id">1</span> <span class="id">1</span>) <span class="id">!mulrDl;</span> <span class="id">apply/andP;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">opprD</span> <span class="id">ler_sub//</span> <span class="id">-mulNr</span> <span class="id">ltW</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id">ler_add</span> (<span class="id">ltW</span> <span class="id">_</span>))<span class="id">//</span> <span class="id">ler_oppl</span> <span class="id">-mulNr</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Let</span> <span class="id"><a name="Tietze.tietze_step">tietze_step</a></span> (<span class="id"><a name="f:229">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span>) <span class="id"><a name="M:230">M</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#::type_scope:'{'_x_':'_x_'|'_x_'}'">{g</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R^o</a></span> <span class="id">|</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'{'_'within'_x_','_'continuous'_x_'}'">{within</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A,</a></span> <span class="id">continuous</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:229">f}</a></span> <span class="id">-></span> <span class="id">0</span> <span class="id"><</span> <span class="id"><a href="mathcomp.analysis.numfun.html#M:230">M</a></span> <span class="id">-></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="x:232">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:232">x</a></span> <span class="id">-></span> <span class="id">`|f</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:232">x|</a></span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#M:230">M</a></span>) <span class="id">-></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'['_'/\'_x_','_x_'&'_x_']'">[/\</a></span> <span class="id"><a href="mathcomp.analysis.topology.html#continuous">continuous</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:231">g,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id"><a name="x:233">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:233">x</a></span> <span class="id">-></span> <span class="id">`|f</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:233">x</a></span> <span class="id">-</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:231">g</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:233">x|</a></span> <span class="id"><=</span> <span class="id">2/3</span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#M:230">M</a></span> <span class="id">:>R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">&</span> <span class="gallina-kwd">forall</span> <span class="id"><a name="x:234">x,</a></span> <span class="id">`|g</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:234">x|</a></span> <span class="id"><=</span> <span class="id">1/3</span> <span class="id">*</span> <span class="id"><a href="mathcomp.analysis.numfun.html#M:230">M</a></span> <span class="id">]}</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
<span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.boolp.html#cid">cid</a></span>.<br/>
<span class="id">have</span> <span class="id">[|?]</span> <span class="id">:=</span> <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> (<span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'{'_'within'_x_','_'continuous'_x_'}'">{within</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A,</a></span> <span class="id">continuous</span> <span class="id">f}</span>)<span class="id">;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#point">point</a></span>.<br/>
<span class="id">have</span> <span class="id">[|?]</span> <span class="id">:=</span> <span class="id">ltP</span> <span class="id">0</span> <span class="id">M;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#point">point</a></span>.<br/>
<span class="id">have</span> <span class="id">[|?]</span> <span class="id">:=</span> <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> (<span class="gallina-kwd">forall</span> <span class="id"><a name="x:235">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:235">x</a></span> <span class="id">-></span> <span class="id">`|f</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:235">x|</a></span> <span class="id"><=</span> <span class="id">M</span>)<span class="id">;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#point">point</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">bd</span> <span class="id">pm</span> <span class="id">cf;</span> <span class="id">have</span> <span class="id">[g</span> <span class="id">?]</span> <span class="id">:=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#tietze_step'">tietze_step'</a></span> <span class="id">pm</span> <span class="id">cf</span> <span class="id">bd;</span> <span class="gallina-kwd">exists</span> <span class="id">g</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Let</span> <span class="id"><a name="Tietze.onem_twothirds">onem_twothirds</a></span> <span class="id">:</span> <span class="id">1</span> <span class="id">-</span> <span class="id">2/3%:R</span> <span class="id">=</span> <span class="id">1/3%:R</span> <span class="id">:></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
 <span class="gallina-kwd">by</span> <span class="id">apply/eqP;</span> <span class="id">rewrite</span> <span class="id">subr_eq/=</span> <span class="id">-mulrDl</span> <span class="id">nat1r</span> <span class="id">divrr//</span> <span class="id">unitfE</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="continuous_bounded_extension">continuous_bounded_extension</a></span> (<span class="id"><a name="f:236">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R^o</a></span>) <span class="id"><a name="M:237">M</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><</span> <span class="id"><a href="mathcomp.analysis.numfun.html#M:237">M</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'{'_'within'_x_','_'continuous'_x_'}'">{within</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A,</a></span> <span class="id">continuous</span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:236">f}</a></span> <span class="id">-></span> (<span class="gallina-kwd">forall</span> <span class="id"><a name="x:238">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:238">x</a></span> <span class="id">-></span> <span class="id">`|f</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:238">x|</a></span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#M:237">M</a></span>) <span class="id">-></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id"><a name="g:239">g,</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'['_'/\'_x_','_x_'&'_x_']'">[/\</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'{'_'in'_x_','_x_'}'">{in</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#f:236">f</a></span> <span class="id">=1</span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:239">g},</a></span> <span class="id"><a href="mathcomp.analysis.topology.html#continuous">continuous</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#g:239">g</a></span> <span class="id">&</span> <span class="gallina-kwd">forall</span> <span class="id"><a name="x:240">x,</a></span> <span class="id">`|g</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:240">x|</a></span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#M:237">M]</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
<span class="id">move:</span> <span class="id">M</span> <span class="id">=></span> <span class="id">_/posnumP[M]</span> <span class="id">Af</span> <span class="id">fbd;</span> <span class="id">pose</span> <span class="id">M2d3</span> <span class="id"><a name="n:241">n</a></span> <span class="id">:=</span> <span class="id"><a href="mathcomp.analysis.sequences.html#geometric">geometric</a></span> <span class="id">M%:num</span> (<span class="id">2/3</span>) <span class="id"><a href="mathcomp.analysis.numfun.html#n:241">n</a></span>.<br/>
<span class="id">have</span> <span class="id">MN0</span> <span class="id">n</span> <span class="id">:</span> <span class="id">0</span> <span class="id"><</span> <span class="id">M2d3</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:242">n</a></span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/M2d3</span> <span class="id">/geometric</span> <span class="id">/mk_sequence</span>.<br/>
<span class="id">pose</span> <span class="id">f_</span> <span class="id">:=</span> <span class="gallina-kwd">fix</span> <span class="id">F</span> <span class="id"><a name="n:243">n</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:243">n</a></span> <span class="id">is</span> <span class="id">n</span>.<span class="id">+1</span> <span class="gallina-kwd">then</span> <span class="id"><a href="mathcomp.analysis.numfun.html#F:244">F</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:243">n</a></span> <span class="id">-</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#projT1">projT1</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.tietze_step">tietze_step</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#F:244">F</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:243">n</a></span>) (<span class="id">M2d3</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:243">n</a></span>)) <span class="gallina-kwd">else</span> <span class="id">f</span>.<br/>
<span class="id">pose</span> <span class="id">g_</span> <span class="id"><a name="n:246">n</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#projT1">projT1</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.tietze_step">tietze_step</a></span> (<span class="id">f_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:246">n</a></span>) (<span class="id">M2d3</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:246">n</a></span>)).<br/>
<span class="id">have</span> <span class="id">fgE</span> <span class="id">n</span> <span class="id">:</span> <span class="id">f_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:247">n</a></span> <span class="id">-</span> <span class="id">f_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:247">n</a></span>.<span class="id">+1</span> <span class="id">=</span> <span class="id">g_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:247">n</a></span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">opprB</span> <span class="id">addrC</span> <span class="id">subrK</span>.<br/>
<span class="id">have</span> <span class="id">twothirds1</span> <span class="id">:</span> <span class="id">`|2/3|</span> <span class="id"><</span> <span class="id">1</span> <span class="id">:></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">gtr0_norm</span> <span class="id">//=</span> <span class="id">ltr_pdivr_mulr//</span> <span class="id">mul1r</span> <span class="id">ltr_nat</span>.<br/>
<span class="id">have</span> <span class="id">f_geo</span> <span class="id">n</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'{'_'within'_x_','_'continuous'_x_'}'">{within</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A,</a></span> <span class="id">continuous</span> <span class="id">f_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:248">n}</a></span> <span class="id">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="x:249">x,</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.A">A</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:249">x</a></span> <span class="id">-></span> <span class="id">`|f_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:248">n</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:249">x|</a></span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.sequences.html#geometric">geometric</a></span> <span class="id">M%:num</span> (<span class="id">2/3</span>) <span class="id"><a href="mathcomp.analysis.numfun.html#n:248">n</a></span>).<br/>
&nbsp;&nbsp;<span class="id">elim:</span> <span class="id">n</span> <span class="id">=></span> <span class="id">[|n</span> <span class="id">[ctsN</span> <span class="id">bdN]];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">split=></span> <span class="id">//=</span> <span class="id">x</span> <span class="id">?;</span> <span class="id">rewrite</span> <span class="id">expr0</span> <span class="id">mulr1</span> <span class="id">fbd</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">[cg</span> <span class="id">bdNS</span> <span class="id">bd2]</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#projT2">projT2</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.tietze_step">tietze_step</a></span> (<span class="id">f_</span> <span class="id">n</span>) <span class="id">_</span>) <span class="id">ctsN</span> (<span class="id">MN0</span> <span class="id">n</span>) <span class="id">bdN</span>.<br/>
&nbsp;&nbsp;<span class="id">split=></span> <span class="id">[x|];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#cvgB">cvgB;</a></span> <span class="id">[exact:ctsN|exact/continuous_subspaceT/cg]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">x</span> <span class="id">Ax;</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">bdNS</span> <span class="id">_</span> <span class="id">Ax</span>))<span class="id">//</span> <span class="id">/M2d3/=</span> <span class="id">mulrCA</span> <span class="id">-exprS</span>.<br/>
<span class="id">have</span> <span class="id">g_cts</span> <span class="id">n</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.topology.html#continuous">continuous</a></span> (<span class="id">g_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:250">n</a></span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">have</span> <span class="id">[?</span> <span class="id">?]</span> <span class="id">:=</span> <span class="id">f_geo</span> <span class="id">n;</span> <span class="id">case:</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#projT2">projT2</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.tietze_step">tietze_step</a></span> (<span class="id">f_</span> <span class="id">n</span>) <span class="id">_</span>) <span class="id">_</span> (<span class="id">MN0</span> <span class="id">n</span>)).<br/>
<span class="id">have</span> <span class="id">g_bd</span> <span class="id">n</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span class="id"><a name="x:252">x,</a></span> <span class="id">`|g_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#n:251">n</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:252">x|</a></span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.sequences.html#geometric">geometric</a></span> ((<span class="id">1/3</span>) <span class="id">*</span> <span class="id">M%:num</span>) (<span class="id">2/3</span>) <span class="id"><a href="mathcomp.analysis.numfun.html#n:251">n</a></span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">[ctsN</span> <span class="id">bdfN]</span> <span class="id">:=</span> <span class="id">f_geo</span> <span class="id">n;</span> <span class="id">rewrite</span> <span class="id">/geometric</span> <span class="id">/=</span> <span class="id">-[_</span> <span class="id">*</span> <span class="id">M%:num</span> <span class="id">*</span> <span class="id">_]mulrA</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">have</span> <span class="id">[_</span> <span class="id">_]</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#projT2">projT2</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.tietze_step">tietze_step</a></span> (<span class="id">f_</span> <span class="id">n</span>) <span class="id">_</span>) <span class="id">ctsN</span> (<span class="id">MN0</span> <span class="id">n</span>) <span class="id">bdfN</span>.<br/>
<span class="id">pose</span> <span class="id">h_</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.topology.html#Complete.Exports.::form_scope:'['_'completeType'_'of'_x_']'">[completeType</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'{'_'uniform'_x_'->'_x_'}'">{uniform</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span> <span class="id">-></span> <span class="id">_}]</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">@series</span> <span class="id">[zmodType</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'{'_'uniform'_x_'->'_x_'}'">{uniform</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span> <span class="id">-></span> <span class="id">_}]</span> <span class="id">g_</span>.<br/>
<span class="id">have</span> <span class="id">cvgh'</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg">cvg</a></span> (<span class="id">h_</span> <span class="id">@</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'\oo'">\oo</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply/cauchy_cvgP/cauchy_ballP</span> <span class="id">=></span> <span class="id">eps</span> <span class="id">epos;</span> <span class="id">near_simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.topology.html#::type_scope:'\forall'_x_'&'_x_'\near'_x_','_x">\forall</a></span> <span class="id"><a name="x:253">x</a></span> <span class="id">&</span> <span class="id"><a name="x':254">x'</a></span> <span class="id">\near</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'\oo'">\oo,</a></span> (<span class="id"><a href="mathcomp.analysis.numfun.html#x':254">x'</a></span> <span class="id"><=</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:253">x</a></span>)<span class="id">%N</span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> (<span class="id">h_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:253">x</a></span>) <span class="id">eps</span> (<span class="id">h_</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x':254">x'</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=>/[dup];</span> <span class="id">rewrite</span> <span class="id">{1}near_swap;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.analysis.topology.html#filter_app2">filter_app2;</a></span> <span class="id">near=></span> <span class="id">n</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">have</span> <span class="id">/orP[mn</span> <span class="id">/</span>(<span class="id">_</span> <span class="id">mn</span>)<span class="id">/ball_sym</span> <span class="id">+</span> <span class="id">_|</span> <span class="id">?</span> <span class="id">_]</span> <span class="id">:=</span> <span class="id">leq_total</span> <span class="id">n</span> <span class="id">m;</span> <span class="id">apply</span>.<br/>
&nbsp;&nbsp;<span class="id">near=></span> <span class="id">n</span> <span class="id">m;</span> <span class="id">move=></span> <span class="id">/=</span> <span class="id">MN;</span> <span class="id">rewrite</span> <span class="id">/ball</span> <span class="id">/=</span> <span class="id">/h_</span> <span class="id">=></span> <span class="id">t;</span> <span class="id">rewrite</span> <span class="id">/ball</span> <span class="id">/=</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-[X</span> <span class="gallina-kwd">in</span> <span class="id">`|X|]/</span>((<span class="id"><a href="mathcomp.analysis.sequences.html#series">series</a></span> <span class="id">g_</span> <span class="id">n</span> <span class="id">-</span> <span class="id"><a href="mathcomp.analysis.sequences.html#series">series</a></span> <span class="id">g_</span> <span class="id">m</span>) <span class="id">t</span>) <span class="id"><a href="mathcomp.analysis.sequences.html#sub_series">sub_series</a></span> <span class="id">MN</span> <span class="id"><a href="mathcomp.classical.functions.html#fct_sumE">fct_sumE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_lt_trans</span> (<span class="id">ler_norm_sum</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_lt_trans</span> (<span class="id">ler_sum</span> <span class="id">_</span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="i:256">i</a></span> <span class="id">_</span> <span class="id">=></span> <span class="id">g_bd</span> <span class="id"><a href="mathcomp.analysis.numfun.html#i:256">i</a></span> <span class="id">t</span>)))<span class="id">//</span> <span class="id">-mulr_sumr</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-</span>(<span class="id">subnKC</span> <span class="id">MN</span>) <span class="id"><a href="mathcomp.analysis.sequences.html#geometric_partial_tail">geometric_partial_tail</a></span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">L</span> <span class="id">:=</span> (<span class="id">1/3</span>) <span class="id">*</span> <span class="id">M%:num</span> <span class="id">*</span> ((<span class="id">2/3</span>) <span class="id">^+</span> <span class="id">m</span> <span class="id">/</span> (<span class="id">1</span> <span class="id">-</span> (<span class="id">2/3</span>))).<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> <span class="id">L</span>)<span class="id">;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">ler_pmul2l</span> <span class="id">//</span> <span class="id"><a href="mathcomp.analysis.sequences.html#geometric_le_lim">geometric_le_lim</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">/L</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.onem_twothirds">onem_twothirds</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">[_</span> <span class="id">^+</span> <span class="id">_</span> <span class="id">*</span> <span class="id">_</span> <span class="id">^-1]mulrC</span> <span class="id">mulrA</span> <span class="id">-[x</span> <span class="gallina-kwd">in</span> <span class="id"><a href="mathcomp.analysis.numfun.html#x:259">x</a></span> <span class="id"><</span> <span class="id">_]ger0_norm;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
&nbsp;&nbsp;<span class="id">near:</span> <span class="id">m;</span> <span class="id">near_simpl;</span> <span class="id">move:</span> <span class="id">eps</span> <span class="id">epos</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply:</span> (<span class="id"><a href="mathcomp.analysis.normedtype.html#cvgr0_norm_lt">cvgr0_norm_lt</a></span> (<span class="gallina-kwd">fun</span> <span class="id">_</span> <span class="id">=></span> <span class="id">_</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R^o</a></span>))<span class="id">;</span> <span class="id">exact:</span> <span class="id"><a href="mathcomp.analysis.sequences.html#cvg_geometric">cvg_geometric</a></span>.<br/>
<span class="id">have</span> <span class="id">cvgh</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'{'_'uniform'_','_x_'-->'_x_'}'">{uniform,</a></span> <span class="id">h_</span> <span class="id">@</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'\oo'">\oo</a></span> <span class="id">--></span> <span class="id"><a href="mathcomp.analysis.topology.html#lim">lim</a></span> (<span class="id">h_</span> <span class="id">@</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'\oo'">\oo</a></span>)<span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'{'_'uniform'_','_x_'-->'_x_'}'">}</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">?;</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="mathcomp.analysis.topology.html#uniform_nbhsT">uniform_nbhsT;</a></span> <span class="id">exact:</span> <span class="id">cvgh'</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id"><a href="mathcomp.analysis.topology.html#lim">lim</a></span> (<span class="id">h_</span> <span class="id">@</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'\oo'">\oo</a></span>))<span class="id">;</span> <span class="id">split</span>.<br/>
<span class="id">-</span> <span class="id">move=></span> <span class="id">t</span> <span class="id">/set_mem</span> <span class="id">At;</span> <span class="id">have</span> <span class="id">/pointwise_cvgP/</span>(<span class="id">_</span> <span class="id">t</span>)<span class="id">/</span>(<span class="id"><a href="mathcomp.analysis.topology.html#cvg_lim">cvg_lim</a></span> (<span class="id">@Rhausdorff</span> <span class="id">_</span>)) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">!!</span> <span class="id"><a href="mathcomp.analysis.topology.html#pointwise_uniform_cvg">pointwise_uniform_cvg</a></span> <span class="id">_</span> <span class="id">cvgh</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-fmap_comp</span> <span class="id">/comp</span> <span class="id">/h_</span> <span class="id">=></span> <span class="id"><-;</span> <span class="id">apply/esym/</span>(<span class="id">@cvg_lim</span> <span class="id">_</span> (<span class="id">@Rhausdorff</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@cvg_zero</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span> <span class="id"><a href="mathcomp.analysis.normedtype.html#PseudoMetricNormedZmodule.Exports.::form_scope:'['_'pseudoMetricNormedZmodType'_x_'of'_x_']'">[pseudoMetricNormedZmodType</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R^o]</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply:</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#norm_cvg0">norm_cvg0;</a></span> <span class="id">under</span> <span class="id"><a href="mathcomp.classical.boolp.html#eq_fun">eq_fun</a></span> <span class="id">=></span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">distrC</span> <span class="id">/series</span> <span class="id">/cst</span> <span class="id">/=</span> <span class="id">-mulN1r</span> <span class="id"><a href="mathcomp.classical.functions.html#fct_sumE">fct_sumE</a></span> <span class="id">mulr_sumr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">under</span> <span class="id">[fun</span> <span class="id">_</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">=></span> <span class="id">_]eq_fun</span> <span class="id">=></span> <span class="id">?</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">mulN1r</span> <span class="id">-fgE</span> <span class="id">opprB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">telescope_sumr</span> <span class="id">//=</span> <span class="id">addrCA</span> <span class="id">subrr</span> <span class="id">addr0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">over</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/norm_cvg0P/cvgr0Pnorm_lt</span> <span class="id">=></span> <span class="id">eps</span> <span class="id">epos</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">/</span>(<span class="id">_</span> <span class="id">_</span> <span class="id">epos</span>)  <span class="id">:=</span> <span class="id">@cvgr0_norm_lt</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.topology.html#eventually_filter">eventually_filter</a></span> (<span class="id">_</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">-></span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.R">R^o</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.sequences.html#cvg_geometric">cvg_geometric</a></span> <span class="id">M%:num</span> <span class="id">twothirds1</span>).<br/>
&nbsp;&nbsp;<span class="id">apply:</span> <span class="id"><a href="mathcomp.analysis.topology.html#filter_app">filter_app;</a></span> <span class="id">near_simpl;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.analysis.topology.html#nearW">nearW</a></span> <span class="id">=></span> <span class="id">n</span> <span class="id">/le_lt_trans;</span> <span class="id">apply</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> ((<span class="id">f_geo</span> <span class="id">n</span>).<span class="id">2</span> <span class="id">_</span> <span class="id">_</span>)) <span class="id">//</span> <span class="id">ler_norm</span>.<br/>
<span class="id">-</span> <span class="id">apply:</span> (<span class="id">@uniform_limit_continuous</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.X">X</a></span> <span class="id">_</span> (<span class="id">h_</span> <span class="id">@</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'\oo'">\oo</a></span>) (<span class="id"><a href="mathcomp.analysis.topology.html#lim">lim</a></span> (<span class="id">h_</span> <span class="id">@</span> <span class="id"><a href="mathcomp.analysis.topology.html#::classical_set_scope:'\oo'">\oo</a></span>))) <span class="id">=>//</span>.<br/>
&nbsp;&nbsp;<span class="id">near_simpl;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.analysis.topology.html#nearW">nearW;</a></span> <span class="id">elim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/h_</span> <span class="id">/series</span> <span class="id">/=</span> <span class="id">big_geq//</span> <span class="id">=></span> <span class="id">?;</span> <span class="id">exact:</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg_cst">cvg_cst</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move=></span> <span class="id">n;</span> <span class="id">rewrite</span> <span class="id">/h_</span> <span class="id">/series</span> <span class="id">/=</span> <span class="id">big_nat_recr</span> <span class="id">/=</span> <span class="id">//</span> <span class="id">=></span> <span class="id">IH</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#continuousD">continuousD;</a></span> <span class="id">[exact:</span> <span class="id">IH|exact:</span> <span class="id">g_cts]</span>.<br/>
<span class="id">-</span> <span class="id">move=></span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">/pointwise_cvgP/</span>(<span class="id">_</span> <span class="id">t</span>)<span class="id">/</span>(<span class="id"><a href="mathcomp.analysis.topology.html#cvg_lim">cvg_lim</a></span> (<span class="id">@Rhausdorff</span> <span class="id">_</span>)) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">!!</span> <span class="id"><a href="mathcomp.analysis.topology.html#pointwise_uniform_cvg">pointwise_uniform_cvg</a></span> <span class="id">_</span> <span class="id">cvgh</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-fmap_comp</span> <span class="id">/comp</span> <span class="id">/h_</span> <span class="id">=></span> <span class="id"><-</span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id">[fun</span> <span class="id">_</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">=></span> <span class="id">_]eq_fun</span> <span class="id">=></span> <span class="id">?</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">/series</span> <span class="id">/=</span> <span class="id"><a href="mathcomp.classical.functions.html#fct_sumE">fct_sumE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">cvg_gt</span> <span class="id">:</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg">cvg</a></span> <span class="id"><a href="mathcomp.analysis.sequences.html#::ring_scope:'['_'normed'_x_']'">[normed</a></span> <span class="id"><a href="mathcomp.analysis.sequences.html#series">series</a></span> (<span class="id">g_^~</span> <span class="id">t</span>)<span class="id"><a href="mathcomp.analysis.sequences.html#::ring_scope:'['_'normed'_x_']'">]</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#series_le_cvg">series_le_cvg</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">g_bd</span> <span class="id">^~</span> <span class="id">t</span>) (<span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_geometric_series">is_cvg_geometric_series</a></span> <span class="id">_</span>)) <span class="id">=></span> <span class="id">//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=></span> <span class="id">n;</span> <span class="id">rewrite</span> <span class="id">mulr_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#lim_series_norm">lim_series_norm</a></span> <span class="id">_</span>))<span class="id">//;</span> <span class="id">apply:</span> <span class="id">le_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/</span>(<span class="id"><a href="mathcomp.analysis.sequences.html#lim_series_le">lim_series_le</a></span> <span class="id">cvg_gt</span> <span class="id">_</span> (<span class="id">g_bd</span> <span class="id">^~</span> <span class="id">t</span>))<span class="id">/is_cvg_geometric_series</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.analysis.topology.html#cvg_lim">cvg_lim</a></span> <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#cvg_geometric_series">cvg_geometric_series</a></span> <span class="id">_</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze.onem_twothirds">onem_twothirds</a></span> <span class="id">mulrAC</span> <span class="id">divrr</span> <span class="id">?mul1r//</span> <span class="id">unitfE</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all:</span> <span class="gallina-kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="mathcomp.analysis.numfun.html#Tietze">Tietze</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/tree/yoshihiro503%40generate_index">a fork of coq2html</a></div>
</body>
</html>
