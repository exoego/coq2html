
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.classical.fsbigop</title>
<meta name="description" content="Documentation of Coq module mathcomp.classical.fsbigop" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>

<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">
<h1 class="title">Module mathcomp.classical.fsbigop</h1>
<div class="coq">
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id">all_ssreflect</span> <span class="id">ssralg</span> <span class="id">ssrnum</span> <span class="id">ssrint</span> <span class="id">interval</span> <span class="id">finmap</span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html">mathcomp_extra</a></span> <span class="id"><a href="mathcomp.classical.boolp.html">boolp</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html">classical_sets</a></span> <span class="id"><a href="mathcomp.classical.functions.html">functions</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="mathcomp.classical.cardinality.html">cardinality</a></span>.<br/>
<br/>
<div class="ssrdoc markdown">
# Finitely-supported big operators                                         
                                                                           
```                                                                        
    finite_support idx D F := D `&amp;` F @^-1` [set~ idx]                     
\big[op/idx]_(i \in A) F i == iterated application of the operator op      
                              with neutral idx over finite_support idx A F 
        \sum_(i \in A) F i == iterated addition, in ring_scope             
```                                                                        
                                                                           
</div>
<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"\big [ op / idx ]_ ( i '\in' A ) F"</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">36,</span> <span class="id">F</span> <span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">36,</span> <span class="id">op,</span> <span class="id">idx</span> <span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">10,</span> <span class="id">i,</span> <span class="id">A</span> <span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">50,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">"'[' \big [ op / idx ]_ ( i  '\in'  A ) '/  '  F ']'"</span>).<br/>
<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">"\sum_ ( i '\in' A ) F"</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">41,</span> <span class="id">F</span> <span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">41,</span> <span class="id">i,</span> <span class="id">A</span> <span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">50,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">"'[' \sum_ ( i  '\in'  A ) '/  '  F ']'"</span>).<br/>
<br/>
<span class="gallina-kwd">Set</span> <span class="vernacular">Implicit</span> <span class="vernacular">Arguments</span>.<br/>
<span class="id">Unset</span> <span class="id">Strict</span> <span class="vernacular">Implicit</span>.<br/>
<span class="id">Unset</span> <span class="id">Printing</span> <span class="vernacular">Implicit</span> <span class="id">Defensive</span>.<br/>
<span class="vernacular">Import</span> <span class="id">Order.TTheory</span> <span class="id">GRing.Theory</span> <span class="id">Num.Def</span> <span class="id">Num.Theory</span>.<br/>
<br/>
<span class="id">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<span class="id">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id"><a name="::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">"\big [ op / idx ]_ ( i '\in' A ) F"</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="id">\big[op/idx]_</span>(<span class="id"><a name="i:2">i</a></span> <span class="id">&lt;-</span> <span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span> (<span class="id">A</span> <span class="id">`&amp;`</span> ((<span class="gallina-kwd">fun</span> <span class="id"><a name="i:1">i</a></span> <span class="id">=&gt;</span> <span class="id">F</span>) <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id">idx]</span>))) <span class="id">F</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">only</span> <span class="id">parsing</span>) <span class="id">:</span> <span class="id">big_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="finite_index_key">finite_index_key</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
 <span class="id">exact:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#tt">tt</a></span>. Qed.</div>
<span class="vernacular">Definition</span> <span class="id"><a name="finite_support">finite_support</a></span> <span class="id">{I</span> <span class="id">:</span> <span class="id">choiceType}</span> <span class="id">{T</span> <span class="id">:</span> <span class="id">Type}</span> (<span class="id"><a name="idx:7">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:6">T</a></span>) (<span class="id"><a name="D:8">D</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:5">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="F:9">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:5">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:6">T</a></span>) <span class="id">:</span> <span class="id">seq</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:5">I</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#locked_with">locked_with</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_index_key">finite_index_key</a></span> (<span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#D:8">D</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:9">F</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:7">idx]</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:5">I</a></span>)).<br/>
<span class="vernacular">Notation</span> <span class="id"><a name="::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">"\big [ op / idx ]_ ( i '\in' D ) F"</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">\big[op/idx]_</span>(<span class="id"><a name="i:11">i</a></span> <span class="id">&lt;-</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id">idx</span> <span class="id">D</span> (<span class="gallina-kwd">fun</span> <span class="id"><a name="i:10">i</a></span> <span class="id">=&gt;</span> <span class="id">F</span>)) <span class="id">F</span>)<br/>
&nbsp;&nbsp;<span class="id">:</span> <span class="id">big_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="in_finite_support">in_finite_support</a></span> (<span class="id"><a name="T:14">T</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="J:15">J</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="i:16">i</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:14">T</a></span>) (<span class="id"><a name="P:17">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:15">J</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="F:18">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:15">J</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:14">T</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#P:17">P</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:18">F</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:16">i]</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:16">i</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:17">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:18">F</a></span> <span class="id">=i</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:17">P</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:18">F</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:16">i]</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">finF</span> <span class="id">j;</span> <span class="id">rewrite</span> <span class="id">/finite_support</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="finite_support_uniq">finite_support_uniq</a></span> (<span class="id"><a name="T:19">T</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="J:20">J</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="i:21">i</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:19">T</a></span>) (<span class="id"><a name="P:22">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:20">J</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="F:23">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:20">J</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:19">T</a></span>) <span class="id">:</span> <span class="id">uniq</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:21">i</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:22">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:23">F</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/finite_support</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock;</a></span> <span class="id">exact:</span> <span class="id">fset_uniq</span>. Qed.</div>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">finite_support_uniq</span> <span class="id">:</span> <span class="id">core</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="no_finite_support">no_finite_support</a></span> (<span class="id"><a name="T:24">T</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="J:25">J</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="i:26">i</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:24">T</a></span>) (<span class="id"><a name="P:27">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:25">J</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="F:28">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:25">J</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:24">T</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#infinite_set">infinite_set</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#P:27">P</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:28">F</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:26">i]</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:26">i</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:27">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:28">F</a></span> <span class="id">=</span> <span class="id">[::]</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
<span class="id">move=&gt;</span> <span class="id">infinF;</span> <span class="id">rewrite</span> <span class="id">/finite_support</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/fset_set/=;</span> <span class="id">case:</span> <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> <span class="id">=&gt;</span> <span class="id">//</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="eq_finite_support">eq_finite_support</a></span> <span class="id">{I</span> <span class="id">:</span> <span class="id">choiceType}</span> <span class="id">{T</span> <span class="id">:</span> <span class="id">Type}</span> (<span class="id"><a name="idx:31">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:30">T</a></span>) (<span class="id"><a name="D:32">D</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:29">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="F:33">F</a></span> <span class="id"><a name="G:34">G</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:29">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:30">T</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'{'_'in'_x_','_x_'}'">{in</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#D:32">D,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:33">F</a></span> <span class="id">=1</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#G:34">G}</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:31">idx</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#D:32">D</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:33">F</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:31">idx</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#D:32">D</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#G:34">G</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">eqFG;</span> <span class="id">rewrite</span> <span class="id">/finite_support</span> <span class="id">!unlock//</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#eq_preimage">eq_preimage</a></span> <span class="id">_</span> <span class="id">eqFG</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Variant</span> <span class="id"><a name="finite_support_spec">finite_support_spec</a></span> <span class="id"><a name="R:35">R</a></span> (<span class="id"><a name="T:36">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;(<span class="id"><a name="P:37">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:36">T</a></span>) (<span class="id"><a name="F:38">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:36">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:35">R</a></span>) (<span class="id"><a name="idx:39">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:35">R</a></span>) <span class="id">:</span> <span class="id">seq</span> <span class="id">T</span> <span class="id">-&gt;</span> <span class="gallina-kwd">Type</span> <span class="id">:=</span><br/>
<span class="id">|</span> <span class="id"><a name="NoFiniteSupport">NoFiniteSupport</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.cardinality.html#infinite_set">infinite_set</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#P:37">P</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:38">F</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:39">idx]</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support_spec:40">finite_support_spec</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:37">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:38">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:39">idx</a></span> <span class="id">[::]</span><br/>
<span class="id">|</span> <span class="id"><a name="FiniteSupport">FiniteSupport</a></span> (<span class="id"><a name="X:42">X</a></span> <span class="id">:</span> <span class="id">{fset</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:36">T}</a></span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set`'_x_']'">[set`</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#X:42">X]</a></span> <span class="id">`&lt;=`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:37">P</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">&amp;</span> (<span class="gallina-kwd">forall</span> <span class="id"><a name="i:43">i,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:37">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:43">i</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:43">i</a></span> <span class="id">\notin</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#X:42">X</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:38">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:43">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:39">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;<span class="id">&amp;</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set`'_x_']'">[set`</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#X:42">X]</a></span> <span class="id">=</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#P:37">P</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:38">F</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:39">idx]</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support_spec:40">finite_support_spec</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:37">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:38">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:39">idx</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#X:42">X</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="finite_supportP">finite_supportP</a></span> <span class="id"><a name="R:44">R</a></span> (<span class="id"><a name="T:45">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="P:46">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:45">T</a></span>) (<span class="id"><a name="F:47">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:45">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:44">R</a></span>) (<span class="id"><a name="idx:48">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:44">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support_spec">finite_support_spec</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:46">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:47">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:48">idx</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:48">idx</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:46">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:47">F</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="id">rewrite</span> <span class="id">/finite_support</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock/=</a></span> <span class="id">/fset_set</span>.<br/>
<span class="id">case:</span> <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect=&gt;</a></span> <span class="id">//</span> <span class="id">Xfin;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">constructor</span>.<br/>
<span class="id">case:</span> <span class="id"><a href="mathcomp.classical.boolp.html#cid">cid</a></span> <span class="id">=&gt;</span> <span class="id">//=</span> <span class="id">X</span> <span class="id">eqX;</span> <span class="id">constructor;</span> <span class="id">rewrite</span> <span class="id">-?eqX//</span>.<br/>
<span class="id">move=&gt;</span> <span class="id">i</span> <span class="id">Pi</span> <span class="id">NXi</span> <span class="id">/=;</span> <span class="id">have</span> <span class="id">:</span> (<span class="id">P</span> <span class="id">`\`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set`'_x_']'">[set`</a></span> <span class="id">X]</span>) <span class="id">i</span> <span class="gallina-kwd">by</span> <span class="id">split=&gt;</span> <span class="id">//=;</span> <span class="id">apply/negP</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-eqX</span> <span class="id">/=</span> <span class="id">=&gt;</span> <span class="id">-[_];</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.boolp.html#contra_notP">contra_notP</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Notation</span> <span class="id"><a name="::ring_scope:'\sum_'_'('_x_'\in'_x_')'_x">"\sum_ ( i '\in' A ) F"</a></span> <span class="id">:=</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[+%R/0%R]_</a></span>(<span class="id"><a name="i:49">i</a></span> <span class="id">\in</span> <span class="id">A</span>) <span class="id">F</span>) <span class="id">:</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="eq_fsbigl">eq_fsbigl</a></span> (<span class="id"><a name="R:53">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:54">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:53">R</a></span>) (<span class="id"><a name="op:55">op</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:53">R</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:53">R</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:53">R</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="T:56">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="f:57">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:56">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:53">R</a></span>) (<span class="id"><a name="P:58">P</a></span> <span class="id"><a name="Q:59">Q</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:56">T</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#P:58">P</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:59">Q</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="x:60">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:58">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:57">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:60">x</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="x:64">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:59">Q</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:57">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:64">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">-&gt;</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="eq_fsbigr">eq_fsbigr</a></span> (<span class="id"><a name="R:68">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:69">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:68">R</a></span>) (<span class="id"><a name="op:70">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:69">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="T:71">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="f:72">f</a></span> <span class="id"><a name="g:73">g</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:71">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:68">R</a></span>) (<span class="id"><a name="P:74">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:71">T</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'{'_'in'_x_','_x_'}'">{in</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:74">P,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#f:72">f</a></span> <span class="id">=1</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#g:73">g}</a></span> <span class="id">-&gt;</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="x:75">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:74">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:72">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:75">x</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="x:79">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:74">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#g:73">g</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:79">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
<span class="id">move=&gt;</span> <span class="id">fg;</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#eq_finite_support">eq_finite_support</a></span> <span class="id">_</span> <span class="id">fg</span>)<span class="id">;</span> <span class="id">apply:</span> <span class="id">eq_big_seq</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span> <span class="id">=&gt;</span> <span class="id">//=</span> <span class="id">X</span> <span class="id">XP</span> <span class="id">_</span> <span class="id">gidx</span> <span class="id">xX;</span> <span class="id">rewrite</span> <span class="id">fg</span> <span class="id">//</span> <span class="id">?inE;</span> <span class="id">apply/XP</span>.<br/>
Qed.</div>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> <span class="id">{R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">T</span> <span class="id">f}</span> <span class="id">g</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbigTE">fsbigTE</a></span> (<span class="id"><a name="R:83">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:84">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:83">R</a></span>) (<span class="id"><a name="op:85">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:84">idx</a></span>) (<span class="id"><a name="T:86">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="A:87">A</a></span> <span class="id">:</span> <span class="id">{fset</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:86">T}</a></span>) (<span class="id"><a name="f:88">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:86">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:83">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="i:89">i,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:89">i</a></span> <span class="id">\notin</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:87">A</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#f:88">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:89">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:84">idx</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:90">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_':'_x_']'">[set:</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:86">T]</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:88">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:90">i</a></span> <span class="id">=</span> <span class="id">\big[op/idx]_</span>(<span class="id"><a name="i:94">i</a></span> <span class="id">&lt;-</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:87">A</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:88">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:94">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
<span class="id">elim/Peq:</span> <span class="id">R</span> <span class="id">=&gt;</span> <span class="id">R</span> <span class="gallina-kwd">in</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">f</span> <span class="id">*</span>.<br/>
<span class="id">move=&gt;</span> <span class="id">Af;</span> <span class="id">have</span> <span class="id">Afin</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id">f</span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id">idx]</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply:</span> (<span class="id"><a href="mathcomp.classical.cardinality.html#finite_subfset">finite_subfset</a></span> <span class="id">A</span>) <span class="id">=&gt;</span> <span class="id">x;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.boolp.html#contra_notT">contra_notT</a></span> <span class="id">=&gt;</span> <span class="id">/Af</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]</a></span>(<span class="id">big_fsetID</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::fun_scope:'['_'pred'_x_'|'_x_']'">[pred</a></span> <span class="id"><a name="x:97">x</a></span> <span class="id">|</span> <span class="id">f</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:97">x</a></span> <span class="id">==</span> <span class="id">idx]</span>)<span class="id">/=</span>.<br/>
<span class="id">rewrite</span> <span class="id">[X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id">=</span> <span class="id">op</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#X:100">X</a></span> <span class="id">_]big_fset</span> <span class="id">[X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id">=</span> <span class="id">op</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#X:101">X</a></span> <span class="id">_]big1</span> <span class="id">?Monoid</span>.<span class="id">simpm//;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">i</span> <span class="id">/=</span> <span class="id">/eqP</span>.<br/>
<span class="id">apply</span> <span class="id">eq_fbigl</span> <span class="id">=&gt;</span> <span class="id">r</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#in_finite_support">in_finite_support//</a></span> <span class="id">?setTI//</span> <span class="id">/preimage/=;</span> <span class="id">apply/idP/idP</span> <span class="id">=&gt;</span> <span class="id">/=</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!inE/=;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.boolp.html#contra_notP">contra_notP</a></span> <span class="id">=&gt;</span> <span class="id">/negP</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negb_and">negb_and</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbK">negbK</a></span> <span class="id">=&gt;</span> <span class="id">/orP[|/eqP//];</span> <span class="id">exact:</span> <span class="id">Af</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!inE/=</span> <span class="id">=&gt;</span> <span class="id">/andP[_</span> <span class="id">/eqP]</span>.<br/>
Qed.</div>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigTE">fsbigTE</a></span> <span class="id">{R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">T}</span> <span class="id">A</span> <span class="id">f</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_mkcond">fsbig_mkcond</a></span> (<span class="id"><a name="R:102">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:103">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:102">R</a></span>) (<span class="id"><a name="op:104">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:103">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="T:105">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="A:106">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:105">T</a></span>) (<span class="id"><a name="f:107">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:105">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:102">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:108">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:106">A</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:107">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:108">i</a></span> <span class="id">=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:112">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_':'_x_']'">[set:</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:105">T]</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#patch">patch</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#::fun_scope:'fun'_'=>'_x">fun=&gt;</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:103">idx</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#A:106">A</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#f:107">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:112">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
<span class="id">elim/Peq:</span> <span class="id">R</span> <span class="id">=&gt;</span> <span class="id">R</span> <span class="gallina-kwd">in</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">f</span> <span class="id">*</span>.<br/>
<span class="id">rewrite</span> <span class="id">-big_mkcond/=</span> <span class="id">-[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]big_filter;</a></span> <span class="id">apply:</span> <span class="id">perm_big</span>.<br/>
<span class="id">rewrite</span> <span class="id">uniq_perm</span> <span class="id">?filter_uniq//=</span> <span class="id">=&gt;</span> <span class="id">i;</span> <span class="id">rewrite</span> <span class="id">mem_filter</span>.<br/>
<span class="id">set</span> <span class="id">g</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span class="id"><a name="i:116">i</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:116">i</a></span> <span class="id">\in</span> <span class="id">A</span> <span class="gallina-kwd">then</span> <span class="id">f</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:116">i</a></span> <span class="gallina-kwd">else</span> <span class="id">idx</span>.<br/>
<span class="id">have</span> <span class="id">gAf</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">`&amp;`</span> <span class="id">g</span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id">idx]</span> <span class="id">=</span> (<span class="id">A</span> <span class="id">`&amp;`</span> <span class="id">f</span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id">idx]</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI;</a></span> <span class="id">apply/predeqP</span> <span class="id">=&gt;</span> <span class="id">x;</span> <span class="id">split;</span> <span class="id">rewrite</span> <span class="id">/preimage/g/=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn;</a></span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE,</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn;</a></span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE,</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span>) <span class="id">=&gt;</span> <span class="id">?</span> <span class="id">[]</span>.<br/>
<span class="id">case:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span> <span class="id">=&gt;</span> <span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-gAf;</span> <span class="id">case:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP=&gt;</a></span> <span class="id">//=;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">?inE</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbF">andbF</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">X</span> <span class="id">_</span> <span class="id">gidx</span> <span class="id">&lt;-//</span>.<br/>
<span class="id">move=&gt;</span> <span class="id">X</span> <span class="id">XA</span> <span class="id">fidx</span> <span class="id">XE;</span> <span class="id">case:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP;</a></span> <span class="id">rewrite</span> <span class="id">gAf</span> <span class="id">-?XE//=</span>.<br/>
<span class="id">move=&gt;</span> <span class="id">Y</span> <span class="id">_</span> <span class="id">gidx</span> <span class="id">/predeqP/=/</span>(<span class="id">_</span> <span class="id">_</span>)<span class="id">/propext</span> <span class="id">YX</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">apply/idP/andP</span> <span class="id">=&gt;</span> <span class="id">[|[]];</span> <span class="id">rewrite</span> <span class="id">YX//</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">=&gt;</span> <span class="id">Xi;</span> <span class="id">split=&gt;</span> <span class="id">//;</span> <span class="id">apply:</span> <span class="id">XA</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_mkcondr">fsbig_mkcondr</a></span> (<span class="id"><a name="R:119">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:120">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:119">R</a></span>) (<span class="id"><a name="op:121">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:120">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="T:122">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="I:123">I</a></span> <span class="id"><a name="J:124">J</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:122">T</a></span>) (<span class="id"><a name="a:125">a</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:122">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:119">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:126">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:123">I</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:124">J</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#a:125">a</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:126">i</a></span> <span class="id">=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:130">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:123">I</a></span>) <span class="gallina-kwd">if</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:130">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:124">J</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:125">a</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:130">i</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:120">idx</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_mkcond">fsbig_mkcond</a></span> <span class="id">[RHS]fsbig_mkcond</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#patch_setI">patch_setI</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_mkcondl">fsbig_mkcondl</a></span> (<span class="id"><a name="R:134">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:135">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:134">R</a></span>) (<span class="id"><a name="op:136">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:135">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="T:137">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="I:138">I</a></span> <span class="id"><a name="J:139">J</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:137">T</a></span>) (<span class="id"><a name="a:140">a</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:137">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:134">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:141">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:138">I</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:139">J</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#a:140">a</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:141">i</a></span> <span class="id">=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:145">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:139">J</a></span>) <span class="gallina-kwd">if</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:145">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:138">I</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:140">a</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:145">i</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:135">idx</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_mkcond">fsbig_mkcond</a></span> <span class="id">[RHS]fsbig_mkcond</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#patch_setI">patch_setI</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="bigfs">bigfs</a></span> (<span class="id"><a name="R:149">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:150">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:149">R</a></span>) (<span class="id"><a name="op:151">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:150">idx</a></span>) (<span class="id"><a name="T:152">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="r:153">r</a></span> <span class="id">:</span> <span class="id">seq</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:152">T</a></span>) (<span class="id"><a name="P:154">P</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::type_scope:'{'_'pred'_x_'}'">{pred</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:152">T}</a></span>) (<span class="id"><a name="f:155">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:152">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:149">R</a></span>) <span class="id">:</span> <span class="id">uniq</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:153">r</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="i:156">i,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:154">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:156">i</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:156">i</a></span> <span class="id">\notin</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:153">r</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#f:155">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:156">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:150">idx</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\big[op/idx]_</span>(<span class="id"><a name="i:157">i</a></span> <span class="id">&lt;-</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:153">r</a></span> <span class="id">|</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:154">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:157">i</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:155">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:157">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:160">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set`'_x_']'">[set`</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:154">P]</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:155">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:160">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
<span class="id">move=&gt;</span> <span class="id">r_uniq</span> <span class="id">fidx;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_mkcond">fsbig_mkcond</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigTE">fsbigTE</a></span> <span class="id">[fset</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:164">x</a></span> <span class="id">|</span> <span class="id"><a name="x:164">x</a></span> <span class="gallina-kwd">in</span> <span class="id">r]%fset</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">i;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE/=</a></span> <span class="id">/patch</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_setE">mem_setE;</a></span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP=&gt;</a></span> <span class="id">//</span> <span class="id">+</span> <span class="id">/fidx-&gt;</span>.<br/>
<span class="id">rewrite</span> <span class="id">-big_mkcond;</span> <span class="id">under</span> <span class="id">[RHS]eq_bigl</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_setE">mem_setE</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id">perm_big;</span> <span class="id">rewrite</span> <span class="id">uniq_perm//</span> <span class="id">=&gt;</span> <span class="id">i;</span> <span class="id">rewrite</span> <span class="id">!inE</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbigE">fsbigE</a></span> (<span class="id"><a name="R:167">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:168">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:167">R</a></span>) (<span class="id"><a name="op:169">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:168">idx</a></span>) (<span class="id"><a name="T:170">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="A:171">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:170">T</a></span>) (<span class="id"><a name="r:172">r</a></span> <span class="id">:</span> <span class="id">seq</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:170">T</a></span>) (<span class="id"><a name="f:173">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:170">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:167">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">uniq</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:172">r</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set`'_x_']'">[set`</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:172">r]</a></span> <span class="id">`&lt;=`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:171">A</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="i:174">i,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:171">A</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:174">i</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:174">i</a></span> <span class="id">\notin</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:172">r</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#f:173">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:174">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:168">idx</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:175">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:171">A</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:173">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:175">i</a></span> <span class="id">=</span> <span class="id">\big[op/idx]_</span>(<span class="id"><a name="i:179">i</a></span> <span class="id">&lt;-</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:172">r</a></span> <span class="id">|</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:179">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:171">A</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:173">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:179">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
<span class="id">move=&gt;</span> <span class="id">r_uniq</span> <span class="id">rQ</span> <span class="id">fidx;</span> <span class="id">rewrite</span> <span class="id">[RHS]bigfs</span> <span class="id">?set_mem_set//=</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">i;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE;</a></span> <span class="id">apply:</span> <span class="id">fidx</span>.<br/>
Qed.</div>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigE">fsbigE</a></span> <span class="id">{R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">T</span> <span class="id">A}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_seq">fsbig_seq</a></span> (<span class="id"><a name="R:182">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:183">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:182">R</a></span>) (<span class="id"><a name="op:184">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:183">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="I:185">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="r:186">r</a></span> <span class="id">:</span> <span class="id">seq</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:185">I</a></span>) (<span class="id"><a name="F:187">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:185">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:182">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">uniq</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:186">r</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\big[op/idx]_</span>(<span class="id"><a name="a:188">a</a></span> <span class="id">&lt;-</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:186">r</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:187">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:188">a</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="a:191">a</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set`'_x_']'">[set`</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:186">r]</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:187">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:191">a</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
<span class="id">move=&gt;</span> <span class="id">ur;</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigE">fsbigE</a></span> <span class="id">r</span>)<span class="id">//=;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">+</span> <span class="id">-&gt;</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_setE">mem_setE</a></span> <span class="id">big_seq_cond</span> <span class="id">big_mkcondr</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig1">fsbig1</a></span> (<span class="id"><a name="R:195">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:196">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:195">R</a></span>) (<span class="id"><a name="op:197">op</a></span> <span class="id">:</span> <span class="id">Monoid.law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:196">idx</a></span>) (<span class="id"><a name="I:198">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="P:199">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:198">I</a></span>) (<span class="id"><a name="F:200">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:198">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:195">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="i:201">i,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:199">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:201">i</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:200">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:201">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:196">idx</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:202">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:199">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:200">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:202">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:196">idx</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
<span class="id">move=&gt;</span> <span class="id">PF0;</span> <span class="id">rewrite</span> <span class="id">big1_seq//</span> <span class="id">=&gt;</span> <span class="id">i/=;</span> <span class="id">case:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP=&gt;</a></span> <span class="id">//=</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">X</span> <span class="id">XP</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Xi;</span> <span class="id">rewrite</span> <span class="id">PF0//;</span> <span class="id">apply/XP</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_dflt">fsbig_dflt</a></span> (<span class="id"><a name="R:206">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:207">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:206">R</a></span>) (<span class="id"><a name="op:208">op</a></span> <span class="id">:</span> <span class="id">Monoid.law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:207">idx</a></span>) (<span class="id"><a name="I:209">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="P:210">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:209">I</a></span>) (<span class="id"><a name="F:211">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:209">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:206">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#infinite_set">infinite_set</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#P:210">P</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:211">F</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:207">idx]</a></span>)<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'->'_x">-&gt;</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:212">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:210">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:211">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:212">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:207">idx</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
 <span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP;</a></span> <span class="id">rewrite</span> <span class="id">?big_nil//</span> <span class="id">=&gt;</span> <span class="id">X</span> <span class="id">_</span> <span class="id">_</span> <span class="id">&lt;-</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_widen">fsbig_widen</a></span> (<span class="id"><a name="T:216">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>) <span class="id">[R</span> <span class="id">:</span> <span class="id">Type]</span> <span class="id">[idx</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:217">R]</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="op:219">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:218">idx</a></span>) (<span class="id"><a name="P:220">P</a></span> <span class="id"><a name="D:221">D</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:216">T</a></span>) (<span class="id"><a name="f:222">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:216">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:217">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#P:220">P</a></span> <span class="id">`&lt;=`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#D:221">D</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#D:221">D</a></span> <span class="id">`\`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:220">P</a></span> <span class="id">`&lt;=`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#f:222">f</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:218">idx]</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:223">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:220">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:222">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:223">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:227">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#D:221">D</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:222">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:227">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
<span class="id">move=&gt;</span> <span class="id">PD</span> <span class="id">DPf;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_mkcond">fsbig_mkcond</a></span> <span class="id">[RHS]fsbig_mkcond</span>.<br/>
<span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> <span class="id">=&gt;</span> <span class="id">x</span> <span class="id">_;</span> <span class="id">rewrite</span> <span class="id">/patch;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn;</a></span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE,</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">Px;</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifT">ifT//</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE;</a></span> <span class="id">apply:</span> <span class="id">PD</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">Px;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span> <span class="id">=&gt;</span> <span class="id">//;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">=&gt;</span> <span class="id">Dx;</span> <span class="id">rewrite</span> <span class="id">DPf</span>.<br/>
Qed.</div>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_widen">fsbig_widen</a></span> <span class="id">{T</span> <span class="id">R</span> <span class="id">idx</span> <span class="id">op}</span> <span class="id">P</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_supp">fsbig_supp</a></span> (<span class="id"><a name="T:231">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>) <span class="id">[R</span> <span class="id">:</span> <span class="id">Type]</span> <span class="id">[idx</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:232">R]</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="op:234">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:233">idx</a></span>) (<span class="id"><a name="P:235">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:231">T</a></span>) (<span class="id"><a name="f:236">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:231">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:232">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:237">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:235">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:236">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:237">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:241">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:235">P</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#f:236">f</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:233">idx]</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:236">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:241">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
 <span class="gallina-kwd">by</span> <span class="id">apply/esym/fsbig_widen</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">x</span> <span class="id">[Px</span> <span class="id">/not_andP[]//=];</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#notK">notK</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_fwiden">fsbig_fwiden</a></span> (<span class="id"><a name="T:245">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>) <span class="id">[R</span> <span class="id">:</span> <span class="id">eqType]</span> <span class="id">[idx</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:246">R]</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="op:248">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:247">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="r:249">r</a></span> <span class="id">:</span> <span class="id">seq</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:245">T</a></span>) (<span class="id"><a name="P:250">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:245">T</a></span>) (<span class="id"><a name="f:251">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:245">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:246">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#P:250">P</a></span> <span class="id">`&lt;=`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set`'_x_']'">[set`</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:249">r]</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id">uniq</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:249">r</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_'|'_x_']'">[set</a></span> <span class="id"><a name="i:252">i</a></span> <span class="id">|</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:252">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:249">r]</a></span> <span class="id">`\`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:250">P</a></span> <span class="id">`&lt;=`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#f:251">f</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:247">idx]</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:253">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:250">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:251">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:253">i</a></span> <span class="id">=</span> <span class="id">\big[op/idx]_</span>(<span class="id"><a name="i:257">i</a></span> <span class="id">&lt;-</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#r:249">r</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:251">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:257">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">*;</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_widen">fsbig_widen</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set`'_x_']'">[set`</a></span> <span class="id">r]</span>)<span class="id">//</span> <span class="id">[RHS]fsbig_seq</span>. Qed.</div>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_fwiden">fsbig_fwiden</a></span> <span class="id">{T</span> <span class="id">R</span> <span class="id">idx</span> <span class="id">op}</span> <span class="id">r</span> <span class="id">P</span> <span class="id">f</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_set0">fsbig_set0</a></span> (<span class="id"><a name="R:260">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:261">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:260">R</a></span>) (<span class="id"><a name="op:262">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:261">idx</a></span>) (<span class="id"><a name="T:263">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;(<span class="id"><a name="F:264">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:263">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:260">R</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="x:265">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:264">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:265">x</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:261">idx</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigE">fsbigE</a></span> <span class="id">[::]</span>)<span class="id">//</span> <span class="id">big_nil</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_set1">fsbig_set1</a></span> (<span class="id"><a name="R:269">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:270">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:269">R</a></span>) (<span class="id"><a name="op:271">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:270">idx</a></span>) (<span class="id"><a name="T:272">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>) <span class="id"><a name="x:273">x</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a name="F:274">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:272">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:269">R</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="y:275">y</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:273">x]</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:274">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#y:275">y</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:274">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:273">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigE">fsbigE</a></span> <span class="id">[::</span> <span class="id">x]</span>)<span class="id">//=</span> <span class="id">?big_cons</span> <span class="id">?big_nil</span> <span class="id">?ifT</span> <span class="id">?inE</span> <span class="id">?Monoid</span>.<span class="id">simpm//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">y</span> <span class="id">/=;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">=&gt;</span> <span class="id">/eqP</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">i</span> <span class="id">-&gt;;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">eqxx</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="__deprecated__full_fsbigID">__deprecated__full_fsbigID</a></span> (<span class="id"><a name="R:279">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:280">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:279">R</a></span>) (<span class="id"><a name="op:281">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:280">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="I:282">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="B:283">B</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:282">I</a></span>) (<span class="id"><a name="A:284">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:282">I</a></span>) (<span class="id"><a name="F:285">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:282">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:279">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#A:284">A</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:285">F</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:280">idx]</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:286">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:284">A</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:285">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:286">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#op:281">op</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:290">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:284">A</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:283">B</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:285">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:290">i</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:294">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:284">A</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'~`'_x">~`</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:283">B</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:285">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:294">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
<span class="id">move=&gt;</span> <span class="id">finF</span>.<br/>
<span class="id">have</span> <span class="id">fsbig_setI</span> <span class="id">C</span> <span class="id">:</span> <span class="id">\big[op/idx]_</span>(<span class="id"><a name="i:303">i</a></span> <span class="id">&lt;-</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[fset</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:299">x</a></span> <span class="id">|</span> <span class="id"><a name="x:299">x</a></span> <span class="gallina-kwd">in</span> <span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span> (<span class="id">A</span> <span class="id">`&amp;`</span> <span class="id">F</span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id">idx]</span>) <span class="id">&amp;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:300">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#C:298">C]%fset</a></span>) <span class="id">F</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:303">i</a></span> <span class="id">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:306">i</a></span> <span class="id">\in</span> <span class="id">A</span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#C:298">C</a></span>) <span class="id">F</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:306">i</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> <span class="id">eq_fbigl</span> <span class="id">=&gt;</span> <span class="id">i</span> <span class="id">/=;</span> <span class="id">apply/idP/idP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!inE/=</span> <span class="id">=&gt;</span> <span class="id">/andP[+</span> <span class="id">Bi];</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set//</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">=&gt;</span> <span class="id">-[Ai</span> <span class="id">Fi]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span> <span class="id">?inE//</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIAC">setIAC;</a></span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="gallina-kwd">in</span> <span class="id">Bi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/finite_setIl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set;</a></span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIAC">setIAC;</a></span> <span class="id">exact/finite_setIl</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">=&gt;</span> <span class="id">-[[Ai</span> <span class="id">Bi]</span> <span class="id">Fi0];</span> <span class="id">rewrite</span> <span class="id">!inE/=</span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set//</a></span> <span class="id">!mem_set</span>.<br/>
<span class="id">rewrite</span> (<span class="id">big_fsetID</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#::fun_scope:'['_'pred'_x_'|'_x_']'">[pred</a></span> <span class="id"><a name="i:310">i</a></span> <span class="id">|</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:310">i</a></span> <span class="id">\in</span> <span class="id">B]</span>)<span class="id">/=</span> <span class="id">[locked_with</span> <span class="id">_</span> <span class="id">_]unlock</span>.<br/>
<span class="id">rewrite</span> <span class="id">fsbig_setI;</span> <span class="id">congr</span> (<span class="id">op</span> <span class="id">_</span> <span class="id">_</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">-fsbig_setI</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id">eq_fbigl</span> <span class="id">=&gt;</span> <span class="id">i;</span> <span class="id">rewrite</span> <span class="id">!inE</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#in_setC">in_setC</a></span>.<br/>
Qed.</div>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#__deprecated__full_fsbigID">__deprecated__full_fsbigID</a></span> <span class="id">{R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I}</span> <span class="id">B</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbigID">fsbigID</a></span> (<span class="id"><a name="R:313">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:314">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:313">R</a></span>) (<span class="id"><a name="op:315">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:314">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="I:316">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="B:317">B</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:316">I</a></span>) (<span class="id"><a name="A:318">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:316">I</a></span>) (<span class="id"><a name="F:319">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:316">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:313">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:318">A</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:320">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:318">A</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:319">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:320">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#op:315">op</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:324">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:318">A</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:317">B</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:319">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:324">i</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:328">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:318">A</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'~`'_x">~`</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:317">B</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:319">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:328">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">Afin;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#__deprecated__full_fsbigID">__deprecated__full_fsbigID;</a></span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_setIl">finite_setIl</a></span>. Qed.</div>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigID">fsbigID</a></span> <span class="id">{R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I}</span> <span class="id">B</span>.<br/>
<br/>
<span class="id">#[deprecated</span>(<span class="id">note=</span><span class="id">"Use fsbigID instead"</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span> <span class="id"><a name="full_fsbigID">full_fsbigID</a></span> <span class="id">:=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#__deprecated__full_fsbigID">__deprecated__full_fsbigID</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbigU">fsbigU</a></span> (<span class="id"><a name="R:332">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:333">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:332">R</a></span>) (<span class="id"><a name="op:334">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:333">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="I:335">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="A:336">A</a></span> <span class="id"><a name="B:337">B</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:335">I</a></span>) (<span class="id"><a name="F:338">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:335">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:332">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:336">A</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:337">B</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:336">A</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:337">B</a></span> <span class="id">`&lt;=`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:338">F</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:333">idx]</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:339">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:336">A</a></span> <span class="id">`|`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:337">B</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:338">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:339">i</a></span> <span class="id">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#op:334">op</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:343">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:336">A</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:338">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:343">i</a></span>) (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:347">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:337">B</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:338">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:347">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
<span class="id">move=&gt;</span> <span class="id">Afin</span> <span class="id">Bfin</span> <span class="id">AB0;</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigID">fsbigID</a></span> <span class="id">A</span>) <span class="id">?finite_setU;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">split</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setUK">setUK</a></span> <span class="id">-setDE;</span> <span class="id">congr</span> (<span class="id">op</span> <span class="id">_</span> <span class="id">_</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIUl">setIUl</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setICr">setICr</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0U">set0U</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_widen">fsbig_widen</a></span> <span class="id">=&gt;</span> <span class="id">//;</span> <span class="id">rewrite</span> <span class="id">-setDE</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDD">setDD</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span>.<br/>
Qed.</div>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigU">fsbigU</a></span> <span class="id">{R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I}</span> <span class="id">[A</span> <span class="id">B</span> <span class="id">F]</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbigU0">fsbigU0</a></span> (<span class="id"><a name="R:351">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:352">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:351">R</a></span>) (<span class="id"><a name="op:353">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:352">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="I:354">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="A:355">A</a></span> <span class="id"><a name="B:356">B</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:354">I</a></span>) (<span class="id"><a name="F:357">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:354">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:351">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:355">A</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:356">B</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:355">A</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:356">B</a></span> <span class="id">`&lt;=`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:358">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:355">A</a></span> <span class="id">`|`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:356">B</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:357">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:358">i</a></span> <span class="id">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#op:353">op</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:362">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:355">A</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:357">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:362">i</a></span>) (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:366">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#B:356">B</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:357">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:366">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">Af</span> <span class="id">Bf</span> <span class="id">AB0;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigU">fsbigU//</a></span> <span class="id">=&gt;</span> <span class="id">x</span> <span class="id">/AB0</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbigD1">fsbigD1</a></span> (<span class="id"><a name="R:370">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:371">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:370">R</a></span>) (<span class="id"><a name="op:372">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:371">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="I:373">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="i:374">i</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:373">I</a></span>) (<span class="id"><a name="A:375">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:373">I</a></span>) (<span class="id"><a name="F:376">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:373">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:370">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:375">A</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:375">A</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:374">i</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="j:377">j</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:375">A</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:376">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#j:377">j</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#op:372">op</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#F:376">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:374">i</a></span>) (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="j:381">j</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:375">A</a></span> <span class="id">`\</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:374">i</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:376">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#j:381">j</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">*;</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigID">fsbigID</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id">i]</span>) <span class="id">?setI1</span> <span class="id">?ifT</span> <span class="id">?inE</span> <span class="id">?fsbig_set1</span>. Qed.</div>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigD1">fsbigD1</a></span> <span class="id">{R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I}</span> <span class="id">i</span> <span class="id">A</span> <span class="id">F</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="full_fsbig_distrr">full_fsbig_distrr</a></span> (<span class="id"><a name="R:385">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="zero:386">zero</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:385">R</a></span>) (<span class="id"><a name="times:387">times</a></span> <span class="id">:</span> <span class="id">Monoid.mul_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#zero:386">zero</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="plus:388">plus</a></span> <span class="id">:</span> <span class="id">Monoid.add_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#zero:386">zero</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#times:387">times</a></span>) (<span class="id"><a name="I:389">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="a:390">a</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:385">R</a></span>) (<span class="id"><a name="P:391">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:389">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="F:392">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:389">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:385">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#P:391">P</a></span> <span class="id">`&amp;`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:392">F</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#zero:386">zero]</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#times:387">times</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:390">a</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[plus/zero]_</a></span>(<span class="id"><a name="i:393">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:391">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:392">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:393">i</a></span>) <span class="id">=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[plus/zero]_</a></span>(<span class="id"><a name="i:397">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:391">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#times:387">times</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:390">a</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#F:392">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:397">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
<span class="id">move=&gt;</span> <span class="id">finF;</span> <span class="id">elim/Peq</span> <span class="id">:</span> <span class="id">R</span> <span class="id">=&gt;</span> <span class="id">R</span> <span class="gallina-kwd">in</span> <span class="id">zero</span> <span class="id">times</span> <span class="id">plus</span> <span class="id">a</span> <span class="id">F</span> <span class="id">finF</span> <span class="id">*</span>.<br/>
<span class="id">have</span> <span class="id">[-&gt;|a0]</span> <span class="id">:=</span> <span class="id">eqVneq</span> <span class="id">a</span> <span class="id">zero</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">Monoid.mul0m</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig1">fsbig1//;</a></span> <span class="id">move=&gt;</span> <span class="id">i</span> <span class="id">_;</span> <span class="id">rewrite</span> <span class="id">Monoid.mul0m</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_distrr</span> <span class="id">[RHS]</span>(<span class="id"><a href="mathcomp.classical.fsbigop.html#full_fsbigID">full_fsbigID</a></span> (<span class="id">F</span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id">zero]</span>))<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#sub_finite_set">sub_finite_set</a></span> <span class="id">finF</span> <span class="id">=&gt;</span> <span class="id">x</span> <span class="id">/=</span> <span class="id">[Px</span> <span class="id">aFN0]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">split=&gt;</span> <span class="id">//;</span> <span class="id">apply:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra_not">contra_not</a></span> <span class="id">aFN0</span> <span class="id">=&gt;</span> <span class="id">-&gt;;</span> <span class="id">rewrite</span> <span class="id">Monoid.simpm</span>.<br/>
<span class="id">rewrite</span> <span class="id">[X</span> <span class="gallina-kwd">in</span> <span class="id">plus</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#X:401">X</a></span> <span class="id">_]</span>(<span class="id">_</span> <span class="id">:</span> <span class="id">_</span> <span class="id">=</span> <span class="id">zero</span>) <span class="id">?Monoid</span>.<span class="id">simpm;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig1">fsbig1//</a></span> <span class="id">=&gt;</span> <span class="id">i</span> <span class="id">[_</span> <span class="id">-&gt;];</span> <span class="id">rewrite</span> <span class="id">Monoid.simpm</span>.<br/>
<span class="id">apply/esym/fsbig_fwiden</span> <span class="id">=&gt;</span> <span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">x</span> <span class="id">[Px</span> <span class="id">Fx0];</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#in_finite_support">in_finite_support//</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
<span class="id">move=&gt;</span> <span class="id">i</span> <span class="id">[];</span> <span class="id">rewrite</span> <span class="id">/preimage/=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#in_finite_support">in_finite_support</a></span> <span class="id">//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!inE</span> <span class="id">=&gt;</span> <span class="id">-[Pi];</span> <span class="id">rewrite</span> <span class="id">/preimage/=</span> <span class="id">=&gt;</span> <span class="id">Fi0;</span> <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_distrr">fsbig_distrr</a></span> (<span class="id"><a name="R:402">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="zero:403">zero</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:402">R</a></span>) (<span class="id"><a name="times:404">times</a></span> <span class="id">:</span> <span class="id">Monoid.mul_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#zero:403">zero</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="plus:405">plus</a></span> <span class="id">:</span> <span class="id">Monoid.add_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#zero:403">zero</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#times:404">times</a></span>) (<span class="id"><a name="I:406">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="a:407">a</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:402">R</a></span>) (<span class="id"><a name="P:408">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:406">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="F:409">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:406">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:402">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:408">P</a></span>  <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#times:404">times</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:407">a</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[plus/zero]_</a></span>(<span class="id"><a name="i:410">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:408">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:409">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:410">i</a></span>) <span class="id">=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[plus/zero]_</a></span>(<span class="id"><a name="i:414">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:408">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#times:404">times</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:407">a</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#F:409">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:414">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">Pf;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#full_fsbig_distrr">full_fsbig_distrr;</a></span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_setIl">finite_setIl</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="mulr_fsumr">mulr_fsumr</a></span> (<span class="id"><a name="R:418">R</a></span> <span class="id">:</span> <span class="id">idomainType</span>) (<span class="id"><a name="I:419">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) <span class="id"><a name="a:420">a</a></span> (<span class="id"><a name="P:421">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:419">I</a></span>) (<span class="id"><a name="F:422">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:419">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:418">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#a:420">a</a></span> <span class="id">*</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#::ring_scope:'\sum_'_'('_x_'\in'_x_')'_x">\sum_</a></span>(<span class="id"><a name="i:423">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:421">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:422">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:423">i</a></span>) <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::ring_scope:'\sum_'_'('_x_'\in'_x_')'_x">\sum_</a></span>(<span class="id"><a name="i:427">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:421">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#a:420">a</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:422">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:427">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
<span class="id">have</span> <span class="id">[-&gt;|aN0]</span> <span class="id">:=</span> <span class="id">eqVneq</span> <span class="id">a</span> <span class="id">0;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">mul0r</span> <span class="id">big1//</span> <span class="id">=&gt;</span> <span class="id">i;</span> <span class="id">rewrite</span> <span class="id">mul0r</span>.<br/>
<span class="id">case:</span> (<span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> (<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id">P</span> <span class="id">`&amp;`</span> <span class="id">F</span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id">0]</span>))) <span class="id">=&gt;</span> <span class="id">PFfin</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#full_fsbig_distrr">full_fsbig_distrr</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">!fsbig_dflt</span> <span class="id">?mulr0//;</span> <span class="id">apply:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra_not">contra_not</a></span> <span class="id">PFfin;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#sub_finite_set">sub_finite_set</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">x</span> <span class="id">[Px</span> <span class="id">/eqP</span> <span class="id">Fx0];</span> <span class="id">split=&gt;</span> <span class="id">//=;</span> <span class="id">apply/eqP;</span> <span class="id">rewrite</span> <span class="id">mulf_neq0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="mulr_fsuml">mulr_fsuml</a></span> (<span class="id"><a name="R:431">R</a></span> <span class="id">:</span> <span class="id">idomainType</span>) (<span class="id"><a name="I:432">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) <span class="id"><a name="a:433">a</a></span> (<span class="id"><a name="P:434">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:432">I</a></span>) (<span class="id"><a name="F:435">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:432">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:431">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id"><a href="mathcomp.classical.fsbigop.html#::ring_scope:'\sum_'_'('_x_'\in'_x_')'_x">\sum_</a></span>(<span class="id"><a name="i:436">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:434">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:435">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:436">i</a></span>) <span class="id">*</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:433">a</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::ring_scope:'\sum_'_'('_x_'\in'_x_')'_x">\sum_</a></span>(<span class="id"><a name="i:440">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:434">P</a></span>) (<span class="id"><a href="mathcomp.classical.fsbigop.html#F:435">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:440">i</a></span> <span class="id">*</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:433">a</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">mulrC</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#mulr_fsumr">mulr_fsumr;</a></span> <span class="id">under</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">mulrC</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_ord">fsbig_ord</a></span> <span class="id"><a name="R:444">R</a></span> (<span class="id"><a name="idx:445">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:444">R</a></span>) (<span class="id"><a name="op:446">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:445">idx</a></span>) <span class="id"><a name="n:447">n</a></span> (<span class="id"><a name="F:448">F</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:444">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">\big[op/idx]_</span>(<span class="id"><a name="a:449">a</a></span> <span class="id">&lt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#n:447">n</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:448">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:449">a</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="a:452">a</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#:::'`I_'_x">`I_n</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:448">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#a:452">a</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
<span class="id">rewrite</span> <span class="id">-</span>(<span class="id">big_mkord</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#xpredT">xpredT</a></span>) <span class="id">[LHS]fsbig_seq</span> <span class="id">?iota_uniq//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigl">eq_fsbigl;</a></span> <span class="id">rewrite</span> <span class="id">-Iiota</span> <span class="id">/index_iota</span> <span class="id">subn0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_finite">fsbig_finite</a></span> (<span class="id"><a name="R:456">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:457">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:456">R</a></span>) (<span class="id"><a name="op:458">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:457">idx</a></span>) (<span class="id"><a name="T:459">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="D:460">D</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:459">T</a></span>) (<span class="id"><a name="F:461">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:459">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:456">R</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#D:460">D</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="x:462">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#D:460">D</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:461">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:462">x</a></span> <span class="id">=</span> <span class="id">\big[op/idx]_</span>(<span class="id"><a name="x:466">x</a></span> <span class="id">&lt;-</span> <span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#D:460">D</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:461">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:466">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
<span class="id">elim/Peq:</span> <span class="id">R</span> <span class="id">=&gt;</span> <span class="id">R</span> <span class="gallina-kwd">in</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">F</span> <span class="id">*</span> <span class="id">=&gt;</span> <span class="id">Dfin</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_fwiden">fsbig_fwiden;</a></span> <span class="id">rewrite</span> <span class="id">?fset_setK//</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDv">setDv</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span class="id"><a name="fsbig2">fsbig2</a></span>.<br/>
<span class="vernacular">Variables</span> (<span class="id"><a name="fsbig2.R">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="fsbig2.idx">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:469">R</a></span>) (<span class="id"><a name="fsbig2.op">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:470">idx</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="reindex_fsbig">reindex_fsbig</a></span> <span class="id">{I</span> <span class="id"><a name="J:473">J</a></span> <span class="id">:</span> <span class="id">choiceType}</span> (<span class="id"><a name="h:474">h</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:472">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:473">J</a></span>) <span class="id"><a name="P:475">P</a></span> <span class="id"><a name="Q:476">Q</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="F:477">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:473">J</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.R">R</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">set_bij</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:475">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:476">Q</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#h:474">h</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="j:478">j</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:476">Q</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:477">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#j:478">j</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:482">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:475">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:477">F</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#h:474">h</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:482">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
<span class="id">elim/choicePpointed:</span> <span class="id">I</span> <span class="id">=&gt;</span> <span class="id">I</span> <span class="gallina-kwd">in</span> <span class="id">h</span> <span class="id">P</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!emptyE</span> <span class="id">=&gt;</span> <span class="id">/Pbij[{}h</span> <span class="id">-&gt;]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]</a></span>(<span class="id"><a href="mathcomp.classical.functions.html#image_eq">image_eq</a></span> <span class="id">h</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#image_set0">image_set0</a></span> <span class="id">!fsbig_set0</span>.<br/>
<span class="id">elim/choicePpointed:</span> <span class="id">J</span> <span class="id">=&gt;</span> <span class="id">J</span> <span class="gallina-kwd">in</span> <span class="id">F</span> <span class="id">h</span> <span class="id">Q</span> <span class="id">*;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">have</span> <span class="id">:=</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#no">no</a></span> (<span class="id">h</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#point">point</a></span>).<br/>
<span class="id">move=&gt;</span> <span class="id">/</span>(<span class="id">@pPbij</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)<span class="id">[{}h</span> <span class="id">-&gt;]</span>.<br/>
<span class="id">pose</span> <span class="id">A</span> <span class="id">:=</span> <span class="id">P</span> <span class="id">`&amp;`</span> (<span class="id">F</span> <span class="id">\o</span> <span class="id">h</span>) <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx]</a></span>.<br/>
<span class="id">pose</span> <span class="id">B</span> <span class="id">:=</span> <span class="id">Q</span> <span class="id">`&amp;`</span> <span class="id">F</span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_'~'_x_']'">[set~</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx]</a></span>.<br/>
<span class="id">have</span> <span class="id">/</span>(<span class="id">@pPbij</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)<span class="id">[g</span> <span class="id">gh]</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">set_bij</a></span> <span class="id">A</span> <span class="id">B</span> <span class="id">h</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.functions.html#splitbij_sub">splitbij_sub;</a></span> <span class="id">rewrite</span> <span class="id">/A</span> <span class="id">/B</span> <span class="id">/preimage</span> <span class="id">//=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">x</span> <span class="id">[Px</span> <span class="id">Fhx];</span> <span class="id">split=&gt;</span> <span class="id">//;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">x</span> <span class="id">[Qx</span> <span class="id">Fx];</span> <span class="id">split;</span> <span class="id">rewrite</span> <span class="id">?invK</span> <span class="id">?inE//;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>.<br/>
<span class="id">case:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP;</a></span> <span class="id">rewrite</span> <span class="id">?big_nil//=</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP;</a></span> <span class="id">rewrite</span> <span class="id">?big_nil//=</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span> <span class="id">X</span> <span class="id">XP</span> <span class="id">_</span> <span class="id">XE</span> <span class="id">[];</span> <span class="id">rewrite</span> <span class="id">-/B</span> <span class="id">-</span>(<span class="id"><a href="mathcomp.classical.functions.html#image_eq">image_eq</a></span> <span class="id">g</span>) <span class="id">/A</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_image">finite_image;</a></span> <span class="id">rewrite</span> <span class="id">-XE</span>.<br/>
<span class="id">move=&gt;</span> <span class="id">Y</span> <span class="id">YQ</span> <span class="id">Fidx</span> <span class="id">YE;</span> <span class="id">case:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span> <span class="id">[];</span> <span class="id">rewrite</span> <span class="id">-/A</span> <span class="id">-</span>(<span class="id"><a href="mathcomp.classical.functions.html#image_eq">image_eq</a></span> <span class="id"><a href="mathcomp.classical.functions.html#::form_scope:'['_'bij'_'of'_x_']'">[bij</a></span> <span class="id">of</span> <span class="id">g^-1%FUN]</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_image">finite_image;</a></span> <span class="id">rewrite</span> <span class="id">/B</span> <span class="id">-YE</span>.<br/>
<span class="id">move=&gt;</span> <span class="id">X</span> <span class="id">XP</span> <span class="id">Fhidx</span> <span class="id">XE;</span> <span class="id">suff</span> <span class="id">-&gt;</span> <span class="id">:</span> <span class="id">Y</span> <span class="id">=</span> (<span class="id">h</span> <span class="id">@`</span> <span class="id">X</span>)<span class="id">%fset</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">big_imfset//</span> <span class="id">=&gt;</span> <span class="id">?</span> <span class="id">?</span> <span class="id">?</span> <span class="id">?</span> <span class="id">/inj;</span> <span class="id">apply;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE;</a></span> <span class="id">apply:</span> <span class="id">XP</span>.<br/>
<span class="id">have</span> <span class="id">BY</span> <span class="id">j</span> <span class="id">:</span> (<span class="id">B</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#j:486">j</a></span>) <span class="id">=</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#j:486">j</a></span> <span class="id">\in</span> <span class="id">Y</span>) <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-[RHS]/</span>(<span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set`'_x_']'">[set`</a></span> <span class="id">Y]</span> <span class="id">j</span>) <span class="id">YE</span>.<br/>
<span class="id">have</span> <span class="id">AX</span> <span class="id">i</span> <span class="id">:</span> (<span class="id">A</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:487">i</a></span>) <span class="id">=</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#i:487">i</a></span> <span class="id">\in</span> <span class="id">X</span>) <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-[RHS]/</span>(<span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set`'_x_']'">[set`</a></span> <span class="id">X]</span> <span class="id">i</span>) <span class="id">XE</span>.<br/>
<span class="id">rewrite</span> <span class="id">gh;</span> <span class="id">apply/fsetP=&gt;</span> <span class="id">j;</span> <span class="id">apply/idP/imfsetP</span> <span class="id">=&gt;</span> <span class="id">[Yj</span> <span class="id">|</span> <span class="id">[i</span> <span class="id">iX</span> <span class="id">-&gt;]];</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-BY;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.functions.html#funS">funS;</a></span> <span class="id">rewrite</span> <span class="id">AX</span>.<br/>
<span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> (<span class="id">g^-1%FUN</span> <span class="id">j</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">?invK</span> <span class="id">?inE</span> <span class="id">?BY//</span> <span class="id">-AX;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.functions.html#funS">funS;</a></span> <span class="id">rewrite</span> <span class="id">BY</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_image">fsbig_image</a></span> <span class="id">{I</span> <span class="id"><a name="J:489">J</a></span> <span class="id">:</span> <span class="id">choiceType}</span> <span class="id"><a name="P:490">P</a></span> (<span class="id"><a name="h:491">h</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:488">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:489">J</a></span>) (<span class="id"><a name="F:492">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:489">J</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.R">R</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.classical.functions.html#set_inj">set_inj</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:490">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#h:491">h</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="j:493">j</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#h:491">h</a></span> <span class="id">@`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:490">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:492">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#j:493">j</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:497">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:490">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:492">F</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#h:491">h</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:497">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">/inj_bij;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbig">reindex_fsbig</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="__deprecated__reindex_inside">__deprecated__reindex_inside</a></span> <span class="id">{I</span> <span class="id"><a name="J:502">J</a></span> <span class="id">:</span> <span class="id">choiceType}</span> <span class="id"><a name="P:503">P</a></span> <span class="id"><a name="Q:504">Q</a></span> (<span class="id"><a name="h:505">h</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:501">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:502">J</a></span>) (<span class="id"><a name="F:506">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:502">J</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.R">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#bijective">bijective</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#h:505">h</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:503">P</a></span> <span class="id">`&lt;=`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#h:505">h</a></span> <span class="id">@`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:504">Q</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:504">Q</a></span> <span class="id">`&lt;=`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#h:505">h</a></span> <span class="id">@^-1`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:503">P</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="j:507">j</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:503">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:506">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#j:507">j</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:511">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:504">Q</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:506">F</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#h:505">h</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:511">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
<span class="id">move=&gt;</span> <span class="id">hbij</span> <span class="id">PQ</span> <span class="id">QP;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbig">reindex_fsbig;</a></span> <span class="id">split=&gt;</span> <span class="id">//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">x</span> <span class="id">y</span> <span class="id">_</span> <span class="id">_</span> <span class="id">/</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#bij_inj">bij_inj</a></span> <span class="id">hbij</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="reindex_fsbigT">reindex_fsbigT</a></span> <span class="id">{I</span> <span class="id"><a name="J:516">J</a></span> <span class="id">:</span> <span class="id">choiceType}</span> (<span class="id"><a name="h:517">h</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:515">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:516">J</a></span>) (<span class="id"><a name="F:518">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:516">J</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.R">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#bijective">bijective</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#h:517">h</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="j:519">j</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_':'_x_']'">[set:</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:516">J]</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:518">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#j:519">j</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:523">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_':'_x_']'">[set:</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:515">I]</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:518">F</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#h:517">h</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:523">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-setTT_bijective</span> <span class="id">=&gt;</span> <span class="id">-[?</span> <span class="id">?</span> <span class="id">?];</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbig">reindex_fsbig</a></span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2">fsbig2</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbig">reindex_fsbig</a></span> <span class="id">{R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span> <span class="id">J}</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_image">fsbig_image</a></span> <span class="id">{R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span> <span class="id">J}</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#__deprecated__reindex_inside">__deprecated__reindex_inside</a></span> <span class="id">{R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span> <span class="id">J}</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbigT">reindex_fsbigT</a></span> <span class="id">{R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span> <span class="id">J}</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<span class="id">#[deprecated</span>(<span class="id">note=</span><span class="id">"use reindex_fsbig, fsbig_image or reindex_fsbigT instead"</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span> <span class="id"><a name="reindex_inside">reindex_inside</a></span> <span class="id">:=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#__deprecated__reindex_inside">__deprecated__reindex_inside</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">note=</span><span class="id">"use reindex_fsbigT instead"</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span> <span class="id"><a name="reindex_inside_setT">reindex_inside_setT</a></span> <span class="id">:=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbigT">reindex_fsbigT</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbigN1">fsbigN1</a></span> (<span class="id"><a name="R:527">R</a></span> <span class="id">:</span> <span class="id">eqType</span>) (<span class="id"><a name="idx:528">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:527">R</a></span>) (<span class="id"><a name="op:529">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:528">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="T1:530">T1</a></span> <span class="id"><a name="T2:531">T2</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="Q:532">Q</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T2:531">T2</a></span>) (<span class="id"><a name="f:533">f</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T1:530">T1</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T2:531">T2</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:527">R</a></span>) (<span class="id"><a name="x:534">x</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T1:530">T1</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="y:535">y</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:532">Q</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:533">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:534">x</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#y:535">y</a></span> <span class="id">!=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:528">idx</a></span> <span class="id">-&gt;</span> <span class="gallina-kwd">exists2</span> <span class="id"><a name="y:539">y,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:532">Q</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#y:539">y</a></span> <span class="id">&amp;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#f:533">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:534">x</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#y:540">y</a></span> <span class="id">!=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:528">idx</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
<span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.boolp.html#contra_neqP">contra_neqP</a></span> <span class="id">=&gt;</span> <span class="id">/forall2NP</span> <span class="id">Qf;</span> <span class="id">apply/fsbig1</span> <span class="id">=&gt;</span> <span class="id">y</span> <span class="id">Qy</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">case:</span> (<span class="id">Qf</span> <span class="id">y</span>) <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">/negP/negPn/eqP-&gt;</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_split">fsbig_split</a></span> (<span class="id"><a name="T:541">T</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="R:542">R</a></span> <span class="id">:</span> <span class="id">eqType</span>) (<span class="id"><a name="idx:543">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:542">R</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="op:544">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:543">idx</a></span>) (<span class="id"><a name="P:545">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:541">T</a></span>) (<span class="id"><a name="f:546">f</a></span> <span class="id"><a name="g:547">g</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:541">T</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:542">R</a></span>) <span class="id">:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:545">P</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="x:548">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:545">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#op:544">op</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#f:546">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:548">x</a></span>) (<span class="id"><a href="mathcomp.classical.fsbigop.html#g:547">g</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:548">x</a></span>) <span class="id">=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#op:544">op</a></span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="x:552">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:545">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#f:546">f</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:552">x</a></span>) (<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="x:556">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:545">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#g:547">g</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:556">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">Pfin;</span> <span class="id">rewrite</span> <span class="id">!fsbig_finite//</span> <span class="id">big_split</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsumr_ge0">fsumr_ge0</a></span> (<span class="id"><a name="R:560">R</a></span> <span class="id">:</span> <span class="id">numDomainType</span>) (<span class="id"><a name="I:561">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="P:562">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:561">I</a></span>) (<span class="id"><a name="F:563">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:561">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:560">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="i:564">i,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:562">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:564">i</a></span> <span class="id">-&gt;</span> <span class="id">0</span> <span class="id">&lt;=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:563">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:564">i</a></span>) <span class="id">-&gt;</span> <span class="id">0</span> <span class="id">&lt;=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::ring_scope:'\sum_'_'('_x_'\in'_x_')'_x">\sum_</a></span>(<span class="id"><a name="i:565">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:562">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:563">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:565">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
<span class="id">move=&gt;</span> <span class="id">PF;</span> <span class="id">case:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP;</a></span> <span class="id">rewrite</span> <span class="id">?big_nil//</span> <span class="id">=&gt;</span> <span class="id">X</span> <span class="id">XP</span> <span class="id">F0</span> <span class="id">_</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">big_seq_cond</span> <span class="id">big_mkcondr</span> <span class="id">sumr_ge0//</span> <span class="id">=&gt;</span> <span class="id">i</span> <span class="id">/XP/PF</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsumr_le0">fsumr_le0</a></span> (<span class="id"><a name="R:569">R</a></span> <span class="id">:</span> <span class="id">numDomainType</span>) (<span class="id"><a name="I:570">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="P:571">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:570">I</a></span>) (<span class="id"><a name="F:572">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:570">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:569">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="i:573">i,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:571">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:573">i</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:572">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:573">i</a></span> <span class="id">&lt;=</span> <span class="id">0</span>) <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::ring_scope:'\sum_'_'('_x_'\in'_x_')'_x">\sum_</a></span>(<span class="id"><a name="i:574">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:571">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:572">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:574">i</a></span> <span class="id">&lt;=</span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
<span class="id">move=&gt;</span> <span class="id">PF;</span> <span class="id">case:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP;</a></span> <span class="id">rewrite</span> <span class="id">?big_nil//</span> <span class="id">=&gt;</span> <span class="id">X</span> <span class="id">XP</span> <span class="id">F0</span> <span class="id">_</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">big_seq_cond</span> <span class="id">big_mkcondr</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#sumr_le0">sumr_le0//</a></span> <span class="id">=&gt;</span> <span class="id">i</span> <span class="id">/XP/PF</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsumr_gt0">fsumr_gt0</a></span> (<span class="id"><a name="R:578">R</a></span> <span class="id">:</span> <span class="id">realDomainType</span>) (<span class="id"><a name="I:579">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="r:580">r</a></span> <span class="id">:</span> <span class="id">seq</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:579">I</a></span>) (<span class="id"><a name="P:581">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:579">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="F:582">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:579">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:578">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id">&lt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::ring_scope:'\sum_'_'('_x_'\in'_x_')'_x">\sum_</a></span>(<span class="id"><a name="i:583">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:581">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:582">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:583">i</a></span> <span class="id">-&gt;</span> <span class="gallina-kwd">exists2</span> <span class="id"><a name="i:587">i,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:581">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:587">i</a></span> <span class="id">&amp;</span> <span class="id">0</span> <span class="id">&lt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:582">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:588">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
<span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.boolp.html#contraPP">contraPP</a></span> <span class="id">=&gt;</span> <span class="id">/forall2NP</span> <span class="id">xNPF;</span> <span class="id">rewrite</span> <span class="id">le_gtF//</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsumr_le0">fsumr_le0//</a></span> <span class="id">=&gt;</span> <span class="id">i</span> <span class="id">Pi</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">case:</span> (<span class="id">xNPF</span> <span class="id">i</span>) <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">/negP;</span> <span class="id">case:</span> <span class="id">ltP</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsumr_lt0">fsumr_lt0</a></span> (<span class="id"><a name="R:589">R</a></span> <span class="id">:</span> <span class="id">realDomainType</span>) (<span class="id"><a name="I:590">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="P:591">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:590">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="F:592">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:590">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:589">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::ring_scope:'\sum_'_'('_x_'\in'_x_')'_x">\sum_</a></span>(<span class="id"><a name="i:593">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:591">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:592">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:593">i</a></span> <span class="id">&lt;</span> <span class="id">0</span> <span class="id">-&gt;</span> <span class="gallina-kwd">exists2</span> <span class="id"><a name="i:597">i,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:591">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:597">i</a></span> <span class="id">&amp;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:592">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:598">i</a></span> <span class="id">&lt;</span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
<span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.boolp.html#contraPP">contraPP</a></span> <span class="id">=&gt;</span> <span class="id">/forall2NP</span> <span class="id">xNPF;</span> <span class="id">rewrite</span> <span class="id">le_gtF//</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsumr_ge0">fsumr_ge0//</a></span> <span class="id">=&gt;</span> <span class="id">i</span> <span class="id">Pi</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">case:</span> (<span class="id">xNPF</span> <span class="id">i</span>) <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">/negP;</span> <span class="id">case:</span> <span class="id">ltP</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="pfsumr_eq0">pfsumr_eq0</a></span> (<span class="id"><a name="R:599">R</a></span> <span class="id">:</span> <span class="id">realDomainType</span>) (<span class="id"><a name="I:600">I</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="P:601">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:600">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="F:602">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:600">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:599">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:601">P</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span class="id"><a name="i:603">i,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:601">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:603">i</a></span> <span class="id">-&gt;</span> <span class="id">0</span> <span class="id">&lt;=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:602">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:603">i</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::ring_scope:'\sum_'_'('_x_'\in'_x_')'_x">\sum_</a></span>(<span class="id"><a name="i:604">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:601">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:602">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:604">i</a></span> <span class="id">=</span> <span class="id">0</span> <span class="id">-&gt;</span> <span class="gallina-kwd">forall</span> <span class="id"><a name="i:608">i,</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:601">P</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:608">i</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#F:602">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:608">i</a></span> <span class="id">=</span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
<span class="id">move=&gt;</span> <span class="id">Pfin</span> <span class="id">F0</span> <span class="id">/eqP;</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.boolp.html#contraTP">contraTP</a></span> <span class="id">=&gt;</span> <span class="id">/existsPNP[i</span> <span class="id">Pi</span> <span class="id">/eqP</span> <span class="id">Fi0]</span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigD1">fsbigD1</a></span> <span class="id">i</span>)<span class="id">//=</span> <span class="id">paddr_eq0</span> <span class="id">?F0</span> <span class="id">?negb_and</span> <span class="id">?Fi0//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsumr_ge0">fsumr_ge0//</a></span> <span class="id">=&gt;</span> <span class="id">j</span> <span class="id">[/F0-&gt;]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_setU">fsbig_setU</a></span> <span class="id">{T}</span> <span class="id">{I</span> <span class="id">:</span> <span class="id">choiceType}</span> (<span class="id"><a name="A:611">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:610">I</a></span>) (<span class="id"><a name="F:612">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:610">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:609">T</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:611">A</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[setU/set0]_</a></span>(<span class="id"><a name="i:613">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:611">A</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:612">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:613">i</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'\bigcup_'_'('_x_'in'_x_')'_x">\bigcup_</a></span>(<span class="id"><a name="i:617">i</a></span> <span class="gallina-kwd">in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:611">A</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:612">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:617">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">Afin;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_finite">fsbig_finite//</a></span> <span class="id"><a href="mathcomp.classical.cardinality.html#bigsetU_fset_set">bigsetU_fset_set</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="fsbig_setU_set1">fsbig_setU_set1</a></span> <span class="id">{T</span> <span class="id">:</span> <span class="id">choiceType}</span> (<span class="id"><a name="A:619">A</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#T:618">T</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:619">A</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[setU/set0]_</a></span>(<span class="id"><a name="x:620">x</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:619">A</a></span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#::classical_set_scope:'['_'set'_x_']'">[set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:620">x]</a></span> <span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#A:619">A</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
<span class="id">move=&gt;</span> <span class="id">fA;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_setU">fsbig_setU//</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">apply/seteqP;</span> <span class="id">split=&gt;</span> <span class="id">[t</span> <span class="id">[x</span> <span class="id">Ax</span> <span class="id">-&gt;]//|t</span> <span class="id">At];</span> <span class="gallina-kwd">exists</span> <span class="id">t</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="pair_fsbig">pair_fsbig</a></span> (<span class="id"><a name="R:624">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:625">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:624">R</a></span>) (<span class="id"><a name="op:626">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:625">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="I:627">I</a></span> <span class="id"><a name="J:628">J</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="P:629">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:627">I</a></span>) (<span class="id"><a name="Q:630">Q</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:628">J</a></span>) (<span class="id"><a name="F:631">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:627">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:628">J</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:624">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:629">P</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:630">Q</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:632">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:629">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="j:633">j</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:630">Q</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:631">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:632">i</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#j:633">j</a></span><br/>
&nbsp;&nbsp;<span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="p:644">p</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:629">P</a></span> <span class="id">`*`</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:630">Q</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:631">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#p:644">p</a></span>.<span class="id">1</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#p:644">p</a></span>.<span class="id">2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
<span class="id">move=&gt;</span> <span class="id">Pfin</span> <span class="id">Qfin;</span> <span class="id">have</span> <span class="id">PQfin</span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id">P</span> <span class="id">`*`</span> <span class="id">Q</span>) <span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_setM">finite_setM</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">!fsbig_finite//=;</span> <span class="id">under</span> <span class="id">eq_bigr</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_finite">fsbig_finite//=</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">pair_big_dep_cond/=</span> <span class="id"><a href="mathcomp.classical.cardinality.html#fset_setM">fset_setM//</a></span>.<br/>
<span class="id">apply:</span> <span class="id">eq_fbigl</span> <span class="id">=&gt;</span> <span class="id">-[i</span> <span class="id">j]</span> <span class="id">//=;</span> <span class="id">apply/imfset2P/idP;</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">//=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">[x</span> <span class="id">+</span> <span class="id">[y</span> <span class="id">+</span> <span class="id">[-&gt;</span> <span class="id">-&gt;]]];</span> <span class="id">rewrite</span> <span class="id">4!inE/=</span> <span class="id">!andbT/=</span> <span class="id">=&gt;</span> <span class="id">-&gt;</span> <span class="id">-&gt;</span>.<br/>
<span class="id">move=&gt;</span> <span class="id">/andP[Pi</span> <span class="id">Qi];</span> <span class="gallina-kwd">exists</span> <span class="id">i;</span> <span class="id">rewrite</span> <span class="id">2?inE</span> <span class="id">?andbT//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> <span class="id">j;</span> <span class="id">rewrite</span> <span class="id">2?inE</span> <span class="id">?andbT</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id"><a name="exchange_fsbig">exchange_fsbig</a></span> (<span class="id"><a name="R:648">R</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span class="id"><a name="idx:649">idx</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:648">R</a></span>) (<span class="id"><a name="op:650">op</a></span> <span class="id">:</span> <span class="id">Monoid.com_law</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#idx:649">idx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="I:651">I</a></span> <span class="id"><a name="J:652">J</a></span> <span class="id">:</span> <span class="id">choiceType</span>) (<span class="id"><a name="P:653">P</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:651">I</a></span>) (<span class="id"><a name="Q:654">Q</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:652">J</a></span>) (<span class="id"><a name="F:655">F</a></span> <span class="id">:</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#I:651">I</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#J:652">J</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#R:648">R</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:653">P</a></span> <span class="id">-&gt;</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:654">Q</a></span> <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:656">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:653">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="j:657">j</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:654">Q</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:655">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:656">i</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#j:657">j</a></span><br/>
&nbsp;&nbsp;<span class="id">=</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="j:668">j</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#Q:654">Q</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#::big_scope:'\big'_'['_x_'/'_x_']_'_'('_x_'\in'_x_')'_x">\big[op/idx]_</a></span>(<span class="id"><a name="i:669">i</a></span> <span class="id">\in</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#P:653">P</a></span>) <span class="id"><a href="mathcomp.classical.fsbigop.html#F:655">F</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#i:669">i</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#j:668">j</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
<span class="id">move=&gt;</span> <span class="id">Pfin</span> <span class="id">Qfin;</span> <span class="id">rewrite</span> <span class="id">2?pair_fsbig//;</span> <span class="id">pose</span> <span class="id">swap</span> (<span class="id"><a name="x:680">x</a></span> <span class="id">:</span> <span class="id">I</span> <span class="id">*</span> <span class="id">J</span>) <span class="id">:=</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#x:680">x</a></span>.<span class="id">2,</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#x:680">x</a></span>.<span class="id">1</span>).<br/>
<span class="id">apply/esym/</span>(<span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbig">reindex_fsbig</a></span> <span class="id">swap</span>).<br/>
<span class="id">split=&gt;</span> <span class="id">[?</span> <span class="id">[?</span> <span class="id">?]//|[?</span> <span class="id">?]</span> <span class="id">[?</span> <span class="id">?]</span> <span class="id">/set_mem[?</span> <span class="id">?]</span> <span class="id">/set_mem[?</span> <span class="id">?]</span> <span class="id">[-&gt;</span> <span class="id">-&gt;]//|]</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">[i</span> <span class="id">j]</span> <span class="id">[?</span> <span class="id">?];</span> <span class="gallina-kwd">exists</span> (<span class="id">j,</span> <span class="id">i</span>).<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
</body>
</html>
