
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module monae.example_spark</title>
<meta name="description" content="Documentation of Coq module monae.example_spark" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <header>
    <p><a href="./index.html">coq2html</a></p>
    <h1 class="title">Module monae.example_spark</h1>
    <p><a href="">source</a></p>
  </header>

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details><summary>monae</summary>
          <ul>
          <li><a href="monae.proba_monad_model.html">proba_monad_model</a></li>
<li><a href="monae.example_monty.html">example_monty</a></li>
<li><a href="monae.typed_store_lib.html">typed_store_lib</a></li>
<li><a href="monae.monae_lib.html">monae_lib</a></li>
<li><a href="monae.example_spark.html">example_spark</a></li>
<li><a href="monae.example_quicksort.html">example_quicksort</a></li>
<li><a href="monae.monad_model.html">monad_model</a></li>
<li><a href="monae.fail_lib.html">fail_lib</a></li>
<li><a href="monae.category.html">category</a></li>
<li><a href="monae.altprob_model.html">altprob_model</a></li>
<li><a href="monae.typed_store_model.html">typed_store_model</a></li>
<li><a href="monae.category_ext.html">category_ext</a></li>
<li><a href="monae.proba_lib.html">proba_lib</a></li>
<li><a href="monae.monad_composition.html">monad_composition</a></li>
<li><a href="monae.example_transformer.html">example_transformer</a></li>
<li><a href="monae.hierarchy.html">hierarchy</a></li>
<li><a href="monae.example_typed_store.html">example_typed_store</a></li>
<li><a href="monae.example_relabeling.html">example_relabeling</a></li>
<li><a href="monae.monad_lib.html">monad_lib</a></li>
<li><a href="monae.example_nqueens.html">example_nqueens</a></li>
<li><a href="monae.smallstep.html">smallstep</a></li>
<li><a href="monae.array_lib.html">array_lib</a></li>
<li><a href="monae.state_lib.html">state_lib</a></li>
<li><a href="monae.monad_transformer.html">monad_transformer</a></li>
<li><a href="monae.example_iquicksort.html">example_iquicksort</a></li>
<li><a href="monae.gcm_model.html">gcm_model</a></li>
<li><a href="monae.trace_lib.html">trace_lib</a></li>
          </ul>
          </details>
          </li>
<li><details><summary>monaeImpredicativeSet</summary>
          <ul>
          <li><a href="monaeImpredicativeSet.imonad_composition.html">imonad_composition</a></li>
<li><a href="monaeImpredicativeSet.ihierarchy.html">ihierarchy</a></li>
<li><a href="monaeImpredicativeSet.imonad_lib.html">imonad_lib</a></li>
<li><a href="monaeImpredicativeSet.imonae_lib.html">imonae_lib</a></li>
<li><a href="monaeImpredicativeSet.ifail_lib.html">ifail_lib</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.all_ssreflect.html">all_ssreflect</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp">boolp</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="monae.monae_lib.html">monae_lib</a></span> <span class="id"><a href="monae.hierarchy.html">hierarchy</a></span> <span class="id"><a href="monae.monad_lib.html">monad_lib</a></span> <span class="id"><a href="monae.fail_lib.html">fail_lib</a></span>.<br/>
<br/>
<pre class="ssrdoc">
                             Spark example                                 
                                                                           
see Shin-Cheng Mu, Equational Reasoning for Non-deterministic Monad: A     
Case study of Spark Aggregation, TR-IIS-19-002                             
                                                                           
</pre>
<br/>
<span class="gallina-kwd">Set</span> <span class="vernacular">Implicit</span> <span class="vernacular">Arguments</span>.<br/>
<span class="vernacular">Unset</span> <span class="vernacular">Strict</span> <span class="vernacular">Implicit</span>.<br/>
<span class="vernacular">Unset</span> <span class="vernacular">Printing</span> <span class="vernacular">Implicit</span> <span class="vernacular">Defensive</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation" class="id"><a name="spark_aggregation" class="">spark_aggregation</a></span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation.definitions" class="id"><a name="spark_aggregation.definitions" class="">definitions</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="spark_aggregation.definitions.M" class="id"><a name="spark_aggregation.definitions.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad</a></span>.<br/>
<br/>
<span class="vernacular">Variables</span> (<span id="spark_aggregation.definitions.A" class="id"><a name="spark_aggregation.definitions.A" class="">A</a></span> <span id="spark_aggregation.definitions.B" class="id"><a name="spark_aggregation.definitions.B" class="">B</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="deterministic" class="id"><a name="deterministic" class="">deterministic</a></span> <span id="A:4" class="id"><a name="A:4" class="">A</a></span> <span id="B:5" class="id"><a name="B:5" class="">B</a></span> (<span id="f:6" class="id"><a name="f:6" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#A:4">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.M">M</a></span> <span class="id"><a href="monae.example_spark.html#B:5">B</a></span>) <span class="id">:=</span> <span class="gallina-kwd">exists</span> <span id="g:7" class="id"><a name="g:7" class="">g</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#A:4">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:5">B,</a></span> <span class="id"><a href="monae.example_spark.html#f:6">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="monae.example_spark.html#g:7">g</a></span>.<br/>
<br/>
<span class="vernacular">Variables</span> (<span id="spark_aggregation.definitions.b" class="id"><a name="spark_aggregation.definitions.b" class="">b</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.B">B</a></span>) (<span id="spark_aggregation.definitions.mul" class="id"><a name="spark_aggregation.definitions.mul" class="">mul</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.B">B</a></span>) (<span id="spark_aggregation.definitions.add" class="id"><a name="spark_aggregation.definitions.add" class="">add</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.B">B</a></span>).<br/>
<br/>
<span class="vernacular">Let</span> <span id="spark_aggregation.definitions.Partition" class="id"><a name="spark_aggregation.definitions.Partition" class="">Partition</a></span> <span id="A:11" class="id"><a name="A:11" class="">A</a></span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.example_spark.html#A:11">A</a></span>.<br/>
<span class="vernacular">Let</span> <span id="spark_aggregation.definitions.RDD" class="id"><a name="spark_aggregation.definitions.RDD" class="">RDD</a></span> <span id="A:12" class="id"><a name="A:12" class="">A</a></span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> (<span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.Partition">Partition</a></span> <span class="id"><a href="monae.example_spark.html#A:12">A</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="aggregate" class="id"><a name="aggregate" class="">aggregate</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.RDD">RDD</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.M">M</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.B">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.b">b</a></span> (<span class="id">o</span>) (<span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions.b">b</a></span>)).<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.definitions">definitions</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.example_spark.html#aggregate">aggregate</a></span> <span class="id">{M</span> <span class="id">A</span> <span class="id">B}</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation.aggregate_deterministic" class="id"><a name="spark_aggregation.aggregate_deterministic" class="">aggregate_deterministic</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic" class="">foldl_perm_deterministic</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.M" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAltCI.Exports.altCIMonad">altCIMonad</a></span>.<br/>
<span class="vernacular">Variables</span> (<span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.A" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.A" class="">A</a></span> <span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.B" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.B" class="">B</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.op" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.op" class="">op</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:14">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#A:15">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:14">B</a></span>) (<span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.b" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.b" class="">b</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:14">B</a></span>).<br/>
<span class="vernacular">Local</span> <span class="vernacular">Notation</span> <span id="70e699b078955cf4233b8c2b59b9a1a2" class="id"><a name="70e699b078955cf4233b8c2b59b9a1a2" class="">&quot;x (.) y&quot;</a></span> <span class="id">:=</span> (<span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.op">op</a></span> <span class="id">x</span> <span class="id">y</span>) (<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">11</span>).<br/>
<span class="vernacular">Hypothesis</span> <span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.opP" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.opP" class="">opP</a></span> <span class="id">:</span> <span class="gallina-kwd">forall</span> (<span id="x:18" class="id"><a name="x:18" class="">x</a></span> <span id="y:19" class="id"><a name="y:19" class="">y</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.A">A</a></span>) (<span id="w:20" class="id"><a name="w:20" class="">w</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.A">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.op">op</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.b">b</a></span> <span class="id"><a href="monae.example_spark.html#w:20">w</a></span> (.) <span class="id"><a href="monae.example_spark.html#x:18">x</a></span>) (.) <span class="id"><a href="monae.example_spark.html#y:19">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.op">op</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.b">b</a></span> <span class="id"><a href="monae.example_spark.html#w:20">w</a></span> (.) <span class="id"><a href="monae.example_spark.html#y:19">y</a></span>) (.) <span class="id"><a href="monae.example_spark.html#x:18">x</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="lemma32" class="id"><a name="lemma32" class="">lemma32</a></span> <span id="a:22" class="id"><a name="a:22" class="">a</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.op">op</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.b">b</a></span> (<span class="id">o</span>) <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.example_spark.html#a:22">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.op">op</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons^~</a></span> <span class="id"><a href="monae.example_spark.html#a:22">a</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
<span class="id">rewrite</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funeqE">boolp.funeqE</a></span><span class="id">;</span> <span class="id">elim/last_ind</span> <span class="id">=&gt;</span> <span class="id">[/=|xs</span> <span class="id">y</span> <span class="id">IH]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insert_rcons">insert_rcons</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#alt_fmapDr">alt_fmapDr</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-fmap_oE</span>.<br/>
<span class="id">have</span> <span class="id">H</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="w:23" class="id"><a name="w:23" class="">w,</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.op">op</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons^~</a></span> <span class="id"><a href="monae.example_spark.html#w:23">w</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.op">op^~</a></span> <span class="id"><a href="monae.example_spark.html#w:23">w</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.op">op</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.b">b</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">w;</span> <span class="id">rewrite</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funeqE">boolp.funeqE</a></span> <span class="id">=&gt;</span> <span class="id">ws</span> <span class="id">/=;</span> <span class="id">rewrite</span> <span class="id">-cats1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl_cat">foldl_cat</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">H</span> <span class="id">y</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.monad_lib.html#fmap_oE">fmap_oE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="gallina-kwd">in</span> <span class="id">IH</span>.<br/>
<span class="id">rewrite</span> <span class="id">IH</span>.<br/>
<span class="id">rewrite</span> <span class="id">-[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.example_spark.html#X:24">X]bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-{1}compA</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">H</span> <span class="id">a</span>).<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.example_spark.html#X:25">X]/=</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic.opP">opP</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-!cats1</span> <span class="id">-catA</span> <span class="id">/=</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl_cat">foldl_cat</a></span> <span class="id">/=</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#altmm">altmm</a></span>.<br/>
Qed.</div>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic">foldl_perm_deterministic</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd" class="">foldl_perm_deterministic_contd</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.M" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAltCI.Exports.altCIMonad">altCIMonad</a></span>.<br/>
<span class="vernacular">Variables</span> (<span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.A" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.A" class="">A</a></span> <span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.B" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.B" class="">B</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.op" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.op" class="">op</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:27">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#A:28">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:27">B</a></span>).<br/>
<span class="vernacular">Local</span> <span class="vernacular">Notation</span> <span id="fc31227a346402464bc499b0b3d54238" class="id"><a name="fc31227a346402464bc499b0b3d54238" class="">&quot;x (.) y&quot;</a></span> <span class="id">:=</span> (<span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.op">op</a></span> <span class="id">x</span> <span class="id">y</span>) (<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">11</span>).<br/>
<span class="vernacular">Hypothesis</span> <span id="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.opP" class="id"><a name="spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.opP" class="">opP</a></span> <span class="id">:</span> <span class="gallina-kwd">forall</span> (<span id="x:30" class="id"><a name="x:30" class="">x</a></span> <span id="y:31" class="id"><a name="y:31" class="">y</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.A">A</a></span>) (<span id="w:32" class="id"><a name="w:32" class="">w</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.B">B</a></span>)<span class="id">,</span> (<span class="id"><a href="monae.example_spark.html#w:32">w</a></span> (.) <span class="id"><a href="monae.example_spark.html#x:30">x</a></span>) (.) <span class="id"><a href="monae.example_spark.html#y:31">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="monae.example_spark.html#w:32">w</a></span> (.) <span class="id"><a href="monae.example_spark.html#y:31">y</a></span>) (.) <span class="id"><a href="monae.example_spark.html#x:30">x</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="lemma31" class="id"><a name="lemma31" class="">lemma31</a></span> <span id="b:34" class="id"><a name="b:34" class="">b</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.op">op</a></span> <span class="id"><a href="monae.example_spark.html#b:34">b</a></span> (<span class="id">o</span>) <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.op">op</a></span> <span class="id"><a href="monae.example_spark.html#b:34">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
<span class="id">rewrite</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funeqE">boolp.funeqE</a></span> <span class="id">=&gt;</span> <span class="id">xs;</span> <span class="id">move:</span> <span class="id">xs</span> <span class="id">b;</span> <span class="id">elim</span> <span class="id">=&gt;</span> <span class="id">[/=|x</span> <span class="id">xs</span> <span class="id">IH]</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.hierarchy.html#fmap_bind">fmap_bind</a></span>.<br/>
<span class="id">have</span> <span class="id">opP'</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> (<span id="x:35" class="id"><a name="x:35" class="">x</a></span> <span id="y:36" class="id"><a name="y:36" class="">y</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.A">A</a></span>) (<span id="w:37" class="id"><a name="w:37" class="">w</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.A">A</a></span>)<span class="id">,</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.op">op</a></span> <span class="id">b</span> <span class="id"><a href="monae.example_spark.html#w:37">w</a></span> (.) <span class="id"><a href="monae.example_spark.html#x:35">x</a></span>) (.) <span class="id"><a href="monae.example_spark.html#y:36">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.op">op</a></span> <span class="id">b</span> <span class="id"><a href="monae.example_spark.html#w:37">w</a></span> (.) <span class="id"><a href="monae.example_spark.html#y:36">y</a></span>) (.) <span class="id"><a href="monae.example_spark.html#x:35">x</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span> <span class="id">?</span> <span class="id">?</span> <span class="id">?</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.opP">opP</a></span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> (<span class="id"><a href="monae.example_spark.html#lemma32">lemma32</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.M">M</a></span> <span class="id">opP'</span>).<br/>
<span class="id">transitivity</span> ((<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.op">op</a></span> (<span class="id">b</span> (.) <span class="id">x</span>)) <span class="id">xs</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.M">M</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
<span class="id">rewrite</span> <span class="id">-IH</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]fcompE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">ys</span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-cats1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl_cat">foldl_cat</a></span> <span class="id">/=</span>.<br/>
<span class="id">congr</span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.M">M</a></span> <span class="id">_</span>).<br/>
<span class="id">elim:</span> <span class="id">ys</span> <span class="id">b</span> <span class="id">opP'</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">y</span> <span class="id">ys</span> <span class="id">ih</span> <span class="id">/=</span> <span class="id">b</span> <span class="id">opP'</span>.<br/>
<span class="id">rewrite</span> <span class="id">ih</span> <span class="id">//=</span>.<br/>
<span class="id">rewrite</span> <span class="id">-/</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd.op">op</a></span> <span class="id">b</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">opP'</span>.<br/>
Qed.</div>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.foldl_perm_deterministic_contd">foldl_perm_deterministic_contd</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation.aggregate_deterministic.theorem43" class="id"><a name="spark_aggregation.aggregate_deterministic.theorem43" class="">theorem43</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="spark_aggregation.aggregate_deterministic.theorem43.M" class="id"><a name="spark_aggregation.aggregate_deterministic.theorem43.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAltCI.Exports.altCIMonad">altCIMonad</a></span>.<br/>
<span class="vernacular">Variables</span> (<span id="spark_aggregation.aggregate_deterministic.theorem43.A" class="id"><a name="spark_aggregation.aggregate_deterministic.theorem43.A" class="">A</a></span> <span id="spark_aggregation.aggregate_deterministic.theorem43.B" class="id"><a name="spark_aggregation.aggregate_deterministic.theorem43.B" class="">B</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="spark_aggregation.aggregate_deterministic.theorem43.b" class="id"><a name="spark_aggregation.aggregate_deterministic.theorem43.b" class="">b</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:39">B</a></span>) (<span id="spark_aggregation.aggregate_deterministic.theorem43.mul" class="id"><a name="spark_aggregation.aggregate_deterministic.theorem43.mul" class="">mul</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:39">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#A:40">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:39">B</a></span>) (<span id="spark_aggregation.aggregate_deterministic.theorem43.add" class="id"><a name="spark_aggregation.aggregate_deterministic.theorem43.add" class="">add</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:39">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:39">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:39">B</a></span>).<br/>
<span class="vernacular">Hypotheses</span> (<span id="spark_aggregation.aggregate_deterministic.theorem43.addA" class="id"><a name="spark_aggregation.aggregate_deterministic.theorem43.addA" class="">addA</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#associative">associative</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.add">add</a></span>) (<span id="spark_aggregation.aggregate_deterministic.theorem43.addC" class="id"><a name="spark_aggregation.aggregate_deterministic.theorem43.addC" class="">addC</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#commutative">commutative</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.add">add</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="aggregateE" class="id"><a name="aggregateE" class="">aggregateE</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_spark.html#aggregate">aggregate</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.b">b</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.add">add</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.b">b</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
<span class="id">rewrite</span> <span class="id">-lemma31;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">x</span> <span class="id">??;</span> <span class="id">rewrite</span> <span class="id">-addA</span> (<span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.addC">addC</a></span> <span class="id">x</span>) <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.addA">addA</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/aggregate</span> <span class="id">2!fcomp_def</span> <span class="id">-compA</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="deter_aggregate" class="id"><a name="deter_aggregate" class="">deter_aggregate</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#deterministic">deterministic</a></span> (<span class="id"><a href="monae.example_spark.html#aggregate">aggregate</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.b">b</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.add">add</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
 <span class="id">rewrite</span> <span class="id">/deterministic</span> <span class="id"><a href="monae.example_spark.html#aggregateE">aggregateE</a></span> <span class="id">//;</span> <span class="id">eexists;</span> <span class="id">reflexivity</span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic.theorem43">theorem43</a></span>.<br/>
<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.aggregate_deterministic">aggregate_deterministic</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation.determinism_implies_homomorphism" class="id"><a name="spark_aggregation.determinism_implies_homomorphism" class="">determinism_implies_homomorphism</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation.determinism_implies_homomorphism.homomorphism" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.homomorphism" class="">homomorphism</a></span>.<br/>
<span class="vernacular">Variables</span> (<span id="spark_aggregation.determinism_implies_homomorphism.homomorphism.A" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.homomorphism.A" class="">A</a></span> <span id="spark_aggregation.determinism_implies_homomorphism.homomorphism.B" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.homomorphism.B" class="">B</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="spark_aggregation.determinism_implies_homomorphism.homomorphism.add" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.homomorphism.add" class="">add</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:46">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:46">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:46">B</a></span>) (<span id="spark_aggregation.determinism_implies_homomorphism.homomorphism.k" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.homomorphism.k" class="">k</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#A:47">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:46">B</a></span>) (<span id="spark_aggregation.determinism_implies_homomorphism.homomorphism.z" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.homomorphism.z" class="">z</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:46">B</a></span>).<br/>
<span class="vernacular">Definition</span> <span id="is_hom" class="id"><a name="is_hom" class="">is_hom</a></span> (<span id="h:51" class="id"><a name="h:51" class="">h</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.homomorphism.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.homomorphism.B">B</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_spark.html#h:51">h</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.homomorphism.z">z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> (<span class="gallina-kwd">forall</span> <span id="x:52" class="id"><a name="x:52" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.homomorphism.A">A,</a></span> <span class="id"><a href="monae.example_spark.html#h:51">h</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id"><a href="monae.example_spark.html#x:52">x]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.homomorphism.k">k</a></span> <span class="id"><a href="monae.example_spark.html#x:52">x</a></span>) <span class="id">/\</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#40d800f6f36c47cb5f4f2f42555867a8">{morph</a></span> <span class="id"><a href="monae.example_spark.html#h:51">h</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#40d800f6f36c47cb5f4f2f42555867a8">:</a></span> <span id="xs:55" class="id"><span id="xs:53" class="id"><a name="xs:55" class="">xs</a></span></span> <span id="ys:56" class="id"><span id="ys:54" class="id"><a name="ys:56" class="">ys</a></span></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#40d800f6f36c47cb5f4f2f42555867a8">/</a></span> <span class="id"><a href="monae.example_spark.html#xs:53">xs</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.example_spark.html#ys:54">ys</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#40d800f6f36c47cb5f4f2f42555867a8">&gt;-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.homomorphism.add">add</a></span> <span class="id"><a href="monae.example_spark.html#xs:55">xs</a></span> <span class="id"><a href="monae.example_spark.html#ys:56">ys}</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.homomorphism">homomorphism</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation.determinism_implies_homomorphism.lemma45" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.lemma45" class="">lemma45</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="spark_aggregation.determinism_implies_homomorphism.lemma45.M" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.lemma45.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad</a></span>.<br/>
<span class="vernacular">Variables</span> (<span id="spark_aggregation.determinism_implies_homomorphism.lemma45.A" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.lemma45.A" class="">A</a></span> <span id="spark_aggregation.determinism_implies_homomorphism.lemma45.B" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.lemma45.B" class="">B</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="spark_aggregation.determinism_implies_homomorphism.lemma45.b" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.lemma45.b" class="">b</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:58">B</a></span>) (<span id="spark_aggregation.determinism_implies_homomorphism.lemma45.mul" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.lemma45.mul" class="">mul</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:58">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#A:59">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:58">B</a></span>) (<span id="spark_aggregation.determinism_implies_homomorphism.lemma45.add" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.lemma45.add" class="">add</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:58">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:58">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:58">B</a></span>).<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="spark_aggregation.determinism_implies_homomorphism.lemma45.idempotent_converse" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.lemma45.idempotent_converse" class="">idempotent_converse</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="C:63" class="id"><a name="C:63" class="">C</a></span> <span id="m1:64" class="id"><a name="m1:64" class="">m1</a></span> <span id="m2:65" class="id"><a name="m2:65" class="">m2</a></span> <span id="x:66" class="id"><a name="x:66" class="">x,</a></span> <span class="id"><a href="monae.example_spark.html#m1:64">m1</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.example_spark.html#m2:65">m2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x:66">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.M">M</a></span> <span class="id"><a href="monae.example_spark.html#C:63">C</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#m1:64">m1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span> <span class="id">_</span> <span class="id"><a href="monae.example_spark.html#x:66">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="monae.example_spark.html#m2:65">m2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span> <span class="id">_</span> <span class="id"><a href="monae.example_spark.html#x:66">x</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="spark_aggregation.determinism_implies_homomorphism.lemma45.injective_return" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.lemma45.injective_return" class="">injective_return</a></span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="C:68" class="id"><a name="C:68" class="">C</a></span> <span id="x1:69" class="id"><a name="x1:69" class="">x1</a></span> <span id="x2:70" class="id"><a name="x2:70" class="">x2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x1:69">x1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x2:70">x2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.M">M</a></span> <span class="id"><a href="monae.example_spark.html#C:68">C</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#x1:69">x1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_spark.html#x2:70">x2</a></span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="spark_aggregation.determinism_implies_homomorphism.lemma45.H" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.lemma45.H" class="">H</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#aggregate">aggregate</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.add">add</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.M">M</a></span> <span class="id">_</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="lemma45a" class="id"><a name="lemma45a" class="">lemma45a</a></span> (<span id="xss:73" class="id"><a name="xss:73" class="">xss</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.A">A</a></span>)) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="monae.example_spark.html#xss:73">xss</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span>) <span class="id"><a href="monae.example_spark.html#xss:73">xss</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
<span class="id">case:</span> (@<span class="id"><a href="monae.fail_lib.html#iperm_is_alt_ret">iperm_is_alt_ret</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.M">M</a></span> <span class="id">_</span> <span class="id">xss</span>) <span class="id">=&gt;</span> <span class="id">m</span> <span class="id">Hm</span>.<br/>
<span class="id">have</span> <span class="id">step1</span> <span class="id">:</span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span>) <span class="id">xss</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span>)) <span class="id">xss</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span>)) (<span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-H</span> <span class="id">/aggregate</span> <span class="id"><a href="monae.fail_lib.html#iperm_o_map">iperm_o_map</a></span> <span class="id">-fcomp_comp</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id">Hm</span> <span class="id"><a href="monae.fail_lib.html#alt_fmapDr">alt_fmapDr</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym,</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.idempotent_converse">idempotent_converse</a></span> <span class="gallina-kwd">in</span> <span class="id">step1</span>.<br/>
<span class="id">case:</span> <span class="id">step1</span> <span class="id">=&gt;</span> <span class="id">step11</span> <span class="id">step12</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.injective_return">injective_return</a></span> <span class="gallina-kwd">in</span> <span class="id">step11</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-step11</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="lemma45b" class="id"><a name="lemma45b" class="">lemma45b</a></span> (<span id="m:74" class="id"><a name="m:74" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.M">M</a></span> <span class="id">_</span>) (<span id="xss:75" class="id"><a name="xss:75" class="">xss</a></span> <span id="yss:76" class="id"><a name="yss:76" class="">yss</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.A">A</a></span>)) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="monae.example_spark.html#xss:75">xss</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#yss:76">yss</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.example_spark.html#m:74">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span>) <span class="id"><a href="monae.example_spark.html#xss:75">xss</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span>) <span class="id"><a href="monae.example_spark.html#yss:76">yss</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="id">move=&gt;</span> <span class="id">K</span>.<br/>
<span class="id">have</span> <span class="id">step1</span> <span class="id">:</span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span>) <span class="id">xss</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span>)) <span class="id">yss</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span>)) <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-H</span> <span class="id">/aggregate</span> <span class="id"><a href="monae.fail_lib.html#iperm_o_map">iperm_o_map</a></span> <span class="id">-fcomp_comp</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id">K</span> <span class="id"><a href="monae.fail_lib.html#alt_fmapDr">alt_fmapDr</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">have</span> <span class="id">step2</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span>) <span class="id">xss</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.b">b</a></span>)) <span class="id">yss</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym,</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.idempotent_converse">idempotent_converse</a></span> <span class="gallina-kwd">in</span> <span class="id">step1</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id">step1</span> <span class="id">=&gt;</span> <span class="id">step11</span> <span class="id">step12</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45.injective_return">injective_return</a></span> <span class="gallina-kwd">in</span> <span class="id">step11</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id">-step11</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-lemma45a</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.lemma45">lemma45</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem46" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46" class="">theorem46</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem46.M" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad</a></span>.<br/>
<span class="vernacular">Variables</span> (<span id="spark_aggregation.determinism_implies_homomorphism.theorem46.A" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46.A" class="">A</a></span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem46.B" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46.B" class="">B</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="spark_aggregation.determinism_implies_homomorphism.theorem46.b" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46.b" class="">b</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:78">B</a></span>) (<span id="spark_aggregation.determinism_implies_homomorphism.theorem46.mul" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46.mul" class="">mul</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:78">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#A:79">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:78">B</a></span>) (<span id="spark_aggregation.determinism_implies_homomorphism.theorem46.add" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46.add" class="">add</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:78">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:78">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:78">B</a></span>).<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem46.idempotent_converse" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46.idempotent_converse" class="">idempotent_converse</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="C:83" class="id"><a name="C:83" class="">C</a></span> <span id="m1:84" class="id"><a name="m1:84" class="">m1</a></span> <span id="m2:85" class="id"><a name="m2:85" class="">m2</a></span> <span id="x:86" class="id"><a name="x:86" class="">x,</a></span> <span class="id"><a href="monae.example_spark.html#m1:84">m1</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.example_spark.html#m2:85">m2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x:86">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.M">M</a></span> <span class="id"><a href="monae.example_spark.html#C:83">C</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#m1:84">m1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span> <span class="id">_</span> <span class="id"><a href="monae.example_spark.html#x:86">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="monae.example_spark.html#m2:85">m2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span> <span class="id">_</span> <span class="id"><a href="monae.example_spark.html#x:86">x</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem46.injective_return" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46.injective_return" class="">injective_return</a></span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="C:88" class="id"><a name="C:88" class="">C</a></span> <span id="x1:89" class="id"><a name="x1:89" class="">x1</a></span> <span id="x2:90" class="id"><a name="x2:90" class="">x2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x1:89">x1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x2:90">x2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.M">M</a></span> <span class="id"><a href="monae.example_spark.html#C:88">C</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#x1:89">x1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_spark.html#x2:90">x2</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="theorem46lid" class="id"><a name="theorem46lid" class="">theorem46lid</a></span> <span id="z:92" class="id"><a name="z:92" class="">z</a></span> <span id="zs:93" class="id"><a name="zs:93" class="">zs</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#z:92">z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span> <span class="id"><a href="monae.example_spark.html#zs:93">zs</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_spark.html#aggregate">aggregate</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.add">add</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_spark.html#z:92">z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span> <span class="id"><a href="monae.example_spark.html#z:92">z</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
<span class="id">move=&gt;</span> <span class="id">zzs</span> <span class="id">H</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">zs]</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cats0">cats0</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">zs]</span>)).<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">Hm</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">zs]</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">zs]</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#fail">fail</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.M">M</a></span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id"><a href="monae.hierarchy.html#altmfail">altmfail</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="monae.example_spark.html#lemma45a">lemma45a</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.injective_return">injective_return</a></span> <span class="id">H</span>).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-zzs</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="theorem46rid" class="id"><a name="theorem46rid" class="">theorem46rid</a></span> <span id="z:94" class="id"><a name="z:94" class="">z</a></span> <span id="zs:95" class="id"><a name="zs:95" class="">zs</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#z:94">z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span> <span class="id"><a href="monae.example_spark.html#zs:95">zs</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_spark.html#aggregate">aggregate</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.add">add</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_spark.html#z:94">z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.add">add</a></span> <span class="id"><a href="monae.example_spark.html#z:94">z</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
<span class="id">move=&gt;</span> <span class="id">zzs</span> <span class="id">H</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">zs;</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]]</a></span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cats0">cats0</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.b">b</a></span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">zs;</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]]</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">[m</span> <span class="id">Hm]</span> <span class="id">:</span> <span class="gallina-kwd">exists</span> <span id="m:96" class="id"><a name="m:96" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.M">M</a></span> <span class="id">_,</span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">zs;</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">zs;</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]]</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.example_spark.html#m:96">m</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#iperm_is_alt_ret">iperm_is_alt_ret</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="monae.example_spark.html#lemma45a">lemma45a</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46.injective_return">injective_return</a></span> <span class="id">H</span>).<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-zzs</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-</span>(@<span class="id"><a href="monae.example_spark.html#theorem46lid">theorem46lid</a></span> <span class="id">_</span> <span class="id">zs</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46">theorem46</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem46_contd" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46_contd" class="">theorem46_contd</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.M" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadCINondet.Exports.nondetCIMonad">nondetCIMonad</a></span>.<br/>
<span class="vernacular">Variables</span> (<span id="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.A" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.A" class="">A</a></span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.B" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.B" class="">B</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b" class="">b</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:98">B</a></span>) (<span id="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul" class="">mul</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:98">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#A:99">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:98">B</a></span>) (<span id="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add" class="">add</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:98">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:98">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:98">B</a></span>).<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.idempotent_converse" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.idempotent_converse" class="">idempotent_converse</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="C:103" class="id"><a name="C:103" class="">C</a></span> <span id="m1:104" class="id"><a name="m1:104" class="">m1</a></span> <span id="m2:105" class="id"><a name="m2:105" class="">m2</a></span> <span id="x:106" class="id"><a name="x:106" class="">x,</a></span> <span class="id"><a href="monae.example_spark.html#m1:104">m1</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.example_spark.html#m2:105">m2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x:106">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.M">M</a></span> <span class="id"><a href="monae.example_spark.html#C:103">C</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#m1:104">m1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span> <span class="id">_</span> <span class="id"><a href="monae.example_spark.html#x:106">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="monae.example_spark.html#m2:105">m2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span> <span class="id">_</span> <span class="id"><a href="monae.example_spark.html#x:106">x</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.injective_return" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem46_contd.injective_return" class="">injective_return</a></span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="C:108" class="id"><a name="C:108" class="">C</a></span> <span id="x1:109" class="id"><a name="x1:109" class="">x1</a></span> <span id="x2:110" class="id"><a name="x2:110" class="">x2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x1:109">x1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x2:110">x2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.M">M</a></span> <span class="id"><a href="monae.example_spark.html#C:108">C</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#x1:109">x1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_spark.html#x2:110">x2</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="theorem46C" class="id"><a name="theorem46C" class="">theorem46C</a></span> <span id="x:112" class="id"><a name="x:112" class="">x</a></span> <span id="xs:113" class="id"><a name="xs:113" class="">xs</a></span> <span id="y:114" class="id"><a name="y:114" class="">y</a></span> <span id="ys:115" class="id"><a name="ys:115" class="">ys</a></span> <span class="id">:</span><br/>
&nbsp;<span class="id"><a href="monae.example_spark.html#x:112">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span> <span class="id"><a href="monae.example_spark.html#xs:113">xs</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#y:114">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span> <span class="id"><a href="monae.example_spark.html#ys:115">ys</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;<span class="id"><a href="monae.example_spark.html#aggregate">aggregate</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;<span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> <span class="id"><a href="monae.example_spark.html#x:112">x</a></span> <span class="id"><a href="monae.example_spark.html#y:114">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> <span class="id"><a href="monae.example_spark.html#y:114">y</a></span> <span class="id"><a href="monae.example_spark.html#x:112">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
<span class="id">move=&gt;</span> <span class="id">xxs</span> <span class="id">yys</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> <span class="id">x</span> (<span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> <span class="id">y</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-</span>(<span class="id"><a href="monae.example_spark.html#theorem46rid">theorem46rid</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.injective_return">injective_return</a></span> <span class="id">yys</span>).<br/>
<span class="id">transitivity</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">xs;</span> <span class="id">ys]</span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-xxs</span> <span class="id">-yys</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-</span>(<span class="id"><a href="monae.example_spark.html#theorem46rid">theorem46rid</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.injective_return">injective_return</a></span> <span class="id">yys</span>) <span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-</span>(<span class="id"><a href="monae.example_spark.html#theorem46lid">theorem46lid</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.injective_return">injective_return</a></span> <span class="id">xxs</span>).<br/>
<span class="id">transitivity</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">ys;</span> <span class="id">xs]</span>)).<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">[m</span> <span class="id">Hm]</span> <span class="id">:</span> <span class="gallina-kwd">exists</span> <span id="m:116" class="id"><a name="m:116" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.M">M</a></span> <span class="id">_,</span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">xs;</span> <span class="id">ys]</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">ys;</span> <span class="id">xs]</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.example_spark.html#m:116">m</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">[m</span> <span class="id">Hm]</span> <span class="id">:=</span> @<span class="id"><a href="monae.fail_lib.html#iperm_is_alt_ret">iperm_is_alt_ret</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.M">M</a></span> <span class="id">_</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">ys;</span> <span class="id">xs]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> <span class="id">m;</span> <span class="id">rewrite</span> <span class="id">-Hm</span> <span class="id">/=</span> <span class="id">!bindretf</span> <span class="id">!insertE</span> <span class="id">!fmapE</span> <span class="id">!bindretf</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#altC">altC</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="monae.example_spark.html#lemma45b">lemma45b</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.injective_return">injective_return</a></span> <span class="id">H</span> <span class="id">Hm</span>).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-xxs</span> <span class="id">-yys</span> <span class="id">-</span>(<span class="id"><a href="monae.example_spark.html#theorem46lid">theorem46lid</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.injective_return">injective_return</a></span> <span class="id">yys</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="theorem46A" class="id"><a name="theorem46A" class="">theorem46A</a></span> <span id="x:117" class="id"><a name="x:117" class="">x</a></span> <span id="xs:118" class="id"><a name="xs:118" class="">xs</a></span> <span id="y:119" class="id"><a name="y:119" class="">y</a></span> <span id="ys:120" class="id"><a name="ys:120" class="">ys</a></span> <span id="z:121" class="id"><a name="z:121" class="">z</a></span> <span id="zs:122" class="id"><a name="zs:122" class="">zs</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_spark.html#x:117">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span> <span class="id"><a href="monae.example_spark.html#xs:118">xs</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#y:119">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span> <span class="id"><a href="monae.example_spark.html#ys:120">ys</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#z:121">z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span> <span class="id"><a href="monae.example_spark.html#zs:122">zs</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_spark.html#aggregate">aggregate</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> <span class="id"><a href="monae.example_spark.html#x:117">x</a></span> (<span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> <span class="id"><a href="monae.example_spark.html#y:119">y</a></span> <span class="id"><a href="monae.example_spark.html#z:121">z</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> (<span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span> <span class="id"><a href="monae.example_spark.html#x:117">x</a></span> <span class="id"><a href="monae.example_spark.html#y:119">y</a></span>) <span class="id"><a href="monae.example_spark.html#z:121">z</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
<span class="id">move=&gt;</span> <span class="id">xxs</span> <span class="id">yys</span> <span class="id">zzs</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id">{1}</span>(<span class="id"><a href="monae.example_spark.html#theorem46rid">theorem46rid</a></span> (<span class="id">add</span> <span class="id">:=</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.add">add</a></span>) <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd.injective_return">injective_return</a></span> <span class="id">zzs</span>) <span class="id">//</span>.<br/>
Abort.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem46_contd">theorem46_contd</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem47" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem47" class="">theorem47</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem47.M" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem47.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadCINondet.Exports.nondetCIMonad">nondetCIMonad</a></span>.<br/>
<span class="vernacular">Variables</span> (<span id="spark_aggregation.determinism_implies_homomorphism.theorem47.A" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem47.A" class="">A</a></span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem47.B" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem47.B" class="">B</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="spark_aggregation.determinism_implies_homomorphism.theorem47.b" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem47.b" class="">b</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:124">B</a></span>) (<span id="spark_aggregation.determinism_implies_homomorphism.theorem47.mul" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem47.mul" class="">mul</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:124">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#A:125">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:124">B</a></span>) (<span id="spark_aggregation.determinism_implies_homomorphism.theorem47.add" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem47.add" class="">add</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_spark.html#B:124">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:124">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#B:124">B</a></span>).<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem47.idempotent_converse" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem47.idempotent_converse" class="">idempotent_converse</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="C:129" class="id"><a name="C:129" class="">C</a></span> <span id="m1:130" class="id"><a name="m1:130" class="">m1</a></span> <span id="m2:131" class="id"><a name="m2:131" class="">m2</a></span> <span id="x:132" class="id"><a name="x:132" class="">x,</a></span> <span class="id"><a href="monae.example_spark.html#m1:130">m1</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.example_spark.html#m2:131">m2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x:132">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.M">M</a></span> <span class="id"><a href="monae.example_spark.html#C:129">C</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#m1:130">m1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span> <span class="id">_</span> <span class="id"><a href="monae.example_spark.html#x:132">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="monae.example_spark.html#m2:131">m2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span> <span class="id">_</span> <span class="id"><a href="monae.example_spark.html#x:132">x</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="spark_aggregation.determinism_implies_homomorphism.theorem47.injective_return" class="id"><a name="spark_aggregation.determinism_implies_homomorphism.theorem47.injective_return" class="">injective_return</a></span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="C:134" class="id"><a name="C:134" class="">C</a></span> <span id="x1:135" class="id"><a name="x1:135" class="">x1</a></span> <span id="x2:136" class="id"><a name="x2:136" class="">x2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x1:135">x1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_spark.html#x2:136">x2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.M">M</a></span> <span class="id"><a href="monae.example_spark.html#C:134">C</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#x1:135">x1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_spark.html#x2:136">x2</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="theorem47" class="id"><a name="theorem47" class="">theorem47</a></span> <span class="id">:</span><br/>
&nbsp;<span class="id"><a href="monae.example_spark.html#aggregate">aggregate</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.b">b</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.add">add</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;<span class="id"><a href="monae.example_spark.html#is_hom">is_hom</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.add">add</a></span> (<span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.b">b</a></span>) <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.b">b</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="id">move=&gt;</span> <span class="id">H</span>.<br/>
<span class="id">split;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
<span class="id">split;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
<span class="id">move=&gt;</span> <span class="id">xs</span> <span class="id">ys</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">xs</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id">ys</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">xs;</span> <span class="id">ys]</span>)<span class="id">;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cats0">cats0</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.add">add</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.b">b</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.b">b</a></span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">xs;</span> <span class="id">ys]</span>)).<br/>
&nbsp;&nbsp;<span class="id">case:</span> (@<span class="id"><a href="monae.fail_lib.html#iperm_is_alt_ret">iperm_is_alt_ret</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.M">M</a></span> <span class="id">_</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">xs;</span> <span class="id">ys]</span>) <span class="id">=&gt;</span> <span class="id">m</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="monae.example_spark.html#lemma45a">lemma45a</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.injective_return">injective_return</a></span> <span class="id">H</span>).<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.add">add</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.b">b</a></span> <span class="id">xs</span>) (<span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.add">add</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldl">foldl</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.mul">mul</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.b">b</a></span> <span class="id">ys</span>) <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.b">b</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">/=</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-</span>(<span class="id"><a href="monae.example_spark.html#theorem46lid">theorem46lid</a></span> (<span class="id">zs</span> <span class="id">:=</span> <span class="id">xs</span>) (<span class="id">mul</span> <span class="id">:=</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.mul">mul</a></span>) <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.injective_return">injective_return</a></span> <span class="id">_</span> <span class="id">H</span>) <span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-</span>(<span class="id"><a href="monae.example_spark.html#theorem46rid">theorem46rid</a></span> (<span class="id">zs</span> <span class="id">:=</span> <span class="id">ys</span>) (<span class="id">mul</span> <span class="id">:=</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.mul">mul</a></span>) <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.injective_return">injective_return</a></span> <span class="id">_</span> <span class="id">H</span>).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-</span>(<span class="id"><a href="monae.example_spark.html#theorem46rid">theorem46rid</a></span> (<span class="id">zs</span> <span class="id">:=</span> <span class="id">ys</span>) (<span class="id">mul</span> <span class="id">:=</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.mul">mul</a></span>) <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.idempotent_converse">idempotent_converse</a></span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47.injective_return">injective_return</a></span> <span class="id">_</span> <span class="id">H</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism.theorem47">theorem47</a></span>.<br/>
<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation.determinism_implies_homomorphism">determinism_implies_homomorphism</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_spark.html#spark_aggregation">spark_aggregation</a></span>.<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
