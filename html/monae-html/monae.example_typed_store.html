
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module monae.example_typed_store</title>
<meta name="description" content="Documentation of Coq module monae.example_typed_store" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <header>
    <p><a href="./index.html">coq2html</a></p>
    <h1 class="title">Module monae.example_typed_store</h1>
    <p><a href="">source</a></p>
  </header>

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details><summary>monae</summary>
          <ul>
          <li><a href="monae.proba_monad_model.html">proba_monad_model</a></li>
<li><a href="monae.example_monty.html">example_monty</a></li>
<li><a href="monae.typed_store_lib.html">typed_store_lib</a></li>
<li><a href="monae.monae_lib.html">monae_lib</a></li>
<li><a href="monae.example_spark.html">example_spark</a></li>
<li><a href="monae.example_quicksort.html">example_quicksort</a></li>
<li><a href="monae.monad_model.html">monad_model</a></li>
<li><a href="monae.fail_lib.html">fail_lib</a></li>
<li><a href="monae.category.html">category</a></li>
<li><a href="monae.altprob_model.html">altprob_model</a></li>
<li><a href="monae.typed_store_model.html">typed_store_model</a></li>
<li><a href="monae.category_ext.html">category_ext</a></li>
<li><a href="monae.proba_lib.html">proba_lib</a></li>
<li><a href="monae.monad_composition.html">monad_composition</a></li>
<li><a href="monae.example_transformer.html">example_transformer</a></li>
<li><a href="monae.hierarchy.html">hierarchy</a></li>
<li><a href="monae.example_typed_store.html">example_typed_store</a></li>
<li><a href="monae.example_relabeling.html">example_relabeling</a></li>
<li><a href="monae.monad_lib.html">monad_lib</a></li>
<li><a href="monae.example_nqueens.html">example_nqueens</a></li>
<li><a href="monae.smallstep.html">smallstep</a></li>
<li><a href="monae.array_lib.html">array_lib</a></li>
<li><a href="monae.state_lib.html">state_lib</a></li>
<li><a href="monae.monad_transformer.html">monad_transformer</a></li>
<li><a href="monae.example_iquicksort.html">example_iquicksort</a></li>
<li><a href="monae.gcm_model.html">gcm_model</a></li>
<li><a href="monae.trace_lib.html">trace_lib</a></li>
          </ul>
          </details>
          </li>
<li><details><summary>monaeImpredicativeSet</summary>
          <ul>
          <li><a href="monaeImpredicativeSet.imonad_composition.html">imonad_composition</a></li>
<li><a href="monaeImpredicativeSet.ihierarchy.html">ihierarchy</a></li>
<li><a href="monaeImpredicativeSet.imonad_lib.html">imonad_lib</a></li>
<li><a href="monaeImpredicativeSet.imonae_lib.html">imonae_lib</a></li>
<li><a href="monaeImpredicativeSet.ifail_lib.html">ifail_lib</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.ZArith.html">ZArith</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.all_ssreflect.html">all_ssreflect</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp">boolp</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">infotheo</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="NOTFOUND the module url for infotheo.lib.ssrZ">ssrZ</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="monae.monad_model.html">monad_model</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">HB</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="NOTFOUND the module url for HB.structures">structures</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="monae.monae_lib.html">monae_lib</a></span> <span class="id"><a href="monae.hierarchy.html">hierarchy</a></span> <span class="id"><a href="monae.monad_lib.html">monad_lib</a></span> <span class="id"><a href="monae.typed_store_lib.html">typed_store_lib</a></span>.<br/>
<br/>
<pre class="ssrdoc">
                        Typed store examples                               
                                                                           
 Inductive ml_type == generated by coqgen                                  
                                                                           
 Module MLTypesNat                                                         
   coq_type_nat          == adapted from code generated by coqgen          
   coq_type_nat0         == coq_type_nat with identity monad               
   Definition cycle                                                        
   Fixpoint fact_ref                                                       
   Definition fact_for                                                     
   Fixpoint fibo_ref                                                       
                                                                           
 Module MLtypes63                                                          
   Fixpoint coq_type63   == generated type translation function            
   Definition fact_for63                                                   
</pre>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">monae_scope</span>.<br/>
<br/>
<pre class="ssrdoc">
                            generated by coqgen                            
</pre>
<span class="vernacular">Module</span> <span id="MLTypes" class="id"><a name="MLTypes" class="">MLTypes</a></span>.<br/>
<span class="vernacular">Inductive</span> <span id="MLTypes.ml_type_sind" class="id"><span id="MLTypes.ml_type_rec" class="id"><span id="MLTypes.ml_type_ind" class="id"><span id="MLTypes.ml_type_rect" class="id"><span id="MLTypes.ml_type" class="id"><a name="MLTypes.ml_type_sind" class="">ml_type</a></span></span></span></span></span> <span class="id">:</span> <span class="gallina-kwd">Set</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="MLTypes.ml_int" class="id"><a name="MLTypes.ml_int" class="">ml_int</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="MLTypes.ml_bool" class="id"><a name="MLTypes.ml_bool" class="">ml_bool</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="MLTypes.ml_unit" class="id"><a name="MLTypes.ml_unit" class="">ml_unit</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="MLTypes.ml_ref" class="id"><a name="MLTypes.ml_ref" class="">ml_ref</a></span> (<span class="id">_</span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#ml_type:1">ml_type</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="MLTypes.ml_arrow" class="id"><a name="MLTypes.ml_arrow" class="">ml_arrow</a></span> (<span class="id">_</span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#ml_type:1">ml_type</a></span>) (<span class="id">_</span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#ml_type:1">ml_type</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="MLTypes.ml_rlist" class="id"><a name="MLTypes.ml_rlist" class="">ml_rlist</a></span> (<span class="id">_</span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#ml_type:1">ml_type</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="MLTypes.ml_type_eq_dec" class="id"><a name="MLTypes.ml_type_eq_dec" class="">ml_type_eq_dec</a></span> (<span id="T1:3" class="id"><a name="T1:3" class="">T1</a></span> <span id="T2:4" class="id"><a name="T2:4" class="">T2</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type">ml_type</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{T1=T2}+{T1&lt;&gt;T2}</a></span>.<br/>
<span class="id">revert</span> <span class="id">T2;</span> <span class="id">induction</span> <span class="id">T1;</span> <span class="id">destruct</span> <span class="id">T2;</span><br/>
&nbsp;&nbsp;<span class="id">try</span> (<span class="id">right;</span> <span class="id">intro;</span> <span class="id">discriminate</span>)<span class="id">;</span> <span class="id">try</span> (<span class="id">now</span> <span class="id">left</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">try</span> (<span class="id">case</span> (<span class="id">IHT1_5</span> <span class="id">T2_5</span>)<span class="id">;</span> <span class="id">[|right;</span> <span class="id">injection;</span> <span class="id">intros;</span> <span class="id">contradiction]</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">try</span> (<span class="id">case</span> (<span class="id">IHT1_4</span> <span class="id">T2_4</span>)<span class="id">;</span> <span class="id">[|right;</span> <span class="id">injection;</span> <span class="id">intros;</span> <span class="id">contradiction]</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">try</span> (<span class="id">case</span> (<span class="id">IHT1_3</span> <span class="id">T2_3</span>)<span class="id">;</span> <span class="id">[|right;</span> <span class="id">injection;</span> <span class="id">intros;</span> <span class="id">contradiction]</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">try</span> (<span class="id">case</span> (<span class="id">IHT1_2</span> <span class="id">T2_2</span>)<span class="id">;</span> <span class="id">[|right;</span> <span class="id">injection;</span> <span class="id">intros;</span> <span class="id">contradiction]</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;(<span class="id">case</span> (<span class="id">IHT1</span> <span class="id">T2</span>) <span class="id">||</span> <span class="id">case</span> (<span class="id">IHT1_1</span> <span class="id">T2_1</span>))<span class="id">;</span> <span class="id">try</span> (<span class="id">left;</span> <span class="id">now</span> <span class="id">subst</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right;</span> <span class="id">injection;</span> <span class="id">intros;</span> <span class="id">contradiction</span>.<br/>
Defined.</div>
<br/>
<span class="vernacular">Definition</span> <span id="MLTypes.val_nonempty" class="id"><a name="MLTypes.val_nonempty" class="">val_nonempty</a></span> (<span id="M:5" class="id"><a name="M:5" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#tt">tt</a></span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span id="MLTypes.loc" class="id"><a name="MLTypes.loc" class="">loc</a></span> <span class="id">:=</span> (@<span class="id"><a href="monae.hierarchy.html#loc">loc</a></span> <span class="id">_</span> <span class="id"><a href="monae.monad_model.html#locT_nat">monad_model.locT_nat</a></span>).<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="MLTypes.rlist_sind" class="id"><span id="MLTypes.rlist_rec" class="id"><span id="MLTypes.rlist_ind" class="id"><span id="MLTypes.rlist_rect" class="id"><span id="MLTypes.rlist" class="id"><a name="MLTypes.rlist_sind" class="">rlist</a></span></span></span></span></span> (<span id="a:6" class="id"><a name="a:6" class="">a</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="a_1:7" class="id"><a name="a_1:7" class="">a_1</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type">ml_type</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="MLTypes.Nil" class="id"><a name="MLTypes.Nil" class="">Nil</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="MLTypes.Cons" class="id"><a name="MLTypes.Cons" class="">Cons</a></span> (<span class="id">_</span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#a:6">a</a></span>) (<span class="id">_</span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.loc">loc</a></span> (<span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_rlist">ml_rlist</a></span> <span class="id"><a href="monae.example_typed_store.html#a_1:7">a_1</a></span>)).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="MLTypes.ml_type_eq_mixin" class="id"><a name="MLTypes.ml_type_eq_mixin" class="">ml_type_eq_mixin</a></span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.EqMixin">EqMixin</a></span> (<span class="id"><a href="monae.monae_lib.html#comparePc">comparePc</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type_eq_dec">MLTypes.ml_type_eq_dec</a></span>).<br/>
<span class="vernacular">Canonical</span> <span id="MLTypes.ml_type_eqType" class="id"><a name="MLTypes.ml_type_eqType" class="">ml_type_eqType</a></span> <span class="id">:=</span> <span class="vernacular">Eval</span> <span class="id">hnf</span> <span class="gallina-kwd">in</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.EqType">EqType</a></span> <span class="id">_</span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type_eq_mixin">ml_type_eq_mixin</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_typed_store.html#MLTypes">MLTypes</a></span>.<br/>
<pre class="ssrdoc">
Module CoqTypeNat.
Import MLTypes.
Section with_monad.
Context [M : Type -&gt; Type].
Fixpoint coq_type_nat (T : ml_type) : Type :=
  match T with
  | ml_int =&gt; nat
  | ml_bool =&gt; bool
  | ml_unit =&gt; unit
  | ml_arrow T1 T2 =&gt; coq_type_nat T1 -&gt; M (coq_type_nat T2)
  | ml_ref T1 =&gt; loc T1
  | ml_rlist T1 =&gt; rlist (coq_type_nat T1) T1
  end.
End with_monad.
HB.instance Definition _ := @isML_universe.Build ml_type
  (Equality.class ml_type_eqType) coq_type_nat ml_unit val_nonempty.
Definition typedStoreMonad (N : monad) :=
  typedStoreMonad ml_type N monad_model.locT_nat.
Section cyclic.
Variables (N : monad) (M : typedStoreMonad N).
Local Notation coq_type := (hierarchy.coq_type N).
Local Open Scope do_notation.
Definition cycle (T : ml_type) (a b : coq_type T)
  : M (coq_type (ml_rlist T)) :=
  do r &lt;- cnew (ml_rlist T) (Nil (coq_type T) T);
  do l &lt;-
  (do v &lt;- cnew (ml_rlist T) (Cons (coq_type T) T b r);
   Ret (Cons (coq_type T) T a v));
  do _ &lt;- cput r l; Ret l.
Definition hd (T : ml_type) (def : coq_type T)
  (param : coq_type (ml_rlist T)) : coq_type T :=
  match param with | Nil =&gt; def | Cons a _ =&gt; a end.
Lemma hd_is_true :
  crun (do l &lt;- cycle ml_bool true false; Ret (hd ml_bool false l)) = Some true.
Proof.
rewrite bindA.
under eq_bind =&gt; tl.
  rewrite !bindA.
  under eq_bind do rewrite !bindA bindretf !bindA bindretf /=.
  over.
rewrite -bindA_uncurry -bindA crunret // crunchkput // bindA.
under eq_bind do rewrite !bindA.
under eq_bind do under eq_bind do rewrite bindretf /=.
by rewrite crunnewchkC // crunnewchk0.
Qed.
Definition tl (T : ml_type) (param : coq_type (ml_rlist T))
  : M (coq_type (ml_rlist T)) :=
  match param with
  | Nil =&gt; Ret (Nil (coq_type T) T)
  | Cons _ t =&gt; cget t
  end.
Lemma hd_tl_tl_is_true :
  crun (do l &lt;- cycle ml_bool true false; do l1 &lt;- tl _ l; do l2 &lt;- tl _ l1;
        Ret (hd ml_bool false l2)) = Some true.
Proof.
rewrite bindA -cnewchk.
under eq_bind =&gt; r1.
  under eq_bind do rewrite !bindA.
  under cchknewE do rewrite !(bindA,bindretf) -bindA cputgetC //.
  rewrite cnewget /=.
  under cchknewE do rewrite cputget /=.
  over.
rewrite cnewchk -bindA_uncurry -bindA crunret // crunchkput // bindA.
under eq_bind do rewrite !bindA.
under eq_bind do under eq_bind do rewrite bindretf /=.
by rewrite crunnewchkC // crunnewchk0.
Qed.
End cyclic.
Module eval_cyclic.
Section eval.
Import monad_model.ModelTypedStore.
                
Definition M :=
  [the typedStoreMonad idfun of @acto ml_type idfun].
Definition Env := Env ml_type idfun.
Definition empty_env : Env := [::].
copied from typed_store_model.v 
Definition W (A : UU0) : UU0 := monad_model.option_monad (A * Env).
Definition Restart [A B] (r : W A) (f : M B) : W B :=
  if r is inr (_, env) then f env else inl tt.
Definition FromW [A] (r : W A) : M A :=
  fun env =&gt; if r is inr (a, _) then inr (a, env) else inl tt.
Definition it0 : W unit := inr (tt, empty_env).
Local Open Scope do_notation.
Local Notation mkloc := (mkloc (locT:=monad_model.locT_nat)).
Local Notation coq_type := (coq_type _).
Definition incr (l : loc ml_int) : M nat :=
  do x &lt;- cget l; do _ &lt;- cput l (succn x); Ret (succn x).
Definition l : W (loc ml_int) := Restart it0 (cnew ml_int 3).
Eval vm_compute in l.
Definition it1 := Restart l (do l &lt;- FromW l; incr l).
Eval vm_compute in it1.
Definition it2 := Restart it1 (do l &lt;- FromW l; incr l).
Eval vm_compute in it2.
Local Notation cycle := (cycle idfun M).
Definition it3 := Restart it2 (cycle ml_bool true false).
Eval vm_compute in it3.
Local Notation hd := (hd idfun).
Definition it4 := Restart it3 (do l &lt;- FromW it3; Ret (hd ml_bool false l)).
Eval vm_compute in it4.
Eval vm_compute in crun (FromW it4).
Local Notation tl := (tl idfun M).
Definition it5 := Restart it4
                    (do l0 &lt;- FromW it3;
                     do l1 &lt;- tl _ l0;
                     do l2 &lt;- tl _ l1;
                     Ret (hd ml_bool false l2)).
Eval vm_compute in it5.
Eval vm_compute in crun (FromW it5).
End eval.
End eval_cyclic.
Section factorial.
Variable (N : monad) (M : typedStoreMonad N).
Fixpoint fact_ref (r : loc ml_int) (n : nat) : M unit :=
  if n is m.+1 then cget r &gt;&gt;= fun p =&gt; cput r (n * p) &gt;&gt; fact_ref r m
  else skip.
Theorem fact_ref_ok n :
  crun (cnew ml_int 1 &gt;&gt;= fun r =&gt; fact_ref r n &gt;&gt; cget r) = Some (fact_rec n).
Proof.
set fn := fact_rec n.
set m := n.
set s := 1.
have smn : s * fact_rec m = fn by rewrite mul1n.
elim: m s smn =&gt; [|m IH] s /= smn.
  rewrite /fact_ref -smn muln1.
  under eq_bind do rewrite bindskipf.
  by rewrite cnewgetret crunret // crunnew0.
under eq_bind do rewrite bindA.
rewrite cnewget.
under eq_bind do rewrite bindA.
by rewrite cnewput IH // (mulnC m.+1) -mulnA.
Qed.
End factorial.
Section fact_for.
Variable (N : monad) (M : typedStoreMonad N).
Local Notation coq_type := (hierarchy.coq_type N).
Local Open Scope do_notation.
Definition fact_for (n : coq_type ml_int) : M (coq_type ml_int) :=
  do v &lt;- cnew ml_int 1;
  do _ &lt;-
  (do u &lt;- Ret 1;
   do v_1 &lt;- Ret n;
   forloop u v_1
     (fun i =&gt;
        do v_1 &lt;- (do v_1 &lt;- cget v; Ret (v_1 * i));
        cput v v_1));
  cget v.
Theorem fact_for_ok n : crun (fact_for n) = Some (fact_rec n).
Proof.
rewrite /fact_for.
under eq_bind do rewrite !bindA !bindretf.
transitivity (crun (cnew ml_int (fact_rec n) &gt;&gt; Ret (fact_rec n) : M _));
  last by rewrite crunret // crunnew0.
congr crun.
rewrite -{1}/(fact_rec 0).
pose m := n.
have -&gt; : 0 = n - m by rewrite subnn.
have : m &lt;= n by [].
elim: m =&gt; [|m IH] mn.
  rewrite subn0.
  under eq_bind do rewrite forloop0 ?leqnn // bindretf -cgetret.
  by rewrite cnewget.
rewrite subnSK //.
under eq_bind do (rewrite forloopS; last by apply leq_subr).
under eq_bind do rewrite !bindA.
rewrite cnewget.
under eq_bind do rewrite bindretf.
rewrite cnewput -IH; last by apply ltnW.
by rewrite subnS mulnC -(@prednK (n-m)) // lt0n subn_eq0 -ltnNge.
Qed.
End fact_for.
Section fibonacci.
Variables (N : monad) (M : typedStoreMonad N).
Fixpoint fibo_rec n :=
  if n is m.+1 then
    if m is k.+1 then fibo_rec k + fibo_rec m else 1
  else 1.
Fixpoint fibo_ref n (a b : loc ml_int) : M unit :=
  if n is n.+1 then
    cget a &gt;&gt;= (fun x =&gt; cget b &gt;&gt;= fun y =&gt; cput a y &gt;&gt; cput b (x + y))
           &gt;&gt; fibo_ref n a b
  else skip.
Theorem fibo_ref_ok n :
  crun (cnew ml_int 1 &gt;&gt;=
             (fun a =&gt; cnew ml_int 1 &gt;&gt;= fun b =&gt; fibo_ref n a b &gt;&gt; cget a))
  = Some (fibo_rec n).
Proof.
set x := 1.
pose y := x.
rewrite -{2}/y.
pose i := n.
rewrite -[in LHS]/i.
have : (x, y) = (fibo_rec (n - i), fibo_rec (n.+1 - i)).
  by rewrite subnn -addn1 addKn.
have : i &lt;= n by [].
elim: i x y =&gt; [|i IH] x y Hi.
  rewrite !subn0 =&gt; -[-&gt; -&gt;].
  rewrite -/(fibo_rec n.+1).
  under eq_bind do under eq_bind do rewrite /= bindskipf.
  rewrite -cnewchk.
  under eq_bind do rewrite -cgetret cchknewget.
  by rewrite cnewget -bindA crunret // crunnew // crunnew0.
rewrite subSS =&gt; -[] Hx Hy.
rewrite -(IH y (x + y) (ltnW Hi)); last first.
  rewrite {}Hx {}Hy; congr pair.
  rewrite subSn 1?ltnW//.
  case: n {IH} =&gt; // n in Hi *.
  by rewrite [in RHS]subSn -1?ltnS// subSS subSn -1?ltnS.
rewrite /=.
under eq_bind do under eq_bind do rewrite !bindA.
rewrite -cnewchk.
under eq_bind do rewrite cchknewget.
rewrite cnewget.
under eq_bind do under eq_bind do rewrite !bindA.
under eq_bind do rewrite cnewget.
under eq_bind do under eq_bind do rewrite !bindA.
rewrite -[in LHS]cnewchk.
under eq_bind do rewrite cchknewput.
rewrite cnewput.
by under eq_bind do rewrite cnewput.
Qed.
End fibonacci.
End CoqTypeNat.
Require Import PrimInt63.
Require Sint63.
Section Int63.
Definition uint2N (n : int) : nat :=
  if Uint63.to_Z n is Zpos pos then Pos.to_nat pos else 0.
Definition N2int n := Uint63.of_Z (Z.of_nat n).
Lemma ltsbNlesb m n : ltsb m n = ~~ lesb n m.
Proof.
case/boolP: (lesb n m) =&gt; /Sint63.lebP nm; apply/Sint63.ltbP =&gt; /=;
  by [apply Z.le_ngt | apply Z.nle_gt].
Qed.
Lemma ltsbW m n : ltsb m n -&gt; lesb m n.
Proof. move/Sint63.ltbP/Z.lt_le_incl =&gt; mn; by apply/Sint63.lebP. Qed.
Lemma lesb_ltsbS_eq m n : lesb m n -&gt; ltsb n (Uint63.succ m) -&gt; m = n.
Proof.
move/Sint63.lebP =&gt; mn /Sint63.ltbP nSm.
move: (nSm).
rewrite Sint63.succ_of_Z -Sint63.is_int; last first.
  split.
    apply Z.le_le_succ_r.
    by case: (Sint63.to_Z_bounded m).
  apply Zlt_le_succ, (Z.le_lt_trans _ _ _ mn), (Z.lt_le_trans _ _ _ nSm).
  by case: (Sint63.to_Z_bounded (Uint63.succ m)).
move/Zlt_le_succ/Zsucc_le_reg =&gt; nm.
by apply Sint63.to_Z_inj, Zle_antisym.
Qed.
The opposite is not true ! (n = max_int) 
Lemma ltsbS_lesb m n : ltsb m (Uint63.succ n) -&gt; lesb m n.
Proof.
rewrite -[lesb _ _]negbK -ltsbNlesb =&gt; nSm; apply/negP =&gt; /[dup] /ltsbW nm.
by rewrite (lesb_ltsbS_eq n m) // =&gt; /Sint63.ltbP /Z.lt_irrefl.
Qed.
Lemma uint63_min n : (0 &lt;= Uint63.to_Z n)%Z.
Proof. by case: (Uint63.to_Z_bounded n). Qed.
Lemma uint63_max n : (Uint63.to_Z n &lt; Uint63.wB)%Z.
Proof. by case: (Uint63.to_Z_bounded n). Qed.
Lemma uint2N_pred n : n &lt;&gt; 0%int63 -&gt; uint2N n = (uint2N (Uint63.pred n)).+1.
Proof.
move=&gt; Hn.
rewrite /uint2N Uint63.pred_spec.
case HnZ: (Uint63.to_Z n) =&gt; [|m|m].
- rewrite (_ : 0 = Uint63.to_Z 0)%Z // in HnZ.
  move/Uint63.to_Z_inj in HnZ.
  by elim Hn.
- have Hm1 : (0 &lt;= Z.pos m - 1 &lt; Uint63.wB)%Z.
    split. by apply leZsub1, Pos2Z.is_pos.
    apply (Z.lt_trans _ (Z.pos m)).
      by apply leZsub1, Z.le_refl.
    rewrite -HnZ; by apply uint63_max.
  rewrite Zmod_small //.
  case HmZ: (Z.pos m - 1)%Z =&gt; [|p|p].
  + by move/Z.sub_move_r: HmZ =&gt; /= [] -&gt;.
  + apply Nat2Z.inj =&gt; /=.
    rewrite positive_nat_Z Pos2SuccNat.id_succ Pos2Z.inj_succ -HmZ.
    by rewrite (Z.succ_pred (Z.pos m)).
  + by destruct m.
- move: (uint63_min n).
  rewrite HnZ =&gt; /Zle_not_lt; elim.
  by apply Zlt_neg_0.
Qed.
Lemma lesb_sub_bounded m n :
  lesb m n -&gt; (0 &lt;= Sint63.to_Z n - Sint63.to_Z m &lt; Uint63.wB)%Z.
Proof.
move/Sint63.lebP =&gt; mn.
split. by apply Zle_minus_le_0.
apply
 (Z.le_lt_trans _ (Sint63.to_Z Sint63.max_int - Sint63.to_Z Sint63.min_int))%Z.
  apply leZ_sub.
    by case: (Sint63.to_Z_bounded n).
  by case: (Sint63.to_Z_bounded m).
done.
Qed.
Lemma ltsb_neq m n : ltsb m n -&gt; m &lt;&gt; n.
Proof. by move/Sint63.ltbP/[swap]/(f_equal Sint63.to_Z)-&gt; =&gt;/Z.lt_irrefl. Qed.
(*
Lemma sub0_eq m n : sub m n = 0%int63 -&gt; m = n.
Proof.
rewrite Sint63.sub_of_Z =&gt; /(f_equal Uint63.to_Z).
rewrite Uint63.of_Z_spec.
move/Sint63.ltbP in mn.
rewrite Zmod_small.
  rewrite Z.sub_move_r /= =&gt; nm.
  rewrite nm in mn.
  by move/Z.lt_irrefl in mn.
by apply /lesb_sub_bounded /Sint63.lebP /Z.lt_le_incl.
Qed.

Lemma ltsb_sub_neq0 m n : ltsb m n -&gt; sub n m &lt;&gt; 0%int63.
Proof.
move=&gt; mn.
rewrite Sint63.sub_of_Z =&gt; /(f_equal Uint63.to_Z).
rewrite Uint63.of_Z_spec.
move/Sint63.ltbP in mn.
rewrite Zmod_small.
  rewrite Z.sub_move_r /= =&gt; nm.
  rewrite nm in mn.
  by move/Z.lt_irrefl in mn.
by apply /lesb_sub_bounded /Sint63.lebP /Z.lt_le_incl.
Qed.
Lemma sub_succ_pred m n : sub n (Uint63.succ m) = Uint63.pred (sub n m).
Proof.
apply Uint63.to_Z_inj.
rewrite Uint63.sub_spec Uint63.succ_spec Uint63.pred_spec Uint63.sub_spec.
rewrite Zminus_mod Zmod_mod -Zminus_mod Z.sub_add_distr.
apply/esym.
by rewrite Zminus_mod Zmod_mod -Zminus_mod.
Qed.
Lemma uint2N_sub_succ m n : ltsb m n -&gt;
  uint2N (sub n m) = (uint2N (sub n (Uint63.succ m))).+1.
Proof. move/ltsb_sub_neq0 =&gt; mn. by rewrite sub_succ_pred uint2N_pred. Qed.
Lemma N2int_succ : {morph N2int : x / x.+1 &gt;-&gt; Uint63.succ x}.
Proof.
move=&gt; x; apply Uint63.to_Z_inj; rewrite Uint63.succ_spec !Uint63.of_Z_spec.
by rewrite Zplus_mod /= Zpos_P_of_succ_nat /Z.succ Zplus_mod Zmod_mod.
Qed.
Lemma N2int_mul : {morph N2int : x y / x * y &gt;-&gt; mul x y}.
Proof.
move=&gt; x y; apply Uint63.to_Z_inj.
by rewrite Uint63.mul_spec !Uint63.of_Z_spec Nat2Z.inj_mul Zmult_mod.
Qed.
Lemma N2int_bounded n :
  (Z.of_nat n &lt;= Sint63.to_Z Sint63.max_int)%Z -&gt;
  (Sint63.to_Z Sint63.min_int &lt;= Z.of_nat n &lt;= Sint63.to_Z Sint63.max_int)%Z.
Proof.
split =&gt; //.
apply (Z.le_trans _ 0).
  rewrite -[0%Z]/(Sint63.to_Z 0).
  by case: (Sint63.to_Z_bounded 0).
by apply Zle_0_nat.
Qed.
End Int63.
Module CoqTypeInt63.
Import MLTypes.
</pre>
<pre class="ssrdoc">
Section with_monad.
Context [M : Type -&gt; Type].
Fixpoint coq_type63 (T : ml_type) : Type :=
  match T with
  | ml_int =&gt; int
  | ml_bool =&gt; bool
  | ml_unit =&gt; unit
  | ml_arrow T1 T2 =&gt; coq_type63 T1 -&gt; M (coq_type63 T2)
  | ml_ref T1 =&gt; loc T1
  | ml_rlist T1 =&gt; rlist (coq_type63 T1) T1
  end.
End with_monad.
</pre>
<br/>
<span id="CoqTypeInt63.MLTypes_ml_type__canonical__hierarchy_ML_UNIVERSE" class="id"><span id="CoqTypeInt63.HB_unnamed_factory_3" class="id"><a name="CoqTypeInt63.MLTypes_ml_type__canonical__hierarchy_ML_UNIVERSE" class="hierarchy-builder">HB.instance</a></span></span> <span class="vernacular">Definition</span> <span class="id">_</span> <span class="id">:=</span> @<span class="id"><a href="monae.hierarchy.html#isML_universe.Build">isML_universe.Build</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type">ml_type</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.class">Equality.class</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type_eqType">ml_type_eqType</a></span>) <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.coq_type63">coq_type63</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_unit">ml_unit</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.val_nonempty">val_nonempty</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="CoqTypeInt63.fact_for_int63" class="id"><a name="CoqTypeInt63.fact_for_int63" class="">fact_for_int63</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="CoqTypeInt63.fact_for_int63.N" class="id"><a name="CoqTypeInt63.fact_for_int63.N" class="">N</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#Monad.Exports.monad">monad</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="CoqTypeInt63.fact_for_int63.M" class="id"><a name="CoqTypeInt63.fact_for_int63.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadTypedStore.Exports.typedStoreMonad">typedStoreMonad</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type">ml_type</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.N">N</a></span> <span class="id"><a href="monae.monad_model.html#locT_nat">monad_model.locT_nat</a></span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Notation</span> <span id="CoqTypeInt63.coq_type" class="id"><a name="CoqTypeInt63.coq_type" class="">coq_type</a></span> <span class="id">:=</span> (<span class="id"><a href="monae.hierarchy.html#coq_type">hierarchy.coq_type</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.N">N</a></span>).<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">do_notation</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="CoqTypeInt63.fact_for_int63.forloop63" class="id"><a name="CoqTypeInt63.fact_for_int63.forloop63" class="">forloop63</a></span>.<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.forloop63" class="id"><a name="CoqTypeInt63.forloop63" class="">forloop63</a></span> (<span id="n_1:123" class="id"><a name="n_1:123" class="">n_1</a></span> <span id="n_2:124" class="id"><a name="n_2:124" class="">n_2</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#int">int</a></span>) (<span id="b:125" class="id"><a name="b:125" class="">b</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#int">int</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Sint63.html#ltb">Sint63.ltb</a></span> <span class="id"><a href="monae.example_typed_store.html#n_2:124">n_2</a></span> <span class="id"><a href="monae.example_typed_store.html#n_1:123">n_1</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#iter">iter</a></span> (<span class="id"><a href="monae.example_typed_store.html#uint2N">uint2N</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#sub">sub</a></span> <span class="id"><a href="monae.example_typed_store.html#n_2:124">n_2</a></span> <span class="id"><a href="monae.example_typed_store.html#n_1:123">n_1</a></span>)).<span class="id">+1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> (<span id="m:126" class="id"><a name="m:126" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#int">int</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="i:127" class="id"><a name="i:127" class="">i</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.example_typed_store.html#m:126">m;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.example_typed_store.html#b:125">b</a></span> <span class="id"><a href="monae.example_typed_store.html#i:127">i;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Uint63.html#succ">Uint63.succ</a></span> <span class="id"><a href="monae.example_typed_store.html#i:127">i</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_typed_store.html#n_1:123">n_1</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#tt">tt</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="CoqTypeInt63.forloop63S" class="id"><a name="CoqTypeInt63.forloop63S" class="">forloop63S</a></span> <span id="m:128" class="id"><a name="m:128" class="">m</a></span> <span id="n:129" class="id"><a name="n:129" class="">n</a></span> (<span id="f:130" class="id"><a name="f:130" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#int">int</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#ltsb">ltsb</a></span> <span class="id"><a href="monae.example_typed_store.html#m:128">m</a></span> <span class="id"><a href="monae.example_typed_store.html#n:129">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.forloop63">forloop63</a></span> <span class="id"><a href="monae.example_typed_store.html#m:128">m</a></span> <span class="id"><a href="monae.example_typed_store.html#n:129">n</a></span> <span class="id"><a href="monae.example_typed_store.html#f:130">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_typed_store.html#f:130">f</a></span> <span class="id"><a href="monae.example_typed_store.html#m:128">m</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.forloop63">forloop63</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Uint63.html#succ">Uint63.succ</a></span> <span class="id"><a href="monae.example_typed_store.html#m:128">m</a></span>) <span class="id"><a href="monae.example_typed_store.html#n:129">n</a></span> <span class="id"><a href="monae.example_typed_store.html#f:130">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
<span class="id">rewrite</span> <span class="id">/forloop63</span> <span class="id">=&gt;</span> <span class="id">mn</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.example_typed_store.html#ltsbNlesb">ltsbNlesb</a></span> (<span class="id"><a href="monae.example_typed_store.html#ltsbW">ltsbW</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">mn</span>) <span class="id">/=</span>.<br/>
<span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=&gt;</span> <span class="id">nSm</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">mn;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.example_typed_store.html#ltsbNlesb">ltsbNlesb</a></span> <span class="id">=&gt;</span> <span class="id">/negP;</span> <span class="id">elim;</span> <span class="id">apply</span> <span class="id"><a href="monae.example_typed_store.html#ltsbS_lesb">ltsbS_lesb</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.example_typed_store.html#ltsbNlesb">ltsbNlesb</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbK">negbK</a></span> <span class="gallina-kwd">in</span> <span class="id">nSm</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.example_typed_store.html#uint2N_sub_succ">uint2N_sub_succ</a></span> <span class="id">//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#iterSr">iterSr</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">!bindA</span> <span class="id"><a href="monae.monad_lib.html#iter_bind">iter_bind</a></span> <span class="id">!bindA</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="CoqTypeInt63.forloop631" class="id"><a name="CoqTypeInt63.forloop631" class="">forloop631</a></span> <span id="m:131" class="id"><a name="m:131" class="">m</a></span> (<span id="f:132" class="id"><a name="f:132" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#int">int</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.forloop63">forloop63</a></span> <span class="id"><a href="monae.example_typed_store.html#m:131">m</a></span> <span class="id"><a href="monae.example_typed_store.html#m:131">m</a></span> <span class="id"><a href="monae.example_typed_store.html#f:132">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_typed_store.html#f:132">f</a></span> <span class="id"><a href="monae.example_typed_store.html#m:131">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
 <span class="id">rewrite</span> <span class="id">/forloop63</span>.<br/>
<span class="id">case:</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Sint63.html#ltbP">Sint63.ltbP</a></span> <span class="id">m</span> <span class="id">m</span>) <span class="id">=&gt;</span> <span class="id">[/Z</span>.<span class="id">lt_irrefl</span> <span class="id">//</span> <span class="id">|</span> <span class="id">_]</span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/uint2N</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Uint63.html#sub_spec">Uint63.sub_spec</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.sub_diag">Z.sub_diag</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.Zdiv.html#Zmod_0_l">Zmod_0_l</a></span> <span class="id">/=</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!</span>(<span class="id"><a href="monae.hierarchy.html#bindretf">bindretf,bindA</a></span>) <span class="id"><a href="monae.hierarchy.html#bindmskip">bindmskip</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="CoqTypeInt63.forloop630" class="id"><a name="CoqTypeInt63.forloop630" class="">forloop630</a></span> <span id="m:133" class="id"><a name="m:133" class="">m</a></span> <span id="n:134" class="id"><a name="n:134" class="">n</a></span> (<span id="f:135" class="id"><a name="f:135" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#int">int</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#ltsb">ltsb</a></span> <span class="id"><a href="monae.example_typed_store.html#n:134">n</a></span> <span class="id"><a href="monae.example_typed_store.html#m:133">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.forloop63">forloop63</a></span> <span class="id"><a href="monae.example_typed_store.html#m:133">m</a></span> <span class="id"><a href="monae.example_typed_store.html#n:134">n</a></span> <span class="id"><a href="monae.example_typed_store.html#f:135">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#skip">skip</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/forloop63</span> <span class="id">=&gt;</span> <span class="id">-&gt;</span>. Qed.</div>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.forloop63">forloop63</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.fact_for63" class="id"><a name="CoqTypeInt63.fact_for63" class="">fact_for63</a></span> (<span id="n:136" class="id"><a name="n:136" class="">n</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.coq_type">coq_type</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_int">ml_int</a></span>) <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.M">M</a></span> (<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.coq_type">coq_type</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_int">ml_int</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="v:137" class="id"><a name="v:137" class="">v</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#cnew">cnew</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_int">ml_int</a></span> <span class="id">1</span>%<span class="id">int63;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="u:138" class="id"><a name="u:138" class="">u</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">1</span>%<span class="id">int63;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="v_1:139" class="id"><a name="v_1:139" class="">v_1</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_typed_store.html#n:136">n;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.forloop63">forloop63</a></span> <span class="id"><a href="monae.example_typed_store.html#u:138">u</a></span> <span class="id"><a href="monae.example_typed_store.html#v_1:139">v_1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="i:140" class="id"><a name="i:140" class="">i</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="v_1:142" class="id"><a name="v_1:142" class="">v_1</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="v_1:141" class="id"><a name="v_1:141" class="">v_1</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#cget">cget</a></span> <span class="id"><a href="monae.example_typed_store.html#v:137">v;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#mul">mul</a></span> <span class="id"><a href="monae.example_typed_store.html#v_1:141">v_1</a></span> <span class="id"><a href="monae.example_typed_store.html#i:140">i</a></span>))<span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#cput">cput</a></span> <span class="id"><a href="monae.example_typed_store.html#v:137">v</a></span> <span class="id"><a href="monae.example_typed_store.html#v_1:142">v_1</a></span>))<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#cget">cget</a></span> <span class="id"><a href="monae.example_typed_store.html#v:137">v</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="CoqTypeInt63.fact_for_int63.fact_for63_ok" class="id"><a name="CoqTypeInt63.fact_for_int63.fact_for63_ok" class="">fact_for63_ok</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="CoqTypeInt63.fact_for_int63.fact_for63_ok.n" class="id"><a name="CoqTypeInt63.fact_for_int63.fact_for63_ok.n" class="">n</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="CoqTypeInt63.fact_for_int63.fact_for63_ok.Hn" class="id"><a name="CoqTypeInt63.fact_for_int63.fact_for63_ok.Hn" class="">Hn</a></span> <span class="id">:</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Sint63.html#to_Z">Sint63.to_Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Sint63.html#max_int">Sint63.max_int</a></span>)%<span class="id">Z</span>.<br/>
<br/>
<span class="vernacular">Let</span> <span id="CoqTypeInt63.fact_for_int63.fact_for63_ok.n_bounded" class="id"><a name="CoqTypeInt63.fact_for_int63.fact_for63_ok.n_bounded" class="">n_bounded</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Sint63.html#to_Z">Sint63.to_Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Sint63.html#min_int">Sint63.min_int</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Sint63.html#to_Z">Sint63.to_Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Sint63.html#max_int">Sint63.max_int</a></span>)%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
 <span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="monae.example_typed_store.html#N2int_bounded">N2int_bounded,</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.lt_le_incl">Z.lt_le_incl</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="CoqTypeInt63.ltsb_succ" class="id"><a name="CoqTypeInt63.ltsb_succ" class="">ltsb_succ</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#ltsb">ltsb</a></span> (<span class="id"><a href="monae.example_typed_store.html#N2int">N2int</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Uint63.html#succ">Uint63.succ</a></span> (<span class="id"><a href="monae.example_typed_store.html#N2int">N2int</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
<span class="id">apply/Sint63</span>.<span class="id">ltbP</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Sint63.html#succ_spec">Sint63.succ_spec</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Sint63.html#cmod_small">Sint63.cmod_small</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply/Zle_lt_succ/Z</span>.<span class="id">le_refl</span>.<br/>
<span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for infotheo.lib.ssrZ#leZ_addr">leZ_addr</a></span> <span class="id">=&gt;</span> <span class="id">//;</span> <span class="gallina-kwd">by</span> <span class="id">case:</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Sint63.html#to_Z_bounded">Sint63.to_Z_bounded</a></span> (<span class="id"><a href="monae.example_typed_store.html#N2int">N2int</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.lt_add_lt_sub_r">Z.lt_add_lt_sub_r</a></span><span class="id">;</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-Sint63</span>.<span class="id">is_int</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="CoqTypeInt63.ltsb_subr" class="id"><a name="CoqTypeInt63.ltsb_subr" class="">ltsb_subr</a></span> <span id="m:145" class="id"><a name="m:145" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#m:145">m</a></span>.<span class="id">+1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#ltsb">ltsb</a></span> (<span class="id"><a href="monae.example_typed_store.html#N2int">N2int</a></span> (<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'-'_x">-</a></span> <span class="id"><a href="monae.example_typed_store.html#m:145">m</a></span>.<span class="id">+1</span>)) (<span class="id"><a href="monae.example_typed_store.html#N2int">N2int</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="id">move=&gt;</span> <span class="id">Smn</span>.<br/>
<span class="id">apply/Sint63</span>.<span class="id">ltbP</span>.<br/>
<span class="id">have</span> <span class="id">Hm</span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'-'_x">-</a></span> <span class="id">m</span>.<span class="id">+1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltn_subLR">ltn_subLR</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addSn">addSn</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_addl">leq_addl</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnW">ltnW</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/N2int</span> <span class="id">-!Sint63</span>.<span class="id">is_int</span> <span class="id">//</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">apply/inj_lt/ltP</span>.<br/>
<span class="id">-</span> <span class="id">move/ltP/inj_lt</span> <span class="gallina-kwd">in</span> <span class="id">Hm</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">split;</span> <span class="id">apply</span> <span class="id"><a href="monae.example_typed_store.html#N2int_bounded">N2int_bounded,</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.lt_le_incl">Z.lt_le_incl</a></span><span class="id">,</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.lt_trans">Z.lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hm</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="CoqTypeInt63.fact_for63_ok" class="id"><a name="CoqTypeInt63.fact_for63_ok" class="">fact_for63_ok</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#crun">crun</a></span> (<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for63">fact_for63</a></span> (<span class="id"><a href="monae.example_typed_store.html#N2int">N2int</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="monae.example_typed_store.html#N2int">N2int</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#fact_rec">fact_rec</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
<span class="id">rewrite</span> <span class="id">/fact_for63</span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">!bindA</span> <span class="id">!bindretf</span>.<br/>
<span class="id">set</span> <span class="id">fn</span> <span class="id">:=</span> <span class="id"><a href="monae.example_typed_store.html#N2int">N2int</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#fact_rec">fact_rec</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span>).<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#crun">crun</a></span> (<span class="id"><a href="monae.hierarchy.html#cnew">cnew</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_int">ml_int</a></span> <span class="id">fn</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">fn</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.M">M</a></span> <span class="id">_</span>))<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#crunret">crunret</a></span> <span class="id">//</span> <span class="id"><a href="monae.typed_store_lib.html#crunnew0">crunnew0</a></span>.<br/>
<span class="id">congr</span> <span class="id"><a href="monae.hierarchy.html#crun">crun</a></span>.<br/>
<span class="id">have</span> <span class="id">{1}-&gt;</span> <span class="id">:</span> (<span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_typed_store.html#N2int">N2int</a></span> <span class="id">1</span>)%<span class="id">int63</span> <span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
<span class="id">rewrite</span> <span class="id">-/</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#fact_rec">fact_rec</a></span> <span class="id">0</span>).<br/>
<span class="id">have</span> <span class="id">-&gt;</span> <span class="id">:</span> (<span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Uint63.html#succ">Uint63.succ</a></span> (<span class="id"><a href="monae.example_typed_store.html#N2int">N2int</a></span> <span class="id">0</span>))%<span class="id">int63</span> <span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
<span class="id">pose</span> <span class="id">m</span> <span class="id">:=</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span>.<br/>
<span class="id">have</span> <span class="id">-&gt;</span> <span class="id">:</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'-'_x">-</a></span> <span class="id">m</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#subnn">subnn</a></span>.<br/>
<span class="id">have</span> <span class="id">:</span> <span class="id">m</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#cb53cf0ee22c036a03b4a9281c68b5a3">&lt;=</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span> <span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
<span class="id">elim:</span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id">[|m</span> <span class="id">IH]</span> <span class="id">mn</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#subn0">subn0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.forloop630">forloop630</a></span> (<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.ltsb_succ">ltsb_succ,bindretf</a></span>) <span class="id">//</span> <span class="id">-cgetret</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#cnewget">cnewget</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-N2int_succ</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#subnSK">subnSK</a></span> <span class="id">//</span>.<br/>
<span class="id">case:</span> <span class="id">m</span> <span class="id">IH</span> <span class="id">mn</span> <span class="id">=&gt;</span> <span class="id">[|m]</span> <span class="id">IH</span> <span class="id">mn</span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#subn0">subn0</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.forloop631">forloop631</a></span> <span class="id">!</span>(<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.ltsb_subr">ltsb_subr,bindA</a></span>) <span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#cnewget">cnewget</a></span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">-cgetret</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#cnewput">cnewput</a></span> <span class="id">-N2int_mul</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#mulnC">mulnC</a></span> <span class="id">-{1}</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#prednK">prednK</a></span> <span class="id">mn</span>) <span class="id"><a href="monae.hierarchy.html#cnewget">cnewget</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#subn1">subn1</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-/</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#fact_rec">fact_rec</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n</a></span>.<span class="id">-1</span>.<span class="id">+1</span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#prednK">prednK</a></span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.forloop63S">forloop63S</a></span> <span class="id">!</span>(<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.ltsb_subr">ltsb_subr,bindA</a></span>) <span class="id">//</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#cnewget">cnewget</a></span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#cnewput">cnewput</a></span> <span class="id">-IH</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnW">ltnW,subnS</a></span>) <span class="id">//</span> <span class="id">-N2int_mul</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#mulnC">mulnC</a></span> <span class="id">-</span>(@<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#prednK">prednK</a></span> (<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok.n">n-m</a></span>.<span class="id">+1</span>)) <span class="id">//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#lt0n">lt0n</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#subn_eq0">subn_eq0</a></span> <span class="id">-ltnNge</span>.<br/>
Qed.</div>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63.fact_for63_ok">fact_for63_ok</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for_int63">fact_for_int63</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="CoqTypeInt63.eval" class="id"><a name="CoqTypeInt63.eval" class="">eval</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="monae.typed_store_model.html">typed_store_model</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.M" class="id"><a name="CoqTypeInt63.M" class="">M</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#dd4e793ea9d0dbe0a320346aa74c809d">[the</a></span> <span class="id"><a href="monae.hierarchy.html#MonadTypedStore.Exports.typedStoreMonad">typedStoreMonad</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type">ml_type</a></span> <span class="id">_</span> <span class="id"><a href="monae.monad_model.html#locT_nat">monad_model.locT_nat</a></span> <span class="id">of</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.typed_store_model.html#acto">acto</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type">ml_type]</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.Env" class="id"><a name="CoqTypeInt63.Env" class="">Env</a></span> <span class="id">:=</span> <span class="id"><a href="monae.typed_store_model.html#Env">typed_store_model.Env</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type">ml_type</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.empty_env" class="id"><a name="CoqTypeInt63.empty_env" class="">empty_env</a></span> <span class="id">:=</span> @<span class="id"><a href="monae.typed_store_model.html#mkEnv">typed_store_model.mkEnv</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type">ml_type</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nil">nil</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.it0" class="id"><a name="CoqTypeInt63.it0" class="">it0</a></span> <span class="id">:</span> <span class="id"><a href="monae.typed_store_model.html#W">W</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#inr">inr</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#tt">tt,</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.empty_env">empty_env</a></span>).<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">do_notation</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Notation</span> <span id="CoqTypeInt63.mkloc" class="id"><a name="CoqTypeInt63.mkloc" class="">mkloc</a></span> <span class="id">:=</span> (<span class="id"><a href="monae.hierarchy.html#mkloc">mkloc</a></span> (<span class="id">locT:=monad_model</span>.<span class="id">locT_nat</span>)).<br/>
<span class="vernacular">Local</span> <span class="vernacular">Notation</span> <span id="CoqTypeInt63.coq_type" class="id"><a name="CoqTypeInt63.coq_type" class="">coq_type</a></span> <span class="id">:=</span> (<span class="id"><a href="monae.hierarchy.html#coq_type">coq_type</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.M">M</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.incr" class="id"><a name="CoqTypeInt63.incr" class="">incr</a></span> (<span id="l:146" class="id"><a name="l:146" class="">l</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.loc">loc</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_int">ml_int</a></span>) <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.PrimInt63.html#int">int</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:147" class="id"><a name="x:147" class="">x</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#cget">cget</a></span> <span class="id"><a href="monae.example_typed_store.html#l:146">l;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#cput">cput</a></span> <span class="id"><a href="monae.example_typed_store.html#l:146">l</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Uint63.html#succ">Uint63.succ</a></span> <span class="id"><a href="monae.example_typed_store.html#x:147">x</a></span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.Cyclic.Int63.Uint63.html#succ">Uint63.succ</a></span> <span class="id"><a href="monae.example_typed_store.html#x:147">x</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.l" class="id"><a name="CoqTypeInt63.l" class="">l</a></span> <span class="id">:</span> <span class="id"><a href="monae.typed_store_model.html#W">W</a></span> (<span class="id"><a href="monae.example_typed_store.html#MLTypes.loc">loc</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_int">ml_int</a></span>) <span class="id">:=</span> <span class="id"><a href="monae.typed_store_model.html#Restart">Restart</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.it0">it0</a></span> (<span class="id"><a href="monae.hierarchy.html#cnew">cnew</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_int">ml_int</a></span> <span class="id">3</span>)%<span class="id">int63</span>.<br/>
<span class="vernacular">Eval</span> <span class="id">vm_compute</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.l">l</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.it1" class="id"><a name="CoqTypeInt63.it1" class="">it1</a></span> <span class="id">:=</span> <span class="id"><a href="monae.typed_store_model.html#Restart">Restart</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.l">l</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="l:148" class="id"><a name="l:148" class="">l</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.typed_store_model.html#FromW">FromW</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.l">l;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.incr">incr</a></span> <span class="id"><a href="monae.example_typed_store.html#l:148">l</a></span>).<br/>
<span class="vernacular">Eval</span> <span class="id">vm_compute</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.it1">it1</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.it2" class="id"><a name="CoqTypeInt63.it2" class="">it2</a></span> <span class="id">:=</span> <span class="id"><a href="monae.typed_store_model.html#Restart">Restart</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.it1">it1</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="l:149" class="id"><a name="l:149" class="">l</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.typed_store_model.html#FromW">FromW</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.l">l;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.incr">incr</a></span> <span class="id"><a href="monae.example_typed_store.html#l:149">l</a></span>).<br/>
<span class="vernacular">Eval</span> <span class="id">vm_compute</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.it2">it2</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.it3" class="id"><a name="CoqTypeInt63.it3" class="">it3</a></span> <span class="id">:=</span> <span class="id"><a href="monae.typed_store_model.html#Restart">Restart</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.it2">it2</a></span> (<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.fact_for63">fact_for63</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.M">M</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.M">M</a></span> <span class="id">5</span>)%<span class="id">uint63</span>.<br/>
<span class="vernacular">Eval</span> <span class="id">vm_compute</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.it3">it3</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.AppM" class="id"><a name="CoqTypeInt63.AppM" class="">AppM</a></span> <span class="id">{A</span> <span id="B:151" class="id"><a name="B:151" class="">B}</a></span> (<span id="f:152" class="id"><a name="f:152" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.M">M</a></span> (<span class="id"><a href="monae.example_typed_store.html#A:150">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.M">M</a></span> <span class="id"><a href="monae.example_typed_store.html#B:151">B</a></span>)) (<span id="x:153" class="id"><a name="x:153" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#A:150">A</a></span>) <span class="id">:=</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="f:154" class="id"><a name="f:154" class="">f</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.example_typed_store.html#f:152">f;</a></span> <span class="id"><a href="monae.example_typed_store.html#f:154">f</a></span> <span class="id"><a href="monae.example_typed_store.html#x:153">x</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.omega" class="id"><a name="CoqTypeInt63.omega" class="">omega</a></span> (<span id="T:155" class="id"><a name="T:155" class="">T</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_type">ml_type</a></span>) (<span id="n:156" class="id"><a name="n:156" class="">n</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.coq_type">coq_type</a></span> <span class="id"><a href="monae.example_typed_store.html#T:155">T</a></span>) <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.M">M</a></span> (<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.coq_type">coq_type</a></span> <span class="id"><a href="monae.example_typed_store.html#T:155">T</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="r_1:158" class="id"><a name="r_1:158" class="">r_1</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#cnew">cnew</a></span> (<span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_arrow">ml_arrow</a></span> <span class="id"><a href="monae.example_typed_store.html#T:155">T</a></span> <span class="id"><a href="monae.example_typed_store.html#T:155">T</a></span>) (<span class="gallina-kwd">fun</span> <span id="x:157" class="id"><a name="x:157" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.coq_type">coq_type</a></span> <span class="id"><a href="monae.example_typed_store.html#T:155">T</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.example_typed_store.html#x:157">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.coq_type">coq_type</a></span> <span class="id"><a href="monae.example_typed_store.html#T:155">T</a></span>))<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="delta:161" class="id"><a name="delta:161" class="">delta</a></span> (<span id="i:160" class="id"><span id="i:159" class="id"><a name="i:160" class="">i</a></span></span> <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.coq_type">coq_type</a></span> <span class="id"><a href="monae.example_typed_store.html#T:155">T</a></span>) <span class="id">:</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.M">M</a></span> (<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.coq_type">coq_type</a></span> <span class="id"><a href="monae.example_typed_store.html#T:155">T</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.AppM">AppM</a></span> (<span class="id"><a href="monae.hierarchy.html#cget">cget</a></span> <span class="id"><a href="monae.example_typed_store.html#r_1:158">r_1</a></span>) <span class="id"><a href="monae.example_typed_store.html#i:159">i</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#cput">cput</a></span> <span class="id"><a href="monae.example_typed_store.html#r_1:158">r_1</a></span> <span class="id"><a href="monae.example_typed_store.html#delta:161">delta;</a></span> <span class="id"><a href="monae.example_typed_store.html#delta:161">delta</a></span> <span class="id"><a href="monae.example_typed_store.html#n:156">n</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="CoqTypeInt63.it_omega" class="id"><a name="CoqTypeInt63.it_omega" class="">it_omega</a></span> <span class="id">:=</span> <span class="id"><a href="monae.typed_store_model.html#Restart">Restart</a></span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.it3">it3</a></span> (<span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.omega">omega</a></span> <span class="id"><a href="monae.example_typed_store.html#MLTypes.ml_unit">ml_unit</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
<span class="vernacular">Fail</span> <span class="id">Timeout</span> <span class="id">1</span> <span class="vernacular">Eval</span> <span class="id">vm_compute</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.it_omega">it_omega</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63.eval">eval</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_typed_store.html#CoqTypeInt63">CoqTypeInt63</a></span>.<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
