
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module monae.example_nqueens</title>
<meta name="description" content="Documentation of Coq module monae.example_nqueens" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">
<h1 class="title">Module monae.example_nqueens</h1>
<div class="coq">
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.ZArith.html">ZArith</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.all_ssreflect.html">all_ssreflect</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp">boolp</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">infotheo</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="NOTFOUND the module url for infotheo.lib.ssrZ">ssrZ</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="monae.monae_lib.html">monae_lib</a></span> <span class="id"><a href="monae.hierarchy.html">hierarchy</a></span> <span class="id"><a href="monae.monad_lib.html">monad_lib</a></span> <span class="id"><a href="monae.fail_lib.html">fail_lib</a></span> <span class="id"><a href="monae.state_lib.html">state_lib</a></span>.<br/>
<br/>
<pre class="ssrdoc">
                           N-queens example                                
                                                                           
references:                                                                
- J. Gibbons, R. Hinze, Just do it: simple monadic equational reasoning,   
ICFP 2011                                                                  
- Shin-Cheng Mu, Calculating a Backtracking Algorithm: An Exercise in      
Monadic Program Derivation, TR-IIS-19-003                                  
</pre>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">monae_scope</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="nqueens_gibbons2011icfp" class="id">
  <a name="nqueens_gibbons2011icfp" class="">nqueens_gibbons2011icfp</a>
</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Notation</span> <span id="52877bc36222c4aac4a304713e4079ca" class="id">
  <a name="52877bc36222c4aac4a304713e4079ca" class="">&quot;A `2&quot;</a>
</span> <span class="id">:=</span> (<span class="id"><a href="monae.monad_lib.html#Squaring">Squaring</a></span> <span class="id">A</span>) (<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">2</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="place" class="id">
  <a name="place" class="">place</a>
</span> <span id="n:1" class="id">
  <a name="n:1" class="">n</a>
</span> <span class="id">{B}</span> (<span id="rs:3" class="id">
  <a name="rs:3" class="">rs</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.example_nqueens.html#B:2">B</a></span>) <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#zip">zip</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id"><a href="monae.example_nqueens.html#n:1">n</a></span>)) <span class="id"><a href="monae.example_nqueens.html#rs:3">rs</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="empty" class="id">
  <a name="empty" class="">empty</a>
</span> <span class="id">{B}</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.example_nqueens.html#B:4">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.example_nqueens.html#B:4">B</a></span>)<span class="id">:=</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079">,</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="test" class="id">
  <a name="test" class="">test</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z`2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span> <span class="id">'</span>(<span id="c:6" class="id">
  <a name="c:6" class="">c,</a>
</span> <span id="r:5" class="id">
  <a name="r:5" class="">r</a>
</span>) <span class="id">'</span>(<span id="upds:9" class="id">
  <a name="upds:9" class="">upds,</a>
</span> <span id="downs:8" class="id">
  <a name="downs:8" class="">downs</a>
</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="u:11" class="id">
  <a name="u:11" class="">u,</a>
</span> <span id="d:12" class="id">
  <a name="d:12" class="">d</a>
</span>) <span class="id">:=</span> (<span class="id"><a href="monae.example_nqueens.html#r:5">r</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="monae.example_nqueens.html#c:6">c,</a></span> <span class="id"><a href="monae.example_nqueens.html#r:5">r</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="monae.example_nqueens.html#c:6">c</a></span>)<span class="id">%Z</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="monae.example_nqueens.html#u:11">u</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d">\notin</a></span> <span class="id"><a href="monae.example_nqueens.html#upds:9">upds</a></span>) <span class="id">&amp;&amp;</span> (<span class="id"><a href="monae.example_nqueens.html#d:12">d</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d">\notin</a></span> <span class="id"><a href="monae.example_nqueens.html#downs:8">downs</a></span>)<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079">,</a></span> (<span class="id"><a href="monae.example_nqueens.html#u:11">u</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.example_nqueens.html#upds:9">upds,</a></span> <span class="id"><a href="monae.example_nqueens.html#d:12">d</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.example_nqueens.html#downs:8">downs</a></span>)).<br/>
<br/>
<span class="vernacular">Section</span> <span id="nqueens_gibbons2011icfp.purely_functional" class="id">
  <a name="nqueens_gibbons2011icfp.purely_functional" class="">purely_functional</a>
</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="start1" class="id">
  <a name="start1" class="">start1</a>
</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span> <span id="updowns:13" class="id">
  <a name="updowns:13" class="">updowns</a>
</span> <span class="id">=&gt;</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true,</a></span> <span class="id"><a href="monae.example_nqueens.html#updowns:13">updowns</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="step1" class="id">
  <a name="step1" class="">step1</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z`2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span>) <span class="id">-&gt;</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span> <span id="cr:14" class="id">
  <a name="cr:14" class="">cr</a>
</span> <span class="id">'</span>(<span id="restOK:16" class="id">
  <a name="restOK:16" class="">restOK,</a>
</span> <span id="updowns:15" class="id">
  <a name="updowns:15" class="">updowns</a>
</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="thisOK:18" class="id">
  <a name="thisOK:18" class="">thisOK,</a>
</span> <span id="updowns':19" class="id">
  <a name="updowns':19" class="">updowns'</a>
</span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id"><a href="monae.example_nqueens.html#cr:14">cr</a></span> <span class="id"><a href="monae.example_nqueens.html#updowns:15">updowns</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.example_nqueens.html#thisOK:18">thisOK</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="monae.example_nqueens.html#restOK:16">restOK,</a></span> <span class="id"><a href="monae.example_nqueens.html#updowns':19">updowns'</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="safe1" class="id">
  <a name="safe1" class="">safe1</a>
</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z`2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#step1">step1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="monae.example_nqueens.html#start1">start1</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="queens" class="id">
  <a name="queens" class="">queens</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad}</a></span> <span id="n:21" class="id">
  <a name="n:21" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#M:20">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id"><a href="monae.example_nqueens.html#n:21">n</a></span>)) <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#assert">assert</a></span> (<span class="gallina-kwd">fun</span> <span id="x:22" class="id">
  <a name="x:22" class="">x</a>
</span> <span class="id">=&gt;</span> (<span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#empty">empty</a></span> (<span class="id"><a href="monae.example_nqueens.html#place">place</a></span> <span class="id"><a href="monae.example_nqueens.html#n:21">n</a></span> <span class="id"><a href="monae.example_nqueens.html#x:22">x</a></span>)).<span class="id">1</span>).<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.purely_functional">purely_functional</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="nqueens_gibbons2011icfp.statefully" class="id">
  <a name="nqueens_gibbons2011icfp.statefully" class="">statefully</a>
</span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="nqueens_gibbons2011icfp.statefully.M" class="id">
  <a name="nqueens_gibbons2011icfp.statefully.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadState.Exports.stateMonad">stateMonad</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="start2" class="id">
  <a name="start2" class="">start2</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="step2" class="id">
  <a name="step2" class="">step2</a>
</span> (<span id="cr:24" class="id">
  <a name="cr:24" class="">cr</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z`2</a></span>) (<span id="k:25" class="id">
  <a name="k:25" class="">k</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="b':26" class="id">
  <a name="b':26" class="">b'</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.example_nqueens.html#k:25">k</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="uds:27" class="id">
  <a name="uds:27" class="">uds</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b:28" class="id">
  <a name="b:28" class="">b,</a>
</span> <span id="uds':29" class="id">
  <a name="uds':29" class="">uds'</a>
</span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id"><a href="monae.example_nqueens.html#cr:24">cr</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:27">uds</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':29">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.example_nqueens.html#b:28">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="monae.example_nqueens.html#b':26">b'</a></span>))<span class="id">%Do</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="safe2" class="id">
  <a name="safe2" class="">safe2</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z`2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#step2">step2</a></span> <span class="id"><a href="monae.example_nqueens.html#start2">start2</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="safe2E" class="id">
  <a name="safe2E" class="">safe2E</a>
</span> <span id="crs:30" class="id">
  <a name="crs:30" class="">crs</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_nqueens.html#safe2">safe2</a></span> <span class="id"><a href="monae.example_nqueens.html#crs:30">crs</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="uds:31" class="id">
  <a name="uds:31" class="">uds</a>
</span> <span class="id">=&gt;</span> <span class="gallina-kwd">let</span> (<span id="ok:32" class="id">
  <a name="ok:32" class="">ok,</a>
</span> <span id="uds':33" class="id">
  <a name="uds':33" class="">uds'</a>
</span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:31">uds</a></span> <span class="id"><a href="monae.example_nqueens.html#crs:30">crs</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':33">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:32">ok</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
<span class="comment">(*&nbsp;TODO(rei):&nbsp;how&nbsp;to&nbsp;write&nbsp;this&nbsp;proof&nbsp;w.o.&nbsp;the&nbsp;"set"&nbsp;and&nbsp;"transitivity"'s?&nbsp;*)</span><br/>
<span class="id">apply/esym;</span> <span class="id">rewrite</span> <span class="id">/safe2</span>.<br/>
<span class="id">set</span> <span class="id">f</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="x:42" class="id"><span id="x:38" class="id"><span id="x:34" class="id">
  <a name="x:42" class="">x</a>
</span></span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="uds:43" class="id"><span id="uds:39" class="id"><span id="uds:35" class="id">
  <a name="uds:43" class="">uds</a>
</span></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">let</span> (<span id="ok:44" class="id"><span id="ok:40" class="id"><span id="ok:36" class="id">
  <a name="ok:44" class="">ok,</a>
</span></span></span> <span id="uds':45" class="id"><span id="uds':41" class="id"><span id="uds':37" class="id">
  <a name="uds':45" class="">uds'</a>
</span></span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:35">uds</a></span> <span class="id"><a href="monae.example_nqueens.html#x:34">x</a></span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':37">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:36">ok</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> <span class="id">-</span>(<span class="id">@foldr_universal_ext</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>) <span class="id">//;</span><br/>
&nbsp;&nbsp;<span class="id">[apply/esym|move=&gt;</span> <span class="id">cr</span> <span class="id">{}crs;</span> <span class="id">apply/esym]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/start2</span> <span class="id">/f</span> <span class="id">/=</span> <span class="id">-bindA</span> <span class="id"><a href="monae.hierarchy.html#getputskip">getputskip</a></span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span>.<br/>
<span class="comment">(*&nbsp;definition&nbsp;of&nbsp;safe1&nbsp;*)</span><br/>
<span class="id">transitivity</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="uds:49" class="id"><span id="uds:46" class="id">
  <a name="uds:49" class="">uds</a>
</span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="ok:50" class="id"><span id="ok:47" class="id">
  <a name="ok:50" class="">ok,</a>
</span></span> <span id="uds':51" class="id"><span id="uds':48" class="id">
  <a name="uds':51" class="">uds'</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#step1">step1</a></span> <span class="id">cr</span> (<span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span>  <span class="id"><a href="monae.example_nqueens.html#uds:46">uds</a></span> <span class="id">crs</span>) <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':48">uds'&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:47">ok</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
<span class="comment">(*&nbsp;introduce&nbsp;a&nbsp;let&nbsp;*)</span><br/>
<span class="id">transitivity</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="uds:57" class="id"><span id="uds:52" class="id">
  <a name="uds:57" class="">uds</a>
</span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b':58" class="id"><span id="b':53" class="id">
  <a name="b':58" class="">b',</a>
</span></span> <span id="uds'':59" class="id"><span id="uds'':54" class="id">
  <a name="uds'':59" class="">uds''</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:52">uds</a></span> <span class="id">crs</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="ok:60" class="id"><span id="ok:55" class="id">
  <a name="ok:60" class="">ok,</a>
</span></span> <span id="uds':61" class="id"><span id="uds':56" class="id">
  <a name="uds':61" class="">uds'</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#step1">step1</a></span> <span class="id">cr</span> (<span class="id"><a href="monae.example_nqueens.html#b':53">b',</a></span> <span class="id"><a href="monae.example_nqueens.html#uds'':54">uds''</a></span>) <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':56">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:55">ok</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span>.<br/>
<span class="comment">(*&nbsp;definition&nbsp;of&nbsp;step1&nbsp;*)</span><br/>
<span class="id">transitivity</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="uds:69" class="id"><span id="uds:62" class="id">
  <a name="uds:69" class="">uds</a>
</span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b':70" class="id"><span id="b':63" class="id">
  <a name="b':70" class="">b',</a>
</span></span> <span id="uds'':71" class="id"><span id="uds'':64" class="id">
  <a name="uds'':71" class="">uds''</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:62">uds</a></span> <span class="id">crs</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b:72" class="id"><span id="b:65" class="id">
  <a name="b:72" class="">b,</a>
</span></span> <span id="uds''':73" class="id"><span id="uds''':66" class="id">
  <a name="uds''':73" class="">uds'''</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id"><a href="monae.example_nqueens.html#uds'':64">uds''</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="ok:74" class="id"><span id="ok:67" class="id">
  <a name="ok:74" class="">ok,</a>
</span></span> <span id="uds':75" class="id"><span id="uds':68" class="id">
  <a name="uds':75" class="">uds'</a>
</span></span>) <span class="id">:=</span> (<span class="id"><a href="monae.example_nqueens.html#b:65">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="monae.example_nqueens.html#b':63">b',</a></span> <span class="id"><a href="monae.example_nqueens.html#uds''':66">uds'''</a></span>) <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':68">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:67">ok</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">/step1</span> <span class="id">/=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span>.<br/>
<span class="id">transitivity</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="uds:83" class="id"><span id="uds:76" class="id">
  <a name="uds:83" class="">uds</a>
</span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b':84" class="id"><span id="b':77" class="id">
  <a name="b':84" class="">b',</a>
</span></span> <span id="uds'':85" class="id"><span id="uds'':78" class="id">
  <a name="uds'':85" class="">uds''</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:76">uds</a></span> <span class="id">crs</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b:86" class="id"><span id="b:79" class="id">
  <a name="b:86" class="">b,</a>
</span></span> <span id="uds''':87" class="id"><span id="uds''':80" class="id">
  <a name="uds''':87" class="">uds'''</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id"><a href="monae.example_nqueens.html#uds'':78">uds''</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="ok:88" class="id"><span id="ok:81" class="id">
  <a name="ok:88" class="">ok,</a>
</span></span> <span id="uds':89" class="id"><span id="uds':82" class="id">
  <a name="uds':89" class="">uds'</a>
</span></span>) <span class="id">:=</span> (<span class="id"><a href="monae.example_nqueens.html#b:79">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="monae.example_nqueens.html#b':77">b',</a></span> <span class="id"><a href="monae.example_nqueens.html#uds''':80">uds'''</a></span>) <span class="gallina-kwd">in</span> (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds'':78">uds''</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':82">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:81">ok</a></span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">a</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#putput">putput</a></span>.<br/>
<span class="comment">(*&nbsp;move&nbsp;two&nbsp;of&nbsp;the&nbsp;lets&nbsp;*)</span><br/>
<span class="id">transitivity</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="uds:97" class="id"><span id="uds:90" class="id">
  <a name="uds:97" class="">uds</a>
</span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b':98" class="id"><span id="b':91" class="id">
  <a name="b':98" class="">b',</a>
</span></span> <span id="uds'':99" class="id"><span id="uds'':92" class="id">
  <a name="uds'':99" class="">uds''</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:90">uds</a></span> <span class="id">crs</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds'':92">uds''</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b:100" class="id"><span id="b:93" class="id">
  <a name="b:100" class="">b,</a>
</span></span> <span id="uds''':101" class="id"><span id="uds''':94" class="id">
  <a name="uds''':101" class="">uds'''</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id"><a href="monae.example_nqueens.html#uds'':92">uds''</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="ok:102" class="id"><span id="ok:95" class="id">
  <a name="ok:102" class="">ok,</a>
</span></span> <span id="uds':103" class="id"><span id="uds':96" class="id">
  <a name="uds':103" class="">uds'</a>
</span></span>) <span class="id">:=</span> (<span class="id"><a href="monae.example_nqueens.html#b:93">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="monae.example_nqueens.html#b':91">b',</a></span> <span class="id"><a href="monae.example_nqueens.html#uds''':94">uds'''</a></span>) <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':96">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:95">ok</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">a</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">transitivity</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="uds:112" class="id"><span id="uds:104" class="id">
  <a name="uds:112" class="">uds</a>
</span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b':113" class="id"><span id="b':105" class="id">
  <a name="b':113" class="">b',</a>
</span></span> <span id="uds'':114" class="id"><span id="uds'':106" class="id">
  <a name="uds'':114" class="">uds''</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:104">uds</a></span> <span class="id">crs</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds'':106">uds''</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="uds4:115" class="id"><span id="uds4:107" class="id">
  <a name="uds4:115" class="">uds4</a>
</span></span>  <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b:116" class="id"><span id="b:108" class="id">
  <a name="b:116" class="">b,</a>
</span></span> <span id="uds''':117" class="id"><span id="uds''':109" class="id">
  <a name="uds''':117" class="">uds'''</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id"><a href="monae.example_nqueens.html#uds4:107">uds4</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="ok:118" class="id"><span id="ok:110" class="id">
  <a name="ok:118" class="">ok,</a>
</span></span> <span id="uds':119" class="id"><span id="uds':111" class="id">
  <a name="uds':119" class="">uds'</a>
</span></span>) <span class="id">:=</span> (<span class="id"><a href="monae.example_nqueens.html#b:108">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="monae.example_nqueens.html#b':105">b',</a></span> <span class="id"><a href="monae.example_nqueens.html#uds''':109">uds'''</a></span>) <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':111">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:110">ok</a></span>))) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-bindA</span> <span class="id"><a href="monae.state_lib.html#putgetput">putgetput</a></span>.<br/>
<span class="id">transitivity</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span><br/>
&nbsp;&nbsp;&nbsp;<span id="b':132" class="id"><span id="b':123" class="id">
  <a name="b':132" class="">b'</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="uds:129" class="id"><span id="uds:120" class="id">
  <a name="uds:129" class="">uds</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="gallina-kwd">let</span> (<span id="ok:130" class="id"><span id="ok:121" class="id">
  <a name="ok:130" class="">ok,</a>
</span></span> <span id="uds'':131" class="id"><span id="uds'':122" class="id">
  <a name="uds'':131" class="">uds''</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:120">uds</a></span> <span class="id">crs</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds'':122">uds''</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:121">ok</a></span>) <span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="uds'''':133" class="id"><span id="uds'''':124" class="id">
  <a name="uds'''':133" class="">uds''''</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b:134" class="id"><span id="b:125" class="id">
  <a name="b:134" class="">b,</a>
</span></span> <span id="uds''':135" class="id"><span id="uds''':126" class="id">
  <a name="uds''':135" class="">uds'''</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id"><a href="monae.example_nqueens.html#uds'''':124">uds''''</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="ok:136" class="id"><span id="ok:127" class="id">
  <a name="ok:136" class="">ok,</a>
</span></span> <span id="uds':137" class="id"><span id="uds':128" class="id">
  <a name="uds':137" class="">uds'</a>
</span></span>) <span class="id">:=</span> (<span class="id"><a href="monae.example_nqueens.html#b:125">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="monae.example_nqueens.html#b':123">b',</a></span> <span class="id"><a href="monae.example_nqueens.html#uds''':126">uds'''</a></span>) <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':128">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:127">ok</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully.M">M</a></span> <span class="id">_</span>)<span class="id">%Do;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.statefully">statefully</a></span>.<br/>
<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.example_nqueens.html#step2">step2</a></span> <span class="id">{M}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.example_nqueens.html#safe2">safe2</a></span> <span class="id">{M}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.example_nqueens.html#start2">start2</a></span> <span class="id">{M}</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="nqueens_gibbons2011icfp.safe_reification" class="id">
  <a name="nqueens_gibbons2011icfp.safe_reification" class="">safe_reification</a>
</span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="nqueens_gibbons2011icfp.safe_reification.M" class="id">
  <a name="nqueens_gibbons2011icfp.safe_reification.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadStateReify.Exports.stateReifyMonad">stateReifyMonad</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="reify_safe2" class="id">
  <a name="reify_safe2" class="">reify_safe2</a>
</span> <span id="crs:139" class="id">
  <a name="crs:139" class="">crs</a>
</span> <span id="updowns:140" class="id">
  <a name="updowns:140" class="">updowns</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#reify">reify</a></span> (<span class="id"><a href="monae.example_nqueens.html#safe2">safe2</a></span> <span class="id"><a href="monae.example_nqueens.html#crs:139">crs</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.safe_reification.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="monae.example_nqueens.html#updowns:140">updowns</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#updowns:140">updowns</a></span> <span class="id"><a href="monae.example_nqueens.html#crs:139">crs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
<span class="id">rewrite</span> <span class="id"><a href="monae.example_nqueens.html#safe2E">safe2E</a></span> <span class="id"><a href="monae.hierarchy.html#reifybind">reifybind</a></span> <span class="id"><a href="monae.hierarchy.html#reifyget">reifyget;</a></span> <span class="id">case:</span> <span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id">=&gt;</span> <span class="id">a</span> <span class="id">b</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#reifybind">reifybind</a></span> <span class="id"><a href="monae.hierarchy.html#reifyput">reifyput</a></span> <span class="id"><a href="monae.hierarchy.html#reifyret">reifyret</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.safe_reification">safe_reification</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="nqueens_gibbons2011icfp.queens_statefully_nondeterministically" class="id">
  <a name="nqueens_gibbons2011icfp.queens_statefully_nondeterministically" class="">queens_statefully_nondeterministically</a>
</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">do_notation</span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="nqueens_gibbons2011icfp.queens_statefully_nondeterministically.M" class="id">
  <a name="nqueens_gibbons2011icfp.queens_statefully_nondeterministically.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="queens_state_nondeter" class="id">
  <a name="queens_state_nondeter" class="">queens_state_nondeter</a>
</span> <span id="n:142" class="id">
  <a name="n:142" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.queens_statefully_nondeterministically.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="s:143" class="id">
  <a name="s:143" class="">s</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="rs:144" class="id">
  <a name="rs:144" class="">rs</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id"><a href="monae.example_nqueens.html#n:142">n</a></span>))<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#empty">empty</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="ok:145" class="id">
  <a name="ok:145" class="">ok</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.example_nqueens.html#safe2">safe2</a></span> (<span class="id"><a href="monae.example_nqueens.html#place">place</a></span> <span class="id"><a href="monae.example_nqueens.html#n:142">n</a></span> <span class="id"><a href="monae.example_nqueens.html#rs:144">rs</a></span>) <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#s:143">s</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:145">ok</a></span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#rs:144">rs</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="queensE" class="id">
  <a name="queensE" class="">queensE</a>
</span> <span id="n:146" class="id">
  <a name="n:146" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#queens">queens</a></span> <span class="id"><a href="monae.example_nqueens.html#n:146">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_nqueens.html#queens_state_nondeter">queens_state_nondeter</a></span> <span class="id"><a href="monae.example_nqueens.html#n:146">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
<span class="id">rewrite</span> (<span class="id"><a href="monae.state_lib.html#getput_prepend">getput_prepend</a></span> (<span class="id"><a href="monae.example_nqueens.html#queens">queens</a></span> <span class="id">n</span>)) <span class="id">/queens_state_nondeter;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
<span class="id">rewrite</span> <span class="id">{1}/queens</span> <span class="id"><a href="monae.state_lib.html#putpermsC">putpermsC;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.example_nqueens.html#safe2E">safe2E</a></span>.<br/>
<span class="id">set</span> <span class="id">f</span> <span class="id">:=</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="ok:147" class="id">
  <a name="ok:147" class="">ok</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id">_;</span> <span class="id">_</span>)<span class="id">;</span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:147">ok</a></span> <span class="gallina-kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>).<br/>
<span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">f</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="uds:150" class="id"><span id="uds:149" class="id"><span id="uds:148" class="id">
  <a name="uds:150" class="">uds</a>
</span></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:148">uds</a></span> (<span class="id"><a href="monae.example_nqueens.html#place">place</a></span> <span class="id">n</span> <span class="id">y</span>)).<span class="id">2</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:148">uds</a></span> (<span class="id"><a href="monae.example_nqueens.html#place">place</a></span> <span class="id">n</span> <span class="id">y</span>)).<span class="id">1</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id">x</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:148">uds</a></span> (<span class="id"><a href="monae.example_nqueens.html#place">place</a></span> <span class="id">n</span> <span class="id">y</span>)).<span class="id">1</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">{}/f</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">u</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> (<span class="id"><a href="monae.example_nqueens.html#safe1">safe1</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span> <span class="id">a</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">2!bindA</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#assertE">assertE</a></span> <span class="id">-bindA;</span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id">_</span>).<br/>
<span class="id">rewrite</span> <span class="id">-bindA</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#putgetput">putgetput</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">2!bindA</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-2!bindA</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">2!putput</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.queens_statefully_nondeterministically">queens_statefully_nondeterministically</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.example_nqueens.html#queens_state_nondeter">queens_state_nondeter</a></span> <span class="id">{M}</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="nqueens_gibbons2011icfp.queens_exploratively" class="id">
  <a name="nqueens_gibbons2011icfp.queens_exploratively" class="">queens_exploratively</a>
</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">do_notation</span>.<br/>
<span class="vernacular">Variable</span> <span id="nqueens_gibbons2011icfp.queens_exploratively.M" class="id">
  <a name="nqueens_gibbons2011icfp.queens_exploratively.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">`2</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="queens_explor" class="id">
  <a name="queens_explor" class="">queens_explor</a>
</span> <span id="n:152" class="id">
  <a name="n:152" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.queens_exploratively.M">M</a></span> <span class="id">_</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="s:153" class="id">
  <a name="s:153" class="">s</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="rs:154" class="id">
  <a name="rs:154" class="">rs</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id"><a href="monae.example_nqueens.html#n:152">n</a></span>))<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#empty">empty</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="ok:155" class="id">
  <a name="ok:155" class="">ok</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.example_nqueens.html#safe2">safe2</a></span> (<span class="id"><a href="monae.example_nqueens.html#place">place</a></span> <span class="id"><a href="monae.example_nqueens.html#n:152">n</a></span> <span class="id"><a href="monae.example_nqueens.html#rs:154">rs</a></span>) <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:155">ok</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#s:153">s</a></span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#rs:154">rs</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="queens_explorE" class="id">
  <a name="queens_explorE" class="">queens_explorE</a>
</span> <span id="n:156" class="id">
  <a name="n:156" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#queens_explor">queens_explor</a></span> <span class="id"><a href="monae.example_nqueens.html#n:156">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.example_nqueens.html#queens_state_nondeter">queens_state_nondeter</a></span> <span class="id"><a href="monae.example_nqueens.html#n:156">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
<span class="id">rewrite</span> <span class="id">/queens_explor</span> <span class="id">/queens_state_nondeter</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y</span>.<br/>
<span class="id">rewrite</span> <span class="id">2!bindA</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">z</span>.<br/>
<span class="id">rewrite</span> <span class="id">2!bindA</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">u</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#guardsC">guardsC;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">2!bindA</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#assertE">assertE</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="safe3" class="id">
  <a name="safe3" class="">safe3</a>
</span> <span id="crs:157" class="id">
  <a name="crs:157" class="">crs</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.queens_exploratively.M">M</a></span> <span class="id">_</span> <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#safe2">safe2</a></span> <span class="id"><a href="monae.example_nqueens.html#crs:157">crs</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="gallina-kwd">fun</span> <span id="b:158" class="id">
  <a name="b:158" class="">b</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.example_nqueens.html#b:158">b</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="queens_safe3" class="id">
  <a name="queens_safe3" class="">queens_safe3</a>
</span> <span id="n:159" class="id">
  <a name="n:159" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.queens_exploratively.M">M</a></span> <span class="id">_</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="s:160" class="id">
  <a name="s:160" class="">s</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="rs:161" class="id">
  <a name="rs:161" class="">rs</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id"><a href="monae.example_nqueens.html#n:159">n</a></span>)) <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#empty">empty</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.example_nqueens.html#safe3">safe3</a></span> (<span class="id"><a href="monae.example_nqueens.html#place">place</a></span> <span class="id"><a href="monae.example_nqueens.html#n:159">n</a></span> <span class="id"><a href="monae.example_nqueens.html#rs:161">rs</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#s:160">s</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.example_nqueens.html#rs:161">rs</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="queens_safe3E" class="id">
  <a name="queens_safe3E" class="">queens_safe3E</a>
</span> <span id="n:162" class="id">
  <a name="n:162" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#queens_safe3">queens_safe3</a></span> <span class="id"><a href="monae.example_nqueens.html#n:162">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.example_nqueens.html#queens_explor">queens_explor</a></span> <span class="id"><a href="monae.example_nqueens.html#n:162">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.queens_exploratively.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
<span class="id">rewrite</span> <span class="id">/queens_safe3</span> <span class="id">/queens_explor;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y</span>.<br/>
<span class="id">rewrite</span> <span class="id">3!bindA</span>.<br/>
<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindA</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="step3" class="id">
  <a name="step3" class="">step3</a>
</span> <span id="B:163" class="id">
  <a name="B:163" class="">B</a>
</span> <span id="cr:164" class="id">
  <a name="cr:164" class="">cr</a>
</span> (<span id="m:165" class="id">
  <a name="m:165" class="">m</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.queens_exploratively.M">M</a></span> <span class="id"><a href="monae.example_nqueens.html#B:163">B</a></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#m:165">m</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="uds:166" class="id">
  <a name="uds:166" class="">uds</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="gallina-kwd">let</span> (<span id="b:167" class="id">
  <a name="b:167" class="">b,</a>
</span> <span id="uds':168" class="id">
  <a name="uds':168" class="">uds'</a>
</span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id"><a href="monae.example_nqueens.html#cr:164">cr</a></span> <span class="id"><a href="monae.example_nqueens.html#uds:166">uds</a></span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':168">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.example_nqueens.html#b:167">b</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="safe3E" class="id">
  <a name="safe3E" class="">safe3E</a>
</span> <span id="crs:169" class="id">
  <a name="crs:169" class="">crs</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_nqueens.html#safe3">safe3</a></span> <span class="id"><a href="monae.example_nqueens.html#crs:169">crs</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> (<span class="id">@step3</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) <span class="id"><a href="monae.hierarchy.html#skip">skip</a></span> <span class="id"><a href="monae.example_nqueens.html#crs:169">crs</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.queens_exploratively.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="comment">(*&nbsp;TODO(rei):&nbsp;how&nbsp;to&nbsp;write&nbsp;this&nbsp;proof&nbsp;w.o.&nbsp;the&nbsp;"set"&nbsp;and&nbsp;"transitivity"'s?&nbsp;*)</span><br/>
<span class="id">transitivity</span> (((<span class="gallina-kwd">fun</span> <span id="x:171" class="id"><span id="x:170" class="id">
  <a name="x:171" class="">x</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.example_nqueens.html#x:170">x</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.queens_exploratively.M">M</a></span> <span class="id">_</span>)) <span class="id">\o</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#step2">step2</a></span> <span class="id"><a href="monae.example_nqueens.html#start2">start2</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crs</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="monae.monae_lib.html#foldr_fusion_ext">foldr_fusion_ext</a></span> <span class="id">=&gt;</span> <span class="id">[|cr</span> <span class="id">{crs}k]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">/safe3</span> <span class="id">/=</span> <span class="id">/start2</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span>.<br/>
<span class="id">transitivity</span> ((<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="b':176" class="id"><span id="b':172" class="id">
  <a name="b':176" class="">b'</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id">k</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="uds:177" class="id"><span id="uds:173" class="id">
  <a name="uds:177" class="">uds</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b:178" class="id"><span id="b:174" class="id">
  <a name="b:178" class="">b,</a>
</span></span> <span id="uds':179" class="id"><span id="uds':175" class="id">
  <a name="uds':179" class="">uds'</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id"><a href="monae.example_nqueens.html#uds:173">uds</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':175">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.example_nqueens.html#b:174">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="monae.example_nqueens.html#b':172">b'</a></span>)) <span class="id">&gt;&gt;=</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/step2</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="b':184" class="id"><span id="b':180" class="id">
  <a name="b':184" class="">b'</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id">k</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="uds:185" class="id"><span id="uds:181" class="id">
  <a name="uds:185" class="">uds</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b:186" class="id"><span id="b:182" class="id">
  <a name="b:186" class="">b,</a>
</span></span> <span id="uds':187" class="id"><span id="uds':183" class="id">
  <a name="uds':187" class="">uds'</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id"><a href="monae.example_nqueens.html#uds:181">uds</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':183">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.example_nqueens.html#b:182">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="monae.example_nqueens.html#b':180">b'</a></span>)).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;by&nbsp;"do-notation"&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> (<span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id">y</span>) <span class="id">=&gt;</span> <span class="id">a</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="b':192" class="id"><span id="b':188" class="id">
  <a name="b':192" class="">b'</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id">k</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="uds:193" class="id"><span id="uds:189" class="id">
  <a name="uds:193" class="">uds</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b:194" class="id"><span id="b:190" class="id">
  <a name="b:194" class="">b,</a>
</span></span> <span id="uds':195" class="id"><span id="uds':191" class="id">
  <a name="uds':195" class="">uds'</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id"><a href="monae.example_nqueens.html#uds:189">uds</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':191">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.example_nqueens.html#b:190">b</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.example_nqueens.html#b':188">b'</a></span>).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> (<span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id">y</span>) <span class="id">=&gt;</span> <span class="id">a</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#guard_and">guard_and</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="b':200" class="id"><span id="b':196" class="id">
  <a name="b':200" class="">b'</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id">k</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.example_nqueens.html#b':196">b'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="uds:201" class="id"><span id="uds:197" class="id">
  <a name="uds:201" class="">uds</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b:202" class="id"><span id="b:198" class="id">
  <a name="b:202" class="">b,</a>
</span></span> <span id="uds':203" class="id"><span id="uds':199" class="id">
  <a name="uds':203" class="">uds'</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id"><a href="monae.example_nqueens.html#uds:197">uds</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':199">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.example_nqueens.html#b:198">b</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">b'</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#guardsC">guardsC;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">=&gt;</span> <span class="id">h</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">2!bindA</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-guard_and</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbC">andbC</a></span> <span class="id"><a href="monae.hierarchy.html#guard_and">guard_and</a></span> <span class="id"><a href="monae.hierarchy.html#guardsC">guardsC</a></span> <span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
<span class="id">transitivity</span> ((<span class="id">k</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span>) <span class="id">&gt;&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="uds:207" class="id"><span id="uds:204" class="id">
  <a name="uds:207" class="">uds</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="b:208" class="id"><span id="b:205" class="id">
  <a name="b:208" class="">b,</a>
</span></span> <span id="uds':209" class="id"><span id="uds':206" class="id">
  <a name="uds':209" class="">uds'</a>
</span></span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#test">test</a></span> <span class="id">cr</span> <span class="id"><a href="monae.example_nqueens.html#uds:204">uds</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.example_nqueens.html#uds':206">uds'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.example_nqueens.html#b:205">b</a></span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp.queens_exploratively">queens_exploratively</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_gibbons2011icfp">nqueens_gibbons2011icfp</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="nqueens_mu2019tr3" class="id">
  <a name="nqueens_mu2019tr3" class="">nqueens_mu2019tr3</a>
</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="nqueens_mu2019tr3.queens_definition" class="id">
  <a name="nqueens_mu2019tr3.queens_definition" class="">queens_definition</a>
</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="ups" class="id">
  <a name="ups" class="">ups</a>
</span> <span id="s:210" class="id">
  <a name="s:210" class="">s</a>
</span> <span id="i:211" class="id">
  <a name="i:211" class="">i</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.monae_lib.html#zipWith">zipWith</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Zplus">Zplus</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id"><a href="monae.example_nqueens.html#i:211">i</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.example_nqueens.html#s:210">s</a></span>))) <span class="id"><a href="monae.example_nqueens.html#s:210">s</a></span>.<br/>
<span class="vernacular">Definition</span> <span id="downs" class="id">
  <a name="downs" class="">downs</a>
</span> <span id="s:212" class="id">
  <a name="s:212" class="">s</a>
</span> <span id="i:213" class="id">
  <a name="i:213" class="">i</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.monae_lib.html#zipWith">zipWith</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Zminus">Zminus</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id"><a href="monae.example_nqueens.html#i:213">i</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.example_nqueens.html#s:212">s</a></span>))) <span class="id"><a href="monae.example_nqueens.html#s:212">s</a></span>.<br/>
<span class="vernacular">Definition</span> <span id="safe" class="id">
  <a name="safe" class="">safe</a>
</span> <span id="s:214" class="id">
  <a name="s:214" class="">s</a>
</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#uniq">uniq</a></span> (<span class="id"><a href="monae.example_nqueens.html#ups">ups</a></span> <span class="id"><a href="monae.example_nqueens.html#s:214">s</a></span> <span class="id">0</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#uniq">uniq</a></span> (<span class="id"><a href="monae.example_nqueens.html#downs">downs</a></span> <span class="id"><a href="monae.example_nqueens.html#s:214">s</a></span> <span class="id">0</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="queens_example" class="id">
  <a name="queens_example" class="">queens_example</a>
</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">3;</span> <span class="id">5;</span> <span class="id">7;</span> <span class="id">1;</span> <span class="id">6;</span> <span class="id">0;</span> <span class="id">2;</span> <span class="id">4]%Z</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="mu_queens" class="id">
  <a name="mu_queens" class="">mu_queens</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad}</a></span> <span id="n:216" class="id">
  <a name="n:216" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#M:215">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id"><a href="monae.example_nqueens.html#n:216">n</a></span>)) <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.hierarchy.html#assert">assert</a></span> <span class="id"><a href="monae.example_nqueens.html#safe">safe</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="safeAcc" class="id">
  <a name="safeAcc" class="">safeAcc</a>
</span> <span id="i:217" class="id">
  <a name="i:217" class="">i</a>
</span> (<span id="us:218" class="id">
  <a name="us:218" class="">us</a>
</span> <span id="ds:219" class="id">
  <a name="ds:219" class="">ds</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="xs:220" class="id">
  <a name="xs:220" class="">xs</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="us':221" class="id">
  <a name="us':221" class="">us'</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#ups">ups</a></span> <span class="id"><a href="monae.example_nqueens.html#xs:220">xs</a></span> <span class="id"><a href="monae.example_nqueens.html#i:217">i</a></span> <span class="gallina-kwd">in</span> <span class="gallina-kwd">let</span> <span id="ds':222" class="id">
  <a name="ds':222" class="">ds'</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#downs">downs</a></span> <span class="id"><a href="monae.example_nqueens.html#xs:220">xs</a></span> <span class="id"><a href="monae.example_nqueens.html#i:217">i</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#uniq">uniq</a></span> <span class="id"><a href="monae.example_nqueens.html#us':221">us'</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#uniq">uniq</a></span> <span class="id"><a href="monae.example_nqueens.html#ds':222">ds'</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> (<span class="gallina-kwd">fun</span> <span id="x:223" class="id">
  <a name="x:223" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.example_nqueens.html#x:223">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d">\notin</a></span> <span class="id"><a href="monae.example_nqueens.html#us:218">us</a></span>) <span class="id"><a href="monae.example_nqueens.html#us':221">us'</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> (<span class="gallina-kwd">fun</span> <span id="x:224" class="id">
  <a name="x:224" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.example_nqueens.html#x:224">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d">\notin</a></span> <span class="id"><a href="monae.example_nqueens.html#ds:219">ds</a></span>) <span class="id"><a href="monae.example_nqueens.html#ds':222">ds'</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="safeE" class="id">
  <a name="safeE" class="">safeE</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#safe">safe</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#876aa133fb3472bffd492f74ff496035">=1</a></span> <span class="id"><a href="monae.example_nqueens.html#safeAcc">safeAcc</a></span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
<span class="id">move=&gt;</span> <span class="id">s;</span> <span class="id">rewrite</span> <span class="id">/safe</span> <span class="id">/safeAcc</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#sub_all">sub_all</a></span> <span class="id">_</span> (<span class="id">@all_predT</span> <span class="id">_</span> <span class="id">_</span>)) <span class="id">//</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#sub_all">sub_all</a></span> <span class="id">_</span> (<span class="id">@all_predT</span> <span class="id">_</span> <span class="id">_</span>)) <span class="id">//</span> <span class="id">!andbT</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="queens_ok" class="id">
  <a name="queens_ok" class="">queens_ok</a>
</span> (<span id="i_xus_yds:225" class="id">
  <a name="i_xus_yds:225" class="">i_xus_yds</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">let:</span> (<span class="id">_,</span> <span class="id">xus,</span> <span class="id">yds</span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#i_xus_yds:225">i_xus_yds</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">xus,</span> <span class="id">yds</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">us,</span> <span class="id">y</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">ds</span> <span class="id">=&gt;</span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d">\notin</a></span> <span class="id">us</span>) <span class="id">&amp;&amp;</span> (<span class="id">y</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d">\notin</a></span> <span class="id">ds</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="queens_next" class="id">
  <a name="queens_next" class="">queens_next</a>
</span> <span id="i_us_ds:229" class="id">
  <a name="i_us_ds:229" class="">i_us_ds</a>
</span> <span id="x:230" class="id">
  <a name="x:230" class="">x</a>
</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">let:</span> (<span class="id">i,</span> <span class="id">us,</span> <span class="id">ds</span>) <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#i_us_ds:229">i_us_ds</a></span> <span class="gallina-kwd">in</span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1,</span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="monae.example_nqueens.html#x:230">x</a></span>) <span class="id">::</span> <span class="id">us,</span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="monae.example_nqueens.html#x:230">x</a></span>) <span class="id">::</span> <span class="id">ds</span>)<span class="id">%Z</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="safeAcc_scanl" class="id">
  <a name="safeAcc_scanl" class="">safeAcc_scanl</a>
</span> <span id="i:232" class="id">
  <a name="i:232" class="">i</a>
</span> (<span id="us:233" class="id">
  <a name="us:233" class="">us</a>
</span> <span id="ds:234" class="id">
  <a name="ds:234" class="">ds</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="ok:236" class="id">
  <a name="ok:236" class="">ok</a>
</span> <span id="i_xus_yds:235" class="id">
  <a name="i_xus_yds:235" class="">i_xus_yds</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#queens_ok">queens_ok</a></span> <span class="id"><a href="monae.example_nqueens.html#i_xus_yds:235">i_xus_yds</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="op:239" class="id">
  <a name="op:239" class="">op</a>
</span> <span id="i_us_ds:237" class="id">
  <a name="i_us_ds:237" class="">i_us_ds</a>
</span> <span id="x:238" class="id">
  <a name="x:238" class="">x</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.example_nqueens.html#queens_next">queens_next</a></span> <span class="id"><a href="monae.example_nqueens.html#i_us_ds:237">i_us_ds</a></span> <span class="id"><a href="monae.example_nqueens.html#x:238">x</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.example_nqueens.html#ok:236">ok</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#scanl">scanl</a></span> <span class="id"><a href="monae.example_nqueens.html#op:239">op</a></span> (<span class="id"><a href="monae.example_nqueens.html#i:232">i,</a></span> <span class="id"><a href="monae.example_nqueens.html#us:233">us,</a></span> <span class="id"><a href="monae.example_nqueens.html#ds:234">ds</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="safeAccE" class="id">
  <a name="safeAccE" class="">safeAccE</a>
</span> <span id="i:240" class="id">
  <a name="i:240" class="">i</a>
</span> <span id="a:241" class="id">
  <a name="a:241" class="">a</a>
</span> <span id="b:242" class="id">
  <a name="b:242" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#safeAcc">safeAcc</a></span> <span class="id"><a href="monae.example_nqueens.html#i:240">i</a></span> <span class="id"><a href="monae.example_nqueens.html#a:241">a</a></span> <span class="id"><a href="monae.example_nqueens.html#b:242">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#876aa133fb3472bffd492f74ff496035">=1</a></span> <span class="id"><a href="monae.example_nqueens.html#safeAcc_scanl">safeAcc_scanl</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id"><a href="monae.example_nqueens.html#i:240">i</a></span>) <span class="id"><a href="monae.example_nqueens.html#a:241">a</a></span> <span class="id"><a href="monae.example_nqueens.html#b:242">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
<span class="id">move=&gt;</span> <span class="id">s;</span> <span class="id">elim:</span> <span class="id">s</span> <span class="id">i</span> <span class="id">a</span> <span class="id">b</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t</span> <span class="id">IH</span> <span class="id">i</span> <span class="id">a</span> <span class="id">b</span>.<br/>
<span class="id">rewrite</span> <span class="id">/safeAcc_scanl</span> <span class="id">/=</span>.<br/>
<span class="id">move:</span> (<span class="id">IH</span> <span class="id">i</span>.<span class="id">+1</span> ((<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">h</span>) <span class="id">::</span> <span class="id">a</span>) ((<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">h</span>) <span class="id">::</span> <span class="id">b</span>))<span class="id">%Z</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">i</span>.<span class="id">+1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">i</span>) <span class="id">+</span> <span class="id">1</span>)<span class="id">%Z;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-addn1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.Znat.html#Nat2Z.inj_add">Nat2Z.inj_add</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/safeAcc_scanl</span> <span class="id">=&gt;</span> <span class="id">/=</span> <span class="id">&lt;-</span>.<br/>
<span class="id">rewrite</span> <span class="id">/safeAcc</span> <span class="id">/=</span> <span class="id">!andbA</span> <span class="id">/zipWith</span> <span class="id">/=</span>.<br/>
<span class="id">set</span> <span class="id">A</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#uniq">uniq</a></span> <span class="id">_</span>. <span class="id">set</span> <span class="id">B</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#uniq">uniq</a></span> <span class="id">_</span>. <span class="id">set</span> <span class="id">sa</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id">_</span> <span class="id">_</span>. <span class="id">set</span> <span class="id">sb</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id">_</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> <span class="id">-![in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]andbA</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]andbC</a></span>.<br/>
<span class="id">do</span> <span class="id">2</span> <span class="id">rewrite</span> <span class="id">-![in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]andbA</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]andbC</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-!andbA;</span> <span class="id">congr</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#andb">andb</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]andbC</a></span> <span class="id">-!andbA;</span> <span class="id">congr</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#andb">andb</a></span>.<br/>
<span class="id">do</span> <span class="id">2</span> <span class="id">rewrite</span> <span class="id">![in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]andbA</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]andbC</a></span>.<br/>
<span class="id">congr</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#andb">andb</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]andbCA</a></span> <span class="id">-![in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]andbA;</a></span> <span class="id">congr</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#andb">andb</a></span>.<br/>
<span class="id">have</span> <span class="id">H</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> (<span id="op:243" class="id">
  <a name="op:243" class="">op</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span id="y:244" class="id">
  <a name="y:244" class="">y</a>
</span> <span id="s:245" class="id">
  <a name="s:245" class="">s,</a>
</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> (<span class="gallina-kwd">fun</span> <span id="x:246" class="id">
  <a name="x:246" class="">x</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.example_nqueens.html#x:246">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d">\notin</a></span> <span class="id"><a href="monae.example_nqueens.html#op:243">op</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">i</span>) <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.example_nqueens.html#y:244">y</a></span>) <span class="id"><a href="monae.example_nqueens.html#s:245">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> (<span class="gallina-kwd">fun</span> <span id="x:247" class="id">
  <a name="x:247" class="">x</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.example_nqueens.html#x:247">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d">\notin</a></span> <span class="id"><a href="monae.example_nqueens.html#y:244">y</a></span>) <span class="id"><a href="monae.example_nqueens.html#s:245">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> (<span class="id"><a href="monae.example_nqueens.html#op:243">op</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">i</span>) <span class="id">h</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d">\notin</a></span> <span class="id"><a href="monae.example_nqueens.html#s:245">s</a></span>).<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span> <span class="id">op</span> <span class="id">y;</span> <span class="id">elim</span> <span class="id">=&gt;</span> <span class="id">//=</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">ih</span> <span class="id">/=;</span> <span class="id">rewrite</span> <span class="id">ih</span> <span class="id">!inE</span> <span class="id">!negb_or</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-andbA</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbCA">andbCA</a></span> <span class="id">!andbA;</span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">-!andbA;</span> <span class="id">congr</span>(<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x">&amp;&amp;</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbC">andbC</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eq_sym">eq_sym</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbA">andbA</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbCA">andbCA</a></span> <span class="id">-!andbA</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbCA">andbCA</a></span> <span class="id">!andbA</span> <span class="id">-H</span> <span class="id">-andbA</span> <span class="id">-H</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="mu_queensE" class="id">
  <a name="mu_queensE" class="">mu_queensE</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad}</a></span> <span id="n:249" class="id">
  <a name="n:249" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#mu_queens">mu_queens</a></span> <span class="id"><a href="monae.example_nqueens.html#n:249">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id"><a href="monae.example_nqueens.html#n:249">n</a></span>)) <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.hierarchy.html#assert">assert</a></span> (<span class="id"><a href="monae.example_nqueens.html#safeAcc_scanl">safeAcc_scanl</a></span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.example_nqueens.html#M:248">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
<span class="id">rewrite</span> <span class="id">/mu_queens;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#assertE">assertE</a></span> (<span class="id"><a href="monae.example_nqueens.html#safeE">safeE</a></span> <span class="id">s</span>) <span class="id"><a href="monae.example_nqueens.html#safeAccE">safeAccE</a></span> <span class="id">-assertE</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.queens_definition">queens_definition</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="nqueens_mu2019tr3.section5a" class="id">
  <a name="nqueens_mu2019tr3.section5a" class="">section5a</a>
</span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="nqueens_mu2019tr3.section5a.M" class="id">
  <a name="nqueens_mu2019tr3.section5a.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">%type</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="opdot_queens" class="id">
  <a name="opdot_queens" class="">opdot_queens</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.section5a.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.section5a.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span> <span class="id"><a href="monae.state_lib.html#opdot">opdot</a></span> <span class="id"><a href="monae.example_nqueens.html#queens_next">queens_next</a></span> <span class="id"><a href="monae.example_nqueens.html#queens_ok">queens_ok</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="corollary45" class="id">
  <a name="corollary45" class="">corollary45</a>
</span> <span id="s:251" class="id">
  <a name="s:251" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#assert">assert</a></span> (<span class="id"><a href="monae.example_nqueens.html#safeAcc_scanl">safeAcc_scanl</a></span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.example_nqueens.html#s:251">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.state_lib.html#protect">protect</a></span> (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id">0%Z,</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#opdot_queens">opdot_queens</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.example_nqueens.html#s:251">s</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
<span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#assert_all_scanl">assert_all_scanl</a></span>. <span class="comment">(*&nbsp;NB:&nbsp;uses&nbsp;theorem&nbsp;4.1&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id">/protect;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st</span>.<br/>
<span class="id">rewrite</span> <span class="id">3!bindA</span>.<br/>
<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-theorem44</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="queensBody" class="id">
  <a name="queensBody" class="">queensBody</a>
</span> (<span id="xs:252" class="id">
  <a name="xs:252" class="">xs</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.section5a.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id"><a href="monae.example_nqueens.html#xs:252">xs</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#opdot_queens">opdot_queens</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="mu_queens_state_nondeter" class="id">
  <a name="mu_queens_state_nondeter" class="">mu_queens_state_nondeter</a>
</span> <span id="n:253" class="id">
  <a name="n:253" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#mu_queens">mu_queens</a></span> <span class="id"><a href="monae.example_nqueens.html#n:253">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.state_lib.html#protect">protect</a></span> (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id">0,</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>)<span class="id">%Z</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.example_nqueens.html#queensBody">queensBody</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id"><a href="monae.example_nqueens.html#n:253">n</a></span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="id">rewrite</span> <span class="id"><a href="monae.example_nqueens.html#mu_queensE">mu_queensE</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id">n</span>)) <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="xs:255" class="id"><span id="xs:254" class="id">
  <a name="xs:255" class="">xs</a>
</span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.state_lib.html#protect">protect</a></span> (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id">0,</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>)<span class="id">%Z</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#opdot_queens">opdot_queens</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.example_nqueens.html#xs:254">xs</a></span>))).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s</span> <span class="id">/=</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span> <span class="id"><a href="monae.example_nqueens.html#corollary45">corollary45</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.state_lib.html#protect">protect</a></span> (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id">0,</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>)<span class="id">%Z</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id">n</span>)) <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#opdot_queens">opdot_queens</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>))).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-getpermsC</span> <span class="id">/protect;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!bindA</span> <span class="id"><a href="monae.state_lib.html#putpermsC">putpermsC</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/protect;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!bindA</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.section5a">section5a</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="seed_select" class="id">
  <a name="seed_select" class="">seed_select</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">%type}</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span> (<span id="p:257" class="id">
  <a name="p:257" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)) (<span id="f:258" class="id">
  <a name="f:258" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.example_nqueens.html#M:256">M</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">%type</span>)<br/>
&nbsp;&nbsp;(<span id="a:259" class="id">
  <a name="a:259" class="">a</a>
</span> <span id="b:260" class="id">
  <a name="b:260" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.example_nqueens.html#a:259">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.example_nqueens.html#b:260">b</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="nqueens_mu2019tr3.theorem51" class="id">
  <a name="nqueens_mu2019tr3.theorem51" class="">theorem51</a>
</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">do_notation</span>.<br/>
<span class="vernacular">Variables</span> (<span id="nqueens_mu2019tr3.theorem51.M" class="id">
  <a name="nqueens_mu2019tr3.theorem51.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">%type</span>).<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span id="unfoldM" class="id">
  <a name="unfoldM" class="">unfoldM</a>
</span> <span class="id">:=</span> (<span class="id"><a href="monae.fail_lib.html#unfoldM">unfoldM</a></span> (<span class="id">@well_founded_size</span> <span class="id">_</span>)).<br/>
<br/>
<span class="vernacular">Let</span> <span id="nqueens_mu2019tr3.theorem51.op" class="id">
  <a name="nqueens_mu2019tr3.theorem51.op" class="">op</a>
</span> <span class="id">:=</span> <span class="id">@opdot_queens</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.M">M</a></span>.<br/>
<span class="vernacular">Let</span> <span id="nqueens_mu2019tr3.theorem51.p" class="id">
  <a name="nqueens_mu2019tr3.theorem51.p" class="">p</a>
</span> <span class="id">:=</span> <span class="id">@nilp</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="base_case" class="id">
  <a name="base_case" class="">base_case</a>
</span> <span id="y:262" class="id">
  <a name="y:262" class="">y</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.p">p</a></span> <span class="id"><a href="monae.example_nqueens.html#y:262">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="monae.example_nqueens.html#unfoldM">unfoldM</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.hierarchy.html#5483cabbcd988b1cb7000e5ba9f05889">&gt;=&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>)) <span class="id"><a href="monae.example_nqueens.html#y:262">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
<span class="id">move=&gt;</span> <span class="id">py</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">/kleisli</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#join_fmap">join_fmap</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldME">unfoldME;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#decr_size_select">decr_size_select</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">py</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="theorem51" class="id">
  <a name="theorem51" class="">theorem51</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.example_nqueens.html#unfoldM">unfoldM</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.hierarchy.html#5483cabbcd988b1cb7000e5ba9f05889">&gt;=&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>)) <span class="id">=1</span><br/>
&nbsp;&nbsp;<span class="id">@hyloM</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.example_nqueens.html#seed_select">seed_select</a></span> (<span class="id">@well_founded_size</span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
<span class="id">apply:</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#well_founded_induction">well_founded_induction</a></span> (<span class="id">@well_founded_size</span> <span class="id">_</span>)) <span class="id">=&gt;</span> <span class="id">y</span> <span class="id">IH</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#hyloME">hyloME;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#decr_size_select">decr_size_select</a></span>.<br/>
<span class="id">case/boolP</span> <span class="id">:</span> (<span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.p">p</a></span> <span class="id">y</span>) <span class="id">=&gt;</span> <span class="id">py</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.example_nqueens.html#base_case">base_case</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/kleisli</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#join_fmap">join_fmap</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#unfoldME">unfoldME;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#decr_size_select">decr_size_select</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">py</span>) <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">rewrite</span>(<span class="id">@decr_size_select</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">/bassert</span> <span class="id">!bindA;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[b</span> <span class="id">a]</span> <span class="id">/=</span>.<br/>
<span class="id">case:</span> <span class="id"><a href="monae.hierarchy.html#assertPn">assertPn</a></span> <span class="id">=&gt;</span> <span class="id">ay;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!bindfailf</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindretf</span> <span class="id">/=</span> <span class="id">-IH</span> <span class="id">//</span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap</a></span> <span class="id">/kleisli</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#join_fmap">join_fmap</a></span>.<br/>
<span class="id">suff</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:263" class="id">
  <a name="x:263" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.example_nqueens.html#unfoldM">unfoldM</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id">a;</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> <span class="id">b</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.example_nqueens.html#x:263">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> <span class="id">b</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:264" class="id">
  <a name="x:264" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.example_nqueens.html#unfoldM">unfoldM</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id">a;</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.example_nqueens.html#x:264">x</a></span>) <span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
<span class="id">rewrite</span> <span class="id">{ay}</span>.<br/>
<span class="id">move:</span> <span class="id">a</span> <span class="id">b</span>.<br/>
<span class="id">apply:</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#well_founded_induction">well_founded_induction</a></span> (<span class="id">@well_founded_size</span> <span class="id">_</span>)) <span class="id">=&gt;</span> <span class="id">a</span> <span class="id">IH'</span> <span class="id">b</span>.<br/>
<span class="id">destruct</span> <span class="id">a</span> <span class="gallina-kwd">as</span> <span class="id">[|u</span> <span class="id">v]</span> <span class="id">=&gt;</span> <span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#unfoldME">unfoldME</a></span> <span class="id">/=;</span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#decr_size_select">decr_size_select</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!bindretf</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#unfoldME">unfoldME;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#decr_size_select">decr_size_select</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindA</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:269" class="id"><span id="x:266" class="id">
  <a name="x:269" class="">x</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">u,</span> <span class="id">v</span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y_ys:268" class="id"><span id="y_ys:265" class="id">
  <a name="y_ys:268" class="">y_ys</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id">v;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.example_nqueens.html#y_ys:265">y_ys</a></span>.<span class="id">1,</span> <span class="id">u</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.example_nqueens.html#y_ys:265">y_ys</a></span>.<span class="id">2</span>))<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> <span class="id">b</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x0:270" class="id"><span id="x0:267" class="id">
  <a name="x0:270" class="">x0</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.example_nqueens.html#x:266">x</a></span>.<span class="id">1</span>) (<span class="id"><a href="monae.example_nqueens.html#unfoldM">unfoldM</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.example_nqueens.html#x:266">x</a></span>.<span class="id">2</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.example_nqueens.html#x0:267">x0</a></span>))<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/esym</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">{1}/op</span> <span class="id">/opdot_queens</span> <span class="id">/opdot</span> <span class="id"><a href="monae.hierarchy.html#fmap_bind">fmap_bind</a></span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="st:276" class="id"><span id="st:271" class="id">
  <a name="st:276" class="">st</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.example_nqueens.html#queens_ok">queens_ok</a></span> (<span class="id"><a href="monae.example_nqueens.html#queens_next">queens_next</a></span> <span class="id"><a href="monae.example_nqueens.html#st:271">st</a></span> <span class="id">b</span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:278" class="id"><span id="x:273" class="id">
  <a name="x:278" class="">x</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">u,</span> <span class="id">v</span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y_ys:277" class="id"><span id="y_ys:272" class="id">
  <a name="y_ys:277" class="">y_ys</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id">v;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.example_nqueens.html#y_ys:272">y_ys</a></span>.<span class="id">1,</span> <span class="id">u</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.example_nqueens.html#y_ys:272">y_ys</a></span>.<span class="id">2</span>))<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.example_nqueens.html#queens_next">queens_next</a></span> <span class="id"><a href="monae.example_nqueens.html#st:271">st</a></span> <span class="id">b</span>)) <span class="id">&gt;&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">b</span> (<span class="id">o</span>) (<span class="gallina-kwd">fun</span> <span id="x:279" class="id"><span id="x:274" class="id">
  <a name="x:279" class="">x</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x0:280" class="id"><span id="x0:275" class="id">
  <a name="x0:280" class="">x0</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.example_nqueens.html#x:274">x</a></span>.<span class="id">1</span>) (<span class="id"><a href="monae.example_nqueens.html#unfoldM">unfoldM</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.example_nqueens.html#x:274">x</a></span>.<span class="id">2</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.example_nqueens.html#x0:275">x0</a></span>)) <span class="id"><a href="monae.example_nqueens.html#x:273">x</a></span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!bindA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-nondetState_commute</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="st:286" class="id"><span id="st:281" class="id">
  <a name="st:286" class="">st</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:288" class="id"><span id="x:283" class="id">
  <a name="x:288" class="">x</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">u,</span> <span class="id">v</span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y_ys:287" class="id"><span id="y_ys:282" class="id">
  <a name="y_ys:287" class="">y_ys</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id">v;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.example_nqueens.html#y_ys:282">y_ys</a></span>.<span class="id">1,</span> <span class="id">u</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.example_nqueens.html#y_ys:282">y_ys</a></span>.<span class="id">2</span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.M">M</a></span> <span class="id">_;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.example_nqueens.html#queens_ok">queens_ok</a></span> (<span class="id"><a href="monae.example_nqueens.html#queens_next">queens_next</a></span> <span class="id"><a href="monae.example_nqueens.html#st:281">st</a></span> <span class="id">b</span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.example_nqueens.html#queens_next">queens_next</a></span> <span class="id"><a href="monae.example_nqueens.html#st:281">st</a></span> <span class="id">b</span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">b</span> (<span class="id">o</span>) (<span class="gallina-kwd">fun</span> <span id="x0:289" class="id"><span id="x0:284" class="id">
  <a name="x0:289" class="">x0</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x1:290" class="id"><span id="x1:285" class="id">
  <a name="x1:290" class="">x1</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.example_nqueens.html#x0:284">x0</a></span>.<span class="id">1</span>) (<span class="id"><a href="monae.example_nqueens.html#unfoldM">unfoldM</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.example_nqueens.html#x0:284">x0</a></span>.<span class="id">2</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.op">op</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.example_nqueens.html#x1:285">x1</a></span>)) <span class="id"><a href="monae.example_nqueens.html#x:283">x</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-bindA</span> <span class="id"><a href="monae.hierarchy.html#guardsC">guardsC;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!bindA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#assertE">assertE</a></span> <span class="id">!bindA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-nondetState_commute//;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;automate?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case:</span> (<span class="id">@select_isNondet</span> <span class="id">_</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.M">M</a></span> <span class="id">_</span> <span class="id">v</span>) <span class="id">=&gt;</span> <span class="id">x</span> <span class="id">&lt;-</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndAlt">ndAlt</a></span> (<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndRet">ndRet</a></span> (<span class="id">u,</span> <span class="id">v</span>)) (<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndBind">ndBind</a></span> <span class="id">x</span> (<span class="gallina-kwd">fun</span> <span id="y:292" class="id"><span id="y:291" class="id">
  <a name="y:292" class="">y</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndRet">ndRet</a></span> (<span class="id"><a href="monae.example_nqueens.html#y:291">y</a></span>.<span class="id">1,</span> <span class="id">u</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.example_nqueens.html#y:291">y</a></span>.<span class="id">2</span>)))).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcomp_def">fcomp_def</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
<span class="id">rewrite</span> <span class="id">{1}/op</span> <span class="id">/opdot_queens</span> <span class="id">/opdot</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#nondetState_commute">nondetState_commute;</a></span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;automate?&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> (<span class="id"><a href="monae.state_lib.html#unfoldM_isNondet">unfoldM_isNondet</a></span> (<span class="id">@select_isNondet</span> <span class="id">_</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">@decr_size_select</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.M">M</a></span> <span class="id">_</span>) <span class="id">x</span>.<span class="id">2</span>).<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span> <span class="id">m</span> <span class="id">&lt;-</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndBind">ndBind</a></span> <span class="id">m</span> (<span class="gallina-kwd">fun</span> <span id="y:294" class="id"><span id="y:293" class="id">
  <a name="y:294" class="">y</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndRet">ndRet</a></span> (<span class="id">x</span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.example_nqueens.html#y:293">y</a></span>))).<br/>
<span class="id">rewrite</span> <span class="id">{2}/op</span> <span class="id">/opdot_queens</span> <span class="id">/opdot</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#nondetState_commute">nondetState_commute</a></span> <span class="id">//;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;automate?&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> (<span class="id"><a href="monae.state_lib.html#unfoldM_isNondet">unfoldM_isNondet</a></span> (<span class="id">@select_isNondet</span> <span class="id">_</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">@decr_size_select</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">x</span>.<span class="id">2</span>).<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span> <span class="id">m</span> <span class="id">&lt;-</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndBind">ndBind</a></span> <span class="id">m</span> (<span class="gallina-kwd">fun</span> <span id="y:296" class="id"><span id="y:295" class="id">
  <a name="y:296" class="">y</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndRet">ndRet</a></span> (<span class="id">x</span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.example_nqueens.html#y:295">y</a></span>))).<br/>
<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bind_fmap</span> <span class="id">!fmap_bind</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcomp_def">fcomp_def</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.theorem51">theorem51</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="nqueens_mu2019tr3.section52" class="id">
  <a name="nqueens_mu2019tr3.section52" class="">section52</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="nqueens_mu2019tr3.section52.M" class="id">
  <a name="nqueens_mu2019tr3.section52.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">%type</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="queensBodyE" class="id">
  <a name="queensBodyE" class="">queensBodyE</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#queensBody">queensBody</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.section52.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#hyloM">hyloM</a></span> (<span class="id">@opdot_queens</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.section52.M">M</a></span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> (<span class="id">@nilp</span> <span class="id">_</span>) <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.example_nqueens.html#seed_select">seed_select</a></span> (<span class="id">@well_founded_size</span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
<span class="id">rewrite</span> <span class="id">/queensBody</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funeqE">boolp.funeqE</a></span> <span class="id">=&gt;</span> <span class="id">-[|h</span> <span class="id">t]</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="monae.fail_lib.html#permsE">permsE</a></span> <span class="id">/=</span> <span class="id"><a href="monae.fail_lib.html#hyloME">hyloME</a></span> <span class="id">?bindretf</span> <span class="id">//;</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#decr_size_select">decr_size_select</a></span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">[h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t]lock</span> <span class="id">-theorem51</span> <span class="id">/kleisli</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#join_fmap">join_fmap</a></span> <span class="id"><a href="monae.fail_lib.html#perms_uperm">perms_uperm</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="queensBodyE'" class="id">
  <a name="queensBodyE'" class="">queensBodyE'</a>
</span> <span id="xs:298" class="id">
  <a name="xs:298" class="">xs</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.example_nqueens.html#queensBody">queensBody</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.section52.M">M</a></span> <span class="id"><a href="monae.example_nqueens.html#xs:298">xs</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="monae.example_nqueens.html#xs:298">xs</a></span> <span class="id">is</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.example_nqueens.html#xs:298">xs</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="xys:300" class="id">
  <a name="xys:300" class="">xys</a>
</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="st:301" class="id">
  <a name="st:301" class="">st</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.example_nqueens.html#queens_ok">queens_ok</a></span> (<span class="id"><a href="monae.example_nqueens.html#queens_next">queens_next</a></span> <span class="id"><a href="monae.example_nqueens.html#st:301">st</a></span> <span class="id"><a href="monae.example_nqueens.html#xys:300">xys</a></span>.<span class="id">1</span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.example_nqueens.html#queens_next">queens_next</a></span> <span class="id"><a href="monae.example_nqueens.html#st:301">st</a></span> <span class="id"><a href="monae.example_nqueens.html#xys:300">xys</a></span>.<span class="id">1</span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> ((<span class="id">fmap</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.example_nqueens.html#xys:300">xys</a></span>.<span class="id">1</span>)) (<span class="id"><a href="monae.example_nqueens.html#queensBody">queensBody</a></span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.section52.M">M</a></span> <span class="id"><a href="monae.example_nqueens.html#xys:300">xys</a></span>.<span class="id">2</span>)))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
<span class="id">case:</span> <span class="id">xs</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.example_nqueens.html#queensBodyE">queensBodyE</a></span> <span class="id">//</span> <span class="id"><a href="monae.fail_lib.html#hyloME">hyloME</a></span> <span class="id">//;</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#decr_size_select">decr_size_select</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">{1}queensBodyE</span> <span class="id"><a href="monae.fail_lib.html#hyloME">hyloME;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#decr_size_select">decr_size_select</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">{-1}[h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t]lock</span> <span class="id"><a href="monae.fail_lib.html#decr_size_select">decr_size_select</a></span> <span class="id">/bassert</span> <span class="id">2!bindA</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nilp">nilp</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">//</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[x</span> <span class="id">ys]</span>.<br/>
<span class="id">case:</span> <span class="id"><a href="monae.hierarchy.html#assertPn">assertPn</a></span> <span class="id">=&gt;</span> <span class="id">/=</span> <span class="id">ysht;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!bindfailf</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindretf</span> <span class="id">/opdot_queens</span> <span class="id">/opdot</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindA;</span> <span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.example_nqueens.html#queensBodyE">queensBodyE</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3.section52">section52</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.example_nqueens.html#nqueens_mu2019tr3">nqueens_mu2019tr3</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.example_nqueens.html#opdot_queens">opdot_queens</a></span> <span class="id">{M}</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
</body>
</html>
