
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module monae.state_lib</title>
<meta name="description" content="Documentation of Coq module monae.state_lib" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="monae"><summary>monae</summary>
          <ul>
          <li><a href="monae.altprob_model.html">altprob_model</a></li>
<li><a href="monae.array_lib.html">array_lib</a></li>
<li><a href="monae.category.html">category</a></li>
<li><a href="monae.category_ext.html">category_ext</a></li>
<li><a href="monae.example_iquicksort.html">example_iquicksort</a></li>
<li><a href="monae.example_monty.html">example_monty</a></li>
<li><a href="monae.example_nqueens.html">example_nqueens</a></li>
<li><a href="monae.example_quicksort.html">example_quicksort</a></li>
<li><a href="monae.example_relabeling.html">example_relabeling</a></li>
<li><a href="monae.example_spark.html">example_spark</a></li>
<li><a href="monae.example_transformer.html">example_transformer</a></li>
<li><a href="monae.example_typed_store.html">example_typed_store</a></li>
<li><a href="monae.fail_lib.html">fail_lib</a></li>
<li><a href="monae.gcm_model.html">gcm_model</a></li>
<li><a href="monae.hierarchy.html">hierarchy</a></li>
<li><a href="monae.monad_composition.html">monad_composition</a></li>
<li><a href="monae.monad_lib.html">monad_lib</a></li>
<li><a href="monae.monad_model.html">monad_model</a></li>
<li><a href="monae.monad_transformer.html">monad_transformer</a></li>
<li><a href="monae.monae_lib.html">monae_lib</a></li>
<li><a href="monae.proba_lib.html">proba_lib</a></li>
<li><a href="monae.proba_monad_model.html">proba_monad_model</a></li>
<li><a href="monae.smallstep.html">smallstep</a></li>
<li><a href="monae.state_lib.html">state_lib</a></li>
<li><a href="monae.trace_lib.html">trace_lib</a></li>
<li><a href="monae.typed_store_lib.html">typed_store_lib</a></li>
<li><a href="monae.typed_store_model.html">typed_store_model</a></li>
          </ul>
          </details>
          </li>
<li><details id="monaeImpredicativeSet"><summary>monaeImpredicativeSet</summary>
          <ul>
          <li><a href="monaeImpredicativeSet.ifail_lib.html">ifail_lib</a></li>
<li><a href="monaeImpredicativeSet.ihierarchy.html">ihierarchy</a></li>
<li><a href="monaeImpredicativeSet.imonad_composition.html">imonad_composition</a></li>
<li><a href="monaeImpredicativeSet.imonad_lib.html">imonad_lib</a></li>
<li><a href="monaeImpredicativeSet.imonae_lib.html">imonae_lib</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module monae.state_lib</h1>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.all_ssreflect.html">all_ssreflect</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp">boolp</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="monae.monae_lib.html">monae_lib</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">HB</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="NOTFOUND the module url for HB.structures">structures</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="monae.hierarchy.html">hierarchy</a></span> <span class="id"><a href="monae.monad_lib.html">monad_lib</a></span> <span class="id"><a href="monae.fail_lib.html">fail_lib</a></span>.<br/>
<br/>
<pre class="ssrdoc">
             Definitions and lemmas about state monads                     
                                                                           
         overwrite s a := put s &gt;&gt; Ret s                                   
             protect n := get &gt;&gt;= (fun x =&gt; n &gt;&gt;= overwrite x)             
             putpermsC == perms is independent of the state and so         
                          commutes with put                                
nondetState_isNondet m == m is a computation of the nondetStateMonad that  
                          can be written with the syntax of the            
                          the nondeterministic monad                       
                scanlM == see section 4.1, mu2019tr3                       
       scanlM_of_scanl == see theorem 4.1, mu2019tr3                       
             theorem44 == see mu2019tr3                                    
                                                                           
</pre>
<br/>
<span class="gallina-kwd">Set</span> <span class="vernacular">Implicit</span> <span class="vernacular">Arguments</span>.<br/>
<span class="vernacular">Unset</span> <span class="vernacular">Strict</span> <span class="vernacular">Implicit</span>.<br/>
<span class="vernacular">Unset</span> <span class="vernacular">Printing</span> <span class="vernacular">Implicit</span> <span class="vernacular">Defensive</span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">monae_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="putgetput" class="id"><a name="putgetput" class="">putgetput</a></span> (<span id="S:1" class="id"><a name="S:1" class="">S</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadState.Exports.stateMonad">stateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:1">S}</a></span> <span id="x:3" class="id"><a name="x:3" class="">x</a></span> <span class="id">{B}</span> (<span id="k:5" class="id"><a name="k:5" class="">k</a></span> <span class="id">:</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#M:2">M</a></span> <span class="id"><a href="monae.state_lib.html#B:4">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#x:3">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x':6" class="id"><a name="x':6" class="">x'</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.state_lib.html#k:5">k</a></span> <span class="id"><a href="monae.state_lib.html#x':6">x'</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#x:3">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.state_lib.html#k:5">k</a></span> <span class="id"><a href="monae.state_lib.html#x:3">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.state_lib.html#M:2">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#putget">putget</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>. Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="overwrite" class="id"><a name="overwrite" class="">overwrite</a></span> <span class="id">{A</span> <span id="S:8" class="id"><a name="S:8" class="">S}</a></span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadState.Exports.stateMonad">stateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:8">S}</a></span> <span id="s:10" class="id"><a name="s:10" class="">s</a></span> <span id="a:11" class="id"><a name="a:11" class="">a</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#M:9">M</a></span> <span class="id"><a href="monae.state_lib.html#A:7">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#s:10">s</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.state_lib.html#a:11">a</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="protect" class="id"><a name="protect" class="">protect</a></span> <span class="id">{A</span> <span id="S:13" class="id"><a name="S:13" class="">S}</a></span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadState.Exports.stateMonad">stateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:13">S}</a></span> (<span id="n:15" class="id"><a name="n:15" class="">n</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#M:14">M</a></span> <span class="id"><a href="monae.state_lib.html#A:12">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="ini:16" class="id"><a name="ini:16" class="">ini</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.state_lib.html#n:15">n</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.state_lib.html#overwrite">overwrite</a></span> <span class="id"><a href="monae.state_lib.html#ini:16">ini</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="protect_put_ret" class="id"><a name="protect_put_ret" class="">protect_put_ret</a></span> <span class="id">{A</span> <span id="S:18" class="id"><a name="S:18" class="">S</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0}</a></span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadState.Exports.stateMonad">stateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:18">S}</a></span> (<span id="s:20" class="id"><a name="s:20" class="">s</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#S:18">S</a></span>) (<span id="a:21" class="id"><a name="a:21" class="">a</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#A:17">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.state_lib.html#protect">protect</a></span> (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#s:20">s</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.state_lib.html#a:21">a</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.state_lib.html#a:21">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.state_lib.html#M:19">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
<span class="id">rewrite</span> <span class="id">/protect</span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/overwrite</span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">-bindA</span> <span class="id"><a href="monae.hierarchy.html#putput">putput</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-bindA</span> <span class="id"><a href="monae.hierarchy.html#getputskip">getputskip</a></span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Example</span> <span id="test_nonce0" class="id"><a name="test_nonce0" class="">test_nonce0</a></span> (<span id="M:22" class="id"><a name="M:22" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadState.Exports.stateMonad">stateMonad</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>) <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#M:22">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="s:23" class="id"><a name="s:23" class="">s</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#s:23">s</a></span>.<span class="id">+1</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.state_lib.html#s:23">s</a></span>).<br/>
<br/>
<span class="vernacular">Section</span> <span id="stateloop_examples" class="id"><a name="stateloop_examples" class="">stateloop_examples</a></span>.<br/>
<span class="vernacular">Variable</span> (<span id="stateloop_examples.M" class="id"><a name="stateloop_examples.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadStateLoop.Exports.loopStateMonad">loopStateMonad</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>).<br/>
<span class="vernacular">Let</span> <span id="stateloop_examples.example" class="id"><a name="stateloop_examples.example" class="">example</a></span> <span id="min:25" class="id"><a name="min:25" class="">min</a></span> <span id="max:26" class="id"><a name="max:26" class="">max</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#stateloop_examples.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id">:=</span> <span class="id"><a href="monae.hierarchy.html#foreach">foreach</a></span> <span class="id"><a href="monae.state_lib.html#max:26">max</a></span> <span class="id"><a href="monae.state_lib.html#min:25">min</a></span> (<span class="gallina-kwd">fun</span> <span id="i:27" class="id"><a name="i:27" class="">i</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
<span class="vernacular">Let</span> <span id="stateloop_examples.sum" class="id"><a name="stateloop_examples.sum" class="">sum</a></span> <span id="n:28" class="id"><a name="n:28" class="">n</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#stateloop_examples.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id">:=</span> <span class="id"><a href="monae.hierarchy.html#foreach">foreach</a></span> <span class="id"><a href="monae.state_lib.html#n:28">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="i:29" class="id"><a name="i:29" class="">i</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="z:30" class="id"><a name="z:30" class="">z</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#z:30">z</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="monae.state_lib.html#i:29">i</a></span>))).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="sum_test" class="id"><a name="sum_test" class="">sum_test</a></span> <span id="n:31" class="id"><a name="n:31" class="">n</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.state_lib.html#stateloop_examples.sum">sum</a></span> <span class="id"><a href="monae.state_lib.html#n:31">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="m:32" class="id"><a name="m:32" class="">m</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#m:32">m</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#sumn">sumn</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id"><a href="monae.state_lib.html#n:31">n</a></span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
<span class="id">elim:</span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id">[|n</span> <span class="id">ih]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">/sum</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#loop0">loop0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#sumn">sumn</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> <span class="id">0</span> <span class="id">0</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>) <span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-[LHS]bindskipf</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-getputskip</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addn0">addn0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-[RHS]bindmret</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">case</span>.<br/>
<span class="id">rewrite</span> <span class="id">{1}/sum</span> <span class="id">-add1n</span> <span class="id"><a href="monae.hierarchy.html#loop1">loop1</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">m</span>.<br/>
<span class="id">rewrite</span> <span class="id">-/</span>(<span class="id"><a href="monae.state_lib.html#stateloop_examples.sum">sum</a></span> <span class="id">n</span>) <span class="id">{}ih</span> <span class="id">-bindA</span> <span class="id"><a href="monae.hierarchy.html#putget">putget</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#putput">putput</a></span>.<br/>
<span class="id">congr</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#add0n">add0n</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addnC">addnC</a></span> <span class="id">1</span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iotaD">iotaD</a></span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#sumn_cat">sumn_cat</a></span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#add0n">add0n</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addn0">addn0</a></span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addnAC">addnAC</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addnA">addnA</a></span>.<br/>
Qed.</div>
<span class="vernacular">End</span> <span class="id"><a href="monae.state_lib.html#stateloop_examples">stateloop_examples</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="getput_prepend" class="id"><a name="getput_prepend" class="">getput_prepend</a></span> (<span id="S:33" class="id"><a name="S:33" class="">S</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="M:34" class="id"><a name="M:34" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:33">S</a></span>) <span id="A:35" class="id"><a name="A:35" class="">A</a></span> (<span id="m:36" class="id"><a name="m:36" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#M:34">M</a></span> <span class="id"><a href="monae.state_lib.html#A:35">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.state_lib.html#m:36">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:37" class="id"><a name="x:37" class="">x</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#x:37">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.state_lib.html#m:36">m</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-{2}</span>(<span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span> <span class="id">m</span>) <span class="id">-bindA</span> <span class="id"><a href="monae.hierarchy.html#getputskip">getputskip</a></span> <span class="id">2!bindskipf</span>. Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="state_commute" class="id"><a name="state_commute" class="">state_commute</a></span>.<br/>
<br/>
<span class="vernacular">Variables</span> (<span id="state_commute.S" class="id"><a name="state_commute.S" class="">S</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="state_commute.M" class="id"><a name="state_commute.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:38">S</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="puttselectC" class="id"><a name="puttselectC" class="">puttselectC</a></span> (<span id="x:40" class="id"><a name="x:40" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#state_commute.S">S</a></span>) <span id="A:41" class="id"><a name="A:41" class="">A</a></span> (<span id="s:42" class="id"><a name="s:42" class="">s</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:41">A</a></span>) <span id="B:43" class="id"><a name="B:43" class="">B</a></span> (<span id="f:44" class="id"><a name="f:44" class="">f</a></span> <span class="id">:</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#state_commute.M">M</a></span> <span class="id"><a href="monae.state_lib.html#B:43">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#x:40">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> (<span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> <span class="id"><a href="monae.state_lib.html#s:42">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.state_lib.html#f:44">f</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> <span class="id"><a href="monae.state_lib.html#s:42">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="rs:45" class="id"><a name="rs:45" class="">rs</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#x:40">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.state_lib.html#f:44">f</a></span> <span class="id"><a href="monae.state_lib.html#rs:45">rs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">f</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">IH]</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#tselect_nil">tselect_nil</a></span> <span class="id">2!bindfailf</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id">t</span> <span class="id">IH</span> <span class="id">f</span> <span class="id">=&gt;</span> <span class="id">[|h'</span> <span class="id">t]</span> <span class="id">IH</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#tselect1">tselect1</a></span> <span class="id">!bindretf</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#tselect_cons">tselect_cons</a></span> <span class="id">//</span> <span class="id">=&gt;</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]alt_bindDl</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#alt_bindDr">alt_bindDr</a></span>.<br/>
<span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">2!bindretf</span>.<br/>
<span class="id">rewrite</span> <span class="id">2!bindA</span> <span class="id">IH;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y;</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!bindretf</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="putselectC" class="id"><a name="putselectC" class="">putselectC</a></span> (<span id="x:46" class="id"><a name="x:46" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#state_commute.S">S</a></span>) <span id="A:47" class="id"><a name="A:47" class="">A</a></span> (<span id="s:48" class="id"><a name="s:48" class="">s</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:47">A</a></span>) <span id="B:49" class="id"><a name="B:49" class="">B</a></span> (<span id="f:50" class="id"><a name="f:50" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#A:47">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:47">A</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#state_commute.M">M</a></span> <span class="id"><a href="monae.state_lib.html#B:49">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#x:46">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> (<span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.state_lib.html#s:48">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.state_lib.html#f:50">f</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.state_lib.html#s:48">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="rs:51" class="id"><a name="rs:51" class="">rs</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#x:46">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.state_lib.html#f:50">f</a></span> <span class="id"><a href="monae.state_lib.html#rs:51">rs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#selectE">selectE</a></span> <span class="id">{1}fmapE</span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#puttselectC">puttselectC</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x0;</span> <span class="id">rewrite</span> <span class="id">2!bindretf</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="gettselectC" class="id"><a name="gettselectC" class="">gettselectC</a></span> <span id="A:52" class="id"><a name="A:52" class="">A</a></span> (<span id="s:53" class="id"><a name="s:53" class="">s</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:52">A</a></span>) <span id="B:54" class="id"><a name="B:54" class="">B</a></span> (<span id="f:55" class="id"><a name="f:55" class="">f</a></span> <span class="id">:</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#state_commute.M">M</a></span> <span class="id"><a href="monae.state_lib.html#B:54">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="ini:56" class="id"><a name="ini:56" class="">ini</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="rs:57" class="id"><a name="rs:57" class="">rs</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> <span class="id"><a href="monae.state_lib.html#s:53">s;</a></span> <span class="id"><a href="monae.state_lib.html#f:55">f</a></span> <span class="id"><a href="monae.state_lib.html#rs:57">rs</a></span> <span class="id"><a href="monae.state_lib.html#ini:56">ini</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="rs:58" class="id"><a name="rs:58" class="">rs</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> <span class="id"><a href="monae.state_lib.html#s:53">s;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="ini:59" class="id"><a name="ini:59" class="">ini</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span> <span class="id"><a href="monae.state_lib.html#f:55">f</a></span> <span class="id"><a href="monae.state_lib.html#rs:58">rs</a></span> <span class="id"><a href="monae.state_lib.html#ini:59">ini</a></span>)%<span class="id">Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">f</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">IH]</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#tselect_nil">tselect_nil</a></span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf;</a></span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf;</a></span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
<span class="id">case:</span> <span class="id">t</span> <span class="id">IH</span> <span class="id">f</span> <span class="id">=&gt;</span> <span class="id">[|h'</span> <span class="id">t]</span> <span class="id">IH</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#tselect1">tselect1</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf;</a></span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#tselect_cons">tselect_cons</a></span> <span class="id">//</span> <span class="id">=&gt;</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id">[tselect</span> <span class="id">_]lock</span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#alt_bindDr">alt_bindDr</a></span>.<br/>
<span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">?;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-lock</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x0:62" class="id"><span id="x0:60" class="id"><a name="x0:62" class="">x0</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> (<span class="id">h'</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:63" class="id"><span id="x:61" class="id"><a name="x:63" class="">x</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">f</span> (<span class="id"><a href="monae.state_lib.html#x0:60">x0</a></span>.<span class="id">1,</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#Tuple">Tuple</a></span> (<span class="id"><a href="monae.fail_lib.html#tselect_cons_statement_obligation_2">fail_lib.tselect_cons_statement_obligation_2</a></span> <span class="id">h</span> <span class="id">H</span> <span class="id"><a href="monae.state_lib.html#x0:60">x0</a></span>)) <span class="id"><a href="monae.state_lib.html#x:61">x</a></span>)%<span class="id">Do</span>.<br/>
&nbsp;<span class="id">rewrite</span> <span class="id">-IH;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="putpermsC" class="id"><a name="putpermsC" class="">putpermsC</a></span> (<span id="x:64" class="id"><a name="x:64" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#state_commute.S">S</a></span>) <span id="A:65" class="id"><a name="A:65" class="">A</a></span> (<span id="s:66" class="id"><a name="s:66" class="">s</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:65">A</a></span>) <span id="B:67" class="id"><a name="B:67" class="">B</a></span> (<span id="f:68" class="id"><a name="f:68" class="">f</a></span> <span class="id">:</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#state_commute.M">M</a></span> <span class="id"><a href="monae.state_lib.html#B:67">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#x:64">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> (<span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id"><a href="monae.state_lib.html#s:66">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.state_lib.html#f:68">f</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id"><a href="monae.state_lib.html#s:66">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="rs:69" class="id"><a name="rs:69" class="">rs</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#x:64">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.state_lib.html#f:68">f</a></span> <span class="id"><a href="monae.state_lib.html#rs:69">rs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
<span class="id">move</span> <span class="id">Hn</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>) <span class="id">=&gt;</span> <span class="id">n</span>.<br/>
<span class="id">elim:</span> <span class="id">n</span> <span class="id">s</span> <span class="id">Hn</span> <span class="id">x</span> <span class="id">f</span> <span class="id">=&gt;</span> <span class="id">[|n</span> <span class="id">IH]</span> <span class="id">s</span> <span class="id">Hn</span> <span class="id">x</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">s</span> <span class="id">Hn</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">_;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#permsE">permsE</a></span> <span class="id">2!bindretf</span>.<br/>
<span class="id">case:</span> <span class="id">s</span> <span class="id">Hn</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t</span> <span class="id">[Hn]</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#tpermsE">tpermsE</a></span> <span class="id">2!bindA</span> <span class="id"><a href="monae.state_lib.html#puttselectC">puttselectC;</a></span> <span class="id">bind_ext;</span> <span class="id">case=&gt;</span> <span class="id">a</span> <span class="id">b</span>.<br/>
<span class="id">rewrite</span> <span class="id">2!bindA</span>.<br/>
<span class="id">have</span> <span class="id">bn</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">n</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_tuple">size_tuple</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">IH</span> <span class="id">//</span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="getpermsC" class="id"><a name="getpermsC" class="">getpermsC</a></span> <span id="A:70" class="id"><a name="A:70" class="">A</a></span> (<span id="s:71" class="id"><a name="s:71" class="">s</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:70">A</a></span>) <span id="B:72" class="id"><a name="B:72" class="">B</a></span> (<span id="f:73" class="id"><a name="f:73" class="">f</a></span> <span class="id">:</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#state_commute.M">M</a></span> <span class="id"><a href="monae.state_lib.html#B:72">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="ini:74" class="id"><a name="ini:74" class="">ini</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id"><a href="monae.state_lib.html#s:71">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span>  <span class="id"><a href="monae.state_lib.html#f:73">f^~</a></span> <span class="id"><a href="monae.state_lib.html#ini:74">ini</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id"><a href="monae.state_lib.html#s:71">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="rs:75" class="id"><a name="rs:75" class="">rs</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.state_lib.html#f:73">f</a></span> <span class="id"><a href="monae.state_lib.html#rs:75">rs</a></span>))%<span class="id">Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
<span class="id">move</span> <span class="id">Hn</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>) <span class="id">=&gt;</span> <span class="id">n</span>.<br/>
<span class="id">elim:</span> <span class="id">n</span> <span class="id">s</span> <span class="id">Hn</span> <span class="id">f</span> <span class="id">=&gt;</span> <span class="id">[|n</span> <span class="id">IH]</span> <span class="id">s</span> <span class="id">Hn</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> <span class="id">s</span> <span class="id">Hn</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">_;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#permsE">permsE</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf;</a></span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">case:</span> <span class="id">s</span> <span class="id">Hn</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t</span> <span class="id">[Hn]</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#tpermsE">tpermsE</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:79" class="id"><span id="x:76" class="id"><a name="x:79" class="">x</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="ini:80" class="id"><span id="ini:77" class="id"><a name="ini:80" class="">ini</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="rs:81" class="id"><span id="rs:78" class="id"><a name="rs:81" class="">rs</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id"><a href="monae.state_lib.html#x:76">x</a></span>.<span class="id">2;</span><br/>
&nbsp;&nbsp;<span class="id">f</span> (<span class="id"><a href="monae.state_lib.html#x:76">x</a></span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.state_lib.html#rs:78">rs</a></span>) <span class="id"><a href="monae.state_lib.html#ini:77">ini</a></span>)%<span class="id">Do;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IH</span> <span class="id">?size_tuple</span> <span class="id">//</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-gettselectC</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">rs</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.state_lib.html#state_commute">state_commute</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="nondetState_isNondet" class="id"><a name="nondetState_isNondet" class="">nondetState_isNondet</a></span> <span id="S:82" class="id"><a name="S:82" class="">S</a></span> (<span id="M:83" class="id"><a name="M:83" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:82">S</a></span>) <span id="A:84" class="id"><a name="A:84" class="">A</a></span> (<span id="n:85" class="id"><a name="n:85" class="">n</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#M:83">M</a></span> <span class="id"><a href="monae.state_lib.html#A:84">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">{m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">|</a></span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.nondetSem">nondetSem</a></span> <span class="id"><a href="monae.state_lib.html#m:86">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.state_lib.html#n:85">n}</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nondetState_commute" class="id"><a name="nondetState_commute" class="">nondetState_commute</a></span> <span id="S:87" class="id"><a name="S:87" class="">S</a></span> (<span id="M:88" class="id"><a name="M:88" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:87">S</a></span>) <span id="A:89" class="id"><a name="A:89" class="">A</a></span> (<span id="m:90" class="id"><a name="m:90" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#M:88">M</a></span> <span class="id"><a href="monae.state_lib.html#A:89">A</a></span>) <span id="B:91" class="id"><a name="B:91" class="">B</a></span> (<span id="n:92" class="id"><a name="n:92" class="">n</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#M:88">M</a></span> <span class="id"><a href="monae.state_lib.html#B:91">B</a></span>) <span id="C:93" class="id"><a name="C:93" class="">C</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span id="f:94" class="id"><a name="f:94" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#A:89">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#B:91">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#M:88">M</a></span> <span class="id"><a href="monae.state_lib.html#C:93">C</a></span>) <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#nondetState_isNondet">nondetState_isNondet</a></span> <span class="id"><a href="monae.state_lib.html#m:90">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.monad_lib.html#commute">commute</a></span> <span class="id"><a href="monae.state_lib.html#m:90">m</a></span> <span class="id"><a href="monae.state_lib.html#n:92">n</a></span> <span class="id"><a href="monae.state_lib.html#f:94">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
<span class="id">case</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
<span class="id">elim:</span> <span class="id">x</span> <span class="id">m</span> <span class="id">n</span> <span class="id">f</span> <span class="id">=&gt;</span> <span class="id">[{}A</span> <span class="id">a</span> <span class="id">m</span> <span class="id">n</span> <span class="id">f</span> <span class="id">&lt;-|</span> <span class="id">B0</span> <span class="id">{}A</span> <span class="id">n0</span> <span class="id">H0</span> <span class="id">n1</span> <span class="id">H1</span> <span class="id">m</span> <span class="id">n2</span> <span class="id">f</span> <span class="id">&lt;-</span> <span class="id">|</span><br/>
&nbsp;&nbsp;<span class="id">A0</span> <span class="id">m</span> <span class="id">n</span> <span class="id">f</span> <span class="id">&lt;-</span> <span class="id">|</span> <span class="id">A0</span> <span class="id">n0</span> <span class="id">H0</span> <span class="id">n1</span> <span class="id">H1</span> <span class="id">m</span> <span class="id">n2</span> <span class="id">f</span> <span class="id">&lt;-]</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">/commute</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">/commute</span> <span class="id">/=</span> <span class="id">!bindA</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:97" class="id"><span id="x:95" class="id"><a name="x:97" class="">x</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.nondetSem">nondetSem</a></span> <span class="id">n0;</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y:98" class="id"><span id="y:96" class="id"><a name="y:98" class="">y</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id">n2;</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.nondetSem">nondetSem</a></span> (<span class="id">n1</span> <span class="id"><a href="monae.state_lib.html#x:95">x</a></span>) <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id">f^~</span> <span class="id"><a href="monae.state_lib.html#y:96">y</a></span>)%<span class="id">Do</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id">H1</span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span> <span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">/commute</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id">n</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#fail">fail</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">M</span> <span class="id">C</span>)<span class="id">;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">/commute</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y:100" class="id"><span id="y:99" class="id"><a name="y:100" class="">y</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id">n2;</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.nondetSem">nondetSem</a></span> <span class="id">n0</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id">f^~</span> <span class="id"><a href="monae.state_lib.html#y:99">y</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.nondetSem">nondetSem</a></span> <span class="id">n1</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id">f^~</span> <span class="id"><a href="monae.state_lib.html#y:99">y</a></span>)%<span class="id">Do;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDr">alt_bindDr</a></span> <span class="id">H0</span> <span class="id">//</span> <span class="id">H1</span>.<br/>
Qed.</div>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.state_lib.html#nondetState_commute">nondetState_commute</a></span> <span class="id">{S</span> <span class="id">M</span> <span class="id">A}</span> <span class="id">m</span> <span class="id">{B}</span> <span class="id">n</span> <span class="id">{C}</span> <span class="id">f</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="select_isNondet" class="id"><a name="select_isNondet" class="">select_isNondet</a></span> <span id="S:101" class="id"><a name="S:101" class="">S</a></span> (<span id="M:102" class="id"><a name="M:102" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:101">S</a></span>) <span id="A:103" class="id"><a name="A:103" class="">A</a></span> (<span id="s:104" class="id"><a name="s:104" class="">s</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:103">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.state_lib.html#nondetState_isNondet">nondetState_isNondet</a></span> (<span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.state_lib.html#s:104">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#M:102">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">[/=</span> <span class="id">|</span> <span class="id">u</span> <span class="id">v</span> <span class="id">[x</span> <span class="id">/=</span> <span class="id">&lt;-]];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> (@<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndFail">ndFail</a></span> <span class="id">_</span>).<br/>
<span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndAlt">ndAlt</a></span> (<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndRet">ndRet</a></span> (<span class="id">u,</span> <span class="id">v</span>)) (<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndBind">ndBind</a></span> <span class="id">x</span> (<span class="gallina-kwd">fun</span> <span id="x:106" class="id"><span id="x:105" class="id"><a name="x:106" class="">x</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndRet">ndRet</a></span> (<span class="id"><a href="monae.state_lib.html#x:105">x</a></span>.<span class="id">1,</span> <span class="id">u</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.state_lib.html#x:105">x</a></span>.<span class="id">2</span>)))).<br/>
Qed.</div>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id"><a href="monae.state_lib.html#nondetState_isNondet">nondetState_isNondet</a></span> (<span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id">_</span>)) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id">solve[exact:</span> <span class="id"><a href="monae.state_lib.html#select_isNondet">select_isNondet]</a></span> <span class="id">:</span> <span class="id">core</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="unfoldM_isNondet" class="id"><a name="unfoldM_isNondet" class="">unfoldM_isNondet</a></span> <span id="S:107" class="id"><a name="S:107" class="">S</a></span> (<span id="M:108" class="id"><a name="M:108" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:107">S</a></span>) <span id="A:109" class="id"><a name="A:109" class="">A</a></span> <span id="B:110" class="id"><a name="B:110" class="">B</a></span><br/>
&nbsp;&nbsp;(<span id="f:111" class="id"><a name="f:111" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#B:110">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#M:108">M</a></span> (<span class="id"><a href="monae.state_lib.html#A:109">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#B:110">B</a></span>)%<span class="id">type</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="s:112" class="id"><a name="s:112" class="">s,</a></span> <span class="id"><a href="monae.state_lib.html#nondetState_isNondet">nondetState_isNondet</a></span> (<span class="id"><a href="monae.state_lib.html#f:111">f</a></span> <span class="id"><a href="monae.state_lib.html#s:112">s</a></span>)) <span class="id">-&gt;</span> <span class="id"><a href="monae.fail_lib.html#bassert_size">bassert_size</a></span> <span class="id"><a href="monae.state_lib.html#f:111">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:113" class="id"><a name="s:113" class="">s,</a></span> <span class="id"><a href="monae.state_lib.html#nondetState_isNondet">nondetState_isNondet</a></span> (<span class="id"><a href="monae.fail_lib.html#unfoldM">unfoldM</a></span> (@<span class="id"><a href="monae.fail_lib.html#well_founded_size">well_founded_size</a></span> <span class="id"><a href="monae.state_lib.html#B:110">B</a></span>) (@<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nilp">nilp</a></span> <span class="id">_</span>) <span class="id"><a href="monae.state_lib.html#f:111">f</a></span> <span class="id"><a href="monae.state_lib.html#s:113">s</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
<span class="id">move=&gt;</span> <span class="id">Hf</span> <span class="id">size_f</span> <span class="id">s</span>.<br/>
<span class="id">apply/boolp</span>.<span class="id">constructive_indefinite_description</span>.<br/>
<span class="id">move:</span> <span class="id">s;</span> <span class="id">apply:</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#well_founded_induction">well_founded_induction</a></span> (@<span class="id"><a href="monae.fail_lib.html#well_founded_size">well_founded_size</a></span> <span class="id">_</span>)) <span class="id">=&gt;</span> <span class="id">s</span> <span class="id">IH</span>.<br/>
<span class="id">have</span> <span class="id">{}IH</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="x:114" class="id"><a name="x:114" class="">x,</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.state_lib.html#x:114">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">{</a></span> <span id="m:115" class="id"><a name="m:115" class="">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">|</a></span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.nondetSem">nondetSem</a></span> <span class="id"><a href="monae.state_lib.html#m:115">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM">unfoldM</a></span> (@<span class="id"><a href="monae.fail_lib.html#well_founded_size">well_founded_size</a></span> <span class="id">B</span>) (@<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nilp">nilp</a></span> <span class="id">_</span>) <span class="id">f</span> <span class="id"><a href="monae.state_lib.html#x:114">x}</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span> <span class="id">x</span> <span class="id">xs;</span> <span class="id">exact/boolp</span>.<span class="id">constructive_indefinite_description/IH</span>.<br/>
<span class="id">case:</span> <span class="id">s</span> <span class="id">IH</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t]</span> <span class="id">IH</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#unfoldME">unfoldME</a></span> <span class="id">//=;</span> <span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndRet">ndRet</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#unfoldME">unfoldME</a></span> <span class="id">//</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nilp">nilp</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">//</span>.<br/>
<span class="id">case:</span> (<span class="id">Hf</span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)) <span class="id">=&gt;</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">rewrite</span> <span class="id">-Hx</span>.<br/>
<span class="id">set</span> <span class="id">g</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="y:118" class="id"><span id="y:117" class="id"><span id="y:116" class="id"><a name="y:118" class="">y</a></span></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">match</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Bool.Bool.html#bool_dec">Bool.bool_dec</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.state_lib.html#y:116">y</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#left">left</a></span> <span class="id">H</span> <span class="id">=&gt;</span> <span class="id">let:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">x</span> <span class="id">_</span> <span class="id">:=</span> <span class="id">IH</span> <span class="id">_</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndRet">ndRet</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<span class="id">refine</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#ex_intro">ex_intro</a></span> <span class="id">_</span> (<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndBind">ndBind</a></span> <span class="id">x</span> (<span class="gallina-kwd">fun</span> <span id="x:120" class="id"><span id="x:119" class="id"><a name="x:120" class="">x</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndBind">ndBind</a></span> (<span class="id">g</span> <span class="id"><a href="monae.state_lib.html#x:119">x</a></span>.<span class="id">2</span>) (@<span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports.ndRet">ndRet</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.state_lib.html#x:119">x</a></span>.<span class="id">1</span> ))) <span class="id">_</span>).<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]/=</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hx</span> <span class="id">size_f</span> <span class="id">/bassert</span> <span class="id">!bindA</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[x1</span> <span class="id">x2]</span>.<br/>
<span class="id">case:</span> <span class="id"><a href="monae.hierarchy.html#assertPn">assertPn;</a></span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">=&gt;</span> <span class="id">b1b2;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!bindfailf</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindretf</span> <span class="id">/g/=</span>.<br/>
<span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Bool.Bool.html#bool_dec">Bool.bool_dec</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">x2t</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">case:</span> (<span class="id">IH</span> <span class="id">x2</span>) <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">x0</span> <span class="id">&lt;-;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="loop" class="id"><a name="loop" class="">loop</a></span>.<br/>
<span class="vernacular">Variables</span> (<span id="loop.A" class="id"><a name="loop.A" class="">A</a></span> <span id="loop.S" class="id"><a name="loop.S" class="">S</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="loop.M" class="id"><a name="loop.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadState.Exports.stateMonad">stateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:121">S</a></span>) (<span id="loop.op" class="id"><a name="loop.op" class="">op</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#S:121">S</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#A:122">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#S:121">S</a></span>).<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="opmul" class="id"><a name="opmul" class="">opmul</a></span> <span id="x:125" class="id"><a name="x:125" class="">x</a></span> <span id="m:126" class="id"><a name="m:126" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#loop.M">M</a></span> <span class="id">_</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="gallina-kwd">fun</span> <span id="st:127" class="id"><a name="st:127" class="">st</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">let</span> <span id="st':128" class="id"><a name="st':128" class="">st'</a></span> <span class="id">:=</span> <span class="id"><a href="monae.state_lib.html#loop.op">op</a></span> <span class="id"><a href="monae.state_lib.html#st:127">st</a></span> <span class="id"><a href="monae.state_lib.html#x:125">x</a></span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.state_lib.html#st':128">st'</a></span>) (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#st':128">st'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.state_lib.html#m:126">m</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="scanlM" class="id"><a name="scanlM" class="">scanlM</a></span> <span id="s:129" class="id"><a name="s:129" class="">s</a></span> <span id="xs:130" class="id"><a name="xs:130" class="">xs</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#loop.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#loop.S">S</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="mul:133" class="id"><a name="mul:133" class="">mul</a></span> <span id="x:131" class="id"><a name="x:131" class="">x</a></span> <span id="m:132" class="id"><a name="m:132" class="">m</a></span> <span class="id">:=</span> <span class="id"><a href="monae.state_lib.html#opmul">opmul</a></span> <span class="id"><a href="monae.state_lib.html#x:131">x</a></span> <span class="id"><a href="monae.state_lib.html#m:132">m</a></span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#s:129">s</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.state_lib.html#mul:133">mul</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.state_lib.html#xs:130">xs</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="scanlM_nil" class="id"><a name="scanlM_nil" class="">scanlM_nil</a></span> <span id="s:134" class="id"><a name="s:134" class="">s</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#scanlM">scanlM</a></span> <span class="id"><a href="monae.state_lib.html#s:134">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#s:134">s</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Let</span> <span id="loop.scanlM_of_scanl_helper" class="id"><a name="loop.scanlM_of_scanl_helper" class="">scanlM_of_scanl_helper</a></span> <span id="s:135" class="id"><a name="s:135" class="">s</a></span><br/>
&nbsp;&nbsp;(<span id="ms:136" class="id"><a name="ms:136" class="">ms</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#loop.M">M</a></span> <span class="id"><a href="monae.state_lib.html#loop.S">S</a></span>) (<span id="mu:137" class="id"><a name="mu:137" class="">mu</a></span> <span id="mu':138" class="id"><a name="mu':138" class="">mu'</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#loop.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span id="m:139" class="id"><a name="m:139" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#loop.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#loop.S">S</a></span>)) (<span id="f:140" class="id"><a name="f:140" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#loop.S">S</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#loop.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:141" class="id"><a name="x:141" class="">x</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.state_lib.html#ms:136">ms;</a></span> <span class="id"><a href="monae.state_lib.html#mu:137">mu</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="xs:142" class="id"><a name="xs:142" class="">xs</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.state_lib.html#s:135">s</a></span>) (<span class="id"><a href="monae.state_lib.html#mu':138">mu'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.state_lib.html#m:139">m</a></span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.state_lib.html#f:140">f</a></span> <span class="id"><a href="monae.state_lib.html#x:141">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.state_lib.html#xs:142">xs</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.state_lib.html#s:135">s</a></span>) (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:143" class="id"><a name="x:143" class="">x</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.state_lib.html#ms:136">ms;</a></span> <span class="id"><a href="monae.state_lib.html#mu:137">mu</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.state_lib.html#mu':138">mu'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="xs:144" class="id"><a name="xs:144" class="">xs</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.state_lib.html#m:139">m;</a></span> <span class="id"><a href="monae.state_lib.html#f:140">f</a></span> <span class="id"><a href="monae.state_lib.html#x:143">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.state_lib.html#xs:144">xs</a></span>)))%<span class="id">Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]fmapE</a></span> <span class="id">!bindA</span>.<br/>
<span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s'</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindA;</span> <span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="scanlM_of_scanl" class="id"><a name="scanlM_of_scanl" class="">scanlM_of_scanl</a></span> <span id="s:145" class="id"><a name="s:145" class="">s</a></span> <span id="xs:146" class="id"><a name="xs:146" class="">xs</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#scanl">scanl</a></span> <span class="id"><a href="monae.state_lib.html#loop.op">op</a></span> <span class="id"><a href="monae.state_lib.html#s:145">s</a></span> <span class="id"><a href="monae.state_lib.html#xs:146">xs</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.state_lib.html#protect">protect</a></span> (<span class="id"><a href="monae.state_lib.html#scanlM">scanlM</a></span> <span class="id"><a href="monae.state_lib.html#s:145">s</a></span> <span class="id"><a href="monae.state_lib.html#xs:146">xs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
<span class="id">elim:</span> <span class="id">xs</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">[/=|x</span> <span class="id">xs</span> <span class="id">IH]</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#scanlM_nil">scanlM_nil</a></span> <span class="id"><a href="monae.state_lib.html#protect_put_ret">protect_put_ret</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/scanlM</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]/=</a></span>.<br/>
<span class="id">set</span> <span class="id">mul</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> (<span id="a:151" class="id"><span id="a:149" class="id"><span id="a:147" class="id"><a name="a:151" class="">a</a></span></span></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#loop.A">A</a></span>) <span id="m:152" class="id"><span id="m:150" class="id"><span id="m:148" class="id"><a name="m:152" class="">m</a></span></span></span> <span class="id">=&gt;</span> <span class="id">_</span>.<br/>
<span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">-!bindA</span>.<br/>
<span class="comment">(*&nbsp;TODO(rei):&nbsp;tactic&nbsp;for&nbsp;nested&nbsp;function&nbsp;bodies?&nbsp;*)</span><br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y:156" class="id"><span id="y:153" class="id"><a name="y:156" class="">y</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span> (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id">s</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span>) <span class="id">&gt;&gt;=</span> <span class="gallina-kwd">fun</span> <span id="z:157" class="id"><span id="z:154" class="id"><a name="z:157" class="">z</a></span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="a:158" class="id"><span id="a:155" class="id"><a name="a:158" class="">a</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="monae.state_lib.html#loop.op">op</a></span> <span class="id"><a href="monae.state_lib.html#z:154">z</a></span> <span class="id">x</span>)) (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#loop.op">op</a></span> <span class="id"><a href="monae.state_lib.html#z:154">z</a></span> <span class="id">x</span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id">mul</span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id">xs</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#y:153">y</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.state_lib.html#a:155">a</a></span>)%<span class="id">Do;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[LHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">-!bindA</span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#putget">putget</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#loop.scanlM_of_scanl_helper">scanlM_of_scanl_helper</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="monae.state_lib.html#loop.op">op</a></span> <span class="id">s</span> <span class="id">x</span>)) (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y:161" class="id"><span id="y:159" class="id"><a name="y:161" class="">y</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#loop.op">op</a></span> <span class="id">s</span> <span class="id">x</span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="a:162" class="id"><span id="a:160" class="id"><a name="a:162" class="">a</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id">mul</span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id">xs;</span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#y:159">y</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.state_lib.html#a:160">a</a></span>)))%<span class="id">Do;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">congr</span> (<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">_</a></span>)<span class="id">;</span> <span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#putput">putput</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id"><a href="monae.state_lib.html#loop.op">op</a></span> <span class="id">s</span> <span class="id">x</span>)) (<span class="id"><a href="monae.state_lib.html#protect">protect</a></span> (<span class="id"><a href="monae.state_lib.html#scanlM">scanlM</a></span> (<span class="id"><a href="monae.state_lib.html#loop.op">op</a></span> <span class="id">s</span> <span class="id">x</span>) <span class="id">xs</span>)))<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">congr</span> (<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">_</a></span>)<span class="id">;</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">-bindA</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-IH</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.state_lib.html#loop">loop</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.state_lib.html#scanlM">scanlM</a></span> <span class="id">{A</span> <span class="id">S</span> <span class="id">M}</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="section43" class="id"><a name="section43" class="">section43</a></span>.<br/>
<br/>
<span class="vernacular">Variables</span> (<span id="section43.S" class="id"><a name="section43.S" class="">S</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="section43.M" class="id"><a name="section43.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondetState.Exports.nondetStateMonad">nondetStateMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:163">S</a></span>).<br/>
<span class="vernacular">Variables</span> (<span id="section43.A" class="id"><a name="section43.A" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="section43.op" class="id"><a name="section43.op" class="">op</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#section43.S">S</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#A:165">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#section43.S">S</a></span>) (<span id="section43.ok" class="id"><a name="section43.ok" class="">ok</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.state_lib.html#section43.S">S</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="assert_all_scanl" class="id"><a name="assert_all_scanl" class="">assert_all_scanl</a></span> <span id="s:168" class="id"><a name="s:168" class="">s</a></span> (<span id="xs:169" class="id"><a name="xs:169" class="">xs</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#section43.A">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#assert">assert</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#scanl">scanl</a></span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#s:168">s</a></span>) <span class="id"><a href="monae.state_lib.html#xs:169">xs</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.state_lib.html#protect">protect</a></span> (<span class="id"><a href="monae.state_lib.html#scanlM">scanlM</a></span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#s:168">s</a></span> <span class="id"><a href="monae.state_lib.html#xs:169">xs</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="ys:170" class="id"><a name="ys:170" class="">ys</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> <span class="id"><a href="monae.state_lib.html#ys:170">ys</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.state_lib.html#xs:169">xs</a></span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.state_lib.html#section43.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#assertE">assertE</a></span> <span class="id"><a href="monae.hierarchy.html#guardsC">guardsC;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.state_lib.html#protect">protect</a></span> (<span class="id"><a href="monae.state_lib.html#scanlM">scanlM</a></span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id">s</span> <span class="id">xs</span>) <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="ys:172" class="id"><span id="ys:171" class="id"><a name="ys:172" class="">ys</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> <span class="id"><a href="monae.state_lib.html#ys:171">ys</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">xs</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#section43.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-!bindA</span> <span class="id">-scanlM_of_scanl</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id">!bindretf</span> <span class="id"><a href="monae.hierarchy.html#assertE">assertE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]/protect</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st</span>.<br/>
<span class="id">rewrite</span> <span class="id">2!bindA;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">xs'</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]bindA</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]guardsC;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/overwrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#assertE">assertE</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="put_foldr" class="id"><a name="put_foldr" class="">put_foldr</a></span> <span id="st:173" class="id"><a name="st:173" class="">st</a></span> <span id="x:174" class="id"><a name="x:174" class="">x</a></span> <span id="xs:175" class="id"><a name="xs:175" class="">xs</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#st:173">st</a></span> <span class="id"><a href="monae.state_lib.html#x:174">x</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x1:176" class="id"><a name="x1:176" class="">x1</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> (<span class="id"><a href="monae.state_lib.html#opmul">opmul</a></span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span>) (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.state_lib.html#xs:175">xs;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> <span class="id"><a href="monae.state_lib.html#x1:176">x1</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#st:173">st</a></span> <span class="id"><a href="monae.state_lib.html#x:174">x</a></span>)))%<span class="id">Do</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#st:173">st</a></span> <span class="id"><a href="monae.state_lib.html#x:174">x</a></span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#st:173">st</a></span> <span class="id"><a href="monae.state_lib.html#x:174">x</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="ys:177" class="id"><a name="ys:177" class="">ys</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> (<span class="id"><a href="monae.state_lib.html#opmul">opmul</a></span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span>) (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.state_lib.html#xs:175">xs;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> <span class="id"><a href="monae.state_lib.html#ys:177">ys</a></span>))%<span class="id">Do</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.state_lib.html#section43.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
<span class="id">elim:</span> <span class="id">xs</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">[x|h</span> <span class="id">t</span> <span class="id">_</span> <span class="id">x]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#skip">skip</a></span>) <span class="id">//=</span> <span class="id">?guardT</span> <span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindmskip">bindmskip;</a></span> <span class="id">case:</span> <span class="id"><a href="monae.hierarchy.html#guardPn">guardPn</a></span> <span class="id">=&gt;</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span> <span class="id"><a href="monae.hierarchy.html#bindmskip">bindmskip</a></span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id">!bindA</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id">st</span> <span class="id">x</span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x0:181" class="id"><span id="x0:178" class="id"><a name="x0:181" class="">x0</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#get">get;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x1:183" class="id"><span id="x1:180" class="id"><a name="x1:183" class="">x1</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="gallina-kwd">let</span> <span id="st':182" class="id"><span id="st':179" class="id"><a name="st':182" class="">st'</a></span></span> <span class="id">:=</span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#x0:178">x0</a></span> <span class="id">h</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.state_lib.html#st':179">st'</a></span>) (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="monae.state_lib.html#st':179">st'</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> (<span class="id"><a href="monae.state_lib.html#opmul">opmul</a></span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span>) (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id">t</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id">st</span> <span class="id">x</span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> <span class="id"><a href="monae.state_lib.html#x1:180">x1</a></span>))%<span class="id">Do</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#section43.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st'</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-guard_and</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbC">andbC</a></span> <span class="id"><a href="monae.hierarchy.html#guard_and">guard_and</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#guardsC">guardsC;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindA</span>.<br/>
<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st'</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindA</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#guardsC">guardsC</a></span> <span class="id">//;</span> <span class="id">exact:</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Let</span> <span id="section43.B" class="id"><a name="section43.B" class="">B</a></span> <span class="id">:=</span> <span class="id"><a href="monae.state_lib.html#section43.A">A</a></span>.<br/>
<span class="vernacular">Let</span> <span id="section43.res" class="id"><a name="section43.res" class="">res</a></span> <span class="id">:=</span> @<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.state_lib.html#section43.A">A</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="opdot" class="id"><a name="opdot" class="">opdot</a></span> (<span id="a:184" class="id"><a name="a:184" class="">a</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#section43.A">A</a></span>) (<span id="m:185" class="id"><a name="m:185" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#section43.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#section43.B">B</a></span>)) <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#section43.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#section43.B">B</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="st:186" class="id"><a name="st:186" class="">st</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#st:186">st</a></span> <span class="id"><a href="monae.state_lib.html#a:184">a</a></span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#st:186">st</a></span> <span class="id"><a href="monae.state_lib.html#a:184">a</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="monae.state_lib.html#section43.res">res</a></span> <span class="id"><a href="monae.state_lib.html#a:184">a</a></span>) <span class="id"><a href="monae.state_lib.html#m:185">m</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="theorem44" class="id"><a name="theorem44" class="">theorem44</a></span> (<span id="xs:187" class="id"><a name="xs:187" class="">xs</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#section43.A">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> (<span class="id"><a href="monae.state_lib.html#opmul">opmul</a></span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span>) (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.state_lib.html#xs:187">xs</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="ys:188" class="id"><a name="ys:188" class="">ys</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> <span class="id"><a href="monae.state_lib.html#ys:188">ys</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.state_lib.html#xs:187">xs</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.state_lib.html#opdot">opdot</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.state_lib.html#xs:187">xs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
<span class="id">elim:</span> <span class="id">xs</span> <span class="id">=&gt;</span> <span class="id">[|x</span> <span class="id">xs</span> <span class="id">IH];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]/=</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">{1}/opmul</span>.<br/>
<span class="id">rewrite</span> <span class="id">{1}bindA</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x0:191" class="id"><span id="x0:189" class="id"><a name="x0:191" class="">x0</a></span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#x0:189">x0</a></span> <span class="id">x</span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> (<span class="id"><a href="monae.state_lib.html#opmul">opmul</a></span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span>) (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id">xs</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="ys:192" class="id"><span id="ys:190" class="id"><a name="ys:192" class="">ys</a></span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#x0:189">x0</a></span> <span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.state_lib.html#ys:190">ys</a></span>))) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">xs</span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#section43.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap</a></span> <span class="id">!bindA</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x0:195" class="id"><span id="x0:193" class="id"><a name="x0:195" class="">x0</a></span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#x0:193">x0</a></span> <span class="id">x</span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> (<span class="id"><a href="monae.state_lib.html#opmul">opmul</a></span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span>) (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id">xs</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="ys:196" class="id"><span id="ys:194" class="id"><a name="ys:196" class="">ys</a></span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> <span class="id"><a href="monae.state_lib.html#ys:194">ys</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#x0:193">x0</a></span> <span class="id">x</span>))) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">xs</span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#section43.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!bindA</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">ys</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-guard_and</span>.<br/>
&nbsp;&nbsp;<span class="id">congr</span> (<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-cat1s</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all_cat">all_cat</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbC">andbC</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all_seq1">all_seq1</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="st:199" class="id"><span id="st:197" class="id"><a name="st:199" class="">st</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#st:197">st</a></span> <span class="id">x</span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#st:197">st</a></span> <span class="id">x</span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> (<span class="id"><a href="monae.state_lib.html#opmul">opmul</a></span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span>) (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id">xs</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="ys:200" class="id"><span id="ys:198" class="id"><a name="ys:200" class="">ys</a></span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> <span class="id"><a href="monae.state_lib.html#ys:198">ys</a></span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">xs</span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#section43.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-!bindA</span>.<br/>
&nbsp;&nbsp;<span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!bindA</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#put_foldr">put_foldr</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="st:203" class="id"><span id="st:201" class="id"><a name="st:203" class="">st</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#st:201">st</a></span> <span class="id">x</span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#put">put</a></span> (<span class="id"><a href="monae.state_lib.html#section43.op">op</a></span> <span class="id"><a href="monae.state_lib.html#st:201">st</a></span> <span class="id">x</span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">x</span>) (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> (<span class="id"><a href="monae.state_lib.html#opmul">opmul</a></span> <span class="id"><a href="monae.state_lib.html#section43.op">op</a></span>) (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id">xs</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="ys:204" class="id"><span id="ys:202" class="id"><a name="ys:204" class="">ys</a></span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.state_lib.html#section43.ok">ok</a></span> <span class="id"><a href="monae.state_lib.html#ys:202">ys</a></span>)) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">xs</span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#section43.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">st</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!bindA</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!fmap_bind</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.hierarchy.html#fmap_bind">fmap_bind</a></span> <span class="id">/=</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]/=</a></span> <span class="id">-IH</span> <span class="id">/opdot</span> <span class="id">!bindA</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.state_lib.html#section43">section43</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="intersect" class="id"><a name="intersect" class="">intersect</a></span> <span class="id">{A</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType}</a></span> (<span id="s:206" class="id"><a name="s:206" class="">s</a></span> <span id="t:207" class="id"><a name="t:207" class="">t</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:205">A</a></span>) <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:205">A</a></span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#mem">mem</a></span> <span class="id"><a href="monae.state_lib.html#s:206">s</a></span>) <span class="id"><a href="monae.state_lib.html#t:207">t</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nilp_intersect" class="id"><a name="nilp_intersect" class="">nilp_intersect</a></span> (<span id="A:208" class="id"><a name="A:208" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) (<span id="s:209" class="id"><a name="s:209" class="">s</a></span> <span id="t:210" class="id"><a name="t:210" class="">t</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:208">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nilp">nilp</a></span> (<span class="id"><a href="monae.state_lib.html#intersect">intersect</a></span> <span class="id"><a href="monae.state_lib.html#s:209">s</a></span> <span class="id"><a href="monae.state_lib.html#t:210">t</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351">~~</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#has">has</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#mem">mem</a></span> <span class="id"><a href="monae.state_lib.html#s:209">s</a></span>) <span class="id"><a href="monae.state_lib.html#t:210">t</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/intersect</span> <span class="id">/nilp</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_filter">size_filter</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#has_count">has_count</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#lt0n">lt0n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbK">negbK</a></span>. Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="seq_disjoint" class="id"><a name="seq_disjoint" class="">seq_disjoint</a></span> <span class="id">{A</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType}</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#2b9222c46a529018a8ebb5be6355801c">[eqType</a></span> <span class="id">of</span> <span class="id"><a href="monae.monad_lib.html#Squaring">Squaring</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:211">A</a></span>)<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#2b9222c46a529018a8ebb5be6355801c">]</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;(@<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nilp">nilp</a></span> <span class="id">_</span>) <span class="id">\o</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#uncurry">uncurry</a></span> <span class="id"><a href="monae.state_lib.html#intersect">intersect</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="intersect0s" class="id"><a name="intersect0s" class="">intersect0s</a></span> (<span id="A:212" class="id"><a name="A:212" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) (<span id="s:213" class="id"><a name="s:213" class="">s</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:212">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#intersect">intersect</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="monae.state_lib.html#s:213">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
 <span class="gallina-kwd">by</span> <span class="id">elim:</span> <span class="id">s</span>. Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="promotable" class="id"><a name="promotable" class="">promotable</a></span> (<span id="A:214" class="id"><a name="A:214" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="p:215" class="id"><a name="p:215" class="">p</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:214">A</a></span>)) (<span id="q:216" class="id"><a name="q:216" class="">q</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:214">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:214">A</a></span>)) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:217" class="id"><a name="s:217" class="">s</a></span> <span id="t:218" class="id"><a name="t:218" class="">t,</a></span> <span class="id"><a href="monae.state_lib.html#p:215">p</a></span> <span class="id"><a href="monae.state_lib.html#s:217">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#p:215">p</a></span> <span class="id"><a href="monae.state_lib.html#t:218">t</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#p:215">p</a></span> (<span class="id"><a href="monae.state_lib.html#s:217">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.state_lib.html#t:218">t</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.state_lib.html#q:216">q</a></span> (<span class="id"><a href="monae.state_lib.html#s:217">s,</a></span> <span class="id"><a href="monae.state_lib.html#t:218">t</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="segment_closed_suffix" class="id"><a name="segment_closed_suffix" class="">segment_closed_suffix</a></span> (<span id="A:219" class="id"><a name="A:219" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="p:220" class="id"><a name="p:220" class="">p</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#segment_closed.t">segment_closed.t</a></span> <span class="id"><a href="monae.state_lib.html#A:219">A</a></span>) <span id="s:221" class="id"><a name="s:221" class="">s</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351">~~</a></span> <span class="id"><a href="monae.state_lib.html#p:220">p</a></span> <span class="id"><a href="monae.state_lib.html#s:221">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">forall</span> <span id="t:222" class="id"><a name="t:222" class="">t,</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351">~~</a></span> <span class="id"><a href="monae.state_lib.html#p:220">p</a></span> (<span class="id"><a href="monae.state_lib.html#s:221">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.state_lib.html#t:222">t</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
 <span class="id">move=&gt;</span> <span class="id">ps</span> <span class="id">t;</span> <span class="id">apply:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra">contra</a></span> <span class="id">ps;</span> <span class="gallina-kwd">by</span> <span class="id">case/segment_closed</span>.<span class="id">H</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="segment_closed_prefix" class="id"><a name="segment_closed_prefix" class="">segment_closed_prefix</a></span> (<span id="A:223" class="id"><a name="A:223" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="p:224" class="id"><a name="p:224" class="">p</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#segment_closed.t">segment_closed.t</a></span> <span class="id"><a href="monae.state_lib.html#A:223">A</a></span>) <span id="s:225" class="id"><a name="s:225" class="">s</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351">~~</a></span> <span class="id"><a href="monae.state_lib.html#p:224">p</a></span> <span class="id"><a href="monae.state_lib.html#s:225">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">forall</span> <span id="t:226" class="id"><a name="t:226" class="">t,</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351">~~</a></span> <span class="id"><a href="monae.state_lib.html#p:224">p</a></span> (<span class="id"><a href="monae.state_lib.html#t:226">t</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.state_lib.html#s:225">s</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
 <span class="id">move=&gt;</span> <span class="id">ps</span> <span class="id">t;</span> <span class="id">apply:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra">contra</a></span> <span class="id">ps;</span> <span class="gallina-kwd">by</span> <span class="id">case/segment_closed</span>.<span class="id">H</span>. Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<span class="vernacular">Definition</span> <span id="promote_assert" class="id"><a name="promote_assert" class="">promote_assert</a></span> (<span id="M:227" class="id"><a name="M:227" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadFail.Exports.failMonad">failMonad</a></span>) (<span id="A:228" class="id"><a name="A:228" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>)<br/>
&nbsp;&nbsp;(<span id="p:229" class="id"><a name="p:229" class="">p</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:228">A</a></span>)) (<span id="q:230" class="id"><a name="q:230" class="">q</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:228">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.state_lib.html#A:228">A</a></span>)) <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#bassert">bassert</a></span> <span class="id"><a href="monae.state_lib.html#p:229">p</a></span>) <span class="id">\o</span> (<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> <span class="id"><a href="monae.monae_lib.html#ucat">ucat</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="monae.monad_lib.html#mpair">mpair</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> <span class="id"><a href="monae.monae_lib.html#ucat">ucat</a></span>) <span class="id">\o</span> (<span class="id"><a href="monae.hierarchy.html#bassert">bassert</a></span> <span class="id"><a href="monae.state_lib.html#q:230">q</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="monae.monad_lib.html#mpair">mpair</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> (<span class="id"><a href="monae.hierarchy.html#bassert">bassert</a></span> <span class="id"><a href="monae.state_lib.html#p:229">p</a></span>)<span class="id">^`2</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#M:227">M</a></span> <span class="id">_</span>).<br/>
<span class="vernacular">Local</span> <span class="vernacular">Close</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="promote_assert_sufficient_condition" class="id"><a name="promote_assert_sufficient_condition" class="">promote_assert_sufficient_condition</a></span> (<span id="M:231" class="id"><a name="M:231" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadFail.Exports.failMonad">failMonad</a></span>) (<span id="A:232" class="id"><a name="A:232" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#BindLaws.right_zero">BindLaws.right_zero</a></span> (@<span class="id"><a href="monae.hierarchy.html#bind">bind</a></span> <span class="id"><a href="monae.state_lib.html#M:231">M</a></span>) (@<span class="id"><a href="monae.hierarchy.html#fail">fail</a></span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="p:233" class="id"><a name="p:233" class="">p</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#segment_closed.t">segment_closed.t</a></span> <span class="id"><a href="monae.state_lib.html#A:232">A</a></span>) <span id="q:234" class="id"><a name="q:234" class="">q,</a></span> <span class="id"><a href="monae.state_lib.html#promotable">promotable</a></span> <span class="id"><a href="monae.state_lib.html#p:233">p</a></span> <span class="id"><a href="monae.state_lib.html#q:234">q</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.state_lib.html#promote_assert">promote_assert</a></span> <span class="id"><a href="monae.state_lib.html#M:231">M</a></span> <span class="id"><a href="monae.state_lib.html#p:233">p</a></span> <span class="id"><a href="monae.state_lib.html#q:234">q</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
<span class="id">move=&gt;</span> <span class="id">right_z</span> <span class="id">p</span> <span class="id">q</span> <span class="id">promotable_pq</span>.<br/>
<span class="id">rewrite</span> <span class="id">/promote_assert;</span> <span class="id">apply:</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span> <span class="id">=&gt;</span> <span class="id">-[x1</span> <span class="id">x2]</span>.<br/>
<span class="id">rewrite</span> <span class="id">3![in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]compE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]fmapE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">2![in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]compE</a></span> <span class="id">{1}/bassert</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]bind_fmap</a></span> <span class="id">!bindA</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">case:</span> <span class="id"><a href="monae.hierarchy.html#assertPn">assertPn</a></span> <span class="id">=&gt;</span> <span class="id">ps;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>.<br/>
&nbsp;&nbsp;<span class="id">With</span> (<span class="id">idtac</span>) <span class="vernacular">Open</span> (<span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.state_lib.html#X:235">X</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">/assert;</span> <span class="id">unlock</span> <span class="id">=&gt;</span> <span class="id">/=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> (<span class="id"><a href="monae.state_lib.html#segment_closed_suffix">segment_closed_suffix</a></span> <span class="id">ps</span> <span class="id">x</span>)) <span class="id"><a href="monae.hierarchy.html#guardF">guardF</a></span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">right_z</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id">/=</span>.<br/>
<span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">t</span>.<br/>
<span class="id">case:</span> (<span class="id"><a href="monae.hierarchy.html#assertPn">assertPn</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">t</span>) <span class="id">=&gt;</span> <span class="id">pt;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span> <span class="id"><a href="monae.hierarchy.html#assertE">assertE</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> (<span class="id"><a href="monae.state_lib.html#segment_closed_prefix">segment_closed_prefix</a></span> <span class="id">pt</span> <span class="id">s</span>)) <span class="id"><a href="monae.hierarchy.html#guardF">guardF</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span>  <span class="id">2!assertE</span> <span class="id">promotable_pq</span> <span class="id">//=</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="examples_promotable_segment_closed" class="id"><a name="examples_promotable_segment_closed" class="">examples_promotable_segment_closed</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="promotable_uniq_seq_disjoint" class="id"><a name="promotable_uniq_seq_disjoint" class="">promotable_uniq_seq_disjoint</a></span> <span id="A:236" class="id"><a name="A:236" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#promotable">promotable</a></span> (@<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#uniq">uniq</a></span> <span class="id"><a href="monae.state_lib.html#A:236">A</a></span>) <span class="id"><a href="monae.state_lib.html#seq_disjoint">seq_disjoint</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
<span class="id">move=&gt;</span> <span class="id">s</span> <span class="id">t</span> <span class="id">ps</span> <span class="id">pt</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cat_uniq">cat_uniq</a></span> <span class="id">ps</span> <span class="id">pt</span> <span class="id">/=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">andbT</a></span> <span class="id">-nilp_intersect</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Obligation</span> <span class="vernacular">Tactic</span> <span class="id">:=</span> <span class="id">idtac</span>.<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="uniq_is_segment_closed" class="id"><a name="uniq_is_segment_closed" class="">uniq_is_segment_closed</a></span> (<span id="A:237" class="id"><a name="A:237" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#segment_closed.t">segment_closed.t</a></span> <span class="id"><a href="monae.state_lib.html#A:237">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="monae.hierarchy.html#segment_closed.mk">segment_closed.mk</a></span> <span class="id">_</span> (@<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#uniq">uniq</a></span> <span class="id"><a href="monae.state_lib.html#A:237">A</a></span>) <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Next Obligation.</span></div>
<div class="proofscript" id="proof25">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">A</span> <span class="id">a</span> <span class="id">b;</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cat_uniq">cat_uniq</a></span> <span class="id">=&gt;</span> <span class="id">/and3P[]</span>. Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="is_iota" class="id"><a name="is_iota" class="">is_iota</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>) <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#27dabc72ea2c2c768f2db80a79f42524">[pred</a></span> <span id="x:238" class="id"><a name="x:238" class="">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#27dabc72ea2c2c768f2db80a79f42524">|</a></span> <span class="id"><a href="monae.state_lib.html#x:238">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iota">iota</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#head">head</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span> <span class="id"><a href="monae.state_lib.html#x:238">x</a></span>) (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.state_lib.html#x:238">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#27dabc72ea2c2c768f2db80a79f42524">]</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="is_iota_head_last" class="id"><a name="is_iota_head_last" class="">is_iota_head_last</a></span> <span id="s:239" class="id"><a name="s:239" class="">s</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#is_iota">is_iota</a></span> <span class="id"><a href="monae.state_lib.html#s:239">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.state_lib.html#s:239">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#head">head</a></span> <span class="id">0</span> <span class="id"><a href="monae.state_lib.html#s:239">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.state_lib.html#s:239">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#last">last</a></span> <span class="id">0</span> <span class="id"><a href="monae.state_lib.html#s:239">s</a></span>).<span class="id">+1</span>.<br/>
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">//=</span> <span class="id">a</span> <span class="id">[_</span> <span class="id">/=|c</span> <span class="id">d</span> <span class="id">IH]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addn1">addn1</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/is_iota</span> <span class="id">/=</span> <span class="id">=&gt;</span> <span class="id">/eqP[]</span> <span class="id">?;</span> <span class="id">subst</span> <span class="id">c</span> <span class="id">=&gt;</span> <span class="id">Hd</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="gallina-kwd">in</span> <span class="id">IH</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-IH</span> <span class="id">//</span> <span class="id">-?addSnnS</span> <span class="id">//</span> <span class="id">/is_iota</span> <span class="id">/=</span> <span class="id">-Hd</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="are_adjacent" class="id"><a name="are_adjacent" class="">are_adjacent</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>)%<span class="id">type</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#27dabc72ea2c2c768f2db80a79f42524">[pred</a></span> <span id="xy:240" class="id"><a name="xy:240" class="">xy</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#27dabc72ea2c2c768f2db80a79f42524">|</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#6e3f5b731a46299b833a2834f381d536">[||</a></span> <span class="id"><a href="monae.state_lib.html#xy:240">xy</a></span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#6e3f5b731a46299b833a2834f381d536">,</a></span> <span class="id"><a href="monae.state_lib.html#xy:240">xy</a></span>.<span class="id">2</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#6e3f5b731a46299b833a2834f381d536">|</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#last">last</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span> <span class="id"><a href="monae.state_lib.html#xy:240">xy</a></span>.<span class="id">1</span>).<span class="id">+1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#head">head</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span> <span class="id"><a href="monae.state_lib.html#xy:240">xy</a></span>.<span class="id">2]]</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="promotable_enum" class="id"><a name="promotable_enum" class="">promotable_enum</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#promotable">promotable</a></span> <span class="id"><a href="monae.state_lib.html#is_iota">is_iota</a></span> <span class="id"><a href="monae.state_lib.html#are_adjacent">are_adjacent</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
<span class="id">move=&gt;</span> <span class="id">s</span> <span class="id">t</span> <span class="id">Hs</span> <span class="id">Ht</span>.<br/>
<span class="id">rewrite</span> <span class="id">/is_iota</span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_cat">size_cat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#iotaD">iotaD</a></span>.<br/>
<span class="id">case/boolP</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nilp">nilp</a></span> <span class="id">s</span>) <span class="id">=&gt;</span> <span class="id">[/nilP</span> <span class="id">-&gt;{Hs</span> <span class="id">s}</span> <span class="id">/=|s0];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addn0">addn0</a></span> <span class="id">/are_adjacent</span>.<br/>
<span class="id">rewrite</span> <span class="id">/nilp</span> <span class="id">-lt0n</span> <span class="gallina-kwd">in</span> <span class="id">s0</span>.<br/>
<span class="id">have</span> <span class="id">-&gt;</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#head">head</a></span> <span class="id">0</span> (<span class="id">s</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id">t</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#head">head</a></span> <span class="id">0</span> <span class="id">s</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-nth0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nth_cat">nth_cat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#sub0n">sub0n</a></span> <span class="id">s0</span>.<br/>
<span class="id">rewrite</span> <span class="id">-</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eqP">eqP</a></span> <span class="id">Hs</span>) <span class="id">/are_adjacent</span> <span class="id">/=</span> <span class="id">-size_eq0</span> <span class="id">-</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbK">negbK</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id">_</span>)) <span class="id">-lt0n</span> <span class="id">s0</span> <span class="id">/=</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#eqseq_cat">eqseq_cat</a></span> <span class="id">//</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eqxx">eqxx</a></span> <span class="id">/=</span>.<br/>
<span class="id">case/boolP</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nilp">nilp</a></span> <span class="id">t</span>) <span class="id">=&gt;</span> <span class="id">[/nilP</span> <span class="id">{Ht}</span> <span class="id">-&gt;{t}</span> <span class="id">//|t0]</span>.<br/>
<span class="id">rewrite</span> <span class="id">/nilp</span> <span class="id">-lt0n</span> <span class="gallina-kwd">in</span> <span class="id">t0</span>.<br/>
<span class="id">rewrite</span> <span class="id">-</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_eq0">size_eq0</a></span> <span class="id">t</span>) <span class="id">-</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbK">negbK</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">t</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id">_</span>)) <span class="id">-lt0n</span> <span class="id">t0</span> <span class="id">/=</span>.<br/>
<span class="id">case:</span> <span class="id">t</span> <span class="id">Ht</span> <span class="id">t0</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">a</span> <span class="id">b</span> <span class="id">Hab</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> <span class="id">[head</span> <span class="id">_</span> (<span class="id">_</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">_</span>)<span class="id">]/=</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#is_iota_head_last">is_iota_head_last</a></span> <span class="id">//=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#eqseq_cons">eqseq_cons</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eq_sym">eq_sym</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andb_idr">andb_idr</a></span> <span class="id">//</span> <span class="id">=&gt;</span> <span class="id">/eqP</span> <span class="id">Ha</span>.<br/>
<span class="id">move:</span> <span class="id">Hab</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/is_iota</span> <span class="id">/=</span> <span class="id">=&gt;</span> <span class="id">/eqP[]</span> <span class="id">{1}-&gt;;</span> <span class="id">rewrite</span> <span class="id">-Ha</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Obligation</span> <span class="vernacular">Tactic</span> <span class="id">:=</span> <span class="id">idtac</span>.<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="is_iota_is_segment_closed" class="id"><a name="is_iota_is_segment_closed" class="">is_iota_is_segment_closed</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#segment_closed.t">segment_closed.t</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="monae.hierarchy.html#segment_closed.mk">segment_closed.mk</a></span> <span class="id">_</span> <span class="id"><a href="monae.state_lib.html#is_iota">is_iota</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Next Obligation.</span></div>
<div class="proofscript" id="proof27">
<span class="id">move=&gt;</span> <span class="id">a</span> <span class="id">b</span>.<br/>
<span class="id">rewrite</span> <span class="id">/is_iota</span> <span class="id">/=</span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_cat">size_cat</a></span> <span class="id">=&gt;</span> <span class="id">/eqP</span> <span class="id">Hab</span>.<br/>
<span class="id">apply/andP;</span> <span class="id">rewrite</span> <span class="id">-eqseq_cat</span> <span class="id">?size_iota</span> <span class="id">//;</span> <span class="id">apply/eqP</span>.<br/>
<span class="id">case/boolP</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nilp">nilp</a></span> <span class="id">a</span>) <span class="id">=&gt;</span> <span class="id">[/nilP</span> <span class="id">a0|a0];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">Hab;</span> <span class="id">rewrite</span> <span class="id">a0</span>.<br/>
<span class="id">case/boolP</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nilp">nilp</a></span> <span class="id">b</span>) <span class="id">=&gt;</span> <span class="id">[/nilP</span> <span class="id">b0|b0]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">Hab;</span> <span class="id">rewrite</span> <span class="id">b0</span> <span class="id">/=</span> <span class="id">!cats0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addn0">addn0</a></span>.<br/>
<span class="id">have</span> <span class="id">-&gt;</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#head">head</a></span> <span class="id">0</span> <span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#head">head</a></span> <span class="id">0</span> <span class="id">a</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="id">move/</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#congr1">congr1</a></span> (<span class="gallina-kwd">fun</span> <span id="x:241" class="id"><a name="x:241" class="">x</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nth">nth</a></span> <span class="id">0</span> <span class="id"><a href="monae.state_lib.html#x:241">x</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">a</span>))) <span class="id">:</span> <span class="id">Hab</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nth_cat">nth_cat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnn">ltnn</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#subnn">subnn</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nth0">nth0</a></span> <span class="id">=&gt;</span> <span class="id">-&gt;;</span> <span class="id">rewrite</span> <span class="id">-nth0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nth_cat">nth_cat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#lt0n">lt0n</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">a0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nth0">nth0</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nth_iota">nth_iota</a></span> <span class="id">//</span> <span class="id">-{1}</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addn0">addn0</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">a</span>)) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltn_add2l">ltn_add2l</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#lt0n">lt0n</a></span>.<br/>
<span class="id">suff</span> <span class="id">&lt;-</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#head">head</a></span> <span class="id">0</span> (<span class="id">a</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id">b</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#head">head</a></span> <span class="id">0</span> <span class="id">a</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-iotaD</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-nth0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nth_cat">nth_cat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#lt0n">lt0n</a></span> <span class="id">a0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.state_lib.html#examples_promotable_segment_closed">examples_promotable_segment_closed</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="properties_of_Symbols" class="id"><a name="properties_of_Symbols" class="">properties_of_Symbols</a></span>.<br/>
<span class="vernacular">Variables</span> (<span id="properties_of_Symbols.A" class="id"><a name="properties_of_Symbols.A" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) (<span id="properties_of_Symbols.M" class="id"><a name="properties_of_Symbols.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadFailFresh.Exports.failFreshMonad">failFreshMonad</a></span> <span class="id"><a href="monae.state_lib.html#A:242">A</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="symbolsE" class="id"><a name="symbolsE" class="">symbolsE</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#symbols">symbols</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> (<span class="gallina-kwd">fun</span> <span id="n:244" class="id"><a name="n:244" class="">n</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#sequence">sequence</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nseq">nseq</a></span> <span class="id"><a href="monae.state_lib.html#n:244">n</a></span> <span class="id"><a href="monae.hierarchy.html#fresh">fresh</a></span>)) <span class="id">:&gt;</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#properties_of_Symbols.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
 <span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id"><a href="monae.state_lib.html#properties_of_Symbols.M">M</a></span> <span class="id">=&gt;</span> <span class="id">m</span> <span class="id">[?</span> <span class="id">?</span> <span class="id">[]]</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="symbols0" class="id"><a name="symbols0" class="">symbols0</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#symbols">symbols</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.state_lib.html#properties_of_Symbols.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#symbolsE">symbolsE</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="symbolsS" class="id"><a name="symbolsS" class="">symbolsS</a></span> <span id="n:245" class="id"><a name="n:245" class="">n</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#symbols">symbols</a></span> <span class="id"><a href="monae.state_lib.html#n:245">n</a></span>.<span class="id">+1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:246" class="id"><a name="x:246" class="">x</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#fresh">fresh</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="xs:247" class="id"><a name="xs:247" class="">xs</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#symbols">symbols</a></span> <span class="id"><a href="monae.state_lib.html#n:245">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#properties_of_Symbols.M">M</a></span> <span class="id">_;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.state_lib.html#x:246">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.state_lib.html#xs:247">xs</a></span>))%<span class="id">Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#symbolsE">symbolsE</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="symbols_prop1" class="id"><a name="symbols_prop1" class="">symbols_prop1</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#symbols">symbols</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="monae.monae_lib.html#const">const</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> (<span class="id"><a href="monae.state_lib.html#properties_of_Symbols.M">M</a></span> <span class="id"><a href="monae.hierarchy.html#5ffd50877ab4fcdc0107cf881b980bc8">#</a></span> <span class="id"><a href="monae.monae_lib.html#wrap">wrap</a></span>) <span class="id">\o</span> <span class="id"><a href="monae.monae_lib.html#const">const</a></span> <span class="id"><a href="monae.hierarchy.html#fresh">fresh</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id"><a href="monae.state_lib.html#properties_of_Symbols.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#properties_of_Symbols.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
<span class="id">apply:</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span> <span class="id">=&gt;</span> <span class="id">n</span>.<br/>
<span class="id">transitivity</span> (@<span class="id"><a href="monae.hierarchy.html#symbols">symbols</a></span> <span class="id">_</span> <span class="id"><a href="monae.state_lib.html#properties_of_Symbols.M">M</a></span> <span class="id">1</span>) <span class="id">=&gt;</span> <span class="id">//</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.state_lib.html#symbolsE">symbolsE</a></span> <span class="id"><a href="monae.hierarchy.html#sequence_cons">sequence_cons</a></span> <span class="id"><a href="monae.hierarchy.html#sequence_nil">sequence_nil</a></span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]fmapE</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="symbols_prop2" class="id"><a name="symbols_prop2" class="">symbols_prop2</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#symbols">symbols</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="monae.monae_lib.html#uaddn">uaddn</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> <span class="id"><a href="monae.monae_lib.html#ucat">ucat</a></span>) <span class="id">\o</span> <span class="id"><a href="monae.monad_lib.html#mpair">mpair</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> (<span class="id"><a href="monae.hierarchy.html#symbols">symbols</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.state_lib.html#properties_of_Symbols.M">M</a></span> <span class="id">_</span>)<span class="id">^`2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
<span class="id">apply:</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span> <span class="id">=&gt;</span> <span class="id">-[n1</span> <span class="id">n2]</span>.<br/>
<span class="id">elim:</span> <span class="id">n1</span> <span class="id">=&gt;</span> <span class="id">[|n1</span> <span class="id">IH]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]compE</a></span> <span class="id"><a href="monae.monae_lib.html#uaddnE">uaddnE</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#add0n">add0n</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">_</span> <span class="id"><a href="monae.state_lib.html#X:248">X]/=</a></span> <span class="id"><a href="monae.monad_lib.html#squaringE">squaringE</a></span> <span class="id"><a href="monae.state_lib.html#symbols0">symbols0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-fmapE</span> <span class="id"><a href="monae.hierarchy.html#fmap_bind">fmap_bind</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Open</span> (<span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.state_lib.html#X:249">X</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=;</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindmret">bindmret</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id"><a href="monae.monae_lib.html#uaddnE">uaddnE</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addSn">addSn</a></span> <span class="id"><a href="monae.state_lib.html#symbolsS">symbolsS</a></span> <span class="id">-uaddnE</span> <span class="id">-</span>(<span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id"><a href="monae.hierarchy.html#symbols">symbols</a></span>) <span class="id">{}IH</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]compE</a></span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">_</span> <span class="id"><a href="monae.state_lib.html#X:250">X]/=</a></span> <span class="id"><a href="monae.monad_lib.html#squaringE">squaringE</a></span> <span class="id"><a href="monae.state_lib.html#symbolsS">symbolsS</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]compE</a></span> <span class="id">-/</span>(<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">_</a></span>) <span class="id"><a href="monae.hierarchy.html#fmap_bind">fmap_bind</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">a</span>.<br/>
<span class="id">rewrite</span> <span class="id">2![in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]compE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]fmap_bind</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]bindA</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]bindA</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]bindretf</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]fcompE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]fmap_bind</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]fcompE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]bind_fmap</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]bindA</a></span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.state_lib.html#properties_of_Symbols">properties_of_Symbols</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="swap" class="id"><a name="swap" class="">swap</a></span> <span class="id">{S</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType}</a></span> <span class="id">{I</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType}</a></span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadArray.Exports.arrayMonad">arrayMonad</a></span> <span class="id"><a href="monae.state_lib.html#S:251">S</a></span> <span class="id"><a href="monae.state_lib.html#I:252">I}</a></span> (<span id="i:254" class="id"><a name="i:254" class="">i</a></span> <span id="j:255" class="id"><a name="j:255" class="">j</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#I:252">I</a></span>) <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#M:253">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:256" class="id"><a name="x:256" class="">x</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="monae.state_lib.html#i:254">i</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y:257" class="id"><a name="y:257" class="">y</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="monae.state_lib.html#j:255">j</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="monae.state_lib.html#i:254">i</a></span> <span class="id"><a href="monae.state_lib.html#y:257">y</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="monae.state_lib.html#j:255">j</a></span> <span class="id"><a href="monae.state_lib.html#x:256">x</a></span>)%<span class="id">Do</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="monadarray_example" class="id"><a name="monadarray_example" class="">monadarray_example</a></span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">do_notation</span>.<br/>
<span class="vernacular">Variable</span> <span id="monadarray_example.M" class="id"><a name="monadarray_example.M" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadArray.Exports.arrayMonad">arrayMonad</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#bool_eqType">bool_eqType</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="does_swap" class="id"><a name="does_swap" class="">does_swap</a></span> (<span id="m:259" class="id"><a name="m:259" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#monadarray_example.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:260" class="id"><a name="x:260" class="">x</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y:261" class="id"><a name="y:261" class="">y</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.state_lib.html#m:259">m</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x':262" class="id"><a name="x':262" class="">x'</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y':263" class="id"><a name="y':263" class="">y'</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> ((<span class="id"><a href="monae.state_lib.html#x:260">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#y':263">y'</a></span>) &amp;&amp; (<span class="id"><a href="monae.state_lib.html#y:261">y</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#x':262">x'</a></span>))).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="swapP" class="id"><a name="swapP" class="">swapP</a></span> (<span id="m:264" class="id"><a name="m:264" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#monadarray_example.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.state_lib.html#does_swap">does_swap</a></span> (<span class="id"><a href="monae.state_lib.html#swap">swap</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.state_lib.html#swap">swap</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
<span class="id">rewrite</span> <span class="id">/swap</span> <span class="id">/does_swap</span>.<br/>
<span class="id">transitivity</span> (<br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:271" class="id"><span id="x:265" class="id"><a name="x:271" class="">x</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y:272" class="id"><span id="y:266" class="id"><a name="y:272" class="">y</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x0:273" class="id"><span id="x0:267" class="id"><a name="x0:273" class="">x0</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y0:274" class="id"><span id="y0:268" class="id"><a name="y0:274" class="">y0</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span> <span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="monae.state_lib.html#y0:268">y0</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="monae.state_lib.html#x0:267">x0</a></span>) <span class="id">&gt;&gt;</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x':275" class="id"><span id="x':269" class="id"><a name="x':275" class="">x'</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y':276" class="id"><span id="y':270" class="id"><a name="y':276" class="">y'</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> ((<span class="id"><a href="monae.state_lib.html#x:265">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#y':270">y'</a></span>) &amp;&amp; (<span class="id"><a href="monae.state_lib.html#y:266">y</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#x':269">x'</a></span>))) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#monadarray_example.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#agetC">agetC</a></span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#agetget">agetget</a></span>.<br/>
<span class="id">transitivity</span> (<br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:282" class="id"><span id="x:277" class="id"><a name="x:282" class="">x</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="s:283" class="id"><span id="s:278" class="id"><a name="s:283" class="">s</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y0:284" class="id"><span id="y0:279" class="id"><a name="y0:284" class="">y0</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span> (<span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="monae.state_lib.html#y0:279">y0</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="monae.state_lib.html#s:278">s</a></span>) <span class="id">&gt;&gt;</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x':285" class="id"><span id="x':280" class="id"><a name="x':285" class="">x'</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y':286" class="id"><span id="y':281" class="id"><a name="y':286" class="">y'</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> ((<span class="id"><a href="monae.state_lib.html#s:278">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#y':281">y'</a></span>) &amp;&amp; (<span class="id"><a href="monae.state_lib.html#x:277">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#x':280">x'</a></span>))) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#monadarray_example.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#agetC">agetC</a></span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#agetget">agetget</a></span>.<br/>
<span class="id">transitivity</span> (<br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:291" class="id"><span id="x:287" class="id"><a name="x:291" class="">x</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="s:292" class="id"><span id="s:288" class="id"><a name="s:292" class="">s</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="monae.state_lib.html#s:288">s</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> (<span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="monae.state_lib.html#x:287">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y':293" class="id"><span id="y':289" class="id"><a name="y':293" class="">y'</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x':294" class="id"><span id="x':290" class="id"><a name="x':294" class="">x'</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> ((<span class="id"><a href="monae.state_lib.html#x:287">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#y':289">y'</a></span>) &amp;&amp; (<span class="id"><a href="monae.state_lib.html#s:288">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#x':290">x'</a></span>)))) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#monadarray_example.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>. <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y</span>. <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>. <span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#agetC">agetC</a></span>.<br/>
<span class="id">transitivity</span> (<br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:298" class="id"><span id="x:295" class="id"><a name="x:298" class="">x</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="s:299" class="id"><span id="s:296" class="id"><a name="s:299" class="">s</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="monae.state_lib.html#s:296">s</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> (<span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="monae.state_lib.html#x:295">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x':300" class="id"><span id="x':297" class="id"><a name="x':300" class="">x'</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> ((<span class="id"><a href="monae.state_lib.html#x:295">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#x:295">x</a></span>) &amp;&amp; (<span class="id"><a href="monae.state_lib.html#s:296">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#x':297">x'</a></span>)))) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#monadarray_example.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-bindA</span> <span class="id"><a href="monae.hierarchy.html#aputget">aputget</a></span>.<br/>
<span class="id">transitivity</span> (<br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:304" class="id"><span id="x:301" class="id"><a name="x:304" class="">x</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="s:305" class="id"><span id="s:302" class="id"><a name="s:305" class="">s</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="monae.state_lib.html#x:301">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="monae.state_lib.html#s:302">s</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x':306" class="id"><span id="x':303" class="id"><a name="x':306" class="">x'</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> ((<span class="id"><a href="monae.state_lib.html#x:301">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#x:301">x</a></span>) &amp;&amp; (<span class="id"><a href="monae.state_lib.html#s:302">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#x':303">x'</a></span>)))) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#monadarray_example.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-bindA</span> <span class="id"><a href="monae.hierarchy.html#aputC">aputC</a></span> <span class="id">//=;</span> <span class="id">left</span>.<br/>
<span class="id">transitivity</span> (<br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:309" class="id"><span id="x:307" class="id"><a name="x:309" class="">x</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="s:310" class="id"><span id="s:308" class="id"><a name="s:310" class="">s</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="monae.state_lib.html#x:307">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="monae.state_lib.html#s:308">s</a></span>) <span class="id">&gt;&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> ((<span class="id"><a href="monae.state_lib.html#x:307">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#x:307">x</a></span>) &amp;&amp; (<span class="id"><a href="monae.state_lib.html#s:308">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.state_lib.html#s:308">s</a></span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#monadarray_example.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">2!bindA</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-bindA</span> <span class="id"><a href="monae.hierarchy.html#aputget">aputget</a></span>.<br/>
<span class="id">transitivity</span> (<br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:313" class="id"><span id="x:311" class="id"><a name="x:313" class="">x</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="s:314" class="id"><span id="s:312" class="id"><a name="s:314" class="">s</a></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#aget">aget</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="monae.state_lib.html#x:311">x</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#aput">aput</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="monae.state_lib.html#s:312">s</a></span>) <span class="id">&gt;&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.state_lib.html#monadarray_example.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">2!eqxx</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">y</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#aputC">aputC</a></span> <span class="id">//;</span> <span class="id">left</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.state_lib.html#monadarray_example">monadarray_example</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="tick_fusion" class="id"><a name="tick_fusion" class="">tick_fusion</a></span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadState.Exports.stateMonad">stateMonad</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat}</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="tick" class="id"><a name="tick" class="">tick</a></span> <span class="id">:</span> <span class="id"><a href="monae.state_lib.html#tick_fusion.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id">:=</span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#succn">succn</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="tick_fusion" class="id"><a name="tick_fusion" class="">tick_fusion</a></span> <span id="n:316" class="id"><a name="n:316" class="">n</a></span> <span class="id">:</span> <span class="id"><a href="monae.monad_lib.html#rep">rep</a></span> <span class="id"><a href="monae.state_lib.html#n:316">n</a></span> <span class="id"><a href="monae.state_lib.html#tick">tick</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#get">get</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="id"><a href="monae.hierarchy.html#put">put</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addn">addn</a></span> <span class="id"><a href="monae.state_lib.html#n:316">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
<span class="id">elim:</span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id">[|n</span> <span class="id">ih];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-getputskip</span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id">/tick</span> <span class="id">ih</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">m</span>.<br/>
<span class="id">rewrite</span> <span class="id">-bindA</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#putget">putget</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#putput">putput</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addSnnS">addSnnS</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.state_lib.html#tick_fusion">tick_fusion</a></span>.<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
