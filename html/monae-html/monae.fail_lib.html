
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module monae.fail_lib</title>
<meta name="description" content="Documentation of Coq module monae.fail_lib" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">
<h1 class="title">Module monae.fail_lib</h1>
<div class="coq">
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.all_ssreflect.html">all_ssreflect</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp">boolp</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="monae.monae_lib.html">monae_lib</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">HB</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="NOTFOUND the module url for HB.structures">structures</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="monae.hierarchy.html">hierarchy</a></span> <span class="id"><a href="monae.monad_lib.html">monad_lib</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">infotheo</span> <span class="vernacular">Require</span> <span class="id"><a href="NOTFOUND the module url for infotheo.probability.convex">convex</a></span> <span class="id"><a href="NOTFOUND the module url for infotheo.probability.necset">necset</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">Equations</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="NOTFOUND the module url for Equations.Prop.Equations">Equations</a></span>.<br/>
<br/>
<pre class="ssrdoc">
    Definitions and lemmas using failure and nondeterministic monads       
                                                                           
                  arb == arbitrary nondeterministic choice between         
                         booleans                                          
                foldM                                                      
        unfoldM p f y == generates a list a from a seed y, if p y holds    
                         the generation stops,otherwise an element and a   
                         new seed of generated using f                     
                hyloM == [2, Sect. 5.1]                                    
      arbitrary def s == nondeterministic choice of an element in the list 
                         s and def if the list is empty                    
               subs s == subsequence of a list                             
                         (ref: Sect. 3.1, gibbons2012utp)                  
         nondetSyntax == syntax of nondeterministic monad                  
                         (constructors: ndRet ndBind ndFail ndAlt)         
          nondetSem x == semantics of x : nondetSyntax                     
           insert a s == insert a in the list s nondeterministically       
              iperm s == nondeterministic permutation of the list s,       
                         defined as a Fixpoint using insert [1, Sect. 3]   
             select s == nondeterministically splits the list s into a     
                         pair of one chosen element and the rest           
                         [3, Sect. 4.4] [2, Sect. 3.2]                     
            tselect s == same as select but returns a pair whose second    
                         projection has type (size s).-1.-tuple A, useful  
                         to write perms                                    
              perms s == of type seq A -&gt; M (seq A), nondeterministically  
                         computes a permutation of s using (t)select       
              uperm s == nondeterministically computes a permutation of s, 
                         defined using unfoldM and select [2, Sect. 3.2]   
          dassert p a == computation of type M {x | p x} that fails if a   
                         does not satisfy p or return a otherwise (with a  
                         proof that is satisfies p)                        
             splits s == split a list nondeterministically                 
                         type: seq A -&gt; M (seq A * seq A)                  
                         with M : plusMonad                                
        splits_bseq s == same as splits with an enriched return type       
                         M ((size s).-bseq A * (size s).-bseq A))          
            dsplits s == same as split with an enriched return type        
                         M {x : seq A * seq A | size x.1 + size x.2 == n}  
              qperm s == permute the list s                                
                         type: seq A -&gt; M (seq A) with M : plusMonad       
      plus_isNondet m == m is a computation of the plusMonad that can be   
                         written with the syntax of the nondeterministic   
                         monad                                             
           m1 `&lt;=` m2 == m1 refines m2, i.e., every result of m1 is a      
                         possible result of m2                             
            f `&lt;.=` g == refinement relation lifted to functions, i.e.,    
                         forall x, f x `&lt;=` g x                            
                                                                           
ref:                                                                       
- [1] mu2019tr2                                                            
- [2] mu2019tr3                                                            
- [3] gibbons2011icfp                                                      
- [4] mu2020flops                                                          
</pre>
<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">&quot;m1 `&lt;=` m2&quot;</span> (<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">70,</span> <span class="id">no</span> <span class="id">associativity</span>).<br/>
<span class="vernacular">Reserved</span> <span class="vernacular">Notation</span> <span class="id">&quot;f `&lt;.=` g&quot;</span> (<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">70,</span> <span class="id">no</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="gallina-kwd">Set</span> <span class="vernacular">Implicit</span> <span class="vernacular">Arguments</span>.<br/>
<span class="vernacular">Unset</span> <span class="vernacular">Strict</span> <span class="vernacular">Implicit</span>.<br/>
<span class="vernacular">Unset</span> <span class="vernacular">Printing</span> <span class="vernacular">Implicit</span> <span class="vernacular">Defensive</span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">monae_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="mem_rcons_cat" class="id">
  <a name="mem_rcons_cat" class="">mem_rcons_cat</a>
</span> (<span id="A:1" class="id">
  <a name="A:1" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) (<span id="b:2" class="id">
  <a name="b:2" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:1">A</a></span>) <span id="h:3" class="id">
  <a name="h:3" class="">h</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#h:3">h</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7">\in</a></span> <span class="id"><a href="monae.fail_lib.html#b:2">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="b1:4" class="id">
  <a name="b1:4" class="">b1</a>
</span> <span id="b2:5" class="id">
  <a name="b2:5" class="">b2,</a>
</span> <span class="id"><a href="monae.fail_lib.html#b:2">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#b1:4">b1</a></span> <span class="id"><a href="monae.fail_lib.html#h:3">h</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#b2:5">b2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
<span class="id">move=&gt;</span> <span class="id">hb;</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#take">take</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#index">index</a></span> <span class="id">h</span> <span class="id">b</span>) <span class="id">b</span>)<span class="id">,</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#drop">drop</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#index">index</a></span> <span class="id">h</span> <span class="id">b</span>).<span class="id">+1</span> <span class="id">b</span>).<br/>
<span class="id">rewrite</span> <span class="id">-cats1</span> <span class="id">-catA</span> <span class="id">-{1}</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cat_take_drop">cat_take_drop</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#index">index</a></span> <span class="id">h</span> <span class="id">b</span>) <span class="id">b</span>)<span class="id">;</span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id">_</span>) <span class="id">=&gt;</span> <span class="id">/=</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-{2}</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nth_index">nth_index</a></span> <span class="id">h</span> <span class="id">hb</span>) <span class="id">-drop_nth</span> <span class="id">//</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#index_mem">index_mem</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="altci_semilatttype" class="id">
  <a name="altci_semilatttype" class="">altci_semilatttype</a>
</span>.<br/>
<span class="vernacular">Import</span> <span class="id"><a href="NOTFOUND the module url for infotheo.probability.necset">necset</a></span> <span class="id"><a href="NOTFOUND the module url for infotheo.probability.necset#SemiLattice">SemiLattice</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="altci_semilatttype.M" class="id">
  <a name="altci_semilatttype.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAltCI.Exports.altCIMonad">altCIMonad</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="altci_semilatttype.T" class="id">
  <a name="altci_semilatttype.T" class="">T</a>
</span> <span class="id">:</span> <span class="gallina-kwd">Type</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="altCI_semiLattType" class="id">
  <a name="altCI_semiLattType" class="">altCI_semiLattType</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.fail_lib.html#altci_semilatttype.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#altci_semilatttype.T">T</a></span>.<br/>
<br/>
<span id="fail_lib_altCI_semiLattType__canonical__necset_SemiLattice" class="id"><span id="HB_unnamed_factory_1" class="id">
  <a name="fail_lib_altCI_semiLattType__canonical__necset_SemiLattice" class="hierarchy-builder">HB.instance</a>
</span></span> <span class="vernacular">Definition</span> <span class="id">_</span> <span class="id">:=</span> <span class="id">@isSemiLattice</span>.<span class="id">Build</span> <span class="id"><a href="monae.fail_lib.html#altCI_semiLattType">altCI_semiLattType</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.choice.html#Choice.class">Choice.class</a></span> (<span class="id"><a href="NOTFOUND the module url for infotheo.probability.convex#choice_of_Type">convex.choice_of_Type</a></span> (<span class="id"><a href="monae.fail_lib.html#altci_semilatttype.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#altci_semilatttype.T">T</a></span>)))<br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="x:8" class="id">
  <a name="x:8" class="">x</a>
</span> <span id="y:9" class="id">
  <a name="y:9" class="">y</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#x:8">x</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#y:9">y</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">@altC</span> <span class="id"><a href="monae.fail_lib.html#altci_semilatttype.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#altci_semilatttype.T">T</a></span>) (<span class="id">@altA</span> <span class="id"><a href="monae.fail_lib.html#altci_semilatttype.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#altci_semilatttype.T">T</a></span>) (<span class="id">@altmm</span> <span class="id"><a href="monae.fail_lib.html#altci_semilatttype.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#altci_semilatttype.T">T</a></span>).<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">latt_scope</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="alt_lub" class="id">
  <a name="alt_lub" class="">alt_lub</a>
</span> (<span id="x:10" class="id">
  <a name="x:10" class="">x</a>
</span> <span id="y:11" class="id">
  <a name="y:11" class="">y</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#altCI_semiLattType">altCI_semiLattType</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#x:10">x</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#y:11">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#x:10">x</a></span> <span class="id"><a href="NOTFOUND the module url for infotheo.probability.necset#a7cf748e90ce38ae52bd4f5f8b49b2ed">[+]</a></span> <span class="id"><a href="monae.fail_lib.html#y:11">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#altci_semilatttype">altci_semilatttype</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="bind_ext_guard" class="id">
  <a name="bind_ext_guard" class="">bind_ext_guard</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadFail.Exports.failMonad">failMonad}</a></span> (<span id="A:13" class="id">
  <a name="A:13" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="b:14" class="id">
  <a name="b:14" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span id="m1:15" class="id">
  <a name="m1:15" class="">m1</a>
</span> <span id="m2:16" class="id">
  <a name="m2:16" class="">m2</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:12">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:13">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.fail_lib.html#b:14">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m1:15">m1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#m2:16">m2</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.fail_lib.html#b:14">b</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m1:15">m1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.fail_lib.html#b:14">b</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m2:16">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">b</span> <span class="id">=&gt;</span> <span class="id">[-&gt;//|_];</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#guardF">guardF</a></span> <span class="id">!bindfailf</span>. Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="arb" class="id">
  <a name="arb" class="">arb</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad}</a></span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:17">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="monadalt_lemmas" class="id">
  <a name="monadalt_lemmas" class="">monadalt_lemmas</a>
</span>.<br/>
<span class="vernacular">Variable</span> (<span id="monadalt_lemmas.M" class="id">
  <a name="monadalt_lemmas.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="alt_fmapDr" class="id">
  <a name="alt_fmapDr" class="">alt_fmapDr</a>
</span> (<span id="A:19" class="id">
  <a name="A:19" class="">A</a>
</span> <span id="B:20" class="id">
  <a name="B:20" class="">B</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="f:21" class="id">
  <a name="f:21" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:19">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#B:20">B</a></span>) (<span id="m1:22" class="id">
  <a name="m1:22" class="">m1</a>
</span> <span id="m2:23" class="id">
  <a name="m2:23" class="">m2</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#monadalt_lemmas.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:19">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.fail_lib.html#monadalt_lemmas.M">M</a></span> <span class="id"><a href="monae.hierarchy.html#5ffd50877ab4fcdc0107cf881b980bc8">#</a></span> <span class="id"><a href="monae.fail_lib.html#f:21">f</a></span>) (<span class="id"><a href="monae.fail_lib.html#m1:22">m1</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#m2:23">m2</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="monae.fail_lib.html#monadalt_lemmas.M">M</a></span> <span class="id"><a href="monae.hierarchy.html#5ffd50877ab4fcdc0107cf881b980bc8">#</a></span> <span class="id"><a href="monae.fail_lib.html#f:21">f</a></span>) <span class="id"><a href="monae.fail_lib.html#m1:22">m1</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> (<span class="id"><a href="monae.fail_lib.html#monadalt_lemmas.M">M</a></span> <span class="id"><a href="monae.hierarchy.html#5ffd50877ab4fcdc0107cf881b980bc8">#</a></span> <span class="id"><a href="monae.fail_lib.html#f:21">f</a></span>) <span class="id"><a href="monae.fail_lib.html#m2:23">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">3!fmapE</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#monadalt_lemmas">monadalt_lemmas</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="fmap_fail" class="id">
  <a name="fmap_fail" class="">fmap_fail</a>
</span> <span class="id">{A</span> <span id="B:25" class="id">
  <a name="B:25" class="">B</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0}</a></span> (<span id="M:26" class="id">
  <a name="M:26" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadFail.Exports.failMonad">failMonad</a></span>) (<span id="f:27" class="id">
  <a name="f:27" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:24">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#B:25">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.fail_lib.html#M:26">M</a></span> <span class="id"><a href="monae.hierarchy.html#5ffd50877ab4fcdc0107cf881b980bc8">#</a></span> <span class="id"><a href="monae.fail_lib.html#f:27">f</a></span>) <span class="id"><a href="monae.hierarchy.html#fail">fail</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#fail">fail</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="well_founded_size" class="id">
  <a name="well_founded_size" class="">well_founded_size</a>
</span> <span id="A:28" class="id">
  <a name="A:28" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#well_founded">well_founded</a></span> (<span class="gallina-kwd">fun</span> <span id="x:29" class="id">
  <a name="x:29" class="">x</a>
</span> <span id="y:30" class="id">
  <a name="y:30" class="">y</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:28">A</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#x:29">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#y:30">y</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
 <span class="gallina-kwd">by</span> <span class="id">apply:</span> (<span class="id">@Wf_nat</span>.<span class="id">well_founded_lt_compat</span> <span class="id">_</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span>) <span class="id">=&gt;</span> <span class="id">?</span> <span class="id">?</span> <span class="id">/ltP</span>. Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="bassert_hylo" class="id">
  <a name="bassert_hylo" class="">bassert_hylo</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadFail.Exports.failMonad">failMonad}</a></span> (<span id="A:32" class="id">
  <a name="A:32" class="">A</a>
</span> <span id="B:33" class="id">
  <a name="B:33" class="">B</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>)<br/>
&nbsp;&nbsp;(<span id="f:34" class="id">
  <a name="f:34" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#B:33">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#M:31">M</a></span> (<span class="id"><a href="monae.fail_lib.html#A:32">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="monae.fail_lib.html#B:33">B</a></span>)<span class="id">%type</span>) (<span id="p:35" class="id">
  <a name="p:35" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.fail_lib.html#B:33">B</a></span>) (<span id="r:38" class="id">
  <a name="r:38" class="">r</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="p:36" class="id">
  <a name="p:36" class="">p</a>
</span> <span id="f:37" class="id">
  <a name="f:37" class="">f,</a>
</span> <span class="id"><a href="monae.fail_lib.html#B:33">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#B:33">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:39" class="id">
  <a name="b:39" class="">b,</a>
</span> <span class="id"><a href="monae.fail_lib.html#f:34">f</a></span> <span class="id"><a href="monae.fail_lib.html#b:39">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#bassert">bassert</a></span> (<span class="gallina-kwd">fun</span> <span id="z:40" class="id">
  <a name="z:40" class="">z</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#r:38">r</a></span> <span class="id"><a href="monae.fail_lib.html#p:35">p</a></span> <span class="id"><a href="monae.fail_lib.html#f:34">f</a></span> <span class="id"><a href="monae.fail_lib.html#z:40">z</a></span>.<span class="id">2</span> <span class="id"><a href="monae.fail_lib.html#b:39">b</a></span>) (<span class="id"><a href="monae.fail_lib.html#f:34">f</a></span> <span class="id"><a href="monae.fail_lib.html#b:39">b</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="bassert_size" class="id">
  <a name="bassert_size" class="">bassert_size</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadFail.Exports.failMonad">failMonad}</a></span> (<span id="A:42" class="id">
  <a name="A:42" class="">A</a>
</span> <span id="B:43" class="id">
  <a name="B:43" class="">B</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>)<br/>
&nbsp;&nbsp;(<span id="f:44" class="id">
  <a name="f:44" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#B:43">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#M:41">M</a></span> (<span class="id"><a href="monae.fail_lib.html#A:42">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#B:43">B</a></span>)<span class="id">%type</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">@bassert_hylo</span> <span class="id"><a href="monae.fail_lib.html#M:41">M</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="monae.fail_lib.html#f:44">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#predT">predT</a></span> (<span class="gallina-kwd">fun</span> <span class="id">_</span> <span class="id">_</span> <span id="x:45" class="id">
  <a name="x:45" class="">x</a>
</span> <span id="y:46" class="id">
  <a name="y:46" class="">y</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#x:45">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#y:46">y</a></span>).<br/>
<br/>
<span class="vernacular">Section</span> <span id="foldM" class="id">
  <a name="foldM" class="">foldM</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="foldM.M" class="id">
  <a name="foldM.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#Monad.Exports.monad">monad</a></span>) (<span id="foldM.T" class="id">
  <a name="foldM.T" class="">T</a>
</span> <span id="foldM.R" class="id">
  <a name="foldM.R" class="">R</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="foldM.f" class="id">
  <a name="foldM.f" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#R:48">R</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#T:49">T</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#M:47">M</a></span> <span class="id"><a href="monae.fail_lib.html#R:48">R</a></span>).<br/>
<span class="vernacular">Fixpoint</span> <span id="foldM" class="id">
  <a name="foldM" class="">foldM</a>
</span> <span id="z:51" class="id">
  <a name="z:51" class="">z</a>
</span> <span id="s:52" class="id">
  <a name="s:52" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#foldM.M">M</a></span> <span class="id">_</span> <span class="id">:=</span> <span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:52">s</a></span> <span class="id">is</span> <span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">s'</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.fail_lib.html#foldM.f">f</a></span> <span class="id"><a href="monae.fail_lib.html#z:51">z</a></span> <span class="id">x</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="y:55" class="id">
  <a name="y:55" class="">y</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#foldM:53">foldM</a></span> <span class="id"><a href="monae.fail_lib.html#y:55">y</a></span> <span class="id">s'</span>) <span class="gallina-kwd">else</span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#z:51">z</a></span>).<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#foldM">foldM</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="unfoldM" class="id">
  <a name="unfoldM" class="">unfoldM</a>
</span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="unfoldM.unfoldM_monad" class="id">
  <a name="unfoldM.unfoldM_monad" class="">unfoldM_monad</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="unfoldM.unfoldM_monad.M" class="id">
  <a name="unfoldM.unfoldM_monad.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#Monad.Exports.monad">monad</a></span>) (<span id="unfoldM.unfoldM_monad.A" class="id">
  <a name="unfoldM.unfoldM_monad.A" class="">A</a>
</span> <span id="unfoldM.unfoldM_monad.B" class="id">
  <a name="unfoldM.unfoldM_monad.B" class="">B</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>).<br/>
<span class="vernacular">Variable</span> (<span id="unfoldM.unfoldM_monad.r" class="id">
  <a name="unfoldM.unfoldM_monad.r" class="">r</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>).<br/>
<span class="vernacular">Hypothesis</span> <span id="unfoldM.unfoldM_monad.wfr" class="id">
  <a name="unfoldM.unfoldM_monad.wfr" class="">wfr</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.r">r</a></span>.<br/>
<span class="vernacular">Variables</span> (<span id="unfoldM.unfoldM_monad.p" class="id">
  <a name="unfoldM.unfoldM_monad.p" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.B">B</a></span>) (<span id="unfoldM.unfoldM_monad.f" class="id">
  <a name="unfoldM.unfoldM_monad.f" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.M">M</a></span> (<span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.B">B</a></span>)<span class="id">%type</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="unfoldM'" class="id">
  <a name="unfoldM'" class="">unfoldM'</a>
</span> (<span id="y:63" class="id">
  <a name="y:63" class="">y</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.B">B</a></span>) (<span id="g:65" class="id">
  <a name="g:65" class="">g</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="y':64" class="id">
  <a name="y':64" class="">y'</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.B">B,</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.r">r</a></span> <span class="id"><a href="monae.fail_lib.html#y':64">y'</a></span> <span class="id"><a href="monae.fail_lib.html#y:63">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.A">A</a></span>)) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.A">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#y:63">y</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.f">f</a></span> <span class="id"><a href="monae.fail_lib.html#y:63">y</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="xz:66" class="id">
  <a name="xz:66" class="">xz</a>
</span> <span class="id">=&gt;</span> <span class="gallina-kwd">match</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Bool.Bool.html#bool_dec">Bool.bool_dec</a></span> (<span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.r">r</a></span> <span class="id"><a href="monae.fail_lib.html#xz:66">xz</a></span>.<span class="id">2</span> <span class="id"><a href="monae.fail_lib.html#y:63">y</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#left">left</a></span> <span class="id">H</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.fail_lib.html#xz:66">xz</a></span>.<span class="id">1</span>) (<span class="id"><a href="monae.fail_lib.html#g:65">g</a></span> <span class="id"><a href="monae.fail_lib.html#xz:66">xz</a></span>.<span class="id">2</span> <span class="id">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#right">right</a></span> <span class="id">H</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="unfoldM" class="id">
  <a name="unfoldM" class="">unfoldM</a>
</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#Fix">Fix</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad.wfr">wfr</a></span> (<span class="gallina-kwd">fun</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">_</span> <span class="id">_</span>) <span class="id"><a href="monae.fail_lib.html#unfoldM'">unfoldM'</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_monad">unfoldM_monad</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="unfoldM.unfoldM_failMonad" class="id">
  <a name="unfoldM.unfoldM_failMonad" class="">unfoldM_failMonad</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="unfoldM.unfoldM_failMonad.M" class="id">
  <a name="unfoldM.unfoldM_failMonad.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadFail.Exports.failMonad">failMonad</a></span>) (<span id="unfoldM.unfoldM_failMonad.A" class="id">
  <a name="unfoldM.unfoldM_failMonad.A" class="">A</a>
</span> <span id="unfoldM.unfoldM_failMonad.B'" class="id">
  <a name="unfoldM.unfoldM_failMonad.B'" class="">B'</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>).<br/>
<span class="vernacular">Let</span> <span id="unfoldM.unfoldM_failMonad.B" class="id">
  <a name="unfoldM.unfoldM_failMonad.B" class="">B</a>
</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.B'">B'</a></span>.<br/>
<span class="vernacular">Notation</span> <span id="unfoldM" class="id">
  <a name="unfoldM" class="">unfoldM</a>
</span> <span class="id">:=</span> (<span class="id">@unfoldM</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.A">A</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">@well_founded_size</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.B'">B'</a></span>)).<br/>
<span class="vernacular">Variables</span> (<span id="unfoldM.unfoldM_failMonad.p" class="id">
  <a name="unfoldM.unfoldM_failMonad.p" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.B">B</a></span>) (<span id="unfoldM.unfoldM_failMonad.f" class="id">
  <a name="unfoldM.unfoldM_failMonad.f" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.M">M</a></span> (<span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.B">B</a></span>)<span class="id">%type</span>).<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="unfoldM.unfoldM_failMonad.decr_size" class="id">
  <a name="unfoldM.unfoldM_failMonad.decr_size" class="">decr_size</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#bassert_size">bassert_size</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.f">f</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="unfoldME" class="id">
  <a name="unfoldME" class="">unfoldME</a>
</span> <span id="y:73" class="id">
  <a name="y:73" class="">y</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#unfoldM">unfoldM</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.f">f</a></span> <span class="id"><a href="monae.fail_lib.html#y:73">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#y:73">y</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.f">f</a></span> <span class="id"><a href="monae.fail_lib.html#y:73">y</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="xz:74" class="id">
  <a name="xz:74" class="">xz</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.fail_lib.html#xz:74">xz</a></span>.<span class="id">1</span>) (<span class="id"><a href="monae.fail_lib.html#unfoldM">unfoldM</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.f">f</a></span> <span class="id"><a href="monae.fail_lib.html#xz:74">xz</a></span>.<span class="id">2</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
<span class="id">rewrite</span> <span class="id">/unfoldM</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#Fix_eq">Init.Wf.Fix_eq</a></span><span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span> <span class="id">=&gt;</span> <span class="id">b</span> <span class="id">g</span> <span class="id">g'</span> <span class="id">H;</span> <span class="id">rewrite</span> <span class="id">/unfoldM';</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">pb</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a'</span> <span class="id">b']</span> <span class="id">/=</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Bool.Bool.html#bool_dec">Bool.bool_dec</a></span> <span class="id">=&gt;</span> <span class="id">//;</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id">/unfoldM';</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">py</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad.decr_size">decr_size</a></span> <span class="id">/bassert</span> <span class="id">2!bindA;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a'</span> <span class="id">b']</span>.<br/>
<span class="id">case:</span> <span class="id"><a href="monae.hierarchy.html#assertPn">assertPn</a></span> <span class="id">=&gt;</span> <span class="id">b'y;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">2!bindfailf</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">2!bindretf</span> <span class="id">/=</span> <span class="id">b'y</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#unfoldM.unfoldM_failMonad">unfoldM_failMonad</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#unfoldM">unfoldM</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#unfoldM">unfoldM</a></span> <span class="id">:</span> <span class="id">simpl</span> <span class="id">never</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="hyloM" class="id">
  <a name="hyloM" class="">hyloM</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="hyloM.M" class="id">
  <a name="hyloM.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadFail.Exports.failMonad">failMonad</a></span>) (<span id="hyloM.A" class="id">
  <a name="hyloM.A" class="">A</a>
</span> <span id="hyloM.B" class="id">
  <a name="hyloM.B" class="">B</a>
</span> <span id="hyloM.C" class="id">
  <a name="hyloM.C" class="">C</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>).<br/>
<span class="vernacular">Variables</span> (<span id="hyloM.op" class="id">
  <a name="hyloM.op" class="">op</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#hyloM.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.C">C</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.C">C</a></span>) (<span id="hyloM.e" class="id">
  <a name="hyloM.e" class="">e</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#hyloM.C">C</a></span>) (<span id="hyloM.p" class="id">
  <a name="hyloM.p" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.B">B</a></span>) (<span id="hyloM.f" class="id">
  <a name="hyloM.f" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#hyloM.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.M">M</a></span> (<span class="id"><a href="monae.fail_lib.html#hyloM.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.B">B</a></span>)<span class="id">%type</span>).<br/>
<span class="vernacular">Variable</span> <span id="hyloM.seed" class="id">
  <a name="hyloM.seed" class="">seed</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> (<span id="p:83" class="id">
  <a name="p:83" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.B">B</a></span>) (<span id="f:84" class="id">
  <a name="f:84" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#hyloM.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.M">M</a></span> (<span class="id"><a href="monae.fail_lib.html#hyloM.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.B">B</a></span>)<span class="id">%type</span>)<span class="id">,</span> <span class="id"><a href="monae.fail_lib.html#hyloM.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="hyloM'" class="id">
  <a name="hyloM'" class="">hyloM'</a>
</span> (<span id="y:86" class="id">
  <a name="y:86" class="">y</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#hyloM.B">B</a></span>) (<span id="g:88" class="id">
  <a name="g:88" class="">g</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="y':87" class="id">
  <a name="y':87" class="">y',</a>
</span> <span class="id"><a href="monae.fail_lib.html#hyloM.seed">seed</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.f">f</a></span> <span class="id"><a href="monae.fail_lib.html#y':87">y'</a></span> <span class="id"><a href="monae.fail_lib.html#y:86">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.C">C</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#hyloM.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.C">C</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#hyloM.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#y:86">y</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.e">e</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="monae.fail_lib.html#hyloM.f">f</a></span> <span class="id"><a href="monae.fail_lib.html#y:86">y</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="xz:89" class="id">
  <a name="xz:89" class="">xz</a>
</span> <span class="id">=&gt;</span> <span class="gallina-kwd">match</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Bool.Bool.html#bool_dec">Bool.bool_dec</a></span> (<span class="id"><a href="monae.fail_lib.html#hyloM.seed">seed</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.f">f</a></span> <span class="id"><a href="monae.fail_lib.html#xz:89">xz</a></span>.<span class="id">2</span> <span class="id"><a href="monae.fail_lib.html#y:86">y</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#left">left</a></span> <span class="id">H</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#hyloM.op">op</a></span> <span class="id"><a href="monae.fail_lib.html#xz:89">xz</a></span>.<span class="id">1</span> (<span class="id"><a href="monae.fail_lib.html#g:88">g</a></span> <span class="id"><a href="monae.fail_lib.html#xz:89">xz</a></span>.<span class="id">2</span> <span class="id">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#right">right</a></span> <span class="id">H</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.e">e</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>).<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="hyloM.well_founded_seed" class="id">
  <a name="hyloM.well_founded_seed" class="">well_founded_seed</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#well_founded">well_founded</a></span> (<span class="id"><a href="monae.fail_lib.html#hyloM.seed">seed</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.f">f</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="hyloM" class="id">
  <a name="hyloM" class="">hyloM</a>
</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#Fix">Fix</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.well_founded_seed">well_founded_seed</a></span> (<span class="gallina-kwd">fun</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#hyloM.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="monae.fail_lib.html#hyloM'">hyloM'</a></span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="hyloM.Hdecr_seed" class="id">
  <a name="hyloM.Hdecr_seed" class="">Hdecr_seed</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#bassert_hylo">bassert_hylo</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.f">f</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.seed">seed</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="hyloME" class="id">
  <a name="hyloME" class="">hyloME</a>
</span> <span id="y:92" class="id">
  <a name="y:92" class="">y</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#hyloM">hyloM</a></span> <span class="id"><a href="monae.fail_lib.html#y:92">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#hyloM.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#y:92">y</a></span> <span class="gallina-kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#hyloM.e">e</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#hyloM.f">f</a></span> <span class="id"><a href="monae.fail_lib.html#y:92">y</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="xz:93" class="id">
  <a name="xz:93" class="">xz</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#hyloM.op">op</a></span> <span class="id"><a href="monae.fail_lib.html#xz:93">xz</a></span>.<span class="id">1</span> (<span class="id"><a href="monae.fail_lib.html#hyloM">hyloM</a></span> <span class="id"><a href="monae.fail_lib.html#xz:93">xz</a></span>.<span class="id">2</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
<span class="id">rewrite</span> <span class="id">/hyloM</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#Fix_eq">Init.Wf.Fix_eq</a></span><span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span> <span class="id">=&gt;</span> <span class="id">b</span> <span class="id">g</span> <span class="id">g'</span> <span class="id">K;</span> <span class="id">rewrite</span> <span class="id">/hyloM';</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">pb</span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a'</span> <span class="id">b']</span> <span class="id">/=</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Bool.Bool.html#bool_dec">Bool.bool_dec</a></span> <span class="id">=&gt;</span> <span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">K</span>.<br/>
<span class="id">rewrite</span> <span class="id">{1}/hyloM';</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">py</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#hyloM.Hdecr_seed">Hdecr_seed</a></span> <span class="id">/bassert</span> <span class="id">!bindA</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[b'</span> <span class="id">a']</span>.<br/>
<span class="id">case:</span> <span class="id"><a href="monae.hierarchy.html#assertPn">assertPn</a></span> <span class="id">=&gt;</span> <span class="id">Hseed;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">2!bindfailf</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">2!bindretf</span> <span class="id">Hseed</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#hyloM">hyloM</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#hyloM">hyloM</a></span> <span class="id">{M}</span> <span class="id">{A}</span> <span class="id">{B}</span> <span class="id">{C}</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="arbitrary" class="id">
  <a name="arbitrary" class="">arbitrary</a>
</span>.<br/>
<br/>
<span class="vernacular">Variables</span> (<span id="arbitrary.M" class="id">
  <a name="arbitrary.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad</a></span>) (<span id="arbitrary.A" class="id">
  <a name="arbitrary.A" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="arbitrary.def" class="id">
  <a name="arbitrary.def" class="">def</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:95">A</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="arbitrary" class="id">
  <a name="arbitrary" class="">arbitrary</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary.A">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.monae_lib.html#foldr1">foldr1</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary.def">def</a></span>) (<span class="gallina-kwd">fun</span> <span id="x:97" class="id">
  <a name="x:97" class="">x</a>
</span> <span id="y:98" class="id">
  <a name="y:98" class="">y</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#x:97">x</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#y:98">y</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id">{M}</span> <span class="id">{A}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="arbitrary1" class="id">
  <a name="arbitrary1" class="">arbitrary1</a>
</span> (<span id="N:99" class="id">
  <a name="N:99" class="">N</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad</a></span>) (<span id="T:100" class="id">
  <a name="T:100" class="">T</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="def:101" class="id">
  <a name="def:101" class="">def</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#T:100">T</a></span>) <span id="h:102" class="id">
  <a name="h:102" class="">h</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#def:101">def</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id"><a href="monae.fail_lib.html#h:102">h]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#h:102">h</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#N:99">N</a></span> <span class="id"><a href="monae.fail_lib.html#T:100">T</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="arbitrary_lemmas" class="id">
  <a name="arbitrary_lemmas" class="">arbitrary_lemmas</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="arbitrary_lemmas.M" class="id">
  <a name="arbitrary_lemmas.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAltCI.Exports.altCIMonad">altCIMonad</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="arbitrary2" class="id">
  <a name="arbitrary2" class="">arbitrary2</a>
</span> (<span id="T:104" class="id">
  <a name="T:104" class="">T</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="def:105" class="id">
  <a name="def:105" class="">def</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#T:104">T</a></span>) <span id="h:106" class="id">
  <a name="h:106" class="">h</a>
</span> <span id="t:107" class="id">
  <a name="t:107" class="">t</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#def:105">def</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id"><a href="monae.fail_lib.html#h:106">h;</a></span> <span class="id"><a href="monae.fail_lib.html#t:107">t]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#h:106">h</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#t:107">t</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/arbitrary</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#altC">altC</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="arbitrary_cons" class="id">
  <a name="arbitrary_cons" class="">arbitrary_cons</a>
</span> (<span id="T:108" class="id">
  <a name="T:108" class="">T</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="def:109" class="id">
  <a name="def:109" class="">def</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#T:108">T</a></span>) <span id="h:110" class="id">
  <a name="h:110" class="">h</a>
</span> <span id="t:111" class="id">
  <a name="t:111" class="">t</a>
</span> <span class="id">:</span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#t:111">t</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#def:109">def</a></span> (<span class="id"><a href="monae.fail_lib.html#h:110">h</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#t:111">t</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#h:110">h</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#def:109">def</a></span> <span class="id"><a href="monae.fail_lib.html#t:111">t</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="id">move:</span> <span class="id">def</span> <span class="id">h;</span> <span class="id">elim:</span> <span class="id">t</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">a</span> <span class="id">[//|b</span> <span class="id">[|c</span> <span class="id">t]]</span> <span class="id">ih</span> <span class="id">def</span> <span class="id">h</span> <span class="id">_</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#arbitrary2">arbitrary2</a></span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/arbitrary</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#altA">altA</a></span> <span class="id"><a href="monae.hierarchy.html#altC">altC</a></span> (<span class="id"><a href="monae.hierarchy.html#altC">altC</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">b</span>)).<br/>
<span class="id">-</span> <span class="id">move:</span> (<span class="id">ih</span> <span class="id">a</span> <span class="id">h</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#erefl">erefl</a></span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">/arbitrary</span> <span class="id">/=</span> <span class="id">=&gt;</span> <span class="id">-&gt;</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> (<span class="id">ih</span> <span class="id">h</span> <span class="id">a</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#erefl">erefl</a></span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">/arbitrary</span> <span class="id">/=</span> <span class="id">=&gt;</span> <span class="id">-&gt;</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#altCA">altCA</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="arbitrary_naturality" class="id">
  <a name="arbitrary_naturality" class="">arbitrary_naturality</a>
</span> (<span id="T:112" class="id">
  <a name="T:112" class="">T</a>
</span> <span id="U:113" class="id">
  <a name="U:113" class="">U</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="a:114" class="id">
  <a name="a:114" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#T:112">T</a></span>) (<span id="b:115" class="id">
  <a name="b:115" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#U:113">U</a></span>) (<span id="f:116" class="id">
  <a name="f:116" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#T:112">T</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#U:113">U</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:117" class="id">
  <a name="x:117" class="">x,</a>
</span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#x:117">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> <span class="id"><a href="monae.hierarchy.html#5ffd50877ab4fcdc0107cf881b980bc8">#</a></span> <span class="id"><a href="monae.fail_lib.html#f:116">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#a:114">a</a></span>) <span class="id"><a href="monae.fail_lib.html#x:117">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#b:115">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="monae.fail_lib.html#f:116">f</a></span>) <span class="id"><a href="monae.fail_lib.html#x:117">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
<span class="id">elim=&gt;</span> <span class="id">//</span> <span class="id">x</span> <span class="id">[_</span> <span class="id">_</span> <span class="id">|</span> <span class="id">x'</span> <span class="id">xs</span> <span class="id">/</span>(<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#isT">isT</a></span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]compE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.fail_lib.html#X:118">X</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">_]/=</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id">=&gt;</span> <span class="id">ih</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]compE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]/=</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]</a></span>(<span class="id"><a href="monae.fail_lib.html#arbitrary_cons">arbitrary_cons</a></span> <span class="id">b</span>) <span class="id">//</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]compE</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]arbitrary_cons</a></span> <span class="id">//</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span> <span class="id">ih</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="mpair_arbitrary_base_case" class="id">
  <a name="mpair_arbitrary_base_case" class="">mpair_arbitrary_base_case</a>
</span> (<span id="T:119" class="id">
  <a name="T:119" class="">T</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span id="a:120" class="id">
  <a name="a:120" class="">a</a>
</span> <span id="x:121" class="id">
  <a name="x:121" class="">x</a>
</span> (<span id="y:122" class="id">
  <a name="y:122" class="">y</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#T:119">T</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#y:122">y</a></span>)<span class="id">%nat</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> (<span class="id"><a href="monae.fail_lib.html#a:120">a,</a></span> <span class="id"><a href="monae.fail_lib.html#a:120">a</a></span>) (<span class="id"><a href="monae.monae_lib.html#cp">cp</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id"><a href="monae.fail_lib.html#x:121">x]</a></span> <span class="id"><a href="monae.fail_lib.html#y:122">y</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.monad_lib.html#mpair">mpair</a></span> (<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#a:120">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id"><a href="monae.fail_lib.html#x:121">x],</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#a:120">a</a></span> <span class="id"><a href="monae.fail_lib.html#y:122">y</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
<span class="id">move=&gt;</span> <span class="id">y0;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.monae_lib.html#cp1">cp1</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id">a</span> <span class="id">y</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="y':124" class="id"><span id="y':123" class="id">
  <a name="y':124" class="">y'</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">x,</span> <span class="id"><a href="monae.fail_lib.html#y':123">y'</a></span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-</span>(<span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> (<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id">_</span>)) <span class="id">-</span>(<span class="id"><a href="monae.fail_lib.html#arbitrary_naturality">arbitrary_naturality</a></span> <span class="id">a</span>) <span class="id">//</span> <span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="z:127" class="id"><span id="z:125" class="id">
  <a name="z:127" class="">z</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">x;</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y':128" class="id"><span id="y':126" class="id">
  <a name="y':128" class="">y'</a>
</span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id">a</span> <span class="id">y;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#z:125">z,</a></span> <span class="id"><a href="monae.fail_lib.html#y':126">y'</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> <span class="id">_</span>)<span class="id">%Do</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">[]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="arbitrary_cat" class="id">
  <a name="arbitrary_cat" class="">arbitrary_cat</a>
</span> (<span id="T:129" class="id">
  <a name="T:129" class="">T</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="a:130" class="id">
  <a name="a:130" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#T:129">T</a></span>) <span id="s:131" class="id">
  <a name="s:131" class="">s</a>
</span> <span id="t:132" class="id">
  <a name="t:132" class="">t</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="m:133" class="id">
  <a name="m:133" class="">m</a>
</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:131">s</a></span> <span class="gallina-kwd">in</span> <span class="gallina-kwd">let</span> <span id="n:134" class="id">
  <a name="n:134" class="">n</a>
</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#t:132">t</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="monae.fail_lib.html#m:133">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="monae.fail_lib.html#n:134">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#a:130">a</a></span> (<span class="id"><a href="monae.fail_lib.html#s:131">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#t:132">t</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#a:130">a</a></span> <span class="id"><a href="monae.fail_lib.html#s:131">s</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#a:130">a</a></span> <span class="id"><a href="monae.fail_lib.html#t:132">t</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">t</span> <span class="id">=&gt;</span> <span class="id">[//|s1</span> <span class="id">s2</span> <span class="id">IH]</span>.<br/>
<span class="id">elim/last_ind</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">_</span> <span class="id">m</span> <span class="id">n</span> <span class="id">m0</span> <span class="id">n0</span> <span class="id">//</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cat_cons">cat_cons</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]arbitrary_cons;</a></span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_cat">size_cat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_rcons">size_rcons</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addnS">addnS</a></span>.<br/>
<span class="id">destruct</span> <span class="id">s2</span> <span class="gallina-kwd">as</span> <span class="id">[|s2</span> <span class="id">s3]</span> <span class="id">=&gt;</span> <span class="id">//</span>.<br/>
<span class="id">rewrite</span> <span class="id">IH</span> <span class="id">//</span> <span class="id"><a href="monae.hierarchy.html#altA">altA;</a></span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]arbitrary_cons</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="mpair_arbitrary" class="id">
  <a name="mpair_arbitrary" class="">mpair_arbitrary</a>
</span> (<span id="T:135" class="id">
  <a name="T:135" class="">T</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span id="a:136" class="id">
  <a name="a:136" class="">a</a>
</span> (<span id="x:137" class="id">
  <a name="x:137" class="">x</a>
</span> <span id="y:138" class="id">
  <a name="y:138" class="">y</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#T:135">T</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#x:137">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#y:138">y</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.monad_lib.html#mpair">mpair</a></span> (<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#a:136">a</a></span> <span class="id"><a href="monae.fail_lib.html#x:137">x,</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#a:136">a</a></span> <span class="id"><a href="monae.fail_lib.html#y:138">y</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> (<span class="id"><a href="monae.fail_lib.html#a:136">a,</a></span> <span class="id"><a href="monae.fail_lib.html#a:136">a</a></span>) (<span class="id"><a href="monae.monae_lib.html#cp">cp</a></span> <span class="id"><a href="monae.fail_lib.html#x:137">x</a></span> <span class="id"><a href="monae.fail_lib.html#y:138">y</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> (<span class="id"><a href="monae.fail_lib.html#T:135">T</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="monae.fail_lib.html#T:135">T</a></span>)<span class="id">%type</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
<span class="id">elim:</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">x;</span> <span class="id">case=&gt;</span> <span class="id">[_</span> <span class="id">y</span> <span class="id">_</span> <span class="id">size_y|x'</span> <span class="id">xs</span> <span class="id">IH</span> <span class="id">y</span> <span class="id">_</span> <span class="id">size_y];</span> <span class="id">apply/esym</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/mpair_arbitrary_base_case</span>.<br/>
<span class="id">set</span> <span class="id">xxs</span> <span class="id">:=</span> <span class="id">x'</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">xs</span>.<br/>
<span class="id">rewrite</span> <span class="id">/cp</span> <span class="id">-cat1s</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#allpairs_cat">allpairs_cat</a></span> <span class="id">-/</span>(<span class="id"><a href="monae.monae_lib.html#cp">cp</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id"><a href="monae.monae_lib.html#cp1">cp1</a></span> <span class="id">/=</span> <span class="id"><a href="monae.fail_lib.html#arbitrary_cat">arbitrary_cat;</a></span> <span class="id">last</span> <span class="id">2</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_map">size_map</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_cat">size_cat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_map">size_map</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addn_gt0">addn_gt0</a></span> <span class="id">size_y</span>.<br/>
<span class="id">pose</span> <span class="id">n</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">y</span>.<br/>
<span class="id">pose</span> <span class="id">l</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> (<span class="id"><a href="monae.monae_lib.html#cp">cp</a></span> <span class="id">xxs</span> <span class="id">y</span>).<br/>
<span class="id">rewrite</span> <span class="id">-IH</span> <span class="id">//</span>.<br/>
<span class="id">rewrite</span> <span class="id">-/xxs</span>.<br/>
<span class="id">move:</span> (<span class="id"><a href="monae.fail_lib.html#mpair_arbitrary_base_case">mpair_arbitrary_base_case</a></span> <span class="id">a</span> <span class="id">x</span> <span class="id">size_y</span>).<br/>
<span class="id">rewrite</span> <span class="id">{1}/cp</span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id">_</span> <span class="id"><a href="monae.fail_lib.html#X:139">X]/=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cats0">cats0</a></span> <span class="id">=&gt;</span> <span class="id">-&gt;</span>.<br/>
<span class="id">rewrite</span> <span class="id">-alt_bindDl</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-arbitrary_cat</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="arbitrary_inde" class="id">
  <a name="arbitrary_inde" class="">arbitrary_inde</a>
</span> (<span id="T:140" class="id">
  <a name="T:140" class="">T</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span id="a:141" class="id">
  <a name="a:141" class="">a</a>
</span> (<span id="s:142" class="id">
  <a name="s:142" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#T:140">T</a></span>) <span class="id">{U}</span> (<span id="m:144" class="id">
  <a name="m:144" class="">m</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#U:143">U</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:142">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#a:141">a</a></span> <span class="id"><a href="monae.fail_lib.html#s:142">s</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m:144">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#m:144">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">a</span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">[_</span> <span class="id">a</span> <span class="id">m</span> <span class="id">_|h'</span> <span class="id">t</span> <span class="id">ih</span> <span class="id">a</span> <span class="id">m</span> <span class="id">_]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#arbitrary1">arbitrary1</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#arbitrary_cons">arbitrary_cons</a></span> <span class="id">//</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id">ih</span> <span class="id">//</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#altmm">altmm</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="perm_eq_arbitrary" class="id">
  <a name="perm_eq_arbitrary" class="">perm_eq_arbitrary</a>
</span> (<span id="A:145" class="id">
  <a name="A:145" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) <span id="def:146" class="id">
  <a name="def:146" class="">def</a>
</span> (<span id="a:147" class="id">
  <a name="a:147" class="">a</a>
</span> <span id="b:148" class="id">
  <a name="b:148" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:145">A</a></span>) <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_eq">perm_eq</a></span> <span class="id"><a href="monae.fail_lib.html#a:147">a</a></span> <span class="id"><a href="monae.fail_lib.html#b:148">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#def:146">def</a></span> <span class="id"><a href="monae.fail_lib.html#a:147">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#def:146">def</a></span> <span class="id"><a href="monae.fail_lib.html#b:148">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
<span class="id">elim:</span> <span class="id">a</span> <span class="id">def</span> <span class="id">b</span> <span class="id">=&gt;</span> <span class="id">[def</span> <span class="id">b|</span> <span class="id">h</span> <span class="id">[|t1</span> <span class="id">t2]</span> <span class="id">ih</span> <span class="id">def</span> <span class="id">b]</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">move/perm_size/esym/size0nil</span> <span class="id">-&gt;</span>.<br/>
<span class="id">-</span> <span class="id">move:</span> <span class="id">b</span> <span class="id">=&gt;</span> <span class="id">[/perm_size//|b1];</span> <span class="id">move</span> <span class="id">=&gt;</span> <span class="id">[|b2</span> <span class="id">b3</span> <span class="id">/perm_size//]</span>.<br/>
&nbsp;&nbsp;<span class="id">move/perm_consP</span> <span class="id">=&gt;</span> <span class="id">[i</span> <span class="id">[s</span> <span class="id">[ihb1s</span> <span class="id">/perm_size/size0nil</span> <span class="id">s0]]]</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> <span class="id">ihb1s;</span> <span class="id">rewrite</span> <span class="id">s0</span> <span class="id">/=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">i</span> <span class="id">=&gt;</span> <span class="id">[/=|i];</span> <span class="id">[rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rot0">rot0</a></span> <span class="id">=&gt;</span> <span class="id">-[-&gt;]|rewrite</span> <span class="id">/rot</span> <span class="id">/=</span> <span class="id">=&gt;</span> <span class="id">-[-&gt;]]</span>.<br/>
<span class="id">-</span> <span class="id">move=&gt;</span> <span class="id">htb</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">[b1</span> <span class="id">[b2</span> <span class="id">bE]]</span> <span class="id">:</span> <span class="gallina-kwd">exists</span> <span id="b1:149" class="id">
  <a name="b1:149" class="">b1</a>
</span> <span id="b2:150" class="id">
  <a name="b2:150" class="">b2,</a>
</span> <span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#b1:149">b1</a></span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#b2:150">b2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">suff</span> <span class="id">:</span> <span class="id">h</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7">\in</a></span> <span class="id">b</span> <span class="gallina-kwd">by</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#mem_rcons_cat">mem_rcons_cat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">htb</span> <span class="id">=&gt;</span> <span class="id">/perm_mem</span> <span class="id">/</span>(<span class="id">_</span> <span class="id">h</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#mem_head">mem_head</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">bE</span> <span class="id"><a href="monae.fail_lib.html#arbitrary_cons">arbitrary_cons</a></span> <span class="id">//</span> (<span class="id">ih</span> <span class="id">_</span> (<span class="id">b1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id">b2</span>))<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move:</span> <span class="id">htb;</span> <span class="id">rewrite</span> <span class="id">bE</span> <span class="id">-cats1</span> <span class="id">-catA</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_sym">perm_sym</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_catCA">perm_catCA</a></span> <span class="id">b1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">h]</span> <span class="id">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_cons">perm_cons</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_sym">perm_sym</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> <span class="id">b2</span> <span class="id">bE</span> <span class="id">=&gt;</span> <span class="id">[|b2</span> <span class="id">b3</span> <span class="id">bE]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!cats0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move:</span> <span class="id">b1</span> <span class="id">=&gt;</span> <span class="id">[bE|b1</span> <span class="id">b11]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> <span class="id">htb;</span> <span class="id">rewrite</span> <span class="id">bE</span> <span class="id">=&gt;</span> <span class="id">/perm_size</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-cats1</span> <span class="id"><a href="monae.fail_lib.html#arbitrary_cat">arbitrary_cat//</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary1">arbitrary1</a></span> <span class="id"><a href="monae.hierarchy.html#altC">altC</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]arbitrary_cat</a></span> <span class="id">?size_rcons//</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> <span class="id">b1</span> <span class="id">=&gt;</span> <span class="id">[//|b1</span> <span class="id">b11]</span> <span class="gallina-kwd">in</span> <span class="id">bE</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#arbitrary_cat">arbitrary_cat//</a></span> <span class="id"><a href="monae.hierarchy.html#altA">altA;</a></span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-cats1</span> <span class="id"><a href="monae.fail_lib.html#arbitrary_cat">arbitrary_cat//</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary1">arbitrary1</a></span> <span class="id"><a href="monae.hierarchy.html#altC">altC</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="arbitrary_flatten" class="id">
  <a name="arbitrary_flatten" class="">arbitrary_flatten</a>
</span> (<span id="A:151" class="id">
  <a name="A:151" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span id="def:152" class="id">
  <a name="def:152" class="">def</a>
</span> (<span id="s:153" class="id">
  <a name="s:153" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:151">A</a></span>) (<span id="f:154" class="id">
  <a name="f:154" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:151">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#A:151">A</a></span>) <span class="id">:</span> (<span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:153">s</a></span>)<span class="id">%nat</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:155" class="id">
  <a name="x:155" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#def:152">def</a></span> <span class="id"><a href="monae.fail_lib.html#s:153">s;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#f:154">f</a></span> <span class="id"><a href="monae.fail_lib.html#x:155">x</a></span>))<span class="id">%Do</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#def:152">def</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#dcd18413b33436252c77b6c6465f02bc">[seq</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id"><a href="monae.fail_lib.html#f:154">f</a></span> <span class="id"><a href="monae.fail_lib.html#y:156">y]</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#dcd18413b33436252c77b6c6465f02bc">|</a></span> <span id="y:157" class="id"><span id="y:156" class="id">
  <a name="y:157" class="">y</a>
</span></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#dcd18413b33436252c77b6c6465f02bc">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#s:153">s]</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">f</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">a</span> <span class="id">[_</span> <span class="id">f</span> <span class="id">_</span> <span class="id">/=|h</span> <span class="id">t</span> <span class="id">ih</span> <span class="id">f</span> <span class="id">_]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/arbitrary</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t]lock</span> <span class="id">/=</span> <span class="id">-lock</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]arbitrary_cons//</a></span> <span class="id">-ih//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#arbitrary_cons">arbitrary_cons//</a></span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="arbitrary_flatten2" class="id">
  <a name="arbitrary_flatten2" class="">arbitrary_flatten2</a>
</span> (<span id="A:158" class="id">
  <a name="A:158" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span id="def:159" class="id">
  <a name="def:159" class="">def</a>
</span> (<span id="s:160" class="id">
  <a name="s:160" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:158">A</a></span>) (<span id="f:161" class="id">
  <a name="f:161" class="">f</a>
</span> <span id="g:162" class="id">
  <a name="g:162" class="">g</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:158">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#A:158">A</a></span>) <span class="id">:</span> (<span class="id">0</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:160">s</a></span>)<span class="id">%nat</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:163" class="id">
  <a name="x:163" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#def:159">def</a></span> <span class="id"><a href="monae.fail_lib.html#s:160">s;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#f:161">f</a></span> <span class="id"><a href="monae.fail_lib.html#x:163">x</a></span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#g:162">g</a></span> <span class="id"><a href="monae.fail_lib.html#x:163">x</a></span>))<span class="id">%Do</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#arbitrary">arbitrary</a></span> <span class="id"><a href="monae.fail_lib.html#def:159">def</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#flatten">flatten</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#dcd18413b33436252c77b6c6465f02bc">[seq</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id"><a href="monae.fail_lib.html#f:161">f</a></span> <span class="id"><a href="monae.fail_lib.html#y:164">y;</a></span> <span class="id"><a href="monae.fail_lib.html#g:162">g</a></span> <span class="id"><a href="monae.fail_lib.html#y:164">y]</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#dcd18413b33436252c77b6c6465f02bc">|</a></span> <span id="y:165" class="id"><span id="y:164" class="id">
  <a name="y:165" class="">y</a>
</span></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#dcd18413b33436252c77b6c6465f02bc">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#s:160">s]</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">def</span> <span class="id">f</span> <span class="id">g</span> <span class="id">=&gt;</span> <span class="id">//</span>.<br/>
<span class="id">move=&gt;</span> <span class="id">h</span> <span class="id">[|t1</span> <span class="id">t2]</span> <span class="id">ih</span> <span class="id">def</span> <span class="id">f</span> <span class="id">g</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="monae.fail_lib.html#arbitrary1">arbitrary1</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.fail_lib.html#arbitrary_cons">arbitrary_cons</a></span> <span class="id">//</span>.<br/>
<span class="id">rewrite</span> <span class="id">[t1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t2]lock</span> <span class="id">/=</span> <span class="id">-lock</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]arbitrary_cons//</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]arbitrary_cons//</a></span> <span class="id">-ih//</span> <span class="id"><a href="monae.fail_lib.html#arbitrary_cons">arbitrary_cons//</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#altA">altA</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#arbitrary_lemmas">arbitrary_lemmas</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#arbitrary_naturality">arbitrary_naturality</a></span> <span class="id">{M</span> <span class="id">T</span> <span class="id">U}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#perm_eq_arbitrary">perm_eq_arbitrary</a></span> <span class="id">{M</span> <span class="id">A}</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="subsequences_of_a_list" class="id">
  <a name="subsequences_of_a_list" class="">subsequences_of_a_list</a>
</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Variables</span> (<span id="subsequences_of_a_list.M" class="id">
  <a name="subsequences_of_a_list.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad</a></span>) (<span id="subsequences_of_a_list.A" class="id">
  <a name="subsequences_of_a_list.A" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>).<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="subs" class="id">
  <a name="subs" class="">subs</a>
</span> (<span id="s:168" class="id">
  <a name="s:168" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#subsequences_of_a_list.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#subsequences_of_a_list.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#subsequences_of_a_list.A">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:168">s</a></span> <span class="id">isn't</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="t':171" class="id">
  <a name="t':171" class="">t'</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.fail_lib.html#subs:169">subs</a></span> <span class="id">t</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">h</span>) <span class="id"><a href="monae.fail_lib.html#t':171">t'</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#t':171">t'</a></span>.<br/>
<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="subs_cons" class="id">
  <a name="subs_cons" class="">subs_cons</a>
</span> <span id="x:172" class="id">
  <a name="x:172" class="">x</a>
</span> (<span id="xs:173" class="id">
  <a name="xs:173" class="">xs</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#subsequences_of_a_list.A">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#subs">subs</a></span> (<span class="id"><a href="monae.fail_lib.html#x:172">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#xs:173">xs</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">let</span> <span id="t':174" class="id">
  <a name="t':174" class="">t'</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.fail_lib.html#subs">subs</a></span> <span class="id"><a href="monae.fail_lib.html#xs:173">xs</a></span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id"><a href="monae.fail_lib.html#x:172">x</a></span>) <span class="id"><a href="monae.fail_lib.html#t':174">t'</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#t':174">t'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="subs_cat" class="id">
  <a name="subs_cat" class="">subs_cat</a>
</span> (<span id="xs:175" class="id">
  <a name="xs:175" class="">xs</a>
</span> <span id="ys:176" class="id">
  <a name="ys:176" class="">ys</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#subsequences_of_a_list.A">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.fail_lib.html#subs">subs</a></span> (<span class="id"><a href="monae.fail_lib.html#xs:175">xs</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#ys:176">ys</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="us:177" class="id">
  <a name="us:177" class="">us</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#subs">subs</a></span> <span class="id"><a href="monae.fail_lib.html#xs:175">xs;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="vs:178" class="id">
  <a name="vs:178" class="">vs</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#subs">subs</a></span> <span class="id"><a href="monae.fail_lib.html#ys:176">ys;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#us:177">us</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#vs:178">vs</a></span>))<span class="id">%Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
<span class="id">elim:</span> <span class="id">xs</span> <span class="id">ys</span> <span class="id">=&gt;</span> <span class="id">[ys</span> <span class="id">|x</span> <span class="id">xs</span> <span class="id">ih</span> <span class="id">ys]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cat0s">cat0s</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#bindmret">bindmret</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">{1}[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]/subs</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id">-/</span>(<span class="id"><a href="monae.fail_lib.html#subs">subs</a></span> <span class="id">_</span>) <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="vernacular">Open</span> (<span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.fail_lib.html#subs">subs</a></span> <span class="id">xs</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#X:179">X</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cat_cons">cat_cons</a></span>.<br/>
&nbsp;&nbsp;<span class="id">over</span>.<br/>
<span class="id">rewrite</span> <span class="id">[X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#X:184">X</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_]</span>(<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">x</span>) (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x0:185" class="id"><span id="x0:182" class="id"><span id="x0:180" class="id">
  <a name="x0:185" class="">x0</a>
</span></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#subs">subs</a></span> <span class="id">xs;</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x1:186" class="id"><span id="x1:183" class="id"><span id="x1:181" class="id">
  <a name="x1:186" class="">x1</a>
</span></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#subs">subs</a></span> <span class="id">ys;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#x0:180">x0</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#x1:181">x1</a></span>)))<span class="id">%Do;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">x0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-ih</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cat_cons">cat_cons</a></span> <span class="id"><a href="monae.fail_lib.html#subs_cons">subs_cons</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#subsequences_of_a_list">subsequences_of_a_list</a></span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="SyntaxNondet" class="id">
  <a name="SyntaxNondet" class="">SyntaxNondet</a>
</span>.<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="SyntaxNondet.t_sind" class="id"><span id="SyntaxNondet.t_rec" class="id"><span id="SyntaxNondet.t_ind" class="id"><span id="SyntaxNondet.t_rect" class="id"><span id="SyntaxNondet.t" class="id">
  <a name="SyntaxNondet.t_sind" class="">t</a>
</span></span></span></span></span> <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Type</span> <span class="id">:=</span><br/>
<span class="id">|</span> <span id="SyntaxNondet.ret" class="id">
  <a name="SyntaxNondet.ret" class="">ret</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="A:189" class="id">
  <a name="A:189" class="">A,</a>
</span> <span class="id"><a href="monae.fail_lib.html#A:189">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#t:187">t</a></span> <span class="id"><a href="monae.fail_lib.html#A:189">A</a></span><br/>
<span class="id">|</span> <span id="SyntaxNondet.bind" class="id">
  <a name="SyntaxNondet.bind" class="">bind</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="B:190" class="id">
  <a name="B:190" class="">B</a>
</span> <span id="A:191" class="id">
  <a name="A:191" class="">A,</a>
</span> <span class="id"><a href="monae.fail_lib.html#t:187">t</a></span> <span class="id"><a href="monae.fail_lib.html#B:190">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="monae.fail_lib.html#B:190">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#t:187">t</a></span> <span class="id"><a href="monae.fail_lib.html#A:191">A</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="monae.fail_lib.html#t:187">t</a></span> <span class="id"><a href="monae.fail_lib.html#A:191">A</a></span><br/>
<span class="id">|</span> <span id="SyntaxNondet.fail" class="id">
  <a name="SyntaxNondet.fail" class="">fail</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="A:192" class="id">
  <a name="A:192" class="">A,</a>
</span> <span class="id"><a href="monae.fail_lib.html#t:187">t</a></span> <span class="id"><a href="monae.fail_lib.html#A:192">A</a></span><br/>
<span class="id">|</span> <span id="SyntaxNondet.alt" class="id">
  <a name="SyntaxNondet.alt" class="">alt</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="A:193" class="id">
  <a name="A:193" class="">A,</a>
</span> <span class="id"><a href="monae.fail_lib.html#t:187">t</a></span> <span class="id"><a href="monae.fail_lib.html#A:193">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#t:187">t</a></span> <span class="id"><a href="monae.fail_lib.html#A:193">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#t:187">t</a></span> <span class="id"><a href="monae.fail_lib.html#A:193">A</a></span>.<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="SyntaxNondet.sem" class="id">
  <a name="SyntaxNondet.sem" class="">sem</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad}</a></span> <span class="id">{A}</span> (<span id="m:196" class="id">
  <a name="m:196" class="">m</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.t">t</a></span> <span class="id"><a href="monae.fail_lib.html#A:195">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:194">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:195">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="monae.fail_lib.html#m:196">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.ret">ret</a></span> <span class="id">A</span> <span class="id">a</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">a</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.bind">bind</a></span> <span class="id">A</span> <span class="id">B</span> <span class="id">m</span> <span class="id">f</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#sem:197">sem</a></span> <span class="id"><a href="monae.fail_lib.html#m:196">m</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="id"><a href="monae.fail_lib.html#sem:197">sem</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.fail">fail</a></span> <span class="id">A</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#fail">hierarchy.fail</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.alt">alt</a></span> <span class="id">A</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#sem:197">sem</a></span> <span class="id">m1</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#sem:197">sem</a></span> <span class="id">m2</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="SyntaxNondet.Exports" class="id">
  <a name="SyntaxNondet.Exports" class="">Exports</a>
</span>.<br/>
<span class="vernacular">Notation</span> <span id="SyntaxNondet.Exports.nondetSyntax" class="id">
  <a name="SyntaxNondet.Exports.nondetSyntax" class="">nondetSyntax</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.t">t</a></span>.<br/>
<span class="vernacular">Notation</span> <span id="SyntaxNondet.Exports.ndAlt" class="id">
  <a name="SyntaxNondet.Exports.ndAlt" class="">ndAlt</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.alt">alt</a></span>.<br/>
<span class="vernacular">Notation</span> <span id="SyntaxNondet.Exports.ndRet" class="id">
  <a name="SyntaxNondet.Exports.ndRet" class="">ndRet</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.ret">ret</a></span>.<br/>
<span class="vernacular">Notation</span> <span id="SyntaxNondet.Exports.ndBind" class="id">
  <a name="SyntaxNondet.Exports.ndBind" class="">ndBind</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.bind">bind</a></span>.<br/>
<span class="vernacular">Notation</span> <span id="SyntaxNondet.Exports.ndFail" class="id">
  <a name="SyntaxNondet.Exports.ndFail" class="">ndFail</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.fail">fail</a></span>.<br/>
<span class="vernacular">Notation</span> <span id="SyntaxNondet.Exports.nondetSem" class="id">
  <a name="SyntaxNondet.Exports.nondetSem" class="">nondetSem</a>
</span> <span class="id">:=</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.sem">sem</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports">Exports</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet">SyntaxNondet</a></span>.<br/>
<span class="vernacular">Export</span> <span class="id"><a href="monae.fail_lib.html#SyntaxNondet.Exports">SyntaxNondet.Exports</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="insert" class="id">
  <a name="insert" class="">insert</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad}</a></span> <span class="id">{A</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0}</a></span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="insert" class="id">
  <a name="insert" class="">insert</a>
</span> (<span id="a:201" class="id">
  <a name="a:201" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#insert.A">A</a></span>) (<span id="s:202" class="id">
  <a name="s:202" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#insert.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#insert.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#insert.A">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:202">s</a></span> <span class="id">isn't</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id"><a href="monae.fail_lib.html#a:201">a]</a></span> <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#a:201">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">h</span>) (<span class="id"><a href="monae.fail_lib.html#insert:203">insert</a></span> <span class="id"><a href="monae.fail_lib.html#a:201">a</a></span> <span class="id">t</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="insertE" class="id">
  <a name="insertE" class="">insertE</a>
</span> (<span id="a:205" class="id">
  <a name="a:205" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#insert.A">A</a></span>) <span id="s:206" class="id">
  <a name="s:206" class="">s</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#a:205">a</a></span> <span class="id"><a href="monae.fail_lib.html#s:206">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:206">s</a></span> <span class="id">isn't</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id"><a href="monae.fail_lib.html#a:205">a]</a></span> <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#a:205">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">h</span>) (<span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#a:205">a</a></span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
 <span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">s</span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id">:</span> <span class="id">simpl</span> <span class="id">never</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="insert_altMonad" class="id">
  <a name="insert_altMonad" class="">insert_altMonad</a>
</span>.<br/>
<span class="vernacular">Variable</span> <span id="insert_altMonad.M" class="id">
  <a name="insert_altMonad.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad</a></span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="insert_map" class="id">
  <a name="insert_map" class="">insert_map</a>
</span> (<span id="A:209" class="id">
  <a name="A:209" class="">A</a>
</span> <span id="B:210" class="id">
  <a name="B:210" class="">B</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="f:211" class="id">
  <a name="f:211" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:209">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#B:210">B</a></span>) (<span id="a:212" class="id">
  <a name="a:212" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:209">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> (<span class="id"><a href="monae.fail_lib.html#f:211">f</a></span> <span class="id"><a href="monae.fail_lib.html#a:212">a</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="monae.fail_lib.html#f:211">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="monae.fail_lib.html#f:211">f</a></span> (<span class="id">o</span>) <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#a:212">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
<span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span><span class="id">;</span> <span class="id">elim</span> <span class="id">=&gt;</span> <span class="id">[|y</span> <span class="id">xs</span> <span class="id">IH]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id">-</span>(<span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> (<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id">f</span>))) (<span class="id"><a href="monae.hierarchy.html#natural">natural</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span>) <span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span>.<br/>
<span class="id">apply/esym</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id"><a href="monae.fail_lib.html#alt_fmapDr">alt_fmapDr</a></span>.<br/>
<span class="comment">(*&nbsp;first&nbsp;branch&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id">-</span>(<span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> (<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id">f</span>))) (<span class="id"><a href="monae.hierarchy.html#natural">natural</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span>) <span class="id"><a href="monae.hierarchy.html#FIdE">FIdE</a></span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.fail_lib.html#X:213">X</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span> <span class="id">]/=</span>.<br/>
<span class="comment">(*&nbsp;second&nbsp;branch&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id">-fmap_oE</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id">f</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">y</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> (<span class="id">f</span> <span class="id">y</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id">f</span>) <span class="id">//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.monad_lib.html#fmap_oE">fmap_oE</a></span> <span class="id">-</span>(<span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id">f</span>)) <span class="id">-IH</span> <span class="id">[RHS]/=</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Hypothesis</span> <span id="insert_altMonad.Mmm" class="id">
  <a name="insert_altMonad.Mmm" class="">Mmm</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="A:214" class="id">
  <a name="A:214" class="">A,</a>
</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idempotent">idempotent</a></span> (<span class="id">@alt</span> <span class="id">_</span> <span class="id"><a href="monae.fail_lib.html#A:214">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:214">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:214">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:214">A</a></span>).<br/>
<br/>
<span class="vernacular">Variables</span> (<span id="insert_altMonad.A" class="id">
  <a name="insert_altMonad.A" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="insert_altMonad.p" class="id">
  <a name="insert_altMonad.p" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.fail_lib.html#A:216">A</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="filter_insertN" class="id">
  <a name="filter_insertN" class="">filter_insertN</a>
</span> <span id="a:218" class="id">
  <a name="a:218" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351">~~</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#a:218">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:219" class="id">
  <a name="s:219" class="">s,</a>
</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span> (<span class="id">o</span>) <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#a:218">a</a></span>) <span class="id"><a href="monae.fail_lib.html#s:219">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#s:219">s</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
<span class="id">move=&gt;</span> <span class="id">pa;</span> <span class="id">elim</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">IH]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id">-</span>(<span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> (<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> <span class="id">_</span>)) (<span class="id"><a href="monae.hierarchy.html#natural">natural</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span>) <span class="id"><a href="monae.hierarchy.html#FIdE">FIdE</a></span> <span class="id">/=</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">pa</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id"><a href="monae.fail_lib.html#alt_fmapDr">alt_fmapDr</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-</span>(<span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> (<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> <span class="id">_</span>)) (<span class="id"><a href="monae.hierarchy.html#natural">natural</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span>) <span class="id"><a href="monae.hierarchy.html#FIdE">FIdE</a></span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.fail_lib.html#X:220">X</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_]/=</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">pa</span>).<br/>
<span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=&gt;</span> <span class="id">ph</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">-fmap_oE</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">h</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">h</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span> <span class="id">=&gt;</span> <span class="id">x</span> <span class="id">/=;</span> <span class="id">rewrite</span> <span class="id">ph</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.monad_lib.html#fmap_oE">fmap_oE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> (<span class="id">IH</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id">=&gt;</span> <span class="id">-&gt;</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id">/=</span> <span class="id">ph</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.Mmm">Mmm</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">-fmap_oE</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">h</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span> <span class="id">=&gt;</span> <span class="id">x</span> <span class="id">/=;</span> <span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">ph</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move:</span> (<span class="id">IH</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id">=&gt;</span> <span class="id">-&gt;</span> <span class="id">/=;</span> <span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">ph</span>) <span class="id"><a href="monae.fail_lib.html#insert_altMonad.Mmm">Mmm</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="filter_insertT" class="id">
  <a name="filter_insertT" class="">filter_insertT</a>
</span> <span id="a:221" class="id">
  <a name="a:221" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span> <span class="id"><a href="monae.fail_lib.html#a:221">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span> (<span class="id">o</span>) <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#a:221">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#a:221">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
<span class="id">move=&gt;</span> <span class="id">pa;</span> <span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span><span class="id">;</span> <span class="id">elim</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">IH]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id">!insertE</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span> <span class="id">pa</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]/=;</a></span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=&gt;</span> <span class="id">ph</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]insertE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> (<span class="id">IH</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.fail_lib.html#X:222">X</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">_]/=</span> <span class="id">=&gt;</span> <span class="id">&lt;-</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]insertE</a></span> <span class="id"><a href="monae.fail_lib.html#alt_fmapDr">alt_fmapDr;</a></span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span> <span class="id">pa</span> <span class="id">ph</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!fmapE</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id">[LHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">ph</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]insertE</a></span> <span class="id"><a href="monae.fail_lib.html#alt_fmapDr">alt_fmapDr</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">-[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#X:223">X</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">_]fmap_oE</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#cons">cons</a></span> <span class="id">h</span>) <span class="id">=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.p">p</a></span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span> <span class="id">=&gt;</span> <span class="id">x</span> <span class="id">/=;</span> <span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">ph</span>).<br/>
&nbsp;&nbsp;<span class="id">move:</span> (<span class="id">IH</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id">=&gt;</span> <span class="id">-&gt;</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span> <span class="id">pa</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">ph</span>) <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]insertE;</a></span> <span class="id">case:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span> <span class="id">[|h'</span> <span class="id">t']</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.Mmm">Mmm</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!insertE</span> <span class="id"><a href="monae.hierarchy.html#altA">altA</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad.Mmm">Mmm</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#insert_altMonad">insert_altMonad</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="insert_altCIMonad" class="id">
  <a name="insert_altCIMonad" class="">insert_altCIMonad</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="insert_altCIMonad.M" class="id">
  <a name="insert_altCIMonad.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAltCI.Exports.altCIMonad">altCIMonad</a></span>) (<span id="insert_altCIMonad.A" class="id">
  <a name="insert_altCIMonad.A" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="insert_altCIMonad.a" class="id">
  <a name="insert_altCIMonad.a" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:225">A</a></span>).<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="insert_rcons" class="id">
  <a name="insert_rcons" class="">insert_rcons</a>
</span> <span id="a':227" class="id">
  <a name="a':227" class="">a'</a>
</span> <span id="s:228" class="id">
  <a name="s:228" class="">s</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altCIMonad.a">a</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#s:228">s</a></span> <span class="id"><a href="monae.fail_lib.html#a':227">a'</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#s:228">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id"><a href="monae.fail_lib.html#a':227">a';</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altCIMonad.a">a]</a></span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons^~</a></span> <span class="id"><a href="monae.fail_lib.html#a':227">a'</a></span>) (<span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altCIMonad.a">a</a></span> <span class="id"><a href="monae.fail_lib.html#s:228">s</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altCIMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">a'</span> <span class="id">=&gt;</span> <span class="id">[a'|s1</span> <span class="id">s2</span> <span class="id">IH</span> <span class="id">a']</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cat0s">cat0s</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id"><a href="monae.hierarchy.html#altC">altC;</a></span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]/=</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id">IH</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#alt_fmapDr">alt_fmapDr</a></span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#X:229">X</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">_]fmapE</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#alt_fmapDr">alt_fmapDr</a></span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#X:230">X]fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-!fmap_oE</span> <span class="id"><a href="monae.hierarchy.html#altCA">altCA</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="rev_insert" class="id">
  <a name="rev_insert" class="">rev_insert</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rev">rev</a></span> (<span class="id">o</span>) <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altCIMonad.a">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altCIMonad.a">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rev">rev</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altCIMonad.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
<span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span><span class="id">;</span> <span class="id">elim</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">ih]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id"><a href="monae.fail_lib.html#alt_fmapDr">alt_fmapDr</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]rev_cons</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insert_rcons">insert_rcons</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rev_cons">rev_cons</a></span> <span class="id">-cats1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rev_cons">rev_cons</a></span> <span class="id">-cats1</span> <span class="id">-catA;</span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>).<br/>
<span class="id">move:</span> <span class="id">ih;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id">[X</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.fail_lib.html#X:231">X</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">_]/=</span> <span class="id">=&gt;</span> <span class="id">&lt;-</span>.<br/>
<span class="id">rewrite</span> <span class="id">-!fmap_oE</span>. <span class="id">congr</span> (<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> <span class="id">_</span> (<span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#insert_altCIMonad.a">a</a></span> <span class="id">t</span>)).<br/>
<span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span> <span class="id">=&gt;</span> <span class="id">s;</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-rev_cons</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#insert_altCIMonad">insert_altCIMonad</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="test_canonical" class="id">
  <a name="test_canonical" class="">test_canonical</a>
</span> (<span id="M:232" class="id">
  <a name="M:232" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad</a></span>) <span id="A:233" class="id">
  <a name="A:233" class="">A</a>
</span> (<span id="a:234" class="id">
  <a name="a:234" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:232">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:233">A</a></span>) (<span id="b:235" class="id">
  <a name="b:235" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:233">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#M:232">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:233">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#a:234">a</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> (<span class="id"><a href="monae.hierarchy.html#fail">fail</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#b:235">b</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#a:234">a</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#fail">fail</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
<span class="gallina-kwd">Set</span> <span class="vernacular">Printing</span> <span class="id">All</span>.<br/>
<span class="vernacular">Unset</span> <span class="vernacular">Printing</span> <span class="id">All</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>.<br/>
Abort.</div>
<br/>
<span class="vernacular">Section</span> <span id="insert_plusMonad" class="id">
  <a name="insert_plusMonad" class="">insert_plusMonad</a>
</span>.<br/>
<span class="vernacular">Variable</span> <span id="insert_plusMonad.M" class="id">
  <a name="insert_plusMonad.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="insertC" class="id">
  <a name="insertC" class="">insertC</a>
</span> (<span id="A:237" class="id">
  <a name="A:237" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span id="a:238" class="id">
  <a name="a:238" class="">a</a>
</span> <span id="b:239" class="id">
  <a name="b:239" class="">b</a>
</span> (<span id="s:240" class="id">
  <a name="s:240" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:237">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:241" class="id">
  <a name="x:241" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#b:239">b</a></span> <span class="id"><a href="monae.fail_lib.html#s:240">s;</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#a:238">a</a></span> <span class="id"><a href="monae.fail_lib.html#x:241">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:242" class="id">
  <a name="x:242" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#a:238">a</a></span> <span class="id"><a href="monae.fail_lib.html#s:240">s;</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#b:239">b</a></span> <span class="id"><a href="monae.fail_lib.html#x:242">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#insert_plusMonad.M">M</a></span> <span class="id">_</span>)<span class="id">%Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
<span class="id">have</span> <span class="id">[n</span> <span class="id">ns]</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ubnP">ubnP</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>)<span class="id">;</span> <span class="id">elim:</span> <span class="id">n</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">a</span> <span class="id">b</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">n</span> <span class="id">ih</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">a</span> <span class="id">b</span>.<br/>
<span class="id">case:</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!insertE</span> <span class="id">!bindretf</span> <span class="id">!insertE</span> <span class="id"><a href="monae.hierarchy.html#altC">altC</a></span> <span class="id">!fmapE</span> <span class="id">!bindretf</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">/=</span> <span class="id">=&gt;</span> <span class="id">ns</span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id">_</span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)) <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]</a></span>(<span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id">_</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#ab09fa4bd99b3931b6a319926b973947">[::</a></span> <span class="id">b,</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#ab09fa4bd99b3931b6a319926b973947">&amp;</a></span> <span class="id">t]</span>) <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]</a></span>(<span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id">_</span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)).<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]</a></span>(<span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id">_</span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)) <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">2![in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]insertE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]alt_fmapDr</a></span> <span class="id">![in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]altA</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]</a></span>(<span class="id"><a href="monae.hierarchy.html#altC">altC</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#ab09fa4bd99b3931b6a319926b973947">[::</a></span> <span class="id">a,</span> <span class="id">b,</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#ab09fa4bd99b3931b6a319926b973947">&amp;</a></span> <span class="id">t]</span>)).<br/>
<span class="id">rewrite</span> <span class="id">-!altA;</span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#alt_fmapDr">alt_fmapDr</a></span> <span class="id">-!altA;</span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]altC</a></span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap</a></span> <span class="id">/=</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]/comp</a></span> <span class="id">/=</span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDr">alt_bindDr</a></span>.<br/>
<span class="id">under</span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#X:243">X</a></span>) <span class="id">[~]</span> <span class="id">_]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-bindA</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]ih</a></span> <span class="id">//</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]altC</a></span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap</a></span> <span class="id">/=</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]/comp</a></span> <span class="id">/=</span>.<br/>
<span class="id">under</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDr">alt_bindDr</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]altC</a></span> <span class="id">-!altA;</span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!fmapE</span> <span class="id">!bindA</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">!bindretf</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]altC;</a></span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!fmapE</span> <span class="id">!bindA</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="insert_cat" class="id">
  <a name="insert_cat" class="">insert_cat</a>
</span> (<span id="A:244" class="id">
  <a name="A:244" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span id="h:245" class="id">
  <a name="h:245" class="">h</a>
</span> (<span id="a:246" class="id">
  <a name="a:246" class="">a</a>
</span> <span id="b:247" class="id">
  <a name="b:247" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:244">A</a></span>) <span id="u:248" class="id">
  <a name="u:248" class="">u</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#h:245">h</a></span> (<span class="id"><a href="monae.fail_lib.html#a:246">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#u:248">u</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#b:247">b</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:249" class="id">
  <a name="x:249" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#h:245">h</a></span> <span class="id"><a href="monae.fail_lib.html#a:246">a;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#x:249">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#u:248">u</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#b:247">b</a></span>))<span class="id">%Do</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:250" class="id">
  <a name="x:250" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#h:245">h</a></span> <span class="id"><a href="monae.fail_lib.html#b:247">b;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#a:246">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#u:248">u</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#x:250">x</a></span>))<span class="id">%Do</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#insert_plusMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
<span class="id">elim:</span> <span class="id">a</span> <span class="id">h</span> <span class="id">u</span> <span class="id">b</span> <span class="id">=&gt;</span> <span class="id">[h</span> <span class="id">u</span> <span class="id">b|a1</span> <span class="id">a2</span> <span class="id">ih</span> <span class="id">h</span> <span class="id">u</span> <span class="id">b]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> (<span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id">h</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cat_cons">cat_cons</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]insertE</a></span> <span class="id">[u</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">b]lock</span> <span class="id">/=</span> <span class="id">-lock</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]ih</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]insertE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">-altA;</span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>).<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]bind_fmap</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]fmapE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]alt_bindDl</a></span> <span class="id">!bindA</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#insert_plusMonad">insert_plusMonad</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="insert_nondetMonad" class="id">
  <a name="insert_nondetMonad" class="">insert_nondetMonad</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad}</a></span> <span class="id">{A</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0}</a></span>.<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> <span class="id">s</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#insert_nondetMonad.A">A</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="insert_Ret" class="id">
  <a name="insert_Ret" class="">insert_Ret</a>
</span> <span id="a:253" class="id">
  <a name="a:253" class="">a</a>
</span> <span id="s:254" class="id">
  <a name="s:254" class="">s</a>
</span> <span class="id">:</span> <span class="gallina-kwd">exists</span> <span id="m:255" class="id">
  <a name="m:255" class="">m,</a>
</span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#a:253">a</a></span> <span class="id"><a href="monae.fail_lib.html#s:254">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#a:253">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#s:254">s</a></span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#m:255">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#insert_nondetMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">[m</span> <span class="id">ih]]</span> <span class="id">/=;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">eexists;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE;</a></span> <span class="id">reflexivity</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE;</a></span> <span class="gallina-kwd">exists</span> <span class="id"><a href="monae.hierarchy.html#fail">fail;</a></span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#altmfail">altmfail</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#insert_nondetMonad">insert_nondetMonad</a></span>.<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="iperm" class="id">
  <a name="iperm" class="">iperm</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad}</a></span> <span class="id">{A</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0}</a></span> (<span id="s:258" class="id">
  <a name="s:258" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:257">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:256">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:257">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:258">s</a></span> <span class="id">isn't</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="monae.fail_lib.html#iperm:259">iperm</a></span> <span class="id">t</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id">h</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="iperm_altMonad" class="id">
  <a name="iperm_altMonad" class="">iperm_altMonad</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad}</a></span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="iperm_o_map" class="id">
  <a name="iperm_o_map" class="">iperm_o_map</a>
</span> (<span id="A:262" class="id">
  <a name="A:262" class="">A</a>
</span> <span id="B:263" class="id">
  <a name="B:263" class="">B</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="f:264" class="id">
  <a name="f:264" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:262">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#B:263">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="monae.fail_lib.html#f:264">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#map">map</a></span> <span class="id"><a href="monae.fail_lib.html#f:264">f</a></span> (<span class="id">o</span>) <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_altMonad.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
<span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span><span class="id">;</span> <span class="id">elim</span> <span class="id">=&gt;</span> <span class="id">[/=|x</span> <span class="id">xs</span> <span class="id">IH]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id">[iperm</span> <span class="id">_]/=</span> <span class="id">-[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]compE</a></span> (<span class="id"><a href="monae.hierarchy.html#natural">natural</a></span> <span class="id"><a href="monae.hierarchy.html#ret">ret</a></span>).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id">[in</span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id">_]/=</span> <span class="id"><a href="monae.hierarchy.html#fmap_bind">fmap_bind</a></span> <span class="id">-insert_map</span> <span class="id">-bind_fmap</span> <span class="id">-fcompE</span> <span class="id">-IH</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Hypothesis</span> <span id="iperm_altMonad.Mmm" class="id">
  <a name="iperm_altMonad.Mmm" class="">Mmm</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="A:265" class="id">
  <a name="A:265" class="">A,</a>
</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idempotent">idempotent</a></span> (<span class="id">@alt</span> <span class="id">_</span> <span class="id"><a href="monae.fail_lib.html#A:265">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_altMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:265">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_altMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:265">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_altMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:265">A</a></span>).<br/>
<br/>
<span class="vernacular">Variables</span> (<span id="iperm_altMonad.A" class="id">
  <a name="iperm_altMonad.A" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="iperm_altMonad.p" class="id">
  <a name="iperm_altMonad.p" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.fail_lib.html#A:267">A</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="iperm_filter" class="id">
  <a name="iperm_filter" class="">iperm_filter</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_altMonad.p">p</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#filter">filter</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_altMonad.p">p</a></span> (<span class="id">o</span>) <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_altMonad.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
<span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span><span class="id">;</span> <span class="id">elim</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">/=</span> <span class="id">IH]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=&gt;</span> <span class="id">ph</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]/=</a></span> <span class="id">IH</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]fcomp_def</a></span> <span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]bind_fmap</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]fcomp_def</a></span> <span class="id"><a href="monae.monae_lib.html#compE">compE</a></span> <span class="id">-/</span>(<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">_</a></span>) <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]fmap_bind;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#filter_insertT">filter_insertT</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.hierarchy.html#fmap_bind">fmap_bind</a></span> <span class="id">IH</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#filter_insertN">filter_insertN</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#iperm_altMonad">iperm_altMonad</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="iperm_nondetMonad" class="id">
  <a name="iperm_nondetMonad" class="">iperm_nondetMonad</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad}</a></span> <span class="id">{A</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0}</a></span>.<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> <span class="id">s</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_nondetMonad.A">A</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="iperm_is_alt_ret" class="id">
  <a name="iperm_is_alt_ret" class="">iperm_is_alt_ret</a>
</span> <span id="s:271" class="id">
  <a name="s:271" class="">s</a>
</span> <span class="id">:</span> <span class="gallina-kwd">exists</span> <span id="m:272" class="id">
  <a name="m:272" class="">m,</a>
</span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:271">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#s:271">s</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#m:272">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_nondetMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">[m</span> <span class="id">ih]</span> <span class="id">/=];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="monae.hierarchy.html#fail">fail;</a></span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#altmfail">altmfail</a></span>.<br/>
<span class="id">case:</span> (<span class="id">@insert_Ret</span> <span class="id"><a href="monae.fail_lib.html#iperm_nondetMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_nondetMonad.A">A</a></span> <span class="id">h</span> <span class="id">t</span>) <span class="id">=&gt;</span> <span class="id">n</span> <span class="id">Hn</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">eexists;</span> <span class="id">rewrite</span> <span class="id">ih</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">Hn</span> <span class="id">-altA</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#iperm_nondetMonad">iperm_nondetMonad</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="iperm_plusMonad" class="id">
  <a name="iperm_plusMonad" class="">iperm_plusMonad</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad}</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="iperm_insert" class="id">
  <a name="iperm_insert" class="">iperm_insert</a>
</span> <span class="id">{A</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0}</a></span> <span id="a:275" class="id">
  <a name="a:275" class="">a</a>
</span> <span id="b:276" class="id">
  <a name="b:276" class="">b</a>
</span> (<span id="s:277" class="id">
  <a name="s:277" class="">s</a>
</span> <span id="t:278" class="id">
  <a name="t:278" class="">t</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:274">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:279" class="id">
  <a name="x:279" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> (<span class="id"><a href="monae.fail_lib.html#b:276">b</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#s:277">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#t:278">t</a></span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#a:275">a</a></span> <span class="id"><a href="monae.fail_lib.html#x:279">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:280" class="id">
  <a name="x:280" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#s:277">s</a></span> <span class="id"><a href="monae.fail_lib.html#a:275">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#t:278">t</a></span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#b:276">b</a></span> <span class="id"><a href="monae.fail_lib.html#x:280">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_plusMonad.M">M</a></span> <span class="id">_</span>)<span class="id">%Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">[/=|h</span> <span class="id">tl</span> <span class="id">ih]</span> <span class="gallina-kwd">in</span> <span class="id">a</span> <span class="id">b</span> <span class="id">t</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!bindA</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertC">insertC</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">tl]lock</span> <span class="id">/=</span> <span class="id">-lock</span> <span class="id">ih</span> <span class="id">/=</span> <span class="id">!bindA</span>.<br/>
<span class="id">suff</span> <span class="id">:</span> (<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:281" class="id">
  <a name="x:281" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id">tl</span> <span class="id">b</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id">t</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x0:282" class="id">
  <a name="x0:282" class="">x0</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id">a</span> <span class="id"><a href="monae.fail_lib.html#x:281">x;</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id">h</span> <span class="id"><a href="monae.fail_lib.html#x0:282">x0</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:283" class="id">
  <a name="x:283" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id">tl</span> <span class="id">a</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id">t</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x0:284" class="id">
  <a name="x0:284" class="">x0</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id">b</span> <span class="id"><a href="monae.fail_lib.html#x:283">x;</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id">h</span> <span class="id"><a href="monae.fail_lib.html#x0:284">x0</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_plusMonad.M">M</a></span> <span class="id">_</span>)<span class="id">%Do</span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertC">insertC</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span> <span class="id">-&gt;</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertC">insertC</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-bindA</span> <span class="id">-ih</span> <span class="id">/=</span> <span class="id">-bindA</span> <span class="id">-[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]ih</a></span> <span class="id">/=</span> <span class="id">!bindA;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">a'</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-bindA</span> <span class="id"><a href="monae.fail_lib.html#insertC">insertC</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="perm_eq_iperm" class="id">
  <a name="perm_eq_iperm" class="">perm_eq_iperm</a>
</span> (<span id="A:285" class="id">
  <a name="A:285" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) (<span id="a:286" class="id">
  <a name="a:286" class="">a</a>
</span> <span id="b:287" class="id">
  <a name="b:287" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:285">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_eq">perm_eq</a></span> <span class="id"><a href="monae.fail_lib.html#a:286">a</a></span> <span class="id"><a href="monae.fail_lib.html#b:287">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="monae.fail_lib.html#a:286">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="monae.fail_lib.html#b:287">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_plusMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
<span class="id">have</span> <span class="id">[n</span> <span class="id">na]</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ubnP">ubnP</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">a</span>)<span class="id">;</span> <span class="id">elim:</span> <span class="id">n</span> <span class="id">a</span> <span class="id">na</span> <span class="id">b</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">n</span> <span class="id">ih</span> <span class="id">a</span> <span class="id">na</span> <span class="id">b</span>.<br/>
<span class="id">case:</span> <span class="id">a</span> <span class="id">na</span> <span class="id">=&gt;</span> <span class="id">[na|a1</span> <span class="id">a2];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">/perm_size/esym/size0nil</span> <span class="id">-&gt;</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.fail_lib.html#X:288">X</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">_]/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">=&gt;</span> <span class="id">na</span>.<br/>
<span class="id">case:</span> <span class="id">b</span> <span class="id">=&gt;</span> <span class="id">[/perm_size</span> <span class="id">//|b1</span> <span class="id">b2]</span>.<br/>
<span class="id">have</span> <span class="id">[a1b1|a1b1</span> <span class="id">ab]</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eqVneq">eqVneq</a></span> <span class="id">a1</span> <span class="id">b1</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">{}a1b1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_cons">perm_cons</a></span> <span class="id">=&gt;</span> <span class="id">ab</span> <span class="id">/=;</span> <span class="id">rewrite</span> (<span class="id">ih</span> <span class="id">_</span> <span class="id">na</span> <span class="id">b2</span>).<br/>
<span class="id">have</span> <span class="id">[b21</span> <span class="id">[b22</span> <span class="id">Hb]]</span> <span class="id">:</span> <span class="gallina-kwd">exists</span> <span id="b21:289" class="id">
  <a name="b21:289" class="">b21</a>
</span> <span id="b22:290" class="id">
  <a name="b22:290" class="">b22,</a>
</span> <span class="id">b2</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#b21:289">b21</a></span> <span class="id">a1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#b22:290">b22</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> <span class="id"><a href="monae.fail_lib.html#mem_rcons_cat">mem_rcons_cat</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move/perm_mem</span> <span class="id">:</span> <span class="id">ab</span> <span class="id">=&gt;</span> <span class="id">/</span>(<span class="id">_</span> <span class="id">a1</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#mem_head">mem_head</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.finset.html#inE">inE</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">a1b1</span>).<br/>
<span class="id">have</span> <span class="id">{}</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_eq">perm_eq</a></span> <span class="id">a2</span> (<span class="id">b1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">b21</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id">b22</span>).<br/>
&nbsp;&nbsp;<span class="id">move:</span> <span class="id">ab;</span> <span class="id">rewrite</span> <span class="id">Hb</span> <span class="id">-cats1</span> <span class="id">-catA</span> <span class="id">-cat_cons</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_sym">perm_sym</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_catCA">perm_catCA</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_cons">perm_cons</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_sym">perm_sym</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">/</span>(<span class="id">ih</span> <span class="id">_</span> <span class="id">na</span>) <span class="id">/=</span> <span class="id">-&gt;;</span> <span class="id">rewrite</span> <span class="id">Hb</span> <span class="id"><a href="monae.fail_lib.html#iperm_insert">iperm_insert</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iperm_rcons" class="id">
  <a name="iperm_rcons" class="">iperm_rcons</a>
</span> (<span id="A:291" class="id">
  <a name="A:291" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) <span id="t:292" class="id">
  <a name="t:292" class="">t</a>
</span> (<span id="x:293" class="id">
  <a name="x:293" class="">x</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:291">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#t:292">t</a></span> <span class="id"><a href="monae.fail_lib.html#x:293">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> (<span class="id"><a href="monae.fail_lib.html#x:293">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#t:292">t</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_plusMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
 <span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="monae.fail_lib.html#perm_eq_iperm">perm_eq_iperm;</a></span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_rcons">perm_rcons</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iperm_insertC" class="id">
  <a name="iperm_insertC" class="">iperm_insertC</a>
</span> (<span id="A:294" class="id">
  <a name="A:294" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) <span id="x:295" class="id">
  <a name="x:295" class="">x</a>
</span> <span id="y:296" class="id">
  <a name="y:296" class="">y</a>
</span> (<span id="s:297" class="id">
  <a name="s:297" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:294">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="s':298" class="id">
  <a name="s':298" class="">s'</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#s:297">s</a></span> <span class="id"><a href="monae.fail_lib.html#x:295">x</a></span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#y:296">y</a></span> <span class="id"><a href="monae.fail_lib.html#s':298">s'</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="s':299" class="id">
  <a name="s':299" class="">s'</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#y:296">y</a></span> <span class="id"><a href="monae.fail_lib.html#s:297">s;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#s':299">s'</a></span> <span class="id"><a href="monae.fail_lib.html#x:295">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_plusMonad.M">M</a></span> <span class="id">_</span>)<span class="id">%Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
<span class="id">have</span> <span class="id">[n</span> <span class="id">ns]</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ubnP">ubnP</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>)<span class="id">;</span> <span class="id">elim:</span> <span class="id">n</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">x</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">n</span> <span class="id">ih</span>.<br/>
<span class="id">move=&gt;</span> <span class="id">[/=</span> <span class="id">_</span> <span class="id">x</span> <span class="id">y|h</span> <span class="id">t]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!bindA</span> <span class="id">!bindretf</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]insertE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">/=</span> <span class="id">=&gt;</span> <span class="id">tn</span> <span class="id">x</span> <span class="id">y</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_rcons">iperm_rcons</a></span> <span class="id">/=</span> <span class="id">!bindA</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]insertE</a></span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_rcons">iperm_rcons</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap</a></span> <span class="id">/comp</span> <span class="id">/=</span> <span class="id">-[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]X]bindA</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-ih//</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_rcons">iperm_rcons</a></span> <span class="id">/=</span> <span class="id">!bindA</span> <span class="id">-alt_bindDr;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s'</span>.<br/>
<span class="id">rewrite</span> <span class="id">-alt_bindDr;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">t'</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertC">insertC</a></span> <span class="id"><a href="monae.hierarchy.html#altmm">altmm</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iperm_rcons_bind" class="id">
  <a name="iperm_rcons_bind" class="">iperm_rcons_bind</a>
</span> (<span id="E:301" class="id">
  <a name="E:301" class="">E</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) (<span id="s:302" class="id">
  <a name="s:302" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#E:301">E</a></span>) <span id="x:303" class="id">
  <a name="x:303" class="">x</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#s:302">s</a></span> <span class="id"><a href="monae.fail_lib.html#x:303">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:302">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="s':304" class="id">
  <a name="s':304" class="">s'</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#s':304">s'</a></span> <span class="id"><a href="monae.fail_lib.html#x:303">x</a></span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_plusMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
<span class="id">have</span> <span class="id">[n</span> <span class="id">ns]</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ubnP">ubnP</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>)<span class="id">;</span> <span class="id">elim:</span> <span class="id">n</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">n</span> <span class="id">ih</span>.<br/>
<span class="id">case=&gt;</span> <span class="id">[_</span> <span class="id">x|h</span> <span class="id">t];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">2!bindretf</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">/=</span> <span class="id">=&gt;</span> <span class="id">tn</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">ih//</span> <span class="id">!bindA</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">-iperm_insertC</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iperm_idempotent" class="id">
  <a name="iperm_idempotent" class="">iperm_idempotent</a>
</span> (<span id="E:305" class="id">
  <a name="E:305" class="">E</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="monae.hierarchy.html#5483cabbcd988b1cb7000e5ba9f05889">&gt;=&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#E:305">E</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_plusMonad.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
<span class="id">apply:</span> <span class="id"><a href="monae.monae_lib.html#funext_dep">funext_dep</a></span> <span class="id">=&gt;</span> <span class="id">s;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#kleisliE">kleisliE</a></span>.<br/>
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">ih];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id">-[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]ih</a></span> <span class="id">!bindA;</span> <span class="id">bind_ext</span>.<br/>
<span class="id">elim/last_ind</span> <span class="id">=&gt;</span> <span class="id">[|s</span> <span class="id">x</span> <span class="id">_]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id">/=</span> <span class="id">!bindretf</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#iperm_insertC">iperm_insertC</a></span> <span class="id"><a href="monae.fail_lib.html#insert_rcons">insert_rcons</a></span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap</a></span> <span class="id">/=</span> <span class="id">/comp</span> <span class="id">/=</span>.<br/>
<span class="id">under</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#iperm_rcons_bind">iperm_rcons_bind</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> (<span class="id">@perm_eq_iperm</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id">s</span> <span class="id">x</span>))<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-cats1</span> <span class="id">-cat1s</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#catA">catA</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_catC">perm_catC</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="monae.fail_lib.html#iperm_insertC">iperm_insertC</a></span> <span class="id">-alt_bindDr;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s'</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#altmm">altmm</a></span> <span class="id"><a href="monae.fail_lib.html#iperm_rcons_bind">iperm_rcons_bind</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#iperm_plusMonad">iperm_plusMonad</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="select" class="id">
  <a name="select" class="">select</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="select.M" class="id">
  <a name="select.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad</a></span>) (<span id="select.A" class="id">
  <a name="select.A" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>).<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> <span class="id">s</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#select.A">A</a></span>.<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="select" class="id">
  <a name="select" class="">select</a>
</span> <span id="s:308" class="id">
  <a name="s:308" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#select.M">M</a></span> (<span class="id"><a href="monae.fail_lib.html#select.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#select.A">A</a></span>)<span class="id">%type</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:308">s</a></span> <span class="id">isn't</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#fail">fail</a></span> <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">h,</span> <span class="id">t</span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#select:309">select</a></span> <span class="id">t</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:311" class="id">
  <a name="x:311" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#x:311">x</a></span>.<span class="id">1,</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#x:311">x</a></span>.<span class="id">2</span>))).<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Obligation</span> <span class="vernacular">Tactic</span> <span class="id">:=</span> <span class="id">idtac</span>.<br/>
<span class="id">Program</span> <span class="vernacular">Fixpoint</span> <span id="tselect" class="id">
  <a name="tselect" class="">tselect</a>
</span> (<span id="s:312" class="id">
  <a name="s:312" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#select.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#select.M">M</a></span> (<span class="id"><a href="monae.fail_lib.html#select.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:312">s</a></span>).<span class="id">-1</span>.<span class="id">-tuple</span> <span class="id"><a href="monae.fail_lib.html#select.A">A</a></span>)<span class="id">%type</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:312">s</a></span> <span class="id">isn't</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#fail">fail</a></span> <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">h,</span> <span class="id">@Tuple</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">t</span>) <span class="id"><a href="monae.fail_lib.html#select.A">A</a></span> <span class="id">t</span> <span class="id">_</span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#tselect:313">tselect</a></span> <span class="id">t</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:315" class="id">
  <a name="x:315" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#x:315">x</a></span>.<span class="id">1,</span> <span class="id">@Tuple</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">t</span>) <span class="id"><a href="monae.fail_lib.html#select.A">A</a></span> <span class="id">_</span> <span class="id">_</span> )).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Next Obligation.</span></div>
<div class="proofscript" id="proof41">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Defined.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Next Obligation.</span></div>
<div class="proofscript" id="proof42">
<span class="id">move=&gt;</span> <span class="id">s</span> <span class="id">h</span> <span class="id">[|h'</span> <span class="id">t]</span> <span class="id">hts</span> <span class="id">[x1</span> <span class="id">x2];</span> <span class="id">[exact:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id">|</span> <span class="id">exact:</span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">x2</span>)<span class="id">]</span>.<br/>
Defined.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Next Obligation.</span></div>
<div class="proofscript" id="proof43">
<span class="id">move=&gt;</span> <span class="id">s</span> <span class="id">h</span> <span class="id">[|h'</span> <span class="id">t]</span> <span class="id">hts</span> <span class="id">[x1</span> <span class="id">x2]</span> <span class="id">//=;</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_tuple">size_tuple</a></span>.<br/>
Defined.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Next Obligation.</span></div>
<div class="proofscript" id="proof44">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Defined.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="tselect_nil" class="id">
  <a name="tselect_nil" class="">tselect_nil</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#fail">fail</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="tselect1" class="id">
  <a name="tselect1" class="">tselect1</a>
</span> <span id="a:316" class="id">
  <a name="a:316" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id"><a href="monae.fail_lib.html#a:316">a]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#a:316">a,</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#40a2c8face21f18a7058a916d5f839b8">[tuple]</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span> <span class="id"><a href="monae.hierarchy.html#altmfail">altmfail</a></span> <span class="id">/tselect_obligation_1</span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#tupleE">tupleE</a></span> <span class="id">/nil_tuple</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">do</span> <span class="id">3</span> <span class="id">f_equal;</span> <span class="id">apply</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eq_irrelevance">eq_irrelevance</a></span>.<br/>
Qed.</div>
<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="tselect_cons_statement" class="id">
  <a name="tselect_cons_statement" class="">tselect_cons_statement</a>
</span> <span id="a:317" class="id">
  <a name="a:317" class="">a</a>
</span> <span id="t:318" class="id">
  <a name="t:318" class="">t</a>
</span> (<span class="id">_</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#t:318">t</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> (<span class="id"><a href="monae.fail_lib.html#a:317">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#t:318">t</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#a:317">a,</a></span> <span class="id">@Tuple</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="monae.fail_lib.html#t:318">t</a></span> <span class="id">_</span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> <span class="id"><a href="monae.fail_lib.html#t:318">t</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:319" class="id">
  <a name="x:319" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#x:319">x</a></span>.<span class="id">1,</span> <span class="id">@Tuple</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="monae.fail_lib.html#a:317">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#x:319">x</a></span>.<span class="id">2</span>) <span class="id">_</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Next Obligation.</span></div>
<div class="proofscript" id="proof47">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Defined.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Next Obligation.</span></div>
<div class="proofscript" id="proof48">
<span class="id">move=&gt;</span> <span class="id">a</span> <span class="id">t</span> <span class="id">t0</span> <span class="id">[x1</span> <span class="id">x2]</span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_tuple">size_tuple</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#prednK">prednK</a></span> <span class="id">//;</span> <span class="gallina-kwd">by</span> <span class="id">destruct</span> <span class="id">t</span>.<br/>
Defined.</div>
<br/>
<span class="id">Program</span> <span class="vernacular">Lemma</span> <span id="tselect_cons" class="id">
  <a name="tselect_cons" class="">tselect_cons</a>
</span> <span id="a:320" class="id">
  <a name="a:320" class="">a</a>
</span> <span id="t:321" class="id">
  <a name="t:321" class="">t</a>
</span> (<span id="Ht:322" class="id">
  <a name="Ht:322" class="">Ht</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#t:321">t</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#tselect_cons_statement">tselect_cons_statement</a></span> <span class="id"><a href="monae.fail_lib.html#a:320">a</a></span> <span class="id"><a href="monae.fail_lib.html#Ht:322">Ht</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
<span class="id">rewrite</span> <span class="id">/tselect_cons_statement</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]/=;</a></span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>).<br/>
<span class="id">bind_ext;</span> <span class="id">case=&gt;</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">/=</span>.<br/>
<span class="id">do</span> <span class="id">2</span> <span class="id">f_equal;</span> <span class="id">apply</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#val_inj">val_inj</a></span> <span class="id">=&gt;</span> <span class="id">/=;</span> <span class="gallina-kwd">by</span> <span class="id">destruct</span> <span class="id">t</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="selectE" class="id">
  <a name="selectE" class="">selectE</a>
</span> <span id="s:323" class="id">
  <a name="s:323" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id"><a href="monae.fail_lib.html#s:323">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="gallina-kwd">fun</span> <span id="xy:324" class="id">
  <a name="xy:324" class="">xy</a>
</span> <span class="id">=&gt;</span> (<span class="id"><a href="monae.fail_lib.html#xy:324">xy</a></span>.<span class="id">1,</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#tval">tval</a></span> <span class="id"><a href="monae.fail_lib.html#xy:324">xy</a></span>.<span class="id">2</span>)) (<span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> <span class="id"><a href="monae.fail_lib.html#s:323">s</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">[|h'</span> <span class="id">t]</span> <span class="id">IH]</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#tselect1">tselect1</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span> <span class="id"><a href="monae.hierarchy.html#altmfail">altmfail</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">{1}/select</span> <span class="id">-/</span>(<span class="id"><a href="monae.fail_lib.html#select">select</a></span> (<span class="id">h'</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)) <span class="id">IH</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]alt_fmapDr</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#X:325">X</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_]fmapE</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf;</a></span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap</a></span> <span class="id"><a href="monae.hierarchy.html#fmap_bind">fmap_bind;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[x1</span> <span class="id">x2]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fcompE">fcompE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="decr_size_select" class="id">
  <a name="decr_size_select" class="">decr_size_select</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#bassert_size">bassert_size</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
<span class="id">case</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!selectE</span> <span class="id"><a href="monae.fail_lib.html#fmap_fail">fmap_fail</a></span> <span class="id">/bassert</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/bassert</span> <span class="id"><a href="monae.fail_lib.html#selectE">selectE</a></span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[x</span> <span class="id">y]</span> <span class="id">/=</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id"><a href="monae.hierarchy.html#assertPn">assertPn</a></span> <span class="id">=&gt;</span> <span class="id">//=;</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_tuple">size_tuple</a></span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leqnn">leqnn</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> <span class="id">{M}</span> <span class="id">{A}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> <span class="id">{M}</span> <span class="id">{A}</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="permutations" class="id">
  <a name="permutations" class="">permutations</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="permutations.M" class="id">
  <a name="permutations.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad</a></span>) (<span id="permutations.A" class="id">
  <a name="permutations.A" class="">A</a>
</span> <span class="id">:</span> <span class="gallina-kwd">Type</span>).<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> <span class="id">s</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#permutations.A">A</a></span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Obligation</span> <span class="vernacular">Tactic</span> <span class="id">:=</span> <span class="id">idtac</span>.<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="perms'" class="id">
  <a name="perms'" class="">perms'</a>
</span> <span id="s:328" class="id">
  <a name="s:328" class="">s</a>
</span><br/>
&nbsp;&nbsp;(<span id="f:330" class="id">
  <a name="f:330" class="">f</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="s':329" class="id">
  <a name="s':329" class="">s',</a>
</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s':329">s'</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:328">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#permutations.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#permutations.A">A</a></span>)) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#permutations.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#permutations.A">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:328">s</a></span> <span class="id">isn't</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:332" class="id">
  <a name="x:332" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y:333" class="id">
  <a name="y:333" class="">y</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#f:330">f</a></span> <span class="id"><a href="monae.fail_lib.html#x:332">x</a></span>.<span class="id">2</span> <span class="id">_;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#x:332">x</a></span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#y:333">y</a></span>))<span class="id">%Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Next Obligation.</span></div>
<div class="proofscript" id="proof52">
<span class="id">move=&gt;</span> <span class="id">s</span> <span class="id">H</span> <span class="id">h</span> <span class="id">t</span> <span class="id">hts</span> <span class="id">[y</span> <span class="id">ys];</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_tuple">size_tuple</a></span> <span class="id">-hts</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leqnn">leqnn</a></span>.<br/>
Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Next Obligation.</span></div>
<div class="proofscript" id="proof53">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="perms" class="id">
  <a name="perms" class="">perms</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#permutations.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#permutations.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#permutations.A">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#Fix">Fix</a></span> (<span class="id">@well_founded_size</span> <span class="id">_</span>) (<span class="gallina-kwd">fun</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#permutations.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="monae.fail_lib.html#perms'">perms'</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="tpermsE" class="id">
  <a name="tpermsE" class="">tpermsE</a>
</span> <span id="s:334" class="id">
  <a name="s:334" class="">s</a>
</span> <span class="id">:</span> (<span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id"><a href="monae.fail_lib.html#s:334">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:334">s</a></span> <span class="id">isn't</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:336" class="id">
  <a name="x:336" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#tselect">tselect</a></span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y:337" class="id">
  <a name="y:337" class="">y</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id"><a href="monae.fail_lib.html#x:336">x</a></span>.<span class="id">2;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#x:336">x</a></span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#y:337">y</a></span>))<span class="id">%Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
<span class="id">rewrite</span> <span class="id">{1}/perms</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#Fix_eq">Init.Wf.Fix_eq</a></span> <span class="id">//;</span> <span class="id">[by</span> <span class="id">case:</span> <span class="id">s|move=&gt;</span> <span class="id">s'</span> <span class="id">f</span> <span class="id">g</span> <span class="id">H]</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/perms';</span> <span class="id">destruct</span> <span class="id">s'</span> <span class="id">=&gt;</span> <span class="id">//;</span> <span class="id">bind_ext=&gt;</span> <span class="id">x;</span> <span class="id">rewrite</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="permsE" class="id">
  <a name="permsE" class="">permsE</a>
</span> <span id="s:338" class="id">
  <a name="s:338" class="">s</a>
</span> <span class="id">:</span> (<span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id"><a href="monae.fail_lib.html#s:338">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:338">s</a></span> <span class="id">isn't</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:340" class="id">
  <a name="x:340" class="">x</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)<span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y:341" class="id">
  <a name="y:341" class="">y</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id"><a href="monae.fail_lib.html#x:340">x</a></span>.<span class="id">2;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#x:340">x</a></span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#y:341">y</a></span>))<span class="id">%Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#tpermsE">tpermsE;</a></span> <span class="id">case:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#selectE">selectE</a></span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#permutations">permutations</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id">{M}</span> <span class="id">{A}</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="uperm" class="id">
  <a name="uperm" class="">uperm</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="uperm.A" class="id">
  <a name="uperm.A" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="uperm.M" class="id">
  <a name="uperm.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="uperm" class="id">
  <a name="uperm" class="">uperm</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#uperm.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#uperm.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#uperm.A">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#unfoldM">unfoldM</a></span> (<span class="id">@well_founded_size</span> <span class="id">_</span>) (<span class="id">@nilp</span> <span class="id">_</span>) <span class="id"><a href="monae.fail_lib.html#select">select</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="upermE" class="id">
  <a name="upermE" class="">upermE</a>
</span> <span id="s:344" class="id">
  <a name="s:344" class="">s</a>
</span> <span class="id">:</span> (<span class="id"><a href="monae.fail_lib.html#uperm">uperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:344">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:344">s</a></span> <span class="id">isn't</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="a:346" class="id">
  <a name="a:346" class="">a</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#select">select</a></span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>) <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">;</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="b:347" class="id">
  <a name="b:347" class="">b</a>
</span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.fail_lib.html#uperm">uperm</a></span> <span class="id"><a href="monae.fail_lib.html#a:346">a</a></span>.<span class="id">2;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#a:346">a</a></span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#b:347">b</a></span>))<span class="id">%Do</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
<span class="id">rewrite</span> <span class="id">/uperm</span> <span class="id"><a href="monae.fail_lib.html#unfoldME">unfoldME;</a></span> <span class="id">last</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#decr_size_select">decr_size_select</a></span>.<br/>
<span class="id">case:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t;</span> <span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#nilp">nilp</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">//</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[x1</span> <span class="id">x2]</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="perms_uperm" class="id">
  <a name="perms_uperm" class="">perms_uperm</a>
</span> <span id="s:348" class="id">
  <a name="s:348" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#perms">perms</a></span> <span class="id"><a href="monae.fail_lib.html#s:348">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#uperm">uperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:348">s</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
<span class="id">move</span> <span class="id">Hn</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>) <span class="id">=&gt;</span> <span class="id">n</span>.<br/>
<span class="id">elim:</span> <span class="id">n</span> <span class="id">s</span> <span class="id">Hn</span> <span class="id">=&gt;</span> <span class="id">[|n</span> <span class="id">IH</span> <span class="id">[//|h</span> <span class="id">t]</span> <span class="id">/=</span> <span class="id">[tn]]</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span> <span class="id">=&gt;</span> <span class="id">//;</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#permsE">permsE</a></span> <span class="id"><a href="monae.fail_lib.html#upermE">upermE</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#tpermsE">tpermsE</a></span> <span class="id"><a href="monae.fail_lib.html#upermE">upermE</a></span> <span class="id"><a href="monae.fail_lib.html#selectE">selectE</a></span> <span class="id"><a href="monae.hierarchy.html#bind_fmap">bind_fmap;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b]</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">IH</span> <span class="id">//</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_tuple">size_tuple</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#uperm">uperm</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#uperm">uperm</a></span> <span class="id">{A}</span> <span class="id">{M}</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="dassert" class="id">
  <a name="dassert" class="">dassert</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadFail.Exports.failMonad">failMonad}</a></span> <span class="id">{A</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0}</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="dassert" class="id">
  <a name="dassert" class="">dassert</a>
</span> (<span id="p:351" class="id">
  <a name="p:351" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.fail_lib.html#dassert.A">A</a></span>) <span id="a:352" class="id">
  <a name="a:352" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#dassert.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">{</a></span> <span id="a:353" class="id">
  <a name="a:353" class="">a</a>
</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">|</a></span> <span class="id"><a href="monae.fail_lib.html#p:351">p</a></span> <span class="id"><a href="monae.fail_lib.html#a:353">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">}</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Bool.Bool.html#bool_dec">Bool.bool_dec</a></span> (<span class="id"><a href="monae.fail_lib.html#p:351">p</a></span> <span class="id"><a href="monae.fail_lib.html#a:352">a</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span> <span class="id">is</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#left">left</a></span> <span class="id">pa</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">pa</span>) <span class="gallina-kwd">else</span> <span class="id"><a href="monae.hierarchy.html#fail">fail</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="bind_ext_dassert" class="id">
  <a name="bind_ext_dassert" class="">bind_ext_dassert</a>
</span> (<span id="p:354" class="id">
  <a name="p:354" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.fail_lib.html#dassert.A">A</a></span>) <span id="a:355" class="id">
  <a name="a:355" class="">a</a>
</span> (<span id="B:356" class="id">
  <a name="B:356" class="">B</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="m1:358" class="id">
  <a name="m1:358" class="">m1</a>
</span> <span id="m2:359" class="id">
  <a name="m2:359" class="">m2</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">{x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">:</a></span> <span class="id"><a href="monae.fail_lib.html#dassert.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">|</a></span> <span class="id"><a href="monae.fail_lib.html#p:354">p</a></span> <span class="id"><a href="monae.fail_lib.html#x:357">x}</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#dassert.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:356">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="x:360" class="id">
  <a name="x:360" class="">x</a>
</span> <span id="h:361" class="id">
  <a name="h:361" class="">h,</a>
</span> <span class="id"><a href="monae.fail_lib.html#p:354">p</a></span> <span class="id"><a href="monae.fail_lib.html#x:360">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m1:358">m1</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id"><a href="monae.fail_lib.html#x:360">x</a></span> <span class="id"><a href="monae.fail_lib.html#h:361">h</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#m2:359">m2</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id"><a href="monae.fail_lib.html#x:360">x</a></span> <span class="id"><a href="monae.fail_lib.html#h:361">h</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#dassert">dassert</a></span> <span class="id"><a href="monae.fail_lib.html#p:354">p</a></span> <span class="id"><a href="monae.fail_lib.html#a:355">a</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#m1:358">m1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#dassert">dassert</a></span> <span class="id"><a href="monae.fail_lib.html#p:354">p</a></span> <span class="id"><a href="monae.fail_lib.html#a:355">a</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#m2:359">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
<span class="id">move=&gt;</span> <span class="id">m1m2;</span> <span class="id">have</span> <span class="id">[pa|pa]</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">p</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[x</span> <span class="id">px];</span> <span class="id">exact:</span> <span class="id">m1m2</span>.<br/>
<span class="id">rewrite</span> <span class="id">/dassert;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Bool.Bool.html#bool_dec">Bool.bool_dec</a></span> <span class="id">=&gt;</span> <span class="id">[px|px];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">px</span> <span class="gallina-kwd">in</span> <span class="id">pa</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!bindfailf</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#dassert">dassert</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="splits" class="id">
  <a name="splits" class="">splits</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad}</a></span> <span class="id">{A</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0}</a></span>.<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> <span class="id">s</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#splits.A">A</a></span>.<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="splits" class="id">
  <a name="splits" class="">splits</a>
</span> <span id="s:364" class="id">
  <a name="s:364" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#splits.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#splits.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#splits.A">A</a></span>)<span class="id">%type</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:364">s</a></span> <span class="id">isn't</span> <span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">xs</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#splits:365">splits</a></span> <span class="id">xs</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="yz:367" class="id">
  <a name="yz:367" class="">yz</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#yz:367">yz</a></span>.<span class="id">1,</span> <span class="id"><a href="monae.fail_lib.html#yz:367">yz</a></span>.<span class="id">2</span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#yz:367">yz</a></span>.<span class="id">1,</span> <span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#yz:367">yz</a></span>.<span class="id">2</span>)).<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="splits_bseq" class="id">
  <a name="splits_bseq" class="">splits_bseq</a>
</span> <span id="s:368" class="id">
  <a name="s:368" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#splits.M">M</a></span> ((<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:368">s</a></span>).<span class="id">-bseq</span> <span class="id"><a href="monae.fail_lib.html#splits.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:368">s</a></span>).<span class="id">-bseq</span> <span class="id"><a href="monae.fail_lib.html#splits.A">A</a></span>)<span class="id">%type</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:368">s</a></span> <span class="id">isn't</span> <span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">xs</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#1d5f5393e4fd314889ecb840c945ca83">[bseq</a></span> <span class="id">of</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#1d5f5393e4fd314889ecb840c945ca83">[bseq</a></span> <span class="id">of</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]]</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="monae.fail_lib.html#splits_bseq:369">splits_bseq</a></span> <span class="id">xs</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span class="id">'</span>(<span id="ys:372" class="id">
  <a name="ys:372" class="">ys,</a>
</span> <span id="zs:371" class="id">
  <a name="zs:371" class="">zs</a>
</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#1d5f5393e4fd314889ecb840c945ca83">[bseq</a></span> <span class="id">of</span> <span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#ys:372">ys],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#widen_bseq">widen_bseq</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leqnSn">leqnSn</a></span> <span class="id">_</span>) <span class="id"><a href="monae.fail_lib.html#zs:371">zs</a></span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#widen_bseq">widen_bseq</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leqnSn">leqnSn</a></span> <span class="id">_</span>) <span class="id"><a href="monae.fail_lib.html#ys:372">ys,</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#1d5f5393e4fd314889ecb840c945ca83">[bseq</a></span> <span class="id">of</span> <span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#zs:371">zs]</a></span>)).<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<span class="vernacular">Lemma</span> <span id="splits_bseqE" class="id">
  <a name="splits_bseqE" class="">splits_bseqE</a>
</span> <span id="s:374" class="id">
  <a name="s:374" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#s:374">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="gallina-kwd">fun</span> <span class="id">'</span>(<span id="ys:376" class="id">
  <a name="ys:376" class="">ys,</a>
</span> <span id="zs:375" class="id">
  <a name="zs:375" class="">zs</a>
</span>) <span class="id">=&gt;</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#bseqval">bseqval</a></span> <span class="id"><a href="monae.fail_lib.html#ys:376">ys,</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#bseqval">bseqval</a></span> <span class="id"><a href="monae.fail_lib.html#zs:375">zs</a></span>)) (<span class="id"><a href="monae.fail_lib.html#splits_bseq">splits_bseq</a></span> <span class="id"><a href="monae.fail_lib.html#s:374">s</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#splits.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">/=</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">ih];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">{}ih</span> <span class="id">/=</span> <span class="id">!fmapE</span> <span class="id">2!bindA;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b]</span> <span class="id">/=</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id">2!bindretf</span>.<br/>
Qed.</div>
<span class="vernacular">Local</span> <span class="vernacular">Close</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#splits">splits</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="splits_examples" class="id">
  <a name="splits_examples" class="">splits_examples</a>
</span>.<br/>
<span class="vernacular">Variable</span> <span id="splits_examples.M" class="id">
  <a name="splits_examples.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad</a></span>.<br/>
<br/>
<span class="vernacular">Example</span> <span id="splits0" class="id">
  <a name="splits0" class="">splits0</a>
</span> <span class="id">:</span> <span class="id">@splits</span> <span class="id"><a href="monae.fail_lib.html#splits_examples.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Example</span> <span id="splits2" class="id">
  <a name="splits2" class="">splits2</a>
</span> <span class="id">:</span> <span class="id">@splits</span> <span class="id"><a href="monae.fail_lib.html#splits_examples.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">1;</span> <span class="id">2]</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">1;</span> <span class="id">2],</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">2],</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">1]</span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">1],</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">2]</span>) <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">1;</span> <span class="id">2]</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
<span class="id">rewrite</span> <span class="id">/splits</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id">!bindretf</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#altA">altA</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#splits_examples">splits_examples</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="splits_nondetMonad" class="id">
  <a name="splits_nondetMonad" class="">splits_nondetMonad</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad}</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="splits_guard_subseq" class="id">
  <a name="splits_guard_subseq" class="">splits_guard_subseq</a>
</span> (<span id="A:380" class="id">
  <a name="A:380" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) (<span id="s:381" class="id">
  <a name="s:381" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:380">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#s:381">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#s:381">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:382" class="id">
  <a name="x:382" class="">x</a>
</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#5a7d806905be2a0d04047156433535f1">[&amp;&amp;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#subseq">subseq</a></span> <span class="id"><a href="monae.fail_lib.html#x:382">x</a></span>.<span class="id">1</span> <span class="id"><a href="monae.fail_lib.html#s:381">s,</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#subseq">subseq</a></span> <span class="id"><a href="monae.fail_lib.html#x:382">x</a></span>.<span class="id">2</span> <span class="id"><a href="monae.fail_lib.html#s:381">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#5a7d806905be2a0d04047156433535f1">&amp;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_eq">perm_eq</a></span> (<span class="id"><a href="monae.fail_lib.html#x:382">x</a></span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#x:382">x</a></span>.<span class="id">2</span>) <span class="id"><a href="monae.fail_lib.html#s:381">s]</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#x:382">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#splits_nondetMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
<span class="id">have</span> <span class="id">[n</span> <span class="id">ns]</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ubnP">ubnP</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>)<span class="id">;</span> <span class="id">elim:</span> <span class="id">n</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">n</span> <span class="id">ih</span> <span class="id">s</span> <span class="id">ns</span>.<br/>
<span class="id">move:</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">=&gt;</span> <span class="id">[ns</span> <span class="id">|h</span> <span class="id">t]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_refl">perm_refl</a></span> <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.fail_lib.html#X:383">X</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">_]/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">=&gt;</span> <span class="id">ns</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]/=</a></span> <span class="id">[splits</span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t</span>)<span class="id">]/=</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">ih</span> <span class="id">//</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]bindA</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b]</span>.<br/>
<span class="id">rewrite</span> <span class="id">[subseq]lock</span> <span class="id">/=</span> <span class="id">-lock</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS]bindA</a></span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]bindA</a></span>.<br/>
<span class="id">apply:</span> <span class="id"><a href="monae.fail_lib.html#bind_ext_guard">bind_ext_guard</a></span> <span class="id">=&gt;</span> <span class="id">/and3P[ta</span> <span class="id">tb</span> <span class="id">abt];</span> <span class="id">rewrite</span> <span class="id">[subseq]lock</span> <span class="id">/=</span> <span class="id">-lock</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindretf</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id">!bindretf;</span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">[subseq</span> (<span class="id">_</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">_</span>) <span class="id">_]/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eqxx">eqxx</a></span> <span class="id">ta</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andTb">andTb</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_cons">perm_cons</a></span> <span class="id">abt</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">andbT</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#subseq_trans">subseq_trans</a></span> <span class="id">tb</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#subseq_cons">subseq_cons</a></span> <span class="id">_</span> <span class="id">_</span>)) <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#subseq_trans">subseq_trans</a></span> <span class="id">ta</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#subseq_cons">subseq_cons</a></span> <span class="id">_</span> <span class="id">_</span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andTb">andTb</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[subseq</span> (<span class="id">_</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">_</span>) <span class="id">_]/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eqxx">eqxx</a></span> <span class="id">tb</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andTb">andTb</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">-cat_rcons</span> <span class="id">-cats1</span> <span class="id">-catA</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_catCA">perm_catCA</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_cons">perm_cons</a></span> <span class="id">abt</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="dsplitsT" class="id">
  <a name="dsplitsT" class="">dsplitsT</a>
</span> (<span id="A:384" class="id">
  <a name="A:384" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span id="n:385" class="id">
  <a name="n:385" class="">n</a>
</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">{x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">:</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:384">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:384">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">|</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#x:386">x</a></span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#x:386">x</a></span>.<span class="id">2</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.fail_lib.html#n:385">n}</a></span>.<br/>
<span class="vernacular">Definition</span> <span id="dsplitsT1" class="id">
  <a name="dsplitsT1" class="">dsplitsT1</a>
</span> (<span id="A:387" class="id">
  <a name="A:387" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span id="n:388" class="id">
  <a name="n:388" class="">n</a>
</span> (<span id="a:389" class="id">
  <a name="a:389" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#dsplitsT">dsplitsT</a></span> <span class="id"><a href="monae.fail_lib.html#A:387">A</a></span> <span class="id"><a href="monae.fail_lib.html#n:388">n</a></span>) <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:387">A</a></span> <span class="id">:=</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrfun.html#sval">sval</a></span> <span class="id"><a href="monae.fail_lib.html#a:389">a</a></span>).<span class="id">1</span>.<br/>
<span class="vernacular">Definition</span> <span id="dsplitsT2" class="id">
  <a name="dsplitsT2" class="">dsplitsT2</a>
</span> (<span id="A:390" class="id">
  <a name="A:390" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span id="n:391" class="id">
  <a name="n:391" class="">n</a>
</span> (<span id="a:392" class="id">
  <a name="a:392" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#dsplitsT">dsplitsT</a></span> <span class="id"><a href="monae.fail_lib.html#A:390">A</a></span> <span class="id"><a href="monae.fail_lib.html#n:391">n</a></span>) <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:390">A</a></span> <span class="id">:=</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrfun.html#sval">sval</a></span> <span class="id"><a href="monae.fail_lib.html#a:392">a</a></span>).<span class="id">2</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="dsplits" class="id">
  <a name="dsplits" class="">dsplits</a>
</span> (<span id="A:393" class="id">
  <a name="A:393" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="s:394" class="id">
  <a name="s:394" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:393">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#splits_nondetMonad.M">M</a></span> (<span class="id"><a href="monae.fail_lib.html#dsplitsT">dsplitsT</a></span> <span class="id"><a href="monae.fail_lib.html#A:393">A</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:394">s</a></span>)) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#s:394">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#dassert">dassert</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#27dabc72ea2c2c768f2db80a79f42524">[pred</a></span> <span id="n:395" class="id">
  <a name="n:395" class="">n</a>
</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#27dabc72ea2c2c768f2db80a79f42524">|</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#n:395">n</a></span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#n:395">n</a></span>.<span class="id">2</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:394">s]</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#splits_nondetMonad">splits_nondetMonad</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="splits_prePlusMonad" class="id">
  <a name="splits_prePlusMonad" class="">splits_prePlusMonad</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPrePlus.Exports.prePlusMonad">prePlusMonad}</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="splits_guard" class="id">
  <a name="splits_guard" class="">splits_guard</a>
</span> (<span id="A:397" class="id">
  <a name="A:397" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="s:398" class="id">
  <a name="s:398" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:397">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#s:398">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#s:398">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="x:399" class="id">
  <a name="x:399" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#x:399">x</a></span>.<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#x:399">x</a></span>.<span class="id">2</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:398">s</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#x:399">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#splits_prePlusMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">ih];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addn0">addn0</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eqxx">eqxx</a></span> <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id">{1}ih</span> <span class="id">!bindA;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b]</span> <span class="id">/=</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id">!bindretf</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#alt_bindDr">alt_bindDr</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addSn">addSn</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addnS">addnS</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#eqSS">eqSS</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<span class="vernacular">Lemma</span> <span id="dsplitsE" class="id">
  <a name="dsplitsE" class="">dsplitsE</a>
</span> (<span id="A:400" class="id">
  <a name="A:400" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="s:401" class="id">
  <a name="s:401" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:400">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#s:401">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="gallina-kwd">fun</span> <span id="x:402" class="id">
  <a name="x:402" class="">x</a>
</span> <span class="id">=&gt;</span> (<span class="id"><a href="monae.fail_lib.html#dsplitsT1">dsplitsT1</a></span> <span class="id"><a href="monae.fail_lib.html#x:402">x,</a></span> <span class="id"><a href="monae.fail_lib.html#dsplitsT2">dsplitsT2</a></span> <span class="id"><a href="monae.fail_lib.html#x:402">x</a></span>)) (<span class="id"><a href="monae.fail_lib.html#dsplits">dsplits</a></span> <span class="id"><a href="monae.fail_lib.html#s:401">s</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#splits_prePlusMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id">/dsplits</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id">[LHS]splits_guard;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b]</span>.<br/>
<span class="id">rewrite</span> <span class="id">/dassert;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Bool.Bool.html#bool_dec">Bool.bool_dec</a></span> <span class="id">=&gt;</span> <span class="id">/=</span> <span class="id">[|/negP]</span> <span class="id">abs</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!bindretf</span> <span class="id">/=</span> <span class="id">abs</span> <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">abs</span>) <span class="id"><a href="monae.hierarchy.html#guardF">guardF</a></span> <span class="id">2!bindfailf</span>.<br/>
Qed.</div>
<span class="vernacular">Local</span> <span class="vernacular">Close</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#splits_prePlusMonad">splits_prePlusMonad</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="qperm" class="id">
  <a name="qperm" class="">qperm</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="qperm.M" class="id">
  <a name="qperm.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad</a></span>) (<span id="qperm.A" class="id">
  <a name="qperm.A" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="qperm.d" class="id">
  <a name="qperm.d" class="">d</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span id="qperm.T" class="id">
  <a name="qperm.T" class="">T</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.order.html#Order.Total.Exports.orderType">orderType</a></span> <span class="id"><a href="monae.fail_lib.html#d:405">d</a></span>).<br/>
<br/>
<span class="id">Equations?</span> <span id="qperm" class="id">
  <a name="qperm" class="">qperm</a>
</span> (<span id="s:407" class="id">
  <a name="s:407" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#qperm.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm.A">A</a></span>) <span class="gallina-kwd">by</span> <span class="id">wf</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Peano.html#lt">lt</a></span> <span class="id">:=</span><br/>
<span class="id">|</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span><br/>
<span class="id">|</span> <span class="id"><a href="monae.fail_lib.html#x:409">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#xs:410">xs</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#splits_bseq">splits_bseq</a></span> <span class="id">xs</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span class="id">'</span>(<span id="ys:412" class="id">
  <a name="ys:412" class="">ys,</a>
</span> <span id="zs:411" class="id">
  <a name="zs:411" class="">zs</a>
</span>) <span class="id">=&gt;</span> <span class="id"><a href="monae.monad_lib.html#liftM2">liftM2</a></span> (<span class="gallina-kwd">fun</span> <span id="a:414" class="id">
  <a name="a:414" class="">a</a>
</span> <span id="b:415" class="id">
  <a name="b:415" class="">b</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#a:414">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#b:415">b</a></span>) (<span class="id"><a href="monae.fail_lib.html#qperm:408">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#ys:412">ys</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#qperm.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm.A">A</a></span>)) (<span class="id"><a href="monae.fail_lib.html#qperm:408">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#zs:411">zs</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
<span class="id">apply</span> <span class="id">/ltP</span>.<br/>
<span class="id">exact:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_ltn_trans">leq_ltn_trans</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_bseq">size_bseq</a></span> <span class="id">ys</span>)).<br/>
<span class="id">apply</span> <span class="id">/ltP</span>.<br/>
<span class="id">exact:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_ltn_trans">leq_ltn_trans</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_bseq">size_bseq</a></span> <span class="id">zs</span>)).<br/>
Defined.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="qperm_nil" class="id">
  <a name="qperm_nil" class="">qperm_nil</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="qperm_cons" class="id">
  <a name="qperm_cons" class="">qperm_cons</a>
</span> <span id="x:416" class="id">
  <a name="x:416" class="">x</a>
</span> <span id="xs:417" class="id">
  <a name="xs:417" class="">xs</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> (<span class="id"><a href="monae.fail_lib.html#x:416">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#xs:417">xs</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#xs:417">xs</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span class="id">'</span>(<span id="ys:419" class="id">
  <a name="ys:419" class="">ys,</a>
</span> <span id="zs:418" class="id">
  <a name="zs:418" class="">zs</a>
</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.monad_lib.html#liftM2">liftM2</a></span> (<span class="gallina-kwd">fun</span> <span id="a:421" class="id">
  <a name="a:421" class="">a</a>
</span> <span id="b:422" class="id">
  <a name="b:422" class="">b</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#a:421">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#x:416">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#b:422">b</a></span>) (<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#ys:419">ys</a></span>) (<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#zs:418">zs</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qperm_equation_2">qperm_equation_2</a></span> <span class="id"><a href="monae.fail_lib.html#splits_bseqE">splits_bseqE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[?</span> <span class="id">?]</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="comment">(*&nbsp;rewrite&nbsp;{1}/qperm&nbsp;{1}(Fix_eq&nbsp;_&nbsp;_&nbsp;_&nbsp;qperm'_Fix)&nbsp;/=.<br/>
rewrite&nbsp;splitsE&nbsp;/=&nbsp;fmapE&nbsp;bindA;&nbsp;bind_ext&nbsp;=&gt;&nbsp;-[?&nbsp;?].<br/>
by&nbsp;rewrite&nbsp;bindretf.&nbsp;*)</span><br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="qpermE" class="id">
  <a name="qpermE" class="">qpermE</a>
</span> <span class="id">:=</span> (<span class="id"><a href="monae.fail_lib.html#qperm_nil">qperm_nil,</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_cons">qperm_cons</a></span>).<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id">{M}</span> <span class="id">{A}</span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="qperm_function" class="id">
  <a name="qperm_function" class="">qperm_function</a>
</span>.<br/>
<span class="vernacular">Section</span> <span id="qperm_function.qperm_function" class="id">
  <a name="qperm_function.qperm_function" class="">qperm_function</a>
</span>.<br/>
<span class="vernacular">Variables</span> (<span id="qperm_function.qperm_function.M" class="id">
  <a name="qperm_function.qperm_function.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad</a></span>) (<span id="qperm_function.qperm_function.A" class="id">
  <a name="qperm_function.qperm_function.A" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="qperm_function.qperm_function.d" class="id">
  <a name="qperm_function.qperm_function.d" class="">d</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span id="qperm_function.qperm_function.T" class="id">
  <a name="qperm_function.qperm_function.T" class="">T</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.order.html#Order.Total.Exports.orderType">orderType</a></span> <span class="id"><a href="monae.fail_lib.html#d:425">d</a></span>).<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Obligation</span> <span class="vernacular">Tactic</span> <span class="id">:=</span> <span class="id">idtac</span>.<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="qperm_function.qperm'" class="id">
  <a name="qperm_function.qperm'" class="">qperm'</a>
</span> (<span id="s:427" class="id">
  <a name="s:427" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.A">A</a></span>)<br/>
&nbsp;&nbsp;(<span id="f:429" class="id">
  <a name="f:429" class="">f</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="s':428" class="id">
  <a name="s':428" class="">s',</a>
</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s':428">s'</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:427">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.A">A</a></span>)) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.A">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#s:427">s</a></span> <span class="id">isn't</span> <span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">xs</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span> <span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#splits_bseq">splits_bseq</a></span> <span class="id">xs</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span class="id">'</span>(<span id="ys:432" class="id">
  <a name="ys:432" class="">ys,</a>
</span> <span id="zs:431" class="id">
  <a name="zs:431" class="">zs</a>
</span>) <span class="id">=&gt;</span> <span class="id"><a href="monae.monad_lib.html#liftM2">liftM2</a></span> (<span class="gallina-kwd">fun</span> <span id="a:434" class="id">
  <a name="a:434" class="">a</a>
</span> <span id="b:435" class="id">
  <a name="b:435" class="">b</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#a:434">a</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id">x</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#b:435">b</a></span>) (<span class="id"><a href="monae.fail_lib.html#f:429">f</a></span> <span class="id"><a href="monae.fail_lib.html#ys:432">ys</a></span> <span class="id">_</span>) (<span class="id"><a href="monae.fail_lib.html#f:429">f</a></span> <span class="id"><a href="monae.fail_lib.html#zs:431">zs</a></span> <span class="id">_</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Next Obligation.</span></div>
<div class="proofscript" id="proof68">
<span class="id">move=&gt;</span> <span class="id">[|h</span> <span class="id">t]</span> <span class="id">//</span> <span class="id">ht</span> <span class="id">x</span> <span class="id">xs</span> <span class="id">[xh</span> <span class="id">-&gt;]</span> <span class="id">[a</span> <span class="id">b]</span> <span class="id">ys</span> <span class="id">_</span> <span class="id">_</span> <span class="id">.</span><br/>
<span class="id">exact:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_ltn_trans">leq_ltn_trans</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_bseq">size_bseq</a></span> <span class="id">ys</span>)).<br/>
Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Next Obligation.</span></div>
<div class="proofscript" id="proof69">
<span class="id">move=&gt;</span> <span class="id">[|h</span> <span class="id">t]</span> <span class="id">//</span> <span class="id">ht</span> <span class="id">x</span> <span class="id">xs</span> <span class="id">[xh</span> <span class="id">-&gt;]</span> <span class="id">[a</span> <span class="id">b]</span> <span class="id">_</span> <span class="id">zs</span> <span class="id">_</span>.<br/>
<span class="id">exact:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_ltn_trans">leq_ltn_trans</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_bseq">size_bseq</a></span> <span class="id">zs</span>)).<br/>
Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Next Obligation.</span></div>
<div class="proofscript" id="proof70">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="qperm_function.qperm" class="id">
  <a name="qperm_function.qperm" class="">qperm</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.A">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Wf.html#Fix">Fix</a></span> (<span class="id">@well_founded_size</span> <span class="id">_</span>) (<span class="gallina-kwd">fun</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm'">qperm'</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="qperm_function.qperm'_Fix" class="id">
  <a name="qperm_function.qperm'_Fix" class="">qperm'_Fix</a>
</span> (<span id="s:436" class="id">
  <a name="s:436" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.A">A</a></span>)<br/>
&nbsp;&nbsp;(<span id="f:438" class="id">
  <a name="f:438" class="">f</a>
</span> <span id="g:439" class="id">
  <a name="g:439" class="">g</a>
</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="y:437" class="id">
  <a name="y:437" class="">y,</a>
</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#y:437">y</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:436">s</a></span>)<span class="id">%N</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function.A">A</a></span>)) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="y:440" class="id">
  <a name="y:440" class="">y</a>
</span> (<span id="p:441" class="id">
  <a name="p:441" class="">p</a>
</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#y:440">y</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:436">s</a></span>)<span class="id">%N</span>)<span class="id">,</span> <span class="id"><a href="monae.fail_lib.html#f:438">f</a></span> <span class="id"><a href="monae.fail_lib.html#y:440">y</a></span> <span class="id"><a href="monae.fail_lib.html#p:441">p</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#g:439">g</a></span> <span class="id"><a href="monae.fail_lib.html#y:440">y</a></span> <span class="id"><a href="monae.fail_lib.html#p:441">p</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm'">qperm'</a></span> <span class="id"><a href="monae.fail_lib.html#f:438">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm'">qperm'</a></span> <span class="id"><a href="monae.fail_lib.html#g:439">g</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
<span class="id">move=&gt;</span> <span class="id">H;</span> <span class="id">rewrite</span> <span class="id">/qperm';</span> <span class="id">case:</span> <span class="id">s</span> <span class="id">f</span> <span class="id">g</span> <span class="id">H</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t</span> <span class="id">f</span> <span class="id">g</span> <span class="id">H</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b]</span> <span class="id">/=</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id">f</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">g</span>) <span class="id">//;</span> <span class="id">apply</span> <span class="id"><a href="monae.monae_lib.html#funext_dep">funext_dep</a></span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span> <span class="id">=&gt;</span> <span class="id">?;</span> <span class="id">exact:</span> <span class="id">H</span>.<br/>
Qed.</div>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#qperm_function.qperm_function">qperm_function</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#qperm_function">qperm_function</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="qperm_examples" class="id">
  <a name="qperm_examples" class="">qperm_examples</a>
</span>.<br/>
<span class="vernacular">Variable</span> <span id="qperm_examples.M" class="id">
  <a name="qperm_examples.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAltCI.Exports.altCIMonad">altCIMonad</a></span>.<br/>
<br/>
<span class="vernacular">Example</span> <span id="perm1" class="id">
  <a name="perm1" class="">perm1</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">1]%N</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">1]</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_examples.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qperm_cons">qperm_cons</a></span> <span class="id">/=</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qperm_nil">qperm_nil</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.monad_lib.html#liftM2_ret">liftM2_ret</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Example</span> <span id="perm2" class="id">
  <a name="perm2" class="">perm2</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">2;</span> <span class="id">1]</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">1;</span> <span class="id">2]</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">2;</span> <span class="id">1]</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_examples.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qpermE">qpermE</a></span> <span class="id">!bindA</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/liftM2</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id">!qpermE</span> <span class="id">!bindA</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">!bindretf</span> <span class="id">/=</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Example</span> <span id="perm3" class="id">
  <a name="perm3" class="">perm3</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">3;</span> <span class="id">2;</span> <span class="id">1]</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">1;</span> <span class="id">2;</span> <span class="id">3]</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">1;</span> <span class="id">3;</span> <span class="id">2]</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">2;</span> <span class="id">1;</span> <span class="id">3]</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">2;</span> <span class="id">3;</span> <span class="id">1]</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">3;</span> <span class="id">1;</span> <span class="id">2]</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#9e9281397dab83046645f1b62dbb2487">[::</a></span> <span class="id">3;</span> <span class="id">2;</span> <span class="id">1]</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_examples.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qpermE">qpermE</a></span> <span class="id">!bindA</span>.<br/>
<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/liftM2</span>.<br/>
<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id">!qpermE</span> <span class="id">/=</span> <span class="id">!bindA</span> <span class="id">!bindretf</span> <span class="id">!alt_bindDl</span> <span class="id">!bindretf</span> <span class="id">/=</span> <span class="id">!/liftM2</span>.<br/>
<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id">!qpermE</span> <span class="id">!bindA</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">!bindretf</span> <span class="id">/=</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-altA</span> <span class="id"><a href="monae.hierarchy.html#altACA">altACA</a></span> <span class="id">!altA</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#qperm_examples">qperm_examples</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="qperm_preserves_nondetMonad" class="id">
  <a name="qperm_preserves_nondetMonad" class="">qperm_preserves_nondetMonad</a>
</span>.<br/>
<span class="vernacular">Variable</span> <span id="qperm_preserves_nondetMonad.M" class="id">
  <a name="qperm_preserves_nondetMonad.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadNondet.Exports.nondetMonad">nondetMonad</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="qperm_preserves_elements" class="id">
  <a name="qperm_preserves_elements" class="">qperm_preserves_elements</a>
</span> (<span id="A:444" class="id">
  <a name="A:444" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) (<span id="s:445" class="id">
  <a name="s:445" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:444">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:445">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:445">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:446" class="id">
  <a name="x:446" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_eq">perm_eq</a></span> <span class="id"><a href="monae.fail_lib.html#x:446">x</a></span> <span class="id"><a href="monae.fail_lib.html#s:445">s</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#x:446">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_preserves_nondetMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
<span class="id">have</span> <span class="id">[n</span> <span class="id">ns]</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ubnP">ubnP</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>)<span class="id">;</span> <span class="id">elim:</span> <span class="id">n</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">n</span> <span class="id">ih</span> <span class="id">s</span> <span class="id">ns</span>.<br/>
<span class="id">move:</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">=&gt;</span> <span class="id">[ns</span> <span class="id">|h</span> <span class="id">t]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qperm_nil">qperm_nil</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_refl">perm_refl</a></span> <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">=&gt;</span> <span class="id">ns;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qperm_cons">qperm_cons</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id"><a href="monae.fail_lib.html#splits_guard_subseq">splits_guard_subseq</a></span> <span class="id">!bindA</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b];</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">!bindA;</span> <span class="id">apply:</span> <span class="id"><a href="monae.fail_lib.html#bind_ext_guard">bind_ext_guard</a></span> <span class="id">=&gt;</span> <span class="id">/and3P[_</span> <span class="id">_</span> <span class="id">abt]</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindretf</span> <span class="id">/liftM2</span> <span class="id">/=</span> <span class="id">!bindA</span> <span class="id">ih;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_trans">leq_trans</a></span> <span class="id">_</span> <span class="id">ns</span>) <span class="id">//</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">-</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_size">perm_size</a></span> <span class="id">abt</span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_cat">size_cat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_addr">leq_addr</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindA;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">a';</span> <span class="id">rewrite</span> <span class="id">!bindA;</span> <span class="id">apply:</span> <span class="id"><a href="monae.fail_lib.html#bind_ext_guard">bind_ext_guard</a></span> <span class="id">=&gt;</span> <span class="id">aa'</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindretf</span> <span class="id">!bindA</span> <span class="id">ih;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_trans">leq_trans</a></span> <span class="id">_</span> <span class="id">ns</span>) <span class="id">//</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">-</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_size">perm_size</a></span> <span class="id">abt</span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_cat">size_cat</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_addl">leq_addl</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindA;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">b';</span> <span class="id">rewrite</span> <span class="id">!bindA;</span> <span class="id">apply:</span> <span class="id"><a href="monae.fail_lib.html#bind_ext_guard">bind_ext_guard</a></span> <span class="id">=&gt;</span> <span class="id">bb'</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindretf</span> <span class="id">-[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#X:447">X</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id">_]cat_rcons</span> <span class="id">-cats1</span> <span class="id">-catA</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_catCA">perm_catCA</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_cons">perm_cons</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_trans">perm_trans</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_cat">perm_cat</a></span> <span class="id">aa'</span> <span class="id">bb'</span>) <span class="id">abt</span>) <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#qperm_preserves_nondetMonad">qperm_preserves_nondetMonad</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="qperm_preserves_prePlusMonad" class="id">
  <a name="qperm_preserves_prePlusMonad" class="">qperm_preserves_prePlusMonad</a>
</span>.<br/>
<span class="vernacular">Variable</span> <span id="qperm_preserves_prePlusMonad.M" class="id">
  <a name="qperm_preserves_prePlusMonad.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPrePlus.Exports.prePlusMonad">prePlusMonad</a></span>.<br/>
<br/>
<span class="vernacular">Let</span> <span id="qperm_preserves_prePlusMonad.qperm_preserves_size" class="id">
  <a name="qperm_preserves_prePlusMonad.qperm_preserves_size" class="">qperm_preserves_size</a>
</span> <span id="A:449" class="id">
  <a name="A:449" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.monad_lib.html#preserves">preserves</a></span> (<span class="id">@qperm</span> <span class="id"><a href="monae.fail_lib.html#qperm_preserves_prePlusMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:449">A</a></span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
<span class="id">move=&gt;</span> <span class="id">s;</span> <span class="id">have</span> <span class="id">[n</span> <span class="id">ns]</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ubnP">ubnP</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>)<span class="id">;</span> <span class="id">elim:</span> <span class="id">n</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">n</span> <span class="id">ih</span> <span class="id">s</span> <span class="id">ns</span>.<br/>
<span class="id">move:</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">=&gt;</span> <span class="id">[ns|p</span> <span class="id">s];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!qperm_nil</span> <span class="id">!bindretf</span>.<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">=&gt;</span> <span class="id">ns;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qpermE">qpermE</a></span> <span class="id">!bindA</span> <span class="id">!dsplitsE</span> <span class="id">!fmapE</span> <span class="id">!bindA</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b]</span> <span class="id">/=;</span> <span class="id">apply:</span> <span class="id"><a href="monae.fail_lib.html#bind_ext_dassert">bind_ext_dassert</a></span> <span class="id">=&gt;</span> <span class="id">-[{}a</span> <span class="id">{}b</span> <span class="id">/=</span> <span class="id">abs</span> <span class="id">_]</span>.<br/>
<span class="id">rewrite</span> <span class="id">!bindretf</span> (<span class="id"><a href="monae.monad_lib.html#bind_liftM2_size">bind_liftM2_size</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">1%N</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">x</span> <span class="id">y;</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size_cat">size_cat</a></span> <span class="id">/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addn1">addn1</a></span> <span class="id">-addnS</span>.<br/>
<span class="id">rewrite</span> <span class="id">{1}/liftM2</span> <span class="id">ih;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/dsplitsT1</span> <span class="id">/=</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_trans">leq_trans</a></span> <span class="id">_</span> <span class="id">ns</span>)<span class="id">//</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">-</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eqP">eqP</a></span> <span class="id">abs</span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_addr">leq_addr</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">/liftM2</span> <span class="id">!bindA;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">xa;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">ih;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/dsplitsT2</span> <span class="id">/=</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_trans">leq_trans</a></span> <span class="id">_</span> <span class="id">ns</span>)<span class="id">//</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">-</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eqP">eqP</a></span> <span class="id">abs</span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_addl">leq_addl</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">!bindA;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">xb;</span> <span class="id">rewrite</span> <span class="id">!bindretf</span> <span class="id">/=</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eqP">eqP</a></span> <span class="id">abs</span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#addn1">addn1</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="qperm_preserves_size2" class="id">
  <a name="qperm_preserves_size2" class="">qperm_preserves_size2</a>
</span> <span id="A:450" class="id">
  <a name="A:450" class="">A</a>
</span> (<span id="x:451" class="id">
  <a name="x:451" class="">x</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:450">A</a></span>) <span id="B:452" class="id">
  <a name="B:452" class="">B</a>
</span> (<span id="f:453" class="id">
  <a name="f:453" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:450">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_preserves_prePlusMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:452">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#x:451">x</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#f:453">f^~</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#x:451">x</a></span>)) <span class="id">=</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#x:451">x</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x':454" class="id">
  <a name="x':454" class="">x'</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#f:453">f</a></span> <span class="id"><a href="monae.fail_lib.html#x':454">x'</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#x':454">x'</a></span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_preserves_prePlusMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
<span class="id">transitivity</span> (<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id">x</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="y:457" class="id"><span id="y:455" class="id">
  <a name="y:457" class="">y</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#y:455">y,</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#y:455">y</a></span>)) <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x':458" class="id"><span id="x':456" class="id">
  <a name="x':458" class="">x'</a>
</span></span> <span class="id">=&gt;</span> <span class="id">f</span> <span class="id"><a href="monae.fail_lib.html#x':456">x'</a></span>.<span class="id">1</span> <span class="id"><a href="monae.fail_lib.html#x':456">x'</a></span>.<span class="id">2</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qperm_preserves_prePlusMonad.qperm_preserves_size">qperm_preserves_size</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">s;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="bind_qperm_guard" class="id">
  <a name="bind_qperm_guard" class="">bind_qperm_guard</a>
</span> <span id="A:459" class="id">
  <a name="A:459" class="">A</a>
</span> (<span id="s:460" class="id">
  <a name="s:460" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:459">A</a></span>) <span id="B:461" class="id">
  <a name="B:461" class="">B</a>
</span> (<span id="f:462" class="id">
  <a name="f:462" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:459">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_preserves_prePlusMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:461">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:460">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#f:462">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:460">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:463" class="id">
  <a name="x:463" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#s:460">s</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id"><a href="monae.fail_lib.html#x:463">x</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#f:462">f</a></span> <span class="id"><a href="monae.fail_lib.html#x:463">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
<span class="id">rewrite</span> <span class="id">-</span>(<span class="id"><a href="monae.fail_lib.html#qperm_preserves_size2">qperm_preserves_size2</a></span> <span class="id">s</span> (<span class="gallina-kwd">fun</span> <span id="a:468" class="id"><span id="a:466" class="id"><span id="a:464" class="id">
  <a name="a:468" class="">a</a>
</span></span></span> <span id="b:469" class="id"><span id="b:467" class="id"><span id="b:465" class="id">
  <a name="b:469" class="">b</a>
</span></span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id"><a href="monae.fail_lib.html#b:465">b</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id">f</span> <span class="id"><a href="monae.fail_lib.html#a:464">a</a></span>)).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eqxx">eqxx</a></span> <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#qperm_preserves_prePlusMonad">qperm_preserves_prePlusMonad</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="fastproduct" class="id">
  <a name="fastproduct" class="">fastproduct</a>
</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="product" class="id">
  <a name="product" class="">product</a>
</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#muln">muln</a></span> <span class="id">1</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="product0" class="id">
  <a name="product0" class="">product0</a>
</span> <span id="s:470" class="id">
  <a name="s:470" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7">\in</a></span> <span class="id"><a href="monae.fail_lib.html#s:470">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#product">product</a></span> <span class="id"><a href="monae.fail_lib.html#s:470">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">//=</span> <span class="id">h</span> <span class="id">t</span> <span class="id">ih;</span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.finset.html#inE">inE</a></span> <span class="id">=&gt;</span> <span class="id">/orP[/eqP</span> <span class="id">&lt;-|/ih</span> <span class="id">-&gt;];</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">?muln0</span> <span class="id">?mul0n</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="fastproduct.work" class="id">
  <a name="fastproduct.work" class="">work</a>
</span>.<br/>
<span class="vernacular">Variable</span> <span id="fastproduct.work.M" class="id">
  <a name="fastproduct.work.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadFail.Exports.failMonad">failMonad</a></span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">mprog</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="work" class="id">
  <a name="work" class="">work</a>
</span> <span id="s:472" class="id">
  <a name="s:472" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#fastproduct.work.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7">\in</a></span> <span class="id"><a href="monae.fail_lib.html#s:472">s</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#fail">fail</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#product">product</a></span> <span class="id"><a href="monae.fail_lib.html#s:472">s</a></span>).<br/>
<br/>
<span class="vernacular">Let</span> <span id="fastproduct.work.Work" class="id">
  <a name="fastproduct.work.Work" class="">Work</a>
</span> <span id="s:473" class="id">
  <a name="s:473" class="">s</a>
</span> <span class="id">:=</span> <span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7">\in</a></span> <span class="id"><a href="monae.fail_lib.html#s:473">s</a></span> <span class="gallina-kwd">then</span> <span class="id">@fail</span> <span class="id"><a href="monae.fail_lib.html#fastproduct.work.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#product">product</a></span> <span class="id"><a href="monae.fail_lib.html#s:473">s</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="workE" class="id">
  <a name="workE" class="">workE</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="next:476" class="id">
  <a name="next:476" class="">next</a>
</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="n:474" class="id">
  <a name="n:474" class="">n</a>
</span> (<span id="mx:475" class="id">
  <a name="mx:475" class="">mx</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#fastproduct.work.M">M</a></span> <span class="id">_</span>) <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#n:474">n</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#df45e8c2e8370fd4f0f7c4fdaf208180">==</a></span> <span class="id">0</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.hierarchy.html#fail">fail</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="monae.hierarchy.html#::mprog:'fmap'_x">fmap</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#muln">muln</a></span> <span class="id"><a href="monae.fail_lib.html#n:474">n</a></span>) <span class="id"><a href="monae.fail_lib.html#mx:475">mx</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#work">work</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#foldr">foldr</a></span> <span class="id"><a href="monae.fail_lib.html#next:476">next</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">1</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
<span class="id">apply</span> <span class="id"><a href="monae.monae_lib.html#foldr_universal">foldr_universal</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">h</span> <span class="id">t;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=&gt;</span> <span class="id">[/eqP</span> <span class="id">-&gt;</span> <span class="id">//|</span> <span class="id">h0]</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/work</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.finset.html#inE">inE</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#eq_sym">eq_sym</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">h0</span>) <span class="id">[_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185">||</a></span> <span class="id">_]/=</span> <span class="id"><a href="monae.hierarchy.html#fmap_if">fmap_if</a></span> <span class="id"><a href="monae.fail_lib.html#fmap_fail">fmap_fail</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#fastproduct.work">work</a></span>.<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#work">work</a></span> <span class="id">{M}</span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="fastproduct.M" class="id">
  <a name="fastproduct.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadExcept.Exports.exceptMonad">exceptMonad</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="fastprod" class="id">
  <a name="fastprod" class="">fastprod</a>
</span> <span id="s:478" class="id">
  <a name="s:478" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#fastproduct.M">M</a></span> <span class="id">_</span> <span class="id">:=</span> <span class="id"><a href="monae.hierarchy.html#catch">catch</a></span> (<span class="id"><a href="monae.fail_lib.html#work">work</a></span> <span class="id"><a href="monae.fail_lib.html#s:478">s</a></span>) (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span>).<br/>
<br/>
<span class="vernacular">Let</span> <span id="fastproduct.Fastprod" class="id">
  <a name="fastproduct.Fastprod" class="">Fastprod</a>
</span> (<span id="s:479" class="id">
  <a name="s:479" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>) <span class="id">:=</span> <span class="id">@catch</span> <span class="id"><a href="monae.fail_lib.html#fastproduct.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> (<span class="id"><a href="monae.fail_lib.html#work">work</a></span> <span class="id"><a href="monae.fail_lib.html#s:479">s</a></span>) (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="fastprodE" class="id">
  <a name="fastprodE" class="">fastprodE</a>
</span> <span id="s:480" class="id">
  <a name="s:480" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#fastprod">fastprod</a></span> <span class="id"><a href="monae.fail_lib.html#s:480">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#product">product</a></span> <span class="id"><a href="monae.fail_lib.html#s:480">s</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
<span class="id">rewrite</span> <span class="id">/fastprod</span> <span class="id">/work</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#fun_if">fun_if</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#if_arg">if_arg</a></span> <span class="id"><a href="monae.hierarchy.html#catchfailm">catchfailm</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#catchret">catchret;</a></span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">/product0</span> <span class="id">&lt;-</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#fastproduct">fastproduct</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="addM" class="id">
  <a name="addM" class="">addM</a>
</span> (<span id="M:481" class="id">
  <a name="M:481" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#Monad.Exports.monad">monad</a></span>) (<span id="a:482" class="id">
  <a name="a:482" class="">a</a>
</span> <span id="b:483" class="id">
  <a name="b:483" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:481">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:481">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#a:482">a</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:484" class="id">
  <a name="x:484" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#b:483">b</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="y:485" class="id">
  <a name="y:485" class="">y</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#x:484">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="monae.fail_lib.html#y:485">y</a></span>))).<br/>
<span class="vernacular">Notation</span> <span id="7aa8cb8e47c797318e09c69d9adc22d2" class="id">
  <a name="7aa8cb8e47c797318e09c69d9adc22d2" class="">&quot;a +m b&quot; := (addM a b) (at level 50, format &quot;a  +m  b&quot;</a>
</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="mulM" class="id">
  <a name="mulM" class="">mulM</a>
</span> (<span id="M:486" class="id">
  <a name="M:486" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#Monad.Exports.monad">monad</a></span>) (<span id="a:487" class="id">
  <a name="a:487" class="">a</a>
</span> <span id="b:488" class="id">
  <a name="b:488" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:486">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:486">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#a:487">a</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:489" class="id">
  <a name="x:489" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#b:488">b</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="y:490" class="id">
  <a name="y:490" class="">y</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#x:489">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ea2ff3d561159081cea6fb2e8113cc54">*</a></span> <span class="id"><a href="monae.fail_lib.html#y:490">y</a></span>))).<br/>
<span class="vernacular">Notation</span> <span id="bcd06a636910308fc155f844c4b9fc4d" class="id">
  <a name="bcd06a636910308fc155f844c4b9fc4d" class="">&quot;a *m b&quot; := (mulM a b) (at level 50, format &quot;a  *m  b&quot;</a>
</span>).<br/>
<br/>
<br/>
<span class="vernacular">Section</span> <span id="continuation_example" class="id">
  <a name="continuation_example" class="">continuation_example</a>
</span>.<br/>
<span class="vernacular">Variable</span> <span id="continuation_example.M" class="id">
  <a name="continuation_example.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadContinuation.Exports.contMonad">contMonad</a></span>.<br/>
<br/>
<span class="vernacular">Let</span> <span id="continuation_example.wadler94_sect31" class="id">
  <a name="continuation_example.wadler94_sect31" class="">wadler94_sect31</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">1</span> <span class="id"><a href="monae.fail_lib.html#7aa8cb8e47c797318e09c69d9adc22d2">+m</a></span> <span class="id"><a href="monae.hierarchy.html#callcc">callcc</a></span> (<span class="gallina-kwd">fun</span> <span id="f:492" class="id">
  <a name="f:492" class="">f</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">10</span> <span class="id"><a href="monae.fail_lib.html#7aa8cb8e47c797318e09c69d9adc22d2">+m</a></span> <span class="id"><a href="monae.fail_lib.html#f:492">f</a></span> <span class="id">100</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id">100</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#continuation_example.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
<span class="id">rewrite</span> <span class="id">{1}/addM</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.hierarchy.html#callcc">callcc</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">100</span>) <span class="id">?bindretf</span> <span class="id">//</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#callcc">callcc</a></span> (<span class="gallina-kwd">fun</span> <span class="id">_</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#continuation_example.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">100</span>))<span class="id">;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#callcc1">callcc1</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#callcc">callcc</a></span> (<span class="gallina-kwd">fun</span> <span id="f:495" class="id"><span id="f:493" class="id">
  <a name="f:495" class="">f</a>
</span></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#continuation_example.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">10</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="a:496" class="id"><span id="a:494" class="id">
  <a name="a:496" class="">a</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#f:493">f</a></span> <span class="id">100</span>)))<span class="id">;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#callcc2">callcc2</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#callcc3">callcc3</a></span> <span class="id">//;</span> <span class="id">congr</span> <span class="id"><a href="monae.hierarchy.html#callcc">callcc</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span> <span class="id">=&gt;</span> <span class="id">g;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#continuation_example">continuation_example</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="shiftreset_examples" class="id">
  <a name="shiftreset_examples" class="">shiftreset_examples</a>
</span>.<br/>
<span class="vernacular">Variable</span> (<span id="shiftreset_examples.M" class="id">
  <a name="shiftreset_examples.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadShiftReset.Exports.shiftresetMonad">shiftresetMonad</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>).<br/>
<br/>
<span class="vernacular">Let</span> <span id="shiftreset_examples.wadler94_sect32_1" class="id">
  <a name="shiftreset_examples.wadler94_sect32_1" class="">wadler94_sect32_1</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">1</span> <span class="id"><a href="monae.fail_lib.html#7aa8cb8e47c797318e09c69d9adc22d2">+m</a></span> (<span class="id"><a href="monae.hierarchy.html#reset">reset</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">10</span> <span class="id"><a href="monae.fail_lib.html#7aa8cb8e47c797318e09c69d9adc22d2">+m</a></span> (<span class="id"><a href="monae.hierarchy.html#shift">shift</a></span> (<span class="gallina-kwd">fun</span> <span id="f:498" class="id">
  <a name="f:498" class="">f</a>
</span> <span class="id">:</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#shiftreset_examples.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#f:498">f</a></span> <span class="id">100</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#f:498">f</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#shiftreset_examples.M">M</a></span> <span class="id">_</span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#shiftreset_examples.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> (<span class="id">10</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> (<span class="id">10</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id">100</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof83')">Proof.</span></div>
<div class="proofscript" id="proof83">
<span class="id">rewrite</span> <span class="id">/addM</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">transitivity</span> ((<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">10</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> (<span class="id">10</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id">100</span>))) <span class="id">&gt;&gt;=</span> (<span class="gallina-kwd">fun</span> <span id="y:500" class="id"><span id="y:499" class="id">
  <a name="y:500" class="">y</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="monae.fail_lib.html#y:499">y</a></span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#shiftreset_examples.M">M</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">congr</span> (<span class="id"><a href="monae.hierarchy.html#bind">bind</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#shiftreset3">shiftreset3</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="x:505" class="id"><span id="x:503" class="id"><span id="x:501" class="id">
  <a name="x:505" class="">x</a>
</span></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">10;</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">do</a></span> <span id="y:506" class="id"><span id="y:504" class="id"><span id="y:502" class="id">
  <a name="y:506" class="">y</a>
</span></span></span> <span class="id"><a href="monae.hierarchy.html#9ea10614b4f1828e308ae6355a0a3b02">&lt;-</a></span> <span class="id"><a href="monae.hierarchy.html#shift">shift</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#5cbd6ae91bf17c0262dd6b8ac77aca7b">@^~</a></span> <span class="id">100</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#shiftreset_examples.M">M</a></span> <span class="id">_;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">10</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> (<span class="id">10</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="monae.fail_lib.html#y:502">y</a></span>)))<span class="id">%Do;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#shiftreset4">shiftreset4</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Let</span> <span id="shiftreset_examples.wadler94_sect32_2" class="id">
  <a name="shiftreset_examples.wadler94_sect32_2" class="">wadler94_sect32_2</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">1</span> <span class="id"><a href="monae.fail_lib.html#7aa8cb8e47c797318e09c69d9adc22d2">+m</a></span> (<span class="id"><a href="monae.hierarchy.html#reset">reset</a></span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">10</span> <span class="id"><a href="monae.fail_lib.html#7aa8cb8e47c797318e09c69d9adc22d2">+m</a></span> (<span class="id"><a href="monae.hierarchy.html#shift">shift</a></span> (<span class="gallina-kwd">fun</span> <span id="f:507" class="id">
  <a name="f:507" class="">f</a>
</span> <span class="id">:</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#shiftreset_examples.M">M</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">100</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#shiftreset_examples.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#shiftreset_examples.M">M</a></span> <span class="id">_</span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#shiftreset_examples.M">M</a></span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id">100</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof84')">Proof.</span></div>
<div class="proofscript" id="proof84">
<span class="id">rewrite</span> <span class="id">/addM</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id">100</span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="y:509" class="id"><span id="y:508" class="id">
  <a name="y:509" class="">y</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id">1</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="monae.fail_lib.html#y:508">y</a></span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#shiftreset_examples.M">M</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">congr</span> (<span class="id"><a href="monae.hierarchy.html#bind">bind</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="id">rewrite</span> (<span class="id"><a href="monae.hierarchy.html#shiftreset2">shiftreset2</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#shiftreset_examples">shiftreset_examples</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="refin" class="id">
  <a name="refin" class="">refin</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad}</a></span> <span id="A:511" class="id">
  <a name="A:511" class="">A</a>
</span> (<span id="m1:512" class="id">
  <a name="m1:512" class="">m1</a>
</span> <span id="m2:513" class="id">
  <a name="m2:513" class="">m2</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:510">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:511">A</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span> <span class="id"><a href="monae.fail_lib.html#m1:512">m1</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#m2:513">m2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#m2:513">m2</a></span>.<br/>
<span class="vernacular">Notation</span> <span id="6dd59ac36f434063a5e5ef81e754b682" class="id">
  <a name="6dd59ac36f434063a5e5ef81e754b682" class="">&quot;m1 `&lt;=` m2&quot;</a>
</span> <span class="id">:=</span> (<span class="id"><a href="monae.fail_lib.html#refin">refin</a></span> <span class="id">m1</span> <span class="id">m2</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_bindr" class="id">
  <a name="refin_bindr" class="">refin_bindr</a>
</span> (<span id="M:514" class="id">
  <a name="M:514" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad</a></span>) <span id="A:515" class="id">
  <a name="A:515" class="">A</a>
</span> <span id="B:516" class="id">
  <a name="B:516" class="">B</a>
</span> (<span id="m1:517" class="id">
  <a name="m1:517" class="">m1</a>
</span> <span id="m2:518" class="id">
  <a name="m2:518" class="">m2</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:514">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:515">A</a></span>) (<span id="f:519" class="id">
  <a name="f:519" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:515">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#M:514">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:516">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.fail_lib.html#m1:517">m1</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#m2:518">m2</a></span>) <span class="id">-&gt;</span> (<span class="id"><a href="monae.fail_lib.html#m1:517">m1</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#f:519">f</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#m2:518">m2</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#f:519">f</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</span></div>
<div class="proofscript" id="proof85">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">m12;</span> <span class="id">rewrite</span> <span class="id">/refin</span> <span class="id">-alt_bindDl</span> <span class="id">m12</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_if" class="id">
  <a name="refin_if" class="">refin_if</a>
</span> (<span id="M:520" class="id">
  <a name="M:520" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad</a></span>) <span id="A:521" class="id">
  <a name="A:521" class="">A</a>
</span> (<span id="m1:522" class="id">
  <a name="m1:522" class="">m1</a>
</span> <span id="m2:523" class="id">
  <a name="m2:523" class="">m2</a>
</span> <span id="m1':524" class="id">
  <a name="m1':524" class="">m1'</a>
</span> <span id="m2':525" class="id">
  <a name="m2':525" class="">m2'</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:520">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:521">A</a></span>) (<span id="b:526" class="id">
  <a name="b:526" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.fail_lib.html#b:526">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m1:522">m1</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#m1':524">m1'</a></span>) <span class="id">-&gt;</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351">~~</a></span> <span class="id"><a href="monae.fail_lib.html#b:526">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m2:523">m2</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#m2':525">m2'</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#b:526">b</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.fail_lib.html#m1:522">m1</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="monae.fail_lib.html#m2:523">m2</a></span>) <span class="id">`&lt;=`</span> (<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#b:526">b</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.fail_lib.html#m1':524">m1'</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="monae.fail_lib.html#m2':525">m2'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
 <span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">b</span> <span class="id">=&gt;</span> <span class="id">[+</span> <span class="id">_|_];</span> <span class="id">exact</span>. Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="plus_isNondet" class="id">
  <a name="plus_isNondet" class="">plus_isNondet</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad}</a></span> <span id="A:528" class="id">
  <a name="A:528" class="">A</a>
</span> (<span id="n:529" class="id">
  <a name="n:529" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:527">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:528">A</a></span>) <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">{m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">|</a></span> <span class="id"><a href="monae.fail_lib.html#nondetSem">nondetSem</a></span> <span class="id"><a href="monae.fail_lib.html#m:530">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#n:529">n}</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="plus_commute" class="id">
  <a name="plus_commute" class="">plus_commute</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad}</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="plus_commute" class="id">
  <a name="plus_commute" class="">plus_commute</a>
</span> <span id="A:532" class="id">
  <a name="A:532" class="">A</a>
</span> (<span id="m:533" class="id">
  <a name="m:533" class="">m</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#plus_commute.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:532">A</a></span>) <span id="B:534" class="id">
  <a name="B:534" class="">B</a>
</span> (<span id="n:535" class="id">
  <a name="n:535" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#plus_commute.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:534">B</a></span>) <span id="C:536" class="id">
  <a name="C:536" class="">C</a>
</span> (<span id="f:537" class="id">
  <a name="f:537" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:532">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#B:534">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#plus_commute.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#C:536">C</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> <span class="id"><a href="monae.fail_lib.html#m:533">m</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.monad_lib.html#commute">commute</a></span> <span class="id"><a href="monae.fail_lib.html#m:533">m</a></span> <span class="id"><a href="monae.fail_lib.html#n:535">n</a></span> <span class="id"><a href="monae.fail_lib.html#f:537">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
<span class="id">case=&gt;</span> <span class="id">x;</span> <span class="id">elim:</span> <span class="id">x</span> <span class="id">m</span> <span class="id">n</span> <span class="id">f</span> <span class="id">=&gt;</span> <span class="id">[{}A</span> <span class="id">a</span> <span class="id">m</span> <span class="id">n</span> <span class="id">f</span> <span class="id">&lt;-|</span> <span class="id">D</span> <span class="id">{}A</span> <span class="id">n0</span> <span class="id">ih0</span> <span class="id">n1</span> <span class="id">ih1</span> <span class="id">m</span> <span class="id">n2</span> <span class="id">f</span> <span class="id">&lt;-</span> <span class="id">|</span><br/>
&nbsp;&nbsp;<span class="id">D</span> <span class="id">m</span> <span class="id">n</span> <span class="id">f</span> <span class="id">&lt;-</span> <span class="id">|</span> <span class="id">D</span> <span class="id">n0</span> <span class="id">ih0</span> <span class="id">n1</span> <span class="id">ih1</span> <span class="id">m</span> <span class="id">n2</span> <span class="id">f</span> <span class="id">&lt;-]</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">/commute</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">/commute</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span>. <span class="id">move=&gt;</span> <span class="id">x;</span> <span class="id">rewrite</span> (<span class="id">ih1</span> <span class="id">x</span>) <span class="id">//</span>. <span class="id">over</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">ih0</span> <span class="id">//;</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">-bindA</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">/commute</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindmfail">bindmfail</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">/commute</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id">[RHS]eq_bind</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDr">alt_bindDr</a></span> <span class="id">ih0</span> <span class="id">//</span> <span class="id">ih1</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="liftM2_isNondet" class="id">
  <a name="liftM2_isNondet" class="">liftM2_isNondet</a>
</span> <span id="A:538" class="id">
  <a name="A:538" class="">A</a>
</span> <span id="B:539" class="id">
  <a name="B:539" class="">B</a>
</span> <span id="C:540" class="id">
  <a name="C:540" class="">C</a>
</span> (<span id="f:541" class="id">
  <a name="f:541" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:538">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#B:539">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#C:540">C</a></span>) (<span id="ma:542" class="id">
  <a name="ma:542" class="">ma</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#plus_commute.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:538">A</a></span>) (<span id="mb:543" class="id">
  <a name="mb:543" class="">mb</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#plus_commute.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:539">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> <span class="id"><a href="monae.fail_lib.html#ma:542">ma</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> <span class="id"><a href="monae.fail_lib.html#mb:543">mb</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id"><a href="monae.monad_lib.html#liftM2">liftM2</a></span> <span class="id"><a href="monae.fail_lib.html#f:541">f</a></span> <span class="id"><a href="monae.fail_lib.html#ma:542">ma</a></span> <span class="id"><a href="monae.fail_lib.html#mb:543">mb</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
<span class="id">move=&gt;</span> <span class="id">[s1</span> <span class="id">s1_ma]</span> <span class="id">[s2</span> <span class="id">s2_mb]</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#ndBind">ndBind</a></span> <span class="id">s1</span> (<span class="gallina-kwd">fun</span> <span id="a:546" class="id"><span id="a:544" class="id">
  <a name="a:546" class="">a</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#ndBind">ndBind</a></span> <span class="id">s2</span> (<span class="gallina-kwd">fun</span> <span id="b:547" class="id"><span id="b:545" class="id">
  <a name="b:547" class="">b</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> (<span class="id">f</span> <span class="id"><a href="monae.fail_lib.html#a:544">a</a></span> <span class="id"><a href="monae.fail_lib.html#b:545">b</a></span>)))).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">s1_ma</span> <span class="id">/comp</span> <span class="id">/=</span> <span class="id">s2_mb</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="guard_isNondet" class="id">
  <a name="guard_isNondet" class="">guard_isNondet</a>
</span> (<span id="b:548" class="id">
  <a name="b:548" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.fail_lib.html#b:548">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#plus_commute.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
<span class="gallina-kwd">exists</span> (<span class="gallina-kwd">if</span> <span class="id">b</span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="gallina-kwd">else</span> <span class="id">@ndFail</span> <span class="id">_</span>).<br/>
<span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP;</a></span> <span class="id">rewrite</span> (<span class="id"><a href="monae.hierarchy.html#guardT">guardT,</a></span> <span class="id"><a href="monae.hierarchy.html#guardF">guardF</a></span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="insert_isNondet" class="id">
  <a name="insert_isNondet" class="">insert_isNondet</a>
</span> <span id="A:549" class="id">
  <a name="A:549" class="">A</a>
</span> (<span id="s:550" class="id">
  <a name="s:550" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:549">A</a></span>) <span id="a:551" class="id">
  <a name="a:551" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id">@insert</span> <span class="id"><a href="monae.fail_lib.html#plus_commute.M">M</a></span> <span class="id">_</span> <span class="id"><a href="monae.fail_lib.html#a:551">a</a></span> <span class="id"><a href="monae.fail_lib.html#s:550">s</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">/=</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">ih];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#506674b18256ef8f50efed43fa1dfd7d">[::</a></span> <span class="id">a]</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id">/=;</span> <span class="id">have</span> <span class="id">[syn</span> <span class="id">synE]</span> <span class="id">:=</span> <span class="id">ih</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#ndAlt">ndAlt</a></span> (<span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#ab09fa4bd99b3931b6a319926b973947">[::</a></span> <span class="id">a,</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#ab09fa4bd99b3931b6a319926b973947">&amp;</a></span> <span class="id">t]</span>) (<span class="id"><a href="monae.fail_lib.html#ndBind">ndBind</a></span> <span class="id">syn</span> (<span class="gallina-kwd">fun</span> <span id="x:553" class="id"><span id="x:552" class="id">
  <a name="x:553" class="">x</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#x:552">x</a></span>)))).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">synE</span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="splits_isNondet" class="id">
  <a name="splits_isNondet" class="">splits_isNondet</a>
</span> <span id="A:554" class="id">
  <a name="A:554" class="">A</a>
</span> (<span id="s:555" class="id">
  <a name="s:555" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:554">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#s:555">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#plus_commute.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">ih</span> <span class="id">/=];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>)).<br/>
<span class="id">have</span> <span class="id">[syn</span> <span class="id">syn_splits]</span> <span class="id">:=</span> <span class="id">ih</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#ndBind">ndBind</a></span> <span class="id">syn</span> (<span class="gallina-kwd">fun</span> <span class="id">'</span>(<span id="a:560" class="id"><span id="a:557" class="id">
  <a name="a:560" class="">a,</a>
</span></span> <span id="b:559" class="id"><span id="b:556" class="id">
  <a name="b:559" class="">b</a>
</span></span>) <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#ndAlt">ndAlt</a></span> (<span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> (<span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#a:557">a,</a></span> <span class="id"><a href="monae.fail_lib.html#b:556">b</a></span>)) (<span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> (<span class="id"><a href="monae.fail_lib.html#a:557">a,</a></span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#b:556">b</a></span>)))).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">syn_splits;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="splits_bseq_isNondet" class="id">
  <a name="splits_bseq_isNondet" class="">splits_bseq_isNondet</a>
</span> <span id="A:562" class="id">
  <a name="A:562" class="">A</a>
</span> (<span id="s:563" class="id">
  <a name="s:563" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:562">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id"><a href="monae.fail_lib.html#splits_bseq">splits_bseq</a></span> <span class="id"><a href="monae.fail_lib.html#s:563">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#plus_commute.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
<span class="id">elim:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">ih];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#eaaba3055732978bbbe0d97684599b41">[bseq],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#eaaba3055732978bbbe0d97684599b41">[bseq]</a></span>)).<br/>
<span class="id">have</span> <span class="id">[syn</span> <span class="id">syn_tsplits]</span> <span class="id">:=</span> <span class="id">ih</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#ndBind">ndBind</a></span> <span class="id">syn</span> (<span class="gallina-kwd">fun</span> <span class="id">'</span>(<span id="a:568" class="id"><span id="a:565" class="id">
  <a name="a:568" class="">a,</a>
</span></span> <span id="b:567" class="id"><span id="b:564" class="id">
  <a name="b:567" class="">b</a>
</span></span>) <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#ndAlt">ndAlt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#1d5f5393e4fd314889ecb840c945ca83">[bseq</a></span> <span class="id">of</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#a:565">a],</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#widen_bseq">widen_bseq</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leqnSn">leqnSn</a></span> <span class="id">_</span>) <span class="id"><a href="monae.fail_lib.html#b:564">b</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#widen_bseq">widen_bseq</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leqnSn">leqnSn</a></span> <span class="id">_</span>) <span class="id"><a href="monae.fail_lib.html#a:565">a,</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#1d5f5393e4fd314889ecb840c945ca83">[bseq</a></span> <span class="id">of</span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#b:564">b]</a></span>)))).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id">syn_tsplits;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="qperm_isNondet" class="id">
  <a name="qperm_isNondet" class="">qperm_isNondet</a>
</span> <span id="A:570" class="id">
  <a name="A:570" class="">A</a>
</span> (<span id="s:571" class="id">
  <a name="s:571" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:570">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:571">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#plus_commute.M">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
<span class="id">have</span> <span class="id">[n</span> <span class="id">sn]</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ubnP">ubnP</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>)<span class="id">;</span> <span class="id">elim:</span> <span class="id">n</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">n</span> <span class="id">ih</span> <span class="id">s</span> <span class="gallina-kwd">in</span> <span class="id">sn</span> <span class="id">*</span>.<br/>
<span class="id">move:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t]</span> <span class="gallina-kwd">in</span> <span class="id">sn</span> <span class="id">*;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#ndRet">ndRet</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#0a934e621391740b862762275992e626">[::]</a></span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qperm_nil">qperm_nil</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qperm_cons">qperm_cons</a></span> <span class="id"><a href="monae.fail_lib.html#splits_bseqE">splits_bseqE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">have</span> <span class="id">[syn</span> <span class="id">syn_tsplits]</span> <span class="id">:=</span> <span class="id"><a href="monae.fail_lib.html#splits_bseq_isNondet">splits_bseq_isNondet</a></span> <span class="id">t</span>.<br/>
<span class="id">have</span> <span class="id">liftM2_qperm_isNondet</span> (<span id="a:572" class="id">
  <a name="a:572" class="">a</a>
</span> <span id="b:573" class="id">
  <a name="b:573" class="">b</a>
</span> <span class="id">:</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">t</span>).<span class="id">-bseq</span> <span class="id">A</span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id"><a href="monae.monad_lib.html#liftM2">liftM2</a></span> (<span class="gallina-kwd">fun</span> <span id="x:574" class="id">
  <a name="x:574" class="">x</a>
</span> <span id="y:575" class="id">
  <a name="y:575" class="">y</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#x:574">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id">h</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#y:575">y</a></span>) (<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#a:572">a</a></span>) (<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#b:573">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#plus_commute.M">M</a></span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply:</span> <span class="id"><a href="monae.fail_lib.html#liftM2_isNondet">liftM2_isNondet</a></span> <span class="id">=&gt;</span> <span class="id">//;</span> <span class="id">apply:</span> <span class="id">ih</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_ltn_trans">leq_ltn_trans</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_bseq">size_bseq</a></span> <span class="id">a</span>)).<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_ltn_trans">leq_ltn_trans</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_bseq">size_bseq</a></span> <span class="id">b</span>)).<br/>
<span class="gallina-kwd">exists</span> (<span class="id"><a href="monae.fail_lib.html#ndBind">ndBind</a></span> <span class="id">syn</span> (<span class="gallina-kwd">fun</span> <span id="a:577" class="id"><span id="a:576" class="id">
  <a name="a:577" class="">a</a>
</span></span> <span class="id">=&gt;</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrfun.html#sval">sval</a></span> (<span class="id">liftM2_qperm_isNondet</span> <span class="id"><a href="monae.fail_lib.html#a:576">a</a></span>.<span class="id">1</span> <span class="id"><a href="monae.fail_lib.html#a:576">a</a></span>.<span class="id">2</span>))).<br/>
<span class="id">rewrite</span> <span class="id">/=</span> <span class="id">syn_tsplits;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b]</span> <span class="id">/=</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf;</a></span> <span class="id">case:</span> (<span class="id">liftM2_qperm_isNondet</span> <span class="id">_</span> <span class="id">_</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#plus_commute">plus_commute</a></span>.<br/>
<br/>
<span class="vernacular">Arguments</span> <span class="id"><a href="monae.fail_lib.html#plus_commute">plus_commute</a></span> <span class="id">{M</span> <span class="id">A}</span> <span class="id">m</span> <span class="id">{B}</span> <span class="id">n</span> <span class="id">{C}</span> <span class="id">f</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id"><a href="monae.fail_lib.html#liftM2_isNondet">liftM2_isNondet</a></span> (<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id">_</span>)) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id">solve[exact:</span> <span class="id"><a href="monae.fail_lib.html#liftM2_isNondet">liftM2_isNondet]</a></span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id">_</span>)) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id">solve[exact:</span> <span class="id"><a href="monae.fail_lib.html#guard_isNondet">guard_isNondet]</a></span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id">_</span> <span class="id">_</span>)) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id">solve[exact:</span> <span class="id"><a href="monae.fail_lib.html#insert_isNondet">insert_isNondet]</a></span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id">_</span>)) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id">solve[exact:</span> <span class="id"><a href="monae.fail_lib.html#splits_isNondet">splits_isNondet]</a></span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id"><a href="monae.fail_lib.html#splits_bseq">splits_bseq</a></span> <span class="id">_</span>)) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id">solve[exact:</span> <span class="id"><a href="monae.fail_lib.html#splits_bseq_isNondet">splits_bseq_isNondet]</a></span> <span class="id">:</span> <span class="id">core</span>.<br/>
<span class="id">#[global]</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">0</span> (<span class="id"><a href="monae.fail_lib.html#plus_isNondet">plus_isNondet</a></span> (<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id">_</span>)) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;<span class="id">solve[exact:</span> <span class="id"><a href="monae.fail_lib.html#qperm_isNondet">qperm_isNondet]</a></span> <span class="id">:</span> <span class="id">core</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="splits_plusMonad" class="id">
  <a name="splits_plusMonad" class="">splits_plusMonad</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad}</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="guard_splits" class="id">
  <a name="guard_splits" class="">guard_splits</a>
</span> <span class="id">{T</span> <span id="A:580" class="id">
  <a name="A:580" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0}</a></span> (<span id="p:581" class="id">
  <a name="p:581" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.fail_lib.html#T:579">T</a></span>) (<span id="t:582" class="id">
  <a name="t:582" class="">t</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#T:579">T</a></span>) (<span id="f:583" class="id">
  <a name="f:583" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#T:579">T</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#T:579">T</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#splits_plusMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:580">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#t:582">t</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:584" class="id">
  <a name="x:584" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.fail_lib.html#p:581">p</a></span> <span class="id"><a href="monae.fail_lib.html#t:582">t</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#f:583">f</a></span> <span class="id"><a href="monae.fail_lib.html#x:584">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#t:582">t</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:585" class="id">
  <a name="x:585" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.fail_lib.html#p:581">p</a></span> <span class="id"><a href="monae.fail_lib.html#x:585">x</a></span>.<span class="id">1</span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.fail_lib.html#p:581">p</a></span> <span class="id"><a href="monae.fail_lib.html#x:585">x</a></span>.<span class="id">2</span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#f:583">f</a></span> <span class="id"><a href="monae.fail_lib.html#x:585">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof94')">Proof.</span></div>
<div class="proofscript" id="proof94">
<span class="id">rewrite</span> <span class="id">-plus_commute//</span>.<br/>
<span class="id">elim:</span> <span class="id">t</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t</span> <span class="id">ih]</span> <span class="gallina-kwd">in</span> <span class="id">p</span> <span class="id">f</span> <span class="id">*;</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">2!bindretf</span> <span class="id"><a href="monae.hierarchy.html#guardT">guardT</a></span> <span class="id"><a href="monae.hierarchy.html#bindmskip">bindmskip</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[LHS]/=</span> <span class="id"><a href="monae.hierarchy.html#guard_and">guard_and</a></span> <span class="id">2!bindA</span> <span class="id">ih</span> <span class="id">/=</span> <span class="id"><a href="monae.fail_lib.html#plus_commute">plus_commute//</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b]</span> <span class="id">/=</span>.<br/>
<span class="id">rewrite</span> <span class="id">!alt_bindDl</span> <span class="id">!bindretf</span> <span class="id">/=</span> <span class="id">!guard_and</span> <span class="id">!bindA</span> <span class="id">!alt_bindDr</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">congr</span> (<span class="id">_</span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id">_</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#plus_commute">plus_commute</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="guard_all_qperm" class="id">
  <a name="guard_all_qperm" class="">guard_all_qperm</a>
</span> <span class="id">{T</span> <span id="B:587" class="id">
  <a name="B:587" class="">B</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0}</a></span> (<span id="p:588" class="id">
  <a name="p:588" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id"><a href="monae.fail_lib.html#T:586">T</a></span>) <span id="s:589" class="id">
  <a name="s:589" class="">s</a>
</span> (<span id="f:590" class="id">
  <a name="f:590" class="">f</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#T:586">T</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#splits_plusMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:587">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:589">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:591" class="id">
  <a name="x:591" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.fail_lib.html#p:588">p</a></span> <span class="id"><a href="monae.fail_lib.html#s:589">s</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#f:590">f</a></span> <span class="id"><a href="monae.fail_lib.html#x:591">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:589">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="x:592" class="id">
  <a name="x:592" class="">x</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id"><a href="monae.fail_lib.html#p:588">p</a></span> <span class="id"><a href="monae.fail_lib.html#x:592">x</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#f:590">f</a></span> <span class="id"><a href="monae.fail_lib.html#x:592">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof95')">Proof.</span></div>
<div class="proofscript" id="proof95">
<span class="id">rewrite</span> <span class="id">-plus_commute//</span>.<br/>
<span class="id">have</span> <span class="id">[n</span> <span class="id">leMn]</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ubnP">ubnP</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>)<span class="id">;</span> <span class="id">elim:</span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">n</span> <span class="id">ih</span> <span class="gallina-kwd">in</span> <span class="id">s</span> <span class="id">f</span> <span class="id">leMn</span> <span class="id">*</span>.<br/>
<span class="id">case:</span> <span class="id">s</span> <span class="id">leMn</span> <span class="id">=&gt;</span> <span class="id">[|h</span> <span class="id">t];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">_;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qperm_nil">qperm_nil</a></span> <span class="id">!bindretf</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">=&gt;</span> <span class="id">tn</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qperm_cons">qperm_cons</a></span> <span class="id">!bindA</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#guard_and">guard_and</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> (<span class="id">@plus_commute</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id">p</span> <span class="id">t</span>)))<span class="id">//</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#guard_splits">guard_splits</a></span> <span class="id"><a href="monae.fail_lib.html#splits_bseqE">splits_bseqE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id">2!bindA</span> <span class="id"><a href="monae.fail_lib.html#plus_commute">plus_commute//</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b];</span> <span class="id">rewrite</span> <span class="id">2!bindretf</span> <span class="id">!bindA</span> <span class="id">/=</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@plus_commute</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all">all</a></span> <span class="id">p</span> <span class="id">b</span>)))<span class="id">//</span>.<br/>
<span class="id">rewrite</span> <span class="id">ih;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_trans">leq_trans</a></span> <span class="id">_</span> <span class="id">tn</span>) <span class="id">//=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_bseq">size_bseq</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">@plus_commute</span> <span class="id">_</span> <span class="id">_</span>(<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id">p</span> <span class="id">h</span>)))<span class="id">//</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">a';</span> <span class="id">rewrite</span> <span class="id">!bindA</span> (<span class="id">@plus_commute</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id">p</span> <span class="id">h</span>)))<span class="id">//</span>.<br/>
<span class="id">rewrite</span> <span class="id">ih;</span> <span class="id">last</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#leq_trans">leq_trans</a></span> <span class="id">_</span> <span class="id">tn</span>) <span class="id">//=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.tuple.html#size_bseq">size_bseq</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">@plus_commute</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id">p</span> <span class="id">h</span>)))<span class="id">//</span> <span class="id"><a href="monae.fail_lib.html#plus_commute">plus_commute//</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">b';</span> <span class="id">rewrite</span> <span class="id">!bindretf</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#all_cat">all_cat</a></span> <span class="id">/=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbA">andbA</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbAC">andbAC</a></span> <span class="id">!guard_and</span> <span class="id">!bindA</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#plus_commute">plus_commute//</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iperm_cons_splits" class="id">
  <a name="iperm_cons_splits" class="">iperm_cons_splits</a>
</span> (<span id="A:593" class="id">
  <a name="A:593" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) (<span id="s:594" class="id">
  <a name="s:594" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:593">A</a></span>) <span id="p:595" class="id">
  <a name="p:595" class="">p</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> (<span class="id"><a href="monae.fail_lib.html#p:595">p</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#s:594">s</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#splits">splits</a></span> <span class="id"><a href="monae.fail_lib.html#s:594">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span class="id">'</span>(<span id="ys:597" class="id">
  <a name="ys:597" class="">ys,</a>
</span> <span id="zs:596" class="id">
  <a name="zs:596" class="">zs</a>
</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="monae.monad_lib.html#liftM2">liftM2</a></span> (<span class="gallina-kwd">fun</span> <span id="x:599" class="id">
  <a name="x:599" class="">x</a>
</span> <span id="y:600" class="id">
  <a name="y:600" class="">y</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#x:599">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#93e0a78b945d3f9f22195c004c67aa36">++</a></span> <span class="id"><a href="monae.fail_lib.html#p:595">p</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#y:600">y</a></span>) (<span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="monae.fail_lib.html#ys:597">ys</a></span>) (<span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="monae.fail_lib.html#zs:596">zs</a></span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#splits_plusMonad.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof96')">Proof.</span></div>
<div class="proofscript" id="proof96">
<span class="id">have</span> <span class="id">[n</span> <span class="id">ns]</span> <span class="id">:=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ubnP">ubnP</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#size">size</a></span> <span class="id">s</span>)<span class="id">;</span> <span class="id">elim:</span> <span class="id">n</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">n</span> <span class="id">ih</span> <span class="id">s</span> <span class="id">ns</span>.<br/>
<span class="id">move:</span> <span class="id">s</span> <span class="id">ns</span> <span class="id">=&gt;</span> <span class="id">[ns</span> <span class="id">|h</span> <span class="id">t]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE</a></span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span> <span class="id">/=</span> <span class="id">/liftM2</span> <span class="id">/=</span> <span class="id">!bindretf</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id">X</span> <span class="gallina-kwd">in</span> <span class="id"><a href="monae.fail_lib.html#X:601">X</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">_]/=</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.ssrnat.html#ltnS">ltnS</a></span> <span class="id">=&gt;</span> <span class="id">ns</span>.<br/>
<span class="id">rewrite</span> <span class="id">[in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS]/=</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#alt_bindDl">alt_bindDl</a></span> <span class="id">2!bindretf</span>.<br/>
<span class="id">transitivity</span> (<span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#ab09fa4bd99b3931b6a319926b973947">[::</a></span> <span class="id">h,</span> <span class="id">p</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#ab09fa4bd99b3931b6a319926b973947">&amp;</a></span> <span class="id">t]</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#splits_plusMonad.M">M</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="monae.fail_lib.html#perm_eq_iperm">perm_eq_iperm;</a></span> <span class="id">rewrite</span> <span class="id">-cat1s</span> <span class="id">-</span>(<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#cat1s">cat1s</a></span> <span class="id">h</span>) <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_catCA">perm_catCA</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">[p</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id">t]lock</span> <span class="id">/=</span> <span class="id">-lock</span> <span class="id">ih</span> <span class="id">//</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA;</a></span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b]</span> <span class="id">/=</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.monad_lib.html#liftM2E">liftM2E</a></span> <span class="id">/liftM2</span> <span class="id">/=</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> <span class="id">-alt_bindDr;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">a'</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span> (<span class="id"><a href="monae.fail_lib.html#plus_commute">plus_commute</a></span> (<span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id">h</span> <span class="id">a'</span>))<span class="id">//</span> <span class="id">-alt_bindDr</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">under</span> <span class="id"><a href="monae.hierarchy.html#eq_bind">eq_bind</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insert_cat">insert_cat</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#splits_plusMonad">splits_plusMonad</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="qperm_lemmas" class="id">
  <a name="qperm_lemmas" class="">qperm_lemmas</a>
</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad}</a></span> <span class="id">{A</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType}</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="iperm_qperm" class="id">
  <a name="iperm_qperm" class="">iperm_qperm</a>
</span> <span class="id">:</span> <span class="id">@iperm</span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">@qperm</span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.A">A</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof97')">Proof.</span></div>
<div class="proofscript" id="proof97">
<span class="id">rewrite</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funeqE">boolp.funeqE</a></span> <span class="id">=&gt;</span> <span class="id">s</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="monae.fail_lib.html#qperm_elim">qperm_elim</a></span> <span class="id">=&gt;</span> <span class="id">[//|h</span> <span class="id">t</span> <span class="id">ihys</span> <span class="id">ihzs]</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#iperm_cons_splits">iperm_cons_splits</a></span> <span class="id"><a href="monae.fail_lib.html#splits_bseqE">splits_bseqE</a></span> <span class="id"><a href="monae.hierarchy.html#fmapE">fmapE</a></span> <span class="id"><a href="monae.hierarchy.html#bindA">bindA</a></span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">-[a</span> <span class="id">b];</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindretf">bindretf</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> (<span class="id">ihys</span> (<span class="id">a,</span> <span class="id">b</span>) <span class="id">_</span> <span class="id">b</span>) (<span class="id">ihzs</span> (<span class="id">a,</span> <span class="id">b</span>) <span class="id">a</span>).<br/>
Qed.</div>
<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="perm_eq_qperm" class="id">
  <a name="perm_eq_qperm" class="">perm_eq_qperm</a>
</span> (<span id="a:604" class="id">
  <a name="a:604" class="">a</a>
</span> <span id="b:605" class="id">
  <a name="b:605" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_eq">perm_eq</a></span> <span class="id"><a href="monae.fail_lib.html#a:604">a</a></span> <span class="id"><a href="monae.fail_lib.html#b:605">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#a:604">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#b:605">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof98')">Proof.</span></div>
<div class="proofscript" id="proof98">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-!iperm_qperm;</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#perm_eq_iperm">perm_eq_iperm</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="qperm_cons_rcons" class="id">
  <a name="qperm_cons_rcons" class="">qperm_cons_rcons</a>
</span> <span id="h:606" class="id">
  <a name="h:606" class="">h</a>
</span> (<span id="t:607" class="id">
  <a name="t:607" class="">t</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> (<span class="id"><a href="monae.fail_lib.html#h:606">h</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#t:607">t</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#t:607">t</a></span> <span class="id"><a href="monae.fail_lib.html#h:606">h</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof99')">Proof.</span></div>
<div class="proofscript" id="proof99">
 <span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="monae.fail_lib.html#perm_eq_qperm">perm_eq_qperm;</a></span> <span class="id">rewrite</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_sym">perm_sym</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_rcons">perm_rcons</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#perm_refl">perm_refl</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="qperm_rcons" class="id">
  <a name="qperm_rcons" class="">qperm_rcons</a>
</span> (<span id="s:608" class="id">
  <a name="s:608" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.A">A</a></span>) <span id="x:609" class="id">
  <a name="x:609" class="">x</a>
</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#s:608">s</a></span> <span class="id"><a href="monae.fail_lib.html#x:609">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:608">s</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> (<span class="gallina-kwd">fun</span> <span id="s':610" class="id">
  <a name="s':610" class="">s'</a>
</span> <span class="id">=&gt;</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#s':610">s'</a></span> <span class="id"><a href="monae.fail_lib.html#x:609">x</a></span>)) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.M">M</a></span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof100')">Proof.</span></div>
<div class="proofscript" id="proof100">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-iperm_qperm</span> <span class="id"><a href="monae.fail_lib.html#iperm_rcons_bind">iperm_rcons_bind</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="qperm_idempotent" class="id">
  <a name="qperm_idempotent" class="">qperm_idempotent</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.hierarchy.html#5483cabbcd988b1cb7000e5ba9f05889">&gt;=&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.M">M</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas.A">A</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof101')">Proof.</span></div>
<div class="proofscript" id="proof101">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-iperm_qperm</span> <span class="id"><a href="monae.fail_lib.html#iperm_idempotent">iperm_idempotent</a></span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#qperm_lemmas">qperm_lemmas</a></span>.<br/>
<br/>
<span class="vernacular">Import</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.order.html#Order.TTheory">Order.TTheory</a></span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">order_scope</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="refin_lemmas_altCIMonad" class="id">
  <a name="refin_lemmas_altCIMonad" class="">refin_lemmas_altCIMonad</a>
</span>.<br/>
<span class="vernacular">Variable</span> <span id="refin_lemmas_altCIMonad.M" class="id">
  <a name="refin_lemmas_altCIMonad.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAltCI.Exports.altCIMonad">altCIMonad</a></span>.<br/>
<span class="vernacular">Implicit</span> <span class="id">Types</span> <span class="id">A</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_refl" class="id">
  <a name="refin_refl" class="">refin_refl</a>
</span> <span id="A:612" class="id">
  <a name="A:612" class="">A</a>
</span> (<span id="a:613" class="id">
  <a name="a:613" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#refin_lemmas_altCIMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:612">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#a:613">a</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#a:613">a</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof102')">Proof.</span></div>
<div class="proofscript" id="proof102">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/refin</span> <span class="id"><a href="monae.hierarchy.html#altmm">altmm</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="eq_refin" class="id">
  <a name="eq_refin" class="">eq_refin</a>
</span> <span id="A:614" class="id">
  <a name="A:614" class="">A</a>
</span> (<span id="a:615" class="id">
  <a name="a:615" class="">a</a>
</span> <span id="b:616" class="id">
  <a name="b:616" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#refin_lemmas_altCIMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:614">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#a:615">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#b:616">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#a:615">a</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#b:616">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof103')">Proof.</span></div>
<div class="proofscript" id="proof103">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">-&gt;;</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refin_refl">refin_refl</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_trans" class="id">
  <a name="refin_trans" class="">refin_trans</a>
</span> <span id="A:617" class="id">
  <a name="A:617" class="">A</a>
</span> (<span id="b:618" class="id">
  <a name="b:618" class="">b</a>
</span> <span id="a:619" class="id">
  <a name="a:619" class="">a</a>
</span> <span id="c:620" class="id">
  <a name="c:620" class="">c</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#refin_lemmas_altCIMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:617">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#a:619">a</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#b:618">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#b:618">b</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#c:620">c</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#a:619">a</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#c:620">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof104')">Proof.</span></div>
<div class="proofscript" id="proof104">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/refin</span> <span class="id">=&gt;</span> <span class="id">h1</span> <span class="id">&lt;-;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#altA">altA</a></span> <span class="id">h1</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_antisym" class="id">
  <a name="refin_antisym" class="">refin_antisym</a>
</span> <span id="A:621" class="id">
  <a name="A:621" class="">A</a>
</span> (<span id="a:622" class="id">
  <a name="a:622" class="">a</a>
</span> <span id="b:623" class="id">
  <a name="b:623" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#refin_lemmas_altCIMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:621">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#a:622">a</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#b:623">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#b:623">b</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#a:622">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#a:622">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#b:623">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof105')">Proof.</span></div>
<div class="proofscript" id="proof105">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/refin</span> <span class="id">=&gt;</span> <span class="id">h1</span> <span class="id">&lt;-;</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#altC">altC</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_alt" class="id">
  <a name="refin_alt" class="">refin_alt</a>
</span> <span id="A:624" class="id">
  <a name="A:624" class="">A</a>
</span> (<span id="m1:625" class="id">
  <a name="m1:625" class="">m1</a>
</span> <span id="m1':626" class="id">
  <a name="m1':626" class="">m1'</a>
</span> <span id="m2:627" class="id">
  <a name="m2:627" class="">m2</a>
</span> <span id="m2':628" class="id">
  <a name="m2':628" class="">m2'</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#refin_lemmas_altCIMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:624">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#m1:625">m1</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#m1':626">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m2:627">m2</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#m2':628">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m1:625">m1</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#m2:627">m2</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#m1':626">m1'</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#m2':628">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof106')">Proof.</span></div>
<div class="proofscript" id="proof106">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">h1</span> <span class="id">h2;</span> <span class="id">rewrite</span> <span class="id">/refin</span> <span class="id"><a href="monae.hierarchy.html#altACA">altACA</a></span> <span class="id">h1</span> <span class="id">h2</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refinR" class="id">
  <a name="refinR" class="">refinR</a>
</span> <span id="A:629" class="id">
  <a name="A:629" class="">A</a>
</span> (<span id="a:630" class="id">
  <a name="a:630" class="">a</a>
</span> <span id="b:631" class="id">
  <a name="b:631" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#refin_lemmas_altCIMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:629">A</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#a:630">a</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#a:630">a</a></span> <span class="id"><a href="monae.hierarchy.html#bdf043675a5fe817d484e3f9853f2e96">[~]</a></span> <span class="id"><a href="monae.fail_lib.html#b:631">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof107')">Proof.</span></div>
<div class="proofscript" id="proof107">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">/refin</span> <span class="id"><a href="monae.hierarchy.html#altA">altA</a></span> <span class="id"><a href="monae.hierarchy.html#altmm">altmm</a></span>. Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#refin_lemmas_altCIMonad">refin_lemmas_altCIMonad</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="lrefin" class="id">
  <a name="lrefin" class="">lrefin</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAlt.Exports.altMonad">altMonad}</a></span> <span id="A:633" class="id">
  <a name="A:633" class="">A</a>
</span> <span id="B:634" class="id">
  <a name="B:634" class="">B</a>
</span> (<span id="f:635" class="id">
  <a name="f:635" class="">f</a>
</span> <span id="g:636" class="id">
  <a name="g:636" class="">g</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:633">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#M:632">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:634">B</a></span>) <span class="id">:=</span> <span class="gallina-kwd">forall</span> <span id="x:637" class="id">
  <a name="x:637" class="">x,</a>
</span> <span class="id"><a href="monae.fail_lib.html#f:635">f</a></span> <span class="id"><a href="monae.fail_lib.html#x:637">x</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`g</a></span> <span class="id"><a href="monae.fail_lib.html#x:637">x</a></span>.<br/>
<span class="vernacular">Notation</span> <span id="3c6f54eb333403a121cf5ee349e0c952" class="id">
  <a name="3c6f54eb333403a121cf5ee349e0c952" class="">&quot;f `&lt;.=` g&quot;</a>
</span> <span class="id">:=</span> (<span class="id"><a href="monae.fail_lib.html#lrefin">lrefin</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<br/>
<span class="vernacular">Section</span> <span id="lrefin_lemmas_altCIMonad" class="id">
  <a name="lrefin_lemmas_altCIMonad" class="">lrefin_lemmas_altCIMonad</a>
</span>.<br/>
<span class="vernacular">Variable</span> <span id="lrefin_lemmas_altCIMonad.M" class="id">
  <a name="lrefin_lemmas_altCIMonad.M" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAltCI.Exports.altCIMonad">altCIMonad</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="lrefin_refl" class="id">
  <a name="lrefin_refl" class="">lrefin_refl</a>
</span> <span id="A:639" class="id">
  <a name="A:639" class="">A</a>
</span> <span id="B:640" class="id">
  <a name="B:640" class="">B</a>
</span> (<span id="a:641" class="id">
  <a name="a:641" class="">a</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:639">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#lrefin_lemmas_altCIMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:640">B</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#a:641">a</a></span> <span class="id"><a href="monae.fail_lib.html#3c6f54eb333403a121cf5ee349e0c952">`&lt;</a></span>.<span class="id">=`</span> <span class="id"><a href="monae.fail_lib.html#a:641">a</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof108')">Proof.</span></div>
<div class="proofscript" id="proof108">
 <span class="gallina-kwd">by</span> <span class="id">move</span> <span class="id">=&gt;</span> <span class="id">?;</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refin_refl">refin_refl</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="lrefin_trans" class="id">
  <a name="lrefin_trans" class="">lrefin_trans</a>
</span> <span id="A:642" class="id">
  <a name="A:642" class="">A</a>
</span> <span id="B:643" class="id">
  <a name="B:643" class="">B</a>
</span> (<span id="b:644" class="id">
  <a name="b:644" class="">b</a>
</span> <span id="a:645" class="id">
  <a name="a:645" class="">a</a>
</span> <span id="c:646" class="id">
  <a name="c:646" class="">c</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:642">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#lrefin_lemmas_altCIMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:643">B</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#a:645">a</a></span> <span class="id"><a href="monae.fail_lib.html#3c6f54eb333403a121cf5ee349e0c952">`&lt;</a></span>.<span class="id">=`</span> <span class="id"><a href="monae.fail_lib.html#b:644">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#b:644">b</a></span> <span class="id"><a href="monae.fail_lib.html#3c6f54eb333403a121cf5ee349e0c952">`&lt;</a></span>.<span class="id">=`</span> <span class="id"><a href="monae.fail_lib.html#c:646">c</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#a:645">a</a></span> <span class="id"><a href="monae.fail_lib.html#3c6f54eb333403a121cf5ee349e0c952">`&lt;</a></span>.<span class="id">=`</span> <span class="id"><a href="monae.fail_lib.html#c:646">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof109')">Proof.</span></div>
<div class="proofscript" id="proof109">
 <span class="gallina-kwd">by</span> <span class="id">move</span> <span class="id">=&gt;</span> <span class="id">?</span> <span class="id">?</span> <span class="id">?;</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refin_trans">refin_trans</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="lrefin_antisym" class="id">
  <a name="lrefin_antisym" class="">lrefin_antisym</a>
</span> <span id="A:647" class="id">
  <a name="A:647" class="">A</a>
</span> <span id="B:648" class="id">
  <a name="B:648" class="">B</a>
</span> (<span id="a:649" class="id">
  <a name="a:649" class="">a</a>
</span> <span id="b:650" class="id">
  <a name="b:650" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:647">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#lrefin_lemmas_altCIMonad.M">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:648">B</a></span>) <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#a:649">a</a></span> <span class="id"><a href="monae.fail_lib.html#3c6f54eb333403a121cf5ee349e0c952">`&lt;</a></span>.<span class="id">=`</span> <span class="id"><a href="monae.fail_lib.html#b:650">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#b:650">b</a></span> <span class="id"><a href="monae.fail_lib.html#3c6f54eb333403a121cf5ee349e0c952">`&lt;</a></span>.<span class="id">=`</span> <span class="id"><a href="monae.fail_lib.html#a:649">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#a:649">a</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monae.fail_lib.html#b:650">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof110')">Proof.</span></div>
<div class="proofscript" id="proof110">
 <span class="id">move</span> <span class="id">=&gt;</span> <span class="id">?</span> <span class="id">?;</span> <span class="id">apply</span> <span class="id"><a href="NOTFOUND the module url for mathcomp.classical.boolp#funext">boolp.funext</a></span> <span class="id">=&gt;</span> <span class="id">?;</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refin_antisym">refin_antisym</a></span>. Qed.</div>
<span class="vernacular">End</span> <span class="id"><a href="monae.fail_lib.html#lrefin_lemmas_altCIMonad">lrefin_lemmas_altCIMonad</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_bindl" class="id">
  <a name="refin_bindl" class="">refin_bindl</a>
</span> (<span id="M:651" class="id">
  <a name="M:651" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPrePlus.Exports.prePlusMonad">prePlusMonad</a></span>) <span id="A:652" class="id">
  <a name="A:652" class="">A</a>
</span> <span id="B:653" class="id">
  <a name="B:653" class="">B</a>
</span> (<span id="m:654" class="id">
  <a name="m:654" class="">m</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:651">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:652">A</a></span>) (<span id="f:655" class="id">
  <a name="f:655" class="">f</a>
</span> <span id="g:656" class="id">
  <a name="g:656" class="">g</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:652">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#M:651">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:653">B</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.fail_lib.html#f:655">f</a></span> <span class="id"><a href="monae.fail_lib.html#3c6f54eb333403a121cf5ee349e0c952">`&lt;</a></span>.<span class="id">=`</span> <span class="id"><a href="monae.fail_lib.html#g:656">g</a></span>) <span class="id">-&gt;</span> (<span class="id"><a href="monae.fail_lib.html#m:654">m</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#f:655">f</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#m:654">m</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#g:656">g</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof111')">Proof.</span></div>
<div class="proofscript" id="proof111">
 <span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">fg;</span> <span class="id">rewrite</span> <span class="id">/refin</span> <span class="id">-alt_bindDr;</span> <span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">a;</span> <span class="id">exact:</span> <span class="id">fg</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_bind" class="id">
  <a name="refin_bind" class="">refin_bind</a>
</span> (<span id="M:657" class="id">
  <a name="M:657" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad</a></span>) <span id="A:658" class="id">
  <a name="A:658" class="">A</a>
</span> <span id="B:659" class="id">
  <a name="B:659" class="">B</a>
</span> <span class="id">{m</span> <span id="n:661" class="id">
  <a name="n:661" class="">n</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:657">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:658">A}</a></span> <span class="id">{f</span> <span id="g:663" class="id">
  <a name="g:663" class="">g</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:658">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#M:657">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:659">B}</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#m:660">m</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#n:661">n</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#f:662">f</a></span> <span class="id"><a href="monae.fail_lib.html#3c6f54eb333403a121cf5ee349e0c952">`&lt;</a></span>.<span class="id">=`</span> <span class="id"><a href="monae.fail_lib.html#g:663">g</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="monae.fail_lib.html#m:660">m</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#f:662">f</a></span>) <span class="id">`&lt;=`</span> (<span class="id"><a href="monae.fail_lib.html#n:661">n</a></span> <span class="id"><a href="monae.hierarchy.html#2409e092bcd148d27284e4f1ad307e1d">&gt;&gt;=</a></span> <span class="id"><a href="monae.fail_lib.html#g:663">g</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof112')">Proof.</span></div>
<div class="proofscript" id="proof112">
<span class="gallina-kwd">by</span> <span class="id">move=&gt;</span> <span class="id">mn</span> <span class="id">/refin_bindl</span> <span class="id">?;</span> <span class="id">exact:</span> (<span class="id"><a href="monae.fail_lib.html#refin_trans">refin_trans</a></span> <span class="id">_</span> (<span class="id"><a href="monae.fail_lib.html#refin_bindr">refin_bindr</a></span> <span class="id">_</span> <span class="id">mn</span>)).<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_liftM2" class="id">
  <a name="refin_liftM2" class="">refin_liftM2</a>
</span> (<span id="M:664" class="id">
  <a name="M:664" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad</a></span>) (<span id="A:665" class="id">
  <a name="A:665" class="">A</a>
</span> <span id="B:666" class="id">
  <a name="B:666" class="">B</a>
</span> <span id="C:667" class="id">
  <a name="C:667" class="">C</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span class="id">{f</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#A:665">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#B:666">B</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#C:667">C}</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{m1</span> <span id="n1:670" class="id">
  <a name="n1:670" class="">n1</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:664">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:665">A}</a></span> <span class="id">{m2</span> <span id="n2:672" class="id">
  <a name="n2:672" class="">n2</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:664">M</a></span> <span class="id"><a href="monae.fail_lib.html#B:666">B}</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.fail_lib.html#m1:669">m1</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#n1:670">n1</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m2:671">m2</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#n2:672">n2</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.monad_lib.html#liftM2">liftM2</a></span> <span class="id"><a href="monae.fail_lib.html#f:668">f</a></span> <span class="id"><a href="monae.fail_lib.html#m1:669">m1</a></span> <span class="id"><a href="monae.fail_lib.html#m2:671">m2</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.monad_lib.html#liftM2">liftM2</a></span> <span class="id"><a href="monae.fail_lib.html#f:668">f</a></span> <span class="id"><a href="monae.fail_lib.html#n1:670">n1</a></span> <span class="id"><a href="monae.fail_lib.html#n2:672">n2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof113')">Proof.</span></div>
<div class="proofscript" id="proof113">
<span class="id">move=&gt;</span> <span class="id">mn1</span> <span class="id">mn2;</span> <span class="id">rewrite</span> <span class="id">/liftM2</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">apply:</span> (<span class="id"><a href="monae.fail_lib.html#refin_bind">refin_bind</a></span> <span class="id">mn1</span> <span class="id">_</span>) <span class="id">=&gt;</span> <span class="id">a;</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refin_bindr">refin_bindr</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_guard_le" class="id">
  <a name="refin_guard_le" class="">refin_guard_le</a>
</span> (<span id="M:673" class="id">
  <a name="M:673" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad</a></span>) (<span id="d:674" class="id">
  <a name="d:674" class="">d</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span id="T:675" class="id">
  <a name="T:675" class="">T</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.order.html#Order.Total.Exports.orderType">orderType</a></span> <span class="id"><a href="monae.fail_lib.html#d:674">d</a></span>) (<span id="x:676" class="id">
  <a name="x:676" class="">x</a>
</span> <span id="y:677" class="id">
  <a name="y:677" class="">y</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#T:675">T</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351">~~</a></span> (<span class="id"><a href="monae.fail_lib.html#y:677">y</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.order.html#6267442e1f81ed96252446fa7b1c579b">&lt;=</a></span> <span class="id"><a href="monae.fail_lib.html#x:676">x</a></span>)<span class="id">%O</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#M:673">M</a></span> <span class="id">_</span>) <span class="id">`&lt;=`</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="monae.fail_lib.html#x:676">x</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.order.html#6267442e1f81ed96252446fa7b1c579b">&lt;=</a></span> <span class="id"><a href="monae.fail_lib.html#y:677">y</a></span>)<span class="id">%O</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof114')">Proof.</span></div>
<div class="proofscript" id="proof114">
<span class="id">rewrite</span> <span class="id">-ltNge</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.order.html#Order.POrderTheory.le_eqVlt">le_eqVlt</a></span>.<br/>
<span class="id">case:</span> <span class="id"><a href="monae.hierarchy.html#guardPn">guardPn</a></span> <span class="id">=&gt;</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orbT">orbT</a></span> <span class="id"><a href="monae.hierarchy.html#guardT">guardT;</a></span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refin_refl">refin_refl</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orbF">orbF</a></span> <span class="id">/refin</span> <span class="id"><a href="monae.hierarchy.html#altfailm">altfailm</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_if_guard" class="id">
  <a name="refin_if_guard" class="">refin_if_guard</a>
</span> (<span id="M:678" class="id">
  <a name="M:678" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad</a></span>) <span id="A:679" class="id">
  <a name="A:679" class="">A</a>
</span> (<span id="p:680" class="id">
  <a name="p:680" class="">p</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span id="m1:681" class="id">
  <a name="m1:681" class="">m1</a>
</span> <span id="m2:682" class="id">
  <a name="m2:682" class="">m2</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:678">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:679">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">if</span> <span class="id"><a href="monae.fail_lib.html#p:680">p</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="monae.fail_lib.html#m1:681">m1</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="monae.fail_lib.html#m2:682">m2</a></span>) <span class="id">`&lt;=`</span> (<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.fail_lib.html#p:680">p</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m1:681">m1</a></span>) <span class="id">[~]</span> (<span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351">~~</a></span> <span class="id"><a href="monae.fail_lib.html#p:680">p</a></span>) <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m2:682">m2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof115')">Proof.</span></div>
<div class="proofscript" id="proof115">
<span class="id">rewrite</span> <span class="id">/refin;</span> <span class="id">case:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> <span class="id">=&gt;</span> <span class="id">/=</span> <span class="id">[pT|pF];</span> <span class="id">rewrite</span> <span class="id">!</span>(<span class="id"><a href="monae.hierarchy.html#guardT">guardT,guardF</a></span>).<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span> <span class="id"><a href="monae.hierarchy.html#altA">altA</a></span> <span class="id"><a href="monae.hierarchy.html#altmm">altmm</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#bindfailf">bindfailf</a></span> <span class="id"><a href="monae.hierarchy.html#bindskipf">bindskipf</a></span> <span class="id"><a href="monae.hierarchy.html#altCA">altCA</a></span> <span class="id"><a href="monae.hierarchy.html#altmm">altmm</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_bind_guard" class="id">
  <a name="refin_bind_guard" class="">refin_bind_guard</a>
</span> <span class="id">{M</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad}</a></span> <span id="A:684" class="id">
  <a name="A:684" class="">A</a>
</span> (<span id="b:685" class="id">
  <a name="b:685" class="">b</a>
</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span id="m1:686" class="id">
  <a name="m1:686" class="">m1</a>
</span> <span id="m2:687" class="id">
  <a name="m2:687" class="">m2</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.fail_lib.html#M:683">M</a></span> <span class="id"><a href="monae.fail_lib.html#A:684">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.fail_lib.html#b:685">b</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m2:687">m2</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.fail_lib.html#m1:686">m1</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.fail_lib.html#b:685">b</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m2:687">m2</a></span> <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> <span class="id"><a href="monae.hierarchy.html#guard">guard</a></span> <span class="id"><a href="monae.fail_lib.html#b:685">b</a></span> <span class="id"><a href="monae.hierarchy.html#::monae_scope:x_'&gt;&gt;'_x">&gt;&gt;</a></span> <span class="id"><a href="monae.fail_lib.html#m1:686">m1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof116')">Proof.</span></div>
<div class="proofscript" id="proof116">
<span class="id">case:</span> <span class="id">b</span> <span class="id">=&gt;</span> <span class="id">[h|_];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">apply:</span> <span class="id"><a href="monae.fail_lib.html#refin_bindl">refin_bindl</a></span> <span class="id">=&gt;</span> <span class="id">-[];</span> <span class="id">exact:</span> <span class="id">h</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.hierarchy.html#guardF">guardF</a></span> <span class="id">!bindfailf;</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refin_refl">refin_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_ret_insert" class="id">
  <a name="refin_ret_insert" class="">refin_ret_insert</a>
</span> (<span id="M:688" class="id">
  <a name="M:688" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadAltCI.Exports.altCIMonad">altCIMonad</a></span>) (<span id="A:689" class="id">
  <a name="A:689" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) <span id="h:690" class="id">
  <a name="h:690" class="">h</a>
</span> (<span id="t:691" class="id">
  <a name="t:691" class="">t</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:689">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#h:690">h</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#t:691">t</a></span>) <span class="id"><a href="monae.fail_lib.html#6dd59ac36f434063a5e5ef81e754b682">`&lt;=`</a></span> (<span class="id"><a href="monae.fail_lib.html#insert">insert</a></span> <span class="id"><a href="monae.fail_lib.html#h:690">h</a></span> <span class="id"><a href="monae.fail_lib.html#t:691">t</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#M:688">M</a></span> <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof117')">Proof.</span></div>
<div class="proofscript" id="proof117">
<span class="id">elim:</span> <span class="id">t</span> <span class="id">h</span> <span class="id">=&gt;</span> <span class="id">[h|t1</span> <span class="id">t2</span> <span class="id">ih</span> <span class="id">h];</span> <span class="id">first</span> <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE;</a></span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refin_refl">refin_refl</a></span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#insertE">insertE;</a></span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refinR">refinR</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_ret_iperm" class="id">
  <a name="refin_ret_iperm" class="">refin_ret_iperm</a>
</span> (<span id="M:692" class="id">
  <a name="M:692" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad</a></span>) (<span id="A:693" class="id">
  <a name="A:693" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#UU0">UU0</a></span>) (<span id="s:694" class="id">
  <a name="s:694" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:693">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#s:694">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#M:692">M</a></span> <span class="id">_</span>) <span class="id">`&lt;=`</span> <span class="id"><a href="monae.fail_lib.html#iperm">iperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:694">s</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof118')">Proof.</span></div>
<div class="proofscript" id="proof118">
<span class="gallina-kwd">by</span> <span class="id">case:</span> (<span class="id">@iperm_is_alt_ret</span> <span class="id">M</span> <span class="id">_</span> <span class="id">s</span>) <span class="id">=&gt;</span> <span class="id">m</span> <span class="id">-&gt;;</span> <span class="id">rewrite</span> <span class="id">/refin</span> <span class="id"><a href="monae.hierarchy.html#altA">altA</a></span> <span class="id"><a href="monae.hierarchy.html#altmm">altmm</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="refin_qperm_ret" class="id">
  <a name="refin_qperm_ret" class="">refin_qperm_ret</a>
</span> (<span id="M:695" class="id">
  <a name="M:695" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad</a></span>) (<span id="A:696" class="id">
  <a name="A:696" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) (<span id="s:697" class="id">
  <a name="s:697" class="">s</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:696">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> <span class="id"><a href="monae.fail_lib.html#s:697">s</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#M:695">M</a></span> <span class="id">_</span>) <span class="id">`&lt;=`</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> <span class="id"><a href="monae.fail_lib.html#s:697">s</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof119')">Proof.</span></div>
<div class="proofscript" id="proof119">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-iperm_qperm;</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refin_ret_iperm">refin_ret_iperm</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="qperm_refin_rcons" class="id">
  <a name="qperm_refin_rcons" class="">qperm_refin_rcons</a>
</span> (<span id="M:698" class="id">
  <a name="M:698" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad</a></span>) (<span id="A:699" class="id">
  <a name="A:699" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) <span id="h:700" class="id">
  <a name="h:700" class="">h</a>
</span> (<span id="t:701" class="id">
  <a name="t:701" class="">t</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:699">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#t:701">t</a></span> <span class="id"><a href="monae.fail_lib.html#h:700">h</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#M:698">M</a></span> <span class="id">_</span>) <span class="id">`&lt;=`</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> (<span class="id"><a href="monae.fail_lib.html#h:700">h</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#t:701">t</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof120')">Proof.</span></div>
<div class="proofscript" id="proof120">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monae.fail_lib.html#qperm_cons_rcons">qperm_cons_rcons;</a></span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refin_qperm_ret">refin_qperm_ret</a></span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="qperm_refin_cons" class="id">
  <a name="qperm_refin_cons" class="">qperm_refin_cons</a>
</span> (<span id="M:702" class="id">
  <a name="M:702" class="">M</a>
</span> <span class="id">:</span> <span class="id"><a href="monae.hierarchy.html#MonadPlus.Exports.plusMonad">plusMonad</a></span>) (<span id="A:703" class="id">
  <a name="A:703" class="">A</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType">eqType</a></span>) <span id="h:704" class="id">
  <a name="h:704" class="">h</a>
</span> (<span id="t:705" class="id">
  <a name="t:705" class="">t</a>
</span> <span class="id">:</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#seq">seq</a></span> <span class="id"><a href="monae.fail_lib.html#A:703">A</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="monae.hierarchy.html#Ret">Ret</a></span> (<span class="id"><a href="monae.fail_lib.html#h:704">h</a></span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#::seq_scope:x_'::'_x">::</a></span> <span class="id"><a href="monae.fail_lib.html#t:705">t</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#::core_scope:x_':'_x">:</a></span> <span class="id"><a href="monae.fail_lib.html#M:702">M</a></span> <span class="id">_</span>) <span class="id">`&lt;=`</span> <span class="id"><a href="monae.fail_lib.html#qperm">qperm</a></span> (<span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.seq.html#rcons">rcons</a></span> <span class="id"><a href="monae.fail_lib.html#t:705">t</a></span> <span class="id"><a href="monae.fail_lib.html#h:704">h</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof121')">Proof.</span></div>
<div class="proofscript" id="proof121">
 <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-qperm_cons_rcons;</span> <span class="id">exact:</span> <span class="id"><a href="monae.fail_lib.html#refin_qperm_ret">refin_qperm_ret</a></span>. Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
</body>
</html>
