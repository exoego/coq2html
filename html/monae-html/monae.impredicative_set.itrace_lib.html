
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module monae.impredicative_set.itrace_lib</title>
<meta name="description" content="Documentation of Coq module monae.impredicative_set.itrace_lib" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">
<h1 class="title">Module monae.impredicative_set.itrace_lib</h1>
<div class="coq">
<span class="vernacular">Ltac</span> <span class="id">typeof</span> <span class="id">X</span> <span class="id">:=</span> <span class="id">type</span> <span class="id">of</span> <span class="id">X</span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id">ZArith</span>.<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id">all_ssreflect</span>.<br/>
<span class="vernacular">From</span> <span class="id">infotheo</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id">ssrZ</span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id">ihierarchy</span> <span class="id">imonad_lib</span>.<br/>
<br/>
<pre class="ssrdoc">
                    Example using the trace monad                          
</pre>
<br/>
<span class="gallina-kwd">Set</span> <span class="vernacular">Implicit</span> <span class="vernacular">Arguments</span>.<br/>
<span class="vernacular">Unset</span> <span class="vernacular">Strict</span> <span class="vernacular">Implicit</span>.<br/>
<span class="vernacular">Unset</span> <span class="vernacular">Printing</span> <span class="vernacular">Implicit</span> <span class="vernacular">Defensive</span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">monae_scope</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">marks</span> <span class="id">T</span> <span class="id">{M</span> <span class="id">:</span> <span class="id">traceMonad</span> <span class="id">T}</span> (<span class="id">l</span> <span class="id">:</span> <span class="id">seq</span> <span class="id">T</span>) <span class="id">:</span> <span class="id">M</span> (<span class="id">seq</span> <span class="id">unit</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">sequence</span> (<span class="id">map</span> <span class="id">mark</span> <span class="id">l</span>).<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">zarith_ext_scope</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">statetrace_program_equivalence_example</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">do_notation</span>.<br/>
<span class="vernacular">Variable</span> <span class="id">M</span> <span class="id">:</span> <span class="id">stateTraceMonad</span> <span class="id">Z</span> <span class="id">nat</span>.<br/>
<br/>
<span class="vernacular">Let</span> <span class="id">st_none1</span> <span class="id">:</span> <span class="id">M</span> <span class="id">Z</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">_</span> <span class="id">&lt;-</span> <span class="id">st_mark</span> <span class="id">'|0|;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">n</span> <span class="id">&lt;-</span> <span class="id">st_get;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">_</span> <span class="id">&lt;-</span> <span class="id">st_put</span> (<span class="id">n</span> <span class="id">+</span> <span class="id">1</span>)<span class="id">%Z;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">_</span> <span class="id">&lt;-</span> <span class="id">st_mark</span> <span class="id">'|n|;</span><br/>
&nbsp;&nbsp;<span class="id">Ret</span> <span class="id">n</span>.<br/>
<br/>
<span class="vernacular">Let</span> <span class="id">st_none2</span> <span class="id">:</span> <span class="id">M</span> <span class="id">Z</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">n</span> <span class="id">&lt;-</span> <span class="id">st_get;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">_</span> <span class="id">&lt;-</span> <span class="id">st_mark</span> <span class="id">'|0|;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">_</span> <span class="id">&lt;-</span> <span class="id">st_mark</span> <span class="id">'|n|;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">_</span> <span class="id">&lt;-</span> <span class="id">st_put</span> (<span class="id">n</span> <span class="id">+</span> <span class="id">1</span>)<span class="id">%Z;</span><br/>
&nbsp;&nbsp;<span class="id">Ret</span> <span class="id">n</span>.<br/>
<br/>
<span class="vernacular">Goal</span> <span class="id">st_none1</span> <span class="id">=</span> <span class="id">st_none2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
<span class="id">rewrite</span> <span class="id">/st_none1</span> <span class="id">/st_none2</span> <span class="id">st_getmark</span> <span class="id">bindA</span>.<br/>
<span class="id">bind_ext;</span> <span class="id">case</span>.<br/>
<span class="id">bind_ext</span> <span class="id">=&gt;</span> <span class="id">n</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">-bindA</span> <span class="id">st_putmark</span> <span class="id">bindA</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id">statetrace_program_equivalence_example</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">statetrace_example</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">do_notation</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">T</span> <span class="id">:</span> <span class="id">UU0</span>) (<span class="id">M</span> <span class="id">:</span> <span class="id">stateTraceMonad</span> <span class="id">Z</span> <span class="id">T</span>).<br/>
<span class="vernacular">Variables</span> (<span class="id">log0</span> <span class="id">log1</span> <span class="id">:</span> <span class="id">T</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">monadtrace_example</span> (<span class="id">m0</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">:</span> <span class="id">M</span> <span class="id">nat</span>) <span class="id">:</span> <span class="id">M</span> <span class="id">nat</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">x</span> <span class="id">&lt;-</span> <span class="id">m0;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">st_put</span> (<span class="id">Z_of_nat</span> <span class="id">x</span>) <span class="id">&gt;&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> <span class="id">y</span> <span class="id">&lt;-</span> <span class="id">st_get;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">st_mark</span> <span class="id">log0</span> <span class="id">&gt;&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> <span class="id">z</span> <span class="id">&lt;-</span> <span class="id">m2;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">st_mark</span> <span class="id">log1</span> <span class="id">&gt;&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Ret</span> (<span class="id">x</span> <span class="id">+</span> <span class="id">Z.abs_nat</span> <span class="id">y</span> <span class="id">+</span> <span class="id">z</span>).<br/>
<br/>
<span class="vernacular">End</span> <span class="id">statetrace_example</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">assoc</span> <span class="id">{A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">:</span> <span class="id">Type}</span> <span class="id">:</span> (<span class="id">A</span> <span class="id">*</span> <span class="id">B</span>) <span class="id">*</span> <span class="id">C</span> <span class="id">-&gt;</span> <span class="id">A</span> <span class="id">*</span> (<span class="id">B</span> <span class="id">*</span> <span class="id">C</span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span> <span class="id">x</span> <span class="id">=&gt;</span> (<span class="id">x</span>.<span class="id">1</span>.<span class="id">1,</span> (<span class="id">x</span>.<span class="id">1</span>.<span class="id">2,</span> <span class="id">x</span>.<span class="id">2</span>)).<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">assoc_inv</span> <span class="id">{A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">:</span> <span class="id">Type}</span> <span class="id">:</span> <span class="id">A</span> <span class="id">*</span> (<span class="id">B</span> <span class="id">*</span> <span class="id">C</span>) <span class="id">-&gt;</span> (<span class="id">A</span> <span class="id">*</span> <span class="id">B</span>) <span class="id">*</span> <span class="id">C</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span> <span class="id">x</span> <span class="id">=&gt;</span> ((<span class="id">x</span>.<span class="id">1,</span> <span class="id">x</span>.<span class="id">2</span>.<span class="id">1</span>)<span class="id">,</span> <span class="id">x</span>.<span class="id">2</span>.<span class="id">2</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">assoc_opt</span><br/>
&nbsp;&nbsp;<span class="id">{A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">:</span> <span class="id">Type}</span> (<span class="id">x</span> <span class="id">:</span> <span class="id">option</span> (<span class="id">A</span> <span class="id">*</span> <span class="id">B</span>) <span class="id">*</span> <span class="id">C</span>) <span class="id">:</span> <span class="id">option</span> (<span class="id">A</span> <span class="id">*</span> (<span class="id">B</span> <span class="id">*</span> <span class="id">C</span>)) <span class="id">:=</span><br/>
<span class="gallina-kwd">match</span> <span class="id">x</span> <span class="gallina-kwd">with</span><br/>
<span class="id">|</span> (<span class="id">None,</span> <span class="id">_</span>) <span class="id">=&gt;</span> <span class="id">None</span><br/>
<span class="id">|</span> (<span class="id">Some</span> (<span class="id">a,</span> <span class="id">b</span>)<span class="id">,</span> <span class="id">c</span>) <span class="id">=&gt;</span> <span class="id">Some</span> (<span class="id">a,</span> (<span class="id">b,</span> <span class="id">c</span>))<br/>
<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">relation_statetrace_state_trace</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">S</span> <span class="id">T</span> <span class="id">:</span> <span class="id">UU0</span>) (<span class="id">MN</span> <span class="id">:</span> <span class="id">stateTraceReifyMonad</span> <span class="id">S</span> <span class="id">T</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span class="id">st_get_get</span> (<span class="id">M</span> <span class="id">:</span> <span class="id">stateReifyMonad</span> <span class="id">S</span>) <span class="id">s</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">reify</span> (<span class="id">st_get</span> <span class="id">:</span> <span class="id">MN</span> <span class="id">_</span>) <span class="id">s</span> <span class="id">=</span> <span class="id">assoc_opt</span> (<span class="id">reify</span> (<span class="id">get</span> <span class="id">:</span> <span class="id">M</span> <span class="id">_</span>) <span class="id">s</span>.<span class="id">1,</span> <span class="id">s</span>.<span class="id">2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
 <span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">s1</span> <span class="id">s2;</span> <span class="id">rewrite</span> <span class="id">reifyget</span> <span class="id">reifystget</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span class="id">st_put_put</span> (<span class="id">M</span> <span class="id">:</span> <span class="id">stateReifyMonad</span> <span class="id">S</span>) <span class="id">s</span> <span class="id">s'</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">reify</span> (<span class="id">st_put</span> <span class="id">s'</span> <span class="id">:</span> <span class="id">MN</span> <span class="id">_</span>) <span class="id">s</span> <span class="id">=</span> <span class="id">assoc_opt</span> (<span class="id">reify</span> (<span class="id">put</span> <span class="id">s'</span> <span class="id">:</span> <span class="id">M</span> <span class="id">_</span>) <span class="id">s</span>.<span class="id">1,</span> <span class="id">s</span>.<span class="id">2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="gallina-kwd">by</span> <span class="id">case:</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id">s1</span> <span class="id">s2;</span> <span class="id">rewrite</span> <span class="id">reifyput</span> <span class="id">reifystput</span>. Qed.</div>
<br/>
<span class="vernacular">Fail</span> <span class="vernacular">Lemma</span> <span class="id">stMark_Mark</span> (<span class="id">M</span> <span class="id">:</span> <span class="id">traceReifyMonad</span> <span class="id">T</span>) <span class="id">s</span> <span class="id">t</span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">Reify</span> (<span class="id">stMark</span> <span class="id">t</span> <span class="id">:</span> <span class="id">MN</span> <span class="id">_</span>) <span class="id">s</span> <span class="id">=</span><br/>
<span class="gallina-kwd">let</span> <span class="id">x</span> <span class="id">:=</span> <span class="id">Reify</span> (<span class="id">Mark</span> <span class="id">t</span> <span class="id">:</span> <span class="id">M</span> <span class="id">_</span>) <span class="id">s</span>.<span class="id">2</span> <span class="gallina-kwd">in</span><br/>
<span class="gallina-kwd">match</span> <span class="id">x</span> <span class="gallina-kwd">with</span><br/>
<span class="id">|</span> <span class="id">None</span> <span class="id">=&gt;</span> <span class="id">None</span><br/>
<span class="id">|</span> <span class="id">Some</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">Some</span> (<span class="id">x</span>.<span class="id">1,</span> (<span class="id">s</span>.<span class="id">1,</span> <span class="id">x</span>.<span class="id">2</span>))<br/>
<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id">relation_statetrace_state_trace</span>.<br/>
<br/>
<span class="vernacular">Module</span> <span class="id">MonadTrans</span>.<br/>
<span class="vernacular">Structure</span> <span class="id">t</span> (<span class="id">m</span> <span class="id">:</span> <span class="id">monad</span>) (<span class="id">u</span> <span class="id">:</span> <span class="id">monad</span>) <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id">:=</span> <span class="id">Pack</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span class="id">lift</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span class="id">A,</span> <span class="id">m</span> <span class="id">A</span> <span class="id">-&gt;</span> <span class="id">u</span> <span class="id">A</span> <span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">drop</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span class="id">A,</span> <span class="id">u</span> <span class="id">A</span> <span class="id">-&gt;</span> <span class="id">m</span> <span class="id">A</span><br/>
<span class="id">}</span>.<br/>
<span class="vernacular">End</span> <span class="id">MonadTrans</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">MonadTrans.lift</span> <span class="id">{m}</span> <span class="id">{u}</span> <span class="id">_</span> <span class="id">{_}</span>.<br/>
<span class="vernacular">Arguments</span> <span class="id">MonadTrans.drop</span> <span class="id">{m}</span> <span class="id">{u}</span> <span class="id">_</span> <span class="id">{_}</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Notation</span> <span class="id">&quot;'Lift'&quot;</span> <span class="id">:=</span> <span class="id">MonadTrans.lift</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Notation</span> <span class="id">&quot;'Drop'&quot;</span> <span class="id">:=</span> <span class="id">MonadTrans.drop</span>.<br/>
<br/>
<span class="vernacular">Module</span> <span class="id">Tracer</span>.<br/>
<span class="vernacular">Record</span> <span class="id">class</span> <span class="id">m</span> (<span class="id">v</span> <span class="id">:</span> <span class="id">traceMonad</span> <span class="id">unit</span>) (<span class="id">mv</span> <span class="id">:</span> <span class="id">MonadTrans.t</span> <span class="id">m</span> <span class="id">v</span>) <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id">:=</span> <span class="vernacular">Class</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span class="id">lift_ret</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> (<span class="id">A</span> <span class="id">:</span> <span class="id">UU0</span>) (<span class="id">a</span> <span class="id">:</span> <span class="id">A</span>)<span class="id">,</span> <span class="id">Lift</span> <span class="id">mv</span> (<span class="id">Ret</span> <span class="id">a</span>) <span class="id">=</span> <span class="id">Ret</span> <span class="id">a</span> <span class="id">:&gt;</span> <span class="id">v</span> <span class="id">A</span> <span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">lift_bind</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span class="id">A</span> <span class="id">B</span> (<span class="id">m0</span> <span class="id">:</span> <span class="id">m</span> <span class="id">A</span>) (<span class="id">f</span> <span class="id">:</span> <span class="id">A</span> <span class="id">-&gt;</span> <span class="id">m</span> <span class="id">B</span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Lift</span> <span class="id">mv</span> (<span class="id">m0</span> <span class="id">&gt;&gt;=</span> <span class="id">f</span>) <span class="id">=</span> <span class="id">Lift</span> <span class="id">mv</span> <span class="id">m0</span> <span class="id">&gt;&gt;=</span> (<span class="id">@MonadTrans</span>.<span class="id">lift</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mv</span> <span class="id">_</span> <span class="id">\o</span> <span class="id">f</span>) <span class="id">:&gt;</span> <span class="id">v</span> <span class="id">B</span> <span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">drop_ret</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> (<span class="id">A</span> <span class="id">:</span> <span class="id">UU0</span>) (<span class="id">a</span> <span class="id">:</span> <span class="id">A</span>)<span class="id">,</span> <span class="id">Drop</span> <span class="id">mv</span> (<span class="id">Ret</span> <span class="id">a</span>) <span class="id">=</span> <span class="id">Ret</span> <span class="id">a</span> <span class="id">:&gt;</span> <span class="id">m</span> <span class="id">A</span> <span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">drop_bind</span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span class="id">A</span> <span class="id">B</span> (<span class="id">m0</span> <span class="id">:</span> <span class="id">v</span> <span class="id">B</span>) (<span class="id">f</span> <span class="id">:</span> <span class="id">B</span> <span class="id">-&gt;</span> <span class="id">v</span> <span class="id">A</span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Drop</span> <span class="id">mv</span> (<span class="id">m0</span> <span class="id">&gt;&gt;=</span> <span class="id">f</span>) <span class="id">=</span> <span class="id">Drop</span> <span class="id">mv</span> <span class="id">m0</span> <span class="id">&gt;&gt;=</span> (<span class="id">@MonadTrans</span>.<span class="id">drop</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mv</span> <span class="id">_</span> <span class="id">\o</span> <span class="id">f</span>) <span class="id">:&gt;</span> <span class="id">m</span> <span class="id">A</span> <span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">drop_mark</span> <span class="id">:</span> <span class="id">Drop</span> <span class="id">mv</span> (<span class="id">mark</span> <span class="id">tt</span>) <span class="id">=</span> <span class="id">Ret</span> <span class="id">tt</span><br/>
<span class="id">}</span>.<br/>
<span class="vernacular">Structure</span> <span class="id">t</span> <span class="id">:=</span> <span class="id">Pack</span> <span class="id">{</span> <span class="id">m</span> <span class="id">:</span> <span class="id">monad</span> <span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">v</span> <span class="id">:</span> <span class="id">traceMonad</span> <span class="id">unit</span> <span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mv</span> <span class="id">:</span> <span class="id">MonadTrans.t</span> <span class="id">m</span> <span class="id">v</span> <span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">class_of</span> <span class="id">:</span> <span class="id">class</span> <span class="id">mv</span> <span class="id">}</span>.<br/>
<span class="vernacular">End</span> <span class="id">Tracer</span>.<br/>
<span class="vernacular">Coercion</span> <span class="id">Tracer.mv</span> <span class="id">:</span> <span class="id">Tracer.t</span> <span class="id">&gt;-&gt;</span> <span class="id">MonadTrans.t</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span class="id">tracer_example</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">do_notation</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">M</span> <span class="id">:</span> <span class="id">Tracer.t</span>).<br/>
<span class="vernacular">Let</span> <span class="id">v</span> <span class="id">:</span> <span class="id">traceMonad</span> <span class="id">unit</span> <span class="id">:=</span> <span class="id">Tracer.v</span> <span class="id">M</span>.<br/>
<span class="vernacular">Let</span> <span class="id">m</span> <span class="id">:</span> <span class="id">monad</span> <span class="id">:=</span> <span class="id">Tracer.m</span> <span class="id">M</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span class="id">tracer_example</span> (<span class="id">m0</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">:</span> <span class="id">m</span> <span class="id">nat</span>) <span class="id">:</span> <span class="id">v</span> <span class="id">_</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">x</span> <span class="id">&lt;-</span> <span class="id">Lift</span> <span class="id">M</span> <span class="id">m0;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">y</span> <span class="id">&lt;-</span> <span class="id">Lift</span> <span class="id">M</span> <span class="id">m1;</span><br/>
&nbsp;&nbsp;<span class="id">mark</span> <span class="id">tt</span> <span class="id">&gt;&gt;</span><br/>
&nbsp;&nbsp;<span class="id">do</span> <span class="id">z</span> <span class="id">&lt;-</span> <span class="id">Lift</span> <span class="id">M</span> <span class="id">m2;</span><br/>
&nbsp;&nbsp;<span class="id">Ret</span> (<span class="id">x</span> <span class="id">+</span> <span class="id">y</span> <span class="id">+</span> <span class="id">z</span>).<br/>
<br/>
<span class="vernacular">End</span> <span class="id">tracer_example</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
</body>
</html>
