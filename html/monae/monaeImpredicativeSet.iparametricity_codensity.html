
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module monaeImpredicativeSet.iparametricity_codensity</title>
<meta name="description" content="Documentation of Coq module monaeImpredicativeSet.iparametricity_codensity" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="monae"><summary>monae</summary>
          <ul>
          <li><a href="monae.altprob_model.html">altprob_model</a></li>
<li><a href="monae.array_lib.html">array_lib</a></li>
<li><a href="monae.category.html">category</a></li>
<li><a href="monae.category_ext.html">category_ext</a></li>
<li><a href="monae.example_iquicksort.html">example_iquicksort</a></li>
<li><a href="monae.example_monty.html">example_monty</a></li>
<li><a href="monae.example_nqueens.html">example_nqueens</a></li>
<li><a href="monae.example_quicksort.html">example_quicksort</a></li>
<li><a href="monae.example_relabeling.html">example_relabeling</a></li>
<li><a href="monae.example_spark.html">example_spark</a></li>
<li><a href="monae.example_transformer.html">example_transformer</a></li>
<li><a href="monae.example_typed_store.html">example_typed_store</a></li>
<li><a href="monae.fail_lib.html">fail_lib</a></li>
<li><a href="monae.gcm_model.html">gcm_model</a></li>
<li><a href="monae.hierarchy.html">hierarchy</a></li>
<li><a href="monae.monad_composition.html">monad_composition</a></li>
<li><a href="monae.monad_lib.html">monad_lib</a></li>
<li><a href="monae.monad_model.html">monad_model</a></li>
<li><a href="monae.monad_transformer.html">monad_transformer</a></li>
<li><a href="monae.monae_lib.html">monae_lib</a></li>
<li><a href="monae.proba_lib.html">proba_lib</a></li>
<li><a href="monae.proba_monad_model.html">proba_monad_model</a></li>
<li><a href="monae.smallstep.html">smallstep</a></li>
<li><a href="monae.state_lib.html">state_lib</a></li>
<li><a href="monae.trace_lib.html">trace_lib</a></li>
<li><a href="monae.typed_store_lib.html">typed_store_lib</a></li>
<li><a href="monae.typed_store_model.html">typed_store_model</a></li>
          </ul>
          </details>
          </li>
<li><details id="monaeImpredicativeSet"><summary>monaeImpredicativeSet</summary>
          <ul>
          <li><a href="monaeImpredicativeSet.iexample_transformer.html">iexample_transformer</a></li>
<li><a href="monaeImpredicativeSet.ifail_lib.html">ifail_lib</a></li>
<li><a href="monaeImpredicativeSet.ifmt_lifting.html">ifmt_lifting</a></li>
<li><a href="monaeImpredicativeSet.ihierarchy.html">ihierarchy</a></li>
<li><a href="monaeImpredicativeSet.imonad_composition.html">imonad_composition</a></li>
<li><a href="monaeImpredicativeSet.imonad_lib.html">imonad_lib</a></li>
<li><a href="monaeImpredicativeSet.imonad_model.html">imonad_model</a></li>
<li><a href="monaeImpredicativeSet.imonad_transformer.html">imonad_transformer</a></li>
<li><a href="monaeImpredicativeSet.imonae_lib.html">imonae_lib</a></li>
<li><a href="monaeImpredicativeSet.iparametricity_codensity.html">iparametricity_codensity</a></li>
<li><a href="monaeImpredicativeSet.istate_lib.html">istate_lib</a></li>
<li><a href="monaeImpredicativeSet.itrace_lib.html">itrace_lib</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module monaeImpredicativeSet.iparametricity_codensity</h1>
<span class="vernacular">From</span> <span class="id">Param</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="NOTFOUND the module url for Param.Param">Param</a></span>.<br/>
<br/>
<span class="vernacular">From</span> <span class="id">mathcomp</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://math-comp.github.io/htmldoc_1_18_0/mathcomp.ssreflect.all_ssreflect.html">all_ssreflect</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">HB</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="NOTFOUND the module url for HB.structures">structures</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="monaeImpredicativeSet.imonae_lib.html">imonae_lib</a></span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html">ihierarchy</a></span> <span class="id"><a href="monaeImpredicativeSet.imonad_lib.html">imonad_lib</a></span> <span class="id"><a href="monaeImpredicativeSet.ifmt_lifting.html">ifmt_lifting</a></span> <span class="id"><a href="monaeImpredicativeSet.imonad_model.html">imonad_model</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Instantiations of uniform lifting (Theorem 27 of [Mauro Jaskelioff,        
Modular Monad Transformers, ESOP 2009]) with:                              
- the identity monad (Module Identity)                                     
- the exception monad (Module Exception)                                   
- the option monad (Module Option)                                         
- the list monad (Module List)                                             
- the state monad (Module State)                                           
                                                                           
WARNING: see fmt_lifting.v                                                 
</pre>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">monae_scope</span>.<br/>
<br/>
<span class="gallina-kwd">Set</span> <span class="id">Bullet</span> <span class="id">Behavior</span> <span class="id">&quot;Strict Subproofs&quot;</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Actm_exponenial_FE" class="id"><a name="Actm_exponenial_FE" class="">Actm_exponenial_FE</a></span> (<span id="M:1" class="id"><a name="M:1" class="">M</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#Monad.Exports.monad">monad</a></span>) (<span id="X:2" class="id"><a name="X:2" class="">X</a></span> <span id="Y:3" class="id"><a name="Y:3" class="">Y</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#UU0">UU0</a></span>) (<span id="f:4" class="id"><a name="f:4" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#X:2">X</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Y:3">Y</a></span>) <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:5" class="id"><a name="A:5" class="">A</a></span> <span id="eX:6" class="id"><a name="eX:6" class="">eX,</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#dd4e793ea9d0dbe0a320346aa74c809d">[the</a></span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#Functor.Exports.functor">functor</a></span> <span class="id">of</span> (<span class="id"><a href="monaeImpredicativeSet.imonad_lib.html#exponential_F">exponential_F</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#A:5">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#M:1">M</a></span>)<span class="id">]</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#5ffd50877ab4fcdc0107cf881b980bc8">#</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#f:4">f</a></span>) <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#eX:6">eX</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#M:1">M</a></span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#5ffd50877ab4fcdc0107cf881b980bc8">#</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#f:4">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#eX:6">eX</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
 <span class="gallina-kwd">by</span> <span class="id">[]</span>. Qed.</div>
<br/>
<pre class="ssrdoc">
Module Identity.
Section identity_naturality.
Variable A : UU0.
Realizer A as A_R := (@eq A).
Let M := [the monad of idfun].
Definition Mi (X : UU0) : UU0 := ltac:(
  let t := constr:(M X) in
  let t := eval cbn in t in
  exact t).
Definition T : UU0 := MK Mi A.
Parametricity T arity 2.
Variable m : T.
Axiom param : T_R m m.
Lemma naturality : naturality [the functor of (exponential_F A \o M)] M m.
Proof.
move=&gt; X Y f; apply funext =&gt; eX.
by apply (param X Y (fun x y =&gt; (M # f) x = y)) =&gt; a _ &lt;-.
Qed.
End identity_naturality.
End Identity.
Check uniform_sigma_lifting (M := [the monad of idfun]) _ _ Identity.naturality.
</pre>
<br/>
<span class="vernacular">Module</span> <span id="Exception" class="id"><a name="Exception" class="">Exception</a></span>.<br/>
<span class="vernacular">Section</span> <span id="Exception.exception_naturality" class="id"><a name="Exception.exception_naturality" class="">exception_naturality</a></span>.<br/>
<span class="vernacular">Variables</span> <span id="Exception.exception_naturality.Z" class="id"><a name="Exception.exception_naturality.Z" class="">Z</a></span> <span id="Exception.exception_naturality.A" class="id"><a name="Exception.exception_naturality.A" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#UU0">UU0</a></span>.<br/>
<br/>
<span class="id">Realizer</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.Z">Z</a></span> <span class="gallina-kwd">as</span> <span class="id">Z_R</span> <span class="id">:=</span> (@<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.Z">Z</a></span>).<br/>
<span class="id">Realizer</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.A">A</a></span> <span class="gallina-kwd">as</span> <span class="id">A_R</span> <span class="id">:=</span> (@<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.A">A</a></span>).<br/>
<br/>
<span class="vernacular">Let</span> <span id="Exception.exception_naturality.M" class="id"><a name="Exception.exception_naturality.M" class="">M</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#dd4e793ea9d0dbe0a320346aa74c809d">[the</a></span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#Monad.Exports.monad">monad</a></span> <span class="id">of</span> <span class="id"><a href="monaeImpredicativeSet.imonad_model.html#ExceptMonad.acto">ExceptMonad.acto</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.Z">Z]</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Exception.Me" class="id"><a name="Exception.Me" class="">Me</a></span> (<span id="X:17" class="id"><a name="X:17" class="">X</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#UU0">UU0</a></span>) <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#UU0">UU0</a></span> <span class="id">:=</span> <span class="id">ltac:</span>(<br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span class="id">t</span> <span class="id">:=</span> <span class="id">constr:</span>(<span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.M">M</a></span> <span class="id">X</span>) <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span class="id">t</span> <span class="id">:=</span> <span class="id">eval</span> <span class="id">cbn</span> <span class="gallina-kwd">in</span> <span class="id">t</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id">t</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Exception.T" class="id"><a name="Exception.T" class="">T</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#UU0">UU0</a></span> <span class="id">:=</span> <span class="id"><a href="monaeImpredicativeSet.ifmt_lifting.html#MK">MK</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.Me">Me</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.A">A</a></span>.<br/>
<br/>
<span class="id">Parametricity</span> <span class="id">Recursive</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.T">T</a></span> <span class="id">arity</span> <span class="id">2</span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Exception.exception_naturality.m" class="id"><a name="Exception.exception_naturality.m" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.T">T</a></span>.<br/>
<br/>
<span class="vernacular">Axiom</span> <span id="Exception.param" class="id"><a name="Exception.param" class="">param</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.T_R">T_R</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.m">m</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.m">m</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Exception.naturality" class="id"><a name="Exception.naturality" class="">naturality</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#naturality">naturality</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#dd4e793ea9d0dbe0a320346aa74c809d">[the</a></span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#Functor.Exports.functor">functor</a></span> <span class="id">of</span> (<span class="id"><a href="monaeImpredicativeSet.imonad_lib.html#exponential_F">exponential_F</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.M">M</a></span>)<span class="id">]</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.M">M</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.m">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
<span class="id">move=&gt;</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">f;</span> <span class="id">apply</span> <span class="id"><a href="monaeImpredicativeSet.imonae_lib.html#funext">funext</a></span> <span class="id">=&gt;</span> <span class="id">eX</span>.<br/>
<span class="id">set</span> <span class="id">rhs</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>.<br/>
<span class="id">have</span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.Me_R">Me_R</a></span> <span class="id">X</span> <span class="id">Y</span> (<span class="gallina-kwd">fun</span> <span id="x:20" class="id"><a name="x:20" class="">x</a></span> <span id="y:21" class="id"><a name="y:21" class="">y</a></span> <span class="id">=&gt;</span> <span class="id">f</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#x:20">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#y:21">y</a></span>) (<span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality.m">m</a></span> <span class="id">X</span> <span class="id">eX</span>) <span class="id">rhs</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.param">param</a></span> <span class="id">=&gt;</span> <span class="id">a</span> <span class="id">_</span> <span class="id">&lt;-;</span> <span class="id">rewrite</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Actm_exponenial_FE">Actm_exponenial_FE</a></span> <span class="id"><a href="monaeImpredicativeSet.imonae_lib.html#compE">compE</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">case:</span> (<span class="id">eX</span> <span class="id">a</span>) <span class="id">=&gt;</span> <span class="id">[e|x];</span> <span class="id">constructor</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monaeImpredicativeSet.imonae_lib.html#compE">compE;</a></span> <span class="id">case=&gt;</span> <span class="id">[a</span> <span class="id">_</span> <span class="id">&lt;-|x</span> <span class="id">_</span> <span class="id">&lt;-]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception.exception_naturality">exception_naturality</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Exception">Exception</a></span>.<br/>
<br/>
<span class="vernacular">Check</span> <span class="gallina-kwd">fun</span> <span id="Z:22" class="id"><a name="Z:22" class="">Z</a></span> <span class="id">=&gt;</span> <span class="id"><a href="monaeImpredicativeSet.ifmt_lifting.html#uniform_sigma_lifting">uniform_sigma_lifting</a></span><br/>
&nbsp;&nbsp;(<span class="id">M</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#dd4e793ea9d0dbe0a320346aa74c809d">[the</a></span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#Monad.Exports.monad">monad</a></span> <span class="id">of</span> <span class="id"><a href="monaeImpredicativeSet.imonad_model.html#ExceptMonad.acto">ExceptMonad.acto</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Z:22">Z]</a></span>) <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#naturality">Exception.naturality</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Z:22">Z</a></span>).<br/>
<br/>
<pre class="ssrdoc">
Module Option.
Section option_naturality.
Variable A : UU0.
Let M := [the monad of option_monad].
Variable m : MK M A.
Lemma naturality : naturality [the functor of (exponential_F A \o M)] M m.
Proof. exact: Exception.naturality. Qed.
End option_naturality.
End Option.
Check uniform_sigma_lifting (M := [the monad of option_monad]) _ _ Option.naturality.
</pre>
<br/>
<span class="vernacular">Module</span> <span id="List" class="id"><a name="List" class="">List</a></span>.<br/>
<span class="vernacular">Section</span> <span id="List.list_naturality" class="id"><a name="List.list_naturality" class="">list_naturality</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="List.list_naturality.A" class="id"><a name="List.list_naturality.A" class="">A</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#UU0">UU0</a></span>.<br/>
<br/>
<span class="id">Realizer</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality.A">A</a></span> <span class="gallina-kwd">as</span> <span class="id">A_R</span> <span class="id">:=</span> (@<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality.A">A</a></span>).<br/>
<br/>
<span class="vernacular">Let</span> <span id="List.list_naturality.M" class="id"><a name="List.list_naturality.M" class="">M</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#dd4e793ea9d0dbe0a320346aa74c809d">[the</a></span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#Monad.Exports.monad">monad</a></span> <span class="id">of</span> <span class="id"><a href="monaeImpredicativeSet.imonad_model.html#ListMonad.acto">ListMonad.acto</a></span><span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#dd4e793ea9d0dbe0a320346aa74c809d">]</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="List.Ml" class="id"><a name="List.Ml" class="">Ml</a></span> (<span id="X:26" class="id"><a name="X:26" class="">X</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#UU0">UU0</a></span>) <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#UU0">UU0</a></span> <span class="id">:=</span> <span class="id">ltac:</span>(<br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span class="id">t</span> <span class="id">:=</span> <span class="id">constr:</span>(<span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality.M">M</a></span> <span class="id">X</span>) <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span class="id">t</span> <span class="id">:=</span> <span class="id">eval</span> <span class="id">cbn</span> <span class="gallina-kwd">in</span> <span class="id">t</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id">t</span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="List.T" class="id"><a name="List.T" class="">T</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#UU0">UU0</a></span> <span class="id">:=</span> <span class="id"><a href="monaeImpredicativeSet.ifmt_lifting.html#MK">MK</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.Ml">Ml</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality.A">A</a></span>.<br/>
<br/>
<span class="id">Parametricity</span> <span class="id">Recursive</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.T">T</a></span> <span class="id">arity</span> <span class="id">2</span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="List.list_naturality.m" class="id"><a name="List.list_naturality.m" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.T">T</a></span>.<br/>
<br/>
<span class="vernacular">Axiom</span> <span id="List.param" class="id"><a name="List.param" class="">param</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.T_R">T_R</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality.m">m</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality.m">m</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="List.naturality" class="id"><a name="List.naturality" class="">naturality</a></span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#naturality">naturality</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#dd4e793ea9d0dbe0a320346aa74c809d">[the</a></span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#Functor.Exports.functor">functor</a></span> <span class="id">of</span> (<span class="id"><a href="monaeImpredicativeSet.imonad_lib.html#exponential_F">exponential_F</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e">\o</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality.M">M</a></span>)<span class="id">]</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality.M">M</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality.m">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
<span class="id">move=&gt;</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">f</span> <span class="id">/=;</span> <span class="id">apply</span> <span class="id"><a href="monaeImpredicativeSet.imonae_lib.html#funext">funext</a></span> <span class="id">=&gt;</span> <span class="id">eX</span>.<br/>
<span class="id">set</span> <span class="id">rhs</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>.<br/>
<span class="id">have</span> <span class="id">:</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.Ml_R">Ml_R</a></span> <span class="id">X</span> <span class="id">Y</span> (<span class="gallina-kwd">fun</span> <span id="x:29" class="id"><a name="x:29" class="">x</a></span> <span id="y:30" class="id"><a name="y:30" class="">y</a></span> <span class="id">=&gt;</span> <span class="id">f</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#x:29">x</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#y:30">y</a></span>) (<span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality.m">m</a></span> <span class="id">X</span> <span class="id">eX</span>) <span class="id">rhs</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.param">param</a></span> <span class="id">=&gt;</span> <span class="id">a</span> <span class="id">_</span> <span class="id">&lt;-;</span> <span class="id">rewrite</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#Actm_exponenial_FE">Actm_exponenial_FE</a></span> <span class="id"><a href="monaeImpredicativeSet.imonae_lib.html#compE">compE</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> <span class="id">elim:</span> (<span class="id">eX</span> <span class="id">a</span>) <span class="id">=&gt;</span> <span class="id">[|?</span> <span class="id">?</span> <span class="id">?];</span> <span class="id">constructor</span>.<br/>
<span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="monaeImpredicativeSet.imonae_lib.html#compE">compE;</a></span> <span class="id">elim</span> <span class="id">=&gt;</span> <span class="id">//</span> <span class="id">x</span> <span class="id">_</span> <span class="id">&lt;-</span> <span class="id">l</span> <span class="id">_</span> <span class="id">_</span> <span class="id">&lt;-</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List.list_naturality">list_naturality</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#List">List</a></span>.<br/>
<br/>
<span class="vernacular">Check</span> <span class="id"><a href="monaeImpredicativeSet.ifmt_lifting.html#uniform_sigma_lifting">uniform_sigma_lifting</a></span> (<span class="id">M</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#dd4e793ea9d0dbe0a320346aa74c809d">[the</a></span> <span class="id"><a href="monaeImpredicativeSet.ihierarchy.html#Monad.Exports.monad">monad</a></span> <span class="id">of</span> <span class="id"><a href="monaeImpredicativeSet.imonad_model.html#ListMonad.acto">ListMonad.acto</a></span><span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#dd4e793ea9d0dbe0a320346aa74c809d">]</a></span>) <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="monaeImpredicativeSet.iparametricity_codensity.html#naturality">List.naturality</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Module State.
Section state_naturality.
Variable S A : UU0.
Realizer S as S_R := (@eq S).
Realizer A as A_R := (@eq A).
Let M := [the monad of StateMonad.acto S].
Definition Ms X : UU0 := ltac:(
  let t := constr:(M X) in
  let t := eval cbn in t in
  exact t).
Definition T : UU0 := MK Ms A.
Parametricity Recursive T arity 2.
Variable m : T.
Axiom param : T_R m m.
Lemma Actm_ModelMonadStateE' (X Y : UU0) (f : X -&gt; Y) (eX : (exponential_F A \o M) X) a (s : S):
  (M # f \o eX) a s = let (x, y) := eX a s in (f x, y).
Proof. by []. Qed.
Lemma Actm_ModelMonadStateE (X Y : UU0) (f : X -&gt; Y) (eX : A -&gt; S -&gt; (X * S)) (s : S)
  (mX : (A -&gt; Ms X) -&gt; Ms X) :
  (M # f \o mX) eX s = (let (x, y) := mX eX s in (f x, y)).
Proof. by []. Qed.
Lemma naturality : naturality [the functor of (exponential_F A \o M)] M m.
Proof.
move=&gt; X Y f; apply funext =&gt; eX.
set rhs := RHS.
have H : Ms_R X Y (fun x y =&gt; f x = y) (m X eX) rhs.
  apply param =&gt; // a _ &lt;- s1 _ &lt;-.
  rewrite Actm_exponenial_FE Actm_ModelMonadStateE'.
  by case: (eX a) =&gt; x s2; exact: prod_R_pair_R.
apply funext =&gt; s.
have {}H : prod_R X Y (fun x y =&gt; f x = y) S S S_R (m X eX s) (rhs s) by exact: H.
inversion H as [x y fxy s1 s2 s12 xs1 ys2].
by rewrite Actm_ModelMonadStateE -xs1 fxy s12.
Qed.
End state_naturality.
End State.
Check fun S =&gt; uniform_sigma_lifting
  (M := [the monad of StateMonad.acto S]) _ _ (State.naturality S).
</pre>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
