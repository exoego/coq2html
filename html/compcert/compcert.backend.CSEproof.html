
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module CSEproof</title>
<meta name="description" content="Documentation of Coq module CSEproof" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module CSEproof</h1>
<br/>
<div class="doc">Correctness proof for common subexpression elimination. </div>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span> <span class="id"><a href="compcert.lib.Lattice.html">Lattice</a></span> <span class="id"><a href="compcert.backend.Kildall.html">Kildall</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="compcert.common.Builtins.html">Builtins</a></span> <span class="id"><a href="compcert.common.Events.html">Events</a></span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="compcert.common.Smallstep.html">Smallstep</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span> <span class="id"><a href="compcert.backend.Registers.html">Registers</a></span> <span class="id"><a href="compcert.backend.RTL.html">RTL</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.ValueDomain.html">ValueDomain</a></span> <span class="id"><a href="compcert.x86.ValueAOp.html">ValueAOp</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.CSEdomain.html">CSEdomain</a></span> <span class="id"><a href="compcert.x86.CombineOp.html">CombineOp</a></span> <span class="id"><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></span> <span class="id"><a href="compcert.backend.CSE.html">CSE</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="match_prog" class="id"><a name="match_prog" class="">match_prog</a></span> (<span id="prog:1" class="id"><a name="prog:1" class="">prog</a></span> <span id="tprog:2" class="id"><a name="tprog:2" class="">tprog:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">RTL.program</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#match_program">match_program</a></span> (<span class="gallina-kwd">fun</span> <span id="cu:3" class="id"><a name="cu:3" class="">cu</a></span> <span id="f:4" class="id"><a name="f:4" class="">f</a></span> <span id="tf:5" class="id"><a name="tf:5" class="">tf</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:3">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f:4">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf:5">tf</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#prog:1">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tprog:2">tprog</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="transf_program_match" class="id"><a name="transf_program_match" class="">transf_program_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="prog:6" class="id"><a name="prog:6" class="">prog</a></span> <span id="tprog:7" class="id"><a name="tprog:7" class="">tprog,</a></span> <span class="id"><a href="compcert.backend.CSE.html#transf_program">transf_program</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#prog:6">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tprog:7">tprog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#prog:6">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tprog:7">tprog</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Linking.html#match_transform_partial_program_contextual">match_transform_partial_program_contextual;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Soundness of operations over value numberings </h1>
<br/>
<span class="vernacular">Remark</span> <span id="wf_equation_incr" class="id"><a name="wf_equation_incr" class="">wf_equation_incr:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="next1:8" class="id"><a name="next1:8" class="">next1</a></span> <span id="next2:9" class="id"><a name="next2:9" class="">next2</a></span> <span id="e:10" class="id"><a name="e:10" class="">e,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next1:8">next1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e:10">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next1:8">next1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next2:9">next2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next2:9">next2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e:10">e</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation;</a></span> <span class="id">intros;</span> <span class="id">destruct</span> <span class="id">e</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">next1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">next1;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Extensionality with respect to valuations. </div>
<br/>
<span class="vernacular">Definition</span> <span id="valu_agree" class="id"><a name="valu_agree" class="">valu_agree</a></span> (<span id="valu1:11" class="id"><a name="valu1:11" class="">valu1</a></span> <span id="valu2:12" class="id"><a name="valu2:12" class="">valu2:</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#valuation">valuation</a></span>) (<span id="upto:13" class="id"><a name="upto:13" class="">upto:</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:14" class="id"><a name="v:14" class="">v,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:14">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#upto:13">upto</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2:12">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:14">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1:11">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:14">v</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="EXTEN" class="id"><a name="EXTEN" class="">EXTEN</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="EXTEN.valu1" class="id"><a name="EXTEN.valu1" class="">valu1:</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#valuation">valuation</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="EXTEN.upto" class="id"><a name="EXTEN.upto" class="">upto:</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="EXTEN.valu2" class="id"><a name="EXTEN.valu2" class="">valu2:</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#valuation">valuation</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="EXTEN.AGREE" class="id"><a name="EXTEN.AGREE" class="">AGREE:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu_agree">valu_agree</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.upto">upto</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="EXTEN.ge" class="id"><a name="EXTEN.ge" class="">ge:</a></span> <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="EXTEN.sp" class="id"><a name="EXTEN.sp" class="">sp:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="EXTEN.rs" class="id"><a name="EXTEN.rs" class="">rs:</a></span> <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="EXTEN.m" class="id"><a name="EXTEN.m" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="valnums_val_exten" class="id"><a name="valnums_val_exten" class="">valnums_val_exten:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="vl:23" class="id"><a name="vl:23" class="">vl,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="v:24" class="id"><a name="v:24" class="">v,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:24">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:23">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:24">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.upto">upto</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:23">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:23">vl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_map_exten">list_map_exten</a></span>. <span class="id">intros</span>. <span class="id">symmetry</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="rhs_eval_to_exten" class="id"><a name="rhs_eval_to_exten" class="">rhs_eval_to_exten:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:25" class="id"><a name="r:25" class="">r</a></span> <span id="v:26" class="id"><a name="v:26" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:25">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:26">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="v:27" class="id"><a name="v:27" class="">v,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:27">v</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#valnums_rhs">valnums_rhs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:25">r</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:27">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.upto">upto</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:25">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:26">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">constructor</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnums_val_exten">valnums_val_exten</a></span> <span class="gallina-kwd">by</span> <span class="id">assumption</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnums_val_exten">valnums_val_exten</a></span> <span class="gallina-kwd">by</span> <span class="id">assumption</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="equation_holds_exten" class="id"><a name="equation_holds_exten" class="">equation_holds_exten:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e:28" class="id"><a name="e:28" class="">e,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#equation_holds">equation_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e:28">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.upto">upto</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e:28">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#equation_holds">equation_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e:28">e</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">e</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
<span class="id">-</span> <span class="id">constructor</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.AGREE">AGREE</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs_eval_to_exten">rhs_eval_to_exten;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">econstructor</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs_eval_to_exten">rhs_eval_to_exten;</a></span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.AGREE">AGREE</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="numbering_holds_exten" class="id"><a name="numbering_holds_exten" class="">numbering_holds_exten:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:29" class="id"><a name="n:29" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:29">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:29">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.upto">upto</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:29">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#equation_holds_exten">equation_holds_exten</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#wf_equation_incr">wf_equation_incr;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.AGREE">AGREE</a></span>. <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_reg">wf_num_reg;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN">EXTEN</a></span>.<br/>
<br/>
<span class="vernacular">Ltac</span> <span class="id">splitall</span> <span class="id">:=</span> <span class="id">repeat</span> (<span class="gallina-kwd">match</span> <span class="id">goal</span> <span class="gallina-kwd">with</span> <span class="id">|-</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">split</span> <span class="gallina-kwd">end</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="valnum_reg_holds" class="id"><a name="valnum_reg_holds" class="">valnum_reg_holds:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu1:30" class="id"><a name="valu1:30" class="">valu1</a></span> <span id="ge:31" class="id"><a name="ge:31" class="">ge</a></span> <span id="sp:32" class="id"><a name="sp:32" class="">sp</a></span> <span id="rs:33" class="id"><a name="rs:33" class="">rs</a></span> <span id="m:34" class="id"><a name="m:34" class="">m</a></span> <span id="n:35" class="id"><a name="n:35" class="">n</a></span> <span id="r:36" class="id"><a name="r:36" class="">r</a></span> <span id="n':37" class="id"><a name="n':37" class="">n'</a></span> <span id="v:38" class="id"><a name="v:38" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1:30">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:31">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:32">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:33">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:34">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:35">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#valnum_reg">valnum_reg</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:35">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:36">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#n':37">n',</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:38">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="valu2:39" class="id"><a name="valu2:39" class="">valu2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2:39">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:31">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:32">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:33">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:34">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n':37">n'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:33">rs#r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2:39">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:38">v</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.CSEproof.html#valu_agree">valu_agree</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1:30">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2:39">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:35">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:38">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n':37">n'</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:35">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#n':37">n'</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#valnum_reg">valnum_reg;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_reg">num_reg</a></span> <span class="id">n</span>)<span class="id">!r</span> <span class="gallina-kwd">as</span> <span class="id">[v'|]</span> <span class="id">eqn:NR</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H0</span>. <span class="gallina-kwd">exists</span> <span class="id">valu1;</span> <span class="id">splitall</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">red;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">valu2</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="vn:41" class="id"><span id="vn:40" class="id"><a name="vn:41" class="">vn</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vn:40">vn</a></span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="gallina-kwd">then</span> <span class="id">rs#r</span> <span class="gallina-kwd">else</span> <span class="id">valu1</span> <span class="id"><a href="compcert.backend.CSEproof.html#vn:40">vn</a></span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">AG:</span> <span class="id"><a href="compcert.backend.CSEproof.html#valu_agree">valu_agree</a></span> <span class="id">valu1</span> <span class="id">valu2</span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">unfold</span> <span class="id">valu2</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_false">peq_false</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne;</a></span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">valu2;</span> <span class="id">splitall</span>.<br/>
<span class="id">+</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">*</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#wf_equation_incr">wf_equation_incr</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id">n</span>). <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">v</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id">r0</span> <span class="gallina-kwd">with</span> <span class="id">r</span> <span class="gallina-kwd">by</span> (<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">intuition</span>). <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>. <span class="id">subst;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>. <span class="id">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">auto</span>.<br/>
<span class="id">*</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#equation_holds_exten">equation_holds_exten;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">*</span> <span class="id">unfold</span> <span class="id">valu2</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_false">peq_false</a></span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">+</span> <span class="id">unfold</span> <span class="id">valu2</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true;</a></span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">extlia</span>.<br/>
<span class="id">+</span> <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="valnum_regs_holds" class="id"><a name="valnum_regs_holds" class="">valnum_regs_holds:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rl:42" class="id"><a name="rl:42" class="">rl</a></span> <span id="valu1:43" class="id"><a name="valu1:43" class="">valu1</a></span> <span id="ge:44" class="id"><a name="ge:44" class="">ge</a></span> <span id="sp:45" class="id"><a name="sp:45" class="">sp</a></span> <span id="rs:46" class="id"><a name="rs:46" class="">rs</a></span> <span id="m:47" class="id"><a name="m:47" class="">m</a></span> <span id="n:48" class="id"><a name="n:48" class="">n</a></span> <span id="n':49" class="id"><a name="n':49" class="">n'</a></span> <span id="vl:50" class="id"><a name="vl:50" class="">vl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1:43">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:44">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:45">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:46">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:47">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:48">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:48">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl:42">rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#n':49">n',</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:50">vl</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="valu2:51" class="id"><a name="valu2:51" class="">valu2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2:51">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:44">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:45">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:46">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:47">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n':49">n'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:46">rs##rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2:51">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:50">vl</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.CSEproof.html#valu_agree">valu_agree</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1:43">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2:51">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:48">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="v:52" class="id"><a name="v:52" class="">v,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:52">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:50">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:52">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n':49">n'</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>))<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:48">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#n':49">n'</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">rl;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H0</span>. <span class="gallina-kwd">exists</span> <span class="id">valu1;</span> <span class="id">splitall;</span> <span class="id">auto</span>. <span class="id">red;</span> <span class="id">auto</span>. <span class="id">simpl;</span> <span class="id">tauto</span>. <span class="id">extlia</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_reg">valnum_reg</a></span> <span class="id">n</span> <span class="id">a</span>) <span class="gallina-kwd">as</span> <span class="id">[n1</span> <span class="id">v1]</span> <span class="id">eqn:V1</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">n1</span> <span class="id">rl</span>) <span class="gallina-kwd">as</span> <span class="id">[n2</span> <span class="id">vs]</span> <span class="id">eqn:V2</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_reg_holds">valnum_reg_holds;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">valu2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">IHrl</span> <span class="id">valu2</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">valu3</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span> &amp; <span class="id">S</span> &amp; <span class="id">T</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">valu3;</span> <span class="id">splitall</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">simpl;</span> <span class="id">f_equal;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">R;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">transitivity</span> (<span class="id">valu2</span> <span class="id">v</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id">R</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">subst</span> <span class="id">v1;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="find_valnum_rhs_charact" class="id"><a name="find_valnum_rhs_charact" class="">find_valnum_rhs_charact:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rh:53" class="id"><a name="rh:53" class="">rh</a></span> <span id="v:54" class="id"><a name="v:54" class="">v</a></span> <span id="eqs:55" class="id"><a name="eqs:55" class="">eqs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#find_valnum_rhs">find_valnum_rhs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh:53">rh</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs:55">eqs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:54">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:54">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh:53">rh</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#eqs:55">eqs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">eqs;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">a</span>. <span class="id">destruct</span> (<span class="id">strict</span> &amp;&amp; <span class="id"><a href="compcert.backend.CSEdomain.html#eq_rhs">eq_rhs</a></span> <span class="id">rh</span> <span class="id">r</span>) <span class="id">eqn:T</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">InvBooleans</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">left;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">right;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="find_valnum_rhs'_charact" class="id"><a name="find_valnum_rhs'_charact" class="">find_valnum_rhs'_charact:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rh:56" class="id"><a name="rh:56" class="">rh</a></span> <span id="v:57" class="id"><a name="v:57" class="">v</a></span> <span id="eqs:58" class="id"><a name="eqs:58" class="">eqs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#find_valnum_rhs'">find_valnum_rhs'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh:56">rh</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs:58">eqs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:57">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="strict:59" class="id"><a name="strict:59" class="">strict,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:57">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#strict:59">strict</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh:56">rh</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#eqs:58">eqs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">eqs;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">a</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#eq_rhs">eq_rhs</a></span> <span class="id">rh</span> <span class="id">r</span>) <span class="id">eqn:T</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">inv</span> <span class="id">H</span>. <span class="gallina-kwd">exists</span> <span class="id">strict;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id">IHeqs;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[s</span> <span class="id">IN]</span>. <span class="gallina-kwd">exists</span> <span class="id">s;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="find_valnum_num_charact" class="id"><a name="find_valnum_num_charact" class="">find_valnum_num_charact:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:60" class="id"><a name="v:60" class="">v</a></span> <span id="r:61" class="id"><a name="r:61" class="">r</a></span> <span id="eqs:62" class="id"><a name="eqs:62" class="">eqs,</a></span> <span class="id"><a href="compcert.backend.CSE.html#find_valnum_num">find_valnum_num</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:60">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs:62">eqs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:61">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:60">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:61">r</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#eqs:62">eqs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">eqs;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">a</span>. <span class="id">destruct</span> (<span class="id">strict</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">v</span> <span class="id">v0</span>) <span class="id">eqn:T</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">InvBooleans</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="reg_valnum_sound" class="id"><a name="reg_valnum_sound" class="">reg_valnum_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:63" class="id"><a name="n:63" class="">n</a></span> <span id="v:64" class="id"><a name="v:64" class="">v</a></span> <span id="r:65" class="id"><a name="r:65" class="">r</a></span> <span id="valu:66" class="id"><a name="valu:66" class="">valu</a></span> <span id="ge:67" class="id"><a name="ge:67" class="">ge</a></span> <span id="sp:68" class="id"><a name="sp:68" class="">sp</a></span> <span id="rs:69" class="id"><a name="rs:69" class="">rs</a></span> <span id="m:70" class="id"><a name="m:70" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#reg_valnum">reg_valnum</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:63">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:64">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:65">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:66">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:67">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:68">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:69">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:70">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:63">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#rs:69">rs#r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:66">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:64">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#reg_valnum">reg_valnum;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_val">num_val</a></span> <span class="id">n</span>)<span class="id">#v</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">r1</span> <span class="id">rl]</span> <span class="id">eqn:E;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#num_holds_reg">num_holds_reg;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="regs_valnums_sound" class="id"><a name="regs_valnums_sound" class="">regs_valnums_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:71" class="id"><a name="n:71" class="">n</a></span> <span id="valu:72" class="id"><a name="valu:72" class="">valu</a></span> <span id="ge:73" class="id"><a name="ge:73" class="">ge</a></span> <span id="sp:74" class="id"><a name="sp:74" class="">sp</a></span> <span id="rs:75" class="id"><a name="rs:75" class="">rs</a></span> <span id="m:76" class="id"><a name="m:76" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:72">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:73">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:74">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:75">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:76">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:71">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="vl:77" class="id"><a name="vl:77" class="">vl</a></span> <span id="rl:78" class="id"><a name="rl:78" class="">rl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#regs_valnums">regs_valnums</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:71">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:77">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl:78">rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#rs:75">rs##rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:72">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:77">vl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">vl;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reg_valnum">reg_valnum</a></span> <span class="id">n</span> <span class="id">a</span>) <span class="gallina-kwd">as</span> <span class="id">[r1|]</span> <span class="id">eqn:RV1;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#regs_valnums">regs_valnums</a></span> <span class="id">n</span> <span class="id">vl</span>) <span class="gallina-kwd">as</span> <span class="id">[rl1|]</span> <span class="id">eqn:RVL;</span> <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">f_equal</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reg_valnum_sound">reg_valnum_sound;</a></span> <span class="id">eauto</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="find_rhs_sound" class="id"><a name="find_rhs_sound" class="">find_rhs_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:79" class="id"><a name="n:79" class="">n</a></span> <span id="rh:80" class="id"><a name="rh:80" class="">rh</a></span> <span id="r:81" class="id"><a name="r:81" class="">r</a></span> <span id="valu:82" class="id"><a name="valu:82" class="">valu</a></span> <span id="ge:83" class="id"><a name="ge:83" class="">ge</a></span> <span id="sp:84" class="id"><a name="sp:84" class="">sp</a></span> <span id="rs:85" class="id"><a name="rs:85" class="">rs</a></span> <span id="m:86" class="id"><a name="m:86" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#find_rhs">find_rhs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:79">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh:80">rh</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:81">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:82">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:83">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:84">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:85">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:86">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:79">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v:87" class="id"><a name="v:87" class="">v,</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:82">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:83">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:84">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:86">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh:80">rh</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:87">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:87">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:85">rs#r</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#find_rhs">find_rhs;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#find_valnum_rhs'">find_valnum_rhs'</a></span> <span class="id">rh</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_eqs">num_eqs</a></span> <span class="id">n</span>)) <span class="gallina-kwd">as</span> <span class="id">[vres|]</span> <span class="id">eqn:E;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_valnum_rhs'_charact">find_valnum_rhs'_charact;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[strict</span> <span class="id">IN]</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#reg_valnum_sound">reg_valnum_sound</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#num_holds_eq">num_holds_eq;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">EH</span>. <span class="id">inv</span> <span class="id">EH</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">exists</span> (<span class="id">valu</span> <span class="id">vres</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">exists</span> <span class="id">v;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="in_remove" class="id"><a name="in_remove" class="">in_remove:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:88" class="id"><a name="A:88" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="eq:91" class="id"><a name="eq:91" class="">eq:</a></span> <span class="gallina-kwd">forall</span> (<span id="x:89" class="id"><a name="x:89" class="">x</a></span> <span id="y:90" class="id"><a name="y:90" class="">y:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#A:88">A</a></span>)<span class="id">,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{x=y}+{x&lt;&gt;y}</a></span>) <span id="x:92" class="id"><a name="x:92" class="">x</a></span> <span id="y:93" class="id"><a name="y:93" class="">y</a></span> <span id="l:94" class="id"><a name="l:94" class="">l,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#y:93">y</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#remove">List.remove</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eq:91">eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#x:92">x</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#l:94">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#x:92">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#y:93">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#y:93">y</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#l:94">l</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">eq</span> <span class="id">x</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">a</span>. <span class="id">rewrite</span> <span class="id">IHl</span>. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">IHl</span>. <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="forget_reg_charact" class="id"><a name="forget_reg_charact" class="">forget_reg_charact:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:95" class="id"><a name="n:95" class="">n</a></span> <span id="rd:96" class="id"><a name="rd:96" class="">rd</a></span> <span id="r:97" class="id"><a name="r:97" class="">r</a></span> <span id="v:98" class="id"><a name="v:98" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_numbering">wf_numbering</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:95">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:97">r</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:98">v</a></span> (<span class="id"><a href="compcert.backend.CSE.html#forget_reg">forget_reg</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:95">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rd:96">rd</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:97">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rd:96">rd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:97">r</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:98">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:95">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_val">num_val</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#forget_reg">forget_reg;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id">rd</span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_reg">num_reg</a></span>)) <span class="gallina-kwd">as</span> <span class="id">[vd|]</span> <span class="id">eqn:GET</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">v</span> <span class="id">vd</span>).<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">subst</span> <span class="id">v</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#in_remove">in_remove</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="update_reg_charact" class="id"><a name="update_reg_charact" class="">update_reg_charact:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:99" class="id"><a name="n:99" class="">n</a></span> <span id="rd:100" class="id"><a name="rd:100" class="">rd</a></span> <span id="vd:101" class="id"><a name="vd:101" class="">vd</a></span> <span id="r:102" class="id"><a name="r:102" class="">r</a></span> <span id="v:103" class="id"><a name="v:103" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_numbering">wf_numbering</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:99">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:102">r</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:103">v</a></span> (<span class="id"><a href="compcert.backend.CSE.html#update_reg">update_reg</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:99">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rd:100">rd</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vd:101">vd</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:102">r</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rd:100">rd</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vd:101">vd</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:99">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_reg">num_reg</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:103">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#update_reg">update_reg;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">v</span> <span class="id">vd</span>).<br/>
<span class="id">-</span> <span class="id">subst</span> <span class="id">v</span>. <span class="id">destruct</span> <span class="id">H0</span>.<br/>
<span class="id">+</span> <span class="id">subst</span> <span class="id">r</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
<span class="id">+</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#forget_reg_charact">forget_reg_charact;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#forget_reg_charact">forget_reg_charact;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="rhs_eval_to_inj" class="id"><a name="rhs_eval_to_inj" class="">rhs_eval_to_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu:104" class="id"><a name="valu:104" class="">valu</a></span> <span id="ge:105" class="id"><a name="ge:105" class="">ge</a></span> <span id="sp:106" class="id"><a name="sp:106" class="">sp</a></span> <span id="m:107" class="id"><a name="m:107" class="">m</a></span> <span id="rh:108" class="id"><a name="rh:108" class="">rh</a></span> <span id="v1:109" class="id"><a name="v1:109" class="">v1</a></span> <span id="v2:110" class="id"><a name="v2:110" class="">v2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:104">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:105">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:106">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:107">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh:108">rh</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v1:109">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:104">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:105">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:106">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:107">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh:108">rh</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v2:110">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v1:109">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v2:110">v2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H;</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="add_rhs_holds" class="id"><a name="add_rhs_holds" class="">add_rhs_holds:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu1:111" class="id"><a name="valu1:111" class="">valu1</a></span> <span id="ge:112" class="id"><a name="ge:112" class="">ge</a></span> <span id="sp:113" class="id"><a name="sp:113" class="">sp</a></span> <span id="rs:114" class="id"><a name="rs:114" class="">rs</a></span> <span id="m:115" class="id"><a name="m:115" class="">m</a></span> <span id="n:116" class="id"><a name="n:116" class="">n</a></span> <span id="rd:117" class="id"><a name="rd:117" class="">rd</a></span> <span id="rh:118" class="id"><a name="rh:118" class="">rh</a></span> <span id="rs':119" class="id"><a name="rs':119" class="">rs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1:111">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:112">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:113">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:114">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:115">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:116">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1:111">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:112">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:113">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:115">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh:118">rh</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs':119">rs'#rd</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_rhs">wf_rhs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:116">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rh:118">rh</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r:120" class="id"><a name="r:120" class="">r,</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:120">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rd:117">rd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs':119">rs'#r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:114">rs#r</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="valu2:121" class="id"><a name="valu2:121" class="">valu2,</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2:121">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:112">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:113">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs':119">rs'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:115">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#add_rhs">add_rhs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:116">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rd:117">rd</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh:118">rh</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#add_rhs">add_rhs;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#find_valnum_rhs">find_valnum_rhs</a></span> <span class="id">rh</span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_eqs">num_eqs</a></span>)) <span class="gallina-kwd">as</span> <span class="id">[vres|]</span> <span class="id">eqn:FIND</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;A&nbsp;value&nbsp;number&nbsp;exists&nbsp;already&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_valnum_rhs_charact">find_valnum_rhs_charact;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">IN</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_eqs">wf_num_eqs;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#num_holds_eq">num_holds_eq;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">EH</span>. <span class="id">inv</span> <span class="id">EH</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">rs'#rd</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">valu1</span> <span class="id">vres</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs_eval_to_inj">rhs_eval_to_inj;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">valu1;</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">+</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H5</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">rd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#update_reg_charact">update_reg_charact;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">+</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H5</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">rd</span>).<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H2</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Assigning&nbsp;a&nbsp;new&nbsp;value&nbsp;number&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">valu2</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="v:123" class="id"><span id="v:122" class="id"><a name="v:123" class="">v</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:122">v</a></span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="gallina-kwd">then</span> <span class="id">rs'#rd</span> <span class="gallina-kwd">else</span> <span class="id">valu1</span> <span class="id"><a href="compcert.backend.CSEproof.html#v:122">v</a></span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">AG:</span> <span class="id"><a href="compcert.backend.CSEproof.html#valu_agree">valu_agree</a></span> <span class="id">valu1</span> <span class="id">valu2</span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">unfold</span> <span class="id">valu2</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_false">peq_false</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne;</a></span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">valu2;</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">+</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">destruct</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="id">simpl;</span> <span class="id">split</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#wf_equation_incr">wf_equation_incr</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id">n</span>). <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">rd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#update_reg_charact">update_reg_charact;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">+</span> <span class="id">destruct</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">unfold</span> <span class="id">valu2</span> <span class="gallina-kwd">at</span> <span class="id">2;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs_eval_to_exten">rhs_eval_to_exten;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#equation_holds_exten">equation_holds_exten;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span>. <span class="id">unfold</span> <span class="id">valu2</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">rd</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_false">peq_false</a></span>. <span class="id">rewrite</span> <span class="id">H2</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="add_op_holds" class="id"><a name="add_op_holds" class="">add_op_holds:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu1:124" class="id"><a name="valu1:124" class="">valu1</a></span> <span id="ge:125" class="id"><a name="ge:125" class="">ge</a></span> <span id="sp:126" class="id"><a name="sp:126" class="">sp</a></span> <span id="rs:127" class="id"><a name="rs:127" class="">rs</a></span> <span id="m:128" class="id"><a name="m:128" class="">m</a></span> <span id="n:129" class="id"><a name="n:129" class="">n</a></span> <span id="op:130" class="id"><a name="op:130" class="">op</a></span> (<span id="args:131" class="id"><a name="args:131" class="">args:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span id="v:132" class="id"><a name="v:132" class="">v</a></span> <span id="dst:133" class="id"><a name="dst:133" class="">dst,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1:124">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:125">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:126">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:127">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:128">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:129">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:125">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:126">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:130">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:127">rs##args</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:128">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:132">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="valu2:134" class="id"><a name="valu2:134" class="">valu2,</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2:134">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:125">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:126">sp</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs:127">rs#dst</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:132">v</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m:128">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#add_op">add_op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:129">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#dst:133">dst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:130">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:131">args</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#add_op">add_op;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.x86.Op.html#is_move_operation">is_move_operation</a></span> <span class="id">op</span> <span class="id">args</span>) <span class="gallina-kwd">as</span> <span class="id">[src|]</span> <span class="id">eqn:ISMOVE</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;special&nbsp;case&nbsp;for&nbsp;moves&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#is_move_operation_correct">is_move_operation_correct;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B];</span> <span class="id">subst</span> <span class="id">op</span> <span class="id">args</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_reg">valnum_reg</a></span> <span class="id">n</span> <span class="id">src</span>) <span class="gallina-kwd">as</span> <span class="id">[n1</span> <span class="id">vsrc]</span> <span class="id">eqn:VN</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_reg_holds">valnum_reg_holds;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">valu2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">valu2;</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">+</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">dst</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#update_reg_charact">update_reg_charact;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">+</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">dst</span>). <span class="id">congruence</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;general&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">n</span> <span class="id">args</span>) <span class="gallina-kwd">as</span> <span class="id">[n1</span> <span class="id">vl]</span> <span class="id">eqn:VN</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">valu2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_rhs_holds">add_rhs_holds;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="id">constructor</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gss">Regmap.gss</a></span>. <span class="id">congruence</span>.<br/>
<span class="id">+</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gso">Regmap.gso</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="add_load_holds" class="id"><a name="add_load_holds" class="">add_load_holds:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu1:135" class="id"><a name="valu1:135" class="">valu1</a></span> <span id="ge:136" class="id"><a name="ge:136" class="">ge</a></span> <span id="sp:137" class="id"><a name="sp:137" class="">sp</a></span> <span id="rs:138" class="id"><a name="rs:138" class="">rs</a></span> <span id="m:139" class="id"><a name="m:139" class="">m</a></span> <span id="n:140" class="id"><a name="n:140" class="">n</a></span> <span id="addr:141" class="id"><a name="addr:141" class="">addr</a></span> (<span id="args:142" class="id"><a name="args:142" class="">args:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span id="a:143" class="id"><a name="a:143" class="">a</a></span> <span id="chunk:144" class="id"><a name="chunk:144" class="">chunk</a></span> <span id="v:145" class="id"><a name="v:145" class="">v</a></span> <span id="dst:146" class="id"><a name="dst:146" class="">dst,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1:135">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:136">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:137">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:138">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:139">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:140">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:136">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:137">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#addr:141">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:138">rs##args</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a:143">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:144">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:139">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a:143">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:145">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="valu2:147" class="id"><a name="valu2:147" class="">valu2,</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2:147">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:136">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:137">sp</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs:138">rs#dst</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:145">v</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m:139">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#add_load">add_load</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:140">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#dst:146">dst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:144">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#addr:141">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:142">args</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#add_load">add_load;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">n</span> <span class="id">args</span>) <span class="gallina-kwd">as</span> <span class="id">[n1</span> <span class="id">vl]</span> <span class="id">eqn:VN</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">valu2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_rhs_holds">add_rhs_holds;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="id">econstructor</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">B;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gss">Regmap.gss</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gso">Regmap.gso</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="set_unknown_holds" class="id"><a name="set_unknown_holds" class="">set_unknown_holds:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu:148" class="id"><a name="valu:148" class="">valu</a></span> <span id="ge:149" class="id"><a name="ge:149" class="">ge</a></span> <span id="sp:150" class="id"><a name="sp:150" class="">sp</a></span> <span id="rs:151" class="id"><a name="rs:151" class="">rs</a></span> <span id="m:152" class="id"><a name="m:152" class="">m</a></span> <span id="n:153" class="id"><a name="n:153" class="">n</a></span> <span id="r:154" class="id"><a name="r:154" class="">r</a></span> <span id="v:155" class="id"><a name="v:155" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:148">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:149">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:150">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:151">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:152">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:153">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:148">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:149">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:150">sp</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs:151">rs#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:155">v</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m:152">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#set_unknown">set_unknown</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:153">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:154">r</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">r0</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#forget_reg_charact">forget_reg_charact;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gro">PTree.gro</a></span><span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">-</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">r0</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gso">Regmap.gso</a></span><span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="set_res_unknown_holds" class="id"><a name="set_res_unknown_holds" class="">set_res_unknown_holds:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu:156" class="id"><a name="valu:156" class="">valu</a></span> <span id="ge:157" class="id"><a name="ge:157" class="">ge</a></span> <span id="sp:158" class="id"><a name="sp:158" class="">sp</a></span> <span id="rs:159" class="id"><a name="rs:159" class="">rs</a></span> <span id="m:160" class="id"><a name="m:160" class="">m</a></span> <span id="n:161" class="id"><a name="n:161" class="">n</a></span> <span id="r:162" class="id"><a name="r:162" class="">r</a></span> <span id="v:163" class="id"><a name="v:163" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:156">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:157">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:158">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:159">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:160">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:161">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:156">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:157">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:158">sp</a></span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:162">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:163">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:159">rs</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m:160">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#set_res_unknown">set_res_unknown</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:161">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:162">r</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">r;</span> <span class="id">simpl;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_unknown_holds">set_unknown_holds;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="kill_eqs_charact" class="id"><a name="kill_eqs_charact" class="">kill_eqs_charact:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="pred:164" class="id"><a name="pred:164" class="">pred</a></span> <span id="l:165" class="id"><a name="l:165" class="">l</a></span> <span id="strict:166" class="id"><a name="strict:166" class="">strict</a></span> <span id="r:167" class="id"><a name="r:167" class="">r</a></span> <span id="eqs:168" class="id"><a name="eqs:168" class="">eqs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#l:165">l</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#strict:166">strict</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:167">r</a></span>) (<span class="id"><a href="compcert.backend.CSE.html#kill_eqs">kill_eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pred:164">pred</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs:168">eqs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#pred:164">pred</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:167">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#l:165">l</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#strict:166">strict</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:167">r</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#eqs:168">eqs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">eqs;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">tauto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">a</span>. <span class="id">destruct</span> (<span class="id">pred</span> <span class="id">r0</span>) <span class="id">eqn:PRED</span>.<br/>
&nbsp;&nbsp;<span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">auto</span>. <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="kill_equations_hold" class="id"><a name="kill_equations_hold" class="">kill_equations_hold:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu:169" class="id"><a name="valu:169" class="">valu</a></span> <span id="ge:170" class="id"><a name="ge:170" class="">ge</a></span> <span id="sp:171" class="id"><a name="sp:171" class="">sp</a></span> <span id="rs:172" class="id"><a name="rs:172" class="">rs</a></span> <span id="m:173" class="id"><a name="m:173" class="">m</a></span> <span id="n:174" class="id"><a name="n:174" class="">n</a></span> <span id="pred:175" class="id"><a name="pred:175" class="">pred</a></span> <span id="m':176" class="id"><a name="m':176" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:169">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:170">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:171">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:172">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:173">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:174">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r:177" class="id"><a name="r:177" class="">r</a></span> <span id="v:178" class="id"><a name="v:178" class="">v,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#pred:175">pred</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:177">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:169">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:170">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:171">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:173">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:177">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:178">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:169">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:170">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:171">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':176">m'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:177">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:178">v</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:169">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:170">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:171">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:172">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':176">m'</a></span> (<span class="id"><a href="compcert.backend.CSE.html#kill_equations">kill_equations</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pred:175">pred</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:174">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_eqs_charact">kill_eqs_charact;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">eq</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_eqs_charact">kill_eqs_charact;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#num_holds_eq">num_holds_eq;</a></span> <span class="id">eauto</span>. <span class="id">intro</span> <span class="id">EH;</span> <span class="id">inv</span> <span class="id">EH;</span> <span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="kill_all_loads_hold" class="id"><a name="kill_all_loads_hold" class="">kill_all_loads_hold:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu:179" class="id"><a name="valu:179" class="">valu</a></span> <span id="ge:180" class="id"><a name="ge:180" class="">ge</a></span> <span id="sp:181" class="id"><a name="sp:181" class="">sp</a></span> <span id="rs:182" class="id"><a name="rs:182" class="">rs</a></span> <span id="m:183" class="id"><a name="m:183" class="">m</a></span> <span id="n:184" class="id"><a name="n:184" class="">n</a></span> <span id="m':185" class="id"><a name="m':185" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:179">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:180">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:181">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:182">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:183">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:184">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:179">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:180">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:181">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:182">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':185">m'</a></span> (<span class="id"><a href="compcert.backend.CSE.html#kill_all_loads">kill_all_loads</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:184">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_equations_hold">kill_equations_hold;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#filter_loads">filter_loads;</a></span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H2</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#op_depends_on_memory_correct">op_depends_on_memory_correct;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="kill_loads_after_store_holds" class="id"><a name="kill_loads_after_store_holds" class="">kill_loads_after_store_holds:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu:186" class="id"><a name="valu:186" class="">valu</a></span> <span id="ge:187" class="id"><a name="ge:187" class="">ge</a></span> <span id="sp:188" class="id"><a name="sp:188" class="">sp</a></span> <span id="rs:189" class="id"><a name="rs:189" class="">rs</a></span> <span id="m:190" class="id"><a name="m:190" class="">m</a></span> <span id="n:191" class="id"><a name="n:191" class="">n</a></span> <span id="addr:192" class="id"><a name="addr:192" class="">addr</a></span> <span id="args:193" class="id"><a name="args:193" class="">args</a></span> <span id="a:194" class="id"><a name="a:194" class="">a</a></span> <span id="chunk:195" class="id"><a name="chunk:195" class="">chunk</a></span> <span id="v:196" class="id"><a name="v:196" class="">v</a></span> <span id="m':197" class="id"><a name="m':197" class="">m'</a></span> <span id="bc:198" class="id"><a name="bc:198" class="">bc</a></span> <span id="approx:199" class="id"><a name="approx:199" class="">approx</a></span> <span id="ae:200" class="id"><a name="ae:200" class="">ae</a></span> <span id="am:201" class="id"><a name="am:201" class="">am,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:186">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:187">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:188">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs:189">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:190">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:191">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:187">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:188">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#addr:192">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:189">rs##args</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a:194">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:195">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:190">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a:194">a</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:196">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':197">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc:198">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:187">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#bc:198">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:188">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc:198">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:189">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae:200">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#approx:199">approx</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae:200">ae</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#am:201">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:186">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:187">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:188">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs:189">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':197">m'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.CSE.html#kill_loads_after_store">kill_loads_after_store</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:199">approx</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:191">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:195">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#addr:192">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:193">args</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_equations_hold">kill_equations_hold</a></span> <span class="gallina-kwd">with</span> <span class="id">m;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#filter_after_store">filter_after_store</a></span> <span class="gallina-kwd">in</span> <span class="id">H6;</span> <span class="id">inv</span> <span class="id">H7</span>.<br/>
<span class="id">-</span> <span class="id">constructor</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H8</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#op_depends_on_memory_correct">op_depends_on_memory_correct;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#regs_valnums">regs_valnums</a></span> <span class="id">n</span> <span class="id">vl</span>) <span class="gallina-kwd">as</span> <span class="id">[rl|]</span> <span class="id">eqn:RV;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a0;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H9;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#negb_false_iff">negb_false_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H6</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddressing">aaddressing</a></span> <span class="gallina-kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_other">Mem.load_store_other</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pdisjoint_sound">pdisjoint_sound</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#match_aptr_of_aval">match_aptr_of_aval</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing_sound">eval_static_addressing_sound;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_valnums_sound">regs_valnums_sound</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#match_aptr_of_aval">match_aptr_of_aval</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing_sound">eval_static_addressing_sound;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="store_normalized_range_sound" class="id"><a name="store_normalized_range_sound" class="">store_normalized_range_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:202" class="id"><a name="bc:202" class="">bc</a></span> <span id="chunk:203" class="id"><a name="chunk:203" class="">chunk</a></span> <span id="v:204" class="id"><a name="v:204" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc:202">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:204">v</a></span> (<span class="id"><a href="compcert.backend.CSE.html#store_normalized_range">store_normalized_range</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:203">chunk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:203">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:204">v</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#v:204">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span><span class="id">;</span> <span class="id">remember</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">as</span> <span class="id">ptr64</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">destruct</span> <span class="id">v;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_sgn_sign_ext">is_sgn_sign_ext</a></span> <span class="gallina-kwd">in</span> <span class="id">H4</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id">H4;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_uns_zero_ext">is_uns_zero_ext</a></span> <span class="gallina-kwd">in</span> <span class="id">H4</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id">H4;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_sgn_sign_ext">is_sgn_sign_ext</a></span> <span class="gallina-kwd">in</span> <span class="id">H4</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id">H4;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_uns_zero_ext">is_uns_zero_ext</a></span> <span class="gallina-kwd">in</span> <span class="id">H4</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id">H4;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">ptr64;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">ptr64;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">ptr64;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="add_store_result_hold" class="id"><a name="add_store_result_hold" class="">add_store_result_hold:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu1:205" class="id"><a name="valu1:205" class="">valu1</a></span> <span id="ge:206" class="id"><a name="ge:206" class="">ge</a></span> <span id="sp:207" class="id"><a name="sp:207" class="">sp</a></span> <span id="rs:208" class="id"><a name="rs:208" class="">rs</a></span> <span id="m':209" class="id"><a name="m':209" class="">m'</a></span> <span id="n:210" class="id"><a name="n:210" class="">n</a></span> <span id="addr:211" class="id"><a name="addr:211" class="">addr</a></span> <span id="args:212" class="id"><a name="args:212" class="">args</a></span> <span id="a:213" class="id"><a name="a:213" class="">a</a></span> <span id="chunk:214" class="id"><a name="chunk:214" class="">chunk</a></span> <span id="m:215" class="id"><a name="m:215" class="">m</a></span> <span id="src:216" class="id"><a name="src:216" class="">src</a></span> <span id="bc:217" class="id"><a name="bc:217" class="">bc</a></span> <span id="ae:218" class="id"><a name="ae:218" class="">ae</a></span> <span id="approx:219" class="id"><a name="approx:219" class="">approx</a></span> <span id="am:220" class="id"><a name="am:220" class="">am,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1:205">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:206">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:207">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:208">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':209">m'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:210">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:206">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:207">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#addr:211">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:208">rs##args</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a:213">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:214">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:215">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a:213">a</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:208">rs#src</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':209">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc:217">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:208">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae:218">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#approx:219">approx</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae:218">ae</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#am:220">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="valu2:221" class="id"><a name="valu2:221" class="">valu2,</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2:221">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:206">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:207">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:208">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':209">m'</a></span> (<span class="id"><a href="compcert.backend.CSE.html#add_store_result">add_store_result</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:219">approx</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:210">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:214">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#addr:211">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:212">args</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src:216">src</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#add_store_result">add_store_result;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#avalue">avalue;</a></span> <span class="id">rewrite</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id">src</span> <span class="id">ae</span>) (<span class="id"><a href="compcert.backend.CSE.html#store_normalized_range">store_normalized_range</a></span> <span class="id">chunk</span>)) <span class="id">eqn:INCL</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_reg">valnum_reg</a></span> <span class="id">n</span> <span class="id">src</span>) <span class="gallina-kwd">as</span> <span class="id">[n1</span> <span class="id">vsrc]</span> <span class="id">eqn:VR1</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">n1</span> <span class="id">args</span>) <span class="gallina-kwd">as</span> <span class="id">[n2</span> <span class="id">vargs]</span> <span class="id">eqn:VR2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_reg_holds">valnum_reg_holds;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">valu2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">valu3</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span> &amp; <span class="id">S</span> &amp; <span class="id">T</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">valu3</span>. <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">+</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>. <span class="id">subst</span> <span class="id">e</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">destruct</span> <span class="id">H4;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>. <span class="id">subst</span> <span class="id">eq</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#eq_holds_lessdef">eq_holds_lessdef</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id">chunk</span> <span class="id">rs#src</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#load_eval_to">load_eval_to</a></span> <span class="gallina-kwd">with</span> <span class="id">a</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Q;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">simpl</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_same">Mem.load_store_same</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">B</span>. <span class="id">rewrite</span> <span class="id">R</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#store_normalized_range_sound">store_normalized_range_sound</a></span> <span class="gallina-kwd">with</span> <span class="id">bc</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">B</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ge">vmatch_ge</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vincl_ge">vincl_ge;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">H2</span>.<br/>
<span class="id">+</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<br/>
<span class="id">-</span> <span class="gallina-kwd">exists</span> <span class="id">valu1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="kill_loads_after_storebytes_holds" class="id"><a name="kill_loads_after_storebytes_holds" class="">kill_loads_after_storebytes_holds:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="valu:222" class="id"><a name="valu:222" class="">valu</a></span> <span id="ge:223" class="id"><a name="ge:223" class="">ge</a></span> <span id="sp:224" class="id"><a name="sp:224" class="">sp</a></span> <span id="rs:225" class="id"><a name="rs:225" class="">rs</a></span> <span id="m:226" class="id"><a name="m:226" class="">m</a></span> <span id="n:227" class="id"><a name="n:227" class="">n</a></span> <span id="dst:228" class="id"><a name="dst:228" class="">dst</a></span> <span id="b:229" class="id"><a name="b:229" class="">b</a></span> <span id="ofs:230" class="id"><a name="ofs:230" class="">ofs</a></span> <span id="bytes:231" class="id"><a name="bytes:231" class="">bytes</a></span> <span id="m':232" class="id"><a name="m':232" class="">m'</a></span> <span id="bc:233" class="id"><a name="bc:233" class="">bc</a></span> <span id="approx:234" class="id"><a name="approx:234" class="">approx</a></span> <span id="ae:235" class="id"><a name="ae:235" class="">ae</a></span> <span id="am:236" class="id"><a name="am:236" class="">am</a></span> <span id="sz:237" class="id"><a name="sz:237" class="">sz,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:222">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:223">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:224">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs:225">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:226">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:227">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc:233">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b:229">b</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs:230">ofs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#dst:228">dst</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:226">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b:229">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs:230">ofs</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#bytes:231">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':232">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc:233">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:223">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#bc:233">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:224">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc:233">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:225">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae:235">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#approx:234">approx</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae:235">ae</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#am:236">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes:231">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz:237">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz:237">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:222">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:223">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:224">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs:225">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':232">m'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.CSE.html#kill_loads_after_storebytes">kill_loads_after_storebytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:234">approx</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n:227">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#dst:228">dst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz:237">sz</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_equations_hold">kill_equations_hold</a></span> <span class="gallina-kwd">with</span> <span class="id">m;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#filter_after_store">filter_after_store</a></span> <span class="gallina-kwd">in</span> <span class="id">H8;</span> <span class="id">inv</span> <span class="id">H9</span>.<br/>
<span class="id">-</span> <span class="id">constructor</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H10</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#op_depends_on_memory_correct">op_depends_on_memory_correct;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#regs_valnums">regs_valnums</a></span> <span class="id">n</span> <span class="id">vl</span>) <span class="gallina-kwd">as</span> <span class="id">[rl|]</span> <span class="id">eqn:RV;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H11</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H10;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#negb_false_iff">negb_false_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_storebytes_other">Mem.load_storebytes_other</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H6</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pdisjoint_sound">pdisjoint_sound</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddressing">aaddressing</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#match_aptr_of_aval">match_aptr_of_aval</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing_sound">eval_static_addressing_sound;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_valnums_sound">regs_valnums_sound</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="load_memcpy" class="id"><a name="load_memcpy" class="">load_memcpy:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:238" class="id"><a name="m:238" class="">m</a></span> <span id="b1:239" class="id"><a name="b1:239" class="">b1</a></span> <span id="ofs1:240" class="id"><a name="ofs1:240" class="">ofs1</a></span> <span id="sz:241" class="id"><a name="sz:241" class="">sz</a></span> <span id="bytes:242" class="id"><a name="bytes:242" class="">bytes</a></span> <span id="b2:243" class="id"><a name="b2:243" class="">b2</a></span> <span id="ofs2:244" class="id"><a name="ofs2:244" class="">ofs2</a></span> <span id="m':245" class="id"><a name="m':245" class="">m'</a></span> <span id="chunk:246" class="id"><a name="chunk:246" class="">chunk</a></span> <span id="i:247" class="id"><a name="i:247" class="">i</a></span> <span id="v:248" class="id"><a name="v:248" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:238">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b1:239">b1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs1:240">ofs1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz:241">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes:242">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:238">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b2:243">b2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs2:244">ofs2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes:242">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':245">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:246">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:238">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b1:239">b1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#i:247">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:248">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#ofs1:240">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#i:247">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#i:247">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:246">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs1:240">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz:241">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:246">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs2:244">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs1:240">ofs1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk:246">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':245">m'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b2:243">b2</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#i:247">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#ofs2:244">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs1:240">ofs1</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:248">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">SPOS</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">n1</span> <span class="id">:=</span> <span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">ofs1</span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">n2</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">n3</span> <span class="id">:=</span> <span class="id">sz</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> (<span class="id">n1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n2</span>)).<br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id">sz</span> <span class="gallina-kwd">with</span> (<span class="id">n1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> (<span class="id">n2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n3</span>)) <span class="gallina-kwd">in</span> <span class="id">H</span> <span class="gallina-kwd">by</span> (<span class="id">unfold</span> <span class="id">n3,</span> <span class="id">n2,</span> <span class="id">n1;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_split">Mem.loadbytes_split</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">n1;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">n3,</span> <span class="id">n2,</span> <span class="id">n1;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bytes1</span> &amp; <span class="id">bytes23</span> &amp; <span class="id">LB1</span> &amp; <span class="id">LB23</span> &amp; <span class="id">EQ</span>).<br/>
&nbsp;&nbsp;<span class="id">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_split">Mem.loadbytes_split</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">n2;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">n3,</span> <span class="id">n2,</span> <span class="id">n1;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bytes2</span> &amp; <span class="id">bytes3</span> &amp; <span class="id">LB2</span> &amp; <span class="id">LB3</span> &amp; <span class="id">EQ'</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">bytes23;</span> <span class="id">subst</span> <span class="id">bytes</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_loadbytes">Mem.load_loadbytes</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">bytes2'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">bytes2'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">bytes2</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">replace</span> (<span class="id">ofs1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n1</span>) <span class="gallina-kwd">with</span> <span class="id">i</span> <span class="gallina-kwd">in</span> <span class="id">LB2</span> <span class="gallina-kwd">by</span> (<span class="id">unfold</span> <span class="id">n1;</span> <span class="id">lia</span>). <span class="id">unfold</span> <span class="id">n2</span> <span class="gallina-kwd">in</span> <span class="id">LB2</span>. <span class="id">congruence</span>.  <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">bytes2'</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_split">Mem.storebytes_split</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">m1</span> &amp; <span class="id">SB1</span> &amp; <span class="id">SB23</span>).<br/>
&nbsp;&nbsp;<span class="id">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_split">Mem.storebytes_split</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">m2</span> &amp; <span class="id">SB2</span> &amp; <span class="id">SB3</span>).<br/>
&nbsp;&nbsp;<span class="id">clear</span> <span class="id">SB23</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">L1:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">n1</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">Mem.loadbytes_length</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span>. <span class="id">unfold</span> <span class="id">n1;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">L2:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes2</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">n2</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">Mem.loadbytes_length</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span>. <span class="id">unfold</span> <span class="id">n2;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">L1</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">rewrite</span> <span class="id">L2</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">LB':</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id">m2</span> <span class="id">b2</span> (<span class="id">ofs2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n1</span>) <span class="id">n2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">bytes2</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">L2</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_storebytes_same">Mem.loadbytes_storebytes_same</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">LB'':</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id">m'</span> <span class="id">b2</span> (<span class="id">ofs2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n1</span>) <span class="id">n2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">bytes2</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">LB'</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_storebytes_other">Mem.loadbytes_storebytes_other</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">n2;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right;</span> <span class="id">left;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_valid_access">Mem.load_valid_access</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">B</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_load">Mem.loadbytes_load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> (<span class="id">ofs2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">ofs1</span>)) <span class="gallina-kwd">with</span> (<span class="id">ofs2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n1</span>) <span class="gallina-kwd">by</span> (<span class="id">unfold</span> <span class="id">n1;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id">LB''</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="shift_memcpy_eq_wf" class="id"><a name="shift_memcpy_eq_wf" class="">shift_memcpy_eq_wf:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="src:249" class="id"><a name="src:249" class="">src</a></span> <span id="sz:250" class="id"><a name="sz:250" class="">sz</a></span> <span id="delta:251" class="id"><a name="delta:251" class="">delta</a></span> <span id="e:252" class="id"><a name="e:252" class="">e</a></span> <span id="e':253" class="id"><a name="e':253" class="">e'</a></span> <span id="next:254" class="id"><a name="next:254" class="">next,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src:249">src</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz:250">sz</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#delta:251">delta</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e:252">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e':253">e'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next:254">next</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e:252">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next:254">next</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e':253">e'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof with</span></div>
<div class="proofscript" id="proof32">
 (<span class="id">try</span> <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span>. <span class="id">destruct</span> <span class="id">r</span>... <span class="id">destruct</span> <span class="id">a</span>...<br/>
&nbsp;&nbsp;<span class="id">try</span> (<span class="id">rename</span> <span class="id">i</span> <span class="id">into</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">src</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) &amp;&amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">m</span>) (<span class="id">src</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">sz</span>) &amp;&amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> (<span class="id">delta</span> <span class="id">mod</span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id">m</span>) <span class="id">0</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">0</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) &amp;&amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>)...<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">split</span>. <span class="id">auto</span>. <span class="id">red;</span> <span class="id">simpl;</span> <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="shift_memcpy_eq_holds" class="id"><a name="shift_memcpy_eq_holds" class="">shift_memcpy_eq_holds:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="src:255" class="id"><a name="src:255" class="">src</a></span> <span id="dst:256" class="id"><a name="dst:256" class="">dst</a></span> <span id="sz:257" class="id"><a name="sz:257" class="">sz</a></span> <span id="e:258" class="id"><a name="e:258" class="">e</a></span> <span id="e':259" class="id"><a name="e':259" class="">e'</a></span> <span id="m:260" class="id"><a name="m:260" class="">m</a></span> <span id="sp:261" class="id"><a name="sp:261" class="">sp</a></span> <span id="bytes:262" class="id"><a name="bytes:262" class="">bytes</a></span> <span id="m':263" class="id"><a name="m':263" class="">m'</a></span> <span id="valu:264" class="id"><a name="valu:264" class="">valu</a></span> <span id="ge:265" class="id"><a name="ge:265" class="">ge,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src:255">src</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz:257">sz</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#dst:256">dst</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src:255">src</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#e:258">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e':259">e'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:260">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:261">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src:255">src</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz:257">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes:262">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:260">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:261">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#dst:256">dst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes:262">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':263">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#equation_holds">equation_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:264">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:265">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:261">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m:260">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e:258">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#equation_holds">equation_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:264">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:265">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:261">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m':263">m'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e':259">e'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof with</span></div>
<div class="proofscript" id="proof33">
 (<span class="id">try</span> <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">set</span> (<span class="id">delta</span> <span class="id">:=</span> <span class="id">dst</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">src</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span> <span class="gallina-kwd">as</span> <span class="id">[l</span> <span class="id">strict</span> <span class="id">rhs]</span> <span class="id">eqn:E</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">rhs</span> <span class="gallina-kwd">as</span> <span class="id">[op</span> <span class="id">vl</span> <span class="id">|</span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">vl]</span>...<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">addr</span>...<br/>
&nbsp;&nbsp;<span class="id">try</span> (<span class="id">rename</span> <span class="id">i</span> <span class="id">into</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">i1</span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">set</span> (<span class="id">j</span> <span class="id">:=</span> <span class="id">i1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">src</span> <span class="id">i1</span>)...<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">i1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) (<span class="id">src</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">sz</span>))...<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> (<span class="id">delta</span> <span class="id">mod</span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id">chunk</span>) <span class="id">0</span>)...<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">0</span> <span class="id">j</span>)...<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">j</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>)...<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">LD:</span> <span class="gallina-kwd">forall</span> <span id="v:267" class="id"><span id="v:266" class="id"><a name="v:267" class="">v,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id">chunk</span> <span class="id">m</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span> <span class="id">ofs</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:266">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id">chunk</span> <span class="id">m'</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">j</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:266">v</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">j,</span> <span class="id">delta</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#load_memcpy">load_memcpy;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znumtheory.html#Zmod_divide">Zmod_divide;</a></span> <span class="id">auto</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk_pos">align_chunk_pos</a></span> <span class="id">chunk</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>.<br/>
<span class="id">+</span> <span class="id">inv</span> <span class="id">H3</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_Ainstack_inv">eval_addressing_Ainstack_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[E1</span> <span class="id">E2]</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">E2;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span> <span class="gallina-kwd">in</span> <span class="id">E2</span>. <span class="id">subst</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#eq_holds_strict">eq_holds_strict</a></span>. <span class="id">econstructor</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_Ainstack">eval_addressing_Ainstack</a></span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">LD;</span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">inv</span> <span class="id">H4</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_Ainstack_inv">eval_addressing_Ainstack_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[E1</span> <span class="id">E2]</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">E2;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span> <span class="gallina-kwd">in</span> <span class="id">E2</span>. <span class="id">subst</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#eq_holds_lessdef">eq_holds_lessdef</a></span> <span class="gallina-kwd">with</span> <span class="id">v;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_Ainstack">eval_addressing_Ainstack</a></span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">LD;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="add_memcpy_eqs_charact" class="id"><a name="add_memcpy_eqs_charact" class="">add_memcpy_eqs_charact:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e':268" class="id"><a name="e':268" class="">e'</a></span> <span id="src:269" class="id"><a name="src:269" class="">src</a></span> <span id="sz:270" class="id"><a name="sz:270" class="">sz</a></span> <span id="delta:271" class="id"><a name="delta:271" class="">delta</a></span> <span id="eqs2:272" class="id"><a name="eqs2:272" class="">eqs2</a></span> <span id="eqs1:273" class="id"><a name="eqs1:273" class="">eqs1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e':268">e'</a></span> (<span class="id"><a href="compcert.backend.CSE.html#add_memcpy_eqs">add_memcpy_eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src:269">src</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz:270">sz</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#delta:271">delta</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs1:273">eqs1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs2:272">eqs2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e':268">e'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs2:272">eqs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="gallina-kwd">exists</span> <span id="e:274" class="id"><a name="e:274" class="">e,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e:274">e</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs1:273">eqs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src:269">src</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz:270">sz</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#delta:271">delta</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e:274">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e':268">e'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">eqs1;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq</a></span> <span class="id">src</span> <span class="id">sz</span> <span class="id">delta</span> <span class="id">a</span>) <span class="gallina-kwd">as</span> <span class="id">[e''|]</span> <span class="id">eqn:SHIFT</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> <span class="id">H</span>. <span class="id">subst</span> <span class="id">e''</span>. <span class="id">right;</span> <span class="gallina-kwd">exists</span> <span class="id">a;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHeqs1</span> <span class="gallina-kwd">as</span> <span class="id">[A</span> <span class="id">|</span> <span class="id">[e</span> <span class="id">[A</span> <span class="id">B]]];</span> <span class="id">auto</span>. <span class="id">right;</span> <span class="gallina-kwd">exists</span> <span class="id">e;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> <span class="id">IHeqs1</span> <span class="gallina-kwd">as</span> <span class="id">[A</span> <span class="id">|</span> <span class="id">[e</span> <span class="id">[A</span> <span class="id">B]]];</span> <span class="id">auto</span>. <span class="id">right;</span> <span class="gallina-kwd">exists</span> <span class="id">e;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="add_memcpy_holds" class="id"><a name="add_memcpy_holds" class="">add_memcpy_holds:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:275" class="id"><a name="m:275" class="">m</a></span> <span id="bsrc:276" class="id"><a name="bsrc:276" class="">bsrc</a></span> <span id="osrc:277" class="id"><a name="osrc:277" class="">osrc</a></span> <span id="sz:278" class="id"><a name="sz:278" class="">sz</a></span> <span id="bytes:279" class="id"><a name="bytes:279" class="">bytes</a></span> <span id="bdst:280" class="id"><a name="bdst:280" class="">bdst</a></span> <span id="odst:281" class="id"><a name="odst:281" class="">odst</a></span> <span id="m':282" class="id"><a name="m':282" class="">m'</a></span> <span id="valu:283" class="id"><a name="valu:283" class="">valu</a></span> <span id="ge:284" class="id"><a name="ge:284" class="">ge</a></span> <span id="sp:285" class="id"><a name="sp:285" class="">sp</a></span> <span id="rs:286" class="id"><a name="rs:286" class="">rs</a></span> <span id="n1:287" class="id"><a name="n1:287" class="">n1</a></span> <span id="n2:288" class="id"><a name="n2:288" class="">n2</a></span> <span id="bc:289" class="id"><a name="bc:289" class="">bc</a></span> <span id="asrc:290" class="id"><a name="asrc:290" class="">asrc</a></span> <span id="adst:291" class="id"><a name="adst:291" class="">adst,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:275">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bsrc:276">bsrc</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#osrc:277">osrc</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#sz:278">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes:279">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:275">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bdst:280">bdst</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#odst:281">odst</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#bytes:279">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':282">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:283">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:284">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:285">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs:286">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:275">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n1:287">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:283">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:284">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:285">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs:286">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':282">m'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n2:288">n2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc:289">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bsrc:276">bsrc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#osrc:277">osrc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#asrc:290">asrc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc:289">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bdst:280">bdst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#odst:281">odst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#adst:291">adst</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#bc:289">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:285">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n1:287">n1</a></span>) (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n2:288">n2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:283">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:284">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:285">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs:286">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':282">m'</a></span> (<span class="id"><a href="compcert.backend.CSE.html#add_memcpy">add_memcpy</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n1:287">n1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n2:288">n2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#asrc:290">asrc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#adst:291">adst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz:278">sz</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#add_memcpy">add_memcpy</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">asrc;</span> <span class="id">auto;</span> <span class="id">destruct</span> <span class="id">adst;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="gallina-kwd">forall</span> <span id="b:295" class="id"><span id="b:292" class="id"><a name="b:295" class="">b</a></span></span> <span id="o:296" class="id"><span id="o:293" class="id"><a name="o:296" class="">o</a></span></span> <span id="i:297" class="id"><span id="i:294" class="id"><a name="i:297" class="">i,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.CSEproof.html#b:292">b</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#o:293">o</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#i:294">i</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b:292">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">sp</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#i:294">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#o:293">o</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="id">split;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">A</span> <span class="gallina-kwd">in</span> <span class="id">H3;</span> <span class="id">destruct</span> <span class="id">H3</span>. <span class="id">subst</span> <span class="id">bsrc</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">A</span> <span class="gallina-kwd">in</span> <span class="id">H4;</span> <span class="id">destruct</span> <span class="id">H4</span>. <span class="id">subst</span> <span class="id">bdst</span> <span class="id">ofs0</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">-</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_memcpy_eqs_charact">add_memcpy_eqs_charact;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[X</span> <span class="id">|</span> (<span class="id">e0</span> &amp; <span class="id">X</span> &amp; <span class="id">Y</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#wf_equation_incr">wf_equation_incr</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id">n1</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#shift_memcpy_eq_wf">shift_memcpy_eq_wf;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_memcpy_eqs_charact">add_memcpy_eqs_charact;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[X</span> <span class="id">|</span> (<span class="id">e0</span> &amp; <span class="id">X</span> &amp; <span class="id">Y</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#shift_memcpy_eq_holds">shift_memcpy_eq_holds;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correctness of operator reduction </div>
<br/>
<span class="vernacular">Section</span> <span id="REDUCE" class="id"><a name="REDUCE" class="">REDUCE</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="REDUCE.A" class="id"><a name="REDUCE.A" class="">A:</a></span> <span class="gallina-kwd">Type</span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCE.f" class="id"><a name="REDUCE.f" class="">f:</a></span> (<span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#rhs">rhs</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span>).<br/>
<span class="vernacular">Variable</span> <span id="REDUCE.V" class="id"><a name="REDUCE.V" class="">V:</a></span> <span class="gallina-kwd">Type</span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCE.ge" class="id"><a name="REDUCE.ge" class="">ge:</a></span> <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCE.sp" class="id"><a name="REDUCE.sp" class="">sp:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCE.rs" class="id"><a name="REDUCE.rs" class="">rs:</a></span> <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCE.m" class="id"><a name="REDUCE.m" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCE.sem" class="id"><a name="REDUCE.sem" class="">sem:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.V">V</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="REDUCE.f_sound" class="id"><a name="REDUCE.f_sound" class="">f_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="eqs:306" class="id"><a name="eqs:306" class="">eqs</a></span> <span id="valu:307" class="id"><a name="valu:307" class="">valu</a></span> <span id="op:308" class="id"><a name="op:308" class="">op</a></span> <span id="args:309" class="id"><a name="args:309" class="">args</a></span> <span id="op':310" class="id"><a name="op':310" class="">op'</a></span> <span id="args':311" class="id"><a name="args':311" class="">args',</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="v:312" class="id"><a name="v:312" class="">v</a></span> <span id="rhs:313" class="id"><a name="rhs:313" class="">rhs,</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs:306">eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:312">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs:313">rhs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:307">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs:313">rhs</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#valu:307">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:312">v</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs:306">eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:308">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:309">args</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.CSEproof.html#op':310">op',</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args':311">args'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op':310">op'</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:307">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args':311">args'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:308">op</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:307">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:309">args</a></span>).<br/>
<span class="vernacular">Variable</span> <span id="REDUCE.n" class="id"><a name="REDUCE.n" class="">n:</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering">numbering</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCE.valu" class="id"><a name="REDUCE.valu" class="">valu:</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="REDUCE.n_holds" class="id"><a name="REDUCE.n_holds" class="">n_holds:</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="reduce_rec_sound" class="id"><a name="reduce_rec_sound" class="">reduce_rec_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="niter:318" class="id"><a name="niter:318" class="">niter</a></span> <span id="op:319" class="id"><a name="op:319" class="">op</a></span> <span id="args:320" class="id"><a name="args:320" class="">args</a></span> <span id="op':321" class="id"><a name="op':321" class="">op'</a></span> <span id="rl':322" class="id"><a name="rl':322" class="">rl'</a></span> <span id="res:323" class="id"><a name="res:323" class="">res,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#reduce_rec">reduce_rec</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#niter:318">niter</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:319">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:320">args</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.CSEproof.html#op':321">op',</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl':322">rl'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:319">op</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:320">args</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res:323">res</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op':321">op'</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.rs">rs##rl'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res:323">res</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">niter;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> (<span class="gallina-kwd">fun</span> <span id="v:325" class="id"><span id="v:324" class="id"><a name="v:325" class="">v</a></span></span> <span class="id">:</span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.CSE.html#find_valnum_num">find_valnum_num</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:324">v</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_eqs">num_eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span>)) <span class="id">op</span> <span class="id">args</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">as</span> <span class="id">[[op1</span> <span class="id">args1]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id">op1</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.valu">valu</a></span> <span class="id">args1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">res</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H0</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f_sound">f_sound;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#num_holds_eq">num_holds_eq;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_valnum_num_charact">find_valnum_num_charact;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">EH;</span> <span class="id">inv</span> <span class="id">EH;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce_rec">reduce_rec</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span> <span class="id">niter</span> <span class="id">op1</span> <span class="id">args1</span>) <span class="gallina-kwd">as</span> <span class="id">[[op2</span> <span class="id">rl2]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">eapply</span> <span class="id">IHniter;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#regs_valnums">regs_valnums</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span> <span class="id">args1</span>) <span class="gallina-kwd">as</span> <span class="id">[rl|]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_valnums_sound">regs_valnums_sound;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="reduce_sound" class="id"><a name="reduce_sound" class="">reduce_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="op:326" class="id"><a name="op:326" class="">op</a></span> <span id="rl:327" class="id"><a name="rl:327" class="">rl</a></span> <span id="vl:328" class="id"><a name="vl:328" class="">vl</a></span> <span id="op':329" class="id"><a name="op':329" class="">op'</a></span> <span id="rl':330" class="id"><a name="rl':330" class="">rl'</a></span> <span id="res:331" class="id"><a name="res:331" class="">res,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:326">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl:327">rl</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:328">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#op':329">op',</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl':330">rl'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:328">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.rs">rs##rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:326">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.rs">rs##rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res:331">res</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op':329">op'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.rs">rs##rl'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res:331">res</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#reduce">reduce;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce_rec">reduce_rec</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span> <span class="id">4</span>%<span class="id">nat</span> <span class="id">op</span> <span class="id">vl</span>) <span class="gallina-kwd">as</span> <span class="id">[[op1</span> <span class="id">rl1]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:?;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reduce_rec_sound">reduce_rec_sound;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE">REDUCE</a></span>.<br/>
<br/>
<br/>
<span class="vernacular">Section</span> <span id="REDUCELD" class="id"><a name="REDUCELD" class="">REDUCELD</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="REDUCELD.A" class="id"><a name="REDUCELD.A" class="">A:</a></span> <span class="gallina-kwd">Type</span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCELD.f" class="id"><a name="REDUCELD.f" class="">f:</a></span> (<span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#rhs">rhs</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span>).<br/>
<span class="vernacular">Variable</span> <span id="REDUCELD.ge" class="id"><a name="REDUCELD.ge" class="">ge:</a></span> <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCELD.sp" class="id"><a name="REDUCELD.sp" class="">sp:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCELD.rs" class="id"><a name="REDUCELD.rs" class="">rs:</a></span> <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCELD.m" class="id"><a name="REDUCELD.m" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCELD.sem" class="id"><a name="REDUCELD.sem" class="">sem:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="REDUCELD.f_sound" class="id"><a name="REDUCELD.f_sound" class="">f_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="eqs:339" class="id"><a name="eqs:339" class="">eqs</a></span> <span id="valu:340" class="id"><a name="valu:340" class="">valu</a></span> <span id="op:341" class="id"><a name="op:341" class="">op</a></span> <span id="args:342" class="id"><a name="args:342" class="">args</a></span> <span id="op':343" class="id"><a name="op':343" class="">op'</a></span> <span id="args':344" class="id"><a name="args':344" class="">args'</a></span> <span id="r:345" class="id"><a name="r:345" class="">r,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="v:346" class="id"><a name="v:346" class="">v</a></span> <span id="rhs:347" class="id"><a name="rhs:347" class="">rhs,</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs:339">eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:346">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs:347">rhs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:340">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs:347">rhs</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#valu:340">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:346">v</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs:339">eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:341">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:342">args</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.CSEproof.html#op':343">op',</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args':344">args'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:341">op</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:340">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:342">args</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:345">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="r':348" class="id"><a name="r':348" class="">r',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op':343">op'</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:340">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args':344">args'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r':348">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:345">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r':348">r'</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCELD.n" class="id"><a name="REDUCELD.n" class="">n:</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering">numbering</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="REDUCELD.valu" class="id"><a name="REDUCELD.valu" class="">valu:</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="REDUCELD.n_holds" class="id"><a name="REDUCELD.n_holds" class="">n_holds:</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.n">n</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="reduce_rec_lessdef_sound" class="id"><a name="reduce_rec_lessdef_sound" class="">reduce_rec_lessdef_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="niter:353" class="id"><a name="niter:353" class="">niter</a></span> <span id="op:354" class="id"><a name="op:354" class="">op</a></span> <span id="args:355" class="id"><a name="args:355" class="">args</a></span> <span id="op':356" class="id"><a name="op':356" class="">op'</a></span> <span id="rl':357" class="id"><a name="rl':357" class="">rl'</a></span> <span id="r:358" class="id"><a name="r:358" class="">r,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#reduce_rec">reduce_rec</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#niter:353">niter</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:354">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:355">args</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.CSEproof.html#op':356">op',</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl':357">rl'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:354">op</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:355">args</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:358">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="r':359" class="id"><a name="r':359" class="">r',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op':356">op'</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.rs">rs##rl'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r':359">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:358">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r':359">r'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">niter;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.f">f</a></span> (<span class="gallina-kwd">fun</span> <span id="v:361" class="id"><span id="v:360" class="id"><a name="v:361" class="">v</a></span></span> <span class="id">:</span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.CSE.html#find_valnum_num">find_valnum_num</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:360">v</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_eqs">num_eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.n">n</a></span>)) <span class="id">op</span> <span class="id">args</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">as</span> <span class="id">[[op1</span> <span class="id">args1]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:?;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">exists</span> <span id="r':363" class="id"><span id="r':362" class="id"><a name="r':363" class="">r':</a></span></span> <span class="id"><a href="compcert.common.Values.html#val">val,</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.sem">sem</a></span> <span class="id">op1</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.valu">valu</a></span> <span class="id">args1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r':362">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id">r</span> <span class="id"><a href="compcert.backend.CSEproof.html#r':362">r'</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.f_sound">f_sound</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#num_holds_eq">num_holds_eq;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_valnum_num_charact">find_valnum_num_charact;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">EH;</span> <span class="id">inv</span> <span class="id">EH;</span> <span class="id">auto</span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="id">eexact</span> <span class="id">Heqo</span>. <span class="id">eexact</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce_rec">reduce_rec</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.n">n</a></span> <span class="id">niter</span> <span class="id">op1</span> <span class="id">args1</span>) <span class="gallina-kwd">as</span> <span class="id">[[op2</span> <span class="id">rl2]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H1</span>. <span class="id">destruct</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHniter</span>. <span class="id">eexact</span> <span class="id">Heqo0</span>. <span class="id">eexact</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="gallina-kwd">exists</span> <span class="id">x0</span>. <span class="id">split;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_trans">Val.lessdef_trans</a></span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="id">eexact</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#regs_valnums">regs_valnums</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.n">n</a></span> <span class="id">args1</span>) <span class="gallina-kwd">as</span> <span class="id">[rl|]</span> <span class="id">eqn:?;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_valnums_sound">regs_valnums_sound;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="reduce_lessdef_sound" class="id"><a name="reduce_lessdef_sound" class="">reduce_lessdef_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="op:364" class="id"><a name="op:364" class="">op</a></span> <span id="rl:365" class="id"><a name="rl:365" class="">rl</a></span> <span id="vl:366" class="id"><a name="vl:366" class="">vl</a></span> <span id="op':367" class="id"><a name="op':367" class="">op'</a></span> <span id="rl':368" class="id"><a name="rl':368" class="">rl'</a></span> <span id="r:369" class="id"><a name="r:369" class="">r,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:364">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl:365">rl</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:366">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#op':367">op',</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl':368">rl'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:366">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.rs">rs##rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op:364">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.rs">rs##rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:369">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="r':370" class="id"><a name="r':370" class="">r',</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op':367">op'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.rs">rs##rl'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r':370">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:369">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r':370">r'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#reduce">reduce;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce_rec">reduce_rec</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD.n">n</a></span> <span class="id">4</span>%<span class="id">nat</span> <span class="id">op</span> <span class="id">vl</span>) <span class="gallina-kwd">as</span> <span class="id">[[op1</span> <span class="id">rl1]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reduce_rec_lessdef_sound">reduce_rec_lessdef_sound;</a></span> <span class="id">eauto</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">eexact</span> <span class="id">Heqo</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">r</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCELD">REDUCELD</a></span>.<br/>
<br/>
<br/>
<div class="doc">The numberings associated to each instruction by the static analysis
  are inductively satisfiable, in the following sense: the numbering
  at the function entry point is satisfiable, and for any RTL execution
  from <span class="bracket"><span class="id">pc</span></span> to <span class="bracket"><span class="id">pc</span>'</span>, satisfiability at <span class="bracket"><span class="id">pc</span></span> implies
  satisfiability at <span class="bracket"><span class="id">pc</span>'</span>. </div>
<br/>
<span class="vernacular">Theorem</span> <span id="analysis_correct_1" class="id"><a name="analysis_correct_1" class="">analysis_correct_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ge:371" class="id"><a name="ge:371" class="">ge</a></span> <span id="sp:372" class="id"><a name="sp:372" class="">sp</a></span> <span id="rs:373" class="id"><a name="rs:373" class="">rs</a></span> <span id="m:374" class="id"><a name="m:374" class="">m</a></span> <span id="f:375" class="id"><a name="f:375" class="">f</a></span> <span id="vapprox:376" class="id"><a name="vapprox:376" class="">vapprox</a></span> <span id="approx:377" class="id"><a name="approx:377" class="">approx</a></span> <span id="pc:378" class="id"><a name="pc:378" class="">pc</a></span> <span id="pc':379" class="id"><a name="pc':379" class="">pc'</a></span> <span id="i:380" class="id"><a name="i:380" class="">i,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:375">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vapprox:376">vapprox</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:377">approx</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#f:375">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#i:380">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pc':379">pc'</a></span> (<span class="id"><a href="compcert.backend.RTL.html#successors_instr">successors_instr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#i:380">i</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">exists</span> <span id="valu:381" class="id"><a name="valu:381" class="">valu,</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:381">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:371">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:372">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:373">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:374">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:375">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vapprox:376">vapprox</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pc:378">pc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:377">approx!!pc</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">exists</span> <span id="valu:382" class="id"><a name="valu:382" class="">valu,</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:382">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:371">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:372">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:373">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:374">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:377">approx!!pc'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.backend.CSE.html#Numbering.ge">Numbering.ge</a></span> <span class="id">approx!!pc'</span> (<span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span> <span class="id">f</span> <span class="id">vapprox</span> <span class="id">pc</span> <span class="id">approx!!pc</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSE.html#Solver.fixpoint_solution">Solver.fixpoint_solution</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H2</span> <span class="gallina-kwd">as</span> <span class="id">[valu</span> <span class="id">NH]</span>. <span class="gallina-kwd">exists</span> <span class="id">valu;</span> <span class="id">apply</span> <span class="id">H3</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="analysis_correct_entry" class="id"><a name="analysis_correct_entry" class="">analysis_correct_entry:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ge:383" class="id"><a name="ge:383" class="">ge</a></span> <span id="sp:384" class="id"><a name="sp:384" class="">sp</a></span> <span id="rs:385" class="id"><a name="rs:385" class="">rs</a></span> <span id="m:386" class="id"><a name="m:386" class="">m</a></span> <span id="f:387" class="id"><a name="f:387" class="">f</a></span> <span id="vapprox:388" class="id"><a name="vapprox:388" class="">vapprox</a></span> <span id="approx:389" class="id"><a name="approx:389" class="">approx,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:387">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vapprox:388">vapprox</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:389">approx</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="valu:390" class="id"><a name="valu:390" class="">valu,</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:390">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge:383">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:384">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:385">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:386">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:389">approx!!</a></span>(<span class="id"><a href="compcert.backend.CSEproof.html#f:387">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">approx!!</span>(<span class="id">f</span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>))) <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.backend.CSE.html#Solver.L.top">Solver.L.top</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="gallina-kwd">fun</span> <span id="v:392" class="id"><span id="v:391" class="id"><a name="v:392" class="">v</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>). <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#empty_numbering_holds">empty_numbering_holds</a></span>.<br/>
&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSE.html#Solver.fixpoint_entry">Solver.fixpoint_entry</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Semantic preservation </h1>
<br/>
<span class="vernacular">Section</span> <span id="PRESERVATION" class="id"><a name="PRESERVATION" class="">PRESERVATION</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="PRESERVATION.prog" class="id"><a name="PRESERVATION.prog" class="">prog:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="PRESERVATION.tprog" class="id"><a name="PRESERVATION.tprog" class="">tprog</a></span> <span class="id">:</span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="PRESERVATION.TRANSF" class="id"><a name="PRESERVATION.TRANSF" class="">TRANSF:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tprog">tprog</a></span>.<br/>
<span class="vernacular">Let</span> <span id="PRESERVATION.ge" class="id"><a name="PRESERVATION.ge" class="">ge</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>.<br/>
<span class="vernacular">Let</span> <span id="PRESERVATION.tge" class="id"><a name="PRESERVATION.tge" class="">tge</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tprog">tprog</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="symbols_preserved" class="id"><a name="symbols_preserved" class="">symbols_preserved:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="s:396" class="id"><a name="s:396" class="">s:</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s:396">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s:396">s</a></span>.<br/>
<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_match">Genv.find_symbol_match</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.TRANSF">TRANSF</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="senv_preserved" class="id"><a name="senv_preserved" class="">senv_preserved:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tge">tge</a></span>.<br/>
<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.senv_match">Genv.senv_match</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.TRANSF">TRANSF</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="functions_translated" class="id"><a name="functions_translated" class="">functions_translated:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="v:397" class="id"><a name="v:397" class="">v:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span id="f:398" class="id"><a name="f:398" class="">f:</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">RTL.fundef</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:397">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:398">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="cu:399" class="id"><a name="cu:399" class="">cu</a></span> <span id="tf:400" class="id"><a name="tf:400" class="">tf,</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:397">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf:400">tf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:399">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f:398">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf:400">tf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:399">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>.<br/>
<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_match">Genv.find_funct_match</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.TRANSF">TRANSF</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="funct_ptr_translated" class="id"><a name="funct_ptr_translated" class="">funct_ptr_translated:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="b:401" class="id"><a name="b:401" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="f:402" class="id"><a name="f:402" class="">f:</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">RTL.fundef</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b:401">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:402">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="cu:403" class="id"><a name="cu:403" class="">cu</a></span> <span id="tf:404" class="id"><a name="tf:404" class="">tf,</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b:401">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf:404">tf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:403">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f:402">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf:404">tf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:403">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>.<br/>
<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_match">Genv.find_funct_ptr_match</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.TRANSF">TRANSF</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="sig_preserved" class="id"><a name="sig_preserved" class="">sig_preserved:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rm:405" class="id"><a name="rm:405" class="">rm</a></span> <span id="f:406" class="id"><a name="f:406" class="">f</a></span> <span id="tf:407" class="id"><a name="tf:407" class="">tf,</a></span> <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rm:405">rm</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:406">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf:407">tf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#funsig">funsig</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf:407">tf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.RTL.html#funsig">funsig</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:406">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">f;</span> <span class="id">monadInv</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transf_function">transf_function</a></span> <span class="gallina-kwd">in</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#analyze">analyze</a></span> <span class="id">f</span> (<span class="id"><a href="compcert.backend.CSE.html#vanalyze">vanalyze</a></span> <span class="id">rm</span> <span class="id">f</span>))<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">inv</span> <span class="id">EQ;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="transf_function'" class="id"><a name="transf_function'" class="">transf_function'</a></span> (<span id="f:408" class="id"><a name="f:408" class="">f:</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span>) (<span id="approxs:409" class="id"><a name="approxs:409" class="">approxs:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">PMap.t</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering">numbering</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.RTL.html#mkfunction">mkfunction</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#f:408">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_sig">fn_sig</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#f:408">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#f:408">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.CSE.html#transf_code">transf_code</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approxs:409">approxs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:408">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#f:408">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="regs_lessdef" class="id"><a name="regs_lessdef" class="">regs_lessdef</a></span> (<span id="rs1:410" class="id"><a name="rs1:410" class="">rs1</a></span> <span id="rs2:411" class="id"><a name="rs2:411" class="">rs2:</a></span> <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:412" class="id"><a name="r:412" class="">r,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs1:410">rs1#r</a></span>) (<span class="id"><a href="compcert.backend.CSEproof.html#rs2:411">rs2#r</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="regs_lessdef_regs" class="id"><a name="regs_lessdef_regs" class="">regs_lessdef_regs:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rs1:413" class="id"><a name="rs1:413" class="">rs1</a></span> <span id="rs2:414" class="id"><a name="rs2:414" class="">rs2,</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs1:413">rs1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs2:414">rs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rl:415" class="id"><a name="rl:415" class="">rl,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs1:413">rs1##rl</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs2:414">rs2##rl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">rl;</span> <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="set_reg_lessdef" class="id"><a name="set_reg_lessdef" class="">set_reg_lessdef:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:416" class="id"><a name="r:416" class="">r</a></span> <span id="v1:417" class="id"><a name="v1:417" class="">v1</a></span> <span id="v2:418" class="id"><a name="v2:418" class="">v2</a></span> <span id="rs1:419" class="id"><a name="rs1:419" class="">rs1</a></span> <span id="rs2:420" class="id"><a name="rs2:420" class="">rs2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v1:417">v1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v2:418">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs1:419">rs1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs2:420">rs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs1:419">rs1#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v1:417">v1</a></span>) (<span class="id"><a href="compcert.backend.CSEproof.html#rs2:420">rs2#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v2:418">v2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="init_regs_lessdef" class="id"><a name="init_regs_lessdef" class="">init_regs_lessdef:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rl:421" class="id"><a name="rl:421" class="">rl</a></span> <span id="vl1:422" class="id"><a name="vl1:422" class="">vl1</a></span> <span id="vl2:423" class="id"><a name="vl2:423" class="">vl2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl1:422">vl1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl2:423">vl2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl1:422">vl1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl:421">rl</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl2:423">vl2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl:421">rl</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">rl;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gi">Regmap.gi</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gi">Regmap.gi</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="find_function_translated" class="id"><a name="find_function_translated" class="">find_function_translated:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ros:424" class="id"><a name="ros:424" class="">ros</a></span> <span id="rs:425" class="id"><a name="rs:425" class="">rs</a></span> <span id="fd:426" class="id"><a name="fd:426" class="">fd</a></span> <span id="rs':427" class="id"><a name="rs':427" class="">rs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.RTL.html#find_function">find_function</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ros:424">ros</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:425">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#fd:426">fd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:425">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs':427">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="cu:428" class="id"><a name="cu:428" class="">cu</a></span> <span id="tfd:429" class="id"><a name="tfd:429" class="">tfd,</a></span> <span class="id"><a href="compcert.backend.RTL.html#find_function">find_function</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ros:424">ros</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs':427">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tfd:429">tfd</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:428">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#fd:426">fd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tfd:429">tfd</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:428">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#find_function">find_function;</a></span> <span class="id">intros;</span> <span class="id">destruct</span> <span class="id">ros</span>.<br/>
<span class="id">-</span> <span class="id">specialize</span> (<span class="id">H0</span> <span class="id">r</span>). <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#functions_translated">functions_translated;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H2</span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">discriminate</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#funct_ptr_translated">funct_ptr_translated;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The proof of semantic preservation is a simulation argument using
  diagrams of the following form:
<pre>
           st1 --------------- st2
            |                   |
           t|                   |t
            |                   |
            v                   v
           st1'--------------- st2'</pre>
  Left: RTL execution in the original program.  Right: RTL execution in
  the optimized program.  Precondition (top) and postcondition (bottom):
  agreement between the states, including the fact that
  the numbering at <span class="bracket"><span class="id">pc</span></span> (returned by the static analysis) is satisfiable.
</div>
<br/>
<span class="vernacular">Definition</span> <span id="analyze" class="id"><a name="analyze" class="">analyze</a></span> (<span id="cu:430" class="id"><a name="cu:430" class="">cu:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) (<span id="f:431" class="id"><a name="f:431" class="">f:</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#analyze">CSE.analyze</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:431">f</a></span> (<span class="id"><a href="compcert.backend.CSE.html#vanalyze">vanalyze</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:430">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f:431">f</a></span>).<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="match_stackframes" class="id"><a name="match_stackframes" class="">match_stackframes:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_stackframes_nil" class="id"><a name="match_stackframes_nil" class="">match_stackframes_nil:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes:432">match_stackframes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_stackframes_cons" class="id"><a name="match_stackframes_cons" class="">match_stackframes_cons:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="res:434" class="id"><a name="res:434" class="">res</a></span> <span id="sp:435" class="id"><a name="sp:435" class="">sp</a></span> <span id="pc:436" class="id"><a name="pc:436" class="">pc</a></span> <span id="rs:437" class="id"><a name="rs:437" class="">rs</a></span> <span id="f:438" class="id"><a name="f:438" class="">f</a></span> <span id="s:439" class="id"><a name="s:439" class="">s</a></span> <span id="rs':440" class="id"><a name="rs':440" class="">rs'</a></span> <span id="s':441" class="id"><a name="s':441" class="">s'</a></span> <span id="cu:442" class="id"><a name="cu:442" class="">cu</a></span> <span id="approx:443" class="id"><a name="approx:443" class="">approx</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="LINK:444" class="id"><a name="LINK:444" class="">LINK:</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:442">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="ANALYZE:445" class="id"><a name="ANALYZE:445" class="">ANALYZE:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:442">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:438">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:443">approx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SAT:449" class="id"><a name="SAT:449" class="">SAT:</a></span> <span class="gallina-kwd">forall</span> <span id="v:446" class="id"><a name="v:446" class="">v</a></span> <span id="m:447" class="id"><a name="m:447" class="">m,</a></span> <span class="gallina-kwd">exists</span> <span id="valu:448" class="id"><a name="valu:448" class="">valu,</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:448">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:435">sp</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs:437">rs#res</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:446">v</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m:447">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:443">approx!!pc</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RLD:450" class="id"><a name="RLD:450" class="">RLD:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:437">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs':440">rs'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STACKS:451" class="id"><a name="STACKS:451" class="">STACKS:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes:432">match_stackframes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s:439">s</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s':441">s'</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes:432">match_stackframes</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res:434">res</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:438">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:435">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pc:436">pc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:437">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s:439">s</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res:434">res</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#transf_function'">transf_function'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:438">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:443">approx</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#sp:435">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pc:436">pc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs':440">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s':441">s'</a></span>).<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="match_states" class="id"><a name="match_states" class="">match_states:</a></span> <span class="id"><a href="compcert.backend.RTL.html#state">state</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#state">state</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_states_intro" class="id"><a name="match_states_intro" class="">match_states_intro:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:454" class="id"><a name="s:454" class="">s</a></span> <span id="sp:455" class="id"><a name="sp:455" class="">sp</a></span> <span id="pc:456" class="id"><a name="pc:456" class="">pc</a></span> <span id="rs:457" class="id"><a name="rs:457" class="">rs</a></span> <span id="m:458" class="id"><a name="m:458" class="">m</a></span> <span id="s':459" class="id"><a name="s':459" class="">s'</a></span> <span id="rs':460" class="id"><a name="rs':460" class="">rs'</a></span> <span id="m':461" class="id"><a name="m':461" class="">m'</a></span> <span id="f:462" class="id"><a name="f:462" class="">f</a></span> <span id="cu:463" class="id"><a name="cu:463" class="">cu</a></span> <span id="approx:464" class="id"><a name="approx:464" class="">approx</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="LINK:465" class="id"><a name="LINK:465" class="">LINK:</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:463">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="ANALYZE:466" class="id"><a name="ANALYZE:466" class="">ANALYZE:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:463">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:462">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:464">approx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SAT:468" class="id"><a name="SAT:468" class="">SAT:</a></span> <span class="gallina-kwd">exists</span> <span id="valu:467" class="id"><a name="valu:467" class="">valu,</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:467">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:455">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:457">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:458">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:464">approx!!pc</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RLD:469" class="id"><a name="RLD:469" class="">RLD:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:457">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs':460">rs'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MEXT:470" class="id"><a name="MEXT:470" class="">MEXT:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:458">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':461">m'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STACKS:471" class="id"><a name="STACKS:471" class="">STACKS:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s:454">s</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s':459">s'</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_states:452">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s:454">s</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:462">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp:455">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pc:456">pc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs:457">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:458">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s':459">s'</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#transf_function'">transf_function'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:462">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx:464">approx</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#sp:455">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pc:456">pc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs':460">rs'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':461">m'</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_states_call" class="id"><a name="match_states_call" class="">match_states_call:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:472" class="id"><a name="s:472" class="">s</a></span> <span id="f:473" class="id"><a name="f:473" class="">f</a></span> <span id="tf:474" class="id"><a name="tf:474" class="">tf</a></span> <span id="args:475" class="id"><a name="args:475" class="">args</a></span> <span id="m:476" class="id"><a name="m:476" class="">m</a></span> <span id="s':477" class="id"><a name="s':477" class="">s'</a></span> <span id="args':478" class="id"><a name="args':478" class="">args'</a></span> <span id="m':479" class="id"><a name="m':479" class="">m'</a></span> <span id="cu:480" class="id"><a name="cu:480" class="">cu</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="LINK:481" class="id"><a name="LINK:481" class="">LINK:</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:480">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STACKS:482" class="id"><a name="STACKS:482" class="">STACKS:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s:472">s</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s':477">s'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="TFD:483" class="id"><a name="TFD:483" class="">TFD:</a></span> <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu:480">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f:473">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf:474">tf</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="ARGS:484" class="id"><a name="ARGS:484" class="">ARGS:</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:475">args</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args':478">args'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MEXT:485" class="id"><a name="MEXT:485" class="">MEXT:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:476">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':479">m'</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_states:452">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s:472">s</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f:473">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args:475">args</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:476">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s':477">s'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf:474">tf</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args':478">args'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':479">m'</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_states_return" class="id"><a name="match_states_return" class="">match_states_return:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:486" class="id"><a name="s:486" class="">s</a></span> <span id="s':487" class="id"><a name="s':487" class="">s'</a></span> <span id="v:488" class="id"><a name="v:488" class="">v</a></span> <span id="v':489" class="id"><a name="v':489" class="">v'</a></span> <span id="m:490" class="id"><a name="m:490" class="">m</a></span> <span id="m':491" class="id"><a name="m':491" class="">m'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STACK:492" class="id"><a name="STACK:492" class="">STACK:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s:486">s</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s':487">s'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RES:493" class="id"><a name="RES:493" class="">RES:</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:488">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v':489">v'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MEXT:494" class="id"><a name="MEXT:494" class="">MEXT:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:490">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':491">m'</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_states:452">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s:486">s</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v:488">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m:490">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s':487">s'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v':489">v'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m':491">m'</a></span>).<br/>
<br/>
<span class="vernacular">Ltac</span> <span class="id">TransfInstr</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">goal</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">H1:</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id">?pc</span> <span class="id">?c</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">?instr</span>)<span class="id">,</span> <span class="id">f:</span> <span class="id"><a href="compcert.backend.RTL.html#function">function,</a></span> <span class="id">approx:</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">PMap.t</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering">numbering</a></span> <span class="id">|-</span> <span class="id">_</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cut</span> ((<span class="id"><a href="compcert.backend.CSEproof.html#transf_function'">transf_function'</a></span> <span class="id">f</span> <span class="id">approx</span>).(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.CSE.html#transf_instr">transf_instr</a></span> <span class="id">approx!!pc</span> <span class="id">instr</span>))<span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[</span> <span class="id">simpl</span> <span class="id">transf_instr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSEproof.html#transf_function'">transf_function',</a></span> <span class="id"><a href="compcert.backend.CSE.html#transf_code">transf_code;</a></span> <span class="id">simpl;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gmap">PTree.gmap</a></span><span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map;</a></span> <span class="id">rewrite</span> <span class="id">H1;</span> <span class="id">reflexivity</span> <span class="id">]</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">The proof of simulation is a case analysis over the transition
  in the source code. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="transf_step_correct" class="id"><a name="transf_step_correct" class="">transf_step_correct:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s1:495" class="id"><a name="s1:495" class="">s1</a></span> <span id="t:496" class="id"><a name="t:496" class="">t</a></span> <span id="s2:497" class="id"><a name="s2:497" class="">s2,</a></span> <span class="id"><a href="compcert.backend.RTL.html#step">step</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1:495">s1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#t:496">t</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s2:497">s2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s1':498" class="id"><a name="s1':498" class="">s1'</a></span> (<span id="MS:499" class="id"><a name="MS:499" class="">MS:</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1:495">s1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1':498">s1'</a></span>) (<span id="SOUND:500" class="id"><a name="SOUND:500" class="">SOUND:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1:495">s1</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="s2':501" class="id"><a name="s2':501" class="">s2',</a></span> <span class="id"><a href="compcert.backend.RTL.html#step">step</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tge">tge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1':498">s1'</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#t:496">t</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s2':501">s2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s2:497">s2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s2':501">s2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros;</span> <span class="id">inv</span> <span class="id">MS;</span> <span class="id">try</span> (<span class="id">TransfInstr;</span> <span class="id">intro</span> <span class="id">C</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Inop&nbsp;*)</span><br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Inop">exec_Inop;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Iop&nbsp;*)</span><br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.x86.Op.html#is_trivial_op">is_trivial_op</a></span> <span class="id">op</span>) <span class="id">eqn:TRIV</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;unchanged&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation_lessdef">eval_operation_lessdef</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs;</a></span> <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[v'</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop</a></span> <span class="gallina-kwd">with</span> (<span class="id">v</span> <span class="id">:=</span> <span class="id">v'</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">A</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation_preserved">eval_operation_preserved</a></span>. <span class="id">exact</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">SAT</span> <span class="gallina-kwd">as</span> <span class="id">[valu</span> <span class="id">NH]</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_op_holds">add_op_holds;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef;</a></span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;possibly&nbsp;optimized&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">approx!!pc</span> <span class="id">args</span>) <span class="gallina-kwd">as</span> <span class="id">[n1</span> <span class="id">vl]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">SAT</span> <span class="gallina-kwd">as</span> <span class="id">[valu1</span> <span class="id">NH1]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">valu2</span> &amp; <span class="id">NH2</span> &amp; <span class="id">EQ</span> &amp; <span class="id">AG</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#find_rhs">find_rhs</a></span> <span class="id">n1</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Op">Op</a></span> <span class="id">op</span> <span class="id">vl</span>)) <span class="gallina-kwd">as</span> <span class="id">[r|]</span> <span class="id">eqn:?</span>.<br/>
<span class="id">*</span> <span class="comment">(*&nbsp;replaced&nbsp;by&nbsp;move&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_rhs_sound">find_rhs_sound;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">v'</span> &amp; <span class="id">EV</span> &amp; <span class="id">LD</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">v'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">v</span>) <span class="gallina-kwd">by</span> (<span class="id">inv</span> <span class="id">EV;</span> <span class="id">congruence</span>). <span class="id">subst</span> <span class="id">v'</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_op_holds">add_op_holds;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_trans">Val.lessdef_trans</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
<span class="id">*</span> <span class="comment">(*&nbsp;possibly&nbsp;simplified&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span> <span class="id"><a href="compcert.x86.Op.html#operation">operation</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#combine_op">combine_op</a></span> <span class="id">n1</span> <span class="id">op</span> <span class="id">args</span> <span class="id">vl</span>) <span class="gallina-kwd">as</span> <span class="id">[op'</span> <span class="id">args']</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.backend.CSEproof.html#reduce_lessdef_sound">reduce_lessdef_sound</a></span> <span class="id"><a href="compcert.x86.Op.html#operation">operation</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#combine_op">combine_op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> (<span class="gallina-kwd">fun</span> <span id="op:504" class="id"><span id="op:502" class="id"><a name="op:504" class="">op</a></span></span> <span id="vl:505" class="id"><span id="vl:503" class="id"><a name="vl:505" class="">vl</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id">sp</span> <span class="id"><a href="compcert.backend.CSEproof.html#op:502">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:503">vl</a></span> <span class="id">m</span>))<span class="id">;</span> <span class="id">intros;eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.CombineOpproof.html#combine_op_sound">combine_op_sound;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H1</span> <span class="gallina-kwd">as</span> (<span class="id">v'</span> &amp; <span class="id">EV'</span> &amp; <span class="id">LD'</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.x86.Op.html#eval_operation_lessdef">eval_operation_lessdef</a></span>). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs;</a></span> <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">MEXT</span>. <span class="id">eexact</span> <span class="id">EV'</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[v''</span> <span class="id">[EV''</span> <span class="id">LD'']]</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop</a></span>. <span class="id">eexact</span> <span class="id">C</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation_preserved">eval_operation_preserved</a></span>. <span class="id">eexact</span> <span class="id">EV''</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_op_holds">add_op_holds;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> (<span class="id"><a href="compcert.common.Values.html#Val.lessdef_trans">Val.lessdef_trans</a></span> <span class="id">v</span> <span class="id">v'</span> <span class="id">v''</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Iload&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">approx!!pc</span> <span class="id">args</span>) <span class="gallina-kwd">as</span> <span class="id">[n1</span> <span class="id">vl]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">SAT</span> <span class="gallina-kwd">as</span> <span class="id">[valu1</span> <span class="id">NH1]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">valu2</span> &amp; <span class="id">NH2</span> &amp; <span class="id">EQ</span> &amp; <span class="id">AG</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#find_rhs">find_rhs</a></span> <span class="id">n1</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Load">Load</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">vl</span>)) <span class="gallina-kwd">as</span> <span class="id">[r|]</span> <span class="id">eqn:?</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;replaced&nbsp;by&nbsp;move&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_rhs_sound">find_rhs_sound;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">v'</span> &amp; <span class="id">EV</span> &amp; <span class="id">LD</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">v'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">v</span>) <span class="gallina-kwd">by</span> (<span class="id">inv</span> <span class="id">EV;</span> <span class="id">congruence</span>). <span class="id">subst</span> <span class="id">v'</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_load_holds">add_load_holds;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef;</a></span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_trans">Val.lessdef_trans</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;load&nbsp;is&nbsp;preserved,&nbsp;but&nbsp;addressing&nbsp;is&nbsp;possibly&nbsp;simplified&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span> <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#combine_addr">combine_addr</a></span> <span class="id">n1</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span>) <span class="gallina-kwd">as</span> <span class="id">[addr'</span> <span class="id">args']</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">ADDR:</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id">sp</span> <span class="id">addr'</span> <span class="id">rs##args'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reduce_sound">reduce_sound</a></span> <span class="gallina-kwd">with</span> (<span class="id">sem</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="addr:508" class="id"><span id="addr:506" class="id"><a name="addr:508" class="">addr</a></span></span> <span id="vl:509" class="id"><span id="vl:507" class="id"><a name="vl:509" class="">vl</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id">sp</span> <span class="id"><a href="compcert.backend.CSEproof.html#addr:506">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:507">vl</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.x86.CombineOpproof.html#combine_addr_sound">combine_addr_sound;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_lessdef">eval_addressing_lessdef</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs;</a></span> <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">ADDR</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[a'</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">ADDR':</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tge">tge</a></span> <span class="id">sp</span> <span class="id">addr'</span> <span class="id">rs'##args'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a'</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">A</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_preserved">eval_addressing_preserved</a></span>. <span class="id">exact</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_extends">Mem.loadv_extends</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[v'</span> <span class="id">[X</span> <span class="id">Y]]</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iload">exec_Iload;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_load_holds">add_load_holds;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef;</a></span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Istore&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">approx!!pc</span> <span class="id">args</span>) <span class="gallina-kwd">as</span> <span class="id">[n1</span> <span class="id">vl]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">SAT</span> <span class="gallina-kwd">as</span> <span class="id">[valu1</span> <span class="id">NH1]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">valu2</span> &amp; <span class="id">NH2</span> &amp; <span class="id">EQ</span> &amp; <span class="id">AG</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span> <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#combine_addr">combine_addr</a></span> <span class="id">n1</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span>) <span class="gallina-kwd">as</span> <span class="id">[addr'</span> <span class="id">args']</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">ADDR:</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id">sp</span> <span class="id">addr'</span> <span class="id">rs##args'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reduce_sound">reduce_sound</a></span> <span class="gallina-kwd">with</span> (<span class="id">sem</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="addr:512" class="id"><span id="addr:510" class="id"><a name="addr:512" class="">addr</a></span></span> <span id="vl:513" class="id"><span id="vl:511" class="id"><a name="vl:513" class="">vl</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id">sp</span> <span class="id"><a href="compcert.backend.CSEproof.html#addr:510">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:511">vl</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.x86.CombineOpproof.html#combine_addr_sound">combine_addr_sound;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_lessdef">eval_addressing_lessdef</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs;</a></span> <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">ADDR</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[a'</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">ADDR':</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tge">tge</a></span> <span class="id">sp</span> <span class="id">addr'</span> <span class="id">rs'##args'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a'</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">A</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_preserved">eval_addressing_preserved</a></span>. <span class="id">exact</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev_extends">Mem.storev_extends</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[m''</span> <span class="id">[X</span> <span class="id">Y]]</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Istore">exec_Istore;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">InvSoundState</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_store_result_hold">add_store_result_hold;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_loads_after_store_holds">kill_loads_after_store_holds;</a></span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Icall&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_function_translated">find_function_translated;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">cu'</span> &amp; <span class="id">tf</span> &amp; <span class="id">FIND'</span> &amp; <span class="id">TRANSF'</span> &amp; <span class="id">LINK'</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Icall">exec_Icall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#sig_preserved">sig_preserved;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes_cons">match_stackframes_cons</a></span> <span class="gallina-kwd">with</span> (<span class="id">cu</span> <span class="id">:=</span> <span class="id">cu</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="gallina-kwd">fun</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>)<span class="id">;</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#empty_numbering_holds">empty_numbering_holds</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs;</a></span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Itailcall&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_function_translated">find_function_translated;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">cu'</span> &amp; <span class="id">tf</span> &amp; <span class="id">FIND'</span> &amp; <span class="id">TRANSF'</span> &amp; <span class="id">LINK'</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[m''</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Itailcall">exec_Itailcall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#sig_preserved">sig_preserved;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs;</a></span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Ibuiltin&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (@<span class="id"><a href="compcert.common.Events.html#eval_builtin_args_lessdef">eval_builtin_args_lessdef</a></span> <span class="id">_</span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:516" class="id"><span id="r:514" class="id"><a name="r:516" class="">r</a></span></span> <span class="id">=&gt;</span> <span class="id">rs#r</span>) (<span class="gallina-kwd">fun</span> <span id="r:517" class="id"><span id="r:515" class="id"><a name="r:517" class="">r</a></span></span> <span class="id">=&gt;</span> <span class="id">rs'#r</span>))<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">vargs'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_extends">external_call_mem_extends;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">v'</span> &amp; <span class="id">m1'</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span> &amp; <span class="id">S</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ibuiltin">exec_Ibuiltin;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#eval_builtin_args_preserved">eval_builtin_args_preserved</a></span> <span class="gallina-kwd">with</span> (<span class="id">ge1</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span>)<span class="id">;</span> <span class="id">eauto</span>. <span class="id">exact</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_symbols_preserved">external_call_symbols_preserved;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#senv_preserved">senv_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
<span class="id">*</span> <span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">SAT</span> <span class="gallina-kwd">as</span> <span class="id">[valu</span> <span class="id">NH]</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">CASE1:</span> <span class="gallina-kwd">exists</span> <span id="valu:519" class="id"><span id="valu:518" class="id"><a name="valu:519" class="">valu,</a></span></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:518">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id">sp</span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id">res</span> <span class="id">vres</span> <span class="id">rs</span>) <span class="id">m'</span> <span class="id"><a href="compcert.backend.CSEdomain.html#empty_numbering">empty_numbering</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="gallina-kwd">exists</span> <span class="id">valu;</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#empty_numbering_holds">empty_numbering_holds</a></span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">CASE2:</span> <span class="id">m'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="valu:521" class="id"><span id="valu:520" class="id"><a name="valu:521" class="">valu,</a></span></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:520">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id">sp</span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id">res</span> <span class="id">vres</span> <span class="id">rs</span>) <span class="id">m'</span> (<span class="id"><a href="compcert.backend.CSE.html#set_res_unknown">set_res_unknown</a></span> <span class="id">approx#pc</span> <span class="id">res</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">intros</span>. <span class="id">subst</span> <span class="id">m'</span>. <span class="gallina-kwd">exists</span> <span class="id">valu</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_res_unknown_holds">set_res_unknown_holds;</a></span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">CASE3:</span> <span class="gallina-kwd">exists</span> <span id="valu:523" class="id"><span id="valu:522" class="id"><a name="valu:523" class="">valu,</a></span></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu:522">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.ge">ge</a></span> <span class="id">sp</span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id">res</span> <span class="id">vres</span> <span class="id">rs</span>) <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.CSE.html#set_res_unknown">set_res_unknown</a></span> (<span class="id"><a href="compcert.backend.CSE.html#kill_all_loads">kill_all_loads</a></span> <span class="id">approx#pc</span>) <span class="id">res</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="gallina-kwd">exists</span> <span class="id">valu</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_res_unknown_holds">set_res_unknown_holds</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_all_loads_hold">kill_all_loads_hold;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ef</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">CASE1</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Builtins.html#lookup_builtin_function">lookup_builtin_function</a></span> <span class="id">name</span> <span class="id">sg</span>) <span class="gallina-kwd">as</span> <span class="id">[bf|]</span> <span class="id">eqn:LK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">++</span> <span class="id">apply</span> <span class="id">CASE2</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">rewrite</span> <span class="id">LK</span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">inv</span> <span class="id">H1</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">++</span> <span class="id">apply</span> <span class="id">CASE3</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">CASE1</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">CASE2;</span> <span class="id">inv</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">CASE3</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">CASE1</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">CASE1</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H3;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H4;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">valu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_res_unknown_holds">set_res_unknown_holds</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">InvSoundState</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#vanalyze">vanalyze;</a></span> <span class="id">rewrite</span> <span class="id">AN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id">bsrc</span> <span class="id">osrc</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr_arg">aaddr_arg</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id">ae</span> <span class="id">am</span>) <span class="id">a0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr_arg_sound_1">aaddr_arg_sound_1;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id">bdst</span> <span class="id">odst</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr_arg">aaddr_arg</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id">ae</span> <span class="id">am</span>) <span class="id">a1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr_arg_sound_1">aaddr_arg_sound_1;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_memcpy_holds">add_memcpy_holds;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_loads_after_storebytes_holds">kill_loads_after_storebytes_holds;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">Mem.loadbytes_length</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">CASE2;</span> <span class="id">inv</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">CASE2;</span> <span class="id">inv</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">CASE1</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">CASE2;</span> <span class="id">inv</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
<span class="id">*</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Registers.html#set_res_lessdef">set_res_lessdef;</a></span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Icond&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">approx!!pc</span> <span class="id">args</span>) <span class="gallina-kwd">as</span> <span class="id">[n1</span> <span class="id">vl]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> <span class="id">SAT;</span> <span class="id">intros</span> <span class="id">valu1</span> <span class="id">NH1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">valu2</span> &amp; <span class="id">NH2</span> &amp; <span class="id">EQ</span> &amp; <span class="id">AG</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.x86.CombineOp.html#combine_cond'">combine_cond'</a></span> <span class="id">cond</span> <span class="id">vl</span>) <span class="id">eqn:?;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Inop">exec_Inop;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id">cond</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id">valu2</span> <span class="id">vl</span>) <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>) <span class="gallina-kwd">by</span> (<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">EQ;</span> <span class="id">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.x86.CombineOpproof.html#combine_cond'_sound">combine_cond'_sound</a></span> <span class="id">m</span> <span class="id">valu2</span> <span class="id">cond</span> <span class="id">vl</span> <span class="id">b</span> <span class="id">b0</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">b0;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto;</span> <span class="id">simpl;</span> <span class="id">auto;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span> <span class="id"><a href="compcert.x86.Op.html#condition">condition</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#combine_cond">combine_cond</a></span> <span class="id">n1</span> <span class="id">cond</span> <span class="id">args</span> <span class="id">vl</span>) <span class="gallina-kwd">as</span> <span class="id">[cond'</span> <span class="id">args']</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">RES:</span> <span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id">cond'</span> <span class="id">rs##args'</span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reduce_sound">reduce_sound</a></span> <span class="gallina-kwd">with</span> (<span class="id">sem</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="cond:526" class="id"><span id="cond:524" class="id"><a name="cond:526" class="">cond</a></span></span> <span id="vl:527" class="id"><span id="vl:525" class="id"><a name="vl:527" class="">vl</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cond:524">cond</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl:525">vl</a></span> <span class="id">m</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.x86.CombineOpproof.html#combine_cond_sound">combine_cond_sound;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Icond">exec_Icond;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.x86.Op.html#eval_condition_lessdef">eval_condition_lessdef;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">b;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto;</span> <span class="id">simpl;</span> <span class="id">auto;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Ijumptable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">RLD</span> <span class="id">arg</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">intro</span> <span class="id">LD;</span> <span class="id">inv</span> <span class="id">LD</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ijumptable">exec_Ijumptable;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1;</a></span> <span class="id">eauto</span>. <span class="id">simpl</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_nth_z_in">list_nth_z_in;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Ireturn&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[m''</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ireturn">exec_Ireturn;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">or;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;internal&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TFD</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transf_function">transf_function</a></span> <span class="gallina-kwd">in</span> <span class="id">EQ</span>. <span class="id">fold</span> (<span class="id"><a href="compcert.backend.CSEproof.html#analyze">analyze</a></span> <span class="id">cu</span> <span class="id">f</span>) <span class="gallina-kwd">in</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.CSEproof.html#analyze">analyze</a></span> <span class="id">cu</span> <span class="id">f</span>) <span class="gallina-kwd">as</span> <span class="id">[approx|]</span> <span class="id">eqn:?;</span> <span class="id">inv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_extends">Mem.alloc_extends</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">m''</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_function_internal">exec_function_internal;</a></span> <span class="id">simpl;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_entry">analysis_correct_entry;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#init_regs_lessdef">init_regs_lessdef;</a></span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;external&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TFD</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_extends">external_call_mem_extends;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">v'</span> &amp; <span class="id">m1'</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span> &amp; <span class="id">S</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_function_external">exec_function_external;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_symbols_preserved">external_call_symbols_preserved;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#senv_preserved">senv_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STACK</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_return">exec_return;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="transf_initial_states" class="id"><a name="transf_initial_states" class="">transf_initial_states:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="st1:528" class="id"><a name="st1:528" class="">st1,</a></span> <span class="id"><a href="compcert.backend.RTL.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st1:528">st1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="st2:529" class="id"><a name="st2:529" class="">st2,</a></span> <span class="id"><a href="compcert.backend.RTL.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tprog">tprog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st2:529">st2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st1:528">st1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st2:529">st2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#funct_ptr_translated">funct_ptr_translated;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">cu</span> &amp; <span class="id">tf</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">tf</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">m0</span>)<span class="id">;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_match">Genv.init_mem_match</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.TRANSF">TRANSF</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tprog">tprog</a></span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Linking.html#match_program_main">match_program_main;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H3</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#sig_preserved">sig_preserved;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">eauto</span>. <span class="id">constructor</span>. <span class="id">auto</span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends_refl">Mem.extends_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="transf_final_states" class="id"><a name="transf_final_states" class="">transf_final_states:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="st1:530" class="id"><a name="st1:530" class="">st1</a></span> <span id="st2:531" class="id"><a name="st2:531" class="">st2</a></span> <span id="r:532" class="id"><a name="r:532" class="">r,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st1:530">st1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st2:531">st2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#final_state">final_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st1:530">st1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:532">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#final_state">final_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st2:531">st2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r:532">r</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">RES</span>. <span class="id">inv</span> <span class="id">STACK</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="transf_program_correct" class="id"><a name="transf_program_correct" class="">transf_program_correct:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="compcert.backend.RTL.html#semantics">RTL.semantics</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#semantics">RTL.semantics</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tprog">tprog</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation_step">forward_simulation_step</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">match_states</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="s1:535" class="id"><span id="s1:533" class="id"><a name="s1:535" class="">s1</a></span></span> <span id="s2:536" class="id"><span id="s2:534" class="id"><a name="s2:536" class="">s2</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1:533">s1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1:533">s1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s2:534">s2</a></span>).<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#senv_preserved">senv_preserved</a></span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#transf_initial_states">transf_initial_states;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[s2</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">s2</span>. <span class="id">split</span>. <span class="id">auto</span>. <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_initial">sound_initial;</a></span> <span class="id">auto</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#transf_final_states">transf_final_states;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#transf_step_correct">transf_step_correct;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[s2'</span> <span class="id">[A</span> <span class="id">B]]</span>. <span class="gallina-kwd">exists</span> <span class="id">s2';</span> <span class="id">split</span>. <span class="id">auto</span>. <span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_step">sound_step;</a></span> <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION">PRESERVATION</a></span>.<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
