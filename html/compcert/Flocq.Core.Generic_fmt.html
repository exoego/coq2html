
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Generic_fmt</title>
<meta name="description" content="Documentation of Coq module Generic_fmt" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module Generic_fmt</h1>
<br/>
<h1> What is a real number belonging to a format, and many properties. </h1>
<br/>
<span class="vernacular">From</span> <span class="id">Coq</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.ZArith.html">ZArith</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Reals.html">Reals</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.micromega.Lia.html">Lia</a></span>.<br/>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="Flocq.Core.Zaux.html">Zaux</a></span> <span class="id"><a href="Flocq.Core.Raux.html">Raux</a></span> <span class="id"><a href="Flocq.Core.Defs.html">Defs</a></span> <span class="id"><a href="Flocq.Core.Round_pred.html">Round_pred</a></span> <span class="id"><a href="Flocq.Core.Float_prop.html">Float_prop</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="Generic" class="id"><a name="Generic" class="">Generic</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Generic.beta" class="id"><a name="Generic.beta" class="">beta</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Zaux.html#radix">radix</a></span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span id="bpow" class="id"><a name="bpow" class="">bpow</a></span> <span class="id">e</span> <span class="id">:=</span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">e</span>).<br/>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format" class="id"><a name="Generic.Format" class="">Format</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Generic.Format.fexp" class="id"><a name="Generic.Format.fexp" class="">fexp</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<div class="doc">To be a good fexp </div>
<br/>
<span class="vernacular">Class</span> <span id="Valid_exp" class="id"><span id="Valid_exp" class="id"><a name="Valid_exp" class="">Valid_exp</a></span></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span id="valid_exp" class="id"><span id="valid_exp" class="id"><a name="valid_exp" class="">valid_exp</a></span></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="k:4" class="id"><a name="k:4" class="">k</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z,</a></span><br/>
&nbsp;&nbsp;( (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:4">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:4">k</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#k:4">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:4">k</a></span>)%<span class="id">Z</span> ) <span class="id">/\</span><br/>
&nbsp;&nbsp;( (<span class="id"><a href="Flocq.Core.Generic_fmt.html#k:4">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:4">k</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:4">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:4">k</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:5" class="id"><a name="l:5" class="">l</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#l:5">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:4">k</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#l:5">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:4">k</a></span> ).<br/>
<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="valid_exp_:7" class="id"><a name="valid_exp_:7" class="">valid_exp_</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="valid_exp_large" class="id"><a name="valid_exp_large" class="">valid_exp_large</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="k:8" class="id"><a name="k:8" class="">k</a></span> <span id="l:9" class="id"><a name="l:9" class="">l,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:8">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:8">k</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#k:8">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#l:9">l</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#l:9">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#l:9">l</a></span>)%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
<span class="id">intros</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hk</span> <span class="id">H</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Znot_ge_lt">Znot_ge_lt</a></span>.<br/>
<span class="id">intros</span> <span class="id">Hl</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ge_le">Z.ge_le</a></span> <span class="gallina-kwd">in</span> <span class="id">Hl</span>.<br/>
<span class="id">assert</span> (<span class="id">H'</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp">valid_exp</a></span> <span class="id">l</span>) <span class="id">Hl</span>) <span class="id">k</span>).<br/>
<span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="valid_exp_large'" class="id"><a name="valid_exp_large'" class="">valid_exp_large'</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="k:10" class="id"><a name="k:10" class="">k</a></span> <span id="l:11" class="id"><a name="l:11" class="">l,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:10">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:10">k</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#l:11">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:10">k</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#l:11">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#k:10">k</a></span>)%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
<span class="id">intros</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hk</span> <span class="id">H</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Znot_ge_lt">Znot_ge_lt</a></span>.<br/>
<span class="id">intros</span> <span class="id">H'</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ge_le">Z.ge_le</a></span> <span class="gallina-kwd">in</span> <span class="id">H'</span>.<br/>
<span class="id">assert</span> (<span class="id">Hl</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H'</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp">valid_exp</a></span> <span class="gallina-kwd">in</span> <span class="id">Hl</span>.<br/>
<span class="id">assert</span> (<span class="id">H1</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hl</span> <span class="id">k</span> <span class="id">H'</span>).<br/>
<span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="cexp" class="id"><a name="cexp" class="">cexp</a></span> <span id="x:12" class="id"><a name="x:12" class="">x</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:12">x</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="canonical" class="id"><a name="canonical" class="">canonical</a></span> (<span id="f:13" class="id"><a name="f:13" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Defs.html#float">float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Defs.html#Fexp">Fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f:13">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f:13">f</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="scaled_mantissa" class="id"><a name="scaled_mantissa" class="">scaled_mantissa</a></span> <span id="x:14" class="id"><a name="x:14" class="">x</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:14">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:14">x</a></span>))%<span class="id">R</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="generic_format" class="id"><a name="generic_format" class="">generic_format</a></span> (<span id="x:15" class="id"><a name="x:15" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:15">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:15">x</a></span>)) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:15">x</a></span>)).<br/>
<br/>
<div class="doc">Basic facts </div>
<span class="vernacular">Theorem</span> <span id="generic_format_0" class="id"><a name="generic_format_0" class="">generic_format_0</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR,</a></span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_0">F2R_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="cexp_opp" class="id"><a name="cexp_opp" class="">cexp_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:16" class="id"><a name="x:16" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:16">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_opp">mag_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="cexp_abs" class="id"><a name="cexp_abs" class="">cexp_abs</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:17" class="id"><a name="x:17" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:17">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:17">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_abs">mag_abs</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="canonical_generic_format" class="id"><a name="canonical_generic_format" class="">canonical_generic_format</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:18" class="id"><a name="x:18" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:18">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="f:19" class="id"><a name="f:19" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Defs.html#float">float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:18">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f:19">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f:19">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">eexists</span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>).<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hx</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_bpow" class="id"><a name="generic_format_bpow" class="">generic_format_bpow</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e:20" class="id"><a name="e:20" class="">e,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#e:20">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:20">e</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:20">e</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
<span class="id">intros</span> <span class="id">e</span> <span class="id">H</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_bpow">mag_bpow</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id">e</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id">e</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>))).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_bpow">F2R_bpow</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_change_exp">F2R_change_exp</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">H</span>).<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_l">Zmult_1_l</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_bpow'" class="id"><a name="generic_format_bpow'" class="">generic_format_bpow'</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e:21" class="id"><a name="e:21" class="">e,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:21">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:21">e</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:21">e</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
<span class="id">intros</span> <span class="id">e</span> <span class="id">He</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.valid_exp_">valid_exp_</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp">valid_exp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">H</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_F2R" class="id"><a name="generic_format_F2R" class="">generic_format_F2R</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:22" class="id"><a name="m:22" class="">m</a></span> <span id="e:23" class="id"><a name="e:23" class="">e,</a></span><br/>
&nbsp;&nbsp;( <span class="id"><a href="Flocq.Core.Generic_fmt.html#m:22">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#m:22">m</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:23">e</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:23">e</a></span> )%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#m:22">m</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:23">e</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
<span class="id">intros</span> <span class="id">m</span> <span class="id">e</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eq_dec">Z.eq_dec</a></span> <span class="id">m</span> <span class="id">0</span>) <span class="gallina-kwd">as</span> <span class="id">[Zm|Zm]</span>.<br/>
<span class="id">intros</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> <span class="id">Zm,</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_0">F2R_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">set</span> (<span class="id">e'</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">m</span> <span class="id">e</span>))).<br/>
<span class="id">intros</span> <span class="id">He</span>.<br/>
<span class="id">specialize</span> (<span class="id">He</span> <span class="id">Zm</span>).<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="gallina-kwd">at</span> <span class="id">3</span>. <span class="id">simpl</span>.<br/>
<span class="id">rewrite</span>  <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_change_exp">F2R_change_exp</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">He</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_eq">F2R_eq</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.auxiliary.html#Zle_left">Zle_left</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="generic_format_F2R'" class="id"><a name="generic_format_F2R'" class="">generic_format_F2R'</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="x:24" class="id"><a name="x:24" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span>) (<span id="f:25" class="id"><a name="f:25" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Defs.html#float">float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f:25">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:24">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:24">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:24">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Defs.html#Fexp">Fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f:25">f</a></span>)%<span class="id">Z</span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:24">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
<span class="id">intros</span> <span class="id">x</span> <span class="id">f</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H1;</span> <span class="id">destruct</span> <span class="id">f</span> <span class="gallina-kwd">as</span> (<span class="id">m,e</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">intros</span> <span class="id">H3</span>.<br/>
<span class="id">rewrite</span> <span class="id">H1;</span> <span class="id">apply</span> <span class="id">H2</span>.<br/>
<span class="id">intros</span> <span class="id">Y;</span> <span class="id">apply</span> <span class="id">H3</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#eq_0_F2R">eq_0_F2R</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">e</span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">H1</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="canonical_opp" class="id"><a name="canonical_opp" class="">canonical_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:26" class="id"><a name="m:26" class="">m</a></span> <span id="e:27" class="id"><a name="e:27" class="">e,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#m:26">m</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:27">e</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-m</a></span>) <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:27">e</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="id">intros</span> <span class="id">m</span> <span class="id">e</span> <span class="id">H</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zopp">F2R_Zopp,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="canonical_abs" class="id"><a name="canonical_abs" class="">canonical_abs</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:28" class="id"><a name="m:28" class="">m</a></span> <span id="e:29" class="id"><a name="e:29" class="">e,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#m:28">m</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:29">e</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#m:28">m</a></span>) <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:29">e</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
<span class="id">intros</span> <span class="id">m</span> <span class="id">e</span> <span class="id">H</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_abs">cexp_abs</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="canonical_0" class="id"><a name="canonical_0" class="">canonical_0</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">0</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">0</span>%<span class="id">R</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical;</a></span> <span class="id">simpl</span> <span class="id">;</span> <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_0">F2R_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="canonical_unique" class="id"><a name="canonical_unique" class="">canonical_unique</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f1:30" class="id"><a name="f1:30" class="">f1</a></span> <span id="f2:31" class="id"><a name="f2:31" class="">f2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f1:30">f1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f2:31">f2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f1:30">f1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f2:31">f2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#f1:30">f1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f2:31">f2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
<span class="id">intros</span> (<span class="id">m1,</span> <span class="id">e1</span>) (<span class="id">m2,</span> <span class="id">e2</span>).<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">intros</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H2</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">clear</span> <span class="id">H2</span>.<br/>
<span class="id">rewrite</span> <span class="id">H1</span> <span class="gallina-kwd">in</span> <span class="id">H</span> <span class="id">|-</span> <span class="id">*</span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f_equal">f_equal</a></span> (<span class="gallina-kwd">fun</span> <span id="m:33" class="id"><span id="m:32" class="id"><a name="m:33" class="">m</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#m:32">m</a></span> <span class="id">e2</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#eq_F2R">eq_F2R</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">H</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="scaled_mantissa_generic" class="id"><a name="scaled_mantissa_generic" class="">scaled_mantissa_generic</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:34" class="id"><a name="x:34" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:34">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:34">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:34">x</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">pattern</span> <span class="id">x</span> <span class="gallina-kwd">at</span> <span class="id">1</span> <span class="id">3</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="scaled_mantissa_mult_bpow" class="id"><a name="scaled_mantissa_mult_bpow" class="">scaled_mantissa_mult_bpow</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:35" class="id"><a name="x:35" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:35">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:35">x</a></span>))%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:35">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_l">Zplus_opp_l</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="scaled_mantissa_0" class="id"><a name="scaled_mantissa_0" class="">scaled_mantissa_0</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="scaled_mantissa_opp" class="id"><a name="scaled_mantissa_opp" class="">scaled_mantissa_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:36" class="id"><a name="x:36" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-scaled_mantissa</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:36">x</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse">Ropp_mult_distr_l_reverse</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="scaled_mantissa_abs" class="id"><a name="scaled_mantissa_abs" class="">scaled_mantissa_abs</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:37" class="id"><a name="x:37" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:37">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:37">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_abs">cexp_abs,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f_equal">f_equal</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_opp" class="id"><a name="generic_format_opp" class="">generic_format_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:38" class="id"><a name="x:38" class="">x,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:38">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_opp">Ztrunc_opp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f_equal">f_equal</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_abs" class="id"><a name="generic_format_abs" class="">generic_format_abs</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:39" class="id"><a name="x:39" class="">x,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:39">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:39">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_abs">scaled_mantissa_abs,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_abs">cexp_abs</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_abs">Ztrunc_abs</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f_equal">f_equal</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_abs_inv" class="id"><a name="generic_format_abs_inv" class="">generic_format_abs_inv</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:40" class="id"><a name="x:40" class="">x,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:40">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:40">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span>.<br/>
<span class="id">case</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rcase_abs">Rcase_abs</a></span> <span class="id">;</span> <span class="id">intros</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_opp">Ztrunc_opp</a></span>.<br/>
<span class="id">intros</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>) <span class="gallina-kwd">at</span> <span class="id">1</span>.<br/>
<span class="id">rewrite</span> <span class="id">H,</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="id">easy</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="cexp_fexp" class="id"><a name="cexp_fexp" class="">cexp_fexp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:41" class="id"><a name="x:41" class="">x</a></span> <span id="ex:42" class="id"><a name="ex:42" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:42">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:41">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:42">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:41">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:42">ex</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="cexp_fexp_pos" class="id"><a name="cexp_fexp_pos" class="">cexp_fexp_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:43" class="id"><a name="x:43" class="">x</a></span> <span id="ex:44" class="id"><a name="ex:44" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:44">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:43">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:44">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:43">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:44">ex</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_fexp">cexp_fexp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="id">exact</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties when the real number is "small" (kind of subnormal) </div>
<span class="vernacular">Theorem</span> <span id="mantissa_small_pos" class="id"><a name="mantissa_small_pos" class="">mantissa_small_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:45" class="id"><a name="x:45" class="">x</a></span> <span id="ex:46" class="id"><a name="ex:46" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:46">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:45">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:46">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:46">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:46">ex</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:45">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:46">ex</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id">1</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>.<br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_l">Zplus_opp_l</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="scaled_mantissa_lt_1" class="id"><a name="scaled_mantissa_lt_1" class="">scaled_mantissa_lt_1</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:47" class="id"><a name="x:47" class="">x</a></span> <span id="ex:48" class="id"><a name="ex:48" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:47">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:48">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:48">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:48">ex</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:47">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">1</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Ex</span> <span class="id">He</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> <span class="id">0</span>) <span class="gallina-kwd">as</span> <span class="id">[Zx|Zx]</span>.<br/>
<span class="id">rewrite</span> <span class="id">Zx,</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_0">scaled_mantissa_0,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_abs">scaled_mantissa_abs</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_abs">cexp_abs</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> (<span class="id">ex',</span> <span class="id">Ex'</span>).<br/>
<span class="id">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex'</span> <span class="id">Zx</span>).<br/>
<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Ex'</span>).<br/>
<span class="id">assert</span> (<span class="id">ex'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)%<span class="id">Z</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">He</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_lt_bpow">bpow_lt_bpow</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Ex</span>).<br/>
<span class="id">now</span> <span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp">valid_exp</a></span> <span class="id">_</span>) <span class="id">He</span>)).<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="scaled_mantissa_lt_bpow" class="id"><a name="scaled_mantissa_lt_bpow" class="">scaled_mantissa_lt_bpow</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:49" class="id"><a name="x:49" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:49">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:49">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:49">x</a></span>))%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> <span class="id">0</span>) <span class="gallina-kwd">as</span> <span class="id">[Zx|Zx]</span>.<br/>
<span class="id">rewrite</span> <span class="id">Zx,</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_0">scaled_mantissa_0,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_mag_gt">bpow_mag_gt</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">_</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_mult_bpow">mag_mult_bpow</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Zx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="mag_generic_gt" class="id"><a name="mag_generic_gt" class="">mag_generic_gt</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:50" class="id"><a name="x:50" class="">x,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:50">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:50">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:50">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:50">x</a></span>)%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Gx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Znot_ge_lt">Znot_ge_lt</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> (<span class="id">ex,Ex</span>) <span class="id">;</span> <span class="id">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> <span class="id">Zx</span>).<br/>
<span class="id">intros</span> <span class="id">H</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ge_le">Z.ge_le</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_lt_1">scaled_mantissa_lt_1</a></span> <span class="id">x</span> <span class="id">ex</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Ex</span>) <span class="id">H</span>).<br/>
<span class="id">contradict</span> <span class="id">Zx</span>.<br/>
<span class="id">rewrite</span> <span class="id">Gx</span>.<br/>
<span class="id">replace</span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)) <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_0">F2R_0</a></span>.<br/>
<span class="id">cut</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">1</span>)%<span class="id">Z</span>.<br/>
<span class="id">clear</span> <span class="id">;</span> <span class="id">lia</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#lt_IZR">lt_IZR</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#abs_IZR">abs_IZR</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_generic">scaled_mantissa_generic</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="mantissa_DN_small_pos" class="id"><a name="mantissa_DN_small_pos" class="">mantissa_DN_small_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:51" class="id"><a name="x:51" class="">x</a></span> <span id="ex:52" class="id"><a name="ex:52" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:52">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:51">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:52">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:52">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:52">ex</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:51">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:52">ex</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_imp">Zfloor_imp</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">assert</span> (<span class="id">H</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>).<br/>
<span class="id">split</span> <span class="id">;</span> <span class="id">try</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="id">;</span> <span class="id">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="mantissa_UP_small_pos" class="id"><a name="mantissa_UP_small_pos" class="">mantissa_UP_small_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:53" class="id"><a name="x:53" class="">x</a></span> <span id="ex:54" class="id"><a name="ex:54" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:54">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:53">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:54">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:54">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:54">ex</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:53">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:54">ex</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">1</span>%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_imp">Zceil_imp</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">assert</span> (<span class="id">H</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>).<br/>
<span class="id">split</span> <span class="id">;</span> <span class="id">try</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="id">;</span> <span class="id">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Generic facts about any format </div>
<span class="vernacular">Theorem</span> <span id="generic_format_discrete" class="id"><a name="generic_format_discrete" class="">generic_format_discrete</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:55" class="id"><a name="x:55" class="">x</a></span> <span id="m:56" class="id"><a name="m:56" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="e:57" class="id"><a name="e:57" class="">e</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:55">x</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#m:56">m</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:57">e</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:55">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#m:56">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:57">e</a></span>))%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:55">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
<span class="id">intros</span> <span class="id">x</span> <span class="id">m</span> <span class="id">e</span> (<span class="id">Hx,Hx2</span>) <span class="id">Hf</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx2</span>). <span class="id">clear</span> <span class="id">Hx2</span>.<br/>
<span class="id">rewrite</span> <span class="id">Hf</span>.<br/>
<span class="id">fold</span> <span class="id">e</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_le">F2R_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#lt_IZR">lt_IZR</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_generic">scaled_mantissa_generic</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hf</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id">e</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_mult_bpow">scaled_mantissa_mult_bpow</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_canonical" class="id"><a name="generic_format_canonical" class="">generic_format_canonical</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:58" class="id"><a name="f:58" class="">f,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f:58">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f:58">f</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
<span class="id">intros</span> (<span class="id">m,</span> <span class="id">e</span>) <span class="id">Hf</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#canonical">canonical</a></span> <span class="gallina-kwd">in</span> <span class="id">Hf</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">Hf</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hf</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_eq">F2R_eq</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_ge_bpow" class="id"><a name="generic_format_ge_bpow" class="">generic_format_ge_bpow</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="emin:59" class="id"><a name="emin:59" class="">emin,</a></span><br/>
&nbsp;&nbsp;( <span class="gallina-kwd">forall</span> <span id="e:60" class="id"><a name="e:60" class="">e,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#emin:59">emin</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:60">e</a></span>)%<span class="id">Z</span> ) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:61" class="id"><a name="x:61" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:61">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:61">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#emin:59">emin</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:61">x</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
<span class="id">intros</span> <span class="id">emin</span> <span class="id">Emin</span> <span class="id">x</span> <span class="id">Hx</span> <span class="id">Fx</span>.<br/>
<span class="id">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>))).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#bpow_le_F2R">bpow_le_F2R</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#gt_0_F2R">gt_0_F2R</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Fx</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="abs_lt_bpow_prec" class="id"><a name="abs_lt_bpow_prec" class="">abs_lt_bpow_prec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="prec:62" class="id"><a name="prec:62" class="">prec,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="e:63" class="id"><a name="e:63" class="">e,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#e:63">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#prec:62">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:63">e</a></span>)%<span class="id">Z</span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:64" class="id"><a name="x:64" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:64">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#prec:62">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:64">x</a></span>))%<span class="id">R</span>.<br/>
<span class="id">intros</span> <span class="id">prec</span> <span class="id">Hp</span> <span class="id">x</span>.<br/>
<span class="id">case</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> <span class="id">0</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">Hxz</span>.<br/>
<span class="id">rewrite</span> <span class="id">Hxz,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> (<span class="id">ex,Ex</span>) <span class="id">;</span> <span class="id">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> <span class="id">Hxz</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Ex</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">specialize</span> (<span class="id">Hp</span> <span class="id">ex</span>).<br/>
<span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_bpow_inv'" class="id"><a name="generic_format_bpow_inv'" class="">generic_format_bpow_inv'</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e:65" class="id"><a name="e:65" class="">e,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:65">e</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#e:65">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:65">e</a></span>)%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
<span class="id">intros</span> <span class="id">e</span> <span class="id">He</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Znot_gt_le">Znot_gt_le</a></span>.<br/>
<span class="id">contradict</span> <span class="id">He</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp,</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_bpow">mag_bpow,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_floor">Ztrunc_floor</a></span>.<br/>
<span class="id">2:</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_imp">Zfloor_imp</a></span> <span class="gallina-kwd">with</span> (<span class="id">n</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow_lt">bpow_lt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">0</span>).<br/>
<span class="id">clear</span> <span class="id">-He</span> <span class="id">;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_bpow_inv" class="id"><a name="generic_format_bpow_inv" class="">generic_format_bpow_inv</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e:66" class="id"><a name="e:66" class="">e,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:66">e</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:66">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:66">e</a></span>)%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
<span class="id">intros</span> <span class="id">e</span> <span class="id">He</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_bpow_inv'">generic_format_bpow_inv'</a></span> <span class="gallina-kwd">in</span> <span class="id">He</span>.<br/>
<span class="id">assert</span> (<span class="id">H</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp_large'">valid_exp_large'</a></span> (<span class="id">e</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id">e</span>).<br/>
<span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format.Fcore_generic_round_pos" class="id"><a name="Generic.Format.Fcore_generic_round_pos" class="">Fcore_generic_round_pos</a></span>.<br/>
<br/>
<div class="doc">Rounding functions: R -&gt; Z </div>
<br/>
<span class="vernacular">Variable</span> <span id="Generic.Format.Fcore_generic_round_pos.rnd" class="id"><a name="Generic.Format.Fcore_generic_round_pos.rnd" class="">rnd</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="vernacular">Class</span> <span id="Valid_rnd" class="id"><a name="Valid_rnd" class="">Valid_rnd</a></span> <span class="id">:=</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span id="Zrnd_le" class="id"><a name="Zrnd_le" class="">Zrnd_le</a></span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="x:69" class="id"><a name="x:69" class="">x</a></span> <span id="y:70" class="id"><a name="y:70" class="">y,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:69">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:70">y</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:69">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:70">y</a></span>)%<span class="id">Z</span> <span class="id">;</span><br/>
&nbsp;&nbsp;<span id="Zrnd_IZR" class="id"><a name="Zrnd_IZR" class="">Zrnd_IZR</a></span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="n:72" class="id"><a name="n:72" class="">n,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#n:72">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#n:72">n</a></span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="valid_rnd:74" class="id"><a name="valid_rnd:74" class="">valid_rnd</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Zrnd_DN_or_UP" class="id"><a name="Zrnd_DN_or_UP" class="">Zrnd_DN_or_UP</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:75" class="id"><a name="x:75" class="">x,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:75">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:75">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:75">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:75">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id">x</span>) (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="id">left</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_antisym">Zle_antisym</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_IZR">Zrnd_IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_le">Zrnd_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="id">right</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_antisym">Zle_antisym</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_IZR">Zrnd_IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_le">Zrnd_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span>.<br/>
<span class="id">lia</span>.<br/>
<span class="id">intros</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_IZR">Zfloor_IZR,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_IZR">Zrnd_IZR</a></span> <span class="gallina-kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_irrefl">Z.lt_irrefl</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Zrnd_ZR_or_AW" class="id"><a name="Zrnd_ZR_or_AW" class="">Zrnd_ZR_or_AW</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:76" class="id"><a name="x:76" class="">x,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:76">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:76">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:76">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:76">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_DN_or_UP">Zrnd_DN_or_UP</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span> <span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">case</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
Qed.</div>
<br/>
<div class="doc">the most useful one: R -&gt; F </div>
<span class="vernacular">Definition</span> <span id="round" class="id"><a name="round" class="">round</a></span> <span id="x:77" class="id"><a name="x:77" class="">x</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:77">x</a></span>)) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:77">x</a></span>)).<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="round_bounded_large_pos" class="id"><a name="round_bounded_large_pos" class="">round_bounded_large_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:78" class="id"><a name="x:78" class="">x</a></span> <span id="ex:79" class="id"><a name="ex:79" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:79">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:79">ex</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:79">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:78">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:79">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:79">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:78">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:79">ex</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">He</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_fexp_pos">cexp_fexp_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_DN_or_UP">Zrnd_DN_or_UP</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>))) <span class="gallina-kwd">as</span> <span class="id">[Hr|Hr]</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="comment">(*&nbsp;DN&nbsp;*)</span><br/>
<span class="id">split</span>.<br/>
<span class="id">replace</span> (<span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>)%<span class="id">Z</span> <span class="gallina-kwd">with</span> (<span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)%<span class="id">Z</span> <span class="gallina-kwd">by</span> <span class="id">ring</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">assert</span> (<span class="id">Hf:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span>.<br/>
<span class="id">lia</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hf</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lub">Zfloor_lub</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hf</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">apply</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hx</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="comment">(*&nbsp;UP&nbsp;*)</span><br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="id">pattern</span> <span class="id">ex</span> <span class="gallina-kwd">at</span> <span class="id">3</span> <span class="id">;</span> <span class="id">replace</span> <span class="id">ex</span> <span class="gallina-kwd">with</span> (<span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)%<span class="id">Z</span> <span class="gallina-kwd">by</span> <span class="id">ring</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">assert</span> (<span class="id">Hf:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span>.<br/>
<span class="id">lia</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hf</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_glb">Zceil_glb</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hf</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">apply</span> <span class="id">Hx</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_bounded_small_pos" class="id"><a name="round_bounded_small_pos" class="">round_bounded_small_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:80" class="id"><a name="x:80" class="">x</a></span> <span id="ex:81" class="id"><a name="ex:81" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:81">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:81">ex</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:81">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:80">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:81">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:80">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:80">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:81">ex</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">He</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_fexp_pos">cexp_fexp_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_DN_or_UP">Zrnd_DN_or_UP</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-fexp</a></span> <span class="id">ex</span>))) <span class="gallina-kwd">as</span> <span class="id">[Hr|Hr]</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="comment">(*&nbsp;DN&nbsp;*)</span><br/>
<span class="id">left</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_eq_0_compat_r">Rmult_eq_0_compat_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.DiscrR.html#IZR_eq">IZR_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
<span class="id">refine</span> (<span class="gallina-kwd">let</span> <span id="H:83" class="id"><span id="H:82" class="id"><a name="H:83" class="">H</a></span></span> <span class="id">:=</span> <span class="id">_</span> <span class="gallina-kwd">in</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#H:82">H</a></span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#H:82">H</a></span>)).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span>.<br/>
<span class="comment">(*&nbsp;UP&nbsp;*)</span><br/>
<span class="id">right</span>.<br/>
<span class="id">pattern</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="gallina-kwd">at</span> <span class="id">2</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f_equal">f_equal</a></span> (<span class="gallina-kwd">fun</span> <span id="m:85" class="id"><span id="m:84" class="id"><a name="m:85" class="">m</a></span></span> <span class="id">=&gt;</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#m:84">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>))%<span class="id">R</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.DiscrR.html#IZR_eq">IZR_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_imp">Zceil_imp</a></span>.<br/>
<span class="id">refine</span> (<span class="gallina-kwd">let</span> <span id="H:87" class="id"><span id="H:86" class="id"><a name="H:87" class="">H</a></span></span> <span class="id">:=</span> <span class="id">_</span> <span class="gallina-kwd">in</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#H:86">H</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#H:86">H</a></span>))).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="round_le_pos" class="id"><a name="round_le_pos" class="">round_le_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:88" class="id"><a name="x:88" class="">x</a></span> <span id="y:89" class="id"><a name="y:89" class="">y,</a></span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:88">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:88">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:89">y</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:88">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:89">y</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hxy</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[ex</span> <span class="id">Hex]</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">y</span>) <span class="gallina-kwd">as</span> <span class="id">[ey</span> <span class="id">Hey]</span>.<br/>
<span class="id">specialize</span> (<span class="id">Hex</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>)).<br/>
<span class="id">specialize</span> (<span class="id">Hey</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span> <span class="id">Hxy</span>))).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">Hex</span>.<br/>
<span class="id">2:</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">Hey</span>.<br/>
<span class="id">2:</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2:=Hxy</span>)<span class="id">;</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">assert</span> (<span class="id">He:</span> (<span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">ey</span>)%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_lt_bpow">bpow_lt_bpow</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hex</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">y</span>.<br/>
<span class="id">assert</span> (<span class="id">Heq:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ey</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id">y</span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_unique_pos">mag_unique_pos</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hex</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_unique_pos">mag_unique_pos</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hey</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_le">F2R_le</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_le">Zrnd_le</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Hxy</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ey</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ey</span>)) <span class="gallina-kwd">as</span> <span class="id">[Hy1|Hy1]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp">valid_exp</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hy1</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">ey</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span>) <span class="gallina-kwd">as</span> <span class="id">[He'|He']</span>.<br/>
<span class="id">2:</span> <span class="id">now</span> <span class="id">apply</span> <span class="id">Heq,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f_equal">f_equal</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id">ey</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>)).<br/>
<span class="id">2:</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="gallina-kwd">as</span> <span class="id">[Hx1|Hx1]</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_small_pos">round_bounded_small_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx1</span> <span class="id">Hex</span>) <span class="gallina-kwd">as</span> <span class="id">[-&gt;</span> <span class="id">|</span> <span class="id">-&gt;]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp">valid_exp,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="gallina-kwd">in</span> <span class="id">Hx1</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Hx1</span> <span class="id">ey</span>).<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id">ex</span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_pred">Z.lt_le_pred</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_generic" class="id"><a name="round_generic" class="">round_generic</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:90" class="id"><a name="x:90" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:90">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:90">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:90">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_generic">scaled_mantissa_generic</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_IZR">Zrnd_IZR</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_0" class="id"><a name="round_0" class="">round_0</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_IZR">Zrnd_IZR</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_0">F2R_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="exp_small_round_0_pos" class="id"><a name="exp_small_round_0_pos" class="">exp_small_round_0_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:91" class="id"><a name="x:91" class="">x</a></span> <span id="ex:92" class="id"><a name="ex:92" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:92">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:91">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:92">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:91">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:92">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:92">ex</a></span>)%<span class="id">Z</span> .<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">H</span> <span class="id">H1</span>.<br/>
<span class="id">case</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>))<span class="id">;</span> <span class="id">trivial;</span> <span class="id">intros</span> <span class="id">V</span>.<br/>
<span class="id">contradict</span> <span class="id">H1</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id">ex-1</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span>)<span class="id">;</span> <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="generic_format_round_pos" class="id"><a name="generic_format_round_pos" class="">generic_format_round_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:93" class="id"><a name="x:93" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:93">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:93">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hx0</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> (<span class="id">ex,</span> <span class="id">Hex</span>).<br/>
<span class="id">specialize</span> (<span class="id">Hex</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx0</span>)).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">Hex</span>. <span class="id">2:</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="gallina-kwd">as</span> <span class="id">[He|He]</span>.<br/>
<span class="comment">(*&nbsp;small&nbsp;*)</span><br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_small_pos">round_bounded_small_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span> <span class="id">Hex</span>) <span class="gallina-kwd">as</span> <span class="id">[Hr|Hr]</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp">valid_exp</a></span>.<br/>
<span class="comment">(*&nbsp;large&nbsp;*)</span><br/>
<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span> <span class="id">Hex</span>).<br/>
<span class="id">intros</span> (<span class="id">Hr1,</span> <span class="id">Hr2</span>).<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id">ex</span>) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id">x</span>)) <span class="gallina-kwd">as</span> <span class="id">[Hr|Hr]</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hr</span> <span class="id">Hr2</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp">valid_exp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="id">intros</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_fexp_pos">cexp_fexp_pos</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id">_</span>) <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hr1</span> <span class="id">Hr</span>)).<br/>
<span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_fexp_pos">cexp_fexp_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hex</span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zeq_le">Zeq_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Fcore_generic_round_pos">Fcore_generic_round_pos</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="round_ext" class="id"><a name="round_ext" class="">round_ext</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rnd1:94" class="id"><a name="rnd1:94" class="">rnd1</a></span> <span id="rnd2:95" class="id"><a name="rnd2:95" class="">rnd2,</a></span><br/>
&nbsp;&nbsp;( <span class="gallina-kwd">forall</span> <span id="x:96" class="id"><a name="x:96" class="">x,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd1:94">rnd1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:96">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd2:95">rnd2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:96">x</a></span> ) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:97" class="id"><a name="x:97" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd1:94">rnd1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:97">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd2:95">rnd2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:97">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
<span class="id">intros</span> <span class="id">rnd1</span> <span class="id">rnd2</span> <span class="id">Hext</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">Hext</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format.Zround_opp" class="id"><a name="Generic.Format.Zround_opp" class="">Zround_opp</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Generic.Format.Zround_opp.rnd" class="id"><a name="Generic.Format.Zround_opp.rnd" class="">rnd</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="valid_rnd:99" class="id"><a name="valid_rnd:99" class="">valid_rnd</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Zround_opp.rnd">rnd</a></span> <span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Zrnd_opp" class="id"><a name="Zrnd_opp" class="">Zrnd_opp</a></span> <span id="x:100" class="id"><a name="x:100" class="">x</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp">Z.opp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Zround_opp.rnd">rnd</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>)).<br/>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="valid_rnd_opp" class="id"><a name="valid_rnd_opp" class="">valid_rnd_opp</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof with</span></div>
<div class="proofscript" id="proof46">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">split</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zopp_le_cancel">Zopp_le_cancel</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">2!Z</span>.<span class="id">opp_involutive</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_le">Zrnd_le</a></span>...<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">intros</span> <span class="id">n</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#opp_IZR">opp_IZR,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_IZR">Zrnd_IZR</a></span>...<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_involutive">Z.opp_involutive</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_opp" class="id"><a name="round_opp" class="">round_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:101" class="id"><a name="x:101" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Zround_opp.rnd">rnd</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:101">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Ropp">Ropp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:101">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zopp">F2R_Zopp,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_eq">F2R_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="id">exact</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_involutive">Z.opp_involutive</a></span> <span class="id">_</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Zround_opp">Zround_opp</a></span>.<br/>
<br/>
<div class="doc">IEEE-754 roundings: up, down and to zero </div>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="valid_rnd_DN" class="id"><a name="valid_rnd_DN" class="">valid_rnd_DN</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_le">Zfloor_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_IZR">Zfloor_IZR</a></span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="valid_rnd_UP" class="id"><a name="valid_rnd_UP" class="">valid_rnd_UP</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_le">Zceil_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_IZR">Zceil_IZR</a></span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="valid_rnd_ZR" class="id"><a name="valid_rnd_ZR" class="">valid_rnd_ZR</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_le">Ztrunc_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="valid_rnd_AW" class="id"><a name="valid_rnd_AW" class="">valid_rnd_AW</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway_le">Zaway_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway_IZR">Zaway_IZR</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format.monotone" class="id"><a name="Generic.Format.monotone" class="">monotone</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Generic.Format.monotone.rnd" class="id"><a name="Generic.Format.monotone.rnd" class="">rnd</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="valid_rnd:103" class="id"><a name="valid_rnd:103" class="">valid_rnd</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="round_DN_or_UP" class="id"><a name="round_DN_or_UP" class="">round_DN_or_UP</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:104" class="id"><a name="x:104" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:104">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:104">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:104">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:104">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_DN_or_UP">Zrnd_DN_or_UP</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="id">left</span>. <span class="id">now</span> <span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">right</span>. <span class="id">now</span> <span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_ZR_or_AW" class="id"><a name="round_ZR_or_AW" class="">round_ZR_or_AW</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:105" class="id"><a name="x:105" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:105">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:105">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:105">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:105">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_ZR_or_AW">Zrnd_ZR_or_AW</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="id">left</span>. <span class="id">now</span> <span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">right</span>. <span class="id">now</span> <span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_le" class="id"><a name="round_le" class="">round_le</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:106" class="id"><a name="x:106" class="">x</a></span> <span id="y:107" class="id"><a name="y:107" class="">y,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:106">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:107">y</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:106">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:107">y</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof with</span></div>
<div class="proofscript" id="proof54">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#total_order_T">total_order_T</a></span> <span class="id">x</span> <span class="id">0</span>) <span class="gallina-kwd">as</span> <span class="id">[[Hx|Hx]|Hx]</span>.<br/>
<span class="id">3:</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le_pos">round_le_pos</a></span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">y</span> <span class="id">0</span>) <span class="gallina-kwd">as</span> <span class="id">[Hy|Hy]</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>)<span class="id">,</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">y</span>).<br/>
<span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>))<span class="id">,</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-y</a></span>)).<br/>
<span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>))<span class="id">,</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-y</a></span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_cancel">Ropp_le_cancel</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">2!F2R_Zopp</span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le_pos">round_le_pos</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-y</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>)).<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;0&nbsp;&lt;=&nbsp;y&nbsp;*)</span><br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">0</span>%<span class="id">R</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_le_0">F2R_le_0</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_IZR">Zrnd_IZR</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id">0</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_le">Zrnd_le</a></span>...<br/>
<span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>)))).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_ge_0">F2R_ge_0</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_IZR">Zrnd_IZR</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id">0</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_le">Zrnd_le</a></span>...<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="id">exact</span> <span class="id">Hy</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_ge_0">F2R_ge_0</a></span>.<br/>
<span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_IZR">Zrnd_IZR</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id">0</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_le">Zrnd_le</a></span>...<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_ge_generic" class="id"><a name="round_ge_generic" class="">round_ge_generic</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:108" class="id"><a name="x:108" class="">x</a></span> <span id="y:109" class="id"><a name="y:109" class="">y,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:108">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:108">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:109">y</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:108">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:109">y</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hxy</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id">x</span> <span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le">round_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_le_generic" class="id"><a name="round_le_generic" class="">round_le_generic</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:110" class="id"><a name="x:110" class="">x</a></span> <span id="y:111" class="id"><a name="y:111" class="">y,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:111">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:110">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:111">y</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:110">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:111">y</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hy</span> <span class="id">Hxy</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id">y</span> <span class="id">Hy</span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le">round_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone">monotone</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="round_abs_abs" class="id"><a name="round_abs_abs" class="">round_abs_abs</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="P:112" class="id"><a name="P:112" class="">P</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">Prop,</span><br/>
&nbsp;&nbsp;( <span class="gallina-kwd">forall</span> <span id="rnd:113" class="id"><a name="rnd:113" class="">rnd</a></span> (<span id="Hr:114" class="id"><a name="Hr:114" class="">Hr</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:113">rnd</a></span>) <span id="x:115" class="id"><a name="x:115" class="">x,</a></span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:115">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#P:112">P</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:115">x</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:113">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:115">x</a></span>) ) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rnd:116" class="id"><a name="rnd:116" class="">rnd</a></span> <span class="id">{Hr</span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:116">rnd}</a></span> <span id="x:118" class="id"><a name="x:118" class="">x,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#P:112">P</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:118">x</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:116">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:118">x</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof with</span></div>
<div class="proofscript" id="proof57">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">P</span> <span class="id">HP</span> <span class="id">rnd</span> <span class="id">Hr</span> <span class="id">x</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">0</span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id">2!Rabs_pos_eq</span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id">HP</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span> <span class="id">rnd</span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le">round_le</a></span>.<br/>
<span class="id">exact</span> <span class="id">Hx</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left">Rabs_left</a></span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="id">pattern</span> <span class="id">x</span> <span class="gallina-kwd">at</span> <span class="id">2</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_opp">round_opp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="id">apply</span> <span class="id">HP</span>...<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span> <span class="id">rnd</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le">round_le</a></span>...<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_bounded_large" class="id"><a name="round_bounded_large" class="">round_bounded_large</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rnd:119" class="id"><a name="rnd:119" class="">rnd</a></span> <span class="id">{Hr</span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:119">rnd}</a></span> <span id="x:121" class="id"><a name="x:121" class="">x</a></span> <span id="ex:122" class="id"><a name="ex:122" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:122">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:122">ex</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:122">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:121">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:122">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:122">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:119">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:121">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:122">ex</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof with</span></div>
<div class="proofscript" id="proof58">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">rnd</span> <span class="id">Hr</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">He</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_abs_abs">round_abs_abs</a></span>...<br/>
<span class="id">clear</span> <span class="id">rnd</span> <span class="id">Hr</span> <span class="id">x</span>.<br/>
<span class="id">intros</span> <span class="id">rnd'</span> <span class="id">Hr</span> <span class="id">x</span> <span class="id">_</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span>...<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="exp_small_round_0" class="id"><a name="exp_small_round_0" class="">exp_small_round_0</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rnd:123" class="id"><a name="rnd:123" class="">rnd</a></span> <span class="id">{Hr</span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:123">rnd}</a></span> <span id="x:125" class="id"><a name="x:125" class="">x</a></span> <span id="ex:126" class="id"><a name="ex:126" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:126">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:125">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:126">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:123">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:125">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:126">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:126">ex</a></span>)%<span class="id">Z</span> .<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
<span class="id">intros</span> <span class="id">rnd</span> <span class="id">Hr</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="id">generalize</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H2</span> <span class="gallina-kwd">at</span> <span class="id">1</span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_abs_abs">round_abs_abs</a></span> (<span class="gallina-kwd">fun</span> <span id="t:130" class="id"><span id="t:127" class="id"><a name="t:130" class="">t</a></span></span> <span id="rt:131" class="id"><span id="rt:128" class="id"><a name="rt:131" class="">rt</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">forall</span> (<span id="ex:132" class="id"><span id="ex:129" class="id"><a name="ex:132" class="">ex</a></span></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">,</span><br/>
(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:129">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#t:127">t</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:129">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
<span class="id"><a href="Flocq.Core.Generic_fmt.html#rt:128">rt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:129">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:129">ex</a></span>)%<span class="id">Z</span>))<span class="id">;</span> <span class="id">trivial</span>.<br/>
<span class="id">clear;</span> <span class="id">intros</span> <span class="id">rnd</span> <span class="id">Hr</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#exp_small_round_0_pos">exp_small_round_0_pos</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format.monotone_abs" class="id"><a name="Generic.Format.monotone_abs" class="">monotone_abs</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Generic.Format.monotone_abs.rnd" class="id"><a name="Generic.Format.monotone_abs.rnd" class="">rnd</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="valid_rnd:134" class="id"><a name="valid_rnd:134" class="">valid_rnd</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone_abs.rnd">rnd</a></span> <span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="abs_round_ge_generic" class="id"><a name="abs_round_ge_generic" class="">abs_round_ge_generic</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:135" class="id"><a name="x:135" class="">x</a></span> <span id="y:136" class="id"><a name="y:136" class="">y,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:135">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:135">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:136">y</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:135">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone_abs.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:136">y</a></span>))%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof with</span></div>
<div class="proofscript" id="proof60">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_abs_abs">round_abs_abs</a></span>...<br/>
<span class="id">clear</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">y</span>.<br/>
<span class="id">intros</span> <span class="id">rnd'</span> <span class="id">Hrnd</span> <span class="id">y</span> <span class="id">Hy</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ge_generic">round_ge_generic</a></span>...<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="abs_round_le_generic" class="id"><a name="abs_round_le_generic" class="">abs_round_le_generic</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:137" class="id"><a name="x:137" class="">x</a></span> <span id="y:138" class="id"><a name="y:138" class="">y,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:138">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:137">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:138">y</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone_abs.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:137">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:138">y</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof with</span></div>
<div class="proofscript" id="proof61">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_abs_abs">round_abs_abs</a></span>...<br/>
<span class="id">clear</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">x</span>.<br/>
<span class="id">intros</span> <span class="id">rnd'</span> <span class="id">Hrnd</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le_generic">round_le_generic</a></span>...<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone_abs">monotone_abs</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="round_DN_opp" class="id"><a name="round_DN_opp" class="">round_DN_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:139" class="id"><a name="x:139" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:139">x</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_involutive">Z.opp_involutive</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_UP_opp" class="id"><a name="round_UP_opp" class="">round_UP_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:140" class="id"><a name="x:140" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:140">x</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_ZR_opp" class="id"><a name="round_ZR_opp" class="">round_ZR_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:141" class="id"><a name="x:141" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:141">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Ropp">Ropp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:141">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_opp">Ztrunc_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_ZR_abs" class="id"><a name="round_ZR_abs" class="">round_ZR_abs</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:142" class="id"><a name="x:142" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:142">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:142">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof with</span></div>
<div class="proofscript" id="proof65">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="gallina-kwd">at</span> <span class="id">2</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rcase_abs">Rcase_abs</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ZR_opp">round_ZR_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le">round_le</a></span>...<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le">round_le</a></span>...<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rge_le">Rge_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_AW_opp" class="id"><a name="round_AW_opp" class="">round_AW_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:143" class="id"><a name="x:143" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:143">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.Ropp">Ropp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:143">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway_opp">Zaway_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_AW_abs" class="id"><a name="round_AW_abs" class="">round_AW_abs</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:144" class="id"><a name="x:144" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:144">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:144">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof with</span></div>
<div class="proofscript" id="proof67">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="gallina-kwd">at</span> <span class="id">2</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rcase_abs">Rcase_abs</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_AW_opp">round_AW_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le">round_le</a></span>...<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le">round_le</a></span>...<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rge_le">Rge_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_ZR_DN" class="id"><a name="round_ZR_DN" class="">round_ZR_DN</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:145" class="id"><a name="x:145" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:145">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:145">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:145">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_spec">Rlt_bool_spec</a></span>.<br/>
<span class="id">intros</span> <span class="id">H</span>.<br/>
<span class="id">elim</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">H</span>).<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span>))).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">easy</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_ZR_UP" class="id"><a name="round_ZR_UP" class="">round_ZR_UP</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:146" class="id"><a name="x:146" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:146">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id">0</span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:146">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:146">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_spec">Rlt_bool_spec</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="id">intros</span> <span class="id">[H|H]</span>.<br/>
<span class="id">elim</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">H</span>).<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span>))).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_IZR">Zfloor_IZR,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_IZR">Zceil_IZR</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_AW_UP" class="id"><a name="round_AW_UP" class="">round_AW_UP</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:147" class="id"><a name="x:147" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:147">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:147">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:147">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_spec">Rlt_bool_spec</a></span>.<br/>
<span class="id">intros</span> <span class="id">H</span>.<br/>
<span class="id">elim</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">H</span>).<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span>))).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">easy</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_AW_DN" class="id"><a name="round_AW_DN" class="">round_AW_DN</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:148" class="id"><a name="x:148" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:148">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id">0</span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:148">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:148">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_spec">Rlt_bool_spec</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="id">intros</span> <span class="id">[H|H]</span>.<br/>
<span class="id">elim</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">H</span>).<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span>))).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_IZR">Zfloor_IZR,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_IZR">Zceil_IZR</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_round" class="id"><a name="generic_format_round" class="">generic_format_round</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rnd:149" class="id"><a name="rnd:149" class="">rnd</a></span> <span class="id">{</span> <span id="Hr:150" class="id"><a name="Hr:150" class="">Hr</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:149">rnd</a></span> <span class="id">}</span> <span id="x:151" class="id"><a name="x:151" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:149">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:151">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof with</span></div>
<div class="proofscript" id="proof72">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">rnd</span> <span class="id">Zrnd</span> <span class="id">x</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#total_order_T">total_order_T</a></span> <span class="id">x</span> <span class="id">0</span>) <span class="gallina-kwd">as</span> <span class="id">[[Hx|Hx]|Hx]</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_or_UP">round_DN_or_UP</a></span> <span class="id">rnd</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id">x</span>)) <span class="gallina-kwd">as</span> <span class="id">[Hr|Hr]</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_opp">round_DN_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_round_pos">generic_format_round_pos</a></span>...<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_opp">round_UP_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_round_pos">generic_format_round_pos</a></span>...<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_round_pos">generic_format_round_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_DN_pt" class="id"><a name="round_DN_pt" class="">round_DN_pt</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:152" class="id"><a name="x:152" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Defs.html#Rnd_DN_pt">Rnd_DN_pt</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:152">x</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:152">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof with</span></div>
<div class="proofscript" id="proof73">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="id">split</span>.<br/>
<span class="id">pattern</span> <span class="id">x</span> <span class="gallina-kwd">at</span> <span class="id">2</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_mult_bpow">scaled_mantissa_mult_bpow</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="id">intros</span> <span class="id">g</span> <span class="id">Hg</span> <span class="id">Hgx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ge_generic">round_ge_generic</a></span>...<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_satisfies_any" class="id"><a name="generic_format_satisfies_any" class="">generic_format_satisfies_any</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Round_pred.html#satisfies_any">satisfies_any</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
<span class="id">split</span>.<br/>
<span class="comment">(*&nbsp;symmetric&nbsp;set&nbsp;*)</span><br/>
<span class="id">exact</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">exact</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="comment">(*&nbsp;round&nbsp;down&nbsp;*)</span><br/>
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">eexists</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_UP_pt" class="id"><a name="round_UP_pt" class="">round_UP_pt</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:153" class="id"><a name="x:153" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Defs.html#Rnd_UP_pt">Rnd_UP_pt</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:153">x</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:153">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_opp">round_UP_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_UP_pt_opp">Rnd_UP_pt_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_ZR_pt" class="id"><a name="round_ZR_pt" class="">round_ZR_pt</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:154" class="id"><a name="x:154" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Defs.html#Rnd_ZR_pt">Rnd_ZR_pt</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:154">x</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:154">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">split</span> <span class="id">;</span> <span class="id">intros</span> <span class="id">Hx</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ZR_DN">round_ZR_DN</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ZR_UP">round_ZR_UP</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="round_DN_small_pos" class="id"><a name="round_DN_small_pos" class="">round_DN_small_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:155" class="id"><a name="x:155" class="">x</a></span> <span id="ex:156" class="id"><a name="ex:156" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:156">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:155">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:156">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:156">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:156">ex</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:155">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Float_prop.html#F2R_0">F2R_0</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span>)).<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mantissa_DN_small_pos">mantissa_DN_small_pos</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>) (<span class="id">2</span> <span class="id">:=</span> <span class="id">He</span>).<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_fexp_pos">cexp_fexp_pos</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
Qed.</div>
<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="round_DN_UP_lt" class="id"><a name="round_DN_UP_lt" class="">round_DN_UP_lt</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:157" class="id"><a name="x:157" class="">x,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:157">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:157">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:157">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:157">x</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof78')">Proof with</span></div>
<div class="proofscript" id="proof78">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="id">assert</span> (<span class="id">Hx:</span>(<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>  <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
<span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Hx</span> <span class="gallina-kwd">as</span> <span class="id">[Hx</span> <span class="id">_]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_le_lt">Rnot_le_lt;</a></span> <span class="id">intro</span> <span class="id">Hle</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) <span class="gallina-kwd">by</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="id">destruct</span> <span class="id">Hx</span> <span class="gallina-kwd">as</span> <span class="id">[_</span> <span class="id">Hx]</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_le_lt">Rnot_le_lt;</a></span> <span class="id">intro</span> <span class="id">Hle</span>.<br/>
<span class="id">assert</span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>) <span class="gallina-kwd">by</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">Fx</span>.<br/>
<span class="id">contradict</span> <span class="id">Fx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="round_UP_small_pos" class="id"><a name="round_UP_small_pos" class="">round_UP_small_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:158" class="id"><a name="x:158" class="">x</a></span> <span id="ex:159" class="id"><a name="ex:159" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:159">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:158">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:159">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:159">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:159">ex</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:158">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:159">ex</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_bpow">F2R_bpow</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mantissa_UP_small_pos">mantissa_UP_small_pos</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>) (<span class="id">2</span> <span class="id">:=</span> <span class="id">He</span>).<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_fexp_pos">cexp_fexp_pos</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_format_EM" class="id"><a name="generic_format_EM" class="">generic_format_EM</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:160" class="id"><a name="x:160" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:160">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:160">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof80')">Proof with</span></div>
<div class="proofscript" id="proof80">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="id">left</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="id">right</span>.<br/>
<span class="id">intros</span> <span class="id">H</span>.<br/>
<span class="id">apply</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format.round_large" class="id"><a name="Generic.Format.round_large" class="">round_large</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Generic.Format.round_large.rnd" class="id"><a name="Generic.Format.round_large.rnd" class="">rnd</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="valid_rnd:162" class="id"><a name="valid_rnd:162" class="">valid_rnd</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.round_large.rnd">rnd</a></span> <span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="round_large_pos_ge_bpow" class="id"><a name="round_large_pos_ge_bpow" class="">round_large_pos_ge_bpow</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:163" class="id"><a name="x:163" class="">x</a></span> <span id="e:164" class="id"><a name="e:164" class="">e,</a></span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.round_large.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:163">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:164">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:163">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:164">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.round_large.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:163">x</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
<span class="id">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Hd</span> <span class="id">Hex</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> (<span class="id">ex,</span> <span class="id">He</span>).<br/>
<span class="id">assert</span> (<span class="id">Hx:</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Hex</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">specialize</span> (<span class="id">He</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>)).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">He</span>. <span class="id">2:</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">cut</span> (<span class="id">e</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">ex</span>)%<span class="id">Z</span>. <span class="id">lia</span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">He</span>).<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_small_pos">round_bounded_small_pos</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.round_large.rnd">rnd</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">H</span> <span class="id">He</span>) <span class="gallina-kwd">as</span> <span class="id">[Hr|Hr]</span>.<br/>
<span class="id">rewrite</span> <span class="id">Hr</span> <span class="gallina-kwd">in</span> <span class="id">Hd</span>.<br/>
<span class="id">elim</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hd</span>).<br/>
<span class="id">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">lia</span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.round_large.rnd">rnd</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">H</span> <span class="id">He</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.round_large">round_large</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="mag_round_ZR" class="id"><a name="mag_round_ZR" class="">mag_round_ZR</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:165" class="id"><a name="x:165" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:165">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:165">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:165">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof82')">Proof with</span></div>
<div class="proofscript" id="proof82">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span> <span class="id">Zr</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> <span class="id">0</span>) <span class="gallina-kwd">as</span> <span class="id">[Zx|Zx]</span>.<br/>
<span class="id">rewrite</span> <span class="id">Zx,</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_unique">mag_unique</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> (<span class="id">ex,</span> <span class="id">Ex</span>) <span class="id">;</span> <span class="id">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> <span class="id">Zx</span>).<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ZR_abs">round_ZR_abs</a></span>.<br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_large_pos_ge_bpow">round_large_pos_ge_bpow</a></span>...<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ZR_abs">round_ZR_abs</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
<span class="id">apply</span> <span class="id">Ex</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Ex</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ZR_DN">round_ZR_DN</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="mag_round" class="id"><a name="mag_round" class="">mag_round</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rnd:166" class="id"><a name="rnd:166" class="">rnd</a></span> <span class="id">{Hrnd</span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:166">rnd}</a></span> <span id="x:168" class="id"><a name="x:168" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:166">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:168">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:166">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:168">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:168">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">\/</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rnd:166">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:168">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:168">x</a></span>) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:168">x</a></span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof83')">Proof with</span></div>
<div class="proofscript" id="proof83">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">rnd</span> <span class="id">Hrnd</span> <span class="id">x</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ZR_or_AW">round_ZR_or_AW</a></span> <span class="id">rnd</span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Hr|Hr]</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">Hr</span> <span class="id">;</span> <span class="id">clear</span> <span class="id">Hr</span> <span class="id">rnd</span> <span class="id">Hrnd</span>.<br/>
<span class="id">left</span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mag_round_ZR">mag_round_ZR</a></span>.<br/>
<span class="id">intros</span> <span class="id">Zr</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> <span class="id">0</span>) <span class="gallina-kwd">as</span> <span class="id">[Zx|Zx]</span>.<br/>
<span class="id">rewrite</span> <span class="id">Zx,</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> (<span class="id">ex,</span> <span class="id">Ex</span>) <span class="id">;</span> <span class="id">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> <span class="id">Zx</span>).<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_abs">mag_abs</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_AW_abs">round_AW_abs</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="gallina-kwd">as</span> <span class="id">[He|He]</span>.<br/>
<span class="id">right</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max_r">Z.max_r</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">He</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_AW_UP">round_AW_UP</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span> <span class="id">_</span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_small_pos">round_UP_small_pos</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zaway">Zaway</a></span> <span class="id">_</span> <span class="id">ex</span> <span class="id">He</span> <span class="id">Ex</span>) <span class="gallina-kwd">as</span> (<span class="id">H1,[H2|H2]</span>).<br/>
<span class="id">left</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_unique">mag_unique</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_AW_abs">round_AW_abs,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Rabsolu">Rabs_Rabsolu</a></span>.<br/>
<span class="id">now</span> <span class="id">split</span>.<br/>
<span class="id">right</span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max_l">Z.max_l</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="mag_DN" class="id"><a name="mag_DN" class="">mag_DN</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:169" class="id"><a name="x:169" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:169">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:169">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:169">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#b8b2ebc8e1a8b9aa935c0702efb5dccf">:&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof84')">Proof.</span></div>
<div class="proofscript" id="proof84">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hd</span>.<br/>
<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hd</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="id">revert</span> <span class="id">Hd</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ZR_DN">round_ZR_DN</a></span>.<br/>
<span class="id">intros</span> <span class="id">Hd</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mag_round_ZR">mag_round_ZR</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="cexp_DN" class="id"><a name="cexp_DN" class="">cexp_DN</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:170" class="id"><a name="x:170" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:170">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:170">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:170">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</span></div>
<div class="proofscript" id="proof85">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hd</span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f_equal">f_equal</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mag_DN">mag_DN</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="scaled_mantissa_DN" class="id"><a name="scaled_mantissa_DN" class="">scaled_mantissa_DN</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:171" class="id"><a name="x:171" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:171">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:171">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:171">x</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hd</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_DN">cexp_DN</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hd</span>).<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_N_pt_DN_or_UP" class="id"><a name="generic_N_pt_DN_or_UP" class="">generic_N_pt_DN_or_UP</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:172" class="id"><a name="x:172" class="">x</a></span> <span id="f:173" class="id"><a name="f:173" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Defs.html#Rnd_N_pt">Rnd_N_pt</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:172">x</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f:173">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#f:173">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:172">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#f:173">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:172">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
<span class="id">intros</span> <span class="id">x</span> <span class="id">f</span> <span class="id">Hxf</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_N_pt_DN_or_UP">Rnd_N_pt_DN_or_UP</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hxf</span>).<br/>
<span class="id">left</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_DN_pt_unique">Rnd_DN_pt_unique</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">H</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="id">right</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_UP_pt_unique">Rnd_UP_pt_unique</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">H</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format.not_FTZ" class="id"><a name="Generic.Format.not_FTZ" class="">not_FTZ</a></span>.<br/>
<br/>
<span class="vernacular">Class</span> <span id="Exp_not_FTZ" class="id"><span id="Exp_not_FTZ" class="id"><a name="Exp_not_FTZ" class="">Exp_not_FTZ</a></span></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span id="exp_not_FTZ" class="id"><span id="exp_not_FTZ" class="id"><a name="exp_not_FTZ" class="">exp_not_FTZ</a></span></span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="e:175" class="id"><a name="e:175" class="">e,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:175">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:175">e</a></span>)%<span class="id">Z</span>.<br/>
<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="exp_not_FTZ_:177" class="id"><a name="exp_not_FTZ_:177" class="">exp_not_FTZ_</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="subnormal_exponent" class="id"><a name="subnormal_exponent" class="">subnormal_exponent</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e:178" class="id"><a name="e:178" class="">e</a></span> <span id="x:179" class="id"><a name="x:179" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#e:178">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:178">e</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:179">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:179">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:179">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:178">e</a></span>))) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:178">e</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
<span class="id">intros</span> <span class="id">e</span> <span class="id">x</span> <span class="id">He</span> <span class="id">Hx</span>.<br/>
<span class="id">pattern</span> <span class="id">x</span> <span class="gallina-kwd">at</span> <span class="id">2</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="gallina-kwd">at</span> <span class="id">2</span>. <span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">assert</span> (<span class="id">H:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">e</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">e</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">set</span> (<span class="id">ex</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>).<br/>
<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#exp_not_FTZ">exp_not_FTZ</a></span> <span class="id">ex</span>).<br/>
<span class="id">generalize</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp">valid_exp</a></span> <span class="id">_</span>) <span class="id">He</span>) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>)%<span class="id">Z</span>).<br/>
<span class="id">lia</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">now</span> <span class="id">ring_simplify</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">e</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">e</span>)%<span class="id">Z</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.not_FTZ">not_FTZ</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format.monotone_exp" class="id"><a name="Generic.Format.monotone_exp" class="">monotone_exp</a></span>.<br/>
<br/>
<span class="vernacular">Class</span> <span id="Monotone_exp" class="id"><span id="Monotone_exp" class="id"><a name="Monotone_exp" class="">Monotone_exp</a></span></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span id="monotone_exp" class="id"><span id="monotone_exp" class="id"><a name="monotone_exp" class="">monotone_exp</a></span></span> <span class="id">:</span> <span class="gallina-kwd">forall</span> <span id="ex:181" class="id"><a name="ex:181" class="">ex</a></span> <span id="ey:182" class="id"><a name="ey:182" class="">ey,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:181">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ey:182">ey</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:181">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ey:182">ey</a></span>)%<span class="id">Z</span>.<br/>
<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="monotone_exp_:184" class="id"><a name="monotone_exp_:184" class="">monotone_exp_</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id">}</span>.<br/>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="monotone_exp_not_FTZ" class="id"><a name="monotone_exp_not_FTZ" class="">monotone_exp_not_FTZ</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
<span class="id">intros</span> <span class="id">e</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_lt_le_dec">Z_lt_le_dec</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">e</span>) <span class="id">e</span>) <span class="gallina-kwd">as</span> <span class="id">[He|He]</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#monotone_exp">monotone_exp</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp">valid_exp</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="cexp_le_bpow" class="id"><a name="cexp_le_bpow" class="">cexp_le_bpow</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="x:185" class="id"><a name="x:185" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span>) (<span id="e:186" class="id"><a name="e:186" class="">e</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:185">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:185">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:186">e</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:185">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:186">e</a></span>)%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
<span class="id">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Zx</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#monotone_exp">monotone_exp</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_le_bpow">mag_le_bpow</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="cexp_ge_bpow" class="id"><a name="cexp_ge_bpow" class="">cexp_ge_bpow</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="x:187" class="id"><a name="x:187" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span>) (<span id="e:188" class="id"><a name="e:188" class="">e</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#e:188">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:187">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:188">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:187">x</a></span>)%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
<span class="id">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#monotone_exp">monotone_exp</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zsucc_pred">Zsucc_pred</a></span> <span class="id">e</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_gt_bpow">mag_gt_bpow</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="lt_cexp_pos" class="id"><a name="lt_cexp_pos" class="">lt_cexp_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:189" class="id"><a name="x:189" class="">x</a></span> <span id="y:190" class="id"><a name="y:190" class="">y,</a></span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:190">y</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:189">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:190">y</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:189">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:190">y</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zy</span> <span class="id">He</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="gallina-kwd">in</span> <span class="id">He</span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Raux.html#lt_mag">lt_mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span>) <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Zy</span>).<br/>
<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#monotone_exp">monotone_exp</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">y</span>) (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>)).<br/>
<span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="lt_cexp" class="id"><a name="lt_cexp" class="">lt_cexp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:191" class="id"><a name="x:191" class="">x</a></span> <span id="y:192" class="id"><a name="y:192" class="">y,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#y:192">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:191">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:192">y</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:191">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:192">y</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zy</span> <span class="id">He</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#lt_cexp_pos">lt_cexp_pos</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">2!cexp_abs</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Variable</span> <span id="Generic.Format.monotone_exp.rnd" class="id"><a name="Generic.Format.monotone_exp.rnd" class="">rnd</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="valid_rnd:194" class="id"><a name="valid_rnd:194" class="">valid_rnd</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> <span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="mag_round_ge" class="id"><a name="mag_round_ge" class="">mag_round_ge</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:195" class="id"><a name="x:195" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:195">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:195">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:195">x</a></span>))%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof94')">Proof with</span></div>
<div class="proofscript" id="proof94">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ZR_or_AW">round_ZR_or_AW</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[H|H]</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">H</span> <span class="id">;</span> <span class="id">clear</span> <span class="id">H</span> <span class="id">;</span> <span class="id">intros</span> <span class="id">Zr</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mag_round_ZR">mag_round_ZR</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Zr</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_le_abs">mag_le_abs</a></span>.<br/>
<span class="id">contradict</span> <span class="id">Zr</span>.<br/>
<span class="id">rewrite</span> <span class="id">Zr</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_AW_abs">round_AW_abs</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_AW_UP">round_AW_UP</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="cexp_round_ge" class="id"><a name="cexp_round_ge" class="">cexp_round_ge</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:196" class="id"><a name="x:196" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:196">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:196">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:196">x</a></span>))%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof95')">Proof with</span></div>
<div class="proofscript" id="proof95">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span> <span class="id">Zr</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#monotone_exp">monotone_exp</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mag_round_ge">mag_round_ge</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.monotone_exp">monotone_exp</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format.Znearest" class="id"><a name="Generic.Format.Znearest" class="">Znearest</a></span>.<br/>
<br/>
<div class="doc">Roundings to nearest: when in the middle, use the choice function </div>
<span class="vernacular">Variable</span> <span id="Generic.Format.Znearest.choice" class="id"><a name="Generic.Format.Znearest.choice" class="">choice</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Znearest" class="id"><a name="Znearest" class="">Znearest</a></span> <span id="x:198" class="id"><a name="x:198" class="">x</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare">Rcompare</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:198">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:198">x</a></span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>) <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> <span class="id">=&gt;</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:198">x</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:198">x</a></span>) <span class="gallina-kwd">then</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:198">x</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:198">x</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span> <span class="id">=&gt;</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:198">x</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Znearest_DN_or_UP" class="id"><a name="Znearest_DN_or_UP" class="">Znearest_DN_or_UP</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:199" class="id"><a name="x:199" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:199">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:199">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:199">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:199">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof96')">Proof.</span></div>
<div class="proofscript" id="proof96">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_spec">Rcompare_spec</a></span> <span class="id">;</span> <span class="id">intros</span> <span class="id">_</span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Znearest_ge_floor" class="id"><a name="Znearest_ge_floor" class="">Znearest_ge_floor</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:200" class="id"><a name="x:200" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:200">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:200">x</a></span>)%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof97')">Proof.</span></div>
<div class="proofscript" id="proof97">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest_DN_or_UP">Znearest_DN_or_UP</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#le_IZR">le_IZR</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">x</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Znearest_le_ceil" class="id"><a name="Znearest_le_ceil" class="">Znearest_le_ceil</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:201" class="id"><a name="x:201" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:201">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:201">x</a></span>)%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof98')">Proof.</span></div>
<div class="proofscript" id="proof98">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest_DN_or_UP">Znearest_DN_or_UP</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#le_IZR">le_IZR</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">x</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="valid_rnd_N" class="id"><a name="valid_rnd_N" class="">valid_rnd_N</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof99')">Proof.</span></div>
<div class="proofscript" id="proof99">
<span class="id">split</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)) <span class="id">y</span>) <span class="gallina-kwd">as</span> <span class="id">[H|H]</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest_le_ceil">Znearest_le_ceil</a></span> <span class="id">x</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest_ge_floor">Znearest_ge_floor</a></span> <span class="id">y</span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lub">Zfloor_lub</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">assert</span> (<span class="id">Hf:</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">y</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span> <span class="id">y</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_le">Zfloor_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">H</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_glb">Zceil_glb</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_ub">Zfloor_ub</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="gallina-kwd">at</span> <span class="id">1</span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_spec">Rcompare_spec</a></span> <span class="id">;</span> <span class="id">intro</span> <span class="id">Hx</span>.<br/>
<span class="comment">(*&nbsp;..&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hf</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest_ge_floor">Znearest_ge_floor</a></span>.<br/>
<span class="comment">(*&nbsp;..&nbsp;*)</span><br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hf</span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_spec">Rcompare_spec</a></span> <span class="id">;</span> <span class="id">intro</span> <span class="id">Hy</span>.<br/>
<span class="id">elim</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hy</span>).<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hx</span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_r">Rplus_le_compat_r</a></span>.<br/>
<span class="id">replace</span> <span class="id">y</span> <span class="gallina-kwd">with</span> <span class="id">x</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_eq_reg_l">Rplus_eq_reg_l</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="id">rewrite</span> <span class="id">2!</span>(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)))).<br/>
<span class="id">change</span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">y</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">Hy</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>).<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#le_IZR">le_IZR</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">x</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_le">Zceil_le</a></span>.<br/>
<span class="comment">(*&nbsp;..&nbsp;*)</span><br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hf</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_Gt">Rcompare_Gt</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_le">Zceil_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_r">Rplus_le_compat_r</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">intros</span> <span class="id">n</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_IZR">Zfloor_IZR</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_Lt">Rcompare_Lt</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Znearest_N_strict" class="id"><a name="Znearest_N_strict" class="">Znearest_N_strict</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:202" class="id"><a name="x:202" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:202">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:202">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:202">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:202">x</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof100')">Proof.</span></div>
<div class="proofscript" id="proof100">
<span class="id">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_spec">Rcompare_spec</a></span> <span class="id">;</span> <span class="id">intros</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="id">exact</span> <span class="id">H</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="id">now</span> <span class="id">elim</span> <span class="id">Hx</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_minus_distr">Ropp_minus_distr</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_cancel">Ropp_lt_cancel</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="gallina-kwd">with</span> <span class="id">1</span>%<span class="id">R</span>.<br/>
<span class="id">replace</span> (<span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-/2</a></span>)%<span class="id">R</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>)%<span class="id">R</span> <span class="gallina-kwd">by</span> <span class="id">field</span>.<br/>
<span class="id">now</span> <span class="id">replace</span> (<span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad">+</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id">x</span>))%<span class="id">R</span> <span class="gallina-kwd">with</span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span> <span class="gallina-kwd">by</span> <span class="id">ring</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>)%<span class="id">R</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_opp_l">Rplus_opp_l</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span> <span class="id">x</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_minus">Rle_minus</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Znearest_half" class="id"><a name="Znearest_half" class="">Znearest_half</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:203" class="id"><a name="x:203" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:203">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:203">x</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof101')">Proof.</span></div>
<div class="proofscript" id="proof101">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>)) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="id">assert</span> (<span class="id">K:</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>)%<span class="id">R</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_le">Req_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest_DN_or_UP">Znearest_DN_or_UP</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[H|H]</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">H</span> <span class="id">;</span> <span class="id">clear</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>.<br/>
<span class="id">replace</span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad">+</a></span> <span class="id">1</span>))%<span class="id">R</span> <span class="gallina-kwd">with</span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id">1</span>)%<span class="id">R</span> <span class="gallina-kwd">by</span> <span class="id">ring</span>.<br/>
<span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
<span class="id">now</span> <span class="id">replace</span> (<span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>)%<span class="id">R</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>)%<span class="id">R</span> <span class="gallina-kwd">by</span> <span class="id">field</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_opp_l">Rplus_opp_l,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span>.<br/>
<span class="id">fold</span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest_N_strict">Znearest_N_strict</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Znearest_imp" class="id"><a name="Znearest_imp" class="">Znearest_imp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:204" class="id"><a name="x:204" class="">x</a></span> <span id="n:205" class="id"><a name="n:205" class="">n,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:204">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#n:205">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:204">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#n:205">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof102')">Proof.</span></div>
<div class="proofscript" id="proof102">
<span class="id">intros</span> <span class="id">x</span> <span class="id">n</span> <span class="id">Hd</span>.<br/>
<span class="id">cut</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">n</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">1</span>)%<span class="id">Z</span>.<br/>
<span class="id">clear</span> <span class="id">;</span> <span class="id">lia</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#lt_IZR">lt_IZR</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#abs_IZR">abs_IZR,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#minus_IZR">minus_IZR</a></span>.<br/>
<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">n</span>)%<span class="id">R</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id">x</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad">+</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">n</span>))%<span class="id">R</span> <span class="gallina-kwd">by</span> <span class="id">ring</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_triang">Rabs_triang</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="id">simpl</span>.<br/>
<span class="id">replace</span> <span class="id">1</span>%<span class="id">R</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/2</a></span>)%<span class="id">R</span> <span class="gallina-kwd">by</span> <span class="id">field</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_lt_compat">Rplus_le_lt_compat</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Hd</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest_half">Znearest_half</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_N_pt" class="id"><a name="round_N_pt" class="">round_N_pt</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:206" class="id"><a name="x:206" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Defs.html#Rnd_N_pt">Rnd_N_pt</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:206">x</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:206">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof103')">Proof.</span></div>
<div class="proofscript" id="proof103">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">set</span> (<span class="id">d</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="id">set</span> (<span class="id">u</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>).<br/>
<span class="id">set</span> (<span class="id">mx</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>).<br/>
<span class="id">set</span> (<span class="id">bx</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span>)).<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">assert</span> (<span class="id">H:</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rmin">Rmin</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id">d</span>) (<span class="id">u</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id">x</span>))%<span class="id">R</span>).<br/>
<span class="id">pattern</span> <span class="id">x</span> <span class="gallina-kwd">at</span> <span class="id">-1</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_mult_bpow">scaled_mantissa_mult_bpow</a></span>.<br/>
<span class="id">unfold</span> <span class="id">d,</span> <span class="id">u,</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">fold</span> <span class="id">mx</span> <span class="id">bx</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">3!Rmult_minus_distr_r</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult,</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="id">bx</span>). <span class="id">2:</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#Rmult_min_distr_r">Rmult_min_distr_r</a></span>. <span class="id">2:</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">mx</span>)) <span class="id">mx</span>) <span class="gallina-kwd">as</span> <span class="id">[Hm|Hm]</span>.<br/>
<span class="comment">(*&nbsp;..&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id">Hm</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span> <span class="gallina-kwd">at</span> <span class="id">2</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_Lt">Rcompare_Lt</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hm</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span> <span class="gallina-kwd">at</span> <span class="id">-3</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rmin">Rmin</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_dec">Rle_dec</a></span> <span class="id">0</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">mx</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id">mx</span>)) <span class="gallina-kwd">as</span> <span class="id">[H|H]</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>.<br/>
<span class="comment">(*&nbsp;..&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_floor_ceil_middle">Rcompare_floor_ceil_middle</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hm</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rmin_compare">Rmin_compare</a></span>.<br/>
<span class="id">assert</span> (<span class="id">H:</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">mx</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">mx</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id">mx</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">mx</span>))%<span class="id">R</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_spec">Rcompare_spec</a></span> <span class="id">;</span> <span class="id">intros</span> <span class="id">Hm'</span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hm'</span>.<br/>
<span class="id">exact</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_N_pt_DN_UP">Rnd_N_pt_DN_UP</a></span> <span class="gallina-kwd">with</span> <span class="id">d</span> <span class="id">u</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>.<br/>
<span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">H</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rmin_l">Rmin_l</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">H</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rmin_r">Rmin_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_N_middle" class="id"><a name="round_N_middle" class="">round_N_middle</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:207" class="id"><a name="x:207" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#x:207">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:207">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:207">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:207">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:207">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:207">x</a></span>)) <span class="gallina-kwd">then</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:207">x</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:207">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof104')">Proof.</span></div>
<div class="proofscript" id="proof104">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">pattern</span> <span class="id">x</span> <span class="gallina-kwd">at</span> <span class="id">1</span> <span class="id">4</span> <span class="id">;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_mult_bpow">scaled_mantissa_mult_bpow</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest,</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>))) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)) <span class="gallina-kwd">as</span> <span class="id">[Fx|Fx]</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">intros</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Fx</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_IZR">Zceil_IZR,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_IZR">Zfloor_IZR</a></span>.<br/>
<span class="id">set</span> (<span class="id">m</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)).<br/>
<span class="id">now</span> <span class="id">case</span> (<span class="id"><a href="Flocq.Core.Raux.html#Rcompare">Rcompare</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">m</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/</a></span> <span class="id">2</span>)) <span class="id">;</span> <span class="id">case</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span> <span class="id">m</span>).<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">intros</span> <span class="id">H</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_floor_ceil_middle">Rcompare_floor_ceil_middle</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Fx</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_Eq">Rcompare_Eq</a></span>.<br/>
<span class="id">now</span> <span class="id">case</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_eq_reg_r">Rmult_eq_reg_r</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span>)).<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id">2!Rmult_minus_distr_r</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="round_N_small_pos" class="id"><a name="round_N_small_pos" class="">round_N_small_pos</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:208" class="id"><a name="x:208" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ex:209" class="id"><a name="ex:209" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#bpow">Raux.bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:209">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:208">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">Raux.bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:209">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:209">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:209">ex</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:208">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof105')">Proof.</span></div>
<div class="proofscript" id="proof105">
<span class="id">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hex</span> <span class="id">Hf</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp;</a></span> <span class="id">simpl</span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_eq_reg_r">Rmult_eq_reg_r</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>))))<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">[|now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq;</a></span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0]</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">replace</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id">_</span>)%<span class="id">Z</span> <span class="gallina-kwd">with</span> <span class="id">0</span>%<span class="id">Z</span> <span class="gallina-kwd">by</span> <span class="id">ring;</span> <span class="id">simpl;</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.DiscrR.html#IZR_eq">IZR_eq</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest_imp">Znearest_imp</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus;</a></span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0;</a></span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="id">assert</span> (<span class="id">H</span> <span class="id">:</span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#7822f196a19e8673dbc60a529f728eb7">&gt;=</a></span> <span class="id">0</span>)%<span class="id">R</span>).<br/>
<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge;</a></span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id">ex</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>))<span class="id">;</span> <span class="id">[|exact</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hex</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>. <span class="id">}</span><br/>
<span class="id">assert</span> (<span class="id">H'</span> <span class="id">:</span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#7822f196a19e8673dbc60a529f728eb7">&gt;=</a></span> <span class="id">0</span>)%<span class="id">R</span>).<br/>
<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge;</a></span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rge_le">Rge_le</a></span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>. <span class="id">}</span><br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right;</a></span> <span class="id">[|exact</span> <span class="id">H']</span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>))))<span class="id">;</span> <span class="id">[now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0|]</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc,</a></span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">_</span>)%<span class="id">Z</span> <span class="gallina-kwd">with</span> <span class="id">0</span>%<span class="id">Z</span> <span class="gallina-kwd">by</span> <span class="id">ring;</span> <span class="id">simpl;</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hex</span>)).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>)).<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span> <span class="id">ex</span>)<span class="id">;</span> <span class="id">[lia|]</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus;</a></span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r;</a></span> <span class="id">[now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0|]</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">Raux.bpow</a></span><span class="id">,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span><span class="id">;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rinv_le">Rinv_le;</a></span> <span class="id">[exact</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.setoid_ring.RealField.html#Rlt_0_2">Rlt_0_2|]</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="gallina-kwd">as</span> (<span class="id">beta_val,beta_prop</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.Znearest">Znearest</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format.rndNA" class="id"><a name="Generic.Format.rndNA" class="">rndNA</a></span>.<br/>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="valid_rnd_NA" class="id"><a name="valid_rnd_NA" class="">valid_rnd_NA</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> <span class="id">0</span>)) <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span> <span class="id">_</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="round_NA_pt" class="id"><a name="round_NA_pt" class="">round_NA_pt</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:210" class="id"><a name="x:210" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Defs.html#Rnd_NA_pt">Rnd_NA_pt</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:210">x</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> <span class="id">0</span>)) <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:210">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof106')">Proof.</span></div>
<div class="proofscript" id="proof106">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_N_pt">round_N_pt</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> <span class="id">0</span>) <span class="id">x</span>).<br/>
<span class="id">set</span> (<span class="id">f</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> <span class="id">0</span>)) <span class="id">x</span>).<br/>
<span class="id">intros</span> <span class="id">Rxf</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id">x</span>)) <span class="gallina-kwd">as</span> <span class="id">[Hm|Hm]</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_NA_pt_N">Rnd_NA_pt_N</a></span>.<br/>
<span class="id">exact</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">exact</span> <span class="id">Rxf</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">0</span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_N_middle">round_N_middle</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hm</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zle_bool_true">Zle_bool_true</a></span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span> <span class="id">x</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lub">Zfloor_lub</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_N_pt_ge_0">Rnd_N_pt_ge_0</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Hx</span>) (<span class="id">3</span> <span class="id">:=</span> <span class="id">Rxf</span>).<br/>
<span class="id">exact</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left">Rabs_left</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_N_middle">round_N_middle</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hm</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zle_bool_false">Zle_bool_false</a></span>.<br/>
<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span> <span class="id">x</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#lt_IZR">lt_IZR</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span>))).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_N_pt_le_0">Rnd_N_pt_le_0</a></span> <span class="gallina-kwd">with</span> (<span class="id">3</span> <span class="id">:=</span> <span class="id">Rxf</span>).<br/>
<span class="id">exact</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id">Rxf</span>.<br/>
<span class="id">intros</span> <span class="id">g</span> <span class="id">Rxg</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_N_pt_unique">Rnd_N_pt_unique</a></span> <span class="gallina-kwd">with</span> (<span class="id">3</span> <span class="id">:=</span> <span class="id">Hm</span>) (<span class="id">4</span> <span class="id">:=</span> <span class="id">Rxf</span>) (<span class="id">5</span> <span class="id">:=</span> <span class="id">Rxg</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.rndNA">rndNA</a></span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span id="Znearest0" class="id"><a name="Znearest0" class="">Znearest0</a></span> <span class="id">:=</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> (<span class="gallina-kwd">fun</span> <span id="x:211" class="id"><a name="x:211" class="">x</a></span> <span class="id">=&gt;</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zlt_bool">Zlt_bool</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:211">x</a></span> <span class="id">0</span>))).<br/>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format.rndN0" class="id"><a name="Generic.Format.rndN0" class="">rndN0</a></span>.<br/>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="valid_rnd_N0" class="id"><a name="valid_rnd_N0" class="">valid_rnd_N0</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest0">Znearest0</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span> <span class="id">_</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="round_N0_pt" class="id"><a name="round_N0_pt" class="">round_N0_pt</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:212" class="id"><a name="x:212" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Defs.html#Rnd_N0_pt">Rnd_N0_pt</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:212">x</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest0">Znearest0</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:212">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof107')">Proof.</span></div>
<div class="proofscript" id="proof107">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_N_pt">round_N_pt</a></span> (<span class="gallina-kwd">fun</span> <span id="t:214" class="id"><span id="t:213" class="id"><a name="t:214" class="">t</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zlt_bool">Zlt_bool</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#t:213">t</a></span> <span class="id">0</span>) <span class="id">x</span>).<br/>
<span class="id">set</span> (<span class="id">f</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> (<span class="gallina-kwd">fun</span> <span id="t:216" class="id"><span id="t:215" class="id"><a name="t:216" class="">t</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zlt_bool">Zlt_bool</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#t:215">t</a></span> <span class="id">0</span>)) <span class="id">x</span>).<br/>
<span class="id">intros</span> <span class="id">Rxf</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id">x</span>)) <span class="gallina-kwd">as</span> <span class="id">[Hm|Hm]</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_N0_pt_N">Rnd_N0_pt_N</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">exact</span> <span class="id">Rxf</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">0</span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_N_middle">round_N_middle</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hm</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_false">Zlt_bool_false</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lub">Zfloor_lub</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_N_pt_ge_0">Rnd_N_pt_ge_0</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Hx</span>) (<span class="id">3</span> <span class="id">:=</span> <span class="id">Rxf</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left">Rabs_left</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_N_middle">round_N_middle</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hm</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_true">Zlt_bool_true</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#lt_IZR">lt_IZR</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id">x</span>))%<span class="id">Z</span>)%<span class="id">R</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span> <span class="gallina-kwd">with</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_N_pt_le_0">Rnd_N_pt_le_0</a></span> <span class="gallina-kwd">with</span> (<span class="id">3</span> <span class="id">:=</span> <span class="id">Rxf</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id">Rxf</span>.<br/>
<span class="id">intros</span> <span class="id">g</span> <span class="id">Rxg</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Round_pred.html#Rnd_N_pt_unique">Rnd_N_pt_unique</a></span> <span class="gallina-kwd">with</span> (<span class="id">3</span> <span class="id">:=</span> <span class="id">Hm</span>) (<span class="id">4</span> <span class="id">:=</span> <span class="id">Rxf</span>) (<span class="id">5</span> <span class="id">:=</span> <span class="id">Rxg</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_DN_pt">round_DN_pt;</a></span> <span class="id">easy</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_UP_pt">round_UP_pt;</a></span> <span class="id">easy</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.rndN0">rndN0</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="Generic.Format.rndN_opp" class="id"><a name="Generic.Format.rndN_opp" class="">rndN_opp</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Znearest_opp" class="id"><a name="Znearest_opp" class="">Znearest_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="choice:217" class="id"><a name="choice:217" class="">choice</a></span> <span id="x:218" class="id"><a name="x:218" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#choice:217">choice</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:218">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> (<span class="gallina-kwd">fun</span> <span id="t:219" class="id"><a name="t:219" class="">t</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#choice:217">choice</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#t:219">t</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>))%<span class="id">Z</span>)) <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:218">x</a></span>)%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof108')">Proof with</span></div>
<div class="proofscript" id="proof108">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">choice</span> <span class="id">x</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hx</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#opp_IZR">opp_IZR</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">2!Zrnd_IZR</span>...<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>)))%<span class="id">R</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_ceil_floor_middle">Rcompare_ceil_floor_middle</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_floor_ceil_middle">Rcompare_floor_ceil_middle</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_sym">Rcompare_sym</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Hx</span>).<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="id">case</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare">Rcompare</a></span> <span class="id">;</span> <span class="id">simpl</span> <span class="id">;</span> <span class="id">trivial</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_involutive">Z.opp_involutive</a></span>.<br/>
<span class="id">case</span> (<span class="id">choice</span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id">x</span>))) <span class="id">;</span> <span class="id">simpl</span> <span class="id">;</span> <span class="id">trivial</span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_involutive">Z.opp_involutive</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_involutive">Z.opp_involutive</a></span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#opp_IZR">opp_IZR</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="round_N_opp" class="id"><a name="round_N_opp" class="">round_N_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="choice:220" class="id"><a name="choice:220" class="">choice,</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:221" class="id"><a name="x:221" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#choice:220">choice</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> (<span class="gallina-kwd">fun</span> <span id="t:222" class="id"><a name="t:222" class="">t</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#choice:220">choice</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#t:222">t</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>))%<span class="id">Z</span>))) <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:221">x</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof109')">Proof.</span></div>
<div class="proofscript" id="proof109">
<span class="id">intros</span> <span class="id">choice</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp_opp">cexp_opp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest_opp">Znearest_opp</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#opp_IZR">opp_IZR</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse">Ropp_mult_distr_l_reverse</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="round_N0_opp" class="id"><a name="round_N0_opp" class="">round_N0_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:223" class="id"><a name="x:223" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest0">Znearest0</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:223">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest0">Znearest0</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:223">x</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof110')">Proof.</span></div>
<div class="proofscript" id="proof110">
<span class="id">intros</span> <span class="id">x</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_eq_compat">Ropp_eq_compat</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ext">round_ext</a></span>.<br/>
<span class="id">clear</span> <span class="id">x;</span> <span class="id">intro</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="id">case_eq</span> (<span class="id"><a href="Flocq.Core.Raux.html#Rcompare">Rcompare</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/</a></span> <span class="id">2</span>))<span class="id">;</span> <span class="id">intro</span> <span class="id">C;</span><br/>
<span class="id">[|reflexivity|reflexivity]</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_Eq_inv">Rcompare_Eq_inv</a></span> <span class="gallina-kwd">in</span> <span class="id">C</span>.<br/>
<span class="id">assert</span> (<span class="id">H</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id">0</span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id">0</span>)%<span class="id">Z</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">[|now</span> <span class="id">rewrite</span> <span class="id">H]</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Zaux.html#negb_Zlt_bool">negb_Zlt_bool</a></span>.<br/>
<span class="id">case_eq</span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id">0</span>)%<span class="id">Z;</span> <span class="id">intro</span> <span class="id">C'</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zlt_is_lt_bool">Zlt_is_lt_bool</a></span> <span class="gallina-kwd">in</span> <span class="id">C'</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zle_bool_true">Zle_bool_true</a></span>.<br/>
<span class="id">lia</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_ge">Z.ltb_ge</a></span> <span class="gallina-kwd">in</span> <span class="id">C'</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zle_bool_false">Zle_bool_false</a></span>.<br/>
<span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.rndN_opp">rndN_opp</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="round_N_small" class="id"><a name="round_N_small" class="">round_N_small</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="choice:224" class="id"><a name="choice:224" class="">choice,</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:225" class="id"><a name="x:225" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ex:226" class="id"><a name="ex:226" class="">ex,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#bpow">Raux.bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:226">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:225">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">Raux.bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:226">ex</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:226">ex</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ex:226">ex</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#choice:224">choice</a></span>) <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:225">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof111')">Proof.</span></div>
<div class="proofscript" id="proof111">
<span class="id">intros</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">Hex</span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">0</span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[Px|Nx]</span>.<br/>
<span class="id">{</span> <span class="id">now</span> <span class="id">revert</span> <span class="id">Hex;</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_N_small_pos">round_N_small_pos;</a></span> <span class="id">revert</span> <span class="id">Hx;</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>. <span class="id">}</span><br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span>(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>)<span class="id">,</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_N_opp">round_N_opp,</a></span> <span class="id">&lt;-Ropp_0;</span> <span class="id">f_equal</span>.<br/>
<span class="id">now</span> <span class="id">revert</span> <span class="id">Hex;</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_N_small_pos">round_N_small_pos;</a></span> <span class="id">revert</span> <span class="id">Hx;</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left">Rabs_left</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Format">Format</a></span>.<br/>
<br/>
<div class="doc">Inclusion of a format into an extended format </div>
<span class="vernacular">Section</span> <span id="Generic.Inclusion" class="id"><a name="Generic.Inclusion" class="">Inclusion</a></span>.<br/>
<br/>
<span class="vernacular">Variables</span> <span id="Generic.Inclusion.fexp1" class="id"><a name="Generic.Inclusion.fexp1" class="">fexp1</a></span> <span id="Generic.Inclusion.fexp2" class="id"><a name="Generic.Inclusion.fexp2" class="">fexp2</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="valid_exp1:229" class="id"><a name="valid_exp1:229" class="">valid_exp1</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id">}</span>.<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="valid_exp2:230" class="id"><a name="valid_exp2:230" class="">valid_exp2</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_inclusion_mag" class="id"><a name="generic_inclusion_mag" class="">generic_inclusion_mag</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:231" class="id"><a name="x:231" class="">x,</a></span><br/>
&nbsp;&nbsp;( <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:231">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:231">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:231">x</a></span>))%<span class="id">Z</span> ) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:231">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:231">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof112')">Proof.</span></div>
<div class="proofscript" id="proof112">
<span class="id">intros</span> <span class="id">x</span> <span class="id">He</span> <span class="id">Fx</span>.<br/>
<span class="id">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="id">intros</span> <span class="id">Zx</span>.<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Fx</span>.<br/>
<span class="id">apply</span> <span class="id">He</span>.<br/>
<span class="id">contradict</span> <span class="id">Zx</span>.<br/>
<span class="id">rewrite</span> <span class="id">Zx,</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa_0">scaled_mantissa_0</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_inclusion_lt_ge" class="id"><a name="generic_inclusion_lt_ge" class="">generic_inclusion_lt_ge</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e1:232" class="id"><a name="e1:232" class="">e1</a></span> <span id="e2:233" class="id"><a name="e2:233" class="">e2,</a></span><br/>
&nbsp;&nbsp;( <span class="gallina-kwd">forall</span> <span id="e:234" class="id"><a name="e:234" class="">e,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#e1:232">e1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#3e2cc3b784fd1c5341d23eca6b98405f">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:234">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#3e2cc3b784fd1c5341d23eca6b98405f">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e2:233">e2</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:234">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:234">e</a></span>)%<span class="id">Z</span> ) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:235" class="id"><a name="x:235" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e1:232">e1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:235">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e2:233">e2</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:235">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:235">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof113')">Proof.</span></div>
<div class="proofscript" id="proof113">
<span class="id">intros</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">He</span> <span class="id">x</span> (<span class="id">Hx1,Hx2</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_inclusion_mag">generic_inclusion_mag</a></span>.<br/>
<span class="id">intros</span> <span class="id">Zx</span>.<br/>
<span class="id">apply</span> <span class="id">He</span>.<br/>
<span class="id">split</span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_gt_bpow">mag_gt_bpow</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_le_bpow">mag_le_bpow</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_inclusion" class="id"><a name="generic_inclusion" class="">generic_inclusion</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e:236" class="id"><a name="e:236" class="">e,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:236">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:236">e</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:237" class="id"><a name="x:237" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#e:236">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:237">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:236">e</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:237">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:237">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof114')">Proof with</span></div>
<div class="proofscript" id="proof114">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">e</span> <span class="id">He</span> <span class="id">x</span> (<span class="id">Hx1,[Hx2|Hx2]</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_inclusion_mag">generic_inclusion_mag</a></span>.<br/>
<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_unique">mag_unique</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hx1</span> <span class="id">Hx2</span>).<br/>
<span class="id">intros</span> <span class="id">Fx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_abs_inv">generic_format_abs_inv</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hx2</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_bpow'">generic_format_bpow'</a></span>...<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">He</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_bpow_inv">generic_format_bpow_inv</a></span>...<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hx2</span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_abs">generic_format_abs</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_inclusion_le_ge" class="id"><a name="generic_inclusion_le_ge" class="">generic_inclusion_le_ge</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e1:238" class="id"><a name="e1:238" class="">e1</a></span> <span id="e2:239" class="id"><a name="e2:239" class="">e2,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#e1:238">e1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e2:239">e2</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;( <span class="gallina-kwd">forall</span> <span id="e:240" class="id"><a name="e:240" class="">e,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#e1:238">e1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#3e2cc3b784fd1c5341d23eca6b98405f">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:240">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#3e2cc3b784fd1c5341d23eca6b98405f">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e2:239">e2</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:240">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:240">e</a></span>)%<span class="id">Z</span> ) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:241" class="id"><a name="x:241" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e1:238">e1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:241">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e2:239">e2</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:241">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:241">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof115')">Proof.</span></div>
<div class="proofscript" id="proof115">
<span class="id">intros</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">He'</span> <span class="id">He</span> <span class="id">x</span> (<span class="id">Hx1,[Hx2|Hx2]</span>).<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_inclusion_mag">generic_inclusion_mag</a></span>.<br/>
<span class="id">intros</span> <span class="id">Zx</span>.<br/>
<span class="id">apply</span> <span class="id">He</span>.<br/>
<span class="id">split</span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_gt_bpow">mag_gt_bpow</a></span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_le_bpow">mag_le_bpow</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_inclusion">generic_inclusion</a></span> <span class="gallina-kwd">with</span> (<span class="id">e</span> <span class="id">:=</span> <span class="id">e2</span>).<br/>
<span class="id">apply</span> <span class="id">He</span>.<br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id">He'</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hx2</span>.<br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_pred">Zle_pred</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_inclusion_le" class="id"><a name="generic_inclusion_le" class="">generic_inclusion_le</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e2:242" class="id"><a name="e2:242" class="">e2,</a></span><br/>
&nbsp;&nbsp;( <span class="gallina-kwd">forall</span> <span id="e:243" class="id"><a name="e:243" class="">e,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#e:243">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e2:242">e2</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:243">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:243">e</a></span>)%<span class="id">Z</span> ) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:244" class="id"><a name="x:244" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:244">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e2:242">e2</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:244">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:244">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof116')">Proof.</span></div>
<div class="proofscript" id="proof116">
<span class="id">intros</span> <span class="id">e2</span> <span class="id">He</span> <span class="id">x</span> <span class="id">[Hx|Hx]</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_inclusion_mag">generic_inclusion_mag</a></span>.<br/>
<span class="id">intros</span> <span class="id">Zx</span>.<br/>
<span class="id">apply</span> <span class="id">He</span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_le_bpow">mag_le_bpow</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_inclusion">generic_inclusion</a></span> <span class="gallina-kwd">with</span> (<span class="id">e</span> <span class="id">:=</span> <span class="id">e2</span>).<br/>
<span class="id">apply</span> <span class="id">He</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">split</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_pred">Zle_pred</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_inclusion_ge" class="id"><a name="generic_inclusion_ge" class="">generic_inclusion_ge</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e1:245" class="id"><a name="e1:245" class="">e1,</a></span><br/>
&nbsp;&nbsp;( <span class="gallina-kwd">forall</span> <span id="e:246" class="id"><a name="e:246" class="">e,</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#e1:245">e1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:246">e</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:246">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e:246">e</a></span>)%<span class="id">Z</span> ) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:247" class="id"><a name="x:247" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#e1:245">e1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:247">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:247">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:247">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof117')">Proof.</span></div>
<div class="proofscript" id="proof117">
<span class="id">intros</span> <span class="id">e1</span> <span class="id">He</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_inclusion_mag">generic_inclusion_mag</a></span>.<br/>
<span class="id">intros</span> <span class="id">Zx</span>.<br/>
<span class="id">apply</span> <span class="id">He</span>.<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_gt_bpow">mag_gt_bpow</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Variable</span> <span id="Generic.Inclusion.rnd" class="id"><a name="Generic.Inclusion.rnd" class="">rnd</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Context</span> <span class="id">{</span> <span id="valid_rnd:249" class="id"><a name="valid_rnd:249" class="">valid_rnd</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.rnd">rnd</a></span> <span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="generic_round_generic" class="id"><a name="generic_round_generic" class="">generic_round_generic</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:250" class="id"><a name="x:250" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:250">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.rnd">rnd</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:250">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof118')">Proof with</span></div>
<div class="proofscript" id="proof118">
 <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">intros</span> <span class="id">x</span> <span class="id">Gx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_abs_inv">generic_format_abs_inv</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_abs">generic_format_abs</a></span> <span class="gallina-kwd">in</span> <span class="id">Gx</span>.<br/>
<span class="id">revert</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">x</span> <span class="id">Gx</span>.<br/>
<span class="id">refine</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_abs_abs">round_abs_abs</a></span> <span class="id">_</span> (<span class="gallina-kwd">fun</span> <span id="x:253" class="id"><span id="x:251" class="id"><a name="x:253" class="">x</a></span></span> <span id="y:254" class="id"><span id="y:252" class="id"><a name="y:254" class="">y</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:251">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#y:252">y</a></span>) <span class="id">_</span>).<br/>
<span class="id">intros</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">x</span> <span class="id">[Hx|Hx]</span> <span class="id">Gx</span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;&gt;&nbsp;0&nbsp;*)</span><br/>
<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#mag_generic_gt">mag_generic_gt</a></span> <span class="id">_</span> <span class="id">x</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>) <span class="id">Gx</span>).<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="gallina-kwd">as</span> (<span class="id">ex,Ex</span>) <span class="id">;</span> <span class="id">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>)).<br/>
<span class="id">intros</span> <span class="id">He'</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">Ex</span> <span class="gallina-kwd">by</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id">ex</span>)) <span class="gallina-kwd">as</span> <span class="id">[He|He]</span>.<br/>
<span class="comment">(*&nbsp;-&nbsp;x&nbsp;near&nbsp;0&nbsp;for&nbsp;fexp2&nbsp;*)</span><br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_small_pos">round_bounded_small_pos</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.rnd">rnd</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">He</span> <span class="id">Ex</span>) <span class="gallina-kwd">as</span> <span class="id">[Hr|Hr]</span>.<br/>
<span class="id">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_bpow'">generic_format_bpow'</a></span>...<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="gallina-kwd">with</span> <span class="id">ex</span>...<br/>
<span class="comment">(*&nbsp;-&nbsp;x&nbsp;large&nbsp;for&nbsp;fexp2&nbsp;*)</span><br/>
<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id">x</span>) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id">x</span>)) <span class="gallina-kwd">as</span> <span class="id">[He''|He'']</span>.<br/>
<span class="comment">(*&nbsp;-&nbsp;-&nbsp;round&nbsp;fexp2&nbsp;x&nbsp;is&nbsp;representable&nbsp;for&nbsp;fexp1&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="id">rewrite</span> <span class="id">Gx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="id">fold</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id">x</span>).<br/>
<span class="id">intros</span> <span class="id">Zx</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="gallina-kwd">at</span> <span class="id">1</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#mag_round_ZR">mag_round_ZR</a></span>...<br/>
<span class="id">contradict</span> <span class="id">Zx</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#eq_0_F2R">eq_0_F2R</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Zx</span>).<br/>
<span class="comment">(*&nbsp;-&nbsp;-&nbsp;round&nbsp;fexp2&nbsp;x&nbsp;has&nbsp;too&nbsp;many&nbsp;digits&nbsp;for&nbsp;fexp1&nbsp;*)</span><br/>
<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.rnd">rnd</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">He</span> <span class="id">Ex</span>) <span class="gallina-kwd">as</span> (<span class="id">Hr1,[Hr2|Hr2]</span>).<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="id">intros</span> <span class="id">Zx</span>.<br/>
<span class="id">fold</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion.rnd">rnd</a></span> <span class="id">x</span>).<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="gallina-kwd">at</span> <span class="id">1</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_unique_pos">mag_unique_pos</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hr1</span> <span class="id">Hr2</span>).<br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_unique_pos">mag_unique_pos</a></span> <span class="gallina-kwd">with</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">Ex</span>).<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">Hr2</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_bpow'">generic_format_bpow'</a></span>...<br/>
<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">Hx,</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic.Inclusion">Inclusion</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Generic">Generic</a></span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span id="ZnearestA" class="id"><a name="ZnearestA" class="">ZnearestA</a></span> <span class="id">:=</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> <span class="id">0</span>)).<br/>
<br/>
<span class="vernacular">Section</span> <span id="rndNA_opp" class="id"><a name="rndNA_opp" class="">rndNA_opp</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="round_NA_opp" class="id"><a name="round_NA_opp" class="">round_NA_opp</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="beta:255" class="id"><a name="beta:255" class="">beta</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.Zaux.html#radix">radix,</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="fexp:256" class="id"><a name="fexp:256" class="">fexp</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:257" class="id"><a name="x:257" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#beta:255">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#fexp:256">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ZnearestA">ZnearestA</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:257">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#beta:255">beta</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#fexp:256">fexp</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ZnearestA">ZnearestA</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#x:257">x</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof119')">Proof.</span></div>
<div class="proofscript" id="proof119">
<span class="id">intros</span> <span class="id">beta</span> <span class="id">fexp</span> <span class="id">x</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_eq_compat">Ropp_eq_compat</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_ext">round_ext</a></span>.<br/>
<span class="id">clear</span> <span class="id">x;</span> <span class="id">intro</span> <span class="id">x</span>.<br/>
<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="id">case_eq</span> (<span class="id"><a href="Flocq.Core.Raux.html#Rcompare">Rcompare</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/</a></span> <span class="id">2</span>))<span class="id">;</span> <span class="id">intro</span> <span class="id">C;</span><br/>
<span class="id">[|reflexivity|reflexivity]</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_Eq_inv">Rcompare_Eq_inv</a></span> <span class="gallina-kwd">in</span> <span class="id">C</span>.<br/>
<span class="id">assert</span> (<span class="id">H</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e">&lt;=?</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>))%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e">&lt;=?</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)%<span class="id">Z</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">[|now</span> <span class="id">rewrite</span> <span class="id">H]</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Zaux.html#negb_Zle_bool">negb_Zle_bool</a></span>.<br/>
<span class="id">case_eq</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e">&lt;=?</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)%<span class="id">Z;</span> <span class="id">intro</span> <span class="id">C'</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span> <span class="gallina-kwd">in</span> <span class="id">C'</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_true">Zlt_bool_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.leb_gt">Z.leb_gt</a></span> <span class="gallina-kwd">in</span> <span class="id">C'</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_false">Zlt_bool_false</a></span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#rndNA_opp">rndNA_opp</a></span>.<br/>
<br/>
<div class="doc">Notations for backward-compatibility with Flocq 1.4. </div>
<span class="vernacular">Notation</span> <span id="rndDN" class="id"><a name="rndDN" class="">rndDN</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<span class="vernacular">Notation</span> <span id="rndUP" class="id"><a name="rndUP" class="">rndUP</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<span class="vernacular">Notation</span> <span id="rndZR" class="id"><a name="rndZR" class="">rndZR</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<span class="vernacular">Notation</span> <span id="rndNA" class="id"><a name="rndNA" class="">rndNA</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#ZnearestA">ZnearestA</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
