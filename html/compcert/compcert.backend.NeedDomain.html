
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module NeedDomain</title>
<meta name="description" content="Documentation of Coq module NeedDomain" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module NeedDomain</h1>
<br/>
<div class="doc">Abstract domain for neededness analysis </div>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.IntvSets.html">IntvSets</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Zbits.html">Zbits</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Events.html">Events</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Lattice.html">Lattice</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.Registers.html">Registers</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.ValueDomain.html">ValueDomain</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.RTL.html">RTL</a></span>.<br/>
<br/>
<h1> Neededness for values </h1>
<br/>
<span class="vernacular">Inductive</span> <span id="nval" class="id"><a name="nval" class="">nval</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="Nothing" class="id"><a name="Nothing" class="">Nothing</a></span>              <span class="docright">(* value is entirely unused  *)</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="I" class="id"><a name="I" class="">I</a></span> (<span id="m:3" class="id"><a name="m:3" class="">m:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>)           <span class="docright">(* only need the bits that are 1 in <span class="bracket"><span class="id">m</span></span>  *)</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="All" class="id"><a name="All" class="">All</a></span>.                 <span class="docright">(* every bit of the value is used  *)</span><br/>
<br/>
<span class="vernacular">Definition</span> <span id="eq_nval" class="id"><a name="eq_nval" class="">eq_nval</a></span> (<span id="x:4" class="id"><a name="x:4" class="">x</a></span> <span id="y:5" class="id"><a name="y:5" class="">y:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{x=y}</a></span> <span class="id">+</span> <span class="id">{x&lt;&gt;y}</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span>.<br/>
Defined.</div>
<br/>
<h2> Agreement between two values relative to a need. </h2>
<br/>
<span class="vernacular">Definition</span> <span id="iagree" class="id"><a name="iagree" class="">iagree</a></span> (<span id="p:6" class="id"><a name="p:6" class="">p</a></span> <span id="q:7" class="id"><a name="q:7" class="">q</a></span> <span id="mask:8" class="id"><a name="mask:8" class="">mask:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i:9" class="id"><a name="i:9" class="">i,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:9">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:8">mask</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:9">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:6">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:9">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q:7">q</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:9">i</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="vagree" class="id"><a name="vagree" class="">vagree</a></span> (<span id="v:10" class="id"><a name="v:10" class="">v</a></span> <span id="w:11" class="id"><a name="w:11" class="">w:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span id="x:12" class="id"><a name="x:12" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:12">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:10">v,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:11">w</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">p,</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">q</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id">p</span> <span class="id">q</span> <span class="id">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">p,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:10">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:11">w</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="vagree_same" class="id"><a name="vagree_same" class="">vagree_same:</a></span> <span class="gallina-kwd">forall</span> <span id="v:16" class="id"><a name="v:16" class="">v</a></span> <span id="x:17" class="id"><a name="x:17" class="">x,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:16">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:16">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:17">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl;</span> <span class="id">auto;</span> <span class="id">destruct</span> <span class="id">v;</span> <span class="id">auto</span>. <span class="id">red;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="vagree_lessdef" class="id"><a name="vagree_lessdef" class="">vagree_lessdef:</a></span> <span class="gallina-kwd">forall</span> <span id="v:18" class="id"><a name="v:18" class="">v</a></span> <span id="w:19" class="id"><a name="w:19" class="">w</a></span> <span id="x:20" class="id"><a name="x:20" class="">x,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:18">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:19">w</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:18">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:19">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:20">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_same">vagree_same</a></span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="lessdef_vagree" class="id"><a name="lessdef_vagree" class="">lessdef_vagree:</a></span> <span class="gallina-kwd">forall</span> <span id="v:21" class="id"><a name="v:21" class="">v</a></span> <span id="w:22" class="id"><a name="w:22" class="">w,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:21">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:22">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:21">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:22">w</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">vagree_same</span> <span class="id">vagree_lessdef</span> <span class="id">lessdef_vagree:</span> <span class="id">na</span>.<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="vagree_list" class="id"><a name="vagree_list" class="">vagree_list:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="vagree_list_nil" class="id"><a name="vagree_list_nil" class="">vagree_list_nil:</a></span> <span class="gallina-kwd">forall</span> <span id="nvl:25" class="id"><a name="nvl:25" class="">nvl,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list:23">vagree_list</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nvl:25">nvl</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="vagree_list_default" class="id"><a name="vagree_list_default" class="">vagree_list_default:</a></span> <span class="gallina-kwd">forall</span> <span id="v1:26" class="id"><a name="v1:26" class="">v1</a></span> <span id="vl1:27" class="id"><a name="vl1:27" class="">vl1</a></span> <span id="v2:28" class="id"><a name="v2:28" class="">v2</a></span> <span id="vl2:29" class="id"><a name="vl2:29" class="">vl2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:26">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:28">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list:23">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1:27">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2:29">vl2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list:23">vagree_list</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#v1:26">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1:27">vl1</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#v2:28">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2:29">vl2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="vagree_list_cons" class="id"><a name="vagree_list_cons" class="">vagree_list_cons:</a></span> <span class="gallina-kwd">forall</span> <span id="v1:30" class="id"><a name="v1:30" class="">v1</a></span> <span id="vl1:31" class="id"><a name="vl1:31" class="">vl1</a></span> <span id="v2:32" class="id"><a name="v2:32" class="">v2</a></span> <span id="vl2:33" class="id"><a name="vl2:33" class="">vl2</a></span> <span id="nv1:34" class="id"><a name="nv1:34" class="">nv1</a></span> <span id="nvl:35" class="id"><a name="nvl:35" class="">nvl,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:30">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:32">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv1:34">nv1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list:23">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1:31">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2:33">vl2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nvl:35">nvl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list:23">vagree_list</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#v1:30">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1:31">vl1</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#v2:32">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2:33">vl2</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#nv1:34">nv1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nvl:35">nvl</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="lessdef_vagree_list" class="id"><a name="lessdef_vagree_list" class="">lessdef_vagree_list:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="vl1:36" class="id"><a name="vl1:36" class="">vl1</a></span> <span id="vl2:37" class="id"><a name="vl2:37" class="">vl2,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1:36">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2:37">vl2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1:36">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2:37">vl2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">vl1;</span> <span class="id">intros;</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">constructor;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="vagree_lessdef_list" class="id"><a name="vagree_lessdef_list" class="">vagree_lessdef_list:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="vl1:38" class="id"><a name="vl1:38" class="">vl1</a></span> <span id="vl2:39" class="id"><a name="vl2:39" class="">vl2,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1:38">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2:39">vl2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">forall</span> <span id="nvl:40" class="id"><a name="nvl:40" class="">nvl,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1:38">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2:39">vl2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nvl:40">nvl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">nvl;</span> <span class="id">constructor;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">lessdef_vagree_list</span> <span class="id">vagree_lessdef_list:</span> <span class="id">na</span>.<br/>
<br/>
<h2> Ordering and least upper bound between value needs </h2>
<br/>
<span class="vernacular">Inductive</span> <span id="nge" class="id"><a name="nge" class="">nge:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="nge_nothing" class="id"><a name="nge_nothing" class="">nge_nothing:</a></span> <span class="gallina-kwd">forall</span> <span id="x:43" class="id"><a name="x:43" class="">x,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge:41">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:43">x</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="nge_all" class="id"><a name="nge_all" class="">nge_all:</a></span> <span class="gallina-kwd">forall</span> <span id="x:44" class="id"><a name="x:44" class="">x,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge:41">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:44">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="nge_int" class="id"><a name="nge_int" class="">nge_int:</a></span> <span class="gallina-kwd">forall</span> <span id="m1:45" class="id"><a name="m1:45" class="">m1</a></span> <span id="m2:46" class="id"><a name="m2:46" class="">m2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:47" class="id"><a name="i:47" class="">i,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:47">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m2:46">m2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:47">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m1:45">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:47">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nge:41">nge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m1:45">m1</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m2:46">m2</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nge_refl" class="id"><a name="nge_refl" class="">nge_refl:</a></span> <span class="gallina-kwd">forall</span> <span id="x:48" class="id"><a name="x:48" class="">x,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:48">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:48">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x;</span> <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge:</a></span> <span class="id">na</span>.<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">nge_refl:</span> <span class="id">na</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nge_trans" class="id"><a name="nge_trans" class="">nge_trans:</a></span> <span class="gallina-kwd">forall</span> <span id="x:49" class="id"><a name="x:49" class="">x</a></span> <span id="y:50" class="id"><a name="y:50" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:49">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:50">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">forall</span> <span id="z:51" class="id"><a name="z:51" class="">z,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:50">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z:51">z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:49">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z:51">z</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span> <span class="id">w</span> <span class="id">VG;</span> <span class="id">inv</span> <span class="id">VG;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="nge_agree" class="id"><a name="nge_agree" class="">nge_agree:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:52" class="id"><a name="v:52" class="">v</a></span> <span id="w:53" class="id"><a name="w:53" class="">w</a></span> <span id="x:54" class="id"><a name="x:54" class="">x</a></span> <span id="y:55" class="id"><a name="y:55" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:54">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:55">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:52">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:53">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:54">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:52">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:53">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:55">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">v;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">v,</span> <span class="id">w;</span> <span class="id">intuition</span>. <span class="id">red;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="nlub" class="id"><a name="nlub" class="">nlub</a></span> (<span id="x:56" class="id"><a name="x:56" class="">x</a></span> <span id="y:57" class="id"><a name="y:57" class="">y:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:56">x,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:57">y</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing,</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:57">y</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:56">x</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m1,</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> <span class="id">m1</span> <span class="id">m2</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nge_lub_l" class="id"><a name="nge_lub_l" class="">nge_lub_l:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:60" class="id"><a name="x:60" class="">x</a></span> <span id="y:61" class="id"><a name="y:61" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nlub">nlub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:60">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:61">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:60">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlub">nlub;</a></span> <span class="id">destruct</span> <span class="id">x,</span> <span class="id">y;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">intros</span>. <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="nge_lub_r" class="id"><a name="nge_lub_r" class="">nge_lub_r:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:62" class="id"><a name="x:62" class="">x</a></span> <span id="y:63" class="id"><a name="y:63" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nlub">nlub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:62">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:63">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#y:63">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlub">nlub;</a></span> <span class="id">destruct</span> <span class="id">x,</span> <span class="id">y;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">intros</span>. <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_r">orb_true_r;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Properties of agreement between integers </h2>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_refl" class="id"><a name="iagree_refl" class="">iagree_refl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:64" class="id"><a name="p:64" class="">p</a></span> <span id="m:65" class="id"><a name="m:65" class="">m,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:64">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:64">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:65">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="eq_same_bits" class="id"><a name="eq_same_bits" class="">eq_same_bits:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i:66" class="id"><a name="i:66" class="">i</a></span> <span id="x:67" class="id"><a name="x:67" class="">x</a></span> <span id="y:68" class="id"><a name="y:68" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:67">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:68">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:67">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:66">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:68">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:66">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_and_eq" class="id"><a name="iagree_and_eq" class="">iagree_and_eq:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:69" class="id"><a name="x:69" class="">x</a></span> <span id="y:70" class="id"><a name="y:70" class="">y</a></span> <span id="mask:71" class="id"><a name="mask:71" class="">mask,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:69">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:70">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:71">mask</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:69">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:71">mask</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:70">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:71">mask</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">split;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">Int.bit_solve</span>. <span class="id">specialize</span> (<span class="id">H</span> <span class="id">i</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id">mask</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_r">andb_true_r;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_r">andb_false_r;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#eq_same_bits">eq_same_bits</a></span> <span class="id">i</span>)<span class="id">;</span> <span class="id">eauto;</span> <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H1</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_r">andb_true_r;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_mone" class="id"><a name="iagree_mone" class="">iagree_mone:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:72" class="id"><a name="p:72" class="">p</a></span> <span id="q:73" class="id"><a name="q:73" class="">q,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:72">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q:73">q</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:72">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q:73">q</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and_eq">iagree_and_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Integers.html#Int.and_mone">Int.and_mone</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_zero" class="id"><a name="iagree_zero" class="">iagree_zero:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:74" class="id"><a name="p:74" class="">p</a></span> <span id="q:75" class="id"><a name="q:75" class="">q,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:74">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q:75">q</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and_eq">iagree_and_eq</a></span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Integers.html#Int.and_zero">Int.and_zero</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_and" class="id"><a name="iagree_and" class="">iagree_and:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:76" class="id"><a name="x:76" class="">x</a></span> <span id="y:77" class="id"><a name="y:77" class="">y</a></span> <span id="n:78" class="id"><a name="n:78" class="">n</a></span> <span id="m:79" class="id"><a name="m:79" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:76">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:77">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:79">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:78">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:76">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:78">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:77">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:78">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:79">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and_eq">iagree_and_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Integers.html#Int.and_assoc">Int.and_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and_commut">Int.and_commut</a></span> <span class="id">n</span>). <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_not" class="id"><a name="iagree_not" class="">iagree_not:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:80" class="id"><a name="x:80" class="">x</a></span> <span id="y:81" class="id"><a name="y:81" class="">y</a></span> <span id="m:82" class="id"><a name="m:82" class="">m,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:80">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:81">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:82">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:80">x</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:81">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:82">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros;</span> <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">auto</span>. <span class="id">f_equal;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_not'" class="id"><a name="iagree_not'" class="">iagree_not':</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:83" class="id"><a name="x:83" class="">x</a></span> <span id="y:84" class="id"><a name="y:84" class="">y</a></span> <span id="m:85" class="id"><a name="m:85" class="">m,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:83">x</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:84">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:85">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:83">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:84">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:85">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not_involutive">Int.not_involutive</a></span> <span class="id">x</span>). <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not_involutive">Int.not_involutive</a></span> <span class="id">y</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_not">iagree_not;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_or" class="id"><a name="iagree_or" class="">iagree_or:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:86" class="id"><a name="x:86" class="">x</a></span> <span id="y:87" class="id"><a name="y:87" class="">y</a></span> <span id="n:88" class="id"><a name="n:88" class="">n</a></span> <span id="m:89" class="id"><a name="m:89" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:86">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:87">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:89">m</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:88">n</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:86">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:88">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:87">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:88">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:89">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_not'">iagree_not'</a></span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Integers.html#Int.not_or_and_not">Int.not_or_and_not</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and">iagree_and</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_not">iagree_not;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_bitwise_binop" class="id"><a name="iagree_bitwise_binop" class="">iagree_bitwise_binop:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="sem:90" class="id"><a name="sem:90" class="">sem</a></span> <span id="f:91" class="id"><a name="f:91" class="">f,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="x:92" class="id"><a name="x:92" class="">x</a></span> <span id="y:93" class="id"><a name="y:93" class="">y</a></span> <span id="i:94" class="id"><a name="i:94" class="">i,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:94">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#f:91">f</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:92">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:93">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#i:94">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sem:90">sem</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:92">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:94">i</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:93">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:94">i</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x1:95" class="id"><a name="x1:95" class="">x1</a></span> <span id="x2:96" class="id"><a name="x2:96" class="">x2</a></span> <span id="y1:97" class="id"><a name="y1:97" class="">y1</a></span> <span id="y2:98" class="id"><a name="y2:98" class="">y2</a></span> <span id="m:99" class="id"><a name="m:99" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x1:95">x1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y1:97">y1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:99">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x2:96">x2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y2:98">y2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:99">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#f:91">f</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x1:95">x1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x2:96">x2</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#f:91">f</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y1:97">y1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y2:98">y2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:99">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id">H</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">f_equal;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_shl" class="id"><a name="iagree_shl" class="">iagree_shl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:100" class="id"><a name="x:100" class="">x</a></span> <span id="y:101" class="id"><a name="y:101" class="">y</a></span> <span id="m:102" class="id"><a name="m:102" class="">m</a></span> <span id="n:103" class="id"><a name="n:103" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:100">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:101">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:102">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:103">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:100">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:103">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:101">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:103">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:102">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>)).<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span> <span class="id">n</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>. <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_shru">Int.bits_shru</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="gallina-kwd">with</span> <span class="id">i</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_shru" class="id"><a name="iagree_shru" class="">iagree_shru:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:104" class="id"><a name="x:104" class="">x</a></span> <span id="y:105" class="id"><a name="y:105" class="">y</a></span> <span id="m:106" class="id"><a name="m:106" class="">m</a></span> <span id="n:107" class="id"><a name="n:107" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:104">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:105">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:106">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:107">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:104">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:107">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:105">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:107">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:106">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
<span class="id">-</span> <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span> <span class="id">n</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>. <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_shl">Int.bits_shl</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="gallina-kwd">with</span> <span class="id">i</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_shr_1" class="id"><a name="iagree_shr_1" class="">iagree_shr_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:108" class="id"><a name="x:108" class="">x</a></span> <span id="y:109" class="id"><a name="y:109" class="">y</a></span> <span id="m:110" class="id"><a name="m:110" class="">m</a></span> <span id="n:111" class="id"><a name="n:111" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:110">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:111">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#n:111">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:110">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:108">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:109">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:110">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:111">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shr">Int.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:108">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:111">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.shr">Int.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:109">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:111">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:110">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">H2</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_shru">Int.bits_shru</a></span> <span class="gallina-kwd">in</span> <span class="id">H2</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_shr">Int.bits_shr</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span> <span class="id">n</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
<span class="id">-</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_shr" class="id"><a name="iagree_shr" class="">iagree_shr:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:112" class="id"><a name="x:112" class="">x</a></span> <span id="y:113" class="id"><a name="y:113" class="">y</a></span> <span id="m:114" class="id"><a name="m:114" class="">m</a></span> <span id="n:115" class="id"><a name="n:115" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:112">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:113">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:114">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:115">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.min_signed">Int.min_signed</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shr">Int.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:112">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:115">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.shr">Int.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:113">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:115">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:114">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_shr">Int.bits_shr</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span> <span class="id">n</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">j</span> <span class="id">:=</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">then</span> <span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">j</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">j;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>)<span class="id">;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H;</span> <span class="id">auto</span>. <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_intro">orb_true_intro</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">j;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
<span class="id">-</span> <span class="id">left</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="gallina-kwd">with</span> <span class="id">i</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">right</span>. <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_rol" class="id"><a name="iagree_rol" class="">iagree_rol:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:116" class="id"><a name="p:116" class="">p</a></span> <span id="q:117" class="id"><a name="q:117" class="">q</a></span> <span id="m:118" class="id"><a name="m:118" class="">m</a></span> <span id="amount:119" class="id"><a name="amount:119" class="">amount,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:116">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q:117">q</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ror">Int.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:118">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:119">amount</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.rol">Int.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:116">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:119">amount</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.rol">Int.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q:117">q</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:119">amount</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:118">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">assert</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">0</span>) <span class="gallina-kwd">by</span> (<span class="id">compute;</span> <span class="id">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_rol">Int.bits_rol</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_mod_lt">Z_mod_lt;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_ror">Int.bits_ror</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (((<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">amount</span>) <span class="id">mod</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">amount</span>)<br/>
&nbsp;&nbsp;&nbsp;<span class="id">mod</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>) <span class="gallina-kwd">with</span> <span class="id">i</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_small_eq">eqmod_small_eq</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_trans">eqmod_trans</a></span> <span class="gallina-kwd">with</span> ((<span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">amount</span>) <span class="id">+</span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">amount</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_refl2">eqmod_refl2;</a></span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_trans">eqmod_trans</a></span>. <span class="id">2:</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_mod">eqmod_mod;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_add">eqmod_add</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_mod">eqmod_mod;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_refl">eqmod_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_mod_lt">Z_mod_lt;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_mod_lt">Z_mod_lt;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_ror" class="id"><a name="iagree_ror" class="">iagree_ror:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:120" class="id"><a name="p:120" class="">p</a></span> <span id="q:121" class="id"><a name="q:121" class="">q</a></span> <span id="m:122" class="id"><a name="m:122" class="">m</a></span> <span id="amount:123" class="id"><a name="amount:123" class="">amount,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:120">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q:121">q</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.rol">Int.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:122">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:123">amount</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ror">Int.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:120">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:123">amount</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.ror">Int.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q:121">q</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:123">amount</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:122">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Integers.html#Int.ror_rol_neg">Int.ror_rol_neg</a></span> <span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#int_wordsize_divides_modulus">int_wordsize_divides_modulus</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_rol">iagree_rol</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.ror_rol_neg">Int.ror_rol_neg</a></span> <span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#int_wordsize_divides_modulus">int_wordsize_divides_modulus</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.neg_involutive">Int.neg_involutive</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="eqmod_iagree" class="id"><a name="eqmod_iagree" class="">eqmod_iagree:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:124" class="id"><a name="m:124" class="">m</a></span> <span id="x:125" class="id"><a name="x:125" class="">x</a></span> <span id="y:126" class="id"><a name="y:126" class="">y,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Zbits.html#eqmod">eqmod</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:124">m</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x:125">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:126">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:125">x</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:126">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:124">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">set</span> (<span class="id">p</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size_range">Int.size_range</a></span> <span class="id">m</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">RANGE</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EQ:</span> <span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">p</span>). <span class="id">{</span> <span class="id">symmetry;</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span>. <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ</span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.lib.Coqlib.html#two_power_nat_two_p">two_power_nat_two_p</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Integers.html#Int.testbit_repr">Int.testbit_repr</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.lib.Zbits.html#same_bits_eqmod">same_bits_eqmod;</a></span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id">m</span> <span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_size_2">Int.bits_size_2</a></span><span class="id">;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="complete_mask" class="id"><a name="complete_mask" class="">complete_mask</a></span> (<span id="m:127" class="id"><a name="m:127" class="">m:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:127">m</a></span>) <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="iagree_eqmod" class="id"><a name="iagree_eqmod" class="">iagree_eqmod:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:128" class="id"><a name="x:128" class="">x</a></span> <span id="y:129" class="id"><a name="y:129" class="">y</a></span> <span id="m:130" class="id"><a name="m:130" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:128">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:129">y</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:130">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Zbits.html#eqmod">eqmod</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:130">m</a></span>)) (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:128">x</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:129">y</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">set</span> (<span class="id">p</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size_range">Int.size_range</a></span> <span class="id">m</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">RANGE</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EQ:</span> <span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">p</span>). <span class="id">{</span> <span class="id">symmetry;</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span>. <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.lib.Coqlib.html#two_power_nat_two_p">two_power_nat_two_p</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_same_bits">eqmod_same_bits</a></span>. <span class="id">intros</span>. <span class="id">apply</span> <span class="id">H</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_mone">Int.bits_mone</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="complete_mask_idem" class="id"><a name="complete_mask_idem" class="">complete_mask_idem:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:131" class="id"><a name="m:131" class="">m,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:131">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:131">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id">m</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>).<br/>
<span class="id">+</span> <span class="id">subst</span> <span class="id">m;</span> <span class="id">reflexivity</span>.<br/>
<span class="id">+</span> <span class="id">assert</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">n</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr_unsigned">Int.repr_unsigned</a></span> <span class="id">m</span>). <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#Zsize_pos'">Zsize_pos'</a></span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span> <span class="id">m</span>)<span class="id">;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size_range">Int.size_range</a></span> <span class="id">m</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_size_4">Int.bits_size_4</a></span>. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_mone">Int.bits_mone</a></span><span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false;</a></span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<h2> Abstract operations over value needs. </h2>
<br/>
<span class="vernacular">Ltac</span> <span class="id">InvAgree</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">vagree</span> <span class="gallina-kwd">in</span> <span class="id">*;</span><br/>
&nbsp;&nbsp;<span class="id">repeat</span> (<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="id">||</span> <span class="id">exact</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#I">Logic.I</a></span> <span class="id">||</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">goal</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">H:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> <span class="id">|-</span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">contradiction</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">H:</span> <span class="gallina-kwd">match</span> <span class="id">?v</span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id">=&gt;</span> <span class="id">_</span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">_</span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">_</span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">_</span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">_</span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">_</span> <span class="gallina-kwd">end</span> <span class="id">|-</span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">destruct</span> <span class="id">v</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">|-</span> <span class="id">context</span> <span class="id">[if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id">_</span> <span class="gallina-kwd">else</span> <span class="id">_]</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id">eqn:?</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>).<br/>
<br/>
<div class="doc">And immediate, or immediate </div>
<br/>
<span class="vernacular">Definition</span> <span id="andimm" class="id"><a name="andimm" class="">andimm</a></span> (<span id="x:132" class="id"><a name="x:132" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span id="n:133" class="id"><a name="n:133" class="">n:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:132">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:133">n</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:133">n</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="andimm_sound" class="id"><a name="andimm_sound" class="">andimm_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:135" class="id"><a name="v:135" class="">v</a></span> <span id="w:136" class="id"><a name="w:136" class="">w</a></span> <span id="x:137" class="id"><a name="x:137" class="">x</a></span> <span id="n:138" class="id"><a name="n:138" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:135">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:136">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#andimm">andimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:137">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:138">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:135">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:138">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:136">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:138">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x:137">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#andimm">andimm;</a></span> <span class="id">intros;</span> <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and">iagree_and;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and_eq">iagree_and_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="orimm" class="id"><a name="orimm" class="">orimm</a></span> (<span id="x:139" class="id"><a name="x:139" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span id="n:140" class="id"><a name="n:140" class="">n:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:139">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id">m</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:140">n</a></span>))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:140">n</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="orimm_sound" class="id"><a name="orimm_sound" class="">orimm_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:142" class="id"><a name="v:142" class="">v</a></span> <span id="w:143" class="id"><a name="w:143" class="">w</a></span> <span id="x:144" class="id"><a name="x:144" class="">x</a></span> <span id="n:145" class="id"><a name="n:145" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:142">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:143">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#orimm">orimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:144">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:145">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:142">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:145">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:143">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:145">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x:144">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#orimm">orimm;</a></span> <span class="id">intros;</span> <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span><span class="id">;</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_or">iagree_or;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_mone">iagree_mone</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_or">iagree_or</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.and_commut">Int.and_commut</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.and_mone">Int.and_mone</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Bitwise operations: and, or, xor, not </div>
<br/>
<span class="vernacular">Definition</span> <span id="bitwise" class="id"><a name="bitwise" class="">bitwise</a></span> (<span id="x:146" class="id"><a name="x:146" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:146">x</a></span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="bitwise_idem" class="id"><a name="bitwise_idem" class="">bitwise_idem:</a></span> <span class="gallina-kwd">forall</span> <span id="nv:147" class="id"><a name="nv:147" class="">nv,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:147">nv</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:147">nv</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
 <span class="id">auto</span>. Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="vagree_bitwise_binop" class="id"><a name="vagree_bitwise_binop" class="">vagree_bitwise_binop:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:148" class="id"><a name="f:148" class="">f,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="p1:149" class="id"><a name="p1:149" class="">p1</a></span> <span id="p2:150" class="id"><a name="p2:150" class="">p2</a></span> <span id="q1:151" class="id"><a name="q1:151" class="">q1</a></span> <span id="q2:152" class="id"><a name="q2:152" class="">q2</a></span> <span id="m:153" class="id"><a name="m:153" class="">m,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p1:149">p1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q1:151">q1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:153">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p2:150">p2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q2:152">q2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m:153">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#f:148">f</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p1:149">p1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p2:150">p2</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#f:148">f</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q1:151">q1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q2:152">q2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m:153">m</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v1:154" class="id"><a name="v1:154" class="">v1</a></span> <span id="w1:155" class="id"><a name="w1:155" class="">w1</a></span> <span id="v2:156" class="id"><a name="v2:156" class="">v2</a></span> <span id="w2:157" class="id"><a name="w2:157" class="">w2</a></span> <span id="x:158" class="id"><a name="x:158" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:154">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:155">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:158">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:156">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:157">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:158">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:154">v1,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:156">v2</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i1,</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#f:148">f</a></span> <span class="id">i1</span> <span class="id">i2</span>) <span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="gallina-kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:155">w1,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:157">w2</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i1,</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#f:148">f</a></span> <span class="id">i1</span> <span class="id">i2</span>) <span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="gallina-kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#x:158">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H1;</span> <span class="id">auto</span>. <span class="id">destruct</span> <span class="id">w1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="and_sound" class="id"><a name="and_sound" class="">and_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v1:163" class="id"><a name="v1:163" class="">v1</a></span> <span id="w1:164" class="id"><a name="w1:164" class="">w1</a></span> <span id="v2:165" class="id"><a name="v2:165" class="">v2</a></span> <span id="w2:166" class="id"><a name="w2:166" class="">w2</a></span> <span id="x:167" class="id"><a name="x:167" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:163">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:164">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:167">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:165">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:166">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:167">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:163">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:165">v2</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:164">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:166">w2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:167">x</a></span>.<br/>
<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_bitwise_binop">vagree_bitwise_binop</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#iagree_bitwise_binop">iagree_bitwise_binop</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#andb">andb</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_and">Int.bits_and</a></span>)).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="or_sound" class="id"><a name="or_sound" class="">or_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v1:168" class="id"><a name="v1:168" class="">v1</a></span> <span id="w1:169" class="id"><a name="w1:169" class="">w1</a></span> <span id="v2:170" class="id"><a name="v2:170" class="">v2</a></span> <span id="w2:171" class="id"><a name="w2:171" class="">w2</a></span> <span id="x:172" class="id"><a name="x:172" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:168">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:169">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:172">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:170">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:171">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:172">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:168">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:170">v2</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:169">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:171">w2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:172">x</a></span>.<br/>
<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_bitwise_binop">vagree_bitwise_binop</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#iagree_bitwise_binop">iagree_bitwise_binop</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#orb">orb</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_or">Int.bits_or</a></span>)).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="xor_sound" class="id"><a name="xor_sound" class="">xor_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v1:173" class="id"><a name="v1:173" class="">v1</a></span> <span id="w1:174" class="id"><a name="w1:174" class="">w1</a></span> <span id="v2:175" class="id"><a name="v2:175" class="">v2</a></span> <span id="w2:176" class="id"><a name="w2:176" class="">w2</a></span> <span id="x:177" class="id"><a name="x:177" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:173">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:174">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:177">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:175">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:176">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:177">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.xor">Val.xor</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:173">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:175">v2</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.xor">Val.xor</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:174">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:176">w2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:177">x</a></span>.<br/>
<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_bitwise_binop">vagree_bitwise_binop</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.xor">Int.xor</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#iagree_bitwise_binop">iagree_bitwise_binop</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#xorb">xorb</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.xor">Int.xor</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_xor">Int.bits_xor</a></span>)).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="notint_sound" class="id"><a name="notint_sound" class="">notint_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:178" class="id"><a name="v:178" class="">v</a></span> <span id="w:179" class="id"><a name="w:179" class="">w</a></span> <span id="x:180" class="id"><a name="x:180" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:178">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:179">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:180">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.notint">Val.notint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:178">v</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.notint">Val.notint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:179">w</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:180">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.common.Values.html#Val.not_xor">Val.not_xor</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#xor_sound">xor_sound;</a></span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Shifts and rotates </div>
<br/>
<span class="vernacular">Definition</span> <span id="shlimm" class="id"><a name="shlimm" class="">shlimm</a></span> (<span id="x:181" class="id"><a name="x:181" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span id="n:182" class="id"><a name="n:182" class="">n:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:181">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:182">n</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:182">n</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="shlimm_sound" class="id"><a name="shlimm_sound" class="">shlimm_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:184" class="id"><a name="v:184" class="">v</a></span> <span id="w:185" class="id"><a name="w:185" class="">w</a></span> <span id="x:186" class="id"><a name="x:186" class="">x</a></span> <span id="n:187" class="id"><a name="n:187" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:184">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:185">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#shlimm">shlimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:186">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:187">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shl">Val.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:184">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:187">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.shl">Val.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:185">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:187">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x:186">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#shlimm">shlimm;</a></span> <span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.shl">Val.shl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shl">iagree_shl;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_mone">iagree_mone</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shl">iagree_shl;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">v;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="shruimm" class="id"><a name="shruimm" class="">shruimm</a></span> (<span id="x:188" class="id"><a name="x:188" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span id="n:189" class="id"><a name="n:189" class="">n:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:188">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:189">n</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:189">n</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="shruimm_sound" class="id"><a name="shruimm_sound" class="">shruimm_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:191" class="id"><a name="v:191" class="">v</a></span> <span id="w:192" class="id"><a name="w:192" class="">w</a></span> <span id="x:193" class="id"><a name="x:193" class="">x</a></span> <span id="n:194" class="id"><a name="n:194" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:191">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:192">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#shruimm">shruimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:193">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:194">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shru">Val.shru</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:191">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:194">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.shru">Val.shru</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:192">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:194">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x:193">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#shruimm">shruimm;</a></span> <span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.shru">Val.shru</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shru">iagree_shru;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_mone">iagree_mone</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shru">iagree_shru;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">v;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="shrimm" class="id"><a name="shrimm" class="">shrimm</a></span> (<span id="x:195" class="id"><a name="x:195" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span id="n:196" class="id"><a name="n:196" class="">n:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:195">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="gallina-kwd">let</span> <span id="m':198" class="id"><a name="m':198" class="">m'</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:196">n</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m':198">m'</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:196">n</a></span>) <span class="id">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">then</span> <span class="id"><a href="compcert.backend.NeedDomain.html#m':198">m'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m':198">m'</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.min_signed">Int.min_signed</a></span>))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:196">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.min_signed">Int.min_signed</a></span>))<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="shrimm_sound" class="id"><a name="shrimm_sound" class="">shrimm_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:199" class="id"><a name="v:199" class="">v</a></span> <span id="w:200" class="id"><a name="w:200" class="">w</a></span> <span id="x:201" class="id"><a name="x:201" class="">x</a></span> <span id="n:202" class="id"><a name="n:202" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:199">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:200">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#shrimm">shrimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:201">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:202">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shr">Val.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:199">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:202">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.shr">Val.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:200">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:202">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x:201">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#shrimm">shrimm;</a></span> <span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.shr">Val.shr</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id">m</span> <span class="id">n</span>) <span class="id">n</span>) <span class="id">m</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shr_1">iagree_shr_1;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shr">iagree_shr;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_mone">iagree_mone</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shr">iagree_shr</a></span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">v;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="rol" class="id"><a name="rol" class="">rol</a></span> (<span id="x:203" class="id"><a name="x:203" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span id="amount:204" class="id"><a name="amount:204" class="">amount:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:203">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ror">Int.ror</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:204">amount</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="rol_sound" class="id"><a name="rol_sound" class="">rol_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:206" class="id"><a name="v:206" class="">v</a></span> <span id="w:207" class="id"><a name="w:207" class="">w</a></span> <span id="x:208" class="id"><a name="x:208" class="">x</a></span> <span id="n:209" class="id"><a name="n:209" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:206">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:207">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#rol">rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:208">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:209">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.rol">Val.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:206">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:209">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.rol">Val.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:207">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:209">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x:208">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#rol">rol,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.rol">Val.rol</a></span><span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_rol">iagree_rol;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="ror" class="id"><a name="ror" class="">ror</a></span> (<span id="x:210" class="id"><a name="x:210" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span id="amount:211" class="id"><a name="amount:211" class="">amount:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:210">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.rol">Int.rol</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:211">amount</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="ror_sound" class="id"><a name="ror_sound" class="">ror_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:213" class="id"><a name="v:213" class="">v</a></span> <span id="w:214" class="id"><a name="w:214" class="">w</a></span> <span id="x:215" class="id"><a name="x:215" class="">x</a></span> <span id="n:216" class="id"><a name="n:216" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:213">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:214">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#ror">ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:215">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:216">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.ror">Val.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:213">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:216">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.ror">Val.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:214">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:216">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x:215">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#ror">ror,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.ror">Val.ror</a></span><span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_ror">iagree_ror;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="rolm" class="id"><a name="rolm" class="">rolm</a></span> (<span id="x:217" class="id"><a name="x:217" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span id="amount:218" class="id"><a name="amount:218" class="">amount</a></span> <span id="mask:219" class="id"><a name="mask:219" class="">mask:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#rol">rol</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#andimm">andimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:217">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:219">mask</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#amount:218">amount</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="rolm_sound" class="id"><a name="rolm_sound" class="">rolm_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:220" class="id"><a name="v:220" class="">v</a></span> <span id="w:221" class="id"><a name="w:221" class="">w</a></span> <span id="x:222" class="id"><a name="x:222" class="">x</a></span> <span id="amount:223" class="id"><a name="amount:223" class="">amount</a></span> <span id="mask:224" class="id"><a name="mask:224" class="">mask,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:220">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:221">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#rolm">rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:222">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:223">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:224">mask</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.rolm">Val.rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:220">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:223">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:224">mask</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.rolm">Val.rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:221">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:223">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:224">mask</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:222">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#rolm">rolm;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">X:</span> <span class="gallina-kwd">forall</span> <span id="u:226" class="id"><span id="u:225" class="id"><a name="u:226" class="">u,</a></span></span> <span class="id"><a href="compcert.common.Values.html#Val.rolm">Val.rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#u:225">u</a></span> <span class="id">amount</span> <span class="id">mask</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.rol">Val.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#u:225">u</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">amount</span>)) (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">mask</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">destruct</span> <span class="id">u;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#andimm_sound">andimm_sound</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#rol_sound">rol_sound</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Modular arithmetic operations: add, mul, opposite.
    Also subtraction, but only on 64-bit targets, otherwise
    the pointer - pointer case does not fit. </div>
<br/>
<span class="vernacular">Definition</span> <span id="modarith" class="id"><a name="modarith" class="">modarith</a></span> (<span id="x:227" class="id"><a name="x:227" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:227">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="add_sound" class="id"><a name="add_sound" class="">add_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v1:229" class="id"><a name="v1:229" class="">v1</a></span> <span id="w1:230" class="id"><a name="w1:230" class="">w1</a></span> <span id="v2:231" class="id"><a name="v2:231" class="">v2</a></span> <span id="w2:232" class="id"><a name="w2:232" class="">w2</a></span> <span id="x:233" class="id"><a name="x:233" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:229">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:230">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:233">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:231">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:232">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:233">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:229">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:231">v2</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:230">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:232">w2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:233">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span><span class="id">;</span> <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#eqmod_iagree">eqmod_iagree</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_add">eqmod_add;</a></span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">destruct</span> <span class="id">w1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="sub_sound" class="id"><a name="sub_sound" class="">sub_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v1:234" class="id"><a name="v1:234" class="">v1</a></span> <span id="w1:235" class="id"><a name="w1:235" class="">w1</a></span> <span id="v2:236" class="id"><a name="v2:236" class="">v2</a></span> <span id="w2:237" class="id"><a name="w2:237" class="">w2</a></span> <span id="x:238" class="id"><a name="x:238" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:234">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:235">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:238">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:236">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:237">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:238">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.sub">Val.sub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:234">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:236">v2</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.sub">Val.sub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:235">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:237">w2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:238">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.sub">Val.sub</a></span><span class="id">;</span> <span class="id">rewrite</span> <span class="id">H1;</span> <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#eqmod_iagree">eqmod_iagree</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_sub">eqmod_sub;</a></span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">destruct</span> <span class="id">w1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="modarith_idem" class="id"><a name="modarith_idem" class="">modarith_idem:</a></span> <span class="gallina-kwd">forall</span> <span id="nv:239" class="id"><a name="nv:239" class="">nv,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:239">nv</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:239">nv</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">nv;</span> <span class="id">simpl;</span> <span class="id">auto</span>. <span class="id">f_equal;</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask_idem">complete_mask_idem</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="mul_sound" class="id"><a name="mul_sound" class="">mul_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v1:240" class="id"><a name="v1:240" class="">v1</a></span> <span id="w1:241" class="id"><a name="w1:241" class="">w1</a></span> <span id="v2:242" class="id"><a name="v2:242" class="">v2</a></span> <span id="w2:243" class="id"><a name="w2:243" class="">w2</a></span> <span id="x:244" class="id"><a name="x:244" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:240">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:241">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:244">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:242">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:243">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:244">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.mul">Val.mul</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:240">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:242">v2</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.mul">Val.mul</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:241">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:243">w2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:244">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mul">mul,</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#add">add;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.mul">Val.mul</a></span><span class="id">;</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#eqmod_iagree">eqmod_iagree</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_mult">eqmod_mult;</a></span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">destruct</span> <span class="id">w1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="neg_sound" class="id"><a name="neg_sound" class="">neg_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:245" class="id"><a name="v:245" class="">v</a></span> <span id="w:246" class="id"><a name="w:246" class="">w</a></span> <span id="x:247" class="id"><a name="x:247" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:245">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:246">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:247">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.neg">Val.neg</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:245">v</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.neg">Val.neg</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:246">w</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:247">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.neg">Val.neg</a></span><span class="id">;</span> <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#eqmod_iagree">eqmod_iagree</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_neg">eqmod_neg</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Conversions: zero extension, sign extension, single-of-float </div>
<br/>
<span class="vernacular">Definition</span> <span id="zero_ext" class="id"><a name="zero_ext" class="">zero_ext</a></span> (<span id="n:248" class="id"><a name="n:248" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="x:249" class="id"><a name="x:249" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:249">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:248">n</a></span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:248">n</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="zero_ext_sound" class="id"><a name="zero_ext_sound" class="">zero_ext_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:251" class="id"><a name="v:251" class="">v</a></span> <span id="w:252" class="id"><a name="w:252" class="">w</a></span> <span id="x:253" class="id"><a name="x:253" class="">x</a></span> <span id="n:254" class="id"><a name="n:254" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:251">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:252">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext">zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:254">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:253">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:254">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:254">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:251">v</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:254">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:252">w</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:253">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext">zero_ext;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span><span class="id">;</span> <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">try</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span><span class="id">;</span> <span class="id">InvAgree;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">Int.bit_solve</span><span class="id">;</span> <span class="id">try</span> <span class="id">lia</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">try</span> <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="sign_ext" class="id"><a name="sign_ext" class="">sign_ext</a></span> (<span id="n:255" class="id"><a name="n:255" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="x:256" class="id"><a name="x:256" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:256">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:255">n</a></span> <span class="id">m</span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#n:255">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>))))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:255">n</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="sign_ext_sound" class="id"><a name="sign_ext_sound" class="">sign_ext_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:258" class="id"><a name="v:258" class="">v</a></span> <span id="w:259" class="id"><a name="w:259" class="">w</a></span> <span id="x:260" class="id"><a name="x:260" class="">x</a></span> <span id="n:261" class="id"><a name="n:261" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:258">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:259">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext">sign_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:261">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:260">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:261">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:261">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:258">v</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:261">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:259">w</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:260">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext">sign_ext;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span><span class="id">;</span> <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">j</span> <span class="id">:=</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span> <span class="gallina-kwd">then</span> <span class="id">i1</span> <span class="gallina-kwd">else</span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">j</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">j;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>)<span class="id">;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">try</span> <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_intro">orb_true_intro</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">j;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_repr">Int.unsigned_repr</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> (<span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>)) <span class="gallina-kwd">with</span> <span class="id">0</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id"><a href="compcert.lib.Integers.html#Int.wordsize_max_unsigned">Int.wordsize_max_unsigned</a></span><span class="id">;</span> <span class="id">lia</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span><span class="id">;</span> <span class="id">InvAgree;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">Int.bit_solve</span><span class="id">;</span> <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">j</span> <span class="id">:=</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span> <span class="gallina-kwd">then</span> <span class="id">i1</span> <span class="gallina-kwd">else</span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">j</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">j;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>)<span class="id">;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span><span class="id">;</span> <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_mone">Int.bits_mone</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">j</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The needs of a memory store concerning the value being stored. </div>
<br/>
<span class="vernacular">Definition</span> <span id="store_argument" class="id"><a name="store_argument" class="">store_argument</a></span> (<span id="chunk:262" class="id"><a name="chunk:262" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk:262">chunk</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">255</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">65535</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="store_argument_sound" class="id"><a name="store_argument_sound" class="">store_argument_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:264" class="id"><a name="chunk:264" class="">chunk</a></span> <span id="v:265" class="id"><a name="v:265" class="">v</a></span> <span id="w:266" class="id"><a name="w:266" class="">w,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:265">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:266">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#store_argument">store_argument</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk:264">chunk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef">memval_lessdef</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk:264">chunk</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:265">v</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk:264">chunk</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:266">w</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">UNDEF:</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef">memval_lessdef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#repeat">List.repeat</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id">chunk</span> <span class="id">w</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="id">chunk</span> <span class="id">w</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#repeat_Undef_inject_any">repeat_Undef_inject_any</a></span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SAME:</span> <span class="gallina-kwd">forall</span> <span id="vl1:269" class="id"><span id="vl1:267" class="id"><a name="vl1:269" class="">vl1</a></span></span> <span id="vl2:270" class="id"><span id="vl2:268" class="id"><a name="vl2:270" class="">vl2,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vl1:267">vl1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2:268">vl2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef">memval_lessdef</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1:267">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2:268">vl2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">subst</span> <span class="id">vl2</span>. <span class="id">revert</span> <span class="id">vl1</span>. <span class="id">induction</span> <span class="id">vl1;</span> <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef_refl">memval_lessdef_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#store_argument">store_argument</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">destruct</span> <span class="id">chunk</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id">SAME</span>. <span class="id">simpl;</span> <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_8_mod">encode_int_8_mod</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id">8</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">255</span>)). <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id">SAME</span>. <span class="id">simpl;</span> <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_8_mod">encode_int_8_mod</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id">8</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">255</span>)). <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id">SAME</span>. <span class="id">simpl;</span> <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_16_mod">encode_int_16_mod</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id">16</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">65535</span>)). <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvAgree</span>. <span class="id">apply</span> <span class="id">SAME</span>. <span class="id">simpl;</span> <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_16_mod">encode_int_16_mod</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id">16</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">65535</span>)). <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="store_argument_load_result" class="id"><a name="store_argument_load_result" class="">store_argument_load_result:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:271" class="id"><a name="chunk:271" class="">chunk</a></span> <span id="v:272" class="id"><a name="v:272" class="">v</a></span> <span id="w:273" class="id"><a name="w:273" class="">w,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:272">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:273">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#store_argument">store_argument</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk:271">chunk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk:271">chunk</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:272">v</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk:271">chunk</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:273">w</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#store_argument">store_argument;</a></span> <span class="id">intros;</span> <span class="id">destruct</span> <span class="id">chunk;</span><br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result_lessdef">Val.load_result_lessdef</a></span><span class="id">;</span> <span class="id">InvAgree;</span> <span class="id">simpl</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext_sound">sign_ext_sound</a></span> <span class="gallina-kwd">with</span> (<span class="id">v</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>) (<span class="id">w</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i0</span>) (<span class="id">x</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span>) (<span class="id">n</span> <span class="id">:=</span> <span class="id">8</span>).<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">compute;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext_sound">zero_ext_sound</a></span> <span class="gallina-kwd">with</span> (<span class="id">v</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>) (<span class="id">w</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i0</span>) (<span class="id">x</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span>) (<span class="id">n</span> <span class="id">:=</span> <span class="id">8</span>).<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">lia</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext_sound">sign_ext_sound</a></span> <span class="gallina-kwd">with</span> (<span class="id">v</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>) (<span class="id">w</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i0</span>) (<span class="id">x</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span>) (<span class="id">n</span> <span class="id">:=</span> <span class="id">16</span>).<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">compute;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext_sound">zero_ext_sound</a></span> <span class="gallina-kwd">with</span> (<span class="id">v</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>) (<span class="id">w</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i0</span>) (<span class="id">x</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span>) (<span class="id">n</span> <span class="id">:=</span> <span class="id">16</span>).<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The needs of a comparison </div>
<br/>
<span class="vernacular">Definition</span> <span id="maskzero" class="id"><a name="maskzero" class="">maskzero</a></span> (<span id="n:274" class="id"><a name="n:274" class="">n:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:274">n</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="maskzero_sound" class="id"><a name="maskzero_sound" class="">maskzero_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:275" class="id"><a name="v:275" class="">v</a></span> <span id="w:276" class="id"><a name="w:276" class="">w</a></span> <span id="n:277" class="id"><a name="n:277" class="">n</a></span> <span id="b:278" class="id"><a name="b:278" class="">b,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:275">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:276">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#maskzero">maskzero</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:277">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.maskzero_bool">Val.maskzero_bool</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:275">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:277">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:278">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.maskzero_bool">Val.maskzero_bool</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:276">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:277">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:278">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#maskzero">maskzero;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.maskzero_bool">Val.maskzero_bool</a></span><span class="id">;</span> <span class="id">InvAgree;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and_eq">iagree_and_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The needs of a select </div>
<br/>
<span class="vernacular">Lemma</span> <span id="normalize_sound" class="id"><a name="normalize_sound" class="">normalize_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:279" class="id"><a name="v:279" class="">v</a></span> <span id="w:280" class="id"><a name="w:280" class="">w</a></span> <span id="x:281" class="id"><a name="x:281" class="">x</a></span> <span id="ty:282" class="id"><a name="ty:282" class="">ty,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:279">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:280">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:281">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.normalize">Val.normalize</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:279">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ty:282">ty</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.normalize">Val.normalize</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:280">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ty:282">ty</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:281">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.normalize">Val.normalize</a></span>. <span class="id">destruct</span> <span class="id">v</span>. <br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">w;</span> <span class="id">try</span> <span class="id">contradiction</span>. <span class="id">destruct</span> <span class="id">ty;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ty;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ty;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ty;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ty;</span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.normalize_lessdef">Val.normalize_lessdef</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="select_sound" class="id"><a name="select_sound" class="">select_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ob:283" class="id"><a name="ob:283" class="">ob</a></span> <span id="v1:284" class="id"><a name="v1:284" class="">v1</a></span> <span id="v2:285" class="id"><a name="v2:285" class="">v2</a></span> <span id="w1:286" class="id"><a name="w1:286" class="">w1</a></span> <span id="w2:287" class="id"><a name="w2:287" class="">w2</a></span> <span id="ty:288" class="id"><a name="ty:288" class="">ty</a></span> <span id="x:289" class="id"><a name="x:289" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:284">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:286">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:289">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:285">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:287">w2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:289">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.select">Val.select</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ob:283">ob</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:284">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:285">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ty:288">ty</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.select">Val.select</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ob:283">ob</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1:286">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2:287">w2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ty:288">ty</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:289">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.select">Val.select</a></span><span class="id">;</span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">ob</span> <span class="gallina-kwd">as</span> <span class="id">[b|];</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#normalize_sound">normalize_sound</a></span>. <span class="id">destruct</span> <span class="id">b;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The default abstraction: if the result is unused, the arguments are
  unused; otherwise, the arguments are needed in full. </div>
<br/>
<span class="vernacular">Definition</span> <span id="default" class="id"><a name="default" class="">default</a></span> (<span id="x:290" class="id"><a name="x:290" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:290">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="DEFAULT" class="id"><a name="DEFAULT" class="">DEFAULT</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="DEFAULT.ge" class="id"><a name="DEFAULT.ge" class="">ge:</a></span> <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="DEFAULT.sp" class="id"><a name="DEFAULT.sp" class="">sp:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="vernacular">Variables</span> <span id="DEFAULT.m1" class="id"><a name="DEFAULT.m1" class="">m1</a></span> <span id="DEFAULT.m2" class="id"><a name="DEFAULT.m2" class="">m2:</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="DEFAULT.PERM" class="id"><a name="DEFAULT.PERM" class="">PERM:</a></span> <span class="gallina-kwd">forall</span> <span id="b:296" class="id"><a name="b:296" class="">b</a></span> <span id="ofs:297" class="id"><a name="ofs:297" class="">ofs</a></span> <span id="k:298" class="id"><a name="k:298" class="">k</a></span> <span id="p:299" class="id"><a name="p:299" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:296">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:297">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#k:298">k</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:299">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m2">m2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:296">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:297">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#k:298">k</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:299">p</a></span>.<br/>
<br/>
<span class="vernacular">Let</span> <span id="DEFAULT.valid_pointer_inj" class="id"><a name="DEFAULT.valid_pointer_inj" class="">valid_pointer_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b1:301" class="id"><a name="b1:301" class="">b1</a></span> <span id="ofs:302" class="id"><a name="ofs:302" class="">ofs</a></span> <span id="b2:303" class="id"><a name="b2:303" class="">b2</a></span> <span id="delta:304" class="id"><a name="delta:304" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1:301">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#b2:303">b2,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta:304">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1:301">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:302">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m2">m2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b2:303">b2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:302">ofs</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta:304">delta</a></span>))) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Let</span> <span id="DEFAULT.weak_valid_pointer_inj" class="id"><a name="DEFAULT.weak_valid_pointer_inj" class="">weak_valid_pointer_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b1:305" class="id"><a name="b1:305" class="">b1</a></span> <span id="ofs:306" class="id"><a name="ofs:306" class="">ofs</a></span> <span id="b2:307" class="id"><a name="b2:307" class="">b2</a></span> <span id="delta:308" class="id"><a name="delta:308" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1:305">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#b2:307">b2,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta:308">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1:305">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:306">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m2">m2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b2:307">b2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:306">ofs</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta:308">delta</a></span>))) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_spec">Mem.weak_valid_pointer_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0;</span> <span class="id">[left|right];</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Let</span> <span id="DEFAULT.weak_valid_pointer_no_overflow" class="id"><a name="DEFAULT.weak_valid_pointer_no_overflow" class="">weak_valid_pointer_no_overflow:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b1:309" class="id"><a name="b1:309" class="">b1</a></span> <span id="ofs:310" class="id"><a name="ofs:310" class="">ofs</a></span> <span id="b2:311" class="id"><a name="b2:311" class="">b2</a></span> <span id="delta:312" class="id"><a name="delta:312" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1:309">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#b2:311">b2,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta:312">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1:309">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:310">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:310">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta:312">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Let</span> <span id="DEFAULT.valid_different_pointers_inj" class="id"><a name="DEFAULT.valid_different_pointers_inj" class="">valid_different_pointers_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b1:313" class="id"><a name="b1:313" class="">b1</a></span> <span id="ofs1:314" class="id"><a name="ofs1:314" class="">ofs1</a></span> <span id="b2:315" class="id"><a name="b2:315" class="">b2</a></span> <span id="ofs2:316" class="id"><a name="ofs2:316" class="">ofs2</a></span> <span id="b1':317" class="id"><a name="b1':317" class="">b1'</a></span> <span id="delta1:318" class="id"><a name="delta1:318" class="">delta1</a></span> <span id="b2':319" class="id"><a name="b2':319" class="">b2'</a></span> <span id="delta2:320" class="id"><a name="delta2:320" class="">delta2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#b1:313">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b2:315">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1:313">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs1:314">ofs1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b2:315">b2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs2:316">ofs2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1:313">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#b1':317">b1',</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta1:318">delta1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b2:315">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#b2':319">b2',</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta2:320">delta2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#b1':317">b1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b2':319">b2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs1:314">ofs1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta1:318">delta1</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs2:316">ofs2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta2:320">delta2</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">intros</span>. <span class="id">left;</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="default_needs_of_condition_sound" class="id"><a name="default_needs_of_condition_sound" class="">default_needs_of_condition_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cond:321" class="id"><a name="cond:321" class="">cond</a></span> <span id="args1:322" class="id"><a name="args1:322" class="">args1</a></span> <span id="b:323" class="id"><a name="b:323" class="">b</a></span> <span id="args2:324" class="id"><a name="args2:324" class="">args2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#cond:321">cond</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1:322">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:323">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1:322">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2:324">args2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#cond:321">cond</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2:324">args2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m2">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:323">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_condition_inj">eval_condition_inj</a></span> <span class="gallina-kwd">with</span> (<span class="id">f</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>) (<span class="id">m1</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span>) (<span class="id">vl1</span> <span class="id">:=</span> <span class="id">args1</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_list_lessdef">val_inject_list_lessdef</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#lessdef_vagree_list">lessdef_vagree_list</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="default_needs_of_operation_sound" class="id"><a name="default_needs_of_operation_sound" class="">default_needs_of_operation_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="op:325" class="id"><a name="op:325" class="">op</a></span> <span id="args1:326" class="id"><a name="args1:326" class="">args1</a></span> <span id="v1:327" class="id"><a name="v1:327" class="">v1</a></span> <span id="args2:328" class="id"><a name="args2:328" class="">args2</a></span> <span id="nv:329" class="id"><a name="nv:329" class="">nv,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#op:325">op</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1:326">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:327">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1:326">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2:328">args2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1:326">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2:328">args2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#default">default</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:329">nv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1:326">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2:328">args2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#default">default</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:329">nv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#default">default</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:329">nv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1:326">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2:328">args2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#default">default</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:329">nv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#default">default</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:329">nv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#default">default</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:329">nv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nv:329">nv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v2:330" class="id"><a name="v2:330" class="">v2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#op:325">op</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2:328">args2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m2">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:330">v2</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:327">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:330">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:329">nv</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">assert</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#default">default</a></span> <span class="id">nv</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span>) <span class="gallina-kwd">by</span> (<span class="id">destruct</span> <span class="id">nv;</span> <span class="id">simpl;</span> <span class="id">congruence</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H2</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id">args1</span> <span class="id">args2</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0</span>. <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0;</span> <span class="id">constructor;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>. <span class="id">inv</span> <span class="id">H8;</span> <span class="id">constructor;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0;</span> <span class="id">constructor;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>. <span class="id">inv</span> <span class="id">H8;</span> <span class="id">constructor;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>. <span class="id">inv</span> <span class="id">H9;</span> <span class="id">constructor;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">na</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (@<span class="id"><a href="compcert.x86.Op.html#eval_operation_inj">eval_operation_inj</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.ge">ge</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>).<br/>
&nbsp;&nbsp;<span class="id">eassumption</span>. <span class="id">auto</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">op</span>). <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_lessdef">val_inject_lessdef;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_lessdef">val_inject_lessdef</a></span>. <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>). <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_list_lessdef">val_inject_list_lessdef;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">v2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="gallina-kwd">exists</span> <span class="id">v2;</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_lessdef">vagree_lessdef</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_lessdef">val_inject_lessdef</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT">DEFAULT</a></span>.<br/>
<br/>
<h2> Detecting operations that are redundant and can be turned into a move </h2>
<br/>
<span class="vernacular">Definition</span> <span id="andimm_redundant" class="id"><a name="andimm_redundant" class="">andimm_redundant</a></span> (<span id="x:331" class="id"><a name="x:331" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span id="n:332" class="id"><a name="n:332" class="">n:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:331">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id">m</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:332">n</a></span>)) <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="andimm_redundant_sound" class="id"><a name="andimm_redundant_sound" class="">andimm_redundant_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:334" class="id"><a name="v:334" class="">v</a></span> <span id="w:335" class="id"><a name="w:335" class="">w</a></span> <span id="x:336" class="id"><a name="x:336" class="">x</a></span> <span id="n:337" class="id"><a name="n:337" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#andimm_redundant">andimm_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:336">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:337">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:334">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:335">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#andimm">andimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:336">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:337">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:334">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:337">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#w:335">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:336">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#andimm_redundant">andimm_redundant;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
<span class="id">-</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvBooleans</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span><span class="id">;</span> <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#eq_same_bits">eq_same_bits</a></span> <span class="id">i1</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H2;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id">n</span> <span class="id">i1</span>) <span class="id">eqn:N;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_r">andb_true_r</a></span>. <span class="id">apply</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H2,</span> <span class="id">N;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="orimm_redundant" class="id"><a name="orimm_redundant" class="">orimm_redundant</a></span> (<span id="x:338" class="id"><a name="x:338" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span id="n:339" class="id"><a name="n:339" class="">n:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:338">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:339">n</a></span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="orimm_redundant_sound" class="id"><a name="orimm_redundant_sound" class="">orimm_redundant_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:341" class="id"><a name="v:341" class="">v</a></span> <span id="w:342" class="id"><a name="w:342" class="">w</a></span> <span id="x:343" class="id"><a name="x:343" class="">x</a></span> <span id="n:344" class="id"><a name="n:344" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#orimm_redundant">orimm_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:343">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:344">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:341">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:342">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#orimm">orimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:343">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:344">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:341">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:344">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#w:342">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:343">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#orimm_redundant">orimm_redundant;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">InvBooleans</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span><span class="id">;</span> <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_not'">iagree_not'</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.not_or_and_not">Int.not_or_and_not</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#andimm_redundant_sound">andimm_redundant_sound</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id">i</span>)) (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id">i0</span>)) (<span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.not_involutive">Int.not_involutive</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool_is_true">proj_sumbool_is_true</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_not">iagree_not;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="rolm_redundant" class="id"><a name="rolm_redundant" class="">rolm_redundant</a></span> (<span id="x:345" class="id"><a name="x:345" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span id="amount:346" class="id"><a name="amount:346" class="">amount</a></span> <span id="mask:347" class="id"><a name="mask:347" class="">mask:</a></span> <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:346">amount</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.NeedDomain.html#andimm_redundant">andimm_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:345">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:347">mask</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="rolm_redundant_sound" class="id"><a name="rolm_redundant_sound" class="">rolm_redundant_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:348" class="id"><a name="v:348" class="">v</a></span> <span id="w:349" class="id"><a name="w:349" class="">w</a></span> <span id="x:350" class="id"><a name="x:350" class="">x</a></span> <span id="amount:351" class="id"><a name="amount:351" class="">amount</a></span> <span id="mask:352" class="id"><a name="mask:352" class="">mask,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#rolm_redundant">rolm_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:350">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:351">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:352">mask</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:348">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:349">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#rolm">rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:350">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:351">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:352">mask</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.rolm">Val.rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:348">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount:351">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask:352">mask</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#w:349">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:350">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#rolm_redundant">rolm_redundant;</a></span> <span class="id">intros;</span> <span class="id">InvBooleans</span>. <span class="id">subst</span> <span class="id">amount</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.rolm_zero">Val.rolm_zero</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#andimm_redundant_sound">andimm_redundant_sound;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="n:354" class="id"><span id="n:353" class="id"><a name="n:354" class="">n,</a></span></span> <span class="id"><a href="compcert.lib.Integers.html#Int.ror">Int.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:353">n</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:353">n</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.ror_rol_neg">Int.ror_rol_neg</a></span> <span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#int_wordsize_divides_modulus">int_wordsize_divides_modulus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.neg_zero">Int.neg_zero</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.rol_zero">Int.rol_zero</a></span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#rolm">rolm,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#rol">rol,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#andimm">andimm</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="zero_ext_redundant" class="id"><a name="zero_ext_redundant" class="">zero_ext_redundant</a></span> (<span id="n:355" class="id"><a name="n:355" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="x:356" class="id"><a name="x:356" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:356">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:355">n</a></span> <span class="id">m</span>) <span class="id">m</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="zero_ext_redundant_sound" class="id"><a name="zero_ext_redundant_sound" class="">zero_ext_redundant_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:358" class="id"><a name="v:358" class="">v</a></span> <span id="w:359" class="id"><a name="w:359" class="">w</a></span> <span id="x:360" class="id"><a name="x:360" class="">x</a></span> <span id="n:361" class="id"><a name="n:361" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext_redundant">zero_ext_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:361">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:360">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:358">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:359">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext">zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:361">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:360">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:361">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:361">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:358">v</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#w:359">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:360">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext_redundant">zero_ext_redundant;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">InvAgree</span>. <span class="id">simpl</span>. <span class="id">InvBooleans</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>). <span class="id">apply</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="sign_ext_redundant" class="id"><a name="sign_ext_redundant" class="">sign_ext_redundant</a></span> (<span id="n:362" class="id"><a name="n:362" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="x:363" class="id"><a name="x:363" class="">x:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:363">x</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:362">n</a></span> <span class="id">m</span>) <span class="id">m</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="sign_ext_redundant_sound" class="id"><a name="sign_ext_redundant_sound" class="">sign_ext_redundant_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:365" class="id"><a name="v:365" class="">v</a></span> <span id="w:366" class="id"><a name="w:366" class="">w</a></span> <span id="x:367" class="id"><a name="x:367" class="">x</a></span> <span id="n:368" class="id"><a name="n:368" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext_redundant">sign_ext_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:368">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:367">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:365">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w:366">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext">sign_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:368">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:367">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:368">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n:368">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v:365">v</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#w:366">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:367">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext_redundant">sign_ext_redundant;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">InvAgree</span>. <span class="id">simpl</span>. <span class="id">InvBooleans</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">autorewrite</span> <span class="gallina-kwd">with</span> <span class="id">ints;</span> <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>). <span class="id">apply</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_or">Int.bits_or</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H3;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<h1> Neededness for register environments </h1>
<br/>
<span class="vernacular">Module</span> <span id="NVal" class="id"><a name="NVal" class="">NVal</a></span> <span class="id">&lt;:</span> <span class="id"><a href="compcert.lib.Lattice.html#SEMILATTICE">SEMILATTICE</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NVal.t" class="id"><a name="NVal.t" class="">t</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NVal.eq" class="id"><a name="NVal.eq" class="">eq</a></span> (<span id="x:369" class="id"><a name="x:369" class="">x</a></span> <span id="y:370" class="id"><a name="y:370" class="">y:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span>) <span class="id">:=</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#x:369">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:370">y</a></span>).<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NVal.eq_refl" class="id"><a name="NVal.eq_refl" class="">eq_refl:</a></span> <span class="gallina-kwd">forall</span> <span id="x:371" class="id"><a name="x:371" class="">x,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:371">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:371">x</a></span> <span class="id">:=</span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span>).<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NVal.eq_sym" class="id"><a name="NVal.eq_sym" class="">eq_sym:</a></span> <span class="gallina-kwd">forall</span> <span id="x:372" class="id"><a name="x:372" class="">x</a></span> <span id="y:373" class="id"><a name="y:373" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:372">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:373">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:373">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:372">x</a></span> <span class="id">:=</span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span>).<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NVal.eq_trans" class="id"><a name="NVal.eq_trans" class="">eq_trans:</a></span> <span class="gallina-kwd">forall</span> <span id="x:374" class="id"><a name="x:374" class="">x</a></span> <span id="y:375" class="id"><a name="y:375" class="">y</a></span> <span id="z:376" class="id"><a name="z:376" class="">z,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:374">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:375">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:375">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z:376">z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:374">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z:376">z</a></span> <span class="id">:=</span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_trans">eq_trans</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span>).<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NVal.beq" class="id"><a name="NVal.beq" class="">beq</a></span> (<span id="x:377" class="id"><a name="x:377" class="">x</a></span> <span id="y:378" class="id"><a name="y:378" class="">y:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#eq_nval">eq_nval</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:377">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:378">y</a></span>).<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NVal.beq_correct" class="id"><a name="NVal.beq_correct" class="">beq_correct:</a></span> <span class="gallina-kwd">forall</span> <span id="x:379" class="id"><a name="x:379" class="">x</a></span> <span id="y:380" class="id"><a name="y:380" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.beq">beq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:379">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:380">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:379">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:380">y</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
 <span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.beq">beq;</a></span> <span class="id">intros</span>. <span class="id">InvBooleans</span>. <span class="id">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NVal.ge" class="id"><a name="NVal.ge" class="">ge</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NVal.ge_refl" class="id"><a name="NVal.ge_refl" class="">ge_refl:</a></span> <span class="gallina-kwd">forall</span> <span id="x:381" class="id"><a name="x:381" class="">x</a></span> <span id="y:382" class="id"><a name="y:382" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:381">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:382">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:381">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:382">y</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
 <span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge;</a></span> <span class="id">intros</span>. <span class="id">subst</span> <span class="id">y</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge_refl">nge_refl</a></span>. Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NVal.ge_trans" class="id"><a name="NVal.ge_trans" class="">ge_trans:</a></span> <span class="gallina-kwd">forall</span> <span id="x:383" class="id"><a name="x:383" class="">x</a></span> <span id="y:384" class="id"><a name="y:384" class="">y</a></span> <span id="z:385" class="id"><a name="z:385" class="">z,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:383">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:384">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:384">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z:385">z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:383">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z:385">z</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
 <span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge;</a></span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge_trans">nge_trans;</a></span> <span class="id">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NVal.bot" class="id"><a name="NVal.bot" class="">bot</a></span> <span class="id">:</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NVal.ge_bot" class="id"><a name="NVal.ge_bot" class="">ge_bot:</a></span> <span class="gallina-kwd">forall</span> <span id="x:386" class="id"><a name="x:386" class="">x,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:386">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.bot">bot</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
 <span class="id">intros</span>. <span class="id">constructor</span>. Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NVal.lub" class="id"><a name="NVal.lub" class="">lub</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlub">nlub</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NVal.ge_lub_left" class="id"><a name="NVal.ge_lub_left" class="">ge_lub_left:</a></span> <span class="gallina-kwd">forall</span> <span id="x:387" class="id"><a name="x:387" class="">x</a></span> <span id="y:388" class="id"><a name="y:388" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#NVal.lub">lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:387">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:388">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:387">x</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Proof</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge_lub_l">nge_lub_l</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NVal.ge_lub_right" class="id"><a name="NVal.ge_lub_right" class="">ge_lub_right:</a></span> <span class="gallina-kwd">forall</span> <span id="x:389" class="id"><a name="x:389" class="">x</a></span> <span id="y:390" class="id"><a name="y:390" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#NVal.lub">lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:389">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:390">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#y:390">y</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Proof</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge_lub_r">nge_lub_r</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal">NVal</a></span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="NE" class="id"><a name="NE" class="">NE</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Lattice.html#LPMap1">LPMap1</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#NVal">NVal</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="nenv" class="id"><a name="nenv" class="">nenv</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#t">NE.t</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="nreg" class="id"><a name="nreg" class="">nreg</a></span> (<span id="ne:391" class="id"><a name="ne:391" class="">ne:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nenv">nenv</a></span>) (<span id="r:392" class="id"><a name="r:392" class="">r:</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#get">NE.get</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r:392">r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:391">ne</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="eagree" class="id"><a name="eagree" class="">eagree</a></span> (<span id="e1:393" class="id"><a name="e1:393" class="">e1</a></span> <span id="e2:394" class="id"><a name="e2:394" class="">e2:</a></span> <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>) (<span id="ne:395" class="id"><a name="ne:395" class="">ne:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nenv">nenv</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:396" class="id"><a name="r:396" class="">r,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1:393">e1#r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2:394">e2#r</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#get">NE.get</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r:396">r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:395">ne</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nreg_agree" class="id"><a name="nreg_agree" class="">nreg_agree:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rs1:397" class="id"><a name="rs1:397" class="">rs1</a></span> <span id="rs2:398" class="id"><a name="rs2:398" class="">rs2</a></span> <span id="ne:399" class="id"><a name="ne:399" class="">ne</a></span> <span id="r:400" class="id"><a name="r:400" class="">r,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#rs1:397">rs1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#rs2:398">rs2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:399">ne</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#rs1:397">rs1#r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#rs2:398">rs2#r</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nreg">nreg</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:399">ne</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r:400">r</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">nreg_agree:</span> <span class="id">na</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="eagree_ge" class="id"><a name="eagree_ge" class="">eagree_ge:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e1:401" class="id"><a name="e1:401" class="">e1</a></span> <span id="e2:402" class="id"><a name="e2:402" class="">e2</a></span> <span id="ne:403" class="id"><a name="ne:403" class="">ne</a></span> <span id="ne':404" class="id"><a name="ne':404" class="">ne',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1:401">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2:402">e2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:403">ne</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ge">NE.ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:403">ne</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne':404">ne'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1:401">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2:402">e2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne':404">ne'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge_agree">nge_agree</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#get">NE.get</a></span> <span class="id">r</span> <span class="id">ne</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id">H0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="eagree_bot" class="id"><a name="eagree_bot" class="">eagree_bot:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e1:405" class="id"><a name="e1:405" class="">e1</a></span> <span id="e2:406" class="id"><a name="e2:406" class="">e2,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1:405">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2:406">e2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bot">NE.bot</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#get_bot">NE.get_bot</a></span>. <span class="id">exact</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#I">Logic.I</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="eagree_same" class="id"><a name="eagree_same" class="">eagree_same:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e:407" class="id"><a name="e:407" class="">e</a></span> <span id="ne:408" class="id"><a name="ne:408" class="">ne,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e:407">e</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e:407">e</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:408">ne</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_same">vagree_same</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="eagree_update_1" class="id"><a name="eagree_update_1" class="">eagree_update_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e1:409" class="id"><a name="e1:409" class="">e1</a></span> <span id="e2:410" class="id"><a name="e2:410" class="">e2</a></span> <span id="ne:411" class="id"><a name="ne:411" class="">ne</a></span> <span id="v1:412" class="id"><a name="v1:412" class="">v1</a></span> <span id="v2:413" class="id"><a name="v2:413" class="">v2</a></span> <span id="nv:414" class="id"><a name="nv:414" class="">nv</a></span> <span id="r:415" class="id"><a name="r:415" class="">r,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1:409">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2:410">e2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:411">ne</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:412">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:413">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:414">nv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#e1:409">e1#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:412">v1</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#e2:410">e2#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:413">v2</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#set">NE.set</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r:415">r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv:414">nv</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:411">ne</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#gsspec">NE.gsspec</a></span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="eagree_update" class="id"><a name="eagree_update" class="">eagree_update:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e1:416" class="id"><a name="e1:416" class="">e1</a></span> <span id="e2:417" class="id"><a name="e2:417" class="">e2</a></span> <span id="ne:418" class="id"><a name="ne:418" class="">ne</a></span> <span id="v1:419" class="id"><a name="v1:419" class="">v1</a></span> <span id="v2:420" class="id"><a name="v2:420" class="">v2</a></span> <span id="r:421" class="id"><a name="r:421" class="">r,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:419">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:420">v2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nreg">nreg</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:418">ne</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r:421">r</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1:416">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2:417">e2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#set">NE.set</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r:421">r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:418">ne</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#e1:416">e1#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:419">v1</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#e2:417">e2#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2:420">v2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#ne:418">ne</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">specialize</span> (<span class="id">H0</span> <span class="id">r0</span>). <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#gsspec">NE.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">r0</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="eagree_update_dead" class="id"><a name="eagree_update_dead" class="">eagree_update_dead:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e1:422" class="id"><a name="e1:422" class="">e1</a></span> <span id="e2:423" class="id"><a name="e2:423" class="">e2</a></span> <span id="ne:424" class="id"><a name="ne:424" class="">ne</a></span> <span id="v1:425" class="id"><a name="v1:425" class="">v1</a></span> <span id="r:426" class="id"><a name="r:426" class="">r,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nreg">nreg</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:424">ne</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r:426">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1:422">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2:423">e2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:424">ne</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#e1:422">e1#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1:425">v1</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#e2:423">e2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne:424">ne</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">subst</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nreg">nreg</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id">H</span>. <span class="id">red;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Neededness for memory locations </h1>
<br/>
<span class="vernacular">Inductive</span> <span id="nmem" class="id"><a name="nmem" class="">nmem</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="NMemDead" class="id"><a name="NMemDead" class="">NMemDead</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="NMem" class="id"><a name="NMem" class="">NMem</a></span> (<span id="stk:429" class="id"><a name="stk:429" class="">stk:</a></span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.t">ISet.t</a></span>) (<span id="gl:430" class="id"><a name="gl:430" class="">gl:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.t">ISet.t</a></span>).<br/>
<br/>
<div class="doc">Interpretation of <span class="bracket"><span class="id">nmem</span></span>:
<ul>
<li>
 <span class="bracket"><span class="id">NMemDead</span></span>: all memory locations are unused (dead).  Acts as bottom.
</li>
<li>
 <span class="bracket"><span class="id">NMem</span> <span class="id">stk</span> <span class="id">gl</span></span>: all memory locations are used, except:
  - the stack locations whose offset is in the interval <span class="bracket"><span class="id">stk</span></span>
  - the global locations whose offset is in the corresponding entry of <span class="bracket"><span class="id">gl</span></span>.
</li>
</ul>
</div>
<br/>
<span class="vernacular">Section</span> <span id="LOCATIONS" class="id"><a name="LOCATIONS" class="">LOCATIONS</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="LOCATIONS.ge" class="id"><a name="LOCATIONS.ge" class="">ge:</a></span> <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="LOCATIONS.sp" class="id"><a name="LOCATIONS.sp" class="">sp:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="nlive" class="id"><a name="nlive" class="">nlive:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="nlive_intro" class="id"><a name="nlive_intro" class="">nlive_intro:</a></span> <span class="gallina-kwd">forall</span> <span id="stk:435" class="id"><a name="stk:435" class="">stk</a></span> <span id="gl:436" class="id"><a name="gl:436" class="">gl</a></span> <span id="b:437" class="id"><a name="b:437" class="">b</a></span> <span id="ofs:438" class="id"><a name="ofs:438" class="">ofs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STK:439" class="id"><a name="STK:439" class="">STK:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:437">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.sp">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~ISet</a></span>.<span class="id">In</span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:438">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#stk:435">stk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="GL:442" class="id"><a name="GL:442" class="">GL:</a></span> <span class="gallina-kwd">forall</span> <span id="id:440" class="id"><a name="id:440" class="">id</a></span> <span id="iv:441" class="id"><a name="iv:441" class="">iv,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#id:440">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:437">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#gl:436">gl!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iv:441">iv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~ISet</a></span>.<span class="id">In</span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:438">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iv:441">iv</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nlive:433">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#stk:435">stk</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#gl:436">gl</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b:437">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:438">ofs</a></span>.<br/>
<br/>
<div class="doc">All locations are live </div>
<br/>
<span class="vernacular">Definition</span> <span id="nmem_all" class="id"><a name="nmem_all" class="">nmem_all</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.empty">ISet.empty</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nlive_all" class="id"><a name="nlive_all" class="">nlive_all:</a></span> <span class="gallina-kwd">forall</span> <span id="b:443" class="id"><a name="b:443" class="">b</a></span> <span id="ofs:444" class="id"><a name="ofs:444" class="">ofs,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_all">nmem_all</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:443">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:444">ofs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_empty">ISet.In_empty</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Add a range of live locations to <span class="bracket"><span class="id">nm</span></span>.  The range starts at
  the abstract pointer <span class="bracket"><span class="id">p</span></span> and has length <span class="bracket"><span class="id">sz</span></span>. </div>
<br/>
<span class="vernacular">Definition</span> <span id="nmem_add" class="id"><a name="nmem_add" class="">nmem_add</a></span> (<span id="nm:445" class="id"><a name="nm:445" class="">nm:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>) (<span id="p:446" class="id"><a name="p:446" class="">p:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aptr">aptr</a></span>) (<span id="sz:447" class="id"><a name="sz:447" class="">sz:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:445">nm</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_all">nmem_all</a></span>       <span class="docright">(* very conservative, should never happen  *)</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> <span class="id">gl</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:446">p</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span> <span class="id">ofs</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">gl!id</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.remove">ISet.remove</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:447">sz</a></span>) <span class="id">iv</span>) <span class="id">gl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:445">nm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Glo">Glo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">PTree.remove</a></span> <span class="id">id</span> <span class="id">gl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id">ofs</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.remove">ISet.remove</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:447">sz</a></span>) <span class="id">stk</span>) <span class="id">gl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Stack">Stack</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.empty">ISet.empty</a></span> <span class="id">gl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_all">nmem_all</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nlive_add" class="id"><a name="nlive_add" class="">nlive_add:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:450" class="id"><a name="bc:450" class="">bc</a></span> <span id="b:451" class="id"><a name="b:451" class="">b</a></span> <span id="ofs:452" class="id"><a name="ofs:452" class="">ofs</a></span> <span id="p:453" class="id"><a name="p:453" class="">p</a></span> <span id="nm:454" class="id"><a name="nm:454" class="">nm</a></span> <span id="sz:455" class="id"><a name="sz:455" class="">sz</a></span> <span id="i:456" class="id"><a name="i:456" class="">i,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc:450">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#bc:450">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.sp">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc:450">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:451">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:452">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:453">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:452">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:456">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:452">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:455">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_add">nmem_add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:454">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:453">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:455">sz</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b:451">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:456">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_add">nmem_add</a></span>. <span class="id">destruct</span> <span class="id">nm</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive_all">nlive_all</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1;</span> <span class="id">try</span> (<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive_all">nlive_all</a></span>).<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="comment">(*&nbsp;Gl&nbsp;id&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id">id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id">H;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">gl!id</span> <span class="gallina-kwd">as</span> <span class="id">[iv|]</span> <span class="id">eqn:NG</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">id0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">id</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">Genv.genv_vars_inj</a></span><span class="id">;</span> <span class="id">eauto</span>). <span class="id">subst</span> <span class="id">id0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span> <span class="gallina-kwd">in</span> <span class="id">H5</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_remove">ISet.In_remove</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">elim</span> <span class="id">A;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">id0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">id</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">Genv.genv_vars_inj</a></span><span class="id">;</span> <span class="id">eauto</span>). <span class="id">subst</span> <span class="id">id0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="comment">(*&nbsp;Glo&nbsp;id&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id">id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id">H;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">id0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">id</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">Genv.genv_vars_inj</a></span><span class="id">;</span> <span class="id">eauto</span>). <span class="id">subst</span> <span class="id">id0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grs">PTree.grs</a></span> <span class="gallina-kwd">in</span> <span class="id">H5</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="comment">(*&nbsp;Stk&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_remove">ISet.In_remove</a></span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">elim</span> <span class="id">A;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">bc</span> <span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id">id</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id">H;</span> <span class="id">eauto</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="comment">(*&nbsp;Stack&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_empty">ISet.In_empty</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">bc</span> <span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id">id</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id">H;</span> <span class="id">eauto</span>). <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="incl_nmem_add" class="id"><a name="incl_nmem_add" class="">incl_nmem_add:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="nm:457" class="id"><a name="nm:457" class="">nm</a></span> <span id="b:458" class="id"><a name="b:458" class="">b</a></span> <span id="i:459" class="id"><a name="i:459" class="">i</a></span> <span id="p:460" class="id"><a name="p:460" class="">p</a></span> <span id="sz:461" class="id"><a name="sz:461" class="">sz,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:457">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:458">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:459">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_add">nmem_add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:457">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:460">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:461">sz</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b:458">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:459">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H;</span> <span class="id">subst</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_add">nmem_add;</a></span> <span class="id">destruct</span> <span class="id">p;</span> <span class="id">try</span> (<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive_all">nlive_all</a></span>).<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Gl&nbsp;id&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">gl!id</span> <span class="gallina-kwd">as</span> <span class="id">[iv|]</span> <span class="id">eqn:NG</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">split;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>)<span class="id">;</span> <span class="id">eauto</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_remove">ISet.In_remove</a></span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>. <span class="id">eelim</span> <span class="id">GL;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Glo&nbsp;id&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">id0</span> <span class="id">id</span>). <span class="id">congruence</span>. <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Stk&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_remove">ISet.In_remove</a></span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>. <span class="id">eelim</span> <span class="id">STK;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Stack&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_empty">ISet.In_empty</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Remove a range of locations from <span class="bracket"><span class="id">nm</span></span>, marking these locations as dead.
  The range starts at the abstract pointer <span class="bracket"><span class="id">p</span></span> and has length <span class="bracket"><span class="id">sz</span></span>. </div>
<br/>
<span class="vernacular">Definition</span> <span id="nmem_remove" class="id"><a name="nmem_remove" class="">nmem_remove</a></span> (<span id="nm:462" class="id"><a name="nm:462" class="">nm:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>) (<span id="p:463" class="id"><a name="p:463" class="">p:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aptr">aptr</a></span>) (<span id="sz:464" class="id"><a name="sz:464" class="">sz:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:462">nm</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> <span class="id">gl</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:463">p</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span> <span class="id">ofs</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="iv':467" class="id"><a name="iv':467" class="">iv'</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">gl!id</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.add">ISet.add</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:464">sz</a></span>) <span class="id">iv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>    <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.interval">ISet.interval</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:464">sz</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">id</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iv':467">iv'</a></span> <span class="id">gl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id">ofs</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.add">ISet.add</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:464">sz</a></span>) <span class="id">stk</span>) <span class="id">gl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:462">nm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nlive_remove" class="id"><a name="nlive_remove" class="">nlive_remove:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:468" class="id"><a name="bc:468" class="">bc</a></span> <span id="b:469" class="id"><a name="b:469" class="">b</a></span> <span id="ofs:470" class="id"><a name="ofs:470" class="">ofs</a></span> <span id="p:471" class="id"><a name="p:471" class="">p</a></span> <span id="nm:472" class="id"><a name="nm:472" class="">nm</a></span> <span id="sz:473" class="id"><a name="sz:473" class="">sz</a></span> <span id="b':474" class="id"><a name="b':474" class="">b'</a></span> <span id="i:475" class="id"><a name="i:475" class="">i,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc:468">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#bc:468">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.sp">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc:468">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:469">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:470">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:471">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:472">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b':474">b'</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:475">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#b':474">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:469">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:475">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:470">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:470">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:473">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:475">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_remove">nmem_remove</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:472">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:471">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:473">sz</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b':474">b'</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:475">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H2;</span> <span class="id">subst</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_remove">nmem_remove;</a></span> <span class="id">inv</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Gl&nbsp;id&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">iv'</span> <span class="id">:=</span> <span class="gallina-kwd">match</span> <span class="id">gl!id</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IntvSets.html#ISet.add">ISet.add</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">sz</span>) <span class="id">iv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IntvSets.html#ISet.interval">ISet.interval</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">sz</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id">id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id">H;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">simpl;</span> <span class="id">auto;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H6</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
<span class="id">+</span> <span class="id">inv</span> <span class="id">H6</span>. <span class="id">destruct</span> <span class="id">H3</span>. <span class="id">congruence</span>. <span class="id">destruct</span> <span class="id">gl!id</span> <span class="gallina-kwd">as</span> <span class="id">[iv0|]</span> <span class="id">eqn:NG</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">iv';</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_add">ISet.In_add</a></span>. <span class="id">intros</span> <span class="id">[P|P]</span>. <span class="id">lia</span>. <span class="id">eelim</span> <span class="id">GL;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">iv';</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_interval">ISet.In_interval</a></span>. <span class="id">lia</span>.<br/>
<span class="id">+</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Stk&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">simpl;</span> <span class="id">auto;</span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> <span class="id">H3</span>. <span class="id">subst</span> <span class="id">b'</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_add">ISet.In_add</a></span>. <span class="id">intros</span> <span class="id">[P|P]</span>. <span class="id">lia</span>. <span class="id">eapply</span> <span class="id">STK;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Test (conservatively) whether some locations in the range delimited
  by <span class="bracket"><span class="id">p</span></span> and <span class="bracket"><span class="id">sz</span></span> can be live in <span class="bracket"><span class="id">nm</span></span>. </div>
<br/>
<span class="vernacular">Definition</span> <span id="nmem_contains" class="id"><a name="nmem_contains" class="">nmem_contains</a></span> (<span id="nm:476" class="id"><a name="nm:476" class="">nm:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>) (<span id="p:477" class="id"><a name="p:477" class="">p:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aptr">aptr</a></span>) (<span id="sz:478" class="id"><a name="sz:478" class="">sz:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:476">nm</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> <span class="id">gl</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:477">p</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span> <span class="id">ofs</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">gl!id</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains">ISet.contains</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:478">sz</a></span>) <span class="id">iv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id">ofs</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains">ISet.contains</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:478">sz</a></span>) <span class="id">stk</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>  <span class="docright">(* conservative answer  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nlive_contains" class="id"><a name="nlive_contains" class="">nlive_contains:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:481" class="id"><a name="bc:481" class="">bc</a></span> <span id="b:482" class="id"><a name="b:482" class="">b</a></span> <span id="ofs:483" class="id"><a name="ofs:483" class="">ofs</a></span> <span id="p:484" class="id"><a name="p:484" class="">p</a></span> <span id="nm:485" class="id"><a name="nm:485" class="">nm</a></span> <span id="sz:486" class="id"><a name="sz:486" class="">sz</a></span> <span id="i:487" class="id"><a name="i:487" class="">i,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc:481">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#bc:481">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.sp">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc:481">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:482">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:483">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:484">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_contains">nmem_contains</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:485">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p:484">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:486">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:483">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:487">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:483">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:486">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm:485">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:482">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:487">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_contains">nmem_contains;</a></span> <span class="id">intros</span>. <span class="id">red;</span> <span class="id">intros</span> <span class="id">L;</span> <span class="id">inv</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Gl&nbsp;id&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id">id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id">H;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">gl!id</span> <span class="gallina-kwd">as</span> <span class="id">[iv|]</span> <span class="id">eqn:HG;</span> <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains">ISet.contains</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">sz</span>) <span class="id">iv</span>) <span class="id">eqn:IC;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains_spec">ISet.contains_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">IC</span>. <span class="id">eelim</span> <span class="id">GL;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Stk&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains">ISet.contains</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">sz</span>) <span class="id">stk</span>) <span class="id">eqn:IC;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains_spec">ISet.contains_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">IC</span>. <span class="id">eelim</span> <span class="id">STK;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Kill all stack locations between 0 and <span class="bracket"><span class="id">sz</span></span>, and mark everything else
  as live.  This reflects the effect of freeing the stack block at
  a <span class="bracket"><span class="id">Ireturn</span></span> or <span class="bracket"><span class="id">Itailcall</span></span> instruction. </div>
<br/>
<span class="vernacular">Definition</span> <span id="nmem_dead_stack" class="id"><a name="nmem_dead_stack" class="">nmem_dead_stack</a></span> (<span id="sz:488" class="id"><a name="sz:488" class="">sz:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.interval">ISet.interval</a></span> <span class="id">0</span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:488">sz</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nlive_dead_stack" class="id"><a name="nlive_dead_stack" class="">nlive_dead_stack:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="sz:489" class="id"><a name="sz:489" class="">sz</a></span> <span id="b':490" class="id"><a name="b':490" class="">b'</a></span> <span id="i:491" class="id"><a name="i:491" class="">i,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b':490">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.sp">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span>(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:491">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:489">sz</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_dead_stack">nmem_dead_stack</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz:489">sz</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b':490">b'</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:491">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_interval">ISet.In_interval</a></span>. <span class="id">intuition</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Least upper bound </div>
<br/>
<span class="vernacular">Definition</span> <span id="nmem_lub" class="id"><a name="nmem_lub" class="">nmem_lub</a></span> (<span id="nm1:492" class="id"><a name="nm1:492" class="">nm1</a></span> <span id="nm2:493" class="id"><a name="nm2:493" class="">nm2:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1:492">nm1,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2:493">nm2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead,</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2:493">nm2</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1:492">nm1</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk1</span> <span class="id">gl1,</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk2</span> <span class="id">gl2</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.inter">ISet.inter</a></span> <span class="id">stk1</span> <span class="id">stk2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PTree.combine">PTree.combine</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="o1:496" class="id"><a name="o1:496" class="">o1</a></span> <span id="o2:497" class="id"><a name="o2:497" class="">o2</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#o1:496">o1,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#o2:497">o2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv1,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv2</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.lib.IntvSets.html#ISet.inter">ISet.inter</a></span> <span class="id">iv1</span> <span class="id">iv2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gl1</span> <span class="id">gl2</span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nlive_lub_l" class="id"><a name="nlive_lub_l" class="">nlive_lub_l:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="nm1:500" class="id"><a name="nm1:500" class="">nm1</a></span> <span id="nm2:501" class="id"><a name="nm2:501" class="">nm2</a></span> <span id="b:502" class="id"><a name="b:502" class="">b</a></span> <span id="i:503" class="id"><a name="i:503" class="">i,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1:500">nm1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:502">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:503">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_lub">nmem_lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1:500">nm1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2:501">nm2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b:502">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:503">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H;</span> <span class="id">subst</span>. <span class="id">destruct</span> <span class="id">nm2;</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_inter">ISet.In_inter</a></span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>. <span class="id">eelim</span> <span class="id">STK;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">gl!id</span> <span class="gallina-kwd">as</span> <span class="id">[iv1|]</span> <span class="id">eqn:NG1;</span> <span class="id">try</span> <span class="id">discriminate;</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">gl0!id</span> <span class="gallina-kwd">as</span> <span class="id">[iv2|]</span> <span class="id">eqn:NG2;</span> <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_inter">ISet.In_inter</a></span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>. <span class="id">eelim</span> <span class="id">GL;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="nlive_lub_r" class="id"><a name="nlive_lub_r" class="">nlive_lub_r:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="nm1:504" class="id"><a name="nm1:504" class="">nm1</a></span> <span id="nm2:505" class="id"><a name="nm2:505" class="">nm2</a></span> <span id="b:506" class="id"><a name="b:506" class="">b</a></span> <span id="i:507" class="id"><a name="i:507" class="">i,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2:505">nm2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:506">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:507">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_lub">nmem_lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1:504">nm1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2:505">nm2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b:506">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i:507">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof83')">Proof.</span></div>
<div class="proofscript" id="proof83">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H;</span> <span class="id">subst</span>. <span class="id">destruct</span> <span class="id">nm1;</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_inter">ISet.In_inter</a></span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>. <span class="id">eelim</span> <span class="id">STK;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">gl0!id</span> <span class="gallina-kwd">as</span> <span class="id">[iv1|]</span> <span class="id">eqn:NG1;</span> <span class="id">try</span> <span class="id">discriminate;</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">gl!id</span> <span class="gallina-kwd">as</span> <span class="id">[iv2|]</span> <span class="id">eqn:NG2;</span> <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_inter">ISet.In_inter</a></span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>. <span class="id">eelim</span> <span class="id">GL;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Boolean-valued equality test </div>
<br/>
<span class="vernacular">Definition</span> <span id="nmem_beq" class="id"><a name="nmem_beq" class="">nmem_beq</a></span> (<span id="nm1:508" class="id"><a name="nm1:508" class="">nm1</a></span> <span id="nm2:509" class="id"><a name="nm2:509" class="">nm2:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1:508">nm1,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2:509">nm2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk1</span> <span class="id">gl1,</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk2</span> <span class="id">gl2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.beq">ISet.beq</a></span> <span class="id">stk1</span> <span class="id">stk2</span> &amp;&amp; <span class="id"><a href="compcert.lib.Maps.html#PTree.beq">PTree.beq</a></span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.beq">ISet.beq</a></span> <span class="id">gl1</span> <span class="id">gl2</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nmem_beq_sound" class="id"><a name="nmem_beq_sound" class="">nmem_beq_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="nm1:512" class="id"><a name="nm1:512" class="">nm1</a></span> <span id="nm2:513" class="id"><a name="nm2:513" class="">nm2</a></span> <span id="b:514" class="id"><a name="b:514" class="">b</a></span> <span id="ofs:515" class="id"><a name="ofs:515" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_beq">nmem_beq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1:512">nm1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2:513">nm2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1:512">nm1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:514">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:515">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2:513">nm2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b:514">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:515">ofs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof84')">Proof.</span></div>
<div class="proofscript" id="proof84">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_beq">nmem_beq;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">nm1</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">stk1</span> <span class="id">gl1];</span> <span class="id">destruct</span> <span class="id">nm2</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">stk2</span> <span class="id">gl2];</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
<span class="id">-</span> <span class="id">split;</span> <span class="id">intros</span> <span class="id">L;</span> <span class="id">inv</span> <span class="id">L</span>.<br/>
<span class="id">-</span> <span class="id">InvBooleans</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.beq_spec">ISet.beq_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.beq_correct">PTree.beq_correct</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">intros</span> <span class="id">L;</span> <span class="id">inv</span> <span class="id">L;</span> <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H0</span>. <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="id">specialize</span> (<span class="id">H1</span> <span class="id">id</span>). <span class="id">rewrite</span> <span class="id">H2</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">destruct</span> <span class="id">gl1!id</span> <span class="gallina-kwd">as</span> <span class="id">[iv1|]</span> <span class="id">eqn:</span> <span class="id">NG;</span> <span class="id">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.beq_spec">ISet.beq_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H1</span>. <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="id">specialize</span> (<span class="id">H1</span> <span class="id">id</span>). <span class="id">rewrite</span> <span class="id">H2</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">destruct</span> <span class="id">gl2!id</span> <span class="gallina-kwd">as</span> <span class="id">[iv2|]</span> <span class="id">eqn:</span> <span class="id">NG;</span> <span class="id">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.beq_spec">ISet.beq_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">rewrite</span> <span class="id">H1</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS">LOCATIONS</a></span>.<br/>
<br/>
<br/>
<h1> The lattice for dataflow analysis </h1>
<br/>
<span class="vernacular">Module</span> <span id="NA" class="id"><a name="NA" class="">NA</a></span> <span class="id">&lt;:</span> <span class="id"><a href="compcert.lib.Lattice.html#SEMILATTICE">SEMILATTICE</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NA.t" class="id"><a name="NA.t" class="">t</a></span> <span class="id">:=</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nenv">nenv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>)%<span class="id">type</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NA.eq" class="id"><a name="NA.eq" class="">eq</a></span> (<span id="x:516" class="id"><a name="x:516" class="">x</a></span> <span id="y:517" class="id"><a name="y:517" class="">y:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NE.eq">NE.eq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:516">x</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:517">y</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="ge:518" class="id"><a name="ge:518" class="">ge</a></span> <span id="sp:519" class="id"><a name="sp:519" class="">sp</a></span> <span id="b:520" class="id"><a name="b:520" class="">b</a></span> <span id="ofs:521" class="id"><a name="ofs:521" class="">ofs,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ge:518">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sp:519">sp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:516">x</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b:520">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:521">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ge:518">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sp:519">sp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:517">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b:520">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:521">ofs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NA.eq_refl" class="id"><a name="NA.eq_refl" class="">eq_refl:</a></span> <span class="gallina-kwd">forall</span> <span id="x:522" class="id"><a name="x:522" class="">x,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:522">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:522">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</span></div>
<div class="proofscript" id="proof85">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq;</a></span> <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl;</span> <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.eq_refl">NE.eq_refl</a></span>. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NA.eq_sym" class="id"><a name="NA.eq_sym" class="">eq_sym:</a></span> <span class="gallina-kwd">forall</span> <span id="x:523" class="id"><a name="x:523" class="">x</a></span> <span id="y:524" class="id"><a name="y:524" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:523">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:524">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:524">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:523">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq;</a></span> <span class="id">destruct</span> <span class="id">x,</span> <span class="id">y;</span> <span class="id">simpl</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.eq_sym">NE.eq_sym</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">B</span>. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NA.eq_trans" class="id"><a name="NA.eq_trans" class="">eq_trans:</a></span> <span class="gallina-kwd">forall</span> <span id="x:525" class="id"><a name="x:525" class="">x</a></span> <span id="y:526" class="id"><a name="y:526" class="">y</a></span> <span id="z:527" class="id"><a name="z:527" class="">z,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:525">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:526">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:526">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z:527">z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:525">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z:527">z</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq;</a></span> <span class="id">destruct</span> <span class="id">x,</span> <span class="id">y,</span> <span class="id">z;</span> <span class="id">simpl</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span> <span class="id">[C</span> <span class="id">D];</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.eq_trans">NE.eq_trans</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">B;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NA.beq" class="id"><a name="NA.beq" class="">beq</a></span> (<span id="x:528" class="id"><a name="x:528" class="">x</a></span> <span id="y:529" class="id"><a name="y:529" class="">y:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NE.beq">NE.beq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:528">x</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:529">y</a></span>) &amp;&amp; <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_beq">nmem_beq</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:528">x</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:529">y</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NA.beq_correct" class="id"><a name="NA.beq_correct" class="">beq_correct:</a></span> <span class="gallina-kwd">forall</span> <span id="x:530" class="id"><a name="x:530" class="">x</a></span> <span id="y:531" class="id"><a name="y:531" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.beq">beq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:530">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:531">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:530">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:531">y</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.beq">beq,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq;</a></span> <span class="id">destruct</span> <span class="id">x,</span> <span class="id">y;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">InvBooleans</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.beq_correct">NE.beq_correct</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_beq_sound">nmem_beq_sound;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NA.ge" class="id"><a name="NA.ge" class="">ge</a></span> (<span id="x:532" class="id"><a name="x:532" class="">x</a></span> <span id="y:533" class="id"><a name="y:533" class="">y:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge">NE.ge</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:532">x</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:533">y</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="ge:534" class="id"><a name="ge:534" class="">ge</a></span> <span id="sp:535" class="id"><a name="sp:535" class="">sp</a></span> <span id="b:536" class="id"><a name="b:536" class="">b</a></span> <span id="ofs:537" class="id"><a name="ofs:537" class="">ofs,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ge:534">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sp:535">sp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:533">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b:536">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:537">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ge:534">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sp:535">sp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:532">x</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b:536">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs:537">ofs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NA.ge_refl" class="id"><a name="NA.ge_refl" class="">ge_refl:</a></span> <span class="gallina-kwd">forall</span> <span id="x:538" class="id"><a name="x:538" class="">x</a></span> <span id="y:539" class="id"><a name="y:539" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:538">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:539">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:538">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:539">y</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge;</a></span> <span class="id">destruct</span> <span class="id">x,</span> <span class="id">y;</span> <span class="id">simpl</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B];</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge_refl">NE.ge_refl</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">B;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NA.ge_trans" class="id"><a name="NA.ge_trans" class="">ge_trans:</a></span> <span class="gallina-kwd">forall</span> <span id="x:540" class="id"><a name="x:540" class="">x</a></span> <span id="y:541" class="id"><a name="y:541" class="">y</a></span> <span id="z:542" class="id"><a name="z:542" class="">z,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:540">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:541">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:541">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z:542">z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:540">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z:542">z</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge;</a></span> <span class="id">destruct</span> <span class="id">x,</span> <span class="id">y,</span> <span class="id">z;</span> <span class="id">simpl</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span> <span class="id">[C</span> <span class="id">D];</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge_trans">NE.ge_trans</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NA.bot" class="id"><a name="NA.bot" class="">bot</a></span> <span class="id">:</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span> <span class="id">:=</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#NE.bot">NE.bot</a></span><span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079">,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NA.ge_bot" class="id"><a name="NA.ge_bot" class="">ge_bot:</a></span> <span class="gallina-kwd">forall</span> <span id="x:543" class="id"><a name="x:543" class="">x,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:543">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.bot">bot</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.bot">bot;</a></span> <span class="id">destruct</span> <span class="id">x;</span> <span class="id">simpl</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge_bot">NE.ge_bot</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NA.lub" class="id"><a name="NA.lub" class="">lub</a></span> (<span id="x:544" class="id"><a name="x:544" class="">x</a></span> <span id="y:545" class="id"><a name="y:545" class="">y:</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.NeedDomain.html#NE.lub">NE.lub</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:544">x</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:545">y</a></span>)<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079">,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_lub">nmem_lub</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:544">x</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:545">y</a></span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NA.ge_lub_left" class="id"><a name="NA.ge_lub_left" class="">ge_lub_left:</a></span> <span class="gallina-kwd">forall</span> <span id="x:546" class="id"><a name="x:546" class="">x</a></span> <span id="y:547" class="id"><a name="y:547" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#NA.lub">lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:546">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:547">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x:546">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge;</a></span> <span class="id">destruct</span> <span class="id">x,</span> <span class="id">y;</span> <span class="id">simpl;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge_lub_left">NE.ge_lub_left</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive_lub_l">nlive_lub_l;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NA.ge_lub_right" class="id"><a name="NA.ge_lub_right" class="">ge_lub_right:</a></span> <span class="gallina-kwd">forall</span> <span id="x:548" class="id"><a name="x:548" class="">x</a></span> <span id="y:549" class="id"><a name="y:549" class="">y,</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#NA.lub">lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x:548">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y:549">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#y:549">y</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge;</a></span> <span class="id">destruct</span> <span class="id">x,</span> <span class="id">y;</span> <span class="id">simpl;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge_lub_right">NE.ge_lub_right</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive_lub_r">nlive_lub_r;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA">NA</a></span>.<br/>
<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
