
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Asmgenproof0</title>
<meta name="description" content="Documentation of Coq module Asmgenproof0" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module Asmgenproof0</h1>
<br/>
<div class="doc">Correctness proof for Asm generation: machine-independent framework </div>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<span class="vernacular">Require</span> <span class="id"><a href="compcert.lib.Intv.html">Intv</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Events.html">Events</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Smallstep.html">Smallstep</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.Locations.html">Locations</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.Mach.html">Mach</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.x86.Asm.html">Asm</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.x86.Asmgen.html">Asmgen</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.Conventions.html">Conventions</a></span>.<br/>
<br/>
<h1> Processor registers and register states </h1>
<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">2</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">_</span>) <span class="id">=&gt;</span> <span class="id">congruence:</span> <span class="id">asmgen</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="ireg_of_eq" class="id"><a name="ireg_of_eq" class="">ireg_of_eq:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:1" class="id"><a name="r:1" class="">r</a></span> <span id="r':2" class="id"><a name="r':2" class="">r',</a></span> <span class="id"><a href="compcert.x86.Asmgen.html#ireg_of">ireg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:1">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':2">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:1">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.x86.Asm.html#IR">IR</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':2">r'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.x86.Asmgen.html#ireg_of">ireg_of;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id">r</span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="freg_of_eq" class="id"><a name="freg_of_eq" class="">freg_of_eq:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:3" class="id"><a name="r:3" class="">r</a></span> <span id="r':4" class="id"><a name="r':4" class="">r',</a></span> <span class="id"><a href="compcert.x86.Asmgen.html#freg_of">freg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:3">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':4">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:3">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.x86.Asm.html#FR">FR</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':4">r'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.x86.Asmgen.html#freg_of">freg_of;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id">r</span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="preg_of_injective" class="id"><a name="preg_of_injective" class="">preg_of_injective:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r1:5" class="id"><a name="r1:5" class="">r1</a></span> <span id="r2:6" class="id"><a name="r2:6" class="">r2,</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r1:5">r1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r2:6">r2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r1:5">r1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r2:6">r2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">r1;</span> <span class="id">destruct</span> <span class="id">r2;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">reflexivity</span> <span class="id">||</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="preg_of_data" class="id"><a name="preg_of_data" class="">preg_of_data:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:7" class="id"><a name="r:7" class="">r,</a></span> <span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> (<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:7">r</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">r;</span> <span class="id">reflexivity</span>.<br/>
Qed.</div>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">preg_of_data:</span> <span class="id">asmgen</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="data_diff" class="id"><a name="data_diff" class="">data_diff:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:8" class="id"><a name="r:8" class="">r</a></span> <span id="r':9" class="id"><a name="r':9" class="">r',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:8">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':9">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:8">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':9">r'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">data_diff:</span> <span class="id">asmgen</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="preg_of_not_SP" class="id"><a name="preg_of_not_SP" class="">preg_of_not_SP:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:10" class="id"><a name="r:10" class="">r,</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:10">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#SP">SP</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of;</a></span> <span class="id">destruct</span> <span class="id">r;</span> <span class="id">simpl;</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="preg_of_not_PC" class="id"><a name="preg_of_not_PC" class="">preg_of_not_PC:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:11" class="id"><a name="r:11" class="">r,</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:11">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#PC">PC</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#data_diff">data_diff;</a></span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">asmgen</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">preg_of_not_SP</span> <span class="id">preg_of_not_PC:</span> <span class="id">asmgen</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="nextinstr_pc" class="id"><a name="nextinstr_pc" class="">nextinstr_pc:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rs:12" class="id"><a name="rs:12" class="">rs,</a></span> (<span class="id"><a href="compcert.x86.Asm.html#nextinstr">nextinstr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:12">rs</a></span>)<span class="id">#PC</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:12">rs#PC</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gss">Pregmap.gss</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="nextinstr_inv" class="id"><a name="nextinstr_inv" class="">nextinstr_inv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:13" class="id"><a name="r:13" class="">r</a></span> <span id="rs:14" class="id"><a name="rs:14" class="">rs,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:13">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#PC">PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.x86.Asm.html#nextinstr">nextinstr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:14">rs</a></span>)<span class="id">#r</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:14">rs#r</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#nextinstr">nextinstr</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gso">Pregmap.gso</a></span>. <span class="id">red;</span> <span class="id">intro;</span> <span class="id">subst</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="nextinstr_inv1" class="id"><a name="nextinstr_inv1" class="">nextinstr_inv1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:15" class="id"><a name="r:15" class="">r</a></span> <span id="rs:16" class="id"><a name="rs:16" class="">rs,</a></span> <span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:15">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.x86.Asm.html#nextinstr">nextinstr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:16">rs</a></span>)<span class="id">#r</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:16">rs#r</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#nextinstr_inv">nextinstr_inv</a></span>. <span class="id">red;</span> <span class="id">intro;</span> <span class="id">subst;</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="nextinstr_set_preg" class="id"><a name="nextinstr_set_preg" class="">nextinstr_set_preg:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rs:17" class="id"><a name="rs:17" class="">rs</a></span> <span id="m:18" class="id"><a name="m:18" class="">m</a></span> <span id="v:19" class="id"><a name="v:19" class="">v,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.x86.Asm.html#nextinstr">nextinstr</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:17">rs#</a></span>(<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:18">m</a></span>) <span class="id">&lt;-</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:19">v</a></span>))<span class="id">#PC</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:17">rs#PC</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#nextinstr">nextinstr</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gss">Pregmap.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gso">Pregmap.gso</a></span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#not_eq_sym">not_eq_sym</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_not_PC">preg_of_not_PC</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="undef_regs_other" class="id"><a name="undef_regs_other" class="">undef_regs_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:20" class="id"><a name="r:20" class="">r</a></span> <span id="rl:21" class="id"><a name="rl:21" class="">rl</a></span> <span id="rs:22" class="id"><a name="rs:22" class="">rs,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r':23" class="id"><a name="r':23" class="">r',</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':23">r'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:21">rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:20">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':23">r'</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#undef_regs">undef_regs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:21">rl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:22">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:20">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:22">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:20">r</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">rl;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHrl</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gso">Pregmap.gso</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Fixpoint</span> <span id="preg_notin" class="id"><a name="preg_notin" class="">preg_notin</a></span> (<span id="r:24" class="id"><a name="r:24" class="">r:</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg">preg</a></span>) (<span id="rl:25" class="id"><a name="rl:25" class="">rl:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:25">rl</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">r1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:24">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id">r1</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">r1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">rl</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:24">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id">r1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_notin:26">preg_notin</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:24">r</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:25">rl</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="preg_notin_charact" class="id"><a name="preg_notin_charact" class="">preg_notin_charact:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:28" class="id"><a name="r:28" class="">r</a></span> <span id="rl:29" class="id"><a name="rl:29" class="">rl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_notin">preg_notin</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:28">r</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:29">rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> (<span class="gallina-kwd">forall</span> <span id="mr:30" class="id"><a name="mr:30" class="">mr,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#mr:30">mr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:29">rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:28">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#mr:30">mr</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">rl;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">rl</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">split</span>. <span class="id">intros</span>. <span class="id">intuition</span> <span class="id">congruence</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHrl</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">congruence</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="undef_regs_other_2" class="id"><a name="undef_regs_other_2" class="">undef_regs_other_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:31" class="id"><a name="r:31" class="">r</a></span> <span id="rl:32" class="id"><a name="rl:32" class="">rl</a></span> <span id="rs:33" class="id"><a name="rs:33" class="">rs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_notin">preg_notin</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:31">r</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:32">rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#undef_regs">undef_regs</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:32">rl</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:33">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:31">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:33">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:31">r</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#undef_regs_other">undef_regs_other</a></span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[mr</span> <span class="id">[A</span> <span class="id">B]]</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_notin_charact">preg_notin_charact</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Agreement between Mach registers and processor registers </h1>
<br/>
<span class="vernacular">Record</span> <span id="agree" class="id"><a name="agree" class="">agree</a></span> (<span id="ms:34" class="id"><a name="ms:34" class="">ms:</a></span> <span class="id"><a href="compcert.backend.Mach.html#regset">Mach.regset</a></span>) (<span id="sp:35" class="id"><a name="sp:35" class="">sp:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span id="rs:36" class="id"><a name="rs:36" class="">rs:</a></span> <span class="id"><a href="compcert.x86.Asm.html#regset">Asm.regset</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span> <span class="id">mkagree</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span id="agree_sp" class="id"><a name="agree_sp" class="">agree_sp:</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:36">rs#SP</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:35">sp;</a></span><br/>
&nbsp;&nbsp;<span id="agree_sp_def" class="id"><a name="agree_sp_def" class="">agree_sp_def:</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:35">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef;</a></span><br/>
&nbsp;&nbsp;<span id="agree_mregs" class="id"><a name="agree_mregs" class="">agree_mregs:</a></span> <span class="gallina-kwd">forall</span> <span id="r:40" class="id"><a name="r:40" class="">r:</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:34">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:40">r</a></span>) (<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:36">rs#</a></span>(<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:40">r</a></span>))<br/>
<span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="preg_val" class="id"><a name="preg_val" class="">preg_val:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:42" class="id"><a name="ms:42" class="">ms</a></span> <span id="sp:43" class="id"><a name="sp:43" class="">sp</a></span> <span id="rs:44" class="id"><a name="rs:44" class="">rs</a></span> <span id="r:45" class="id"><a name="r:45" class="">r,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:42">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:43">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:44">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:42">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:45">r</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:44">rs#</a></span>(<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:45">r</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="preg_vals" class="id"><a name="preg_vals" class="">preg_vals:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:46" class="id"><a name="ms:46" class="">ms</a></span> <span id="sp:47" class="id"><a name="sp:47" class="">sp</a></span> <span id="rs:48" class="id"><a name="rs:48" class="">rs,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:46">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:47">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:48">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:49" class="id"><a name="l:49" class="">l,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:46">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#l:49">l</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:48">rs</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#l:49">l</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl</span>. <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_val">preg_val;</a></span> <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="sp_val" class="id"><a name="sp_val" class="">sp_val:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:50" class="id"><a name="ms:50" class="">ms</a></span> <span id="sp:51" class="id"><a name="sp:51" class="">sp</a></span> <span id="rs:52" class="id"><a name="rs:52" class="">rs,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:50">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:51">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:52">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:51">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:52">rs#SP</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="ireg_val" class="id"><a name="ireg_val" class="">ireg_val:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:53" class="id"><a name="ms:53" class="">ms</a></span> <span id="sp:54" class="id"><a name="sp:54" class="">sp</a></span> <span id="rs:55" class="id"><a name="rs:55" class="">rs</a></span> <span id="r:56" class="id"><a name="r:56" class="">r</a></span> <span id="r':57" class="id"><a name="r':57" class="">r',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:53">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:54">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:55">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asmgen.html#ireg_of">ireg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:56">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':57">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:53">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:56">r</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:55">rs#r'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#ireg_of_eq">ireg_of_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_val">preg_val;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="freg_val" class="id"><a name="freg_val" class="">freg_val:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:58" class="id"><a name="ms:58" class="">ms</a></span> <span id="sp:59" class="id"><a name="sp:59" class="">sp</a></span> <span id="rs:60" class="id"><a name="rs:60" class="">rs</a></span> <span id="r:61" class="id"><a name="r:61" class="">r</a></span> <span id="r':62" class="id"><a name="r':62" class="">r',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:58">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:59">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:60">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asmgen.html#freg_of">freg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:61">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':62">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:58">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:61">r</a></span>) (<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:60">rs#r'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#freg_of_eq">freg_of_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_val">preg_val;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_exten" class="id"><a name="agree_exten" class="">agree_exten:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:63" class="id"><a name="ms:63" class="">ms</a></span> <span id="sp:64" class="id"><a name="sp:64" class="">sp</a></span> <span id="rs:65" class="id"><a name="rs:65" class="">rs</a></span> <span id="rs':66" class="id"><a name="rs':66" class="">rs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:63">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:64">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:65">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r:67" class="id"><a name="r:67" class="">r,</a></span> <span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:67">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':66">rs'#r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:65">rs#r</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:63">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:64">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':66">rs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_data">preg_of_data</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of register agreement under various assignments. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_set_mreg" class="id"><a name="agree_set_mreg" class="">agree_set_mreg:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:68" class="id"><a name="ms:68" class="">ms</a></span> <span id="sp:69" class="id"><a name="sp:69" class="">sp</a></span> <span id="rs:70" class="id"><a name="rs:70" class="">rs</a></span> <span id="r:71" class="id"><a name="r:71" class="">r</a></span> <span id="v:72" class="id"><a name="v:72" class="">v</a></span> <span id="rs':73" class="id"><a name="rs':73" class="">rs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:68">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:69">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:70">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:72">v</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':73">rs'#</a></span>(<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:71">r</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r':74" class="id"><a name="r':74" class="">r',</a></span> <span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':74">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':74">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:71">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':73">rs'#r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:70">rs#r'</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> (<span class="id"><a href="compcert.backend.Mach.html#Regmap.set">Regmap.set</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:71">r</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:72">v</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:68">ms</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:69">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':73">rs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H1;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#not_eq_sym">not_eq_sym</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_not_SP">preg_of_not_SP</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Mach.html#Regmap.set">Regmap.set</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Mach.html#RegEq.eq">RegEq.eq</a></span> <span class="id">r0</span> <span class="id">r</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H1</span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_data">preg_of_data</a></span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">n</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_injective">preg_of_injective;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Corollary</span> <span id="agree_set_mreg_parallel" class="id"><a name="agree_set_mreg_parallel" class="">agree_set_mreg_parallel:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:75" class="id"><a name="ms:75" class="">ms</a></span> <span id="sp:76" class="id"><a name="sp:76" class="">sp</a></span> <span id="rs:77" class="id"><a name="rs:77" class="">rs</a></span> <span id="r:78" class="id"><a name="r:78" class="">r</a></span> <span id="v:79" class="id"><a name="v:79" class="">v</a></span> <span id="v':80" class="id"><a name="v':80" class="">v',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:75">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:76">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:77">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:79">v</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v':80">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> (<span class="id"><a href="compcert.backend.Mach.html#Regmap.set">Regmap.set</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:78">r</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:79">v</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:75">ms</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:76">sp</a></span> (<span class="id"><a href="compcert.x86.Asm.html#Pregmap.set">Pregmap.set</a></span> (<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:78">r</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#v':80">v'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:77">rs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree_set_mreg">agree_set_mreg;</a></span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gss">Pregmap.gss</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">intros;</span> <span class="id">apply</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gso">Pregmap.gso</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_set_other" class="id"><a name="agree_set_other" class="">agree_set_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:81" class="id"><a name="ms:81" class="">ms</a></span> <span id="sp:82" class="id"><a name="sp:82" class="">sp</a></span> <span id="rs:83" class="id"><a name="rs:83" class="">rs</a></span> <span id="r:84" class="id"><a name="r:84" class="">r</a></span> <span id="v:85" class="id"><a name="v:85" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:81">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:82">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:83">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:84">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:81">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:82">sp</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:83">rs#r</a></span> <span class="id"><a href="compcert.x86.Asm.html#12783a38af0ef10e7b1cf0d1fa070648">&lt;-</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:85">v</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree_exten">agree_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">rs</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gso">Pregmap.gso</a></span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_nextinstr" class="id"><a name="agree_nextinstr" class="">agree_nextinstr:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:86" class="id"><a name="ms:86" class="">ms</a></span> <span id="sp:87" class="id"><a name="sp:87" class="">sp</a></span> <span id="rs:88" class="id"><a name="rs:88" class="">rs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:86">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:87">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:88">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:86">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:87">sp</a></span> (<span class="id"><a href="compcert.x86.Asm.html#nextinstr">nextinstr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:88">rs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#nextinstr">nextinstr</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree_set_other">agree_set_other</a></span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_set_pair" class="id"><a name="agree_set_pair" class="">agree_set_pair:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="sp:89" class="id"><a name="sp:89" class="">sp</a></span> <span id="p:90" class="id"><a name="p:90" class="">p</a></span> <span id="v:91" class="id"><a name="v:91" class="">v</a></span> <span id="v':92" class="id"><a name="v':92" class="">v'</a></span> <span id="ms:93" class="id"><a name="ms:93" class="">ms</a></span> <span id="rs:94" class="id"><a name="rs:94" class="">rs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:93">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:89">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:94">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:91">v</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v':92">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> (<span class="id"><a href="compcert.backend.Mach.html#set_pair">Mach.set_pair</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#p:90">p</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:91">v</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:93">ms</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:89">sp</a></span> (<span class="id"><a href="compcert.x86.Asm.html#set_pair">set_pair</a></span> (<span class="id"><a href="compcert.common.AST.html#map_rpair">map_rpair</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#p:90">p</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#v':92">v'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:94">rs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">p;</span> <span class="id">simpl</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree_set_mreg_parallel">agree_set_mreg_parallel;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree_set_mreg_parallel">agree_set_mreg_parallel</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree_set_mreg_parallel">agree_set_mreg_parallel;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword_lessdef">Val.hiword_lessdef</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.loword_lessdef">Val.loword_lessdef</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_undef_nondata_regs" class="id"><a name="agree_undef_nondata_regs" class="">agree_undef_nondata_regs:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:95" class="id"><a name="ms:95" class="">ms</a></span> <span id="sp:96" class="id"><a name="sp:96" class="">sp</a></span> <span id="rl:97" class="id"><a name="rl:97" class="">rl</a></span> <span id="rs:98" class="id"><a name="rs:98" class="">rs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:95">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:96">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:98">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r:99" class="id"><a name="r:99" class="">r,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:99">r</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:97">rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:99">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:95">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:96">sp</a></span> (<span class="id"><a href="compcert.x86.Asm.html#undef_regs">undef_regs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:97">rl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:98">rs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">rl;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHrl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree_exten">agree_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">rs;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gso">Pregmap.gso</a></span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id">a</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_undef_regs" class="id"><a name="agree_undef_regs" class="">agree_undef_regs:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:100" class="id"><a name="ms:100" class="">ms</a></span> <span id="sp:101" class="id"><a name="sp:101" class="">sp</a></span> <span id="rl:102" class="id"><a name="rl:102" class="">rl</a></span> <span id="rs:103" class="id"><a name="rs:103" class="">rs</a></span> <span id="rs':104" class="id"><a name="rs':104" class="">rs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:100">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:101">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:103">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r':105" class="id"><a name="r':105" class="">r',</a></span> <span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':105">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_notin">preg_notin</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':105">r'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:102">rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':104">rs'#r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:103">rs#r'</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> (<span class="id"><a href="compcert.backend.Mach.html#undef_regs">Mach.undef_regs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:102">rl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:100">ms</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:101">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':104">rs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">agree_sp0</span>. <span class="id">apply</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_notin_charact">preg_notin_charact</a></span>. <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#not_eq_sym">not_eq_sym</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_not_SP">preg_of_not_SP</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In_dec">In_dec</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg_eq">mreg_eq</a></span> <span class="id">r</span> <span class="id">rl</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Mach.html#undef_regs_same">Mach.undef_regs_same</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Mach.html#undef_regs_other">Mach.undef_regs_other</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_data">preg_of_data</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_notin_charact">preg_notin_charact</a></span>. <span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">elim</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_injective">preg_of_injective;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_undef_regs2" class="id"><a name="agree_undef_regs2" class="">agree_undef_regs2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:106" class="id"><a name="ms:106" class="">ms</a></span> <span id="sp:107" class="id"><a name="sp:107" class="">sp</a></span> <span id="rl:108" class="id"><a name="rl:108" class="">rl</a></span> <span id="rs:109" class="id"><a name="rs:109" class="">rs</a></span> <span id="rs':110" class="id"><a name="rs':110" class="">rs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> (<span class="id"><a href="compcert.backend.Mach.html#undef_regs">Mach.undef_regs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:108">rl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:106">ms</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:107">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:109">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r':111" class="id"><a name="r':111" class="">r',</a></span> <span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':111">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_notin">preg_notin</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':111">r'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:108">rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':110">rs'#r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:109">rs#r'</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> (<span class="id"><a href="compcert.backend.Mach.html#undef_regs">Mach.undef_regs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:108">rl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:106">ms</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:107">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':110">rs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">agree_sp0</span>. <span class="id">apply</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_notin_charact">preg_notin_charact</a></span>. <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#not_eq_sym">not_eq_sym</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_not_SP">preg_of_not_SP</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In_dec">In_dec</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg_eq">mreg_eq</a></span> <span class="id">r</span> <span class="id">rl</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Mach.html#undef_regs_same">Mach.undef_regs_same</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_data">preg_of_data</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_notin_charact">preg_notin_charact</a></span>. <span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">elim</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_injective">preg_of_injective;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_set_undef_mreg" class="id"><a name="agree_set_undef_mreg" class="">agree_set_undef_mreg:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:112" class="id"><a name="ms:112" class="">ms</a></span> <span id="sp:113" class="id"><a name="sp:113" class="">sp</a></span> <span id="rs:114" class="id"><a name="rs:114" class="">rs</a></span> <span id="r:115" class="id"><a name="r:115" class="">r</a></span> <span id="v:116" class="id"><a name="v:116" class="">v</a></span> <span id="rl:117" class="id"><a name="rl:117" class="">rl</a></span> <span id="rs':118" class="id"><a name="rs':118" class="">rs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:112">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:113">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:114">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:116">v</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':118">rs'#</a></span>(<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:115">r</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r':119" class="id"><a name="r':119" class="">r',</a></span> <span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':119">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':119">r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:115">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_notin">preg_notin</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r':119">r'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:117">rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':118">rs'#r'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:114">rs#r'</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> (<span class="id"><a href="compcert.backend.Mach.html#Regmap.set">Regmap.set</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:115">r</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:116">v</a></span> (<span class="id"><a href="compcert.backend.Mach.html#undef_regs">Mach.undef_regs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rl:117">rl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:112">ms</a></span>)) <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:113">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':118">rs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree_set_mreg">agree_set_mreg</a></span> <span class="gallina-kwd">with</span> (<span class="id">rs'#</span>(<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id">r</span>) <span class="id">&lt;-</span> (<span class="id">rs#</span>(<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id">r</span>)))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree_undef_regs">agree_undef_regs</a></span> <span class="gallina-kwd">with</span> <span class="id">rs;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.set">Pregmap.set</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.x86.Asm.html#PregEq.eq">PregEq.eq</a></span> <span class="id">r'</span> (<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id">r</span>)).<br/>
&nbsp;&nbsp;<span class="id">congruence</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gso">Pregmap.gso</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_undef_caller_save_regs" class="id"><a name="agree_undef_caller_save_regs" class="">agree_undef_caller_save_regs:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:120" class="id"><a name="ms:120" class="">ms</a></span> <span id="sp:121" class="id"><a name="sp:121" class="">sp</a></span> <span id="rs:122" class="id"><a name="rs:122" class="">rs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:120">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:121">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:122">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> (<span class="id"><a href="compcert.backend.Mach.html#undef_caller_save_regs">Mach.undef_caller_save_regs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:120">ms</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:121">sp</a></span> (<span class="id"><a href="compcert.x86.Asm.html#undef_caller_save_regs">Asm.undef_caller_save_regs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:122">rs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Mach.html#undef_caller_save_regs">Mach.undef_caller_save_regs</a></span><span class="id">,</span> <span class="id"><a href="compcert.x86.Asm.html#undef_caller_save_regs">Asm.undef_caller_save_regs</a></span><span class="id">;</span> <span class="id">split</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span> <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_not_SP">preg_of_not_SP</a></span>). <br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_eq">preg_eq</a></span> (<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id">r</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#filter">List.filter</a></span> <span class="id"><a href="compcert.x86.Conventions1.html#is_callee_save">is_callee_save</a></span> <span class="id"><a href="compcert.x86.Machregs.html#all_mregs">all_mregs</a></span>)))<span class="id">;</span> <span class="id">simpl</span>.<br/>
<span class="id">+</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span> <span class="gallina-kwd">in</span> <span class="id">i</span>. <span class="id">destruct</span> <span class="id">i</span> <span class="gallina-kwd">as</span> (<span class="id">mr</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">r</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">mr</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_injective">preg_of_injective;</a></span> <span class="id">auto</span>). <span class="id">subst</span> <span class="id">mr;</span> <span class="id">clear</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#filter_In">List.filter_In</a></span> <span class="gallina-kwd">in</span> <span class="id">B</span>. <span class="id">destruct</span> <span class="id">B</span> <span class="gallina-kwd">as</span> <span class="id">[C</span> <span class="id">D]</span>. <span class="id">rewrite</span> <span class="id">D</span>. <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.x86.Conventions1.html#is_callee_save">is_callee_save</a></span> <span class="id">r</span>) <span class="id">eqn:CS;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> <span class="id">n</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map">List.in_map</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#filter_In">List.filter_In</a></span>. <span class="id">auto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.x86.Machregs.html#all_mregs_complete">all_mregs_complete</a></span>. <br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_change_sp" class="id"><a name="agree_change_sp" class="">agree_change_sp:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:123" class="id"><a name="ms:123" class="">ms</a></span> <span id="sp:124" class="id"><a name="sp:124" class="">sp</a></span> <span id="rs:125" class="id"><a name="rs:125" class="">rs</a></span> <span id="sp':126" class="id"><a name="sp':126" class="">sp',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:123">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:124">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:125">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp':126">sp'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:123">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp':126">sp'</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:125">rs#SP</a></span> <span class="id"><a href="compcert.x86.Asm.html#12783a38af0ef10e7b1cf0d1fa070648">&lt;-</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp':126">sp'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gso">Pregmap.gso</a></span><span class="id">;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">asmgen</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Connection between Mach and Asm calling conventions for external
    functions. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="extcall_arg_match" class="id"><a name="extcall_arg_match" class="">extcall_arg_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:127" class="id"><a name="ms:127" class="">ms</a></span> <span id="sp:128" class="id"><a name="sp:128" class="">sp</a></span> <span id="rs:129" class="id"><a name="rs:129" class="">rs</a></span> <span id="m:130" class="id"><a name="m:130" class="">m</a></span> <span id="m':131" class="id"><a name="m':131" class="">m'</a></span> <span id="l:132" class="id"><a name="l:132" class="">l</a></span> <span id="v:133" class="id"><a name="v:133" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:127">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:128">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:129">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:130">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':131">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Mach.html#extcall_arg">Mach.extcall_arg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:127">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:130">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:128">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#l:132">l</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:133">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v':134" class="id"><a name="v':134" class="">v',</a></span> <span class="id"><a href="compcert.x86.Asm.html#extcall_arg">Asm.extcall_arg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:129">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':131">m'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#l:132">l</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v':134">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:133">v</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v':134">v'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">rs#</span>(<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id">r</span>))<span class="id">;</span> <span class="id">split</span>. <span class="id">constructor</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_val">preg_val;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Mach.html#load_stack">load_stack</a></span> <span class="gallina-kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_extends">Mem.loadv_extends</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[v'</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#sp_val">sp_val</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="gallina-kwd">in</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">v';</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">eauto</span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="extcall_arg_pair_match" class="id"><a name="extcall_arg_pair_match" class="">extcall_arg_pair_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:135" class="id"><a name="ms:135" class="">ms</a></span> <span id="sp:136" class="id"><a name="sp:136" class="">sp</a></span> <span id="rs:137" class="id"><a name="rs:137" class="">rs</a></span> <span id="m:138" class="id"><a name="m:138" class="">m</a></span> <span id="m':139" class="id"><a name="m':139" class="">m'</a></span> <span id="p:140" class="id"><a name="p:140" class="">p</a></span> <span id="v:141" class="id"><a name="v:141" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:135">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:136">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:137">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:138">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':139">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Mach.html#extcall_arg_pair">Mach.extcall_arg_pair</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:135">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:138">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:136">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#p:140">p</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:141">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v':142" class="id"><a name="v':142" class="">v',</a></span> <span class="id"><a href="compcert.x86.Asm.html#extcall_arg_pair">Asm.extcall_arg_pair</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:137">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':139">m'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#p:140">p</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v':142">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:141">v</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v':142">v'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#extcall_arg_match">extcall_arg_match;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">v'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="gallina-kwd">exists</span> <span class="id">v';</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#extcall_arg_match">extcall_arg_match</a></span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="id">intros</span> (<span class="id">v1</span> &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#extcall_arg_match">extcall_arg_match</a></span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="id">intros</span> (<span class="id">v2</span> &amp; <span class="id">A2</span> &amp; <span class="id">B2</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.longofwords">Val.longofwords</a></span> <span class="id">v1</span> <span class="id">v2</span>)<span class="id">;</span> <span class="id">split</span>. <span class="id">constructor;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.longofwords_lessdef">Val.longofwords_lessdef</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="extcall_args_match" class="id"><a name="extcall_args_match" class="">extcall_args_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:143" class="id"><a name="ms:143" class="">ms</a></span> <span id="sp:144" class="id"><a name="sp:144" class="">sp</a></span> <span id="rs:145" class="id"><a name="rs:145" class="">rs</a></span> <span id="m:146" class="id"><a name="m:146" class="">m</a></span> <span id="m':147" class="id"><a name="m':147" class="">m',</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:143">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:144">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:145">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:146">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':147">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ll:148" class="id"><a name="ll:148" class="">ll</a></span> <span id="vl:149" class="id"><a name="vl:149" class="">vl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.backend.Mach.html#extcall_arg_pair">Mach.extcall_arg_pair</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:143">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:146">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:144">sp</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#ll:148">ll</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#vl:149">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="vl':150" class="id"><a name="vl':150" class="">vl',</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.x86.Asm.html#extcall_arg_pair">Asm.extcall_arg_pair</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:145">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':147">m'</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#ll:148">ll</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#vl':150">vl'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#vl:149">vl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#vl':150">vl'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">3;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>)<span class="id">;</span> <span class="id">split</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#extcall_arg_pair_match">extcall_arg_pair_match;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[v1'</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHlist_forall2</span> <span class="gallina-kwd">as</span> <span class="id">[vl'</span> <span class="id">[C</span> <span class="id">D]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">v1'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">vl'</span>)<span class="id">;</span> <span class="id">split;</span> <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="extcall_arguments_match" class="id"><a name="extcall_arguments_match" class="">extcall_arguments_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ms:151" class="id"><a name="ms:151" class="">ms</a></span> <span id="m:152" class="id"><a name="m:152" class="">m</a></span> <span id="m':153" class="id"><a name="m':153" class="">m'</a></span> <span id="sp:154" class="id"><a name="sp:154" class="">sp</a></span> <span id="rs:155" class="id"><a name="rs:155" class="">rs</a></span> <span id="sg:156" class="id"><a name="sg:156" class="">sg</a></span> <span id="args:157" class="id"><a name="args:157" class="">args,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:151">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:154">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:155">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:152">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':153">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Mach.html#extcall_arguments">Mach.extcall_arguments</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:151">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:152">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:154">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sg:156">sg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#args:157">args</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="args':158" class="id"><a name="args':158" class="">args',</a></span> <span class="id"><a href="compcert.x86.Asm.html#extcall_arguments">Asm.extcall_arguments</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:155">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':153">m'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sg:156">sg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#args':158">args'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#args:157">args</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#args':158">args'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Mach.html#extcall_arguments">Mach.extcall_arguments</a></span><span class="id">,</span> <span class="id"><a href="compcert.x86.Asm.html#extcall_arguments">Asm.extcall_arguments</a></span><span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#extcall_args_match">extcall_args_match;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Translation of arguments and results to builtins. </div>
<br/>
<span class="vernacular">Remark</span> <span id="builtin_arg_match" class="id"><a name="builtin_arg_match" class="">builtin_arg_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ge:159" class="id"><a name="ge:159" class="">ge</a></span> (<span id="rs:160" class="id"><a name="rs:160" class="">rs:</a></span> <span class="id"><a href="compcert.x86.Asm.html#regset">regset</a></span>) <span id="sp:161" class="id"><a name="sp:161" class="">sp</a></span> <span id="m:162" class="id"><a name="m:162" class="">m</a></span> <span id="a:163" class="id"><a name="a:163" class="">a</a></span> <span id="v:164" class="id"><a name="v:164" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ge:159">ge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:165" class="id"><a name="r:165" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:160">rs</a></span> (<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:165">r</a></span>)) <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:161">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:162">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#a:163">a</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:164">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ge:159">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:160">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:161">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:162">m</a></span> (<span class="id"><a href="compcert.common.AST.html#map_builtin_arg">map_builtin_arg</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#a:163">a</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:164">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">simpl;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="builtin_args_match" class="id"><a name="builtin_args_match" class="">builtin_args_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ge:166" class="id"><a name="ge:166" class="">ge</a></span> <span id="ms:167" class="id"><a name="ms:167" class="">ms</a></span> <span id="sp:168" class="id"><a name="sp:168" class="">sp</a></span> <span id="rs:169" class="id"><a name="rs:169" class="">rs</a></span> <span id="m:170" class="id"><a name="m:170" class="">m</a></span> <span id="m':171" class="id"><a name="m':171" class="">m',</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:167">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:168">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:169">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:170">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':171">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="al:172" class="id"><a name="al:172" class="">al</a></span> <span id="vl:173" class="id"><a name="vl:173" class="">vl,</a></span> <span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ge:166">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:167">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:168">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:170">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#al:172">al</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#vl:173">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="vl':174" class="id"><a name="vl':174" class="">vl',</a></span> <span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ge:166">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:169">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:168">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':171">m'</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="compcert.common.AST.html#map_builtin_arg">map_builtin_arg</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#al:172">al</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#vl':174">vl'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#vl:173">vl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#vl':174">vl'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">3;</span> <span class="id">intros;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>)<span class="id">;</span> <span class="id">split;</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (@<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg_lessdef">eval_builtin_arg_lessdef</a></span> <span class="id">_</span> <span class="id">ge</span> <span class="id">ms</span> (<span class="gallina-kwd">fun</span> <span id="r:176" class="id"><span id="r:175" class="id"><a name="r:176" class="">r</a></span></span> <span class="id">=&gt;</span> <span class="id">rs</span> (<span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:175">r</a></span>)))<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_val">preg_val;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">v1'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHlist_forall2</span> <span class="gallina-kwd">as</span> <span class="id">[vl'</span> <span class="id">[C</span> <span class="id">D]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">v1'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">vl'</span>)<span class="id">;</span> <span class="id">split;</span> <span class="id">constructor;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#builtin_arg_match">builtin_arg_match;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_set_res" class="id"><a name="agree_set_res" class="">agree_set_res:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="res:177" class="id"><a name="res:177" class="">res</a></span> <span id="ms:178" class="id"><a name="ms:178" class="">ms</a></span> <span id="sp:179" class="id"><a name="sp:179" class="">sp</a></span> <span id="rs:180" class="id"><a name="rs:180" class="">rs</a></span> <span id="v:181" class="id"><a name="v:181" class="">v</a></span> <span id="v':182" class="id"><a name="v':182" class="">v',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:178">ms</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:179">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:180">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:181">v</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v':182">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#agree">agree</a></span> (<span class="id"><a href="compcert.backend.Mach.html#set_res">Mach.set_res</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#res:177">res</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:181">v</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ms:178">ms</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:179">sp</a></span> (<span class="id"><a href="compcert.x86.Asm.html#set_res">Asm.set_res</a></span> (<span class="id"><a href="compcert.common.AST.html#map_builtin_res">map_builtin_res</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#res:177">res</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#v':182">v'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:180">rs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">res;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#agree_set_mreg">agree_set_mreg;</a></span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gss">Pregmap.gss</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gso">Pregmap.gso</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id">IHres2</span>. <span class="id">apply</span> <span class="id">IHres1</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword_lessdef">Val.hiword_lessdef</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.loword_lessdef">Val.loword_lessdef</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="set_res_other" class="id"><a name="set_res_other" class="">set_res_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:183" class="id"><a name="r:183" class="">r</a></span> <span id="res:184" class="id"><a name="res:184" class="">res</a></span> <span id="v:185" class="id"><a name="v:185" class="">v</a></span> <span id="rs:186" class="id"><a name="rs:186" class="">rs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#data_preg">data_preg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:183">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#set_res">set_res</a></span> (<span class="id"><a href="compcert.common.AST.html#map_builtin_res">map_builtin_res</a></span> <span class="id"><a href="compcert.x86.Asm.html#preg_of">preg_of</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#res:184">res</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:185">v</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:186">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:183">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:186">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#r:183">r</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">res;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.x86.Asm.html#Pregmap.gso">Pregmap.gso</a></span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">subst</span> <span class="id">r</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#preg_of_data">preg_of_data</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">discriminate</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">IHres2,</span> <span class="id">IHres1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Correspondence between Mach code and Asm code </h1>
<br/>
<span class="vernacular">Lemma</span> <span id="find_instr_in" class="id"><a name="find_instr_in" class="">find_instr_in:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c:187" class="id"><a name="c:187" class="">c</a></span> <span id="pos:188" class="id"><a name="pos:188" class="">pos</a></span> <span id="i:189" class="id"><a name="i:189" class="">i,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#find_instr">find_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:188">pos</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:187">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i:189">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i:189">i</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:187">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">c;</span> <span class="id">simpl</span>. <span class="id">intros;</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">i</span>. <span class="id">case</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">pos</span> <span class="id">0</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">congruence</span>. <span class="id">right;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The ``code tail'' of an instruction list <span class="bracket"><span class="id">c</span></span> is the list of instructions
  starting at PC <span class="bracket"><span class="id">pos</span></span>. </div>
<br/>
<span class="vernacular">Inductive</span> <span id="code_tail" class="id"><a name="code_tail" class="">code_tail:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#code">code</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#code">code</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="code_tail_0" class="id"><a name="code_tail_0" class="">code_tail_0:</a></span> <span class="gallina-kwd">forall</span> <span id="c:192" class="id"><a name="c:192" class="">c,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail:190">code_tail</a></span> <span class="id">0</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:192">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:192">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="code_tail_S" class="id"><a name="code_tail_S" class="">code_tail_S:</a></span> <span class="gallina-kwd">forall</span> <span id="pos:193" class="id"><a name="pos:193" class="">pos</a></span> <span id="i:194" class="id"><a name="i:194" class="">i</a></span> <span id="c1:195" class="id"><a name="c1:195" class="">c1</a></span> <span id="c2:196" class="id"><a name="c2:196" class="">c2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail:190">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:193">pos</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:195">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:196">c2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail:190">code_tail</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:193">pos</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i:194">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:195">c1</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:196">c2</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="code_tail_pos" class="id"><a name="code_tail_pos" class="">code_tail_pos:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="pos:197" class="id"><a name="pos:197" class="">pos</a></span> <span id="c1:198" class="id"><a name="c1:198" class="">c1</a></span> <span id="c2:199" class="id"><a name="c2:199" class="">c2,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:197">pos</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:198">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:199">c2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:197">pos</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1</span>. <span class="id">lia</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="find_instr_tail" class="id"><a name="find_instr_tail" class="">find_instr_tail:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c1:200" class="id"><a name="c1:200" class="">c1</a></span> <span id="i:201" class="id"><a name="i:201" class="">i</a></span> <span id="c2:202" class="id"><a name="c2:202" class="">c2</a></span> <span id="pos:203" class="id"><a name="pos:203" class="">pos,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:203">pos</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:200">c1</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i:201">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:202">c2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#find_instr">find_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:203">pos</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:200">c1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i:201">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">c1;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">pos</span> <span class="id">0</span>). <span class="id">subst</span> <span class="id">pos</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">auto</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail_pos">code_tail_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span>). <span class="id">intro</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">congruence</span>. <span class="id">replace</span> (<span class="id">pos0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="gallina-kwd">with</span> <span class="id">pos0</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="code_tail_bounds_1" class="id"><a name="code_tail_bounds_1" class="">code_tail_bounds_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fn:204" class="id"><a name="fn:204" class="">fn</a></span> <span id="ofs:205" class="id"><a name="ofs:205" class="">ofs</a></span> <span id="c:206" class="id"><a name="c:206" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:205">ofs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:204">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:206">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:205">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_length_z">list_length_z</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:204">fn</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_length_z_pos">list_length_z_pos</a></span> <span class="id">c</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_length_z_cons">list_length_z_cons</a></span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="code_tail_bounds_2" class="id"><a name="code_tail_bounds_2" class="">code_tail_bounds_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fn:207" class="id"><a name="fn:207" class="">fn</a></span> <span id="ofs:208" class="id"><a name="ofs:208" class="">ofs</a></span> <span id="i:209" class="id"><a name="i:209" class="">i</a></span> <span id="c:210" class="id"><a name="c:210" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:208">ofs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:207">fn</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i:209">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:210">c</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:208">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_length_z">list_length_z</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:207">fn</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="ofs:216" class="id"><span id="ofs:211" class="id"><a name="ofs:216" class="">ofs</a></span></span> <span id="fn:217" class="id"><span id="fn:212" class="id"><a name="fn:217" class="">fn</a></span></span> <span id="c:218" class="id"><span id="c:213" class="id"><a name="c:218" class="">c,</a></span></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:211">ofs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:212">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:213">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i:219" class="id"><span id="i:214" class="id"><a name="i:219" class="">i</a></span></span> <span id="c':220" class="id"><span id="c':215" class="id"><a name="c':220" class="">c',</a></span></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:213">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i:214">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':215">c'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:211">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_length_z">list_length_z</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:212">fn</a></span>).<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_length_z_cons">list_length_z_cons</a></span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_length_z_pos">list_length_z_pos</a></span> <span class="id">c'</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_length_z_cons">list_length_z_cons</a></span>. <span class="id">generalize</span> (<span class="id">IHcode_tail</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="code_tail_next" class="id"><a name="code_tail_next" class="">code_tail_next:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fn:221" class="id"><a name="fn:221" class="">fn</a></span> <span id="ofs:222" class="id"><a name="ofs:222" class="">ofs</a></span> <span id="i:223" class="id"><a name="i:223" class="">i</a></span> <span id="c:224" class="id"><a name="c:224" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:222">ofs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:221">fn</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i:223">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:224">c</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:222">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:221">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:224">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="ofs:230" class="id"><span id="ofs:225" class="id"><a name="ofs:230" class="">ofs</a></span></span> <span id="fn:231" class="id"><span id="fn:226" class="id"><a name="fn:231" class="">fn</a></span></span> <span id="c:232" class="id"><span id="c:227" class="id"><a name="c:232" class="">c,</a></span></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:225">ofs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:226">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:227">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i:233" class="id"><span id="i:228" class="id"><a name="i:233" class="">i</a></span></span> <span id="c':234" class="id"><span id="c':229" class="id"><a name="c':234" class="">c',</a></span></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:227">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i:228">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':229">c'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:225">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:226">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':229">c'</a></span>).<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">c</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="code_tail_next_int" class="id"><a name="code_tail_next_int" class="">code_tail_next_int:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fn:235" class="id"><a name="fn:235" class="">fn</a></span> <span id="ofs:236" class="id"><a name="ofs:236" class="">ofs</a></span> <span id="i:237" class="id"><a name="i:237" class="">i</a></span> <span id="c:238" class="id"><a name="c:238" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_length_z">list_length_z</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:235">fn</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:236">ofs</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:235">fn</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i:237">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:238">c</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:236">ofs</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span>)) <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:235">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:238">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_unsigned">Ptrofs.add_unsigned</a></span><span class="id">,</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_one">Ptrofs.unsigned_one</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail_next">code_tail_next</a></span> <span class="gallina-kwd">with</span> <span class="id">i;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail_bounds_2">code_tail_bounds_2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">transl_code_at_pc</span> <span class="id">pc</span> <span class="id">fb</span> <span class="id">f</span> <span class="id">c</span> <span class="id">ep</span> <span class="id">tf</span> <span class="id">tc</span></span> holds if the code pointer <span class="bracket"><span class="id">pc</span></span> points
  within the Asm code generated by translating Mach function <span class="bracket"><span class="id">f</span></span>,
  and <span class="bracket"><span class="id">tc</span></span> is the tail of the generated code at the position corresponding
  to the code pointer <span class="bracket"><span class="id">pc</span></span>. </div>
<br/>
<span class="vernacular">Inductive</span> <span id="transl_code_at_pc" class="id"><a name="transl_code_at_pc" class="">transl_code_at_pc</a></span> (<span id="ge:239" class="id"><a name="ge:239" class="">ge:</a></span> <span class="id"><a href="compcert.backend.Mach.html#genv">Mach.genv</a></span>)<span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#val">val</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Mach.html#function">Mach.function</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Mach.html#code">Mach.code</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#function">Asm.function</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#code">Asm.code</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span id="transl_code_at_pc_intro" class="id"><a name="transl_code_at_pc_intro" class="">transl_code_at_pc_intro:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:242" class="id"><a name="b:242" class="">b</a></span> <span id="ofs:243" class="id"><a name="ofs:243" class="">ofs</a></span> <span id="f:244" class="id"><a name="f:244" class="">f</a></span> <span id="c:245" class="id"><a name="c:245" class="">c</a></span> <span id="ep:246" class="id"><a name="ep:246" class="">ep</a></span> <span id="tf:247" class="id"><a name="tf:247" class="">tf</a></span> <span id="tc:248" class="id"><a name="tc:248" class="">tc,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ge:239">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#b:242">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:244">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asmgen.html#transf_function">transf_function</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:244">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">Errors.OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tf:247">tf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asmgen.html#transl_code">transl_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:244">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:245">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ep:246">ep</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc:248">tc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:243">ofs</a></span>) (<span class="id"><a href="compcert.x86.Asm.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tf:247">tf</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc:248">tc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#transl_code_at_pc:240">transl_code_at_pc</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ge:239">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#b:242">b</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:243">ofs</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#b:242">b</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:244">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:245">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ep:246">ep</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tf:247">tf</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc:248">tc</a></span>.<br/>
<br/>
<div class="doc">Equivalence between <span class="bracket"><span class="id">transl_code</span></span> and <span class="bracket"><span class="id">transl_code</span>'</span>. </div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="transl_code_rec_transl_code" class="id"><a name="transl_code_rec_transl_code" class="">transl_code_rec_transl_code:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:249" class="id"><a name="f:249" class="">f</a></span> <span id="il:250" class="id"><a name="il:250" class="">il</a></span> <span id="ep:251" class="id"><a name="ep:251" class="">ep</a></span> <span id="k:252" class="id"><a name="k:252" class="">k,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asmgen.html#transl_code_rec">transl_code_rec</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:249">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#il:250">il</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ep:251">ep</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:252">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Errors.html#31429f277ebd19fb111a24091d40088a">do</a></span> <span id="c:253" class="id"><a name="c:253" class="">c</a></span> <span class="id"><a href="compcert.common.Errors.html#31429f277ebd19fb111a24091d40088a">&lt;-</a></span> <span class="id"><a href="compcert.x86.Asmgen.html#transl_code">transl_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:249">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#il:250">il</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ep:251">ep;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:252">k</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:253">c</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">il;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHil</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.x86.Asmgen.html#transl_code">transl_code</a></span> <span class="id">f</span> <span class="id">il</span> (<span class="id"><a href="compcert.x86.Asmgen.html#it1_is_parent">it1_is_parent</a></span> <span class="id">ep</span> <span class="id">a</span>))<span class="id">;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="transl_code'_transl_code" class="id"><a name="transl_code'_transl_code" class="">transl_code'_transl_code:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:254" class="id"><a name="f:254" class="">f</a></span> <span id="il:255" class="id"><a name="il:255" class="">il</a></span> <span id="ep:256" class="id"><a name="ep:256" class="">ep,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asmgen.html#transl_code'">transl_code'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:254">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#il:255">il</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ep:256">ep</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.x86.Asmgen.html#transl_code">transl_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:254">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#il:255">il</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ep:256">ep</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.x86.Asmgen.html#transl_code'">transl_code'</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#transl_code_rec_transl_code">transl_code_rec_transl_code</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.x86.Asmgen.html#transl_code">transl_code</a></span> <span class="id">f</span> <span class="id">il</span> <span class="id">ep</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Predictor for return addresses in generated Asm code.
  The <span class="bracket"><span class="id">return_address_offset</span></span> predicate defined here is used in the
  semantics for Mach to determine the return addresses that are
  stored in activation records. </div>
<br/>
<div class="doc">Consider a Mach function <span class="bracket"><span class="id">f</span></span> and a sequence <span class="bracket"><span class="id">c</span></span> of Mach instructions
  representing the Mach code that remains to be executed after a
  function call returns.  The predicate <span class="bracket"><span class="id">return_address_offset</span> <span class="id">f</span> <span class="id">c</span> <span class="id">ofs</span></span>
  holds if <span class="bracket"><span class="id">ofs</span></span> is the integer offset of the PPC instruction
  following the call in the Asm code obtained by translating the
  code of <span class="bracket"><span class="id">f</span></span>. Graphically:
<pre>
     Mach function f    |--------- Mcall ---------|
         Mach code c    |                |--------|
                        |                 \        \
                        |                  \        \
                        |                   \        \
     Asm code           |                    |--------|
     Asm function       |------------- Pcall ---------|

                        &lt;-------- ofs -------&gt;</pre>
</div>
<br/>
<span class="vernacular">Definition</span> <span id="return_address_offset" class="id"><a name="return_address_offset" class="">return_address_offset</a></span> (<span id="f:257" class="id"><a name="f:257" class="">f:</a></span> <span class="id"><a href="compcert.backend.Mach.html#function">Mach.function</a></span>) (<span id="c:258" class="id"><a name="c:258" class="">c:</a></span> <span class="id"><a href="compcert.backend.Mach.html#code">Mach.code</a></span>) (<span id="ofs:259" class="id"><a name="ofs:259" class="">ofs:</a></span> <span class="id"><a href="compcert.lib.Integers.html#ptrofs">ptrofs</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="tf:260" class="id"><a name="tf:260" class="">tf</a></span> <span id="tc:261" class="id"><a name="tc:261" class="">tc,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asmgen.html#transf_function">transf_function</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:257">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tf:260">tf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asmgen.html#transl_code">transl_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:257">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:258">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc:261">tc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:259">ofs</a></span>) (<span class="id"><a href="compcert.x86.Asm.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tf:260">tf</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc:261">tc</a></span>.<br/>
<br/>
<div class="doc">We now show that such an offset always exists if the Mach code <span class="bracket"><span class="id">c</span></span>
  is a suffix of <span class="bracket"><span class="id">f</span>.(<span class="id">fn_code</span>)</span>.  This holds because the translation
  from Mach to PPC is compositional: each Mach instruction becomes
  zero, one or several PPC instructions, but the order of instructions
  is preserved. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="is_tail_code_tail" class="id"><a name="is_tail_code_tail" class="">is_tail_code_tail:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c1:262" class="id"><a name="c1:262" class="">c1</a></span> <span id="c2:263" class="id"><a name="c2:263" class="">c2,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail">is_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:262">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:263">c2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="ofs:264" class="id"><a name="ofs:264" class="">ofs,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:264">ofs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:263">c2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:262">c1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1</span>. <span class="gallina-kwd">exists</span> <span class="id">0;</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHis_tail</span> <span class="gallina-kwd">as</span> <span class="id">[ofs</span> <span class="id">CT]</span>. <span class="gallina-kwd">exists</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>)<span class="id">;</span> <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="RETADDR_EXISTS" class="id"><a name="RETADDR_EXISTS" class="">RETADDR_EXISTS</a></span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="RETADDR_EXISTS.transl_instr_tail" class="id"><a name="RETADDR_EXISTS.transl_instr_tail" class="">transl_instr_tail:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:265" class="id"><a name="f:265" class="">f</a></span> <span id="i:266" class="id"><a name="i:266" class="">i</a></span> <span id="ep:267" class="id"><a name="ep:267" class="">ep</a></span> <span id="k:268" class="id"><a name="k:268" class="">k</a></span> <span id="c:269" class="id"><a name="c:269" class="">c,</a></span> <span class="id"><a href="compcert.x86.Asmgen.html#transl_instr">transl_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:265">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i:266">i</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ep:267">ep</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:268">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:269">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail">is_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:268">k</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:269">c</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="RETADDR_EXISTS.transf_function_inv" class="id"><a name="RETADDR_EXISTS.transf_function_inv" class="">transf_function_inv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:271" class="id"><a name="f:271" class="">f</a></span> <span id="tf:272" class="id"><a name="tf:272" class="">tf,</a></span> <span class="id"><a href="compcert.x86.Asmgen.html#transf_function">transf_function</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:271">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tf:272">tf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="tc:273" class="id"><a name="tc:273" class="">tc,</a></span> <span class="gallina-kwd">exists</span> <span id="ep:274" class="id"><a name="ep:274" class="">ep,</a></span> <span class="id"><a href="compcert.x86.Asmgen.html#transl_code">transl_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:271">f</a></span> (<span class="id"><a href="compcert.backend.Mach.html#fn_code">Mach.fn_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:271">f</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#ep:274">ep</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc:273">tc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail">is_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc:273">tc</a></span> (<span class="id"><a href="compcert.x86.Asm.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tf:272">tf</a></span>).<br/>
<span class="vernacular">Hypothesis</span> <span id="RETADDR_EXISTS.transf_function_len" class="id"><a name="RETADDR_EXISTS.transf_function_len" class="">transf_function_len:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:276" class="id"><a name="f:276" class="">f</a></span> <span id="tf:277" class="id"><a name="tf:277" class="">tf,</a></span> <span class="id"><a href="compcert.x86.Asmgen.html#transf_function">transf_function</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:276">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tf:277">tf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_length_z">list_length_z</a></span> (<span class="id"><a href="compcert.x86.Asm.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tf:277">tf</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="transl_code_tail" class="id"><a name="transl_code_tail" class="">transl_code_tail:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:279" class="id"><a name="f:279" class="">f</a></span> <span id="c1:280" class="id"><a name="c1:280" class="">c1</a></span> <span id="c2:281" class="id"><a name="c2:281" class="">c2,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail">is_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:280">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:281">c2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="tc2:282" class="id"><a name="tc2:282" class="">tc2</a></span> <span id="ep2:283" class="id"><a name="ep2:283" class="">ep2,</a></span> <span class="id"><a href="compcert.x86.Asmgen.html#transl_code">transl_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:279">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:281">c2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ep2:283">ep2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc2:282">tc2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="tc1:284" class="id"><a name="tc1:284" class="">tc1,</a></span> <span class="gallina-kwd">exists</span> <span id="ep1:285" class="id"><a name="ep1:285" class="">ep1,</a></span> <span class="id"><a href="compcert.x86.Asmgen.html#transl_code">transl_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:279">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:280">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ep1:285">ep1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc1:284">tc1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail">is_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc1:284">tc1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc2:282">tc2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">tc2;</span> <span class="gallina-kwd">exists</span> <span class="id">ep2;</span> <span class="id">split;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">IHis_tail;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[tc1</span> <span class="id">[ep1</span> <span class="id">[A</span> <span class="id">B]]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">tc1;</span> <span class="gallina-kwd">exists</span> <span class="id">ep1;</span> <span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail_trans">is_tail_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">x</span>. <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#RETADDR_EXISTS.transl_instr_tail">transl_instr_tail;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="return_address_exists" class="id"><a name="return_address_exists" class="">return_address_exists:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:286" class="id"><a name="f:286" class="">f</a></span> <span id="sg:287" class="id"><a name="sg:287" class="">sg</a></span> <span id="ros:288" class="id"><a name="ros:288" class="">ros</a></span> <span id="c:289" class="id"><a name="c:289" class="">c,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail">is_tail</a></span> (<span class="id"><a href="compcert.backend.Mach.html#Mcall">Mcall</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sg:287">sg</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ros:288">ros</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:289">c</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:286">f</a></span>.(<span class="id"><a href="compcert.backend.Mach.html#fn_code">Mach.fn_code</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="ra:290" class="id"><a name="ra:290" class="">ra,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#return_address_offset">return_address_offset</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:286">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:289">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ra:290">ra</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.x86.Asmgen.html#transf_function">transf_function</a></span> <span class="id">f</span>) <span class="gallina-kwd">as</span> <span class="id">[tf|]</span> <span class="id">eqn:TF</span>.<br/>
<span class="id">+</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#RETADDR_EXISTS.transf_function_inv">transf_function_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">tc1</span> &amp; <span class="id">ep1</span> &amp; <span class="id">TR1</span> &amp; <span class="id">TL1</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#transl_code_tail">transl_code_tail;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">tc2</span> &amp; <span class="id">ep2</span> &amp; <span class="id">TR2</span> &amp; <span class="id">TL2</span>).<br/>
<span class="vernacular">Opaque</span> <span class="id"><a href="compcert.x86.Asmgen.html#transl_instr">transl_instr</a></span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR2</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">TL3:</span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail">is_tail</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.x86.Asm.html#fn_code">fn_code</a></span> <span class="id">tf</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail_trans">is_tail_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">tc1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail_trans">is_tail_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">tc2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#RETADDR_EXISTS.transl_instr_tail">transl_instr_tail;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#is_tail_code_tail">is_tail_code_tail</a></span>. <span class="id">eexact</span> <span class="id">TL3</span>. <span class="id">intros</span> <span class="id">[ofs</span> <span class="id">CT]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">ofs</span>). <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail_bounds_1">code_tail_bounds_1;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#RETADDR_EXISTS.transf_function_len">transf_function_len</a></span> <span class="gallina-kwd">in</span> <span class="id">TF</span>. <span class="id">lia</span>.<br/>
<span class="id">+</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span><span class="id">;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#RETADDR_EXISTS">RETADDR_EXISTS</a></span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="code_tail_no_bigger" class="id"><a name="code_tail_no_bigger" class="">code_tail_no_bigger:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="pos:291" class="id"><a name="pos:291" class="">pos</a></span> <span id="c1:292" class="id"><a name="c1:292" class="">c1</a></span> <span id="c2:293" class="id"><a name="c2:293" class="">c2,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:291">pos</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:292">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:293">c2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:293">c2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:292">c1</a></span>)%<span class="id">nat</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">simpl;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="code_tail_unique" class="id"><a name="code_tail_unique" class="">code_tail_unique:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fn:294" class="id"><a name="fn:294" class="">fn</a></span> <span id="c:295" class="id"><a name="c:295" class="">c</a></span> <span id="pos:296" class="id"><a name="pos:296" class="">pos</a></span> <span id="pos':297" class="id"><a name="pos':297" class="">pos',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:296">pos</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:294">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:295">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos':297">pos'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fn:294">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:295">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:296">pos</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos':297">pos'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">fn;</span> <span class="id">intros</span> <span class="id">until</span> <span class="id">pos';</span> <span class="id">intros</span> <span class="id">ITA</span> <span class="id">CT;</span> <span class="id">inv</span> <span class="id">ITA;</span> <span class="id">inv</span> <span class="id">CT;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail_no_bigger">code_tail_no_bigger</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>)<span class="id">;</span> <span class="id">simpl;</span> <span class="id">intro;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail_no_bigger">code_tail_no_bigger</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>)<span class="id">;</span> <span class="id">simpl;</span> <span class="id">intro;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">f_equal</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="return_address_offset_correct" class="id"><a name="return_address_offset_correct" class="">return_address_offset_correct:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ge:298" class="id"><a name="ge:298" class="">ge</a></span> <span id="b:299" class="id"><a name="b:299" class="">b</a></span> <span id="ofs:300" class="id"><a name="ofs:300" class="">ofs</a></span> <span id="fb:301" class="id"><a name="fb:301" class="">fb</a></span> <span id="f:302" class="id"><a name="f:302" class="">f</a></span> <span id="c:303" class="id"><a name="c:303" class="">c</a></span> <span id="tf:304" class="id"><a name="tf:304" class="">tf</a></span> <span id="tc:305" class="id"><a name="tc:305" class="">tc</a></span> <span id="ofs':306" class="id"><a name="ofs':306" class="">ofs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#transl_code_at_pc">transl_code_at_pc</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ge:298">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#b:299">b</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:300">ofs</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#fb:301">fb</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:302">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:303">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tf:304">tf</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc:305">tc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#return_address_offset">return_address_offset</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:302">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:303">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs':306">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs':306">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:300">ofs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail_unique">code_tail_unique</a></span>. <span class="id">eexact</span> <span class="id">H12</span>. <span class="id">eapply</span> <span class="id">H0;</span> <span class="id">eauto</span>. <span class="id">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr_unsigned">Ptrofs.repr_unsigned</a></span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr_unsigned">Ptrofs.repr_unsigned</a></span> <span class="id">ofs'</span>).<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The <span class="bracket"><span class="id">find_label</span></span> function returns the code tail starting at the
  given label.  A connection with <span class="bracket"><span class="id">code_tail</span></span> is then established. </div>
<br/>
<span class="vernacular">Fixpoint</span> <span id="find_label" class="id"><a name="find_label" class="">find_label</a></span> (<span id="lbl:307" class="id"><a name="lbl:307" class="">lbl:</a></span> <span class="id"><a href="compcert.x86.Asm.html#label">label</a></span>) (<span id="c:308" class="id"><a name="c:308" class="">c:</a></span> <span class="id"><a href="compcert.x86.Asm.html#code">code</a></span>) <span class="id">{struct</span> <span class="id">c}</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.x86.Asm.html#code">code</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:308">c</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">instr</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">c'</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86.Asm.html#is_label">is_label</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#lbl:307">lbl</a></span> <span class="id">instr</span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">c'</span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#find_label:309">find_label</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#lbl:307">lbl</a></span> <span class="id">c'</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="label_pos_code_tail" class="id"><a name="label_pos_code_tail" class="">label_pos_code_tail:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="lbl:311" class="id"><a name="lbl:311" class="">lbl</a></span> <span id="c:312" class="id"><a name="c:312" class="">c</a></span> <span id="pos:313" class="id"><a name="pos:313" class="">pos</a></span> <span id="c':314" class="id"><a name="c':314" class="">c',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#find_label">find_label</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#lbl:311">lbl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:312">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':314">c'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="pos':315" class="id"><a name="pos':315" class="">pos',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#label_pos">label_pos</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#lbl:311">lbl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:313">pos</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:312">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos':315">pos'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#pos':315">pos'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:313">pos</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:312">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':314">c'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:313">pos</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#3e2cc3b784fd1c5341d23eca6b98405f">&lt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos':315">pos'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#3e2cc3b784fd1c5341d23eca6b98405f">&lt;=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#pos:313">pos</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_length_z">list_length_z</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:312">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">c</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span> <span class="id">until</span> <span class="id">c'</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="compcert.x86.Asm.html#is_label">is_label</a></span> <span class="id">lbl</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="id">intro</span> <span class="id">EQ;</span> <span class="id">injection</span> <span class="id">EQ;</span> <span class="id">intro;</span> <span class="id">subst</span> <span class="id">c'</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">pos</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>). <span class="id">split</span>. <span class="id">auto</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">pos</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">pos</span>) <span class="gallina-kwd">with</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_length_z_cons">list_length_z_cons</a></span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_length_z_pos">list_length_z_pos</a></span> <span class="id">c</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">generalize</span> (<span class="id">IHc</span> (<span class="id">pos</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id">c'</span> <span class="id">H</span>). <span class="id">intros</span> <span class="id">[pos'</span> <span class="id">[A</span> <span class="id">[B</span> <span class="id">C]]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">pos'</span>. <span class="id">split</span>. <span class="id">auto</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">pos'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">pos</span>) <span class="gallina-kwd">with</span> ((<span class="id">pos'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> (<span class="id">pos</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>)) <span class="id">+</span> <span class="id">1</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_length_z_cons">list_length_z_cons</a></span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Helper lemmas to reason about
<ul>
<li>
 the "code is tail of" property
</li>
<li>
 correct translation of labels. </li>
</ul>
</div>
<br/>
<span class="vernacular">Definition</span> <span id="tail_nolabel" class="id"><a name="tail_nolabel" class="">tail_nolabel</a></span> (<span id="k:316" class="id"><a name="k:316" class="">k</a></span> <span id="c:317" class="id"><a name="c:317" class="">c:</a></span> <span class="id"><a href="compcert.x86.Asm.html#code">code</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#is_tail">is_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:316">k</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:317">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="gallina-kwd">forall</span> <span id="lbl:318" class="id"><a name="lbl:318" class="">lbl,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#find_label">find_label</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#lbl:318">lbl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:317">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#find_label">find_label</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#lbl:318">lbl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:316">k</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="tail_nolabel_refl" class="id"><a name="tail_nolabel_refl" class="">tail_nolabel_refl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c:319" class="id"><a name="c:319" class="">c,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tail_nolabel">tail_nolabel</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:319">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:319">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail_refl">is_tail_refl</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="tail_nolabel_trans" class="id"><a name="tail_nolabel_trans" class="">tail_nolabel_trans:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c1:320" class="id"><a name="c1:320" class="">c1</a></span> <span id="c2:321" class="id"><a name="c2:321" class="">c2</a></span> <span id="c3:322" class="id"><a name="c3:322" class="">c3,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tail_nolabel">tail_nolabel</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:321">c2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c3:322">c3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tail_nolabel">tail_nolabel</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:320">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:321">c2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tail_nolabel">tail_nolabel</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:320">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c3:322">c3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H;</span> <span class="id">destruct</span> <span class="id">H0;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail_trans">is_tail_trans;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="nolabel" class="id"><a name="nolabel" class="">nolabel</a></span> (<span id="i:323" class="id"><a name="i:323" class="">i:</a></span> <span class="id"><a href="compcert.x86.Asm.html#instruction">instruction</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i:323">i</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.x86.Asm.html#Plabel">Plabel</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> <span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Extern</span> <span class="id">1</span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#nolabel">nolabel</a></span> <span class="id">_</span>) <span class="id">=&gt;</span> <span class="id">exact</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span> <span class="id">:</span> <span class="id">labels</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="tail_nolabel_cons" class="id"><a name="tail_nolabel_cons" class="">tail_nolabel_cons:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i:325" class="id"><a name="i:325" class="">i</a></span> <span id="c:326" class="id"><a name="c:326" class="">c</a></span> <span id="k:327" class="id"><a name="k:327" class="">k,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#nolabel">nolabel</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i:325">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tail_nolabel">tail_nolabel</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:327">k</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:326">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tail_nolabel">tail_nolabel</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:327">k</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i:325">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:326">c</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H1</span>. <span class="id">destruct</span> <span class="id">i;</span> <span class="id">reflexivity</span> <span class="id">||</span> <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">tail_nolabel_refl:</span> <span class="id">labels</span>.<br/>
<br/>
<span class="vernacular">Ltac</span> <span class="id">TailNoLabel</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">labels;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">goal</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">|-</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tail_nolabel">tail_nolabel</a></span> <span class="id">_</span> (<span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">_</span>) <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tail_nolabel_cons">tail_nolabel_cons;</a></span> <span class="id">[auto;</span> <span class="id">exact</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span> <span class="id">|</span> <span class="id">TailNoLabel]</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">H:</span> <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">_</span> <span class="id">|-</span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">discriminate</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">H:</span> <span class="id"><a href="compcert.common.Errors.html#assertion_failed">assertion_failed</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">_</span> <span class="id">|-</span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">discriminate</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">H:</span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">_</span> <span class="id">|-</span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">TailNoLabel</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">H:</span> <span class="id"><a href="compcert.common.Errors.html#bind">bind</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">_</span> <span class="id">|-</span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">monadInv</span> <span class="id">H;</span>  <span class="id">TailNoLabel</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">H:</span> (<span class="gallina-kwd">if</span> <span class="id">?x</span> <span class="gallina-kwd">then</span> <span class="id">_</span> <span class="gallina-kwd">else</span> <span class="id">_</span>) <span class="id">=</span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">_</span> <span class="id">|-</span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">destruct</span> <span class="id">x;</span> <span class="id">TailNoLabel</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">H:</span> <span class="gallina-kwd">match</span> <span class="id">?x</span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id">_</span> <span class="id">|</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">_</span> <span class="gallina-kwd">end</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">_</span> <span class="id">|-</span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">destruct</span> <span class="id">x;</span> <span class="id">TailNoLabel</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="tail_nolabel_find_label" class="id"><a name="tail_nolabel_find_label" class="">tail_nolabel_find_label:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="lbl:328" class="id"><a name="lbl:328" class="">lbl</a></span> <span id="k:329" class="id"><a name="k:329" class="">k</a></span> <span id="c:330" class="id"><a name="c:330" class="">c,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tail_nolabel">tail_nolabel</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:329">k</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:330">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#find_label">find_label</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#lbl:328">lbl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:330">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#find_label">find_label</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#lbl:328">lbl</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:329">k</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="tail_nolabel_is_tail" class="id"><a name="tail_nolabel_is_tail" class="">tail_nolabel_is_tail:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="k:331" class="id"><a name="k:331" class="">k</a></span> <span id="c:332" class="id"><a name="c:332" class="">c,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tail_nolabel">tail_nolabel</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:331">k</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:332">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#is_tail">is_tail</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#k:331">k</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:332">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Execution of straight-line code </h1>
<br/>
<span class="vernacular">Section</span> <span id="STRAIGHTLINE" class="id"><a name="STRAIGHTLINE" class="">STRAIGHTLINE</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="STRAIGHTLINE.ge" class="id"><a name="STRAIGHTLINE.ge" class="">ge:</a></span> <span class="id"><a href="compcert.x86.Asm.html#genv">genv</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="STRAIGHTLINE.fn" class="id"><a name="STRAIGHTLINE.fn" class="">fn:</a></span> <span class="id"><a href="compcert.x86.Asm.html#function">function</a></span>.<br/>
<br/>
<div class="doc">Straight-line code is composed of processor instructions that execute
  in sequence (no branches, no function calls and returns).
  The following inductive predicate relates the machine states
  before and after executing a straight-line sequence of instructions.
  Instructions are taken from the first list instead of being fetched
  from memory. </div>
<br/>
<span class="vernacular">Inductive</span> <span id="exec_straight" class="id"><a name="exec_straight" class="">exec_straight:</a></span> <span class="id"><a href="compcert.x86.Asm.html#code">code</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#regset">regset</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#code">code</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#regset">regset</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="exec_straight_one" class="id"><a name="exec_straight_one" class="">exec_straight_one:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i1:337" class="id"><a name="i1:337" class="">i1</a></span> <span id="c:338" class="id"><a name="c:338" class="">c</a></span> <span id="rs1:339" class="id"><a name="rs1:339" class="">rs1</a></span> <span id="m1:340" class="id"><a name="m1:340" class="">m1</a></span> <span id="rs2:341" class="id"><a name="rs2:341" class="">rs2</a></span> <span id="m2:342" class="id"><a name="m2:342" class="">m2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_instr">exec_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i1:337">i1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:339">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:340">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="vernacular">Next</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:341">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:342">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:341">rs2#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:339">rs1#PC</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight:335">exec_straight</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i1:337">i1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:338">c</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:339">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:340">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:338">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:341">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:342">m2</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="exec_straight_step" class="id"><a name="exec_straight_step" class="">exec_straight_step:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i:343" class="id"><a name="i:343" class="">i</a></span> <span id="c:344" class="id"><a name="c:344" class="">c</a></span> <span id="rs1:345" class="id"><a name="rs1:345" class="">rs1</a></span> <span id="m1:346" class="id"><a name="m1:346" class="">m1</a></span> <span id="rs2:347" class="id"><a name="rs2:347" class="">rs2</a></span> <span id="m2:348" class="id"><a name="m2:348" class="">m2</a></span> <span id="c':349" class="id"><a name="c':349" class="">c'</a></span> <span id="rs3:350" class="id"><a name="rs3:350" class="">rs3</a></span> <span id="m3:351" class="id"><a name="m3:351" class="">m3,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_instr">exec_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i:343">i</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:345">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:346">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="vernacular">Next</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:347">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:348">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:347">rs2#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:345">rs1#PC</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight:335">exec_straight</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:344">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:347">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:348">m2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':349">c'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:350">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:351">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight:335">exec_straight</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i:343">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:344">c</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:345">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:346">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':349">c'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:350">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:351">m3</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="exec_straight_trans" class="id"><a name="exec_straight_trans" class="">exec_straight_trans:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c1:352" class="id"><a name="c1:352" class="">c1</a></span> <span id="rs1:353" class="id"><a name="rs1:353" class="">rs1</a></span> <span id="m1:354" class="id"><a name="m1:354" class="">m1</a></span> <span id="c2:355" class="id"><a name="c2:355" class="">c2</a></span> <span id="rs2:356" class="id"><a name="rs2:356" class="">rs2</a></span> <span id="m2:357" class="id"><a name="m2:357" class="">m2</a></span> <span id="c3:358" class="id"><a name="c3:358" class="">c3</a></span> <span id="rs3:359" class="id"><a name="rs3:359" class="">rs3</a></span> <span id="m3:360" class="id"><a name="m3:360" class="">m3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:352">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:353">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:354">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:355">c2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:356">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:357">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:355">c2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:356">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:357">m2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c3:358">c3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:359">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:360">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:352">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:353">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:354">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c3:358">c3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:359">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:360">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_step">exec_straight_step</a></span> <span class="gallina-kwd">with</span> <span class="id">rs2</span> <span class="id">m2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_step">exec_straight_step</a></span> <span class="gallina-kwd">with</span> <span class="id">rs2</span> <span class="id">m2;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="exec_straight_two" class="id"><a name="exec_straight_two" class="">exec_straight_two:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i1:361" class="id"><a name="i1:361" class="">i1</a></span> <span id="i2:362" class="id"><a name="i2:362" class="">i2</a></span> <span id="c:363" class="id"><a name="c:363" class="">c</a></span> <span id="rs1:364" class="id"><a name="rs1:364" class="">rs1</a></span> <span id="m1:365" class="id"><a name="m1:365" class="">m1</a></span> <span id="rs2:366" class="id"><a name="rs2:366" class="">rs2</a></span> <span id="m2:367" class="id"><a name="m2:367" class="">m2</a></span> <span id="rs3:368" class="id"><a name="rs3:368" class="">rs3</a></span> <span id="m3:369" class="id"><a name="m3:369" class="">m3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_instr">exec_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i1:361">i1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:364">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:365">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="vernacular">Next</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:366">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:367">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_instr">exec_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i2:362">i2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:366">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:367">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="vernacular">Next</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:368">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:369">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:366">rs2#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:364">rs1#PC</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:368">rs3#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:366">rs2#PC</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i1:361">i1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i2:362">i2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:363">c</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:364">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:365">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:363">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:368">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:369">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_step">exec_straight_step</a></span> <span class="gallina-kwd">with</span> <span class="id">rs2</span> <span class="id">m2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_one">exec_straight_one;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="exec_straight_three" class="id"><a name="exec_straight_three" class="">exec_straight_three:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i1:370" class="id"><a name="i1:370" class="">i1</a></span> <span id="i2:371" class="id"><a name="i2:371" class="">i2</a></span> <span id="i3:372" class="id"><a name="i3:372" class="">i3</a></span> <span id="c:373" class="id"><a name="c:373" class="">c</a></span> <span id="rs1:374" class="id"><a name="rs1:374" class="">rs1</a></span> <span id="m1:375" class="id"><a name="m1:375" class="">m1</a></span> <span id="rs2:376" class="id"><a name="rs2:376" class="">rs2</a></span> <span id="m2:377" class="id"><a name="m2:377" class="">m2</a></span> <span id="rs3:378" class="id"><a name="rs3:378" class="">rs3</a></span> <span id="m3:379" class="id"><a name="m3:379" class="">m3</a></span> <span id="rs4:380" class="id"><a name="rs4:380" class="">rs4</a></span> <span id="m4:381" class="id"><a name="m4:381" class="">m4,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_instr">exec_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i1:370">i1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:374">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:375">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="vernacular">Next</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:376">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:377">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_instr">exec_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i2:371">i2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:376">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:377">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="vernacular">Next</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:378">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:379">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_instr">exec_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i3:372">i3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:378">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:379">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="vernacular">Next</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs4:380">rs4</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m4:381">m4</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:376">rs2#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:374">rs1#PC</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:378">rs3#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:376">rs2#PC</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs4:380">rs4#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:378">rs3#PC</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i1:370">i1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i2:371">i2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i3:372">i3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:373">c</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:374">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:375">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:373">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs4:380">rs4</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m4:381">m4</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_step">exec_straight_step</a></span> <span class="gallina-kwd">with</span> <span class="id">rs2</span> <span class="id">m2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_two">exec_straight_two;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The following lemmas show that straight-line executions
  (predicate <span class="bracket"><span class="id">exec_straight</span></span>) correspond to correct Asm executions. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="exec_straight_steps_1" class="id"><a name="exec_straight_steps_1" class="">exec_straight_steps_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c:382" class="id"><a name="c:382" class="">c</a></span> <span id="rs:383" class="id"><a name="rs:383" class="">rs</a></span> <span id="m:384" class="id"><a name="m:384" class="">m</a></span> <span id="c':385" class="id"><a name="c':385" class="">c'</a></span> <span id="rs':386" class="id"><a name="rs':386" class="">rs'</a></span> <span id="m':387" class="id"><a name="m':387" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:382">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:383">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:384">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':385">c'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':386">rs'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':387">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_length_z">list_length_z</a></span> (<span class="id"><a href="compcert.x86.Asm.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:388" class="id"><a name="b:388" class="">b</a></span> <span id="ofs:389" class="id"><a name="ofs:389" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:383">rs#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#b:388">b</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:389">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#b:388">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:389">ofs</a></span>) (<span class="id"><a href="compcert.x86.Asm.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:382">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.x86.Asm.html#step">step</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> (<span class="id"><a href="compcert.x86.Asm.html#State">State</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:383">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:384">m</a></span>) <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.x86.Asm.html#State">State</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':386">rs'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':387">m'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#find_instr_tail">find_instr_tail</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left'">plus_left'</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#find_instr_tail">find_instr_tail</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHexec_straight</span> <span class="gallina-kwd">with</span> <span class="id">b</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span>).<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id">H3</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail_next_int">code_tail_next_int</a></span> <span class="gallina-kwd">with</span> <span class="id">i;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="exec_straight_steps_2" class="id"><a name="exec_straight_steps_2" class="">exec_straight_steps_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c:390" class="id"><a name="c:390" class="">c</a></span> <span id="rs:391" class="id"><a name="rs:391" class="">rs</a></span> <span id="m:392" class="id"><a name="m:392" class="">m</a></span> <span id="c':393" class="id"><a name="c':393" class="">c'</a></span> <span id="rs':394" class="id"><a name="rs':394" class="">rs'</a></span> <span id="m':395" class="id"><a name="m':395" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:390">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:391">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:392">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':393">c'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':394">rs'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m':395">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_length_z">list_length_z</a></span> (<span class="id"><a href="compcert.x86.Asm.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:396" class="id"><a name="b:396" class="">b</a></span> <span id="ofs:397" class="id"><a name="ofs:397" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:391">rs#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#b:396">b</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:397">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#b:396">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs:397">ofs</a></span>) (<span class="id"><a href="compcert.x86.Asm.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:390">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="ofs':398" class="id"><a name="ofs':398" class="">ofs',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs':394">rs'#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#b:396">b</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs':398">ofs'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail">code_tail</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ofs':398">ofs'</a></span>) (<span class="id"><a href="compcert.x86.Asm.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':393">c'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span>). <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id">H2</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail_next_int">code_tail_next_int</a></span> <span class="gallina-kwd">with</span> <span class="id">i1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHexec_straight</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span>).<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id">H3</span>. <span class="id">reflexivity</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#code_tail_next_int">code_tail_next_int</a></span> <span class="gallina-kwd">with</span> <span class="id">i;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">A variant that supports zero steps of execution </div>
<br/>
<span class="vernacular">Inductive</span> <span id="exec_straight_opt" class="id"><a name="exec_straight_opt" class="">exec_straight_opt:</a></span> <span class="id"><a href="compcert.x86.Asm.html#code">code</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#regset">regset</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#code">code</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86.Asm.html#regset">regset</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="exec_straight_opt_refl" class="id"><a name="exec_straight_opt_refl" class="">exec_straight_opt_refl:</a></span> <span class="gallina-kwd">forall</span> <span id="c:401" class="id"><a name="c:401" class="">c</a></span> <span id="rs:402" class="id"><a name="rs:402" class="">rs</a></span> <span id="m:403" class="id"><a name="m:403" class="">m,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_opt:399">exec_straight_opt</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:401">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:402">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:403">m</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:401">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs:402">rs</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m:403">m</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="exec_straight_opt_intro" class="id"><a name="exec_straight_opt_intro" class="">exec_straight_opt_intro:</a></span> <span class="gallina-kwd">forall</span> <span id="c1:404" class="id"><a name="c1:404" class="">c1</a></span> <span id="rs1:405" class="id"><a name="rs1:405" class="">rs1</a></span> <span id="m1:406" class="id"><a name="m1:406" class="">m1</a></span> <span id="c2:407" class="id"><a name="c2:407" class="">c2</a></span> <span id="rs2:408" class="id"><a name="rs2:408" class="">rs2</a></span> <span id="m2:409" class="id"><a name="m2:409" class="">m2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:404">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:405">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:406">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:407">c2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:408">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:409">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_opt:399">exec_straight_opt</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:404">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:405">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:406">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:407">c2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:408">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:409">m2</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="exec_straight_opt_left" class="id"><a name="exec_straight_opt_left" class="">exec_straight_opt_left:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c3:410" class="id"><a name="c3:410" class="">c3</a></span> <span id="rs3:411" class="id"><a name="rs3:411" class="">rs3</a></span> <span id="m3:412" class="id"><a name="m3:412" class="">m3</a></span> <span id="c1:413" class="id"><a name="c1:413" class="">c1</a></span> <span id="rs1:414" class="id"><a name="rs1:414" class="">rs1</a></span> <span id="m1:415" class="id"><a name="m1:415" class="">m1</a></span> <span id="c2:416" class="id"><a name="c2:416" class="">c2</a></span> <span id="rs2:417" class="id"><a name="rs2:417" class="">rs2</a></span> <span id="m2:418" class="id"><a name="m2:418" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:413">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:414">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:415">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:416">c2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:417">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:418">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_opt">exec_straight_opt</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:416">c2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:417">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:418">m2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c3:410">c3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:411">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:412">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:413">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:414">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:415">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c3:410">c3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:411">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:412">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">2;</span> <span class="id">intros</span>. <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_trans">exec_straight_trans;</a></span> <span class="id">eauto</span>. <br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="exec_straight_opt_right" class="id"><a name="exec_straight_opt_right" class="">exec_straight_opt_right:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c3:419" class="id"><a name="c3:419" class="">c3</a></span> <span id="rs3:420" class="id"><a name="rs3:420" class="">rs3</a></span> <span id="m3:421" class="id"><a name="m3:421" class="">m3</a></span> <span id="c1:422" class="id"><a name="c1:422" class="">c1</a></span> <span id="rs1:423" class="id"><a name="rs1:423" class="">rs1</a></span> <span id="m1:424" class="id"><a name="m1:424" class="">m1</a></span> <span id="c2:425" class="id"><a name="c2:425" class="">c2</a></span> <span id="rs2:426" class="id"><a name="rs2:426" class="">rs2</a></span> <span id="m2:427" class="id"><a name="m2:427" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_opt">exec_straight_opt</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:422">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:423">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:424">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:425">c2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:426">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:427">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c2:425">c2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:426">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:427">m2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c3:419">c3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:420">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:421">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c1:422">c1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:423">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:424">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c3:419">c3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:420">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:421">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">1;</span> <span class="id">intros</span>. <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_trans">exec_straight_trans;</a></span> <span class="id">eauto</span>. <br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="exec_straight_opt_step" class="id"><a name="exec_straight_opt_step" class="">exec_straight_opt_step:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i:428" class="id"><a name="i:428" class="">i</a></span> <span id="c:429" class="id"><a name="c:429" class="">c</a></span> <span id="rs1:430" class="id"><a name="rs1:430" class="">rs1</a></span> <span id="m1:431" class="id"><a name="m1:431" class="">m1</a></span> <span id="rs2:432" class="id"><a name="rs2:432" class="">rs2</a></span> <span id="m2:433" class="id"><a name="m2:433" class="">m2</a></span> <span id="c':434" class="id"><a name="c':434" class="">c'</a></span> <span id="rs3:435" class="id"><a name="rs3:435" class="">rs3</a></span> <span id="m3:436" class="id"><a name="m3:436" class="">m3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_instr">exec_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i:428">i</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:430">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:431">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="vernacular">Next</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:432">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:433">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:432">rs2#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:430">rs1#PC</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_opt">exec_straight_opt</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:429">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:432">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:433">m2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':434">c'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:435">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:436">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight">exec_straight</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i:428">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:429">c</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:430">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:431">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':434">c'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:435">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:436">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1</span>. <br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_one">exec_straight_one;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_step">exec_straight_step;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="exec_straight_opt_step_opt" class="id"><a name="exec_straight_opt_step_opt" class="">exec_straight_opt_step_opt:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i:437" class="id"><a name="i:437" class="">i</a></span> <span id="c:438" class="id"><a name="c:438" class="">c</a></span> <span id="rs1:439" class="id"><a name="rs1:439" class="">rs1</a></span> <span id="m1:440" class="id"><a name="m1:440" class="">m1</a></span> <span id="rs2:441" class="id"><a name="rs2:441" class="">rs2</a></span> <span id="m2:442" class="id"><a name="m2:442" class="">m2</a></span> <span id="c':443" class="id"><a name="c':443" class="">c'</a></span> <span id="rs3:444" class="id"><a name="rs3:444" class="">rs3</a></span> <span id="m3:445" class="id"><a name="m3:445" class="">m3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Asm.html#exec_instr">exec_instr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE.fn">fn</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#i:437">i</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:439">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:440">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="vernacular">Next</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:441">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:442">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:441">rs2#PC</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:439">rs1#PC</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.one">Ptrofs.one</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_opt">exec_straight_opt</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:438">c</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs2:441">rs2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m2:442">m2</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':443">c'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:444">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:445">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_opt">exec_straight_opt</a></span> (<span class="id"><a href="compcert.backend.Asmgenproof0.html#i:437">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:438">c</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs1:439">rs1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m1:440">m1</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c':443">c'</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#rs3:444">rs3</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#m3:445">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_opt_intro">exec_straight_opt_intro</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#exec_straight_opt_step">exec_straight_opt_step;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#STRAIGHTLINE">STRAIGHTLINE</a></span>.<br/>
<br/>
<h1> Properties of the Mach call stack </h1>
<br/>
<span class="vernacular">Section</span> <span id="MATCH_STACK" class="id"><a name="MATCH_STACK" class="">MATCH_STACK</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="MATCH_STACK.ge" class="id"><a name="MATCH_STACK.ge" class="">ge:</a></span> <span class="id"><a href="compcert.backend.Mach.html#genv">Mach.genv</a></span>.<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="match_stack" class="id"><a name="match_stack" class="">match_stack:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Mach.html#stackframe">Mach.stackframe</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_stack_nil" class="id"><a name="match_stack_nil" class="">match_stack_nil:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#match_stack:447">match_stack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_stack_cons" class="id"><a name="match_stack_cons" class="">match_stack_cons:</a></span> <span class="gallina-kwd">forall</span> <span id="fb:449" class="id"><a name="fb:449" class="">fb</a></span> <span id="sp:450" class="id"><a name="sp:450" class="">sp</a></span> <span id="ra:451" class="id"><a name="ra:451" class="">ra</a></span> <span id="c:452" class="id"><a name="c:452" class="">c</a></span> <span id="s:453" class="id"><a name="s:453" class="">s</a></span> <span id="f:454" class="id"><a name="f:454" class="">f</a></span> <span id="tf:455" class="id"><a name="tf:455" class="">tf</a></span> <span id="tc:456" class="id"><a name="tc:456" class="">tc,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#MATCH_STACK.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fb:449">fb</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:454">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#transl_code_at_pc">transl_code_at_pc</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#MATCH_STACK.ge">ge</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ra:451">ra</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fb:449">fb</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#f:454">f</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:452">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tf:455">tf</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#tc:456">tc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:450">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#match_stack:447">match_stack</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:453">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#match_stack:447">match_stack</a></span> (<span class="id"><a href="compcert.backend.Mach.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#fb:449">fb</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#sp:450">sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#ra:451">ra</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#c:452">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:453">s</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="parent_sp_def" class="id"><a name="parent_sp_def" class="">parent_sp_def:</a></span> <span class="gallina-kwd">forall</span> <span id="s:457" class="id"><a name="s:457" class="">s,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#match_stack">match_stack</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:457">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:457">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Vnullptr">Vnullptr;</a></span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="parent_ra_def" class="id"><a name="parent_ra_def" class="">parent_ra_def:</a></span> <span class="gallina-kwd">forall</span> <span id="s:458" class="id"><a name="s:458" class="">s,</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#match_stack">match_stack</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:458">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Mach.html#parent_ra">parent_ra</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:458">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Vnullptr">Vnullptr;</a></span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="lessdef_parent_sp" class="id"><a name="lessdef_parent_sp" class="">lessdef_parent_sp:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:459" class="id"><a name="s:459" class="">s</a></span> <span id="v:460" class="id"><a name="v:460" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#match_stack">match_stack</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:459">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:459">s</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:460">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:460">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:459">s</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">auto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#parent_sp_def">parent_sp_def;</a></span> <span class="id">eauto</span>. <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="lessdef_parent_ra" class="id"><a name="lessdef_parent_ra" class="">lessdef_parent_ra:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:461" class="id"><a name="s:461" class="">s</a></span> <span id="v:462" class="id"><a name="v:462" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Asmgenproof0.html#match_stack">match_stack</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:461">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.backend.Mach.html#parent_ra">parent_ra</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:461">s</a></span>) <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:462">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#v:462">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Mach.html#parent_ra">parent_ra</a></span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#s:461">s</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">auto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#parent_ra_def">parent_ra_def;</a></span> <span class="id">eauto</span>. <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Asmgenproof0.html#MATCH_STACK">MATCH_STACK</a></span>.<br/>
<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
