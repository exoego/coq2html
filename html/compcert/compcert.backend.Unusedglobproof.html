
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Unusedglobproof</title>
<meta name="description" content="Documentation of Coq module Unusedglobproof" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module Unusedglobproof</h1>
<br/>
<div class="doc">Elimination of unreferenced static definitions </div>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.FSets.FSets.html">FSets</a></span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.lib.Ordered.html">Ordered</a></span> <span class="id"><a href="compcert.lib.Iteration.html">Iteration</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.common.Values.html">Values</a></span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="compcert.common.Events.html">Events</a></span> <span class="id"><a href="compcert.common.Smallstep.html">Smallstep</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span> <span class="id"><a href="compcert.backend.Registers.html">Registers</a></span> <span class="id"><a href="compcert.backend.RTL.html">RTL</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.Unusedglob.html">Unusedglob</a></span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="ISF" class="id"><a name="ISF" class="">ISF</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.FSets.FSetFacts.html#Facts">FSetFacts.Facts</a></span>(<span class="id"><a href="compcert.backend.Unusedglob.html#IS">IS</a></span>).<br/>
<span class="vernacular">Module</span> <span id="ISP" class="id"><a name="ISP" class="">ISP</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.FSets.FSetProperties.html#Properties">FSetProperties.Properties</a></span>(<span class="id"><a href="compcert.backend.Unusedglob.html#IS">IS</a></span>).<br/>
<br/>
<h1> Relational specification of the transformation </h1>
<br/>
<div class="doc">The transformed program is obtained from the original program
  by keeping only the global definitions that belong to a given
  set <span class="bracket"><span class="id">u</span></span> of names.  </div>
<br/>
<span class="vernacular">Record</span> <span id="match_prog_1" class="id"><a name="match_prog_1" class="">match_prog_1</a></span> (<span id="u:1" class="id"><a name="u:1" class="">u:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.t">IS.t</a></span>) (<span id="p:2" class="id"><a name="p:2" class="">p</a></span> <span id="tp:3" class="id"><a name="tp:3" class="">tp:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span id="match_prog_main" class="id"><a name="match_prog_main" class="">match_prog_main:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#tp:3">tp</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:2">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span id="match_prog_public" class="id"><a name="match_prog_public" class="">match_prog_public:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#tp:3">tp</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:2">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span id="match_prog_def" class="id"><a name="match_prog_def" class="">match_prog_def:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:7" class="id"><a name="id:7" class="">id,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp:3">tp</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:7">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:1">u</a></span> <span class="gallina-kwd">then</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:2">p</a></span>)<span class="id">!id</span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None;</a></span><br/>
&nbsp;&nbsp;<span id="match_prog_unique" class="id"><a name="match_prog_unique" class="">match_prog_unique:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp:3">tp</a></span>)<br/>
<span class="id">}</span>.<br/>
<br/>
<div class="doc">This set <span class="bracket"><span class="id">u</span></span> (as "used") must be closed under references, and
  contain the entry point and the public identifiers of the program. </div>
<br/>
<span class="vernacular">Definition</span> <span id="ref_function" class="id"><a name="ref_function" class="">ref_function</a></span> (<span id="f:10" class="id"><a name="f:10" class="">f:</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span>) (<span id="id:11" class="id"><a name="id:11" class="">id:</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="pc:12" class="id"><a name="pc:12" class="">pc</a></span> <span id="i:13" class="id"><a name="i:13" class="">i,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:10">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#i:13">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:11">id</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#ref_instruction">ref_instruction</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#i:13">i</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="ref_fundef" class="id"><a name="ref_fundef" class="">ref_fundef</a></span> (<span id="fd:14" class="id"><a name="fd:14" class="">fd:</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span>) (<span id="id:15" class="id"><a name="id:15" class="">id:</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#fd:14">fd</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id">f</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_function">ref_function</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:15">id</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#External">External</a></span> <span class="id">ef</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> <span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="ref_init" class="id"><a name="ref_init" class="">ref_init</a></span> (<span id="il:17" class="id"><a name="il:17" class="">il:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) (<span id="id:18" class="id"><a name="id:18" class="">id:</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="ofs:19" class="id"><a name="ofs:19" class="">ofs,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:18">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ofs:19">ofs</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#il:17">il</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="ref_def" class="id"><a name="ref_def" class="">ref_def</a></span> (<span id="gd:20" class="id"><a name="gd:20" class="">gd:</a></span> <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span id="id:21" class="id"><a name="id:21" class="">id:</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:20">gd</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> <span class="id">fd</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_fundef">ref_fundef</a></span> <span class="id">fd</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:21">id</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">gv</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_init">ref_init</a></span> <span class="id">gv</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:21">id</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Record</span> <span id="valid_used_set" class="id"><a name="valid_used_set" class="">valid_used_set</a></span> (<span id="p:23" class="id"><a name="p:23" class="">p:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) (<span id="u:24" class="id"><a name="u:24" class="">u:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.t">IS.t</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span id="used_closed" class="id"><a name="used_closed" class="">used_closed:</a></span> <span class="gallina-kwd">forall</span> <span id="id:26" class="id"><a name="id:26" class="">id</a></span> <span id="gd:27" class="id"><a name="gd:27" class="">gd</a></span> <span id="id':28" class="id"><a name="id':28" class="">id',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:26">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:24">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:23">p</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:27">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:27">gd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id':28">id'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id':28">id'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:24">u;</a></span><br/>
&nbsp;&nbsp;<span id="used_main" class="id"><a name="used_main" class="">used_main:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:23">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:24">u;</a></span><br/>
&nbsp;&nbsp;<span id="used_public" class="id"><a name="used_public" class="">used_public:</a></span> <span class="gallina-kwd">forall</span> <span id="id:31" class="id"><a name="id:31" class="">id,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:31">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:23">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:31">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:24">u;</a></span><br/>
&nbsp;&nbsp;<span id="used_defined" class="id"><a name="used_defined" class="">used_defined:</a></span> <span class="gallina-kwd">forall</span> <span id="id:33" class="id"><a name="id:33" class="">id,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:33">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:24">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:33">id</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:23">p</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:33">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:23">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>)<br/>
<span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="match_prog" class="id"><a name="match_prog" class="">match_prog</a></span> (<span id="p:35" class="id"><a name="p:35" class="">p</a></span> <span id="tp:36" class="id"><a name="tp:36" class="">tp:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="u:37" class="id"><a name="u:37" class="">u:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.t">IS.t</a></span><span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54">,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:35">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:37">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_1">match_prog_1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:37">u</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:35">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp:36">tp</a></span>.<br/>
<br/>
<h1> Properties of the static analysis </h1>
<br/>
<div class="doc">Monotonic evolution of the workset. </div>
<br/>
<span class="vernacular">Inductive</span> <span id="workset_incl" class="id"><a name="workset_incl" class="">workset_incl</a></span> (<span id="w1:38" class="id"><a name="w1:38" class="">w1</a></span> <span id="w2:39" class="id"><a name="w2:39" class="">w2:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#workset">workset</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span id="workset_incl_intro" class="id"><a name="workset_incl_intro" class="">workset_incl_intro:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="SEEN:42" class="id"><a name="SEEN:42" class="">SEEN:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.Subset">IS.Subset</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w1:38">w1</a></span>.(<span class="id"><a href="compcert.backend.Unusedglob.html#w_seen">w_seen</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#w2:39">w2</a></span>.(<span class="id"><a href="compcert.backend.Unusedglob.html#w_seen">w_seen</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="TODO:43" class="id"><a name="TODO:43" class="">TODO:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#incl">List.incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w1:38">w1</a></span>.(<span class="id"><a href="compcert.backend.Unusedglob.html#w_todo">w_todo</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#w2:39">w2</a></span>.(<span class="id"><a href="compcert.backend.Unusedglob.html#w_todo">w_todo</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="TRACK:45" class="id"><a name="TRACK:45" class="">TRACK:</a></span> <span class="gallina-kwd">forall</span> <span id="id:44" class="id"><a name="id:44" class="">id,</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:44">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w2:39">w2</a></span>.(<span class="id"><a href="compcert.backend.Unusedglob.html#w_seen">w_seen</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:44">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w1:38">w1</a></span>.(<span class="id"><a href="compcert.backend.Unusedglob.html#w_seen">w_seen</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:44">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w2:39">w2</a></span>.(<span class="id"><a href="compcert.backend.Unusedglob.html#w_todo">w_todo</a></span>))<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl:40">workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w1:38">w1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w2:39">w2</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="seen_workset_incl" class="id"><a name="seen_workset_incl" class="">seen_workset_incl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="w1:46" class="id"><a name="w1:46" class="">w1</a></span> <span id="w2:47" class="id"><a name="w2:47" class="">w2</a></span> <span id="id:48" class="id"><a name="id:48" class="">id,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w1:46">w1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w2:47">w2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:48">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w1:46">w1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:48">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w2:47">w2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="workset_incl_refl" class="id"><a name="workset_incl_refl" class="">workset_incl_refl:</a></span> <span class="gallina-kwd">forall</span> <span id="w:49" class="id"><a name="w:49" class="">w,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:49">w</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:49">w</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">split</span>. <span class="id">red;</span> <span class="id">auto</span>. <span class="id">red;</span> <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="workset_incl_trans" class="id"><a name="workset_incl_trans" class="">workset_incl_trans:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="w1:50" class="id"><a name="w1:50" class="">w1</a></span> <span id="w2:51" class="id"><a name="w2:51" class="">w2</a></span> <span id="w3:52" class="id"><a name="w3:52" class="">w3,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w1:50">w1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w2:51">w2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w2:51">w2</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w3:52">w3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w1:50">w1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w3:52">w3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H,</span> <span class="id">H0;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">edestruct</span> <span class="id">TRACK0;</span> <span class="id">eauto</span>. <span class="id">edestruct</span> <span class="id">TRACK;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="add_workset_incl" class="id"><a name="add_workset_incl" class="">add_workset_incl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:53" class="id"><a name="id:53" class="">id</a></span> <span id="w:54" class="id"><a name="w:54" class="">w,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:54">w</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#add_workset">add_workset</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:53">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:54">w</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_workset">add_workset;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">w</span>) <span class="id">eqn:MEM</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
<span class="id">-</span> <span class="id">split;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.add_2">IS.add_2</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">red;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> <span class="id">id0</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.add_3">IS.add_3</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="addlist_workset_incl" class="id"><a name="addlist_workset_incl" class="">addlist_workset_incl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:55" class="id"><a name="l:55" class="">l</a></span> <span id="w:56" class="id"><a name="w:56" class="">w,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:56">w</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#addlist_workset">addlist_workset</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:55">l</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:56">w</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_trans">workset_incl_trans</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_workset_incl">add_workset_incl</a></span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="add_ref_function_incl" class="id"><a name="add_ref_function_incl" class="">add_ref_function_incl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:57" class="id"><a name="f:57" class="">f</a></span> <span id="w:58" class="id"><a name="w:58" class="">w,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:58">w</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_function">add_ref_function</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:57">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:58">w</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_function">add_ref_function;</a></span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.fold_rec">PTree_Properties.fold_rec</a></span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_trans">workset_incl_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">a;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_instruction">add_ref_instruction</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#addlist_workset_incl">addlist_workset_incl</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="add_ref_globvar_incl" class="id"><a name="add_ref_globvar_incl" class="">add_ref_globvar_incl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="gv:59" class="id"><a name="gv:59" class="">gv</a></span> <span id="w:60" class="id"><a name="w:60" class="">w,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:60">w</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_globvar">add_ref_globvar</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gv:59">gv</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:60">w</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_globvar">add_ref_globvar;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">w</span>. <span class="id">induction</span> (<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">gv</span>)<span class="id">;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_trans">workset_incl_trans;</a></span> <span class="id">[</span> <span class="id">|</span> <span class="id">eauto</span> <span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_init_data">add_ref_init_data</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a;</span> (<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_refl">workset_incl_refl</a></span> <span class="id">||</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_workset_incl">add_workset_incl</a></span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="add_ref_definition_incl" class="id"><a name="add_ref_definition_incl" class="">add_ref_definition_incl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="pm:61" class="id"><a name="pm:61" class="">pm</a></span> <span id="id:62" class="id"><a name="id:62" class="">id</a></span> <span id="w:63" class="id"><a name="w:63" class="">w,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:63">w</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_definition">add_ref_definition</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#pm:61">pm</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:62">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:63">w</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_definition">add_ref_definition;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">pm!id</span>) <span class="gallina-kwd">as</span> <span class="id">[[[]</span> <span class="id">|</span> <span class="id">?</span> <span class="id">]</span> <span class="id">|</span> <span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_ref_function_incl">add_ref_function_incl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_ref_globvar_incl">add_ref_globvar_incl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="initial_workset_incl" class="id"><a name="initial_workset_incl" class="">initial_workset_incl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:64" class="id"><a name="p:64" class="">p,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl">workset_incl</a></span> <span class="id">{|</span> <span class="id"><a href="compcert.backend.Unusedglob.html#w_seen">w_seen</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.empty">IS.empty</a></span><span class="id">;</span> <span class="id"><a href="compcert.backend.Unusedglob.html#w_todo">w_todo</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">|}</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#initial_workset">initial_workset</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:64">p</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#initial_workset">initial_workset;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_trans">workset_incl_trans</a></span>. <span class="id">2:</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_workset_incl">add_workset_incl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">{|</span> <span class="id"><a href="compcert.backend.Unusedglob.html#w_seen">w_seen</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.empty">IS.empty</a></span><span class="id">;</span> <span class="id"><a href="compcert.backend.Unusedglob.html#w_todo">w_todo</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">|}</span>. <span class="id">induction</span> (<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id">p</span>)<span class="id">;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_incl_trans">workset_incl_trans</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_workset_incl">add_workset_incl</a></span>. <span class="id">apply</span> <span class="id">IHl</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Soundness properties for functions that add identifiers to the workset </div>
<br/>
<span class="vernacular">Lemma</span> <span id="seen_add_workset" class="id"><a name="seen_add_workset" class="">seen_add_workset:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:65" class="id"><a name="id:65" class="">id</a></span> (<span id="w:66" class="id"><a name="w:66" class="">w:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#workset">workset</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:65">id</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#add_workset">add_workset</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:65">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:66">w</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_workset">add_workset;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">w</span>) <span class="id">eqn:MEM</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_2">IS.mem_2</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.add_1">IS.add_1</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="seen_addlist_workset" class="id"><a name="seen_addlist_workset" class="">seen_addlist_workset:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:67" class="id"><a name="id:67" class="">id</a></span> <span id="l:68" class="id"><a name="l:68" class="">l</a></span> (<span id="w:69" class="id"><a name="w:69" class="">w:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#workset">workset</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:67">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:68">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:67">id</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#addlist_workset">addlist_workset</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:68">l</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:69">w</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H</span>. <span class="id">subst</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_workset_incl">seen_workset_incl</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#addlist_workset_incl">addlist_workset_incl</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_add_workset">seen_add_workset</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHl;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="seen_add_ref_function" class="id"><a name="seen_add_ref_function" class="">seen_add_ref_function:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:70" class="id"><a name="id:70" class="">id</a></span> <span id="f:71" class="id"><a name="f:71" class="">f</a></span> <span id="w:72" class="id"><a name="w:72" class="">w,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_function">ref_function</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:71">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:70">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:70">id</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_function">add_ref_function</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:71">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:72">w</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">w</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_function">ref_function,</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_function">add_ref_function</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.fold_rec">PTree_Properties.fold_rec</a></span><span class="id">;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">H1</span> <span class="gallina-kwd">as</span> (<span class="id">pc</span> &amp; <span class="id">i</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">apply</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">pc,</span> <span class="id">i;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">H</span> <span class="gallina-kwd">as</span> (<span class="id">pc</span> &amp; <span class="id">i</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">A;</span> <span class="id">discriminate</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">H2</span> <span class="gallina-kwd">as</span> (<span class="id">pc</span> &amp; <span class="id">i</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">A</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">pc</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">inv</span> <span class="id">A</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_instruction">add_ref_instruction</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_addlist_workset">seen_addlist_workset;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_instruction">add_ref_instruction</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_workset_incl">seen_workset_incl</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#addlist_workset_incl">addlist_workset_incl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H1</span>. <span class="gallina-kwd">exists</span> <span class="id">pc,</span> <span class="id">i;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="seen_add_ref_definition" class="id"><a name="seen_add_ref_definition" class="">seen_add_ref_definition:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="pm:73" class="id"><a name="pm:73" class="">pm</a></span> <span id="id:74" class="id"><a name="id:74" class="">id</a></span> <span id="gd:75" class="id"><a name="gd:75" class="">gd</a></span> <span id="id':76" class="id"><a name="id':76" class="">id'</a></span> <span id="w:77" class="id"><a name="w:77" class="">w,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#pm:73">pm!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:75">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:75">gd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id':76">id'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id':76">id'</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_definition">add_ref_definition</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#pm:73">pm</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:74">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:77">w</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_definition">add_ref_definition;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">H</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">destruct</span> <span class="id">gd</span> <span class="gallina-kwd">as</span> <span class="id">[[f|ef]|gv]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_add_ref_function">seen_add_ref_function;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0</span> <span class="gallina-kwd">as</span> (<span class="id">ofs</span> &amp; <span class="id">IN</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_globvar">add_ref_globvar</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="l:80" class="id"><span id="l:78" class="id"><a name="l:80" class="">l</a></span></span> (<span id="w:81" class="id"><span id="w:79" class="id"><a name="w:81" class="">w:</a></span></span> <span class="id"><a href="compcert.backend.Unusedglob.html#workset">workset</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id">id'</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:79">w</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id">id'</span> <span class="id">ofs</span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:78">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id">id'</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_ref_init_data">add_ref_init_data</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:78">l</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:79">w</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHl</span>. <span class="id">intuition</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">destruct</span> <span class="id">a;</span> <span class="id">simpl;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_workset_incl">seen_workset_incl</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_workset_incl">add_workset_incl</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst;</span> <span class="id">left;</span> <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_add_workset">seen_add_workset</a></span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="seen_main_initial_workset" class="id"><a name="seen_main_initial_workset" class="">seen_main_initial_workset:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:82" class="id"><a name="p:82" class="">p,</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:82">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>) (<span class="id"><a href="compcert.backend.Unusedglob.html#initial_workset">initial_workset</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:82">p</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_add_workset">seen_add_workset</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="seen_public_initial_workset" class="id"><a name="seen_public_initial_workset" class="">seen_public_initial_workset:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:83" class="id"><a name="p:83" class="">p</a></span> <span id="id:84" class="id"><a name="id:84" class="">id,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:84">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:83">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:84">id</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#initial_workset">initial_workset</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:83">p</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#initial_workset">initial_workset</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_workset_incl">seen_workset_incl</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_workset_incl">add_workset_incl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="l:89" class="id"><span id="l:85" class="id"><a name="l:89" class="">l</a></span></span> (<span id="w:90" class="id"><span id="w:86" class="id"><a name="w:90" class="">w:</a></span></span> <span class="id"><a href="compcert.backend.Unusedglob.html#workset">workset</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id">id</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:86">w</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">id</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:85">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id">id</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="w:91" class="id"><span id="w:87" class="id"><a name="w:91" class="">w</a></span></span> <span id="id:92" class="id"><span id="id:88" class="id"><a name="id:92" class="">id</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglob.html#add_workset">add_workset</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:88">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:87">w</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:85">l</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:86">w</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHl</span>. <span class="id">intuition</span> <span class="id">auto;</span> <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_workset_incl">seen_workset_incl</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_workset_incl">add_workset_incl</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">a</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_add_workset">seen_add_workset</a></span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H0</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Correctness of the transformation with respect to the relational specification </h1>
<br/>
<div class="doc">Correctness of the dependency graph traversal. </div>
<br/>
<span class="vernacular">Section</span> <span id="ANALYSIS" class="id"><a name="ANALYSIS" class="">ANALYSIS</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="ANALYSIS.p" class="id"><a name="ANALYSIS.p" class="">p:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="vernacular">Let</span> <span id="ANALYSIS.pm" class="id"><a name="ANALYSIS.pm" class="">pm</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.p">p</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="workset_invariant" class="id"><a name="workset_invariant" class="">workset_invariant</a></span> (<span id="w:94" class="id"><a name="w:94" class="">w:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#workset">workset</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:95" class="id"><a name="id:95" class="">id</a></span> <span id="gd:96" class="id"><a name="gd:96" class="">gd</a></span> <span id="id':97" class="id"><a name="id':97" class="">id',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:95">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:94">w</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~List</a></span>.<span class="id">In</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:95">id</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#w_todo">w_todo</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:94">w</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.pm">pm!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:96">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:96">gd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id':97">id'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id':97">id'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:94">w</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="used_set_closed" class="id"><a name="used_set_closed" class="">used_set_closed</a></span> (<span id="u:98" class="id"><a name="u:98" class="">u:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.t">IS.t</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:99" class="id"><a name="id:99" class="">id</a></span> <span id="gd:100" class="id"><a name="gd:100" class="">gd</a></span> <span id="id':101" class="id"><a name="id':101" class="">id',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:99">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:98">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.pm">pm!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:100">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:100">gd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id':101">id'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id':101">id'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:98">u</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="iter_step_invariant" class="id"><a name="iter_step_invariant" class="">iter_step_invariant:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="w:102" class="id"><a name="w:102" class="">w,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_invariant">workset_invariant</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:102">w</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Unusedglob.html#iter_step">iter_step</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.pm">pm</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:102">w</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#inl">inl</a></span> <span class="id">u</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_set_closed">used_set_closed</a></span> <span class="id">u</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id">w'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_invariant">workset_invariant</a></span> <span class="id">w'</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#iter_step">iter_step,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_invariant">workset_invariant,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_set_closed">used_set_closed;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#w_todo">w_todo</a></span> <span class="id">w</span>) <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">id</span> <span class="id">rem</span> <span class="id">];</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id">H;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">set</span> (<span class="id">w'</span> <span class="id">:=</span> <span class="id">{|</span> <span class="id"><a href="compcert.backend.Unusedglob.html#w_seen">w_seen</a></span> <span class="id">:=</span> <span class="id">w</span>.(<span class="id"><a href="compcert.backend.Unusedglob.html#w_seen">w_seen</a></span>)<span class="id">;</span> <span class="id"><a href="compcert.backend.Unusedglob.html#w_todo">w_todo</a></span> <span class="id">:=</span> <span class="id">rem</span> <span class="id">|}</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#add_ref_definition_incl">add_ref_definition_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.pm">pm</a></span> <span class="id">id</span> <span class="id">w'</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> <span class="id">id0</span>).<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">subst</span> <span class="id">id0</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_add_ref_definition">seen_add_ref_definition;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id">TRACK;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span> <span class="id">apply</span> <span class="id">SEEN</span>. <span class="id">eapply</span> <span class="id">H;</span> <span class="id">eauto</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">id0</span> <span class="id">rem</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">change</span> <span class="id">rem</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#w_todo">w_todo</a></span> <span class="id">w'</span>). <span class="id">red;</span> <span class="id">intros</span>. <span class="id">elim</span> <span class="id">H1;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span> <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="used_globals_sound" class="id"><a name="used_globals_sound" class="">used_globals_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="u:103" class="id"><a name="u:103" class="">u,</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#used_globals">used_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.p">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.pm">pm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:103">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_set_closed">used_set_closed</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:103">u</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#used_globals">used_globals;</a></span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Iteration.html#PrimIter.iterate_prop">PrimIter.iterate_prop</a></span> <span class="gallina-kwd">with</span> (<span class="id">P</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#workset_invariant">workset_invariant</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#iter_step_invariant">iter_step_invariant;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#initial_workset_incl">initial_workset_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.p">p</a></span>).<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">edestruct</span> <span class="id">TRACK;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H4</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.empty_1">IS.empty_1</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="used_globals_incl" class="id"><a name="used_globals_incl" class="">used_globals_incl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="u:104" class="id"><a name="u:104" class="">u,</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#used_globals">used_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.p">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.pm">pm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:104">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.Subset">IS.Subset</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#initial_workset">initial_workset</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.p">p</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:104">u</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#used_globals">used_globals;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.lib.Iteration.html#PrimIter.iterate_prop">PrimIter.iterate_prop</a></span> <span class="gallina-kwd">with</span> (<span class="id">P</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> (<span id="w:106" class="id"><span id="w:105" class="id"><a name="w:106" class="">w:</a></span></span> <span class="id"><a href="compcert.backend.Unusedglob.html#workset">workset</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.Subset">IS.Subset</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#initial_workset">initial_workset</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.p">p</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#w:105">w</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">fold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.pm">pm;</a></span> <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#iter_step">iter_step;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#w_todo">w_todo</a></span> <span class="id">a</span>) <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">id</span> <span class="id">rem</span> <span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#add_ref_definition_incl">add_ref_definition_incl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.pm">pm</a></span> <span class="id">id</span> <span class="id">{|</span> <span class="id"><a href="compcert.backend.Unusedglob.html#w_seen">w_seen</a></span> <span class="id">:=</span> <span class="id">a;</span> <span class="id"><a href="compcert.backend.Unusedglob.html#w_todo">w_todo</a></span> <span class="id">:=</span> <span class="id">rem</span> <span class="id">|}</span>).<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">red;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Corollary</span> <span id="used_globals_valid" class="id"><a name="used_globals_valid" class="">used_globals_valid:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="u:107" class="id"><a name="u:107" class="">u,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#used_globals">used_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.p">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.pm">pm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:107">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.for_all">IS.for_all</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#global_defined">global_defined</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.p">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.pm">pm</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:107">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.p">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:107">u</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_globals_sound">used_globals_sound;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_globals_incl">used_globals_incl;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_main_initial_workset">seen_main_initial_workset</a></span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_globals_incl">used_globals_incl;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#seen_public_initial_workset">seen_public_initial_workset;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#for_all_iff">ISF.for_all_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
<span class="id">+</span> <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">apply</span> <span class="id">H0</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#global_defined">global_defined</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS.pm">pm!id</a></span> <span class="gallina-kwd">as</span> <span class="id">[g|]</span> <span class="id">eqn:E</span>.<br/>
<span class="id">*</span> <span class="id">left</span>. <span class="id">change</span> <span class="id">id</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id,g</span>)). <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap;</a></span> <span class="id">auto</span>.<br/>
<span class="id">*</span> <span class="id">InvBooleans;</span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">hnf</span>. <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ANALYSIS">ANALYSIS</a></span>.<br/>
<br/>
<div class="doc">Properties of the elimination of unused global definitions. </div>
<br/>
<span class="vernacular">Section</span> <span id="TRANSFORMATION" class="id"><a name="TRANSFORMATION" class="">TRANSFORMATION</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="TRANSFORMATION.p" class="id"><a name="TRANSFORMATION.p" class="">p:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="TRANSFORMATION.used" class="id"><a name="TRANSFORMATION.used" class="">used:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.t">IS.t</a></span>.<br/>
<br/>
<span class="vernacular">Let</span> <span id="TRANSFORMATION.add_def" class="id"><a name="TRANSFORMATION.add_def" class="">add_def</a></span> (<span id="m:110" class="id"><a name="m:110" class="">m:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#prog_map">prog_map</a></span>) <span id="idg:111" class="id"><a name="idg:111" class="">idg</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#idg:111">idg</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#idg:111">idg</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:110">m</a></span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="filter_globdefs_accu" class="id"><a name="filter_globdefs_accu" class="">filter_globdefs_accu:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="defs:112" class="id"><a name="defs:112" class="">defs</a></span> <span id="accu1:113" class="id"><a name="accu1:113" class="">accu1</a></span> <span id="accu2:114" class="id"><a name="accu2:114" class="">accu2</a></span> <span id="u:115" class="id"><a name="u:115" class="">u,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:115">u</a></span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#accu1:113">accu1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#accu2:114">accu2</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs:112">defs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:115">u</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#accu1:113">accu1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs:112">defs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#accu2:114">accu2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">defs;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span> <span class="gallina-kwd">as</span> <span class="id">[id</span> <span class="id">gd]</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">u</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHdefs</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="filter_globdefs_nil" class="id"><a name="filter_globdefs_nil" class="">filter_globdefs_nil:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="u:116" class="id"><a name="u:116" class="">u</a></span> <span id="accu:117" class="id"><a name="accu:117" class="">accu</a></span> <span id="defs:118" class="id"><a name="defs:118" class="">defs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:116">u</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#accu:117">accu</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs:118">defs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:116">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs:118">defs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#accu:117">accu</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#filter_globdefs_accu">filter_globdefs_accu</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="filter_globdefs_map_1" class="id"><a name="filter_globdefs_map_1" class="">filter_globdefs_map_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:119" class="id"><a name="id:119" class="">id</a></span> <span id="l:120" class="id"><a name="l:120" class="">l</a></span> <span id="u:121" class="id"><a name="u:121" class="">u</a></span> <span id="m1:122" class="id"><a name="m1:122" class="">m1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:119">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:121">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#m1:122">m1!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#TRANSFORMATION.add_def">add_def</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:121">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:120">l</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#m1:122">m1</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">[id1</span> <span class="id">gd1]</span> <span class="id">l];</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id1</span> <span class="id">u</span>) <span class="id">eqn:MEM</span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#filter_globdefs_nil">filter_globdefs_nil</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left_app">fold_left_app</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_def">add_def</a></span> <span class="gallina-kwd">at</span> <span class="id">1</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">eapply</span> <span class="id">IHl;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#remove_b">ISF.remove_b</a></span>. <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">eapply</span> <span class="id">IHl;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="filter_globdefs_map_2" class="id"><a name="filter_globdefs_map_2" class="">filter_globdefs_map_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:123" class="id"><a name="id:123" class="">id</a></span> <span id="l:124" class="id"><a name="l:124" class="">l</a></span> <span id="u:125" class="id"><a name="u:125" class="">u</a></span> <span id="m1:126" class="id"><a name="m1:126" class="">m1</a></span> <span id="m2:127" class="id"><a name="m2:127" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:123">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:125">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#m1:126">m1!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m2:127">m2!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#TRANSFORMATION.add_def">add_def</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:125">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:124">l</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#m1:126">m1</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#TRANSFORMATION.add_def">add_def</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev">List.rev</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:124">l</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#m2:127">m2</a></span>)<span class="id">!id</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">[id1</span> <span class="id">gd1]</span> <span class="id">l];</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left_app">fold_left_app</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id1</span> <span class="id">u</span>) <span class="id">eqn:MEM</span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#filter_globdefs_nil">filter_globdefs_nil</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left_app">fold_left_app</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_def">add_def</a></span> <span class="gallina-kwd">at</span> <span class="id">1</span> <span class="id">3</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">id1</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_1">IS.mem_1</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.remove_2">IS.remove_2</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_2">IS.mem_2</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#add_def">add_def</a></span> <span class="gallina-kwd">at</span> <span class="id">2</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">apply</span> <span class="id">IHl;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="filter_globdefs_map" class="id"><a name="filter_globdefs_map" class="">filter_globdefs_map:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:128" class="id"><a name="id:128" class="">id</a></span> <span id="u:129" class="id"><a name="u:129" class="">u</a></span> <span id="defs:130" class="id"><a name="defs:130" class="">defs,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list">PTree_Properties.of_list</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:129">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev">List.rev</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs:130">defs</a></span>)))<span class="id">!</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:128">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:128">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:129">u</a></span> <span class="gallina-kwd">then</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list">PTree_Properties.of_list</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs:130">defs</a></span>)<span class="id">!id</span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list">PTree_Properties.of_list</a></span>. <span class="id">fold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#prog_map">prog_map</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elt">PTree.elt</a></span>. <span class="id">fold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#TRANSFORMATION.add_def">add_def</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">u</span>) <span class="id">eqn:MEM</span>.<br/>
<span class="id">-</span> <span class="id">erewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#filter_globdefs_map_2">filter_globdefs_map_2</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev_involutive">List.rev_involutive</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#filter_globdefs_map_1">filter_globdefs_map_1</a></span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="filter_globdefs_domain" class="id"><a name="filter_globdefs_domain" class="">filter_globdefs_domain:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:131" class="id"><a name="id:131" class="">id</a></span> <span id="l:132" class="id"><a name="l:132" class="">l</a></span> <span id="u:133" class="id"><a name="u:133" class="">u,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:131">id</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:133">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:132">l</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:131">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:133">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:131">id</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:132">l</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">[id1</span> <span class="id">gd1]</span> <span class="id">l];</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">tauto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id1</span> <span class="id">u</span>) <span class="id">eqn:MEM</span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#filter_globdefs_nil">filter_globdefs_nil,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#remove_iff">ISF.remove_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> <span class="id">H;</span> <span class="id">try</span> <span class="id">tauto</span>. <span class="id">subst</span> <span class="id">id1</span>. <span class="id">split;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_2">IS.mem_2</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">apply</span> <span class="id">IHl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="filter_globdefs_unique_names" class="id"><a name="filter_globdefs_unique_names" class="">filter_globdefs_unique_names:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:134" class="id"><a name="l:134" class="">l</a></span> <span id="u:135" class="id"><a name="u:135" class="">u,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#u:135">u</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#l:134">l</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">[id1</span> <span class="id">gd1]</span> <span class="id">l];</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id1</span> <span class="id">u</span>) <span class="id">eqn:MEM;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#filter_globdefs_nil">filter_globdefs_nil,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet_append">list_norepet_append;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">simpl;</span> <span class="id">tauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H0;</span> <span class="id">try</span> <span class="id">tauto</span>. <span class="id">subst</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#filter_globdefs_domain">filter_globdefs_domain</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#remove_iff">ISF.remove_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#TRANSFORMATION">TRANSFORMATION</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="transf_program_match" class="id"><a name="transf_program_match" class="">transf_program_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:136" class="id"><a name="p:136" class="">p</a></span> <span id="tp:137" class="id"><a name="tp:137" class="">tp,</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#transform_program">transform_program</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:136">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp:137">tp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:136">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp:137">tp</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglob.html#transform_program">transform_program;</a></span> <span class="id">intros</span> <span class="id">p</span> <span class="id">tp</span> <span class="id">TR</span>. <span class="id">set</span> (<span class="id">pm</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#used_globals">used_globals</a></span> <span class="id">p</span> <span class="id">pm</span>) <span class="gallina-kwd">as</span> <span class="id">[u|]</span> <span class="id">eqn:U;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.for_all">IS.for_all</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#global_defined">global_defined</a></span> <span class="id">p</span> <span class="id">pm</span>) <span class="id">u</span>) <span class="id">eqn:DEF;</span> <span class="id">inv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">u;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_globals_valid">used_globals_valid;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap;</a></span> <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#filter_globdefs_map">filter_globdefs_map</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#filter_globdefs_unique_names">filter_globdefs_unique_names</a></span>.<br/>
Qed.</div>
<br/>
<h1> Semantic preservation </h1>
<br/>
<span class="vernacular">Section</span> <span id="SOUNDNESS" class="id"><a name="SOUNDNESS" class="">SOUNDNESS</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="SOUNDNESS.p" class="id"><a name="SOUNDNESS.p" class="">p:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="SOUNDNESS.tp" class="id"><a name="SOUNDNESS.tp" class="">tp:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="SOUNDNESS.used" class="id"><a name="SOUNDNESS.used" class="">used:</a></span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.t">IS.t</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="SOUNDNESS.USED_VALID" class="id"><a name="SOUNDNESS.USED_VALID" class="">USED_VALID:</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.used">used</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="SOUNDNESS.TRANSF" class="id"><a name="SOUNDNESS.TRANSF" class="">TRANSF:</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_1">match_prog_1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.used">used</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span>.<br/>
<span class="vernacular">Let</span> <span id="SOUNDNESS.ge" class="id"><a name="SOUNDNESS.ge" class="">ge</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>.<br/>
<span class="vernacular">Let</span> <span id="SOUNDNESS.tge" class="id"><a name="SOUNDNESS.tge" class="">tge</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span>.<br/>
<span class="vernacular">Let</span> <span id="SOUNDNESS.pm" class="id"><a name="SOUNDNESS.pm" class="">pm</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="kept" class="id"><a name="kept" class="">kept</a></span> (<span id="id:143" class="id"><a name="id:143" class="">id:</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:143">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.used">used</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="kept_closed" class="id"><a name="kept_closed" class="">kept_closed:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:144" class="id"><a name="id:144" class="">id</a></span> <span id="gd:145" class="id"><a name="gd:145" class="">gd</a></span> <span id="id':146" class="id"><a name="id':146" class="">id',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:144">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.pm">pm!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:145">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:145">gd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id':146">id'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id':146">id'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_closed">used_closed;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="kept_main" class="id"><a name="kept_main" class="">kept_main:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_main">used_main;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="kept_public" class="id"><a name="kept_public" class="">kept_public:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:147" class="id"><a name="id:147" class="">id,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:147">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:147">id</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_public">used_public;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Relating <span class="bracket"><span class="id">Genv.find_symbol</span></span> operations in the original and transformed program </div>
<br/>
<span class="vernacular">Lemma</span> <span id="transform_find_symbol_1" class="id"><a name="transform_find_symbol_1" class="">transform_find_symbol_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:148" class="id"><a name="id:148" class="">id</a></span> <span id="b:149" class="id"><a name="b:149" class="">b,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:148">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:149">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:148">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="b':150" class="id"><a name="b':150" class="">b',</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:148">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':150">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="gallina-kwd">exists</span> <span id="g:152" class="id"><span id="g:151" class="id"><a name="g:152" class="">g,</a></span></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#g:151">g</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_inversion">Genv.find_symbol_inversion</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">A</span> <span class="gallina-kwd">as</span> (<span class="id">g</span> &amp; <span class="id">P</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_exists">Genv.find_symbol_exists</a></span> <span class="gallina-kwd">with</span> <span class="id">g</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_def">match_prog_def</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_1">IS.mem_1</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="transform_find_symbol_2" class="id"><a name="transform_find_symbol_2" class="">transform_find_symbol_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:153" class="id"><a name="id:153" class="">id</a></span> <span id="b:154" class="id"><a name="b:154" class="">b,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:153">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:154">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:153">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="gallina-kwd">exists</span> <span id="b':155" class="id"><a name="b':155" class="">b',</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:153">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':155">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="gallina-kwd">exists</span> <span id="g:157" class="id"><span id="g:156" class="id"><a name="g:157" class="">g,</a></span></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#g:156">g</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_inversion">Genv.find_symbol_inversion</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">A</span> <span class="gallina-kwd">as</span> (<span class="id">g</span> &amp; <span class="id">P</span>).<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_def">match_prog_def</a></span> <span class="gallina-kwd">in</span> <span class="id">P</span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.used">used</a></span>) <span class="id">eqn:U;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_2">IS.mem_2</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_exists">Genv.find_symbol_exists</a></span> <span class="gallina-kwd">with</span> <span class="id">g</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Injections that preserve used globals. </div>
<br/>
<span class="vernacular">Record</span> <span id="meminj_preserves_globals" class="id"><a name="meminj_preserves_globals" class="">meminj_preserves_globals</a></span> (<span id="f:158" class="id"><a name="f:158" class="">f:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span id="symbols_inject_1" class="id"><a name="symbols_inject_1" class="">symbols_inject_1:</a></span> <span class="gallina-kwd">forall</span> <span id="id:160" class="id"><a name="id:160" class="">id</a></span> <span id="b:161" class="id"><a name="b:161" class="">b</a></span> <span id="b':162" class="id"><a name="b':162" class="">b'</a></span> <span id="delta:163" class="id"><a name="delta:163" class="">delta,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#f:158">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:161">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':162">b',</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:163">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:160">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:161">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:163">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:160">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':162">b';</a></span><br/>
&nbsp;&nbsp;<span id="symbols_inject_2" class="id"><a name="symbols_inject_2" class="">symbols_inject_2:</a></span> <span class="gallina-kwd">forall</span> <span id="id:165" class="id"><a name="id:165" class="">id</a></span> <span id="b:166" class="id"><a name="b:166" class="">b,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:165">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:165">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:166">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="b':167" class="id"><a name="b':167" class="">b',</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:165">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':167">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:158">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:166">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':167">b',</a></span> <span class="id">0</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span id="symbols_inject_3" class="id"><a name="symbols_inject_3" class="">symbols_inject_3:</a></span> <span class="gallina-kwd">forall</span> <span id="id:169" class="id"><a name="id:169" class="">id</a></span> <span id="b':170" class="id"><a name="b':170" class="">b',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:169">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':170">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="b:171" class="id"><a name="b:171" class="">b,</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:169">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:171">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:158">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:171">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':170">b',</a></span> <span class="id">0</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span id="defs_inject" class="id"><a name="defs_inject" class="">defs_inject:</a></span> <span class="gallina-kwd">forall</span> <span id="b:173" class="id"><a name="b:173" class="">b</a></span> <span id="b':174" class="id"><a name="b':174" class="">b'</a></span> <span id="delta:175" class="id"><a name="delta:175" class="">delta</a></span> <span id="gd:176" class="id"><a name="gd:176" class="">gd,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#f:158">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:173">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':174">b',</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:175">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:173">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:176">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':174">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:176">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:175">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="id:177" class="id"><a name="id:177" class="">id,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:176">gd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:177">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:177">id</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span id="defs_rev_inject" class="id"><a name="defs_rev_inject" class="">defs_rev_inject:</a></span> <span class="gallina-kwd">forall</span> <span id="b:179" class="id"><a name="b:179" class="">b</a></span> <span id="b':180" class="id"><a name="b':180" class="">b'</a></span> <span id="delta:181" class="id"><a name="delta:181" class="">delta</a></span> <span id="gd:182" class="id"><a name="gd:182" class="">gd,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#f:158">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:179">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':180">b',</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:181">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':180">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:182">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:179">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:182">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:181">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="init_meminj" class="id"><a name="init_meminj" class="">init_meminj</a></span> <span class="id">:</span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span> <span id="b:184" class="id"><a name="b:184" class="">b</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:184">b</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id">id</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b'</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b',</span> <span class="id">0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="init_meminj_eq" class="id"><a name="init_meminj_eq" class="">init_meminj_eq:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:185" class="id"><a name="id:185" class="">id</a></span> <span id="b:186" class="id"><a name="b:186" class="">b</a></span> <span id="b':187" class="id"><a name="b':187" class="">b',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:185">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:186">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:185">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':187">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj">init_meminj</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:186">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':187">b',</a></span> <span class="id">0</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj">init_meminj</a></span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_invert_symbol">Genv.find_invert_symbol</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="init_meminj_invert" class="id"><a name="init_meminj_invert" class="">init_meminj_invert:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:188" class="id"><a name="b:188" class="">b</a></span> <span id="b':189" class="id"><a name="b':189" class="">b'</a></span> <span id="delta:190" class="id"><a name="delta:190" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj">init_meminj</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:188">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':189">b',</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:190">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:190">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="gallina-kwd">exists</span> <span id="id:191" class="id"><a name="id:191" class="">id,</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:191">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:188">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:191">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':189">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj">init_meminj;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[id|]</span> <span class="id">eqn:S;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id">id</span>) <span class="gallina-kwd">as</span> <span class="id">[b''|]</span> <span class="id">eqn:F;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">id</span>. <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">Genv.invert_find_symbol</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="init_meminj_preserves_globals" class="id"><a name="init_meminj_preserves_globals" class="">init_meminj_preserves_globals:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj">init_meminj</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert">init_meminj_invert;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">id1</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">id1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">id</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">Genv.genv_vars_inj</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span>)<span class="id">;</span> <span class="id">eauto</span>). <span class="id">subst</span> <span class="id">id1</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#transform_find_symbol_1">transform_find_symbol_1;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">b'</span> &amp; <span class="id">F</span>). <span class="gallina-kwd">exists</span> <span class="id">b';</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_eq">init_meminj_eq;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#transform_find_symbol_2">transform_find_symbol_2;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">K</span> &amp; <span class="id">b</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">b;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_eq">init_meminj_eq;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert">init_meminj_invert;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id">id</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#transform_find_symbol_2">transform_find_symbol_2;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.pm">pm!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">gd</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#pm">pm;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span>. <span class="gallina-kwd">exists</span> <span class="id">b;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> ((<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">gd</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">erewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_def">match_prog_def</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_1">IS.mem_1</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span>. <span class="id">destruct</span> <span class="id">H3</span> <span class="gallina-kwd">as</span> (<span class="id">b1</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="gallina-kwd">in</span> <span class="id">P</span>. <span class="id">replace</span> <span class="id">b'</span> <span class="gallina-kwd">with</span> <span class="id">b1</span> <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">split;</span> <span class="id">auto</span>. <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept_closed">kept_closed;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert">init_meminj_invert;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> ((<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">gd</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span>. <span class="gallina-kwd">exists</span> <span class="id">b';</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_def">match_prog_def</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.used">used</a></span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">destruct</span> <span class="id">H1</span> <span class="gallina-kwd">as</span> (<span class="id">b1</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="gallina-kwd">in</span> <span class="id">P</span>. <span class="id">replace</span> <span class="id">b</span> <span class="gallina-kwd">with</span> <span class="id">b1</span> <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="globals_symbols_inject" class="id"><a name="globals_symbols_inject" class="">globals_symbols_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="j:192" class="id"><a name="j:192" class="">j,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:192">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:192">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">E1:</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv_public">Genv.globalenv_public</a></span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">E2:</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tge">tge;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv_public">Genv.globalenv_public</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_public">match_prog_public;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">[|split;[|split]];</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">simpl;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.public_symbol">Genv.public_symbol</a></span><span class="id">;</span> <span class="id">rewrite</span> <span class="id">E1,</span> <span class="id">E2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id">id</span>) <span class="gallina-kwd">as</span> <span class="id">[b'|]</span> <span class="id">eqn:TFS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_3">symbols_inject_3;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">b</span> &amp; <span class="id">FS</span> &amp; <span class="id">INJ</span>). <span class="id">rewrite</span> <span class="id">FS</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id">id</span>) <span class="gallina-kwd">as</span> <span class="id">[b|]</span> <span class="id">eqn:FS;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>))<span class="id">;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_2">symbols_inject_2;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept_public">kept_public;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">b'</span> &amp; <span class="id">TFS'</span> &amp; <span class="id">INJ</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_1">symbols_inject_1;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.public_symbol">Genv.public_symbol</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id">id</span>) <span class="gallina-kwd">as</span> <span class="id">[b|]</span> <span class="id">eqn:FS;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E1</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>))<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_2">symbols_inject_2;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept_public">kept_public;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">b'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>)<span class="id">;</span> <span class="gallina-kwd">exists</span> <span class="id">b';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">simpl</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.block_is_volatile">Genv.block_is_volatile</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id">b1</span>) <span class="gallina-kwd">as</span> <span class="id">[gv|]</span> <span class="id">eqn:V1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_iff">Genv.find_var_info_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">V1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs_inject">defs_inject;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_iff">Genv.find_var_info_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">A</span>. <span class="id">rewrite</span> <span class="id">A;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id">b2</span>) <span class="gallina-kwd">as</span> <span class="id">[gv|]</span> <span class="id">eqn:V2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_iff">Genv.find_var_info_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">V2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs_rev_inject">defs_rev_inject;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_iff">Genv.find_var_info_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">A</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="symbol_address_inject" class="id"><a name="symbol_address_inject" class="">symbol_address_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="j:193" class="id"><a name="j:193" class="">j</a></span> <span id="id:194" class="id"><a name="id:194" class="">id</a></span> <span id="ofs:195" class="id"><a name="ofs:195" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:193">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:194">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:193">j</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:194">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ofs:195">ofs</a></span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:194">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ofs:195">ofs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id">id</span>) <span class="gallina-kwd">as</span> <span class="id">[b|]</span> <span class="id">eqn:FS;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_2">symbols_inject_2;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">b'</span> &amp; <span class="id">TFS</span> &amp; <span class="id">INJ</span>). <span class="id">rewrite</span> <span class="id">TFS</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Semantic preservation </div>
<br/>
<span class="vernacular">Definition</span> <span id="regset_inject" class="id"><a name="regset_inject" class="">regset_inject</a></span> (<span id="f:196" class="id"><a name="f:196" class="">f:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span id="rs:197" class="id"><a name="rs:197" class="">rs</a></span> <span id="rs':198" class="id"><a name="rs':198" class="">rs':</a></span> <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>)<span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="r:199" class="id"><a name="r:199" class="">r,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:196">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:197">rs#r</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':198">rs'#r</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="regs_inject" class="id"><a name="regs_inject" class="">regs_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:200" class="id"><a name="f:200" class="">f</a></span> <span id="rs:201" class="id"><a name="rs:201" class="">rs</a></span> <span id="rs':202" class="id"><a name="rs':202" class="">rs',</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:200">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:201">rs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':202">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">forall</span> <span id="l:203" class="id"><a name="l:203" class="">l,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:200">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:201">rs##l</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':202">rs'##l</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl</span>. <span class="id">constructor</span>. <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="set_reg_inject" class="id"><a name="set_reg_inject" class="">set_reg_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:204" class="id"><a name="f:204" class="">f</a></span> <span id="rs:205" class="id"><a name="rs:205" class="">rs</a></span> <span id="rs':206" class="id"><a name="rs':206" class="">rs'</a></span> <span id="r:207" class="id"><a name="r:207" class="">r</a></span> <span id="v:208" class="id"><a name="v:208" class="">v</a></span> <span id="v':209" class="id"><a name="v':209" class="">v',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:204">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:205">rs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':206">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:204">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v:208">v</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v':209">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:204">f</a></span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:205">rs#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v:208">v</a></span>) (<span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':206">rs'#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v':209">v'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="set_res_inject" class="id"><a name="set_res_inject" class="">set_res_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:210" class="id"><a name="f:210" class="">f</a></span> <span id="rs:211" class="id"><a name="rs:211" class="">rs</a></span> <span id="rs':212" class="id"><a name="rs':212" class="">rs'</a></span> <span id="res:213" class="id"><a name="res:213" class="">res</a></span> <span id="v:214" class="id"><a name="v:214" class="">v</a></span> <span id="v':215" class="id"><a name="v':215" class="">v',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:210">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:211">rs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':212">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:210">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v:214">v</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v':215">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:210">f</a></span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#res:213">res</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v:214">v</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:211">rs</a></span>) (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#res:213">res</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v':215">v'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':212">rs'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">res;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#set_reg_inject">set_reg_inject;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="regset_inject_incr" class="id"><a name="regset_inject_incr" class="">regset_inject_incr:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:216" class="id"><a name="f:216" class="">f</a></span> <span id="f':217" class="id"><a name="f':217" class="">f'</a></span> <span id="rs:218" class="id"><a name="rs:218" class="">rs</a></span> <span id="rs':219" class="id"><a name="rs':219" class="">rs',</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:216">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:218">rs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':219">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:216">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f':217">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f':217">f'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:218">rs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':219">rs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_incr">val_inject_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">f;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="regset_undef_inject" class="id"><a name="regset_undef_inject" class="">regset_undef_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:220" class="id"><a name="f:220" class="">f,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:220">f</a></span> (<span class="id"><a href="compcert.backend.Registers.html#Regmap.init">Regmap.init</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>) (<span class="id"><a href="compcert.backend.Registers.html#Regmap.init">Regmap.init</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gi">Regmap.gi</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="init_regs_inject" class="id"><a name="init_regs_inject" class="">init_regs_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:221" class="id"><a name="f:221" class="">f</a></span> <span id="args:222" class="id"><a name="args:222" class="">args</a></span> <span id="args':223" class="id"><a name="args':223" class="">args',</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:221">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#args:222">args</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#args':223">args'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="params:224" class="id"><a name="params:224" class="">params,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:221">f</a></span> (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#args:222">args</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#params:224">params</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#args':223">args'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#params:224">params</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros;</span> <span class="id">destruct</span> <span class="id">params;</span> <span class="id">simpl;</span> <span class="id">try</span> (<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_undef_inject">regset_undef_inject</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#set_reg_inject">set_reg_inject;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Inductive</span> <span id="match_stacks" class="id"><a name="match_stacks" class="">match_stacks</a></span> (<span id="j:225" class="id"><a name="j:225" class="">j:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>)<span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_stacks_nil" class="id"><a name="match_stacks_nil" class="">match_stacks_nil:</a></span> <span class="gallina-kwd">forall</span> <span id="bound:228" class="id"><a name="bound:228" class="">bound</a></span> <span id="tbound:229" class="id"><a name="tbound:229" class="">tbound,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:225">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#bound:228">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound:229">tbound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks:226">match_stacks</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:225">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#bound:228">bound</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound:229">tbound</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_stacks_cons" class="id"><a name="match_stacks_cons" class="">match_stacks_cons:</a></span> <span class="gallina-kwd">forall</span> <span id="res:230" class="id"><a name="res:230" class="">res</a></span> <span id="f:231" class="id"><a name="f:231" class="">f</a></span> <span id="sp:232" class="id"><a name="sp:232" class="">sp</a></span> <span id="pc:233" class="id"><a name="pc:233" class="">pc</a></span> <span id="rs:234" class="id"><a name="rs:234" class="">rs</a></span> <span id="s:235" class="id"><a name="s:235" class="">s</a></span> <span id="tsp:236" class="id"><a name="tsp:236" class="">tsp</a></span> <span id="trs:237" class="id"><a name="trs:237" class="">trs</a></span> <span id="ts:238" class="id"><a name="ts:238" class="">ts</a></span> <span id="bound:239" class="id"><a name="bound:239" class="">bound</a></span> <span id="tbound:240" class="id"><a name="tbound:240" class="">tbound</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STACKS:241" class="id"><a name="STACKS:241" class="">STACKS:</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks:226">match_stacks</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:225">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:235">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:238">ts</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp:232">sp</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tsp:236">tsp</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="KEPT:243" class="id"><a name="KEPT:243" class="">KEPT:</a></span> <span class="gallina-kwd">forall</span> <span id="id:242" class="id"><a name="id:242" class="">id,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_function">ref_function</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:231">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:242">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:242">id</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SPINJ:244" class="id"><a name="SPINJ:244" class="">SPINJ:</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:225">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp:232">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#tsp:236">tsp,</a></span> <span class="id">0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="REGINJ:245" class="id"><a name="REGINJ:245" class="">REGINJ:</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:225">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:234">rs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#trs:237">trs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="BELOW:246" class="id"><a name="BELOW:246" class="">BELOW:</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp:232">sp</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#bound:239">bound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="TBELOW:247" class="id"><a name="TBELOW:247" class="">TBELOW:</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tsp:236">tsp</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound:240">tbound</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks:226">match_stacks</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:225">j</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#res:230">res</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:231">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp:232">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#pc:233">pc</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:234">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:235">s</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#res:230">res</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:231">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tsp:236">tsp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#pc:233">pc</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#trs:237">trs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:238">ts</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#bound:239">bound</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound:240">tbound</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_preserves_globals" class="id"><a name="match_stacks_preserves_globals" class="">match_stacks_preserves_globals:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="j:248" class="id"><a name="j:248" class="">j</a></span> <span id="s:249" class="id"><a name="s:249" class="">s</a></span> <span id="ts:250" class="id"><a name="ts:250" class="">ts</a></span> <span id="bound:251" class="id"><a name="bound:251" class="">bound</a></span> <span id="tbound:252" class="id"><a name="tbound:252" class="">tbound,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:248">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:249">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:250">ts</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#bound:251">bound</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound:252">tbound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:248">j</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_incr" class="id"><a name="match_stacks_incr" class="">match_stacks_incr:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="j:253" class="id"><a name="j:253" class="">j</a></span> <span id="j':254" class="id"><a name="j':254" class="">j',</a></span> <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:253">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j':254">j'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:255" class="id"><a name="s:255" class="">s</a></span> <span id="ts:256" class="id"><a name="ts:256" class="">ts</a></span> <span id="bound:257" class="id"><a name="bound:257" class="">bound</a></span> <span id="tbound:258" class="id"><a name="tbound:258" class="">tbound,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:253">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:255">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:256">ts</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#bound:257">bound</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound:258">tbound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b1:259" class="id"><a name="b1:259" class="">b1</a></span> <span id="b2:260" class="id"><a name="b2:260" class="">b2</a></span> <span id="delta:261" class="id"><a name="delta:261" class="">delta,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#j:253">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b1:259">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j':254">j'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b1:259">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b2:260">b2,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:261">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#bound:257">bound</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b1:259">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound:258">tbound</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b2:260">b2</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j':254">j'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:255">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:256">ts</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#bound:257">bound</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound:258">tbound</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">2;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id">SAME:</span> <span class="gallina-kwd">forall</span> <span id="b:265" class="id"><span id="b:262" class="id"><a name="b:265" class="">b</a></span></span> <span id="b':266" class="id"><span id="b':263" class="id"><a name="b':266" class="">b'</a></span></span> <span id="delta:267" class="id"><span id="delta:264" class="id"><a name="delta:267" class="">delta,</a></span></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:262">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j'</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:262">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':263">b',</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:264">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">j</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:262">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':263">b',</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:264">delta</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id">j</span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[[b1</span> <span class="id">delta1]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:</span> <span class="id">J</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H;</span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H3;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">elim</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>. <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SAME':</span> <span class="gallina-kwd">forall</span> <span id="b:271" class="id"><span id="b:268" class="id"><a name="b:271" class="">b</a></span></span> <span id="b':272" class="id"><span id="b':269" class="id"><a name="b':272" class="">b'</a></span></span> <span id="delta:273" class="id"><span id="delta:270" class="id"><a name="delta:273" class="">delta,</a></span></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':269">b'</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j'</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:268">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':269">b',</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:270">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">j</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:268">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':269">b',</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:270">delta</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id">j</span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[[b1</span> <span class="id">delta1]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:</span> <span class="id">J</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H;</span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H3;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">elim</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span> <span class="id">b'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>. <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">auto</span>.  <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_1">symbols_inject_1;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">SAME;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_2">symbols_inject_2;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">b'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">b';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_3">symbols_inject_3;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">b</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">b;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs_inject">defs_inject;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">SAME;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs_rev_inject">defs_rev_inject;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">SAME';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHmatch_stacks</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">H1;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">split;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject_incr">regset_inject_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">j;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_bound" class="id"><a name="match_stacks_bound" class="">match_stacks_bound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="j:274" class="id"><a name="j:274" class="">j</a></span> <span id="s:275" class="id"><a name="s:275" class="">s</a></span> <span id="ts:276" class="id"><a name="ts:276" class="">ts</a></span> <span id="bound:277" class="id"><a name="bound:277" class="">bound</a></span> <span id="tbound:278" class="id"><a name="tbound:278" class="">tbound</a></span> <span id="bound':279" class="id"><a name="bound':279" class="">bound'</a></span> <span id="tbound':280" class="id"><a name="tbound':280" class="">tbound',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:274">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:275">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:276">ts</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#bound:277">bound</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound:278">tbound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#bound:277">bound</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#bound':279">bound'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound:278">tbound</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound':280">tbound'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:274">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:275">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:276">ts</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#bound':279">bound'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tbound':280">tbound'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">constructor;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Inductive</span> <span id="match_states" class="id"><a name="match_states" class="">match_states:</a></span> <span class="id"><a href="compcert.backend.RTL.html#state">state</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#state">state</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_states_regular" class="id"><a name="match_states_regular" class="">match_states_regular:</a></span> <span class="gallina-kwd">forall</span> <span id="s:283" class="id"><a name="s:283" class="">s</a></span> <span id="f:284" class="id"><a name="f:284" class="">f</a></span> <span id="sp:285" class="id"><a name="sp:285" class="">sp</a></span> <span id="pc:286" class="id"><a name="pc:286" class="">pc</a></span> <span id="rs:287" class="id"><a name="rs:287" class="">rs</a></span> <span id="m:288" class="id"><a name="m:288" class="">m</a></span> <span id="ts:289" class="id"><a name="ts:289" class="">ts</a></span> <span id="tsp:290" class="id"><a name="tsp:290" class="">tsp</a></span> <span id="trs:291" class="id"><a name="trs:291" class="">trs</a></span> <span id="tm:292" class="id"><a name="tm:292" class="">tm</a></span> <span id="j:293" class="id"><a name="j:293" class="">j</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STACKS:294" class="id"><a name="STACKS:294" class="">STACKS:</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:293">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:283">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:289">ts</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp:285">sp</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tsp:290">tsp</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="KEPT:296" class="id"><a name="KEPT:296" class="">KEPT:</a></span> <span class="gallina-kwd">forall</span> <span id="id:295" class="id"><a name="id:295" class="">id,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_function">ref_function</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:284">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:295">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:295">id</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SPINJ:297" class="id"><a name="SPINJ:297" class="">SPINJ:</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:293">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp:285">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#tsp:290">tsp,</a></span> <span class="id">0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="REGINJ:298" class="id"><a name="REGINJ:298" class="">REGINJ:</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:293">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:287">rs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#trs:291">trs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MEMINJ:299" class="id"><a name="MEMINJ:299" class="">MEMINJ:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:293">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:288">m</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tm:292">tm</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_states:281">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:283">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:284">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp:285">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#pc:286">pc</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:287">rs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:288">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:289">ts</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:284">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tsp:290">tsp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#pc:286">pc</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#trs:291">trs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tm:292">tm</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_states_call" class="id"><a name="match_states_call" class="">match_states_call:</a></span> <span class="gallina-kwd">forall</span> <span id="s:300" class="id"><a name="s:300" class="">s</a></span> <span id="fd:301" class="id"><a name="fd:301" class="">fd</a></span> <span id="args:302" class="id"><a name="args:302" class="">args</a></span> <span id="m:303" class="id"><a name="m:303" class="">m</a></span> <span id="ts:304" class="id"><a name="ts:304" class="">ts</a></span> <span id="targs:305" class="id"><a name="targs:305" class="">targs</a></span> <span id="tm:306" class="id"><a name="tm:306" class="">tm</a></span> <span id="j:307" class="id"><a name="j:307" class="">j</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STACKS:308" class="id"><a name="STACKS:308" class="">STACKS:</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:307">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:300">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:304">ts</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:303">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tm:306">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="KEPT:310" class="id"><a name="KEPT:310" class="">KEPT:</a></span> <span class="gallina-kwd">forall</span> <span id="id:309" class="id"><a name="id:309" class="">id,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_fundef">ref_fundef</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#fd:301">fd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:309">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:309">id</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="ARGINJ:311" class="id"><a name="ARGINJ:311" class="">ARGINJ:</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:307">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#args:302">args</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#targs:305">targs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MEMINJ:312" class="id"><a name="MEMINJ:312" class="">MEMINJ:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:307">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:303">m</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tm:306">tm</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_states:281">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:300">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#fd:301">fd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#args:302">args</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:303">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:304">ts</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#fd:301">fd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#targs:305">targs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tm:306">tm</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_states_return" class="id"><a name="match_states_return" class="">match_states_return:</a></span> <span class="gallina-kwd">forall</span> <span id="s:313" class="id"><a name="s:313" class="">s</a></span> <span id="res:314" class="id"><a name="res:314" class="">res</a></span> <span id="m:315" class="id"><a name="m:315" class="">m</a></span> <span id="ts:316" class="id"><a name="ts:316" class="">ts</a></span> <span id="tres:317" class="id"><a name="tres:317" class="">tres</a></span> <span id="tm:318" class="id"><a name="tm:318" class="">tm</a></span> <span id="j:319" class="id"><a name="j:319" class="">j</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STACKS:320" class="id"><a name="STACKS:320" class="">STACKS:</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:319">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:313">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:316">ts</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:315">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tm:318">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RESINJ:321" class="id"><a name="RESINJ:321" class="">RESINJ:</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:319">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#res:314">res</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tres:317">tres</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MEMINJ:322" class="id"><a name="MEMINJ:322" class="">MEMINJ:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:319">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:315">m</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tm:318">tm</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_states:281">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#s:313">s</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#res:314">res</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:315">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ts:316">ts</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tres:317">tres</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tm:318">tm</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="external_call_inject" class="id"><a name="external_call_inject" class="">external_call_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ef:323" class="id"><a name="ef:323" class="">ef</a></span> <span id="vargs:324" class="id"><a name="vargs:324" class="">vargs</a></span> <span id="m1:325" class="id"><a name="m1:325" class="">m1</a></span> <span id="t:326" class="id"><a name="t:326" class="">t</a></span> <span id="vres:327" class="id"><a name="vres:327" class="">vres</a></span> <span id="m2:328" class="id"><a name="m2:328" class="">m2</a></span> <span id="f:329" class="id"><a name="f:329" class="">f</a></span> <span id="m1':330" class="id"><a name="m1':330" class="">m1'</a></span> <span id="vargs':331" class="id"><a name="vargs':331" class="">vargs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:329">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ef:323">ef</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vargs:324">vargs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m1:325">m1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#t:326">t</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vres:327">vres</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m2:328">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:329">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m1:325">m1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m1':330">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:329">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vargs:324">vargs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vargs':331">vargs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="f':332" class="id"><a name="f':332" class="">f',</a></span> <span class="gallina-kwd">exists</span> <span id="vres':333" class="id"><a name="vres':333" class="">vres',</a></span> <span class="gallina-kwd">exists</span> <span id="m2':334" class="id"><a name="m2':334" class="">m2',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ef:323">ef</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vargs':331">vargs'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m1':330">m1'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#t:326">t</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vres':333">vres'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m2':334">m2'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f':332">f'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vres:327">vres</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vres':333">vres'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f':332">f'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m2:328">m2</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m2':334">m2'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:329">f</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#m1:325">m1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m2:328">m2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:329">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m1:325">m1</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#m1':330">m1'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m2':334">m2'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:329">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f':332">f'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:329">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f':332">f'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m1:325">m1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m1':330">m1'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_inject_gen">external_call_mem_inject_gen;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#globals_symbols_inject">globals_symbols_inject;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="find_function_inject" class="id"><a name="find_function_inject" class="">find_function_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="j:335" class="id"><a name="j:335" class="">j</a></span> <span id="ros:336" class="id"><a name="ros:336" class="">ros</a></span> <span id="rs:337" class="id"><a name="rs:337" class="">rs</a></span> <span id="fd:338" class="id"><a name="fd:338" class="">fd</a></span> <span id="trs:339" class="id"><a name="trs:339" class="">trs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:335">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.RTL.html#find_function">find_function</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ros:336">ros</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:337">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#fd:338">fd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ros:336">ros</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#inl">inl</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:335">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:337">rs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#trs:339">trs</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id">id</span> <span class="gallina-kwd">end</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.RTL.html#find_function">find_function</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ros:336">ros</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#trs:339">trs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#fd:338">fd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> (<span class="gallina-kwd">forall</span> <span id="id:341" class="id"><a name="id:341" class="">id,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_fundef">ref_fundef</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#fd:338">fd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:341">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:341">id</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">ros</span> <span class="gallina-kwd">as</span> <span class="id">[r|id];</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_inv">Genv.find_funct_inv</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">b</span> &amp; <span class="id">R</span>). <span class="id">rewrite</span> <span class="id">R</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_find_funct_ptr">Genv.find_funct_find_funct_ptr</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H1</span> <span class="id">r</span>). <span class="id">rewrite</span> <span class="id">R</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs_inject">defs_inject;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">B;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id">id</span>) <span class="gallina-kwd">as</span> <span class="id">[b|]</span> <span class="id">eqn:FS;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_2">symbols_inject_2;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">tb</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">rewrite</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs_inject">defs_inject;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="eval_builtin_arg_inject" class="id"><a name="eval_builtin_arg_inject" class="">eval_builtin_arg_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rs:342" class="id"><a name="rs:342" class="">rs</a></span> <span id="sp:343" class="id"><a name="sp:343" class="">sp</a></span> <span id="m:344" class="id"><a name="m:344" class="">m</a></span> <span id="j:345" class="id"><a name="j:345" class="">j</a></span> <span id="rs':346" class="id"><a name="rs':346" class="">rs'</a></span> <span id="sp':347" class="id"><a name="sp':347" class="">sp'</a></span> <span id="m':348" class="id"><a name="m':348" class="">m'</a></span> <span id="a:349" class="id"><a name="a:349" class="">a</a></span> <span id="v:350" class="id"><a name="v:350" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:351" class="id"><a name="r:351" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:342">rs#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp:343">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:344">m</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#a:349">a</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v:350">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#j:345">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp:343">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#sp':347">sp',</a></span> <span class="id">0</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:345">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:345">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:342">rs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':346">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:345">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:344">m</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m':348">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="id:352" class="id"><a name="id:352" class="">id,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:352">id</a></span> (<span class="id"><a href="compcert.common.AST.html#globals_of_builtin_arg">globals_of_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#a:349">a</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:352">id</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v':353" class="id"><a name="v':353" class="">v',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:354" class="id"><a name="r:354" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':346">rs'#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp':347">sp'</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#m':348">m'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#a:349">a</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v':353">v'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:345">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v:350">v</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#v':353">v'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span> <span class="id">SP</span> <span class="id">GL</span> <span class="id">RS</span> <span class="id">MI</span> <span class="id">K;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">K</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">exists</span> <span class="id">rs'#x;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
<span class="id">-</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inject">Mem.load_inject</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">v'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="gallina-kwd">exists</span> <span class="id">v';</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">split;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>. <span class="id">simpl</span>. <span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">j</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id">id</span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id">id</span> <span class="id">ofs</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span><span class="id">;</span> <span class="id">simpl;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id">id</span>) <span class="gallina-kwd">as</span> <span class="id">[b|]</span> <span class="id">eqn:FS;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_2">symbols_inject_2;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">b'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">rewrite</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">v'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="gallina-kwd">exists</span> <span class="id">v';</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">split;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span><span class="id">;</span> <span class="id">simpl;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id">id</span>) <span class="gallina-kwd">as</span> <span class="id">[b|]</span> <span class="id">eqn:FS;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_2">symbols_inject_2;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">b'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">rewrite</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">IHeval_builtin_arg1</span> <span class="gallina-kwd">as</span> (<span class="id">v1'</span> &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>)<span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHeval_builtin_arg2</span> <span class="gallina-kwd">as</span> (<span class="id">v2'</span> &amp; <span class="id">A2</span> &amp; <span class="id">B2</span>)<span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.longofwords">Val.longofwords</a></span> <span class="id">v1'</span> <span class="id">v2'</span>)<span class="id">;</span> <span class="id">split;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.longofwords_inject">Val.longofwords_inject</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">IHeval_builtin_arg1</span> <span class="gallina-kwd">as</span> (<span class="id">v1'</span> &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>)<span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHeval_builtin_arg2</span> <span class="gallina-kwd">as</span> (<span class="id">v2'</span> &amp; <span class="id">A2</span> &amp; <span class="id">B2</span>)<span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">auto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Values.html#Val.add_inject">Val.add_inject</a></span><span class="id">,</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_inject">Val.addl_inject</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="eval_builtin_args_inject" class="id"><a name="eval_builtin_args_inject" class="">eval_builtin_args_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rs:355" class="id"><a name="rs:355" class="">rs</a></span> <span id="sp:356" class="id"><a name="sp:356" class="">sp</a></span> <span id="m:357" class="id"><a name="m:357" class="">m</a></span> <span id="j:358" class="id"><a name="j:358" class="">j</a></span> <span id="rs':359" class="id"><a name="rs':359" class="">rs'</a></span> <span id="sp':360" class="id"><a name="sp':360" class="">sp'</a></span> <span id="m':361" class="id"><a name="m':361" class="">m'</a></span> <span id="al:362" class="id"><a name="al:362" class="">al</a></span> <span id="vl:363" class="id"><a name="vl:363" class="">vl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:364" class="id"><a name="r:364" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:355">rs#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp:356">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:357">m</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#al:362">al</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vl:363">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#j:358">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp:356">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#sp':360">sp',</a></span> <span class="id">0</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:358">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:358">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs:355">rs</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':359">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:358">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:357">m</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m':361">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="id:365" class="id"><a name="id:365" class="">id,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:365">id</a></span> (<span class="id"><a href="compcert.common.AST.html#globals_of_builtin_args">globals_of_builtin_args</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#al:362">al</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:365">id</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="vl':366" class="id"><a name="vl':366" class="">vl',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:367" class="id"><a name="r:367" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#rs':359">rs'#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#sp':360">sp'</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Unusedglobproof.html#m':361">m'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#al:362">al</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vl':366">vl'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#j:358">j</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vl:363">vl</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#vl':366">vl'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">exists</span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>)<span class="id">;</span> <span class="id">split;</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#eval_builtin_arg_inject">eval_builtin_arg_inject;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>. <span class="id">intros</span> (<span class="id">v1'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHlist_forall2</span> <span class="gallina-kwd">as</span> (<span class="id">vl'</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span>)<span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">v1'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">vl'</span>)<span class="id">;</span> <span class="id">split;</span> <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="step_simulation" class="id"><a name="step_simulation" class="">step_simulation:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="S1:368" class="id"><a name="S1:368" class="">S1</a></span> <span id="t:369" class="id"><a name="t:369" class="">t</a></span> <span id="S2:370" class="id"><a name="S2:370" class="">S2,</a></span> <span class="id"><a href="compcert.backend.RTL.html#step">step</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S1:368">S1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#t:369">t</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S2:370">S2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="S1':371" class="id"><a name="S1':371" class="">S1'</a></span> (<span id="MS:372" class="id"><a name="MS:372" class="">MS:</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S1:368">S1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S1':371">S1'</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="S2':373" class="id"><a name="S2':373" class="">S2',</a></span> <span class="id"><a href="compcert.backend.RTL.html#step">step</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S1':371">S1'</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#t:369">t</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S2':373">S2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S2:370">S2</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S2':373">S2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros;</span> <span class="id">inv</span> <span class="id">MS</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;nop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Inop">exec_Inop;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;op&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="gallina-kwd">exists</span> <span id="tv:375" class="id"><span id="tv:374" class="id"><a name="tv:375" class="">tv,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">tsp</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">op</span> <span class="id">trs##args</span> <span class="id">tm</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tv:374">tv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">j</span> <span class="id">v</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tv:374">tv</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation_inj">eval_operation_inj</a></span> <span class="gallina-kwd">with</span> (<span class="id">ge1</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span>) (<span class="id">m1</span> <span class="id">:=</span> <span class="id">m</span>) (<span class="id">sp1</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp0</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id">vl1</span> <span class="id">:=</span> <span class="id">rs##args</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_inject_val">Mem.valid_pointer_inject_val</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject_val">Mem.weak_valid_pointer_inject_val</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.different_pointers_inject">Mem.different_pointers_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbol_address_inject">symbol_address_inject</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">KEPT</span>. <span class="id">red</span>. <span class="gallina-kwd">exists</span> <span class="id">pc,</span> (<span class="id"><a href="compcert.backend.RTL.html#Iop">Iop</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">pc'</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regs_inject">regs_inject;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">A</span> <span class="gallina-kwd">as</span> (<span class="id">tv</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#set_reg_inject">set_reg_inject;</a></span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;load&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="gallina-kwd">exists</span> <span id="ta:377" class="id"><span id="ta:376" class="id"><a name="ta:377" class="">ta,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">tsp</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">addr</span> <span class="id">trs##args</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ta:376">ta</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">j</span> <span class="id">a</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ta:376">ta</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_inj">eval_addressing_inj</a></span> <span class="gallina-kwd">with</span> (<span class="id">ge1</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span>) (<span class="id">sp1</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp0</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id">vl1</span> <span class="id">:=</span> <span class="id">rs##args</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbol_address_inject">symbol_address_inject</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">KEPT</span>. <span class="id">red</span>. <span class="gallina-kwd">exists</span> <span class="id">pc,</span> (<span class="id"><a href="compcert.backend.RTL.html#Iload">Iload</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id">pc'</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regs_inject">regs_inject;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">A</span> <span class="gallina-kwd">as</span> (<span class="id">ta</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">tv</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iload">exec_Iload;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#set_reg_inject">set_reg_inject;</a></span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;store&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="gallina-kwd">exists</span> <span id="ta:379" class="id"><span id="ta:378" class="id"><a name="ta:379" class="">ta,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">tsp</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">addr</span> <span class="id">trs##args</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ta:378">ta</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">j</span> <span class="id">a</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ta:378">ta</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_inj">eval_addressing_inj</a></span> <span class="gallina-kwd">with</span> (<span class="id">ge1</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span>) (<span class="id">sp1</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp0</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id">vl1</span> <span class="id">:=</span> <span class="id">rs##args</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbol_address_inject">symbol_address_inject</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">KEPT</span>. <span class="id">red</span>. <span class="gallina-kwd">exists</span> <span class="id">pc,</span> (<span class="id"><a href="compcert.backend.RTL.html#Istore">Istore</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">src</span> <span class="id">pc'</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regs_inject">regs_inject;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">A</span> <span class="gallina-kwd">as</span> (<span class="id">ta</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev_mapped_inject">Mem.storev_mapped_inject</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">tm'</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Istore">exec_Istore;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#find_function_inject">find_function_inject</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals;</a></span> <span class="id">eauto</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ros</span> <span class="gallina-kwd">as</span> <span class="id">[r|id]</span>. <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">KEPT</span>. <span class="id">red</span>. <span class="id">econstructor;</span> <span class="id">econstructor;</span> <span class="id">split;</span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Icall">exec_Icall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span> <span class="id">sp0</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">tm</span> <span class="id">tsp</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regs_inject">regs_inject;</a></span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;tailcall&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#find_function_inject">find_function_inject</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals;</a></span> <span class="id">eauto</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ros</span> <span class="gallina-kwd">as</span> <span class="id">[r|id]</span>. <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">KEPT</span>. <span class="id">red</span>. <span class="id">econstructor;</span> <span class="id">econstructor;</span> <span class="id">split;</span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_inject">Mem.free_parallel_inject</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="id">intros</span> (<span class="id">tm'</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Itailcall">exec_Itailcall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_bound">match_stacks_bound</a></span> <span class="gallina-kwd">with</span> <span class="id">stk</span> <span class="id">tsp;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m'</span> <span class="id">stk</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">tm'</span> <span class="id">tsp</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regs_inject">regs_inject;</a></span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;builtin&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#eval_builtin_args_inject">eval_builtin_args_inject;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">KEPT</span>. <span class="id">red</span>. <span class="id">econstructor;</span> <span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">vargs'</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#external_call_inject">external_call_inject;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">j'</span> &amp; <span class="id">tv</span> &amp; <span class="id">tm'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ibuiltin">exec_Ibuiltin;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_states_regular">match_states_regular</a></span> <span class="gallina-kwd">with</span> (<span class="id">j</span> <span class="id">:=</span> <span class="id">j'</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_incr">match_stacks_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">j;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">G;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[U</span> <span class="id">V]</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span> <span class="id">sp0</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span><span class="id">;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">tm</span> <span class="id">tsp</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span><span class="id">;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#set_res_inject">set_res_inject;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regset_inject_incr">regset_inject_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">j;</span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;cond&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">C:</span> <span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id">cond</span> <span class="id">trs##args</span> <span class="id">tm</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">eapply</span> <span class="id"><a href="compcert.x86.Op.html#eval_condition_inject">eval_condition_inject;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#regs_inject">regs_inject;</a></span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Icond">exec_Icond</a></span> <span class="gallina-kwd">with</span> (<span class="id">pc'</span> <span class="id">:=</span> <span class="gallina-kwd">if</span> <span class="id">b</span> <span class="gallina-kwd">then</span> <span class="id">ifso</span> <span class="gallina-kwd">else</span> <span class="id">ifnot</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;jumptbl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">REGINJ</span> <span class="id">arg</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">intros</span> <span class="id">INJ;</span> <span class="id">inv</span> <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ijumptable">exec_Ijumptable;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_inject">Mem.free_parallel_inject</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="id">intros</span> (<span class="id">tm'</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ireturn">exec_Ireturn;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_bound">match_stacks_bound</a></span> <span class="gallina-kwd">with</span> <span class="id">stk</span> <span class="id">tsp;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m'</span> <span class="id">stk</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">tm'</span> <span class="id">tsp</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">or;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;internal&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_parallel_inject">Mem.alloc_parallel_inject</a></span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">j'</span> &amp; <span class="id">tm'</span> &amp; <span class="id">tstk</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">STK:</span> <span class="id">stk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span><span class="id">;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">TSTK:</span> <span class="id">tstk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span><span class="id">;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">STACKS':</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks">match_stacks</a></span> <span class="id">j'</span> <span class="id">s</span> <span class="id">ts</span> <span class="id">stk</span> <span class="id">tstk</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">STK,</span> <span class="id">TSTK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_incr">match_stacks_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">j;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">stk</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b1</span>. <span class="id">rewrite</span> <span class="id">F</span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">inv</span> <span class="id">H1</span>. <span class="id">split;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">G</span> <span class="gallina-kwd">in</span> <span class="id">H1</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">congruence</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_function_internal">exec_function_internal;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_states_regular">match_states_regular</a></span> <span class="gallina-kwd">with</span> (<span class="id">j</span> <span class="id">:=</span> <span class="id">j'</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_regs_inject">init_regs_inject;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_list_incr">val_inject_list_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">j;</span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;external&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#external_call_inject">external_call_inject;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">j'</span> &amp; <span class="id">tres</span> &amp; <span class="id">tm'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_function_external">exec_function_external;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_states_return">match_states_return</a></span> <span class="gallina-kwd">with</span> (<span class="id">j</span> <span class="id">:=</span> <span class="id">j'</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_bound">match_stacks_bound</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_stacks_incr">match_stacks_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">j;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">G;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock;</a></span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STACKS</span>. <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_return">exec_return</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#set_reg_inject">set_reg_inject;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Relating initial memory states </div>
<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="init_meminj_invert_strong" class="id"><a name="init_meminj_invert_strong" class="">init_meminj_invert_strong:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:380" class="id"><a name="b:380" class="">b</a></span> <span id="b':381" class="id"><a name="b':381" class="">b'</a></span> <span id="delta:382" class="id"><a name="delta:382" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj">init_meminj</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:380">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Unusedglobproof.html#b':381">b',</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:382">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#delta:382">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="id:383" class="id"><a name="id:383" class="">id</a></span> <span id="gd:384" class="id"><a name="gd:384" class="">gd,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:383">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:380">b</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:383">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':381">b'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b:380">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:384">gd</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#b':381">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:384">gd</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="i:385" class="id"><a name="i:385" class="">i,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:384">gd</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#i:385">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#i:385">i</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert">init_meminj_invert;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">exists</span> <span id="gd:387" class="id"><span id="gd:386" class="id"><a name="gd:387" class="">gd,</a></span></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:386">gd</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_inversion">Genv.find_symbol_inversion</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0</span> <span class="gallina-kwd">as</span> <span class="id">[gd</span> <span class="id">DM]</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span> <span class="gallina-kwd">in</span> <span class="id">DM</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">DM</span> <span class="gallina-kwd">as</span> (<span class="id">b''</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">fold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="gallina-kwd">in</span> <span class="id">P</span>. <span class="id">rewrite</span> <span class="id">P</span> <span class="gallina-kwd">in</span> <span class="id">B;</span> <span class="id">inv</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="gallina-kwd">in</span> <span class="id">Q</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs_inject">defs_inject</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_preserves_globals">init_meminj_preserves_globals</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">X</span> &amp; <span class="id">_</span> &amp; <span class="id">Y</span>).<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">id,</span> <span class="id">gd;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="SOUNDNESS.INIT_MEM" class="id"><a name="SOUNDNESS.INIT_MEM" class="">INIT_MEM</a></span>.<br/>
<br/>
<span class="vernacular">Variables</span> <span id="SOUNDNESS.INIT_MEM.m" class="id"><a name="SOUNDNESS.INIT_MEM.m" class="">m</a></span> <span id="SOUNDNESS.INIT_MEM.tm" class="id"><a name="SOUNDNESS.INIT_MEM.tm" class="">tm:</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="SOUNDNESS.INIT_MEM.IM" class="id"><a name="SOUNDNESS.INIT_MEM.IM" class="">IM:</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.INIT_MEM.m">m</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="SOUNDNESS.INIT_MEM.TIM" class="id"><a name="SOUNDNESS.INIT_MEM.TIM" class="">TIM:</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.INIT_MEM.tm">tm</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="bytes_of_init_inject" class="id"><a name="bytes_of_init_inject" class="">bytes_of_init_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="il:392" class="id"><a name="il:392" class="">il,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="id:393" class="id"><a name="id:393" class="">id,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#ref_init">ref_init</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#il:392">il</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:393">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:393">id</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj">init_meminj</a></span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.bytes_of_init_data_list">Genv.bytes_of_init_data_list</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#il:392">il</a></span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.bytes_of_init_data_list">Genv.bytes_of_init_data_list</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#il:392">il</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">il</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">i1</span> <span class="id">il];</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_app">list_forall2_app</a></span>.<br/>
<span class="id">+</span> <span class="id">destruct</span> <span class="id">i1;</span> <span class="id">simpl;</span> <span class="id">try</span> (<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes_inject">inj_bytes_inject</a></span>).<br/>
&nbsp;&nbsp;<span class="id">induction</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> <span class="id">z</span>)<span class="id">;</span> <span class="id">simpl;</span> <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.ge">ge</a></span> <span class="id">i</span>) <span class="gallina-kwd">as</span> <span class="id">[b|]</span> <span class="id">eqn:FS</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#kept">kept</a></span> <span class="id">i</span>). <span class="id">{</span> <span class="id">apply</span> <span class="id">H</span>. <span class="id">red</span>. <span class="gallina-kwd">exists</span> <span class="id">i0;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_2">symbols_inject_2</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_preserves_globals">init_meminj_preserves_globals</a></span>. <span class="id">eauto</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">b'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">rewrite</span> <span class="id">A</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value_inject">inj_value_inject</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">symmetry;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span> <span class="id">i</span>) <span class="gallina-kwd">as</span> <span class="id">[b'|]</span> <span class="id">eqn:FS'</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_3">symbols_inject_3</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_preserves_globals">init_meminj_preserves_globals</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">b</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#repeat_Undef_inject_self">repeat_Undef_inject_self</a></span>.<br/>
<span class="id">+</span> <span class="id">apply</span> <span class="id">IHil</span>. <span class="id">intros</span> <span class="id">id</span> <span class="id">[ofs</span> <span class="id">IN]</span>. <span class="id">apply</span> <span class="id">H</span>. <span class="gallina-kwd">exists</span> <span class="id">ofs;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem_getN_forall2" class="id"><a name="Mem_getN_forall2" class="">Mem_getN_forall2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="P:394" class="id"><a name="P:394" class="">P:</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span>) <span id="c1:395" class="id"><a name="c1:395" class="">c1</a></span> <span id="c2:396" class="id"><a name="c2:396" class="">c2</a></span> <span id="i:397" class="id"><a name="i:397" class="">i</a></span> <span id="n:398" class="id"><a name="n:398" class="">n</a></span> <span id="p:399" class="id"><a name="p:399" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#P:394">P</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#n:398">n</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:399">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#c1:395">c1</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#n:398">n</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:399">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#c2:396">c2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#p:399">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#i:397">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#i:397">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:399">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#n:398">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#P:394">P</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#i:397">i</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#c1:395">c1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#i:397">i</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#c2:396">c2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">simpl</span> <span class="id">Mem.getN</span><span class="id">;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">extlia</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">i</span> <span class="id">p0</span>).<br/>
<span class="id">+</span> <span class="id">congruence</span>.<br/>
<span class="id">+</span> <span class="id">apply</span> <span class="id">IHn</span> <span class="gallina-kwd">with</span> (<span class="id">p0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">lia</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="init_mem_inj_1" class="id"><a name="init_mem_inj_1" class="">init_mem_inj_1:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">Mem.mem_inj</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj">init_meminj</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.INIT_MEM.m">m</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.INIT_MEM.tm">tm</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert_strong">init_meminj_invert_strong;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">gd</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">gd</span> <span class="gallina-kwd">as</span> <span class="id">[f|v]</span>.<br/>
<span class="id">+</span> <span class="id">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Q1</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span> &amp; <span class="id">R2</span> &amp; <span class="id">S2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span> &amp; <span class="id">R1</span> &amp; <span class="id">S1</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Q1</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">P2</span>. <span class="id">lia</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert">init_meminj_invert;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">delta</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert_strong">init_meminj_invert_strong;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">gd</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">gd</span> <span class="gallina-kwd">as</span> <span class="id">[f|v]</span>.<br/>
<span class="id">+</span> <span class="id">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Q1</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id">H0;</span> <span class="id">discriminate</span>.<br/>
<span class="id">+</span> <span class="id">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span> &amp; <span class="id">R2</span> &amp; <span class="id">S2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span> &amp; <span class="id">R1</span> &amp; <span class="id">S1</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Q1</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">NO:</span> <span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span> <span class="id">v</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">Genv.perm_globvar</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span> <span class="id">v</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">}</span><br/>
<span class="vernacular">Local</span> <span class="vernacular">Transparent</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">S1</span> <span class="id">NO</span>). <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span>. <span class="id">destruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">Mem.range_perm_dec</a></span><span class="id">;</span> <span class="id">intros</span> <span class="id">E1;</span> <span class="id">inv</span> <span class="id">E1</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">S2</span> <span class="id">NO</span>). <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span>. <span class="id">destruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">Mem.range_perm_dec</a></span><span class="id">;</span> <span class="id">intros</span> <span class="id">E2;</span> <span class="id">inv</span> <span class="id">E2</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#Mem_getN_forall2">Mem_getN_forall2</a></span> <span class="gallina-kwd">with</span> (<span class="id">p</span> <span class="id">:=</span> <span class="id">0</span>) (<span class="id">n</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> (<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>))).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H3,</span> <span class="id">H4</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#bytes_of_init_inject">bytes_of_init_inject</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span> <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ge_le">Z.ge_le</a></span><span class="id">;</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.AST.html#init_data_list_size_pos">init_data_list_size_pos</a></span>). <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="init_mem_inj_2" class="id"><a name="init_mem_inj_2" class="">init_mem_inj_2:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj">init_meminj</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.INIT_MEM.m">m</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.INIT_MEM.tm">tm</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_mem_inj_1">init_mem_inj_1</a></span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj">init_meminj</a></span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[[b'</span> <span class="id">delta]|]</span> <span class="id">eqn:INJ;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert">init_meminj_invert;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_not_fresh">Genv.find_symbol_not_fresh</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert">init_meminj_invert;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_not_fresh">Genv.find_symbol_not_fresh</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert">init_meminj_invert</a></span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="id">intros</span> (<span class="id">A1</span> &amp; <span class="id">id1</span> &amp; <span class="id">B1</span> &amp; <span class="id">C1</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert">init_meminj_invert</a></span>. <span class="id">eexact</span> <span class="id">H1</span>. <span class="id">intros</span> (<span class="id">A2</span> &amp; <span class="id">id2</span> &amp; <span class="id">B2</span> &amp; <span class="id">C2</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id1</span> <span class="id">id2</span>). <span class="id">congruence</span>. <span class="id">left;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.global_addresses_distinct">Genv.global_addresses_distinct</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert">init_meminj_invert;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="id">subst</span> <span class="id">delta</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">lia</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span> <span class="id">ofs</span>). <span class="id">lia</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_invert_strong">init_meminj_invert_strong;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">gd</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">gd</span> <span class="gallina-kwd">as</span> <span class="id">[f|v]</span>.<br/>
<span class="id">+</span> <span class="id">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Q2</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">subst</span>. <span class="id">replace</span> <span class="id">ofs</span> <span class="gallina-kwd">with</span> <span class="id">0</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span> &amp; <span class="id">R2</span> &amp; <span class="id">S2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span> &amp; <span class="id">R1</span> &amp; <span class="id">S1</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Q2</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">P1</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.INIT_MEM">INIT_MEM</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="init_mem_exists" class="id"><a name="init_mem_exists" class="">init_mem_exists:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:400" class="id"><a name="m:400" class="">m,</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:400">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="tm:401" class="id"><a name="tm:401" class="">tm,</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tm:401">tm</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_exists">Genv.init_mem_exists</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">P:</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">v</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_norepet">prog_defmap_norepet;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_unique">match_prog_unique;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_def">match_prog_def</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.TRANSF">TRANSF</a></span>) <span class="gallina-kwd">in</span> <span class="id">P</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.used">used</a></span>) <span class="id">eqn:U;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_inversion">Genv.init_mem_inversion</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[AL</span> <span class="id">FV]</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">FV;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">b</span> &amp; <span class="id">FS</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#transform_find_symbol_1">transform_find_symbol_1</a></span> <span class="gallina-kwd">with</span> <span class="id">b;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept_closed">kept_closed</a></span> <span class="gallina-kwd">with</span> <span class="id">id</span> (<span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">v</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_2">IS.mem_2</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">auto</span>. <span class="id">red</span>. <span class="id">red</span>. <span class="gallina-kwd">exists</span> <span class="id">o;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="init_mem_inject" class="id"><a name="init_mem_inject" class="">init_mem_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:402" class="id"><a name="m:402" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:402">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="f:403" class="id"><a name="f:403" class="">f</a></span> <span id="tm:404" class="id"><a name="tm:404" class="">tm,</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tm:404">tm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:403">f</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#m:402">m</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tm:404">tm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#f:403">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_mem_exists">init_mem_exists;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[tm</span> <span class="id">INIT]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj">init_meminj,</a></span> <span class="id">tm</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_mem_inj_2">init_mem_inj_2;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_preserves_globals">init_meminj_preserves_globals</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="transf_initial_states" class="id"><a name="transf_initial_states" class="">transf_initial_states:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="S1:405" class="id"><a name="S1:405" class="">S1,</a></span> <span class="id"><a href="compcert.backend.RTL.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S1:405">S1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="S2:406" class="id"><a name="S2:406" class="">S2,</a></span> <span class="id"><a href="compcert.backend.RTL.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S2:406">S2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S1:405">S1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S2:406">S2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_mem_inject">init_mem_inject;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">j</span> &amp; <span class="id">tm</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#symbols_inject_2">symbols_inject_2</a></span>. <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#kept_main">kept_main</a></span>. <span class="id">eexact</span> <span class="id">H1</span>. <span class="id">intros</span> (<span class="id">tb</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#defs_inject">defs_inject</a></span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">Q</span>. <span class="id">exact</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">R</span> &amp; <span class="id">S</span> &amp; <span class="id">T</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">f</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">tm</span>)<span class="id">;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tge">tge</a></span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_main">match_prog_main</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="transf_final_states" class="id"><a name="transf_final_states" class="">transf_final_states:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="S1:407" class="id"><a name="S1:407" class="">S1</a></span> <span id="S2:408" class="id"><a name="S2:408" class="">S2</a></span> <span id="r:409" class="id"><a name="r:409" class="">r,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S1:407">S1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S2:408">S2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#final_state">final_state</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S1:407">S1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#r:409">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#final_state">final_state</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#S2:408">S2</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#r:409">r</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">STACKS</span>. <span class="id">inv</span> <span class="id">RESINJ</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="transf_program_correct_1" class="id"><a name="transf_program_correct_1" class="">transf_program_correct_1:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="compcert.backend.RTL.html#semantics">semantics</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.p">p</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#semantics">semantics</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS.tp">tp</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation_step">forward_simulation_step</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#globals_symbols_inject">globals_symbols_inject</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#init_meminj_preserves_globals">init_meminj_preserves_globals</a></span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">exact</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#transf_initial_states">transf_initial_states</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#transf_final_states">transf_final_states</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#step_simulation">step_simulation</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#SOUNDNESS">SOUNDNESS</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="transf_program_correct" class="id"><a name="transf_program_correct" class="">transf_program_correct:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:410" class="id"><a name="p:410" class="">p</a></span> <span id="tp:411" class="id"><a name="tp:411" class="">tp,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:410">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp:411">tp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="compcert.backend.RTL.html#semantics">semantics</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:410">p</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#semantics">semantics</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp:411">tp</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">p</span> <span class="id">tp</span> (<span class="id">used</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).  <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#transf_program_correct_1">transf_program_correct_1</a></span> <span class="gallina-kwd">with</span> <span class="id">used;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Commutation with linking </h1>
<br/>
<span class="vernacular">Remark</span> <span id="link_def_either" class="id"><a name="link_def_either" class="">link_def_either:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="gd1:412" class="id"><a name="gd1:412" class="">gd1</a></span> <span id="gd2:413" class="id"><a name="gd2:413" class="">gd2</a></span> <span id="gd:414" class="id"><a name="gd:414" class="">gd:</a></span> <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#link_def">link_def</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd1:412">gd1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd2:413">gd2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:414">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:414">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd1:412">gd1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd:414">gd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#gd2:413">gd2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof with</span></div>
<div class="proofscript" id="proof63">
 (<span class="id">try</span> <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">gd</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Transparent</span> <span class="id"><a href="compcert.common.Linking.html#Linker_def">Linker_def</a></span> <span class="id"><a href="compcert.common.Linking.html#Linker_fundef">Linker_fundef</a></span> <span class="id"><a href="compcert.common.Linking.html#Linker_varinit">Linker_varinit</a></span> <span class="id"><a href="compcert.common.Linking.html#Linker_vardef">Linker_vardef</a></span> <span class="id"><a href="compcert.common.Linking.html#Linker_unit">Linker_unit</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">gd1</span> <span class="gallina-kwd">as</span> <span class="id">[f1|v1],</span> <span class="id">gd2</span> <span class="gallina-kwd">as</span> <span class="id">[f2|v2]</span>...<br/>
<span class="comment">(*&nbsp;Two&nbsp;fundefs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">f1</span> <span class="gallina-kwd">as</span> <span class="id">[f1|ef1],</span> <span class="id">f2</span> <span class="gallina-kwd">as</span> <span class="id">[f2|ef2];</span> <span class="id">simpl</span>...<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ef2;</span> <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ef1;</span> <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#external_function_eq">external_function_eq</a></span> <span class="id">ef1</span> <span class="id">ef2</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
<span class="comment">(*&nbsp;Two&nbsp;vardefs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Linking.html#link_vardef">link_vardef</a></span>. <span class="id">destruct</span> <span class="id">v1</span> <span class="gallina-kwd">as</span> <span class="id">[info1</span> <span class="id">init1</span> <span class="id">ro1</span> <span class="id">vo1],</span> <span class="id">v2</span> <span class="gallina-kwd">as</span> <span class="id">[info2</span> <span class="id">init2</span> <span class="id">ro2</span> <span class="id">vo2];</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Linking.html#link_varinit">link_varinit</a></span> <span class="id">init1</span> <span class="id">init2</span>) <span class="gallina-kwd">as</span> <span class="id">[init|]</span> <span class="id">eqn:LI</span>...<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#eqb">eqb</a></span> <span class="id">ro1</span> <span class="id">ro2</span>) <span class="id">eqn:RO</span>...<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#eqb">eqb</a></span> <span class="id">vo1</span> <span class="id">vo2</span>) <span class="id">eqn:VO</span>...<br/>
&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">info1,</span> <span class="id">info2</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EITHER:</span> <span class="id">init</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">init1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">init</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">init2</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">revert</span> <span class="id">LI</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Linking.html#link_varinit">link_varinit</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Linking.html#classify_init">classify_init</a></span> <span class="id">init1</span>)<span class="id">,</span> (<span class="id"><a href="compcert.common.Linking.html#classify_init">classify_init</a></span> <span class="id">init2</span>)<span class="id">;</span> <span class="id">intro</span> <span class="id">EQ;</span> <span class="id">inv</span> <span class="id">EQ;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">sz</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> <span class="id">sz0</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>))<span class="id">;</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">sz</span> (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">il</span>))<span class="id">;</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">sz</span> (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">il</span>))<span class="id">;</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#eqb_prop">eqb_prop</a></span> <span class="gallina-kwd">in</span> <span class="id">RO</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#eqb_prop">eqb_prop</a></span> <span class="gallina-kwd">in</span> <span class="id">VO</span>.<br/>
&nbsp;&nbsp;<span class="id">intro</span> <span class="id">EQ;</span> <span class="id">inv</span> <span class="id">EQ</span>. <span class="id">destruct</span> <span class="id">EITHER;</span> <span class="id">subst</span> <span class="id">init;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="used_not_defined" class="id"><a name="used_not_defined" class="">used_not_defined:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:415" class="id"><a name="p:415" class="">p</a></span> <span id="used:416" class="id"><a name="used:416" class="">used</a></span> <span id="id:417" class="id"><a name="id:417" class="">id,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:415">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used:416">used</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:415">p</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:417">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used:416">used</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:417">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:415">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used</span>) <span class="id">eqn:M;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_defined">used_defined;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_2">IS.mem_2</a></span>. <span class="id">intros</span> <span class="id">[A|A];</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span> <span class="gallina-kwd">in</span> <span class="id">A</span>. <span class="id">destruct</span> <span class="id">A</span> <span class="gallina-kwd">as</span> <span class="id">[g</span> <span class="id">E];</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="used_not_defined_2" class="id"><a name="used_not_defined_2" class="">used_not_defined_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:418" class="id"><a name="p:418" class="">p</a></span> <span id="used:419" class="id"><a name="used:419" class="">used</a></span> <span id="id:420" class="id"><a name="id:420" class="">id,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:418">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used:419">used</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#id:420">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:418">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:418">p</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~IS</a></span>.<span class="id">In</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#id:420">id</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used:419">used</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_not_defined">used_not_defined;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_1">IS.mem_1</a></span> <span class="gallina-kwd">in</span> <span class="id">H2;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="link_valid_used_set" class="id"><a name="link_valid_used_set" class="">link_valid_used_set:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p1:421" class="id"><a name="p1:421" class="">p1</a></span> <span id="p2:422" class="id"><a name="p2:422" class="">p2</a></span> <span id="p:423" class="id"><a name="p:423" class="">p</a></span> <span id="used1:424" class="id"><a name="used1:424" class="">used1</a></span> <span id="used2:425" class="id"><a name="used2:425" class="">used2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#link">link</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p1:421">p1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p2:422">p2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:423">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p1:421">p1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used1:424">used1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p2:422">p2</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used2:425">used2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:423">p</a></span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.union">IS.union</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used1:424">used1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used2:425">used2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">used2;</span> <span class="id">intros</span> <span class="id">L</span> <span class="id">V1</span> <span class="id">V2</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Linking.html#link_prog_inv">link_prog_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">L</span>) <span class="gallina-kwd">as</span> (<span class="id">X</span> &amp; <span class="id">Y</span> &amp; <span class="id">Z</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Z;</span> <span class="id">clear</span> <span class="id">Z;</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#union_iff">ISF.union_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#union_iff">ISF.union_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Linking.html#prog_defmap_elements">prog_defmap_elements,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>)<span class="id">!id</span> <span class="gallina-kwd">as</span> <span class="id">[gd1|]</span> <span class="id">eqn:GD1;</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>)<span class="id">!id</span> <span class="gallina-kwd">as</span> <span class="id">[gd2|]</span> <span class="id">eqn:GD2;</span><br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;common&nbsp;definition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">Y;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">PUB1</span> &amp; <span class="id">PUB2</span> &amp; <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#link_def_either">link_def_either;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[EQ|EQ];</span> <span class="id">subst</span> <span class="id">gd</span>.<br/>
<span class="id">*</span> <span class="id">left</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_closed">used_closed</a></span>. <span class="id">eexact</span> <span class="id">V1</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_public">used_public</a></span>. <span class="id">eexact</span> <span class="id">V1</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
<span class="id">*</span> <span class="id">right</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_closed">used_closed</a></span>. <span class="id">eexact</span> <span class="id">V2</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_public">used_public</a></span>. <span class="id">eexact</span> <span class="id">V2</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;left&nbsp;definition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#In_dec">ISP.In_dec</a></span> <span class="id">id</span> <span class="id">used1</span>).<br/>
<span class="id">*</span> <span class="id">left;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_closed">used_closed;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">*</span> <span class="id">assert</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id">id</span> <span class="id">used2</span>) <span class="gallina-kwd">by</span> <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_defined">used_defined</a></span>. <span class="id">eexact</span> <span class="id">V2</span>. <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[g</span> <span class="id">E];</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> <span class="id">n</span>. <span class="id">rewrite</span> <span class="id">A,</span> <span class="id">&lt;-</span> <span class="id">X</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_main">used_main;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;right&nbsp;definition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#In_dec">ISP.In_dec</a></span> <span class="id">id</span> <span class="id">used2</span>).<br/>
<span class="id">*</span> <span class="id">right;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_closed">used_closed;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">*</span> <span class="id">assert</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.In">IS.In</a></span> <span class="id">id</span> <span class="id">used1</span>) <span class="gallina-kwd">by</span> <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_defined">used_defined</a></span>. <span class="id">eexact</span> <span class="id">V1</span>. <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[g</span> <span class="id">E];</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> <span class="id">n</span>. <span class="id">rewrite</span> <span class="id">A,</span> <span class="id">X</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_main">used_main;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;no&nbsp;definition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#union_iff">ISF.union_iff</a></span><span class="id">;</span> <span class="id">left;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_main">used_main;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">simpl</span>. <span class="id">intros</span> <span class="id">id</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff,</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#union_iff">ISF.union_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[A|A];</span> <span class="id">[left|right];</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_public">used_public;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#union_iff">ISF.union_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id">p1</span>)).<br/>
<span class="id">+</span> <span class="id">right;</span> <span class="id">assumption</span>.<br/>
<span class="id">+</span> <span class="id">assert</span> (<span class="id">E:</span> <span class="gallina-kwd">exists</span> <span id="g:427" class="id"><span id="g:426" class="id"><a name="g:427" class="">g,</a></span></span> <span class="id"><a href="compcert.common.Linking.html#link_prog_merge">link_prog_merge</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>)<span class="id">!id</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#g:426">g</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>)<span class="id">!id</span> <span class="gallina-kwd">as</span> <span class="id">[gd1|]</span> <span class="id">eqn:GD1;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>)<span class="id">!id</span> <span class="gallina-kwd">as</span> <span class="id">[gd2|]</span> <span class="id">eqn:GD2;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">apply</span> <span class="id">Y</span> <span class="gallina-kwd">with</span> <span class="id">id;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="gallina-kwd">exists</span> <span class="id">gd1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="gallina-kwd">exists</span> <span class="id">gd2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_not_defined_2">used_not_defined_2</a></span> <span class="gallina-kwd">in</span> <span class="id">GD1;</span> <span class="id">[</span> <span class="id">|</span> <span class="id">eauto</span> <span class="id">|</span> <span class="id">congruence</span> <span class="id">]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_not_defined_2">used_not_defined_2</a></span> <span class="gallina-kwd">in</span> <span class="id">GD2;</span> <span class="id">[</span> <span class="id">|</span> <span class="id">eauto</span> <span class="id">|</span> <span class="id">congruence</span> <span class="id">]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">E</span> <span class="gallina-kwd">as</span> <span class="id">[g</span> <span class="id">LD]</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id">id</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id,</span> <span class="id">g</span>)). <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="link_match_program" class="id"><a name="link_match_program" class="">link_match_program:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p1:428" class="id"><a name="p1:428" class="">p1</a></span> <span id="p2:429" class="id"><a name="p2:429" class="">p2</a></span> <span id="tp1:430" class="id"><a name="tp1:430" class="">tp1</a></span> <span id="tp2:431" class="id"><a name="tp2:431" class="">tp2</a></span> <span id="p:432" class="id"><a name="p:432" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#link">link</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p1:428">p1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p2:429">p2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:432">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p1:428">p1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp1:430">tp1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p2:429">p2</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp2:431">tp2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="tp:433" class="id"><a name="tp:433" class="">tp,</a></span> <span class="id"><a href="compcert.common.Linking.html#link">link</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp1:430">tp1</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp2:431">tp2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp:433">tp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#p:432">p</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#tp:433">tp</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H0</span> <span class="gallina-kwd">as</span> (<span class="id">used1</span> &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>). <span class="id">destruct</span> <span class="id">H1</span> <span class="gallina-kwd">as</span> (<span class="id">used2</span> &amp; <span class="id">A2</span> &amp; <span class="id">B2</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Linking.html#link_prog_inv">link_prog_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="gallina-kwd">as</span> (<span class="id">U</span> &amp; <span class="id">V</span> &amp; <span class="id">W</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Linking.html#link_prog_succeeds">link_prog_succeeds</a></span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_main">match_prog_main</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B1</span>)<span class="id">,</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_main">match_prog_main</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B2</span>). <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_def">match_prog_def</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B1</span>) <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_def">match_prog_def</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B2</span>) <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used1</span>) <span class="id">eqn:U1;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used2</span>) <span class="id">eqn:U2;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">V</span> <span class="gallina-kwd">as</span> (<span class="id">X</span> &amp; <span class="id">Y</span> &amp; <span class="id">gd</span> &amp; <span class="id">Z</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">rewrite</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_public">match_prog_public</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B1</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">rewrite</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_public">match_prog_public</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B2</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.union">IS.union</a></span> <span class="id">used1</span> <span class="id">used2</span>)<span class="id">;</span> <span class="id">split</span>.<br/>
<span class="id">+</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#link_valid_used_set">link_valid_used_set;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id">W</span>. <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">*</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_main">match_prog_main;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">*</span> <span class="id">rewrite</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_public">match_prog_public</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B1</span>)<span class="id">,</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_public">match_prog_public</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B2</span>). <span class="id">auto</span>.<br/>
<span class="id">*</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.common.Linking.html#prog_defmap_elements">prog_defmap_elements,</a></span> <span class="id">!PTree</span>.<span class="id">gcombine</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_def">match_prog_def</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B1</span> <span class="id">id</span>)<span class="id">,</span> (<span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog_def">match_prog_def</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B2</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#union_b">ISF.union_b</a></span>.<br/>
<span class="id">{</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>)<span class="id">!id</span> <span class="gallina-kwd">as</span> <span class="id">[gd1|]</span> <span class="id">eqn:GD1;</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>)<span class="id">!id</span> <span class="gallina-kwd">as</span> <span class="id">[gd2|]</span> <span class="id">eqn:GD2</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;both&nbsp;defined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">V;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">PUB1</span> &amp; <span class="id">PUB2</span> &amp; <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EQ1:</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_1">IS.mem_1</a></span><span class="id">;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_public">used_public;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EQ2:</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_1">IS.mem_1</a></span><span class="id">;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_public">used_public;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ1,</span> <span class="id">EQ2;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;left&nbsp;defined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_not_defined">used_not_defined;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">A,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#orb_false_r">orb_false_r</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used1</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used1</span>) <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used2</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_1">IS.mem_1</a></span>. <span class="id">rewrite</span> <span class="id">A,</span> <span class="id">&lt;-</span> <span class="id">U</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_main">used_main;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;right&nbsp;defined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_not_defined">used_not_defined</a></span>. <span class="id">eexact</span> <span class="id">A1</span>. <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">A,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#orb_false_l">orb_false_l</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used2</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used2</span>) <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used1</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem_1">IS.mem_1</a></span>. <span class="id">rewrite</span> <span class="id">A,</span> <span class="id">U</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#used_main">used_main;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;none&nbsp;defined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used1</span>)<span class="id">,</span> (<span class="id"><a href="compcert.backend.Unusedglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">used2</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">}</span><br/>
<span class="id">*</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_keys_norepet">PTree.elements_keys_norepet</a></span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="TransfSelectionLink" class="id"><a name="TransfSelectionLink" class="">TransfSelectionLink</a></span> <span class="id">:</span> <span class="id"><a href="compcert.common.Linking.html#TransfLink">TransfLink</a></span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#match_prog">match_prog</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Unusedglobproof.html#link_match_program">link_match_program</a></span>.<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
