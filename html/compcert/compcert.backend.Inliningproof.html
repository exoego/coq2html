
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Inliningproof</title>
<meta name="description" content="Documentation of Coq module Inliningproof" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module Inliningproof</h1>
<br/>
<div class="doc">RTL function inlining: semantic preservation </div>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span> <span class="id"><a href="compcert.common.Values.html">Values</a></span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="compcert.common.Events.html">Events</a></span> <span class="id"><a href="compcert.common.Smallstep.html">Smallstep</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span> <span class="id"><a href="compcert.backend.Registers.html">Registers</a></span> <span class="id"><a href="compcert.backend.RTL.html">RTL</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.Inlining.html">Inlining</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html">Inliningspec</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="match_prog" class="id"><a name="match_prog" class="">match_prog</a></span> (<span id="prog:1" class="id"><a name="prog:1" class="">prog</a></span> <span id="tprog:2" class="id"><a name="tprog:2" class="">tprog:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#match_program">match_program</a></span> (<span class="gallina-kwd">fun</span> <span id="cunit:3" class="id"><a name="cunit:3" class="">cunit</a></span> <span id="f:4" class="id"><a name="f:4" class="">f</a></span> <span id="tf:5" class="id"><a name="tf:5" class="">tf</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Inlining.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#funenv_program">funenv_program</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cunit:3">cunit</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#f:4">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#tf:5">tf</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#prog:1">prog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#tprog:2">tprog</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="transf_program_match" class="id"><a name="transf_program_match" class="">transf_program_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="prog:6" class="id"><a name="prog:6" class="">prog</a></span> <span id="tprog:7" class="id"><a name="tprog:7" class="">tprog,</a></span> <span class="id"><a href="compcert.backend.Inlining.html#transf_program">transf_program</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#prog:6">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#tprog:7">tprog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#prog:6">prog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#tprog:7">tprog</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Linking.html#match_transform_partial_program_contextual">match_transform_partial_program_contextual;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="INLINING" class="id"><a name="INLINING" class="">INLINING</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="INLINING.prog" class="id"><a name="INLINING.prog" class="">prog:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="INLINING.tprog" class="id"><a name="INLINING.tprog" class="">tprog:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="INLINING.TRANSF" class="id"><a name="INLINING.TRANSF" class="">TRANSF:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tprog">tprog</a></span>.<br/>
<span class="vernacular">Let</span> <span id="INLINING.ge" class="id"><a name="INLINING.ge" class="">ge</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span>.<br/>
<span class="vernacular">Let</span> <span id="INLINING.tge" class="id"><a name="INLINING.tge" class="">tge</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tprog">tprog</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="symbols_preserved" class="id"><a name="symbols_preserved" class="">symbols_preserved:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="s:11" class="id"><a name="s:11" class="">s:</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#s:11">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#s:11">s</a></span>.<br/>
<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_match">Genv.find_symbol_match</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.TRANSF">TRANSF</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="senv_preserved" class="id"><a name="senv_preserved" class="">senv_preserved:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span>.<br/>
<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.senv_match">Genv.senv_match</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.TRANSF">TRANSF</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="functions_translated" class="id"><a name="functions_translated" class="">functions_translated:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="v:12" class="id"><a name="v:12" class="">v:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span id="f:13" class="id"><a name="f:13" class="">f:</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:12">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:13">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="cu:14" class="id"><a name="cu:14" class="">cu</a></span> <span id="f':15" class="id"><a name="f':15" class="">f',</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:12">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':15">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Inlining.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#funenv_program">funenv_program</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cu:14">cu</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#f:13">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':15">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cu:14">cu</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span>.<br/>
<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_match">Genv.find_funct_match</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.TRANSF">TRANSF</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="function_ptr_translated" class="id"><a name="function_ptr_translated" class="">function_ptr_translated:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="b:16" class="id"><a name="b:16" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="f:17" class="id"><a name="f:17" class="">f:</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:16">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:17">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="cu:18" class="id"><a name="cu:18" class="">cu</a></span> <span id="f':19" class="id"><a name="f':19" class="">f',</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:16">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':19">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Inlining.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#funenv_program">funenv_program</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cu:18">cu</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#f:17">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':19">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cu:18">cu</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span>.<br/>
<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_match">Genv.find_funct_ptr_match</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.TRANSF">TRANSF</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="sig_function_translated" class="id"><a name="sig_function_translated" class="">sig_function_translated:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cu:20" class="id"><a name="cu:20" class="">cu</a></span> <span id="f:21" class="id"><a name="f:21" class="">f</a></span> <span id="f':22" class="id"><a name="f':22" class="">f',</a></span> <span class="id"><a href="compcert.backend.Inlining.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#funenv_program">funenv_program</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cu:20">cu</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#f:21">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':22">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#funsig">funsig</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':22">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.RTL.html#funsig">funsig</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:21">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">f;</span> <span class="id">Errors.monadInv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningspec.html#transf_function_spec">transf_function_spec;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">SP;</span> <span class="id">inv</span> <span class="id">SP</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Properties of contexts and relocations </h2>
<br/>
<span class="vernacular">Remark</span> <span id="sreg_below_diff" class="id"><a name="sreg_below_diff" class="">sreg_below_diff:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ctx:23" class="id"><a name="ctx:23" class="">ctx</a></span> <span id="r:24" class="id"><a name="r:24" class="">r</a></span> <span id="r':25" class="id"><a name="r':25" class="">r',</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r':25">r'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:23">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:23">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:24">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r':25">r'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">zify</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_eq">shiftpos_eq</a></span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="context_below_diff" class="id"><a name="context_below_diff" class="">context_below_diff:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ctx1:26" class="id"><a name="ctx1:26" class="">ctx1</a></span> <span id="ctx2:27" class="id"><a name="ctx2:27" class="">ctx2</a></span> <span id="r1:28" class="id"><a name="r1:28" class="">r1</a></span> <span id="r2:29" class="id"><a name="r2:29" class="">r2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#context_below">context_below</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx1:26">ctx1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx2:27">ctx2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r1:28">r1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx1:26">ctx1</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx1:26">ctx1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r1:28">r1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx2:27">ctx2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r2:29">r2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">zify</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg;</a></span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_eq">shiftpos_eq</a></span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="context_below_lt" class="id"><a name="context_below_lt" class="">context_below_lt:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ctx1:30" class="id"><a name="ctx1:30" class="">ctx1</a></span> <span id="ctx2:31" class="id"><a name="ctx2:31" class="">ctx2</a></span> <span id="r:32" class="id"><a name="r:32" class="">r,</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#context_below">context_below</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx1:30">ctx1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx2:31">ctx2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:32">r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx1:30">ctx1</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx1:30">ctx1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:32">r</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#ctx2:31">ctx2</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt;</a></span> <span class="id">zify</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_eq">shiftpos_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<br/>
<h2> Agreement between register sets before and after inlining. </h2>
<br/>
<span class="vernacular">Definition</span> <span id="agree_regs" class="id"><a name="agree_regs" class="">agree_regs</a></span> (<span id="F:33" class="id"><a name="F:33" class="">F:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span id="ctx:34" class="id"><a name="ctx:34" class="">ctx:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#context">context</a></span>) (<span id="rs:35" class="id"><a name="rs:35" class="">rs</a></span> <span id="rs':36" class="id"><a name="rs':36" class="">rs':</a></span> <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r:37" class="id"><a name="r:37" class="">r,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:37">r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:34">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:33">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:35">rs#r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':36">rs'#</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:34">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:37">r</a></span>))<br/>
<span class="id">/\</span>(<span class="gallina-kwd">forall</span> <span id="r:38" class="id"><a name="r:38" class="">r,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:34">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#r:38">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:35">rs#r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="val_reg_charact" class="id"><a name="val_reg_charact" class="">val_reg_charact</a></span> (<span id="F:39" class="id"><a name="F:39" class="">F:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span id="ctx:40" class="id"><a name="ctx:40" class="">ctx:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#context">context</a></span>) (<span id="rs':41" class="id"><a name="rs':41" class="">rs':</a></span> <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>) (<span id="v:42" class="id"><a name="v:42" class="">v:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span id="r:43" class="id"><a name="r:43" class="">r:</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:40">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#r:43">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:42">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>) <span class="id">\/</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:43">r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:40">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:39">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:42">v</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':41">rs'#</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:40">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:43">r</a></span>)).<br/>
<br/>
<span class="vernacular">Remark</span> <span id="Plt_Ple_dec" class="id"><a name="Plt_Ple_dec" class="">Plt_Ple_dec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:44" class="id"><a name="p:44" class="">p</a></span> <span id="q:45" class="id"><a name="q:45" class="">q,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:44">p</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#q:45">q}</a></span> <span class="id">+</span> <span class="id">{Ple</span> <span class="id"><a href="compcert.backend.Inliningproof.html#q:45">q</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:44">p}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">p</span> <span class="id">q</span>). <span class="id">left;</span> <span class="id">auto</span>. <span class="id">right;</span> <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_val_reg_gen" class="id"><a name="agree_val_reg_gen" class="">agree_val_reg_gen:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:46" class="id"><a name="F:46" class="">F</a></span> <span id="ctx:47" class="id"><a name="ctx:47" class="">ctx</a></span> <span id="rs:48" class="id"><a name="rs:48" class="">rs</a></span> <span id="rs':49" class="id"><a name="rs':49" class="">rs'</a></span> <span id="r:50" class="id"><a name="r:50" class="">r,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:46">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:47">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:48">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':49">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#val_reg_charact">val_reg_charact</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:46">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:47">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':49">rs'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:48">rs#r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:50">r</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span> <span class="gallina-kwd">as</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inliningproof.html#Plt_Ple_dec">Plt_Ple_dec</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span> <span class="id">ctx</span>) <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="id">rewrite</span> <span class="id">B;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_val_regs_gen" class="id"><a name="agree_val_regs_gen" class="">agree_val_regs_gen:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:51" class="id"><a name="F:51" class="">F</a></span> <span id="ctx:52" class="id"><a name="ctx:52" class="">ctx</a></span> <span id="rs:53" class="id"><a name="rs:53" class="">rs</a></span> <span id="rs':54" class="id"><a name="rs':54" class="">rs'</a></span> <span id="rl:55" class="id"><a name="rl:55" class="">rl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:51">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:52">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:53">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':54">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#val_reg_charact">val_reg_charact</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:51">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:52">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':54">rs'</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#rs:53">rs##rl</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rl:55">rl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">rl;</span> <span class="id">intros;</span> <span class="id">constructor;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_reg_gen">agree_val_reg_gen;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_val_reg" class="id"><a name="agree_val_reg" class="">agree_val_reg:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:56" class="id"><a name="F:56" class="">F</a></span> <span id="ctx:57" class="id"><a name="ctx:57" class="">ctx</a></span> <span id="rs:58" class="id"><a name="rs:58" class="">rs</a></span> <span id="rs':59" class="id"><a name="rs':59" class="">rs'</a></span> <span id="r:60" class="id"><a name="r:60" class="">r,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:56">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:57">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:58">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':59">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:56">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:58">rs#r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':59">rs'#</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:57">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:60">r</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_reg_gen">agree_val_reg_gen;</a></span> <span class="id">eauto</span>. <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">r</span>). <span class="id">intros</span> <span class="id">[[A</span> <span class="id">B]</span> <span class="id">|</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">B;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_val_regs" class="id"><a name="agree_val_regs" class="">agree_val_regs:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:61" class="id"><a name="F:61" class="">F</a></span> <span id="ctx:62" class="id"><a name="ctx:62" class="">ctx</a></span> <span id="rs:63" class="id"><a name="rs:63" class="">rs</a></span> <span id="rs':64" class="id"><a name="rs':64" class="">rs'</a></span> <span id="rl:65" class="id"><a name="rl:65" class="">rl,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:61">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:62">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:63">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':64">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:61">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:63">rs##rl</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':64">rs'##</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:62">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rl:65">rl</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">rl;</span> <span class="id">intros;</span> <span class="id">simpl</span>. <span class="id">constructor</span>. <span class="id">constructor;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_reg">agree_val_reg;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_set_reg" class="id"><a name="agree_set_reg" class="">agree_set_reg:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:66" class="id"><a name="F:66" class="">F</a></span> <span id="ctx:67" class="id"><a name="ctx:67" class="">ctx</a></span> <span id="rs:68" class="id"><a name="rs:68" class="">rs</a></span> <span id="rs':69" class="id"><a name="rs':69" class="">rs'</a></span> <span id="r:70" class="id"><a name="r:70" class="">r</a></span> <span id="v:71" class="id"><a name="v:71" class="">v</a></span> <span id="v':72" class="id"><a name="v':72" class="">v',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:66">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:67">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:68">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':69">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:66">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:71">v</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v':72">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:70">r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:67">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:66">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:67">ctx</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#rs:68">rs#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:71">v</a></span>) (<span class="id"><a href="compcert.backend.Inliningproof.html#rs':69">rs'#</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:67">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:70">r</a></span>) <span class="id">&lt;-</span> <span class="id"><a href="compcert.backend.Inliningproof.html#v':72">v'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>). <span class="id">subst</span> <span class="id">r0</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_false">peq_false</a></span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_diff">shiftpos_diff;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gso">Regmap.gso</a></span>. <span class="id">auto</span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_set_reg_undef" class="id"><a name="agree_set_reg_undef" class="">agree_set_reg_undef:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:73" class="id"><a name="F:73" class="">F</a></span> <span id="ctx:74" class="id"><a name="ctx:74" class="">ctx</a></span> <span id="rs:75" class="id"><a name="rs:75" class="">rs</a></span> <span id="rs':76" class="id"><a name="rs':76" class="">rs'</a></span> <span id="r:77" class="id"><a name="r:77" class="">r</a></span> <span id="v':78" class="id"><a name="v':78" class="">v',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:73">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:74">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:75">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':76">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:73">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:74">ctx</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#rs:75">rs#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>) (<span class="id"><a href="compcert.backend.Inliningproof.html#rs':76">rs'#</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:74">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:77">r</a></span>) <span class="id">&lt;-</span> <span class="id"><a href="compcert.backend.Inliningproof.html#v':78">v'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>). <span class="id">subst</span> <span class="id">r0</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_false">peq_false</a></span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_diff">shiftpos_diff;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_set_reg_undef'" class="id"><a name="agree_set_reg_undef'" class="">agree_set_reg_undef':</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:79" class="id"><a name="F:79" class="">F</a></span> <span id="ctx:80" class="id"><a name="ctx:80" class="">ctx</a></span> <span id="rs:81" class="id"><a name="rs:81" class="">rs</a></span> <span id="rs':82" class="id"><a name="rs':82" class="">rs'</a></span> <span id="r:83" class="id"><a name="r:83" class="">r,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:79">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:80">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:81">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':82">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:79">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:80">ctx</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#rs:81">rs#r</a></span> <span class="id"><a href="compcert.backend.Registers.html#1020a0c241f830eaabc0b762d4a94472">&lt;-</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#rs':82">rs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>). <span class="id">subst</span> <span class="id">r0</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_regs_invariant" class="id"><a name="agree_regs_invariant" class="">agree_regs_invariant:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:84" class="id"><a name="F:84" class="">F</a></span> <span id="ctx:85" class="id"><a name="ctx:85" class="">ctx</a></span> <span id="rs:86" class="id"><a name="rs:86" class="">rs</a></span> <span id="rs1:87" class="id"><a name="rs1:87" class="">rs1</a></span> <span id="rs2:88" class="id"><a name="rs2:88" class="">rs2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:84">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:85">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:86">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs1:87">rs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r:89" class="id"><a name="r:89" class="">r,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:85">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#r:89">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:89">r</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#ctx:85">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#50efadf7a9f9d41adb2b162cbba3bda7">+</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:85">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs2:88">rs2#r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs1:87">rs1#r</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:84">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:85">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:86">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs2:88">rs2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_above">shiftpos_above</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_below">shiftpos_below</a></span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_regs_incr" class="id"><a name="agree_regs_incr" class="">agree_regs_incr:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:90" class="id"><a name="F:90" class="">F</a></span> <span id="ctx:91" class="id"><a name="ctx:91" class="">ctx</a></span> <span id="rs1:92" class="id"><a name="rs1:92" class="">rs1</a></span> <span id="rs2:93" class="id"><a name="rs2:93" class="">rs2</a></span> <span id="F':94" class="id"><a name="F':94" class="">F',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:90">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:91">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs1:92">rs1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs2:93">rs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:90">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F':94">F'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F':94">F'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:91">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs1:92">rs1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs2:93">rs2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">split;</span> <span class="id">intros</span>. <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="agree_regs_init" class="id"><a name="agree_regs_init" class="">agree_regs_init:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:95" class="id"><a name="F:95" class="">F</a></span> <span id="ctx:96" class="id"><a name="ctx:96" class="">ctx</a></span> <span id="rs:97" class="id"><a name="rs:97" class="">rs,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:95">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:96">ctx</a></span> (<span class="id"><a href="compcert.backend.Registers.html#Regmap.init">Regmap.init</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#rs:97">rs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">split;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gi">Regmap.gi</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gi">Regmap.gi</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="agree_regs_init_regs" class="id"><a name="agree_regs_init_regs" class="">agree_regs_init_regs:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:98" class="id"><a name="F:98" class="">F</a></span> <span id="ctx:99" class="id"><a name="ctx:99" class="">ctx</a></span> <span id="rl:100" class="id"><a name="rl:100" class="">rl</a></span> <span id="vl:101" class="id"><a name="vl:101" class="">vl</a></span> <span id="vl':102" class="id"><a name="vl':102" class="">vl',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:98">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#vl:101">vl</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#vl':102">vl'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r:103" class="id"><a name="r:103" class="">r,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:103">r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rl:100">rl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:103">r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:99">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:98">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:99">ctx</a></span> (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#vl:101">vl</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rl:100">rl</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#vl':102">vl'</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:99">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rl:100">rl</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">rl;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_init">agree_regs_init</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_init">agree_regs_init</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_set_reg">agree_set_reg;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Executing sequences of moves </h2>
<br/>
<span class="vernacular">Lemma</span> <span id="tr_moves_init_regs" class="id"><a name="tr_moves_init_regs" class="">tr_moves_init_regs:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:104" class="id"><a name="F:104" class="">F</a></span> <span id="stk:105" class="id"><a name="stk:105" class="">stk</a></span> <span id="f:106" class="id"><a name="f:106" class="">f</a></span> <span id="sp:107" class="id"><a name="sp:107" class="">sp</a></span> <span id="m:108" class="id"><a name="m:108" class="">m</a></span> <span id="ctx1:109" class="id"><a name="ctx1:109" class="">ctx1</a></span> <span id="ctx2:110" class="id"><a name="ctx2:110" class="">ctx2,</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#context_below">context_below</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx1:109">ctx1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx2:110">ctx2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rdsts:111" class="id"><a name="rdsts:111" class="">rdsts</a></span> <span id="rsrcs:112" class="id"><a name="rsrcs:112" class="">rsrcs</a></span> <span id="vl:113" class="id"><a name="vl:113" class="">vl</a></span> <span id="pc1:114" class="id"><a name="pc1:114" class="">pc1</a></span> <span id="pc2:115" class="id"><a name="pc2:115" class="">pc2</a></span> <span id="rs1:116" class="id"><a name="rs1:116" class="">rs1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_moves">tr_moves</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:106">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#pc1:114">pc1</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx1:109">ctx1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rsrcs:112">rsrcs</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx2:110">ctx2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rdsts:111">rdsts</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#pc2:115">pc2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r:117" class="id"><a name="r:117" class="">r,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:117">r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rdsts:111">rdsts</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:117">r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx2:110">ctx2</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#val_reg_charact">val_reg_charact</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:104">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx1:109">ctx1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs1:116">rs1</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#vl:113">vl</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rsrcs:112">rsrcs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="rs2:118" class="id"><a name="rs2:118" class="">rs2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.backend.RTL.html#step">step</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:105">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:106">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:107">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#pc1:114">pc1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs1:116">rs1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:108">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:105">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:106">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:107">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#pc2:115">pc2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs2:118">rs2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:108">m</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:104">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx2:110">ctx2</a></span> (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#vl:113">vl</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rdsts:111">rdsts</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#rs2:118">rs2</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="gallina-kwd">forall</span> <span id="r:119" class="id"><a name="r:119" class="">r,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:119">r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx2:110">ctx2</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs2:118">rs2#r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs1:116">rs1#r</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">rdsts;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="comment">(*&nbsp;rdsts&nbsp;=&nbsp;nil&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="gallina-kwd">exists</span> <span class="id">rs1;</span> <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_init">agree_regs_init</a></span>. <span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;rdsts&nbsp;=&nbsp;a&nbsp;::&nbsp;rdsts&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">rs1;</span> <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_init">agree_regs_init</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHrdsts;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[rs2</span> <span class="id">[A</span> <span class="id">[B</span> <span class="id">C]]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">rs2#</span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id">ctx2</span> <span class="id">a</span>) <span class="id">&lt;-</span> (<span class="id">rs2#</span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id">ctx1</span> <span class="id">b1</span>))).<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_right">star_right</a></span>. <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop;</a></span> <span class="id">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">destruct</span> <span class="id">H3</span> <span class="gallina-kwd">as</span> <span class="id">[[P</span> <span class="id">Q]</span> <span class="id">|</span> <span class="id">[P</span> <span class="id">Q]]</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">a1</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_set_reg_undef">agree_set_reg_undef;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_set_reg">agree_set_reg;</a></span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id">C;</span> <span class="id">auto</span>.  <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#context_below_lt">context_below_lt;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gso">Regmap.gso</a></span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#not_eq_sym">not_eq_sym</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#sreg_below_diff">sreg_below_diff;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H2;</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<h2> Memory invariants </h2>
<br/>
<div class="doc">A stack location is private if it is not the image of a valid
   location and we have full rights on it. </div>
<br/>
<span class="vernacular">Definition</span> <span id="loc_private" class="id"><a name="loc_private" class="">loc_private</a></span> (<span id="F:120" class="id"><a name="F:120" class="">F:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span id="m:121" class="id"><a name="m:121" class="">m</a></span> <span id="m':122" class="id"><a name="m':122" class="">m':</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span id="sp:123" class="id"><a name="sp:123" class="">sp:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="ofs:124" class="id"><a name="ofs:124" class="">ofs:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':122">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:123">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:124">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b:125" class="id"><a name="b:125" class="">b</a></span> <span id="delta:126" class="id"><a name="delta:126" class="">delta,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:120">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:125">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#sp:123">sp,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:126">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~Mem</a></span>.<span class="id">perm</span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:121">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:125">b</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#ofs:124">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:126">delta</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
<br/>
<div class="doc">Likewise, for a range of locations. </div>
<br/>
<span class="vernacular">Definition</span> <span id="range_private" class="id"><a name="range_private" class="">range_private</a></span> (<span id="F:127" class="id"><a name="F:127" class="">F:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span id="m:128" class="id"><a name="m:128" class="">m</a></span> <span id="m':129" class="id"><a name="m':129" class="">m':</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span id="sp:130" class="id"><a name="sp:130" class="">sp:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="lo:131" class="id"><a name="lo:131" class="">lo</a></span> <span id="hi:132" class="id"><a name="hi:132" class="">hi:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ofs:133" class="id"><a name="ofs:133" class="">ofs,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#lo:131">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:133">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:132">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#loc_private">loc_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:127">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:128">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':129">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:130">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:133">ofs</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="range_private_invariant" class="id"><a name="range_private_invariant" class="">range_private_invariant:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:134" class="id"><a name="F:134" class="">F</a></span> <span id="m:135" class="id"><a name="m:135" class="">m</a></span> <span id="m':136" class="id"><a name="m':136" class="">m'</a></span> <span id="sp:137" class="id"><a name="sp:137" class="">sp</a></span> <span id="lo:138" class="id"><a name="lo:138" class="">lo</a></span> <span id="hi:139" class="id"><a name="hi:139" class="">hi</a></span> <span id="F1:140" class="id"><a name="F1:140" class="">F1</a></span> <span id="m1:141" class="id"><a name="m1:141" class="">m1</a></span> <span id="m1':142" class="id"><a name="m1':142" class="">m1',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:134">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:135">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':136">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:137">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#lo:138">lo</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:139">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b:143" class="id"><a name="b:143" class="">b</a></span> <span id="delta:144" class="id"><a name="delta:144" class="">delta</a></span> <span id="ofs:145" class="id"><a name="ofs:145" class="">ofs,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#F1:140">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:143">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#sp:137">sp,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:144">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:141">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:143">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:145">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#lo:138">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:145">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:144">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:139">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#F:134">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:143">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#sp:137">sp,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:144">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:135">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:143">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:145">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="ofs:146" class="id"><a name="ofs:146" class="">ofs,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':136">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:137">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:146">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':142">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:137">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:146">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F1:140">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:141">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':142">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:137">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#lo:138">lo</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:139">hi</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id">H;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id">H0;</span> <span class="id">eauto</span>. <span class="id">lia</span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>.<br/>
&nbsp;&nbsp;<span class="id">eelim</span> <span class="id">B;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="range_private_perms" class="id"><a name="range_private_perms" class="">range_private_perms:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:147" class="id"><a name="F:147" class="">F</a></span> <span id="m:148" class="id"><a name="m:148" class="">m</a></span> <span id="m':149" class="id"><a name="m':149" class="">m'</a></span> <span id="sp:150" class="id"><a name="sp:150" class="">sp</a></span> <span id="lo:151" class="id"><a name="lo:151" class="">lo</a></span> <span id="hi:152" class="id"><a name="hi:152" class="">hi,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:147">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:148">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':149">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:150">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#lo:151">lo</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:152">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':149">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:150">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#lo:151">lo</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:152">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id">H;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="range_private_alloc_left" class="id"><a name="range_private_alloc_left" class="">range_private_alloc_left:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:153" class="id"><a name="F:153" class="">F</a></span> <span id="m:154" class="id"><a name="m:154" class="">m</a></span> <span id="m':155" class="id"><a name="m':155" class="">m'</a></span> <span id="sp':156" class="id"><a name="sp':156" class="">sp'</a></span> <span id="base:157" class="id"><a name="base:157" class="">base</a></span> <span id="hi:158" class="id"><a name="hi:158" class="">hi</a></span> <span id="sz:159" class="id"><a name="sz:159" class="">sz</a></span> <span id="m1:160" class="id"><a name="m1:160" class="">m1</a></span> <span id="sp:161" class="id"><a name="sp:161" class="">sp</a></span> <span id="F1:162" class="id"><a name="F1:162" class="">F1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:153">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:154">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':155">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':156">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#base:157">base</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:158">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:154">m</a></span> <span class="id">0</span> <span class="id"><a href="compcert.backend.Inliningproof.html#sz:159">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#m1:160">m1,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:161">sp</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#F1:162">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:161">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#sp':156">sp',</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#base:157">base</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b:163" class="id"><a name="b:163" class="">b,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:163">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:161">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F1:162">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:163">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:153">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:163">b</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F1:162">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:160">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':155">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':156">sp'</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#base:157">base</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sz:159">sz</a></span> <span class="id">0</span>) <span class="id"><a href="compcert.backend.Inliningproof.html#hi:158">hi</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H</span> <span class="id">ofs</span>). <span class="id">generalize</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_max_r">Z.le_max_r</a></span> <span class="id">sz</span> <span class="id">0</span>). <span class="id">lia</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">auto</span>. <span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">rewrite</span> <span class="id">H1</span> <span class="gallina-kwd">in</span> <span class="id">H4;</span> <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zmax_spec">Zmax_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">0</span> <span class="id">sz</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H2</span> <span class="gallina-kwd">in</span> <span class="id">H4;</span> <span class="id">auto</span>. <span class="id">eelim</span> <span class="id">B;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="range_private_free_left" class="id"><a name="range_private_free_left" class="">range_private_free_left:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:164" class="id"><a name="F:164" class="">F</a></span> <span id="m:165" class="id"><a name="m:165" class="">m</a></span> <span id="m':166" class="id"><a name="m':166" class="">m'</a></span> <span id="sp:167" class="id"><a name="sp:167" class="">sp</a></span> <span id="base:168" class="id"><a name="base:168" class="">base</a></span> <span id="sz:169" class="id"><a name="sz:169" class="">sz</a></span> <span id="hi:170" class="id"><a name="hi:170" class="">hi</a></span> <span id="b:171" class="id"><a name="b:171" class="">b</a></span> <span id="m1:172" class="id"><a name="m1:172" class="">m1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:164">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:165">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':166">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:167">sp</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#base:168">base</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sz:169">sz</a></span> <span class="id">0</span>) <span class="id"><a href="compcert.backend.Inliningproof.html#hi:170">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:165">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:171">b</a></span> <span class="id">0</span> <span class="id"><a href="compcert.backend.Inliningproof.html#sz:169">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:172">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#F:164">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:171">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#sp:167">sp,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#base:168">base</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:164">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:165">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':166">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:164">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:172">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':166">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:167">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#base:168">base</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:170">hi</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> (<span class="id">base</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> <span class="id">sz</span> <span class="id">0</span>)) <span class="gallina-kwd">as</span> <span class="id">[z|z]</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id">ofs</span> <span class="gallina-kwd">with</span> ((<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">base</span>) <span class="id">+</span> <span class="id">base</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inject">Mem.perm_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zmax_spec">Zmax_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">z</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">0</span> <span class="id">sz</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b0</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b0</span>. <span class="id">rewrite</span> <span class="id">H1</span> <span class="gallina-kwd">in</span> <span class="id">H4;</span> <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">Mem.perm_free_2</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zmax_spec">Zmax_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">z</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">0</span> <span class="id">sz</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_no_overlap">Mem.mi_no_overlap</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable;</a></span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">base</span>). <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zmax_spec">Zmax_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">z</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">0</span> <span class="id">sz</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[A</span> <span class="id">|</span> <span class="id">A]</span>. <span class="id">congruence</span>. <span class="id">lia</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">H</span> <span class="id">ofs</span>). <span class="id">lia</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">eelim</span> <span class="id">B;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="range_private_extcall" class="id"><a name="range_private_extcall" class="">range_private_extcall:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:173" class="id"><a name="F:173" class="">F</a></span> <span id="F':174" class="id"><a name="F':174" class="">F'</a></span> <span id="m1:175" class="id"><a name="m1:175" class="">m1</a></span> <span id="m2:176" class="id"><a name="m2:176" class="">m2</a></span> <span id="m1':177" class="id"><a name="m1':177" class="">m1'</a></span> <span id="m2':178" class="id"><a name="m2':178" class="">m2'</a></span> <span id="sp:179" class="id"><a name="sp:179" class="">sp</a></span> <span id="base:180" class="id"><a name="base:180" class="">base</a></span> <span id="hi:181" class="id"><a name="hi:181" class="">hi,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:173">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:175">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':177">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:179">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#base:180">base</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:181">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b:182" class="id"><a name="b:182" class="">b</a></span> <span id="ofs:183" class="id"><a name="ofs:183" class="">ofs</a></span> <span id="p:184" class="id"><a name="p:184" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:175">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:182">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m2:176">m2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:182">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:183">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:184">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:175">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:182">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:183">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:184">p</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:173">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:175">m1</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#m1':177">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m2':178">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:173">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:175">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':177">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:173">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F':174">F'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:173">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F':174">F'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:175">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':177">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':177">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:179">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F':174">F'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m2:176">m2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m2':178">m2'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:179">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#base:180">base</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:181">hi</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">hi;</span> <span class="id">intros</span> <span class="id">RP</span> <span class="id">PERM</span> <span class="id">UNCH</span> <span class="id">INJ</span> <span class="id">INCR</span> <span class="id">SEP</span> <span class="id">VB</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id">RP;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">SEP</span>. <span class="id">destruct</span> (<span class="id">F</span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[[sp1</span> <span class="id">delta1]</span> <span class="id">|]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">EQ;</span> <span class="id">rewrite</span> <span class="id">H0</span> <span class="gallina-kwd">in</span> <span class="id">EQ;</span> <span class="id">inv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">eelim</span> <span class="id">B;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id">PERM;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_freeblocks">Mem.mi_freeblocks</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SEP;</span> <span class="id">eauto</span>. <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<h2> Relating global environments </h2>
<br/>
<span class="vernacular">Inductive</span> <span id="match_globalenvs" class="id"><a name="match_globalenvs" class="">match_globalenvs</a></span> (<span id="F:185" class="id"><a name="F:185" class="">F:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span id="bound:186" class="id"><a name="bound:186" class="">bound:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>)<span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="mk_match_globalenvs" class="id"><a name="mk_match_globalenvs" class="">mk_match_globalenvs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="DOMAIN:190" class="id"><a name="DOMAIN:190" class="">DOMAIN:</a></span> <span class="gallina-kwd">forall</span> <span id="b:189" class="id"><a name="b:189" class="">b,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:189">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:186">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:185">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:189">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#b:189">b,</a></span> <span class="id">0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="IMAGE:194" class="id"><a name="IMAGE:194" class="">IMAGE:</a></span> <span class="gallina-kwd">forall</span> <span id="b1:191" class="id"><a name="b1:191" class="">b1</a></span> <span id="b2:192" class="id"><a name="b2:192" class="">b2</a></span> <span id="delta:193" class="id"><a name="delta:193" class="">delta,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:185">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:191">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#b2:192">b2,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:193">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b2:192">b2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:186">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:191">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b2:192">b2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SYMBOLS:197" class="id"><a name="SYMBOLS:197" class="">SYMBOLS:</a></span> <span class="gallina-kwd">forall</span> <span id="id:195" class="id"><a name="id:195" class="">id</a></span> <span id="b:196" class="id"><a name="b:196" class="">b,</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#id:195">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:196">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:196">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:186">bound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="FUNCTIONS:200" class="id"><a name="FUNCTIONS:200" class="">FUNCTIONS:</a></span> <span class="gallina-kwd">forall</span> <span id="b:198" class="id"><a name="b:198" class="">b</a></span> <span id="fd:199" class="id"><a name="fd:199" class="">fd,</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:198">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fd:199">fd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:198">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:186">bound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="VARINFOS:203" class="id"><a name="VARINFOS:203" class="">VARINFOS:</a></span> <span class="gallina-kwd">forall</span> <span id="b:201" class="id"><a name="b:201" class="">b</a></span> <span id="gv:202" class="id"><a name="gv:202" class="">gv,</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:201">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#gv:202">gv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:201">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:186">bound</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="find_function_agree" class="id"><a name="find_function_agree" class="">find_function_agree:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ros:204" class="id"><a name="ros:204" class="">ros</a></span> <span id="rs:205" class="id"><a name="rs:205" class="">rs</a></span> <span id="fd:206" class="id"><a name="fd:206" class="">fd</a></span> <span id="F:207" class="id"><a name="F:207" class="">F</a></span> <span id="ctx:208" class="id"><a name="ctx:208" class="">ctx</a></span> <span id="rs':209" class="id"><a name="rs':209" class="">rs'</a></span> <span id="bound:210" class="id"><a name="bound:210" class="">bound,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.RTL.html#find_function">find_function</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ros:204">ros</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:205">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fd:206">fd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:207">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:208">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:205">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':209">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:207">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:210">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="cu:211" class="id"><a name="cu:211" class="">cu</a></span> <span id="fd':212" class="id"><a name="fd':212" class="">fd',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.RTL.html#find_function">find_function</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sros">sros</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:208">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ros:204">ros</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#rs':209">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fd':212">fd'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Inlining.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#funenv_program">funenv_program</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cu:211">cu</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#fd:206">fd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fd':212">fd'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cu:211">cu</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">ros</span> <span class="gallina-kwd">as</span> <span class="id">[r</span> <span class="id">|</span> <span class="id">id];</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;register&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EQ:</span> <span class="id">rs'#</span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id">ctx</span> <span class="id">r</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">rs#r</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_inv">Genv.find_funct_inv</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[b</span> <span class="id">EQ]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">F</span> <span class="id">rs#r</span> <span class="id">rs'#</span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id">ctx</span> <span class="id">r</span>)). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_reg">agree_val_reg;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ</span> <span class="gallina-kwd">in</span> <span class="id">A;</span> <span class="id">inv</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">rewrite</span> <span class="id">DOMAIN</span> <span class="gallina-kwd">in</span> <span class="id">H5</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">FUNCTIONS</span> <span class="gallina-kwd">with</span> <span class="id">fd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ</span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_find_funct_ptr">Genv.find_funct_find_funct_ptr</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#functions_translated">functions_translated;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;symbol&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Inliningproof.html#symbols_preserved">symbols_preserved</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id">id</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#function_ptr_translated">function_ptr_translated;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="find_inlined_function" class="id"><a name="find_inlined_function" class="">find_inlined_function:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fenv:213" class="id"><a name="fenv:213" class="">fenv</a></span> <span id="id:214" class="id"><a name="id:214" class="">id</a></span> <span id="rs:215" class="id"><a name="rs:215" class="">rs</a></span> <span id="fd:216" class="id"><a name="fd:216" class="">fd</a></span> <span id="f:217" class="id"><a name="f:217" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#fenv_compat">fenv_compat</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:213">fenv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.RTL.html#find_function">find_function</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#id:214">id</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#rs:215">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fd:216">fd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#fenv:213">fenv!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:217">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#fd:216">fd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:217">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">destruct</span> <span class="id">H1</span> <span class="gallina-kwd">as</span> (<span class="id">b</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inliningproof.html#ge">ge,</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id">A</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Translation of builtin arguments. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="tr_builtin_arg" class="id"><a name="tr_builtin_arg" class="">tr_builtin_arg:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:218" class="id"><a name="F:218" class="">F</a></span> <span id="bound:219" class="id"><a name="bound:219" class="">bound</a></span> <span id="ctx:220" class="id"><a name="ctx:220" class="">ctx</a></span> <span id="rs:221" class="id"><a name="rs:221" class="">rs</a></span> <span id="rs':222" class="id"><a name="rs':222" class="">rs'</a></span> <span id="sp:223" class="id"><a name="sp:223" class="">sp</a></span> <span id="sp':224" class="id"><a name="sp':224" class="">sp'</a></span> <span id="m:225" class="id"><a name="m:225" class="">m</a></span> <span id="m':226" class="id"><a name="m':226" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:218">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:219">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:218">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:220">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:221">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':222">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#F:218">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:223">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#sp':224">sp',</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:220">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:218">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:225">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':226">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="a:227" class="id"><a name="a:227" class="">a</a></span> <span id="v:228" class="id"><a name="v:228" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:229" class="id"><a name="r:229" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:221">rs#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:223">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#m:225">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#a:227">a</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:228">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v':230" class="id"><a name="v':230" class="">v',</a></span> <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:231" class="id"><a name="r:231" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':222">rs'#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':224">sp'</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#m':226">m'</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sbuiltinarg">sbuiltinarg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:220">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#a:227">a</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#v':230">v'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:218">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:228">v</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v':230">v'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">m';</span> <span class="id">intros</span> <span class="id">MG</span> <span class="id">AG</span> <span class="id">SP</span> <span class="id">MI</span>. <span class="id">induction</span> <span class="id">1;</span> <span class="id">simpl</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">exists</span> <span class="id">rs'#</span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id">ctx</span> <span class="id">x</span>)<span class="id">;</span> <span class="id">split</span>. <span class="id">constructor</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_reg">agree_val_reg;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp'</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span>)))).<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">v'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="gallina-kwd">exists</span> <span class="id">v';</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">constructor</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">split</span>. <span class="id">constructor</span>. <span class="id">simpl</span>. <span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">F</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id">id</span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span> <span class="id">id</span> <span class="id">ofs</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span><span class="id">;</span> <span class="id">simpl;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Inliningproof.html#symbols_preserved">symbols_preserved</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id">id</span>) <span class="gallina-kwd">as</span> <span class="id">[b|]</span> <span class="id">eqn:FS;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MG</span>. <span class="id">econstructor</span>. <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">v'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">v';</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
<span class="id">-</span> <span class="id">econstructor;</span> <span class="id">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span><span class="id">;</span> <span class="id">simpl;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Inliningproof.html#symbols_preserved">symbols_preserved</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id">id</span>) <span class="gallina-kwd">as</span> <span class="id">[b|]</span> <span class="id">eqn:FS;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MG</span>. <span class="id">econstructor</span>. <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">IHeval_builtin_arg1</span> <span class="gallina-kwd">as</span> (<span class="id">v1'</span> &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHeval_builtin_arg2</span> <span class="gallina-kwd">as</span> (<span class="id">v2'</span> &amp; <span class="id">A2</span> &amp; <span class="id">B2</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.longofwords_inject">Val.longofwords_inject</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">IHeval_builtin_arg1</span> <span class="gallina-kwd">as</span> (<span class="id">v1'</span> &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHeval_builtin_arg2</span> <span class="gallina-kwd">as</span> (<span class="id">v2'</span> &amp; <span class="id">A2</span> &amp; <span class="id">B2</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">split</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">barg</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">auto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Values.html#Val.add_inject">Val.add_inject</a></span><span class="id">,</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_inject">Val.addl_inject</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="tr_builtin_args" class="id"><a name="tr_builtin_args" class="">tr_builtin_args:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:232" class="id"><a name="F:232" class="">F</a></span> <span id="bound:233" class="id"><a name="bound:233" class="">bound</a></span> <span id="ctx:234" class="id"><a name="ctx:234" class="">ctx</a></span> <span id="rs:235" class="id"><a name="rs:235" class="">rs</a></span> <span id="rs':236" class="id"><a name="rs':236" class="">rs'</a></span> <span id="sp:237" class="id"><a name="sp:237" class="">sp</a></span> <span id="sp':238" class="id"><a name="sp':238" class="">sp'</a></span> <span id="m:239" class="id"><a name="m:239" class="">m</a></span> <span id="m':240" class="id"><a name="m':240" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:232">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:233">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:232">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:234">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:235">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':236">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#F:232">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:237">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#sp':238">sp',</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:234">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:232">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:239">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':240">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="al:241" class="id"><a name="al:241" class="">al</a></span> <span id="vl:242" class="id"><a name="vl:242" class="">vl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:243" class="id"><a name="r:243" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:235">rs#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:237">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#m:239">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#al:241">al</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#vl:242">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="vl':244" class="id"><a name="vl':244" class="">vl',</a></span> <span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:245" class="id"><a name="r:245" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':236">rs'#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':238">sp'</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#m':240">m'</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sbuiltinarg">sbuiltinarg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:234">ctx</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#al:241">al</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#vl':244">vl'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:232">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#vl:242">vl</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#vl':244">vl'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">5;</span> <span class="id">simpl</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">exists</span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>)<span class="id">;</span> <span class="id">split;</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_builtin_arg">tr_builtin_arg;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">v1'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">IHlist_forall2</span> <span class="gallina-kwd">as</span> (<span class="id">vl'</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">v1'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">vl'</span>)<span class="id">;</span> <span class="id">split;</span> <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Relating stacks </h2>
<br/>
<span class="vernacular">Inductive</span> <span id="match_stacks" class="id"><a name="match_stacks" class="">match_stacks</a></span> (<span id="F:246" class="id"><a name="F:246" class="">F:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span id="m:247" class="id"><a name="m:247" class="">m</a></span> <span id="m':248" class="id"><a name="m':248" class="">m':</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>)<span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_stacks_nil" class="id"><a name="match_stacks_nil" class="">match_stacks_nil:</a></span> <span class="gallina-kwd">forall</span> <span id="bound1:253" class="id"><a name="bound1:253" class="">bound1</a></span> <span id="bound:254" class="id"><a name="bound:254" class="">bound</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MG:255" class="id"><a name="MG:255" class="">MG:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound1:253">bound1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="BELOW:256" class="id"><a name="BELOW:256" class="">BELOW:</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound1:253">bound1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:254">bound</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks:249">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:254">bound</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_stacks_cons" class="id"><a name="match_stacks_cons" class="">match_stacks_cons:</a></span> <span class="gallina-kwd">forall</span> <span id="res:257" class="id"><a name="res:257" class="">res</a></span> <span id="f:258" class="id"><a name="f:258" class="">f</a></span> <span id="sp:259" class="id"><a name="sp:259" class="">sp</a></span> <span id="pc:260" class="id"><a name="pc:260" class="">pc</a></span> <span id="rs:261" class="id"><a name="rs:261" class="">rs</a></span> <span id="stk:262" class="id"><a name="stk:262" class="">stk</a></span> <span id="f':263" class="id"><a name="f':263" class="">f'</a></span> <span id="sp':264" class="id"><a name="sp':264" class="">sp'</a></span> <span id="rs':265" class="id"><a name="rs':265" class="">rs'</a></span> <span id="stk':266" class="id"><a name="stk':266" class="">stk'</a></span> <span id="bound:267" class="id"><a name="bound:267" class="">bound</a></span> <span id="fenv:268" class="id"><a name="fenv:268" class="">fenv</a></span> <span id="ctx:269" class="id"><a name="ctx:269" class="">ctx</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MS:270" class="id"><a name="MS:270" class="">MS:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside:250">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:262">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':266">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':263">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:269">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':264">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':265">rs'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="COMPAT:271" class="id"><a name="COMPAT:271" class="">COMPAT:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv_compat">fenv_compat</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:268">fenv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="FB:272" class="id"><a name="FB:272" class="">FB:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:268">fenv</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':263">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:269">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:258">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':263">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="AG:273" class="id"><a name="AG:273" class="">AG:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:269">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:261">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':265">rs'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SP:274" class="id"><a name="SP:274" class="">SP:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:259">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#sp':264">sp',</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:269">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PRIV:275" class="id"><a name="PRIV:275" class="">PRIV:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':264">sp'</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#ctx:269">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:269">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>)) <span class="id"><a href="compcert.backend.Inliningproof.html#f':263">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SSZ1:276" class="id"><a name="SSZ1:276" class="">SSZ1:</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':263">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SSZ2:278" class="id"><a name="SSZ2:278" class="">SSZ2:</a></span> <span class="gallina-kwd">forall</span> <span id="ofs:277" class="id"><a name="ofs:277" class="">ofs,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':264">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:277">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:277">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':263">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RES:279" class="id"><a name="RES:279" class="">RES:</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#res:257">res</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:269">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="BELOW:280" class="id"><a name="BELOW:280" class="">BELOW:</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':264">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:267">bound</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks:249">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#res:257">res</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:258">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:259">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#pc:260">pc</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:261">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:262">stk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:269">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#res:257">res</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#f':263">f'</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':264">sp'</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:269">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#pc:260">pc</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#rs':265">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':266">stk'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#bound:267">bound</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_stacks_untailcall" class="id"><a name="match_stacks_untailcall" class="">match_stacks_untailcall:</a></span> <span class="gallina-kwd">forall</span> <span id="stk:281" class="id"><a name="stk:281" class="">stk</a></span> <span id="res:282" class="id"><a name="res:282" class="">res</a></span> <span id="f':283" class="id"><a name="f':283" class="">f'</a></span> <span id="sp':284" class="id"><a name="sp':284" class="">sp'</a></span> <span id="rpc:285" class="id"><a name="rpc:285" class="">rpc</a></span> <span id="rs':286" class="id"><a name="rs':286" class="">rs'</a></span> <span id="stk':287" class="id"><a name="stk':287" class="">stk'</a></span> <span id="bound:288" class="id"><a name="bound:288" class="">bound</a></span> <span id="ctx:289" class="id"><a name="ctx:289" class="">ctx</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MS:290" class="id"><a name="MS:290" class="">MS:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside:250">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:281">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':287">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':283">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:289">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':284">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':286">rs'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PRIV:291" class="id"><a name="PRIV:291" class="">PRIV:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':284">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:289">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#f':283">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SSZ1:292" class="id"><a name="SSZ1:292" class="">SSZ1:</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':283">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SSZ2:294" class="id"><a name="SSZ2:294" class="">SSZ2:</a></span> <span class="gallina-kwd">forall</span> <span id="ofs:293" class="id"><a name="ofs:293" class="">ofs,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':284">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:293">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:293">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':283">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RET:295" class="id"><a name="RET:295" class="">RET:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:289">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#rpc:285">rpc,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#res:282">res</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="BELOW:296" class="id"><a name="BELOW:296" class="">BELOW:</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':284">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:288">bound</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks:249">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#stk:281">stk</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#res:282">res</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':283">f'</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':284">sp'</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#rpc:285">rpc</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':286">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':287">stk'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#bound:288">bound</a></span><br/>
<br/>
<span class="gallina-kwd">with</span> <span id="match_stacks_inside" class="id"><a name="match_stacks_inside" class="">match_stacks_inside</a></span> (<span class="id">F:</span> <span class="id">meminj</span>) (<span class="id">m</span> <span class="id">m':</span> <span class="id">mem</span>)<span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#context">context</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_stacks_inside_base" class="id"><a name="match_stacks_inside_base" class="">match_stacks_inside_base:</a></span> <span class="gallina-kwd">forall</span> <span id="stk:297" class="id"><a name="stk:297" class="">stk</a></span> <span id="stk':298" class="id"><a name="stk':298" class="">stk'</a></span> <span id="f':299" class="id"><a name="f':299" class="">f'</a></span> <span id="ctx:300" class="id"><a name="ctx:300" class="">ctx</a></span> <span id="sp':301" class="id"><a name="sp':301" class="">sp'</a></span> <span id="rs':302" class="id"><a name="rs':302" class="">rs'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MS:303" class="id"><a name="MS:303" class="">MS:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks:249">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:297">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':298">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':301">sp'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RET:304" class="id"><a name="RET:304" class="">RET:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:300">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="DSTK:305" class="id"><a name="DSTK:305" class="">DSTK:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:300">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside:250">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:297">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':298">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':299">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:300">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':301">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':302">rs'</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_stacks_inside_inlined" class="id"><a name="match_stacks_inside_inlined" class="">match_stacks_inside_inlined:</a></span> <span class="gallina-kwd">forall</span> <span id="res:306" class="id"><a name="res:306" class="">res</a></span> <span id="f:307" class="id"><a name="f:307" class="">f</a></span> <span id="sp:308" class="id"><a name="sp:308" class="">sp</a></span> <span id="pc:309" class="id"><a name="pc:309" class="">pc</a></span> <span id="rs:310" class="id"><a name="rs:310" class="">rs</a></span> <span id="stk:311" class="id"><a name="stk:311" class="">stk</a></span> <span id="stk':312" class="id"><a name="stk':312" class="">stk'</a></span> <span id="f':313" class="id"><a name="f':313" class="">f'</a></span> <span id="fenv:314" class="id"><a name="fenv:314" class="">fenv</a></span> <span id="ctx:315" class="id"><a name="ctx:315" class="">ctx</a></span> <span id="sp':316" class="id"><a name="sp':316" class="">sp'</a></span> <span id="rs':317" class="id"><a name="rs':317" class="">rs'</a></span> <span id="ctx':318" class="id"><a name="ctx':318" class="">ctx'</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MS:319" class="id"><a name="MS:319" class="">MS:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside:250">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:311">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':312">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':313">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':318">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':316">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':317">rs'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="COMPAT:320" class="id"><a name="COMPAT:320" class="">COMPAT:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv_compat">fenv_compat</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:314">fenv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="FB:321" class="id"><a name="FB:321" class="">FB:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:314">fenv</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':313">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':318">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:307">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':313">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="AG:322" class="id"><a name="AG:322" class="">AG:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':318">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:310">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':317">rs'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SP:323" class="id"><a name="SP:323" class="">SP:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:308">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#sp':316">sp',</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':318">ctx'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PAD:324" class="id"><a name="PAD:324" class="">PAD:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':316">sp'</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#ctx':318">ctx'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':318">ctx'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>)) <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:315">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RES:325" class="id"><a name="RES:325" class="">RES:</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#res:306">res</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':318">ctx'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RET:326" class="id"><a name="RET:326" class="">RET:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:315">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':318">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#pc:309">pc,</a></span> <span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':318">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#res:306">res</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="BELOW:327" class="id"><a name="BELOW:327" class="">BELOW:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#context_below">context_below</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':318">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:315">ctx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SBELOW:328" class="id"><a name="SBELOW:328" class="">SBELOW:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#context_stack_call">context_stack_call</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':318">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:315">ctx</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside:250">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:246">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:247">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':248">m'</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#res:306">res</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:307">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:308">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#pc:309">pc</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:310">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:311">stk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#stk':312">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':313">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:315">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':316">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':317">rs'</a></span>.<br/>
<br/>
<div class="doc">Properties of match_stacks </div>
<br/>
<span class="vernacular">Section</span> <span id="INLINING.MATCH_STACKS" class="id"><a name="INLINING.MATCH_STACKS" class="">MATCH_STACKS</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="INLINING.MATCH_STACKS.F" class="id"><a name="INLINING.MATCH_STACKS.F" class="">F:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>.<br/>
<span class="vernacular">Variables</span> <span id="INLINING.MATCH_STACKS.m" class="id"><a name="INLINING.MATCH_STACKS.m" class="">m</a></span> <span id="INLINING.MATCH_STACKS.m'" class="id"><a name="INLINING.MATCH_STACKS.m'" class="">m':</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_globalenvs" class="id"><a name="match_stacks_globalenvs" class="">match_stacks_globalenvs:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="stk:332" class="id"><a name="stk:332" class="">stk</a></span> <span id="stk':333" class="id"><a name="stk':333" class="">stk'</a></span> <span id="bound:334" class="id"><a name="bound:334" class="">bound,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:332">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':333">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:334">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="b:335" class="id"><a name="b:335" class="">b,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:335">b</a></span><br/>
<span class="gallina-kwd">with</span> <span id="match_stacks_inside_globalenvs" class="id"><a name="match_stacks_inside_globalenvs" class="">match_stacks_inside_globalenvs:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="stk:336" class="id"><a name="stk:336" class="">stk</a></span> <span id="stk':337" class="id"><a name="stk':337" class="">stk'</a></span> <span id="f:338" class="id"><a name="f:338" class="">f</a></span> <span id="ctx:339" class="id"><a name="ctx:339" class="">ctx</a></span> <span id="sp:340" class="id"><a name="sp:340" class="">sp</a></span> <span id="rs':341" class="id"><a name="rs':341" class="">rs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:336">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':337">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:338">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:339">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:340">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':341">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="b:342" class="id"><a name="b:342" class="">b,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:342">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_globalenvs_preserves_globals" class="id"><a name="match_globalenvs_preserves_globals" class="">match_globalenvs_preserves_globals:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:343" class="id"><a name="b:343" class="">b,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:343">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Events.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">red</span>. <span class="id">split</span>. <span class="id">eauto</span>. <span class="id">split</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">symmetry</span>. <span class="id">eapply</span> <span class="id">IMAGE;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_inside_globals" class="id"><a name="match_stacks_inside_globals" class="">match_stacks_inside_globals:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="stk:344" class="id"><a name="stk:344" class="">stk</a></span> <span id="stk':345" class="id"><a name="stk':345" class="">stk'</a></span> <span id="f:346" class="id"><a name="f:346" class="">f</a></span> <span id="ctx:347" class="id"><a name="ctx:347" class="">ctx</a></span> <span id="sp:348" class="id"><a name="sp:348" class="">sp</a></span> <span id="rs':349" class="id"><a name="rs':349" class="">rs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:344">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':345">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:346">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:347">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:348">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':349">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Events.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_globalenvs">match_stacks_inside_globalenvs;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[b</span> <span class="id">A]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_globalenvs_preserves_globals">match_globalenvs_preserves_globals;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_bound" class="id"><a name="match_stacks_bound" class="">match_stacks_bound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="stk:350" class="id"><a name="stk:350" class="">stk</a></span> <span id="stk':351" class="id"><a name="stk':351" class="">stk'</a></span> <span id="bound:352" class="id"><a name="bound:352" class="">bound</a></span> <span id="bound1:353" class="id"><a name="bound1:353" class="">bound1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:350">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':351">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:352">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:352">bound</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound1:353">bound1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:350">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':351">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound1:353">bound1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_nil">match_stacks_nil</a></span> <span class="gallina-kwd">with</span> <span class="id">bound0</span>. <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_cons">match_stacks_cons;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_untailcall">match_stacks_untailcall;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Variable</span> <span id="INLINING.MATCH_STACKS.F1" class="id"><a name="INLINING.MATCH_STACKS.F1" class="">F1:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>.<br/>
<span class="vernacular">Variables</span> <span id="INLINING.MATCH_STACKS.m1" class="id"><a name="INLINING.MATCH_STACKS.m1" class="">m1</a></span> <span id="INLINING.MATCH_STACKS.m1'" class="id"><a name="INLINING.MATCH_STACKS.m1'" class="">m1':</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="INLINING.MATCH_STACKS.INCR" class="id"><a name="INLINING.MATCH_STACKS.INCR" class="">INCR:</a></span> <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F1">F1</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_invariant" class="id"><a name="match_stacks_invariant" class="">match_stacks_invariant:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="stk:358" class="id"><a name="stk:358" class="">stk</a></span> <span id="stk':359" class="id"><a name="stk':359" class="">stk'</a></span> <span id="bound:360" class="id"><a name="bound:360" class="">bound,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:358">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':359">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:360">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="INJ:364" class="id"><a name="INJ:364" class="">INJ:</a></span> <span class="gallina-kwd">forall</span> <span id="b1:361" class="id"><a name="b1:361" class="">b1</a></span> <span id="b2:362" class="id"><a name="b2:362" class="">b2</a></span> <span id="delta:363" class="id"><a name="delta:363" class="">delta,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:361">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#b2:362">b2,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:363">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b2:362">b2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:360">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:361">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#b2:362">b2,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:363">delta</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PERM1:369" class="id"><a name="PERM1:369" class="">PERM1:</a></span> <span class="gallina-kwd">forall</span> <span id="b1:365" class="id"><a name="b1:365" class="">b1</a></span> <span id="b2:366" class="id"><a name="b2:366" class="">b2</a></span> <span id="delta:367" class="id"><a name="delta:367" class="">delta</a></span> <span id="ofs:368" class="id"><a name="ofs:368" class="">ofs,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:365">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#b2:366">b2,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:367">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b2:366">b2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:360">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m1">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:365">b1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:368">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:365">b1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:368">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PERM2:372" class="id"><a name="PERM2:372" class="">PERM2:</a></span> <span class="gallina-kwd">forall</span> <span id="b:370" class="id"><a name="b:370" class="">b</a></span> <span id="ofs:371" class="id"><a name="ofs:371" class="">ofs,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:370">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:360">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:370">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:371">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m1'">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:370">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:371">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PERM3:377" class="id"><a name="PERM3:377" class="">PERM3:</a></span> <span class="gallina-kwd">forall</span> <span id="b:373" class="id"><a name="b:373" class="">b</a></span> <span id="ofs:374" class="id"><a name="ofs:374" class="">ofs</a></span> <span id="k:375" class="id"><a name="k:375" class="">k</a></span> <span id="p:376" class="id"><a name="p:376" class="">p,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:373">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:360">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m1'">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:373">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:374">ofs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#k:375">k</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:376">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:373">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:374">ofs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#k:375">k</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:376">p</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m1">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m1'">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:358">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':359">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:360">bound</a></span><br/>
<br/>
<span class="gallina-kwd">with</span> <span id="match_stacks_inside_invariant" class="id"><a name="match_stacks_inside_invariant" class="">match_stacks_inside_invariant:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="stk:378" class="id"><a name="stk:378" class="">stk</a></span> <span id="stk':379" class="id"><a name="stk':379" class="">stk'</a></span> <span id="f':380" class="id"><a name="f':380" class="">f'</a></span> <span id="ctx:381" class="id"><a name="ctx:381" class="">ctx</a></span> <span id="sp':382" class="id"><a name="sp':382" class="">sp'</a></span> <span id="rs1:383" class="id"><a name="rs1:383" class="">rs1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:378">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':379">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':380">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:381">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':382">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs1:383">rs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rs2:384" class="id"><a name="rs2:384" class="">rs2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RS:386" class="id"><a name="RS:386" class="">RS:</a></span> <span class="gallina-kwd">forall</span> <span id="r:385" class="id"><a name="r:385" class="">r,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:385">r</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:381">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs2:384">rs2#r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs1:383">rs1#r</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="INJ:390" class="id"><a name="INJ:390" class="">INJ:</a></span> <span class="gallina-kwd">forall</span> <span id="b1:387" class="id"><a name="b1:387" class="">b1</a></span> <span id="b2:388" class="id"><a name="b2:388" class="">b2</a></span> <span id="delta:389" class="id"><a name="delta:389" class="">delta,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:387">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#b2:388">b2,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:389">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b2:388">b2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':382">sp'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:387">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#b2:388">b2,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:389">delta</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PERM1:395" class="id"><a name="PERM1:395" class="">PERM1:</a></span> <span class="gallina-kwd">forall</span> <span id="b1:391" class="id"><a name="b1:391" class="">b1</a></span> <span id="b2:392" class="id"><a name="b2:392" class="">b2</a></span> <span id="delta:393" class="id"><a name="delta:393" class="">delta</a></span> <span id="ofs:394" class="id"><a name="ofs:394" class="">ofs,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:391">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#b2:392">b2,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:393">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b2:392">b2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':382">sp'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m1">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:391">b1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:394">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:391">b1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:394">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PERM2:398" class="id"><a name="PERM2:398" class="">PERM2:</a></span> <span class="gallina-kwd">forall</span> <span id="b:396" class="id"><a name="b:396" class="">b</a></span> <span id="ofs:397" class="id"><a name="ofs:397" class="">ofs,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:396">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':382">sp'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:396">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:397">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m1'">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:396">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:397">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PERM3:403" class="id"><a name="PERM3:403" class="">PERM3:</a></span> <span class="gallina-kwd">forall</span> <span id="b:399" class="id"><a name="b:399" class="">b</a></span> <span id="ofs:400" class="id"><a name="ofs:400" class="">ofs</a></span> <span id="k:401" class="id"><a name="k:401" class="">k</a></span> <span id="p:402" class="id"><a name="p:402" class="">p,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:399">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':382">sp'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m1'">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:399">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:400">ofs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#k:401">k</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:402">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:399">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:400">ofs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#k:401">k</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:402">p</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m1">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m1'">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:378">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':379">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':380">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:381">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':382">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs2:384">rs2</a></span>.<br/>
<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;nil&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_nil">match_stacks_nil</a></span> <span class="gallina-kwd">with</span> (<span class="id">bound1</span> <span class="id">:=</span> <span class="id">bound1</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MG</span>. <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">IMAGE</span> <span class="gallina-kwd">with</span> <span class="id">delta</span>. <span class="id">eapply</span> <span class="id">INJ;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;cons&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_cons">match_stacks_cons</a></span> <span class="gallina-kwd">with</span> (<span class="id">fenv</span> <span class="id">:=</span> <span class="id">fenv</span>) (<span class="id">ctx</span> <span class="id">:=</span> <span class="id">ctx</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">match_stacks_inside_invariant;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">INJ;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">PERM1;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">PERM2;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">PERM3;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_incr">agree_regs_incr;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_invariant">range_private_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;untailcall&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_untailcall">match_stacks_untailcall</a></span> <span class="gallina-kwd">with</span> (<span class="id">ctx</span> <span class="id">:=</span> <span class="id">ctx</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">match_stacks_inside_invariant;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">INJ;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">PERM1;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">PERM2;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">PERM3;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_invariant">range_private_invariant;</a></span> <span class="id">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;base&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_base">match_stacks_inside_base;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">match_stacks_invariant;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">INJ;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">PERM1;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">PERM2;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">PERM3;</span> <span class="id">eauto;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_inlined">match_stacks_inside_inlined</a></span> <span class="gallina-kwd">with</span> (<span class="id">fenv</span> <span class="id">:=</span> <span class="id">fenv</span>) (<span class="id">ctx'</span> <span class="id">:=</span> <span class="id">ctx'</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHmatch_stacks_inside;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">RS</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">BELOW</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_incr">agree_regs_incr</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_invariant">agree_regs_invariant</a></span> <span class="gallina-kwd">with</span> <span class="id">rs';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">RS</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">BELOW</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_invariant">range_private_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">split</span>. <span class="id">eapply</span> <span class="id">INJ;</span> <span class="id">eauto</span>. <span class="id">extlia</span>. <span class="id">eapply</span> <span class="id">PERM1;</span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">PERM2;</span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_empty" class="id"><a name="match_stacks_empty" class="">match_stacks_empty:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="stk:404" class="id"><a name="stk:404" class="">stk</a></span> <span id="stk':405" class="id"><a name="stk':405" class="">stk'</a></span> <span id="bound:406" class="id"><a name="bound:406" class="">bound,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:404">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':405">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:406">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:404">stk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':405">stk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
<span class="gallina-kwd">with</span> <span id="match_stacks_inside_empty" class="id"><a name="match_stacks_inside_empty" class="">match_stacks_inside_empty:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="stk:407" class="id"><a name="stk:407" class="">stk</a></span> <span id="stk':408" class="id"><a name="stk':408" class="">stk'</a></span> <span id="f:409" class="id"><a name="f:409" class="">f</a></span> <span id="ctx:410" class="id"><a name="ctx:410" class="">ctx</a></span> <span id="sp:411" class="id"><a name="sp:411" class="">sp</a></span> <span id="rs:412" class="id"><a name="rs:412" class="">rs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.F">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS.m'">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:407">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':408">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:409">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:410">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:411">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:412">rs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:407">stk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':408">stk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:410">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">match_stacks_inside_empty;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">eapply</span> <span class="id">match_stacks_empty;</span> <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.MATCH_STACKS">MATCH_STACKS</a></span>.<br/>
<br/>
<div class="doc">Preservation by assignment to a register </div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_inside_set_reg" class="id"><a name="match_stacks_inside_set_reg" class="">match_stacks_inside_set_reg:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:413" class="id"><a name="F:413" class="">F</a></span> <span id="m:414" class="id"><a name="m:414" class="">m</a></span> <span id="m':415" class="id"><a name="m':415" class="">m'</a></span> <span id="stk:416" class="id"><a name="stk:416" class="">stk</a></span> <span id="stk':417" class="id"><a name="stk':417" class="">stk'</a></span> <span id="f':418" class="id"><a name="f':418" class="">f'</a></span> <span id="ctx:419" class="id"><a name="ctx:419" class="">ctx</a></span> <span id="sp':420" class="id"><a name="sp':420" class="">sp'</a></span> <span id="rs':421" class="id"><a name="rs':421" class="">rs'</a></span> <span id="r:422" class="id"><a name="r:422" class="">r</a></span> <span id="v:423" class="id"><a name="v:423" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:413">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:414">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':415">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:416">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':417">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':418">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:419">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':420">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':421">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:413">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:414">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':415">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:416">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':417">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':418">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:419">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':420">sp'</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#rs':421">rs'#</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:419">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:422">r</a></span>) <span class="id">&lt;-</span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:423">v</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_invariant">match_stacks_inside_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gso">Regmap.gso</a></span>. <span class="id">zify</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_eq">shiftpos_eq</a></span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_inside_set_res" class="id"><a name="match_stacks_inside_set_res" class="">match_stacks_inside_set_res:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:424" class="id"><a name="F:424" class="">F</a></span> <span id="m:425" class="id"><a name="m:425" class="">m</a></span> <span id="m':426" class="id"><a name="m':426" class="">m'</a></span> <span id="stk:427" class="id"><a name="stk:427" class="">stk</a></span> <span id="stk':428" class="id"><a name="stk':428" class="">stk'</a></span> <span id="f':429" class="id"><a name="f':429" class="">f'</a></span> <span id="ctx:430" class="id"><a name="ctx:430" class="">ctx</a></span> <span id="sp':431" class="id"><a name="sp':431" class="">sp'</a></span> <span id="rs':432" class="id"><a name="rs':432" class="">rs'</a></span> <span id="res:433" class="id"><a name="res:433" class="">res</a></span> <span id="v:434" class="id"><a name="v:434" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:424">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:425">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':426">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:427">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':428">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':429">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:430">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':431">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':432">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:424">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:425">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':426">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:427">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':428">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':429">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:430">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':431">sp'</a></span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sbuiltinres">sbuiltinres</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:430">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#res:433">res</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#v:434">v</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':432">rs'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">res;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_set_reg">match_stacks_inside_set_reg;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation by a memory store </div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_inside_store" class="id"><a name="match_stacks_inside_store" class="">match_stacks_inside_store:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:435" class="id"><a name="F:435" class="">F</a></span> <span id="m:436" class="id"><a name="m:436" class="">m</a></span> <span id="m':437" class="id"><a name="m':437" class="">m'</a></span> <span id="stk:438" class="id"><a name="stk:438" class="">stk</a></span> <span id="stk':439" class="id"><a name="stk':439" class="">stk'</a></span> <span id="f':440" class="id"><a name="f':440" class="">f'</a></span> <span id="ctx:441" class="id"><a name="ctx:441" class="">ctx</a></span> <span id="sp':442" class="id"><a name="sp':442" class="">sp'</a></span> <span id="rs':443" class="id"><a name="rs':443" class="">rs'</a></span> <span id="chunk:444" class="id"><a name="chunk:444" class="">chunk</a></span> <span id="b:445" class="id"><a name="b:445" class="">b</a></span> <span id="ofs:446" class="id"><a name="ofs:446" class="">ofs</a></span> <span id="v:447" class="id"><a name="v:447" class="">v</a></span> <span id="m1:448" class="id"><a name="m1:448" class="">m1</a></span> <span id="chunk':449" class="id"><a name="chunk':449" class="">chunk'</a></span> <span id="b':450" class="id"><a name="b':450" class="">b'</a></span> <span id="ofs':451" class="id"><a name="ofs':451" class="">ofs'</a></span> <span id="v':452" class="id"><a name="v':452" class="">v'</a></span> <span id="m1':453" class="id"><a name="m1':453" class="">m1',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:435">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:436">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':437">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:438">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':439">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':440">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:441">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':442">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':443">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#chunk:444">chunk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:436">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:445">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:446">ofs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:447">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:448">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#chunk':449">chunk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':437">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b':450">b'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs':451">ofs'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v':452">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':453">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:435">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:448">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':453">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:438">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':439">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':440">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:441">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':442">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':443">rs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_invariant">match_stacks_inside_invariant;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation by an allocation </div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_inside_alloc_left" class="id"><a name="match_stacks_inside_alloc_left" class="">match_stacks_inside_alloc_left:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:454" class="id"><a name="F:454" class="">F</a></span> <span id="m:455" class="id"><a name="m:455" class="">m</a></span> <span id="m':456" class="id"><a name="m':456" class="">m'</a></span> <span id="stk:457" class="id"><a name="stk:457" class="">stk</a></span> <span id="stk':458" class="id"><a name="stk':458" class="">stk'</a></span> <span id="f':459" class="id"><a name="f':459" class="">f'</a></span> <span id="ctx:460" class="id"><a name="ctx:460" class="">ctx</a></span> <span id="sp':461" class="id"><a name="sp':461" class="">sp'</a></span> <span id="rs':462" class="id"><a name="rs':462" class="">rs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:454">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:455">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':456">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:457">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':458">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':459">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:460">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':461">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':462">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="sz:463" class="id"><a name="sz:463" class="">sz</a></span> <span id="m1:464" class="id"><a name="m1:464" class="">m1</a></span> <span id="b:465" class="id"><a name="b:465" class="">b</a></span> <span id="F1:466" class="id"><a name="F1:466" class="">F1</a></span> <span id="delta:467" class="id"><a name="delta:467" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:455">m</a></span> <span class="id">0</span> <span class="id"><a href="compcert.backend.Inliningproof.html#sz:463">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#m1:464">m1,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:465">b</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:454">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F1:466">F1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#F1:466">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:465">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#sp':461">sp',</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#delta:467">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b1:468" class="id"><a name="b1:468" class="">b1,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:468">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:465">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F1:466">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:468">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:454">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b1:468">b1</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#delta:467">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:460">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F1:466">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:464">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':456">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:457">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':458">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':459">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:460">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':461">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':462">rs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;base&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_base">match_stacks_inside_base;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_invariant">match_stacks_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b1</span>. <span class="id">rewrite</span> <span class="id">H1</span> <span class="gallina-kwd">in</span> <span class="id">H4;</span> <span class="id">inv</span> <span class="id">H4</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H2</span> <span class="gallina-kwd">in</span> <span class="id">H4;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">intros;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b1</span>. <span class="id">rewrite</span> <span class="id">H1</span> <span class="gallina-kwd">in</span> <span class="id">H4</span>. <span class="id">inv</span> <span class="id">H4</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_inlined">match_stacks_inside_inlined;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">IHmatch_stacks_inside;</span> <span class="id">eauto</span>. <span class="id">destruct</span> <span class="id">SBELOW</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_incr">agree_regs_incr;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_invariant">range_private_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b0</span>. <span class="id">rewrite</span> <span class="id">H2</span> <span class="gallina-kwd">in</span> <span class="id">H5;</span> <span class="id">inv</span> <span class="id">H5</span>. <span class="id">exfalso;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H3</span> <span class="gallina-kwd">in</span> <span class="id">H5;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation by freeing </div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_free_left" class="id"><a name="match_stacks_free_left" class="">match_stacks_free_left:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:469" class="id"><a name="F:469" class="">F</a></span> <span id="m:470" class="id"><a name="m:470" class="">m</a></span> <span id="m':471" class="id"><a name="m':471" class="">m'</a></span> <span id="stk:472" class="id"><a name="stk:472" class="">stk</a></span> <span id="stk':473" class="id"><a name="stk':473" class="">stk'</a></span> <span id="sp:474" class="id"><a name="sp:474" class="">sp</a></span> <span id="b:475" class="id"><a name="b:475" class="">b</a></span> <span id="lo:476" class="id"><a name="lo:476" class="">lo</a></span> <span id="hi:477" class="id"><a name="hi:477" class="">hi</a></span> <span id="m1:478" class="id"><a name="m1:478" class="">m1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:469">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:470">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':471">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:472">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':473">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:474">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:470">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:475">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#lo:476">lo</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:477">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:478">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:469">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1:478">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':471">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:472">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':473">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:474">sp</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_invariant">match_stacks_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_free_right" class="id"><a name="match_stacks_free_right" class="">match_stacks_free_right:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="F:479" class="id"><a name="F:479" class="">F</a></span> <span id="m:480" class="id"><a name="m:480" class="">m</a></span> <span id="m':481" class="id"><a name="m':481" class="">m'</a></span> <span id="stk:482" class="id"><a name="stk:482" class="">stk</a></span> <span id="stk':483" class="id"><a name="stk':483" class="">stk'</a></span> <span id="sp:484" class="id"><a name="sp:484" class="">sp</a></span> <span id="lo:485" class="id"><a name="lo:485" class="">lo</a></span> <span id="hi:486" class="id"><a name="hi:486" class="">hi</a></span> <span id="m1':487" class="id"><a name="m1':487" class="">m1',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:479">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:480">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':481">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:482">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':483">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:484">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':481">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:484">sp</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#lo:485">lo</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#hi:486">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':487">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:479">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:480">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':487">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:482">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':483">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:484">sp</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_invariant">match_stacks_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">Mem.perm_free_1</a></span><span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">ordered_type</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="min_alignment_sound" class="id"><a name="min_alignment_sound" class="">min_alignment_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="sz:488" class="id"><a name="sz:488" class="">sz</a></span> <span id="n:489" class="id"><a name="n:489" class="">n,</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#min_alignment">min_alignment</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sz:488">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#n:489">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inj_offset_aligned">Mem.inj_offset_aligned</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#n:489">n</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sz:488">sz</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#min_alignment">min_alignment</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">sz</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id">n</span>)). <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">1</span>). <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">2</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">4</span>). <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_trans">Z.divide_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">4;</span> <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_trans">Z.divide_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">8;</span> <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">4;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">4</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">sz</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id">4</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id">n</span>)). <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">1</span>). <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">2</span>). <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">4</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_trans">Z.divide_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">8;</span> <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">8</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">sz</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id">8</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id">n</span>)). <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">1</span>). <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">2</span>). <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">4</span>). <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_1_l">Z.divide_1_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_1_l">Z.divide_1_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H2;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H2;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation by external calls </div>
<br/>
<span class="vernacular">Section</span> <span id="INLINING.EXTCALL" class="id"><a name="INLINING.EXTCALL" class="">EXTCALL</a></span>.<br/>
<br/>
<span class="vernacular">Variables</span> <span id="INLINING.EXTCALL.F1" class="id"><a name="INLINING.EXTCALL.F1" class="">F1</a></span> <span id="INLINING.EXTCALL.F2" class="id"><a name="INLINING.EXTCALL.F2" class="">F2:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>.<br/>
<span class="vernacular">Variables</span> <span id="INLINING.EXTCALL.m1" class="id"><a name="INLINING.EXTCALL.m1" class="">m1</a></span> <span id="INLINING.EXTCALL.m2" class="id"><a name="INLINING.EXTCALL.m2" class="">m2</a></span> <span id="INLINING.EXTCALL.m1'" class="id"><a name="INLINING.EXTCALL.m1'" class="">m1'</a></span> <span id="INLINING.EXTCALL.m2'" class="id"><a name="INLINING.EXTCALL.m2'" class="">m2':</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="INLINING.EXTCALL.MAXPERM" class="id"><a name="INLINING.EXTCALL.MAXPERM" class="">MAXPERM:</a></span> <span class="gallina-kwd">forall</span> <span id="b:496" class="id"><a name="b:496" class="">b</a></span> <span id="ofs:497" class="id"><a name="ofs:497" class="">ofs</a></span> <span id="p:498" class="id"><a name="p:498" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:496">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m2">m2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:496">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:497">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:498">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:496">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:497">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:498">p</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="INLINING.EXTCALL.MAXPERM'" class="id"><a name="INLINING.EXTCALL.MAXPERM'" class="">MAXPERM':</a></span> <span class="gallina-kwd">forall</span> <span id="b:500" class="id"><a name="b:500" class="">b</a></span> <span id="ofs:501" class="id"><a name="ofs:501" class="">ofs</a></span> <span id="p:502" class="id"><a name="p:502" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1'">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:500">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m2'">m2'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:500">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:501">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:502">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1'">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#b:500">b</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:501">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#p:502">p</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="INLINING.EXTCALL.UNCHANGED" class="id"><a name="INLINING.EXTCALL.UNCHANGED" class="">UNCHANGED:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1">m1</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1'">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m2'">m2'</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="INLINING.EXTCALL.INJ" class="id"><a name="INLINING.EXTCALL.INJ" class="">INJ:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1'">m1'</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="INLINING.EXTCALL.INCR" class="id"><a name="INLINING.EXTCALL.INCR" class="">INCR:</a></span> <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.F2">F2</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="INLINING.EXTCALL.SEP" class="id"><a name="INLINING.EXTCALL.SEP" class="">SEP:</a></span> <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.F2">F2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1'">m1'</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_extcall" class="id"><a name="match_stacks_extcall" class="">match_stacks_extcall:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="stk:508" class="id"><a name="stk:508" class="">stk</a></span> <span id="stk':509" class="id"><a name="stk':509" class="">stk'</a></span> <span id="bound:510" class="id"><a name="bound:510" class="">bound,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1'">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:508">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':509">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:510">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:510">bound</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1'">m1'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.F2">F2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m2">m2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m2'">m2'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:508">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':509">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#bound:510">bound</a></span><br/>
<span class="gallina-kwd">with</span> <span id="match_stacks_inside_extcall" class="id"><a name="match_stacks_inside_extcall" class="">match_stacks_inside_extcall:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="stk:511" class="id"><a name="stk:511" class="">stk</a></span> <span id="stk':512" class="id"><a name="stk':512" class="">stk'</a></span> <span id="f':513" class="id"><a name="f':513" class="">f'</a></span> <span id="ctx:514" class="id"><a name="ctx:514" class="">ctx</a></span> <span id="sp':515" class="id"><a name="sp':515" class="">sp'</a></span> <span id="rs':516" class="id"><a name="rs':516" class="">rs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.F1">F1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1">m1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1'">m1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:511">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':512">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':513">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:514">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':515">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':516">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':515">sp'</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m1'">m1'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.F2">F2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m2">m2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.m2'">m2'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:511">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':512">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':513">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:514">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':515">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':516">rs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_nil">match_stacks_nil</a></span> <span class="gallina-kwd">with</span> <span class="id">bound1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MG</span>. <span class="id">constructor;</span> <span class="id">intros;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.F1">F1</a></span> <span class="id">b1</span>) <span class="gallina-kwd">as</span> <span class="id">[[b2'</span> <span class="id">delta']|]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.INCR">INCR;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">EQ;</span> <span class="id">rewrite</span> <span class="id">H0</span> <span class="gallina-kwd">in</span> <span class="id">EQ;</span> <span class="id">inv</span> <span class="id">EQ</span>. <span class="id">eapply</span> <span class="id">IMAGE;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.SEP">SEP;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">elim</span> <span class="id">B</span>. <span class="id">red</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_cons">match_stacks_cons;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">match_stacks_inside_extcall;</span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_incr">agree_regs_incr;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_extcall">range_private_extcall;</a></span> <span class="id">eauto</span>. <span class="id">red;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">SSZ2;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.MAXPERM'">MAXPERM';</a></span> <span class="id">auto</span>. <span class="id">red;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_untailcall">match_stacks_untailcall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">match_stacks_inside_extcall;</span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_extcall">range_private_extcall;</a></span> <span class="id">eauto</span>. <span class="id">red;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">SSZ2;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL.MAXPERM'">MAXPERM';</a></span> <span class="id">auto</span>. <span class="id">red;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_base">match_stacks_inside_base;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">match_stacks_extcall;</span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_inlined">match_stacks_inside_inlined;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_incr">agree_regs_incr;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_extcall">range_private_extcall;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.EXTCALL">EXTCALL</a></span>.<br/>
<br/>
<div class="doc">Change of context corresponding to an inlined tailcall </div>
<br/>
<span class="vernacular">Lemma</span> <span id="align_unchanged" class="id"><a name="align_unchanged" class="">align_unchanged:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:517" class="id"><a name="n:517" class="">n</a></span> <span id="amount:518" class="id"><a name="amount:518" class="">amount,</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#amount:518">amount</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#amount:518">amount</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#n:517">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#n:517">n</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#amount:518">amount</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#n:517">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H0</span> <span class="gallina-kwd">as</span> <span class="id">[p</span> <span class="id">EQ]</span>. <span class="id">subst</span> <span class="id">n</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zdiv_unique">Zdiv_unique</a></span> <span class="gallina-kwd">with</span> (<span class="id">b</span> <span class="id">:=</span> <span class="id">amount</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>). <span class="id">lia</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="match_stacks_inside_inlined_tailcall" class="id"><a name="match_stacks_inside_inlined_tailcall" class="">match_stacks_inside_inlined_tailcall:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fenv:519" class="id"><a name="fenv:519" class="">fenv</a></span> <span id="F:520" class="id"><a name="F:520" class="">F</a></span> <span id="m:521" class="id"><a name="m:521" class="">m</a></span> <span id="m':522" class="id"><a name="m':522" class="">m'</a></span> <span id="stk:523" class="id"><a name="stk:523" class="">stk</a></span> <span id="stk':524" class="id"><a name="stk':524" class="">stk'</a></span> <span id="f':525" class="id"><a name="f':525" class="">f'</a></span> <span id="ctx:526" class="id"><a name="ctx:526" class="">ctx</a></span> <span id="sp':527" class="id"><a name="sp':527" class="">sp'</a></span> <span id="rs':528" class="id"><a name="rs':528" class="">rs'</a></span> <span id="ctx':529" class="id"><a name="ctx':529" class="">ctx'</a></span> <span id="f:530" class="id"><a name="f:530" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:520">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:521">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':522">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:523">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':524">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':525">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:526">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':527">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':528">rs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#context_below">context_below</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:526">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':529">ctx'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#context_stack_tailcall">context_stack_tailcall</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:526">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:530">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':529">ctx'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#ctx':529">ctx'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:526">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:520">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:521">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':522">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':527">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:526">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#f':525">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:519">fenv</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':525">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':529">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:530">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':525">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:520">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:521">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':522">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:523">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':524">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':525">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':529">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':527">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':528">rs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;base&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_base">match_stacks_inside_base;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H1</span>. <span class="id">rewrite</span> <span class="id">DSTK</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#align_unchanged">align_unchanged</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#min_alignment_pos">min_alignment_pos</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx'</span>). <span class="id">rewrite</span> <span class="id">H1</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_le">align_le</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#min_alignment_pos">min_alignment_pos</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_inlined">match_stacks_inside_inlined;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> (<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span>)). <span class="id">apply</span> <span class="id">PAD;</span> <span class="id">lia</span>. <span class="id">apply</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H4</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inliningspec.html#context_below">context_below</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inliningspec.html#context_stack_call">context_stack_call</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<h2> Relating states </h2>
<br/>
<span class="vernacular">Inductive</span> <span id="match_states" class="id"><a name="match_states" class="">match_states:</a></span> <span class="id"><a href="compcert.backend.RTL.html#state">RTL.state</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#state">RTL.state</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_regular_states" class="id"><a name="match_regular_states" class="">match_regular_states:</a></span> <span class="gallina-kwd">forall</span> <span id="stk:533" class="id"><a name="stk:533" class="">stk</a></span> <span id="f:534" class="id"><a name="f:534" class="">f</a></span> <span id="sp:535" class="id"><a name="sp:535" class="">sp</a></span> <span id="pc:536" class="id"><a name="pc:536" class="">pc</a></span> <span id="rs:537" class="id"><a name="rs:537" class="">rs</a></span> <span id="m:538" class="id"><a name="m:538" class="">m</a></span> <span id="stk':539" class="id"><a name="stk':539" class="">stk'</a></span> <span id="f':540" class="id"><a name="f':540" class="">f'</a></span> <span id="sp':541" class="id"><a name="sp':541" class="">sp'</a></span> <span id="rs':542" class="id"><a name="rs':542" class="">rs'</a></span> <span id="m':543" class="id"><a name="m':543" class="">m'</a></span> <span id="F:544" class="id"><a name="F:544" class="">F</a></span> <span id="fenv:545" class="id"><a name="fenv:545" class="">fenv</a></span> <span id="ctx:546" class="id"><a name="ctx:546" class="">ctx</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MS:547" class="id"><a name="MS:547" class="">MS:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:544">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:538">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':543">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:533">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':539">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':540">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:546">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':541">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':542">rs'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="COMPAT:548" class="id"><a name="COMPAT:548" class="">COMPAT:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv_compat">fenv_compat</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:545">fenv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="FB:549" class="id"><a name="FB:549" class="">FB:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:545">fenv</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':540">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:546">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:534">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':540">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="AG:550" class="id"><a name="AG:550" class="">AG:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs">agree_regs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:544">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:546">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:537">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':542">rs'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SP:551" class="id"><a name="SP:551" class="">SP:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:544">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:535">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningproof.html#sp':541">sp',</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:546">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MINJ:552" class="id"><a name="MINJ:552" class="">MINJ:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:544">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:538">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':543">m'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="VB:553" class="id"><a name="VB:553" class="">VB:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':543">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':541">sp'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PRIV:554" class="id"><a name="PRIV:554" class="">PRIV:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:544">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:538">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':543">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':541">sp'</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#ctx:546">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:546">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>)) <span class="id"><a href="compcert.backend.Inliningproof.html#f':540">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SSZ1:555" class="id"><a name="SSZ1:555" class="">SSZ1:</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':540">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SSZ2:557" class="id"><a name="SSZ2:557" class="">SSZ2:</a></span> <span class="gallina-kwd">forall</span> <span id="ofs:556" class="id"><a name="ofs:556" class="">ofs,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':543">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':541">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:556">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:556">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':540">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>))<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_states:531">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:533">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:534">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp:535">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#pc:536">pc</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs:537">rs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:538">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':539">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':540">f'</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':541">sp'</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:546">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#pc:536">pc</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#rs':542">rs'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':543">m'</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_call_states" class="id"><a name="match_call_states" class="">match_call_states:</a></span> <span class="gallina-kwd">forall</span> <span id="stk:558" class="id"><a name="stk:558" class="">stk</a></span> <span id="fd:559" class="id"><a name="fd:559" class="">fd</a></span> <span id="args:560" class="id"><a name="args:560" class="">args</a></span> <span id="m:561" class="id"><a name="m:561" class="">m</a></span> <span id="stk':562" class="id"><a name="stk':562" class="">stk'</a></span> <span id="fd':563" class="id"><a name="fd':563" class="">fd'</a></span> <span id="args':564" class="id"><a name="args':564" class="">args'</a></span> <span id="m':565" class="id"><a name="m':565" class="">m'</a></span> <span id="cunit:566" class="id"><a name="cunit:566" class="">cunit</a></span> <span id="F:567" class="id"><a name="F:567" class="">F</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MS:568" class="id"><a name="MS:568" class="">MS:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:567">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:561">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':565">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:558">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':562">stk'</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':565">m'</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="LINK:569" class="id"><a name="LINK:569" class="">LINK:</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cunit:566">cunit</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="FD:570" class="id"><a name="FD:570" class="">FD:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#funenv_program">funenv_program</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cunit:566">cunit</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#fd:559">fd</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fd':563">fd'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="VINJ:571" class="id"><a name="VINJ:571" class="">VINJ:</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:567">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#args:560">args</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#args':564">args'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MINJ:572" class="id"><a name="MINJ:572" class="">MINJ:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:567">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:561">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':565">m'</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_states:531">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:558">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fd:559">fd</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#args:560">args</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:561">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':562">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fd':563">fd'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#args':564">args'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':565">m'</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_call_regular_states" class="id"><a name="match_call_regular_states" class="">match_call_regular_states:</a></span> <span class="gallina-kwd">forall</span> <span id="stk:573" class="id"><a name="stk:573" class="">stk</a></span> <span id="f:574" class="id"><a name="f:574" class="">f</a></span> <span id="vargs:575" class="id"><a name="vargs:575" class="">vargs</a></span> <span id="m:576" class="id"><a name="m:576" class="">m</a></span> <span id="stk':577" class="id"><a name="stk':577" class="">stk'</a></span> <span id="f':578" class="id"><a name="f':578" class="">f'</a></span> <span id="sp':579" class="id"><a name="sp':579" class="">sp'</a></span> <span id="rs':580" class="id"><a name="rs':580" class="">rs'</a></span> <span id="m':581" class="id"><a name="m':581" class="">m'</a></span> <span id="F:582" class="id"><a name="F:582" class="">F</a></span> <span id="fenv:583" class="id"><a name="fenv:583" class="">fenv</a></span> <span id="ctx:584" class="id"><a name="ctx:584" class="">ctx</a></span> <span id="ctx':585" class="id"><a name="ctx':585" class="">ctx'</a></span> <span id="pc':586" class="id"><a name="pc':586" class="">pc'</a></span> <span id="pc1':587" class="id"><a name="pc1':587" class="">pc1'</a></span> <span id="rargs:588" class="id"><a name="rargs:588" class="">rargs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MS:589" class="id"><a name="MS:589" class="">MS:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:582">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:576">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':581">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:573">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':577">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':578">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:584">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':579">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':580">rs'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="COMPAT:590" class="id"><a name="COMPAT:590" class="">COMPAT:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv_compat">fenv_compat</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:583">fenv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="FB:591" class="id"><a name="FB:591" class="">FB:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:583">fenv</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':578">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:584">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:574">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':578">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="BELOW:592" class="id"><a name="BELOW:592" class="">BELOW:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#context_below">context_below</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':585">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:584">ctx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="NOP:593" class="id"><a name="NOP:593" class="">NOP:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':578">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)<span class="id">!pc'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Inop">Inop</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#pc1':587">pc1'</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MOVES:594" class="id"><a name="MOVES:594" class="">MOVES:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_moves">tr_moves</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':578">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#pc1':587">pc1'</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':585">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rargs:588">rargs</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:584">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:574">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span>)) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:584">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:574">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="VINJ:595" class="id"><a name="VINJ:595" class="">VINJ:</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.backend.Inliningproof.html#val_reg_charact">val_reg_charact</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:582">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx':585">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':580">rs'</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#vargs:575">vargs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rargs:588">rargs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MINJ:596" class="id"><a name="MINJ:596" class="">MINJ:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:582">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:576">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':581">m'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="VB:597" class="id"><a name="VB:597" class="">VB:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':581">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':579">sp'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PRIV:598" class="id"><a name="PRIV:598" class="">PRIV:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:582">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:576">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':581">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':579">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:584">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#f':578">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SSZ1:599" class="id"><a name="SSZ1:599" class="">SSZ1:</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':578">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SSZ2:601" class="id"><a name="SSZ2:601" class="">SSZ2:</a></span> <span class="gallina-kwd">forall</span> <span id="ofs:600" class="id"><a name="ofs:600" class="">ofs,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':581">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':579">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:600">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:600">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':578">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>))<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_states:531">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:573">stk</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:574">f</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#vargs:575">vargs</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:576">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':577">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':578">f'</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':579">sp'</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#pc':586">pc'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':580">rs'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':581">m'</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_return_states" class="id"><a name="match_return_states" class="">match_return_states:</a></span> <span class="gallina-kwd">forall</span> <span id="stk:602" class="id"><a name="stk:602" class="">stk</a></span> <span id="v:603" class="id"><a name="v:603" class="">v</a></span> <span id="m:604" class="id"><a name="m:604" class="">m</a></span> <span id="stk':605" class="id"><a name="stk':605" class="">stk'</a></span> <span id="v':606" class="id"><a name="v':606" class="">v'</a></span> <span id="m':607" class="id"><a name="m':607" class="">m'</a></span> <span id="F:608" class="id"><a name="F:608" class="">F</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MS:609" class="id"><a name="MS:609" class="">MS:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:608">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:604">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':607">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:602">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':605">stk'</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':607">m'</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="VINJ:610" class="id"><a name="VINJ:610" class="">VINJ:</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:608">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:603">v</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v':606">v'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MINJ:611" class="id"><a name="MINJ:611" class="">MINJ:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:608">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:604">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':607">m'</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_states:531">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:602">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:603">v</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:604">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':605">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v':606">v'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':607">m'</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="match_return_regular_states" class="id"><a name="match_return_regular_states" class="">match_return_regular_states:</a></span> <span class="gallina-kwd">forall</span> <span id="stk:612" class="id"><a name="stk:612" class="">stk</a></span> <span id="v:613" class="id"><a name="v:613" class="">v</a></span> <span id="m:614" class="id"><a name="m:614" class="">m</a></span> <span id="stk':615" class="id"><a name="stk':615" class="">stk'</a></span> <span id="f':616" class="id"><a name="f':616" class="">f'</a></span> <span id="sp':617" class="id"><a name="sp':617" class="">sp'</a></span> <span id="rs':618" class="id"><a name="rs':618" class="">rs'</a></span> <span id="m':619" class="id"><a name="m':619" class="">m'</a></span> <span id="F:620" class="id"><a name="F:620" class="">F</a></span> <span id="ctx:621" class="id"><a name="ctx:621" class="">ctx</a></span> <span id="pc':622" class="id"><a name="pc':622" class="">pc'</a></span> <span id="or:623" class="id"><a name="or:623" class="">or</a></span> <span id="rinfo:624" class="id"><a name="rinfo:624" class="">rinfo</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MS:625" class="id"><a name="MS:625" class="">MS:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside">match_stacks_inside</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:620">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:614">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':619">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:612">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':615">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':616">f'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:621">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':617">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':618">rs'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RET:626" class="id"><a name="RET:626" class="">RET:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:621">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rinfo:624">rinfo</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="AT:627" class="id"><a name="AT:627" class="">AT:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':616">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)<span class="id">!pc'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#inline_return">inline_return</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:621">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#or:623">or</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rinfo:624">rinfo</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="VINJ:629" class="id"><a name="VINJ:629" class="">VINJ:</a></span> <span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Inliningproof.html#or:623">or</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:613">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:620">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:613">v</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':618">rs'#</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:621">ctx</a></span> <span class="id">r</span>) <span class="gallina-kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MINJ:630" class="id"><a name="MINJ:630" class="">MINJ:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:620">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:614">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':619">m'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="VB:631" class="id"><a name="VB:631" class="">VB:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':619">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':617">sp'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="PRIV:632" class="id"><a name="PRIV:632" class="">PRIV:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#F:620">F</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:614">m</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':619">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':617">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ctx:621">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#f':616">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SSZ1:633" class="id"><a name="SSZ1:633" class="">SSZ1:</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':616">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SSZ2:635" class="id"><a name="SSZ2:635" class="">SSZ2:</a></span> <span class="gallina-kwd">forall</span> <span id="ofs:634" class="id"><a name="ofs:634" class="">ofs,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':619">m'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':617">sp'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:634">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#ofs:634">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':616">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>))<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_states:531">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk:612">stk</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#v:613">v</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m:614">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#stk':615">stk'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':616">f'</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sp':617">sp'</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.Inliningproof.html#pc':622">pc'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#rs':618">rs'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m':619">m'</a></span>).<br/>
<br/>
<h2> Forward simulation </h2>
<br/>
<span class="vernacular">Definition</span> <span id="measure" class="id"><a name="measure" class="">measure</a></span> (<span id="S:636" class="id"><a name="S:636" class="">S:</a></span> <span class="id"><a href="compcert.backend.RTL.html#state">RTL.state</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Inliningproof.html#S:636">S</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">1</span>%<span class="id">nat</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">0</span>%<span class="id">nat</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">0</span>%<span class="id">nat</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="tr_funbody_inv" class="id"><a name="tr_funbody_inv" class="">tr_funbody_inv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fenv:638" class="id"><a name="fenv:638" class="">fenv</a></span> <span id="sz:639" class="id"><a name="sz:639" class="">sz</a></span> <span id="cts:640" class="id"><a name="cts:640" class="">cts</a></span> <span id="f:641" class="id"><a name="f:641" class="">f</a></span> <span id="c:642" class="id"><a name="c:642" class="">c</a></span> <span id="pc:643" class="id"><a name="pc:643" class="">pc</a></span> <span id="i:644" class="id"><a name="i:644" class="">i,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:638">fenv</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sz:639">sz</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cts:640">cts</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:641">f</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#c:642">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f:641">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#i:644">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#fenv:638">fenv</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#sz:639">sz</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#cts:640">cts</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#pc:643">pc</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#i:644">i</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#c:642">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="step_simulation" class="id"><a name="step_simulation" class="">step_simulation:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="S1:645" class="id"><a name="S1:645" class="">S1</a></span> <span id="t:646" class="id"><a name="t:646" class="">t</a></span> <span id="S2:647" class="id"><a name="S2:647" class="">S2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.RTL.html#step">step</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.ge">ge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S1:645">S1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#t:646">t</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S2:647">S2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="S1':648" class="id"><a name="S1':648" class="">S1'</a></span> (<span id="MS:649" class="id"><a name="MS:649" class="">MS:</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S1:645">S1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S1':648">S1'</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">exists</span> <span id="S2':650" class="id"><a name="S2':650" class="">S2',</a></span> <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.backend.RTL.html#step">step</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S1':648">S1'</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#t:646">t</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S2':650">S2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S2:647">S2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S2':650">S2'</a></span>)<br/>
&nbsp;&nbsp;<span class="id">\/</span> (<span class="id"><a href="compcert.backend.Inliningproof.html#measure">measure</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S2:647">S2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#measure">measure</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S1:645">S1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#t:646">t</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S2:647">S2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#S1':648">S1'</a></span>)%<span class="id">nat</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros;</span> <span class="id">inv</span> <span class="id">MS</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;nop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_funbody_inv">tr_funbody_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">TR;</span> <span class="id">inv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Inop">exec_Inop;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;op&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_funbody_inv">tr_funbody_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">TR;</span> <span class="id">inv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation_inject">eval_operation_inject</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_globals">match_stacks_inside_globals;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">SP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">rs##args</span>). <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">rs'##</span>(<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id">ctx</span> <span class="id">args</span>)). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_regs">agree_val_regs;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">MINJ</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="compcert.backend.Inlining.html#sop">sop</a></span> <span class="id">ctx</span> <span class="id">op</span>). <span class="id">intros</span> <span class="id">[v'</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop;</a></span> <span class="id">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation_preserved">eval_operation_preserved;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id"><a href="compcert.backend.Inliningproof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_set_reg">match_stacks_inside_set_reg;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_set_reg">agree_set_reg;</a></span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;load&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_funbody_inv">tr_funbody_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">TR;</span> <span class="id">inv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_inject">eval_addressing_inject</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_globals">match_stacks_inside_globals;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">SP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">rs##args</span>). <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">rs'##</span>(<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id">ctx</span> <span class="id">args</span>)). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_regs">agree_val_regs;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="compcert.backend.Inlining.html#saddr">saddr</a></span> <span class="id">ctx</span> <span class="id">addr</span>). <span class="id">intros</span> <span class="id">[a'</span> <span class="id">[P</span> <span class="id">Q]]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[v'</span> <span class="id">[U</span> <span class="id">V]]</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp'</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#saddr">saddr</a></span> <span class="id">ctx</span> <span class="id">addr</span>) <span class="id">rs'</span> <span class="id"><a href="compcert.backend.Registers.html#aa150de2849122c3eaa46f9861185476">##</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id">ctx</span> <span class="id">args</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a'</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">P</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_preserved">eval_addressing_preserved</a></span>. <span class="id">exact</span> <span class="id"><a href="compcert.backend.Inliningproof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iload">exec_Iload;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_set_reg">match_stacks_inside_set_reg;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_set_reg">agree_set_reg;</a></span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;store&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_funbody_inv">tr_funbody_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">TR;</span> <span class="id">inv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_inject">eval_addressing_inject</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_globals">match_stacks_inside_globals;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">SP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">2</span> <span class="id">:=</span> <span class="id">rs##args</span>). <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">rs'##</span>(<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id">ctx</span> <span class="id">args</span>)). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_regs">agree_val_regs;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.backend.Inlining.html#saddr">saddr</a></span>. <span class="id">intros</span> <span class="id">[a'</span> <span class="id">[P</span> <span class="id">Q]]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev_mapped_inject">Mem.storev_mapped_inject</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_reg">agree_val_reg;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[m1'</span> <span class="id">[U</span> <span class="id">V]]</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tge">tge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp'</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#saddr">saddr</a></span> <span class="id">ctx</span> <span class="id">addr</span>) <span class="id">rs'</span> <span class="id"><a href="compcert.backend.Registers.html#aa150de2849122c3eaa46f9861185476">##</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id">ctx</span> <span class="id">args</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">P</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_preserved">eval_addressing_preserved</a></span>. <span class="id">exact</span> <span class="id"><a href="compcert.backend.Inliningproof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Istore">exec_Istore;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a';</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">U;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_store">match_stacks_inside_store;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_block_1">Mem.store_valid_block_1</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_invariant">range_private_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">Mem.perm_store_2</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_1">Mem.perm_store_1</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">SSZ2</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">Mem.perm_store_2</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_globalenvs">match_stacks_inside_globalenvs;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[bound</span> <span class="id">G]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#find_function_agree">find_function_agree;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">cu</span> &amp; <span class="id">fd'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_funbody_inv">tr_funbody_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">TR;</span> <span class="id">inv</span> <span class="id">TR</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;not&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Icall">exec_Icall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#sig_function_translated">sig_function_translated;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_cons">match_stacks_cons;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_regs">agree_val_regs;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EQ:</span> <span class="id">fd</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id">f0</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#find_inlined_function">find_inlined_function;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">fd</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">split</span>. <span class="id">simpl;</span> <span class="id">lia</span>. <span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_inlined">match_stacks_inside_inlined;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id">PRIV</span>. <span class="id">inv</span> <span class="id">H13</span>. <span class="id">destruct</span> <span class="id">H16</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_regs_gen">agree_val_regs_gen;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">apply</span> <span class="id">PRIV</span>. <span class="id">destruct</span> <span class="id">H16</span>. <span class="id">lia</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;tailcall&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_globalenvs">match_stacks_inside_globalenvs;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[bound</span> <span class="id">G]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#find_function_agree">find_function_agree;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">cu</span> &amp; <span class="id">fd'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">PRIV':</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id">F</span> <span class="id">m'</span> <span class="id">m'0</span> <span class="id">sp'</span> (<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span>) <span class="id">f'</span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_free_left">range_private_free_left;</a></span> <span class="id">eauto</span>. <span class="id">inv</span> <span class="id">FB</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H4</span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_funbody_inv">tr_funbody_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">TR;</span> <span class="id">inv</span> <span class="id">TR</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;within&nbsp;the&nbsp;original&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MS0;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">X:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">{</a></span> <span id="m1':652" class="id"><span id="m1':651" class="id"><a name="m1':652" class="">m1'</a></span></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">|</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m'0</span> <span class="id">sp'</span> <span class="id">0</span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f'</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':651">m1'}</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_free">Mem.range_perm_free</a></span>. <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">f</span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> <span class="id">ofs</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inject">Mem.perm_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">FB</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_perms">range_private_perms;</a></span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">X</span> <span class="gallina-kwd">as</span> <span class="id">[m1'</span> <span class="id">FREE]</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Itailcall">exec_Itailcall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#sig_function_translated">sig_function_translated;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_bound">match_stacks_bound</a></span> <span class="gallina-kwd">with</span> (<span class="id">bound</span> <span class="id">:=</span> <span class="id">sp'</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_invariant">match_stacks_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">Mem.perm_free_1</a></span><span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">ordered_type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">VB;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_regs">agree_val_regs;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_right_inject">Mem.free_right_inject</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inject">Mem.free_left_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;show&nbsp;that&nbsp;no&nbsp;valid&nbsp;location&nbsp;points&nbsp;into&nbsp;the&nbsp;stack&nbsp;block&nbsp;being&nbsp;freed&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">DSTK</span> <span class="gallina-kwd">in</span> <span class="id">PRIV'</span>. <span class="id">exploit</span> (<span class="id">PRIV'</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>)). <span class="id">lia</span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>.<br/>
&nbsp;&nbsp;<span class="id">eelim</span> <span class="id">Q;</span> <span class="id">eauto</span>. <span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta</span>) <span class="gallina-kwd">with</span> <span class="id">ofs</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_max">Mem.perm_max</a></span> <span class="gallina-kwd">with</span> <span class="id">k</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id">p;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;turned&nbsp;into&nbsp;a&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Icall">exec_Icall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#sig_function_translated">sig_function_translated;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_untailcall">match_stacks_untailcall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_invariant">match_stacks_inside_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_regs">agree_val_regs;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inject">Mem.free_left_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EQ:</span> <span class="id">fd</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id">f0</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#find_inlined_function">find_inlined_function;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">fd</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">split</span>. <span class="id">simpl;</span> <span class="id">lia</span>. <span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_inlined_tailcall">match_stacks_inside_inlined_tailcall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_invariant">match_stacks_inside_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_regs_gen">agree_val_regs_gen;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inject">Mem.free_left_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">apply</span> <span class="id">PRIV'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx'</span>). <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">H14;</span> <span class="id">rewrite</span> <span class="id">H14</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_le">align_le</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#min_alignment_pos">min_alignment_pos</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;builtin&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_funbody_inv">tr_funbody_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">TR;</span> <span class="id">inv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_globalenvs">match_stacks_inside_globalenvs;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[bound</span> <span class="id">MG]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_builtin_args">tr_builtin_args;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">vargs'</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_inject">external_call_mem_inject;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_globals">match_stacks_inside_globals;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[F1</span> <span class="id">[v1</span> <span class="id">[m1'</span> <span class="id">[A</span> <span class="id">[B</span> <span class="id">[C</span> <span class="id">[D</span> <span class="id">[E</span> <span class="id">[J</span> <span class="id">K]]]]]]]]]</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ibuiltin">exec_Ibuiltin;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_symbols_preserved">external_call_symbols_preserved;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#senv_preserved">senv_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_set_res">match_stacks_inside_set_res</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_extcall">match_stacks_inside_extcall</a></span> <span class="gallina-kwd">with</span> (<span class="id">F1</span> <span class="id">:=</span> <span class="id">F</span>) (<span class="id">F2</span> <span class="id">:=</span> <span class="id">F1</span>) (<span class="id">m1</span> <span class="id">:=</span> <span class="id">m</span>) (<span class="id">m1'</span> <span class="id">:=</span> <span class="id">m'0</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">res;</span> <span class="id">simpl;</span> <span class="id">[apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_set_reg">agree_set_reg;auto|idtac|idtac];</a></span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_incr">agree_regs_incr;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_valid_block">external_call_valid_block;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_extcall">range_private_extcall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">SSZ2</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm;</a></span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;cond&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_funbody_inv">tr_funbody_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">TR;</span> <span class="id">inv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id">cond</span> <span class="id">rs'##</span>(<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id">ctx</span> <span class="id">args</span>) <span class="id">m'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.x86.Op.html#eval_condition_inject">eval_condition_inject;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_regs">agree_val_regs;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Icond">exec_Icond;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">b;</span> <span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;jumptable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_funbody_inv">tr_funbody_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">TR;</span> <span class="id">inv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">F</span> <span class="id">rs#arg</span> <span class="id">rs'#</span>(<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id">ctx</span> <span class="id">arg</span>)). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_reg">agree_val_reg;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span> <span class="gallina-kwd">in</span> <span class="id">H2;</span> <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ijumptable">exec_Ijumptable;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_nth_z_map">list_nth_z_map</a></span>. <span class="id">rewrite</span> <span class="id">H1</span>. <span class="id">simpl;</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_funbody_inv">tr_funbody_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">TR;</span> <span class="id">inv</span> <span class="id">TR</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;not&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MS0;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">X:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">{</a></span> <span id="m1':654" class="id"><span id="m1':653" class="id"><a name="m1':654" class="">m1'</a></span></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">|</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m'0</span> <span class="id">sp'</span> <span class="id">0</span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f'</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#m1':653">m1'}</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_free">Mem.range_perm_free</a></span>. <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">f</span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> <span class="id">ofs</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inject">Mem.perm_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">FB</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_perms">range_private_perms;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Zmax_spec">Zmax_spec</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f</span>) <span class="id">0</span>). <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">0</span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f</span>))<span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">X</span> <span class="gallina-kwd">as</span> <span class="id">[m1'</span> <span class="id">FREE]</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ireturn">exec_Ireturn;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_bound">match_stacks_bound</a></span> <span class="gallina-kwd">with</span> (<span class="id">bound</span> <span class="id">:=</span> <span class="id">sp'</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_invariant">match_stacks_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">Mem.perm_free_1</a></span><span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">ordered_type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">VB;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">or;</span> <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_reg">agree_val_reg;</a></span> <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_right_inject">Mem.free_right_inject</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inject">Mem.free_left_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;show&nbsp;that&nbsp;no&nbsp;valid&nbsp;location&nbsp;points&nbsp;into&nbsp;the&nbsp;stack&nbsp;block&nbsp;being&nbsp;freed&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">FB;</span> <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">PRIV':</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id">F</span> <span class="id">m'</span> <span class="id">m'0</span> <span class="id">sp'</span> (<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span>) <span class="id">f'</span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H8</span> <span class="gallina-kwd">in</span> <span class="id">PRIV</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_free_left">range_private_free_left;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">DSTK</span> <span class="gallina-kwd">in</span> <span class="id">PRIV'</span>. <span class="id">exploit</span> (<span class="id">PRIV'</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>)). <span class="id">lia</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">eelim</span> <span class="id">B;</span> <span class="id">eauto</span>. <span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta</span>) <span class="gallina-kwd">with</span> <span class="id">ofs</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_max">Mem.perm_max</a></span> <span class="gallina-kwd">with</span> <span class="id">k</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id">p;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">split</span>. <span class="id">simpl</span>. <span class="id">lia</span>. <span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_invariant">match_stacks_inside_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">or;</span> <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_val_reg">agree_val_reg;</a></span> <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inject">Mem.free_left_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">FB</span>. <span class="id">rewrite</span> <span class="id">H4</span> <span class="gallina-kwd">in</span> <span class="id">PRIV</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_free_left">range_private_free_left;</a></span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;internal&nbsp;function,&nbsp;not&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="gallina-kwd">exists</span> <span id="f':656" class="id"><span id="f':655" class="id"><a name="f':656" class="">f',</a></span></span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_function">tr_function</a></span> <span class="id">cunit</span> <span class="id">f</span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':655">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id">fd'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#f':655">f'</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">Errors.monadInv</span> <span class="id">FD</span>. <span class="gallina-kwd">exists</span> <span class="id">x</span>. <span class="id">split;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#transf_function_spec">transf_function_spec;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">A</span> <span class="gallina-kwd">as</span> <span class="id">[f'</span> <span class="id">[TR1</span> <span class="id">EQ]]</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">TR:</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_function">tr_function</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span> <span class="id">f</span> <span class="id">f'</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_function_linkorder">tr_function_linkorder;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">TR;</span> <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_parallel_inject">Mem.alloc_parallel_inject</a></span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f'</span>). <span class="id">inv</span> <span class="id">H1</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[F'</span> <span class="id">[m1'</span> <span class="id">[sp'</span> <span class="id">[A</span> <span class="id">[B</span> <span class="id">[C</span> <span class="id">[D</span> <span class="id">E]]]]]]]</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_function_internal">exec_function_internal;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H6</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">F'</span>). <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_base">match_stacks_inside_base</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SP:</span> <span class="id">sp'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m'0</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span><span class="id">;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">SP</span> <span class="gallina-kwd">in</span> <span class="id">MS0</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_invariant">match_stacks_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">stk</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b1</span>. <span class="id">rewrite</span> <span class="id">D</span> <span class="gallina-kwd">in</span> <span class="id">H8;</span> <span class="id">inv</span> <span class="id">H8</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E</span> <span class="gallina-kwd">in</span> <span class="id">H8;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">stk</span>)<span class="id">;</span> <span class="id">intros;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b1</span>. <span class="id">rewrite</span> <span class="id">D</span> <span class="gallina-kwd">in</span> <span class="id">H8;</span> <span class="id">inv</span> <span class="id">H8</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">Mem.perm_alloc_1</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false;</a></span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">ordered_type</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>. <span class="id">auto</span>. <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H5</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_init_regs">agree_regs_init_regs</a></span>. <span class="id">eauto</span>. <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H1;</span> <span class="id">auto</span>. <span class="id">congruence</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_new_block">Mem.valid_new_block</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">Mem.perm_alloc_2</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">inv</span> <span class="id">H1;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">stk</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span>. <span class="id">rewrite</span> <span class="id">D</span> <span class="gallina-kwd">in</span> <span class="id">H9;</span> <span class="id">inv</span> <span class="id">H9</span>. <span class="id">inv</span> <span class="id">H1;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E</span> <span class="gallina-kwd">in</span> <span class="id">H9;</span> <span class="id">auto</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_mappedblocks">Mem.mi_mappedblocks</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>. <span class="id">lia</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;internal&nbsp;function,&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">FB;</span> <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_mapped_inject">Mem.alloc_left_mapped_inject</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;sp'&nbsp;is&nbsp;valid&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">sp'</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;offset&nbsp;is&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span>). <span class="id">generalize</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_max_r">Z.le_max_r</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f</span>) <span class="id">0</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;size&nbsp;of&nbsp;target&nbsp;block&nbsp;is&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">right</span>. <span class="id">exploit</span> <span class="id">SSZ2;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>. <span class="id">inv</span> <span class="id">FB;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;have&nbsp;full&nbsp;permissions&nbsp;on&nbsp;sp'&nbsp;at&nbsp;and&nbsp;above&nbsp;dstk&nbsp;ctx&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable;</a></span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_perms">range_private_perms;</a></span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;offset&nbsp;is&nbsp;aligned&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">0</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">FB</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#min_alignment_sound">min_alignment_sound;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;nobody&nbsp;maps&nbsp;to&nbsp;(sp,&nbsp;dstk&nbsp;ctx...)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> (<span class="id">PRIV</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta'</span>))<span class="id">;</span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">eelim</span> <span class="id">B;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta'</span>) <span class="gallina-kwd">with</span> <span class="id">ofs</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_max">Mem.perm_max</a></span> <span class="gallina-kwd">with</span> <span class="id">k</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id">p;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[F'</span> <span class="id">[A</span> <span class="id">[B</span> <span class="id">[C</span> <span class="id">D]]]]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#tr_moves_init_regs">tr_moves_init_regs;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[rs''</span> <span class="id">[P</span> <span class="id">[Q</span> <span class="id">R]]]</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Inop">exec_Inop;</a></span> <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">P</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_alloc_left">match_stacks_inside_alloc_left;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_invariant">match_stacks_inside_invariant;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_regs_incr">agree_regs_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">F;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H2</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private_alloc_left">range_private_alloc_left;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;external&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_globalenvs">match_stacks_globalenvs;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[bound</span> <span class="id">MG]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_inject">external_call_mem_inject;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_globalenvs_preserves_globals">match_globalenvs_preserves_globals;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[F1</span> <span class="id">[v1</span> <span class="id">[m1'</span> <span class="id">[A</span> <span class="id">[B</span> <span class="id">[C</span> <span class="id">[D</span> <span class="id">[E</span> <span class="id">[J</span> <span class="id">K]]]]]]]]]</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">FD</span>. <span class="id">inv</span> <span class="id">FD</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_function_external">exec_function_external;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_symbols_preserved">external_call_symbols_preserved;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#senv_preserved">senv_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_bound">match_stacks_bound</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m'0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_extcall">match_stacks_extcall</a></span> <span class="gallina-kwd">with</span> (<span class="id">F1</span> <span class="id">:=</span> <span class="id">F</span>) (<span class="id">F2</span> <span class="id">:=</span> <span class="id">F1</span>) (<span class="id">m1</span> <span class="id">:=</span> <span class="id">m</span>) (<span class="id">m1'</span> <span class="id">:=</span> <span class="id">m'0</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;return&nbsp;from&nbsp;noninlined&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MS0</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;normal&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_return">exec_return</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_set_reg">match_stacks_inside_set_reg;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_set_reg">agree_set_reg;</a></span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;untailcall&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MS;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">RET</span> <span class="gallina-kwd">in</span> <span class="id">RET0;</span> <span class="id">inv</span> <span class="id">RET0</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_return">exec_return</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_regular_states">match_regular_states</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_set_reg">match_stacks_inside_set_reg;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_set_reg">agree_set_reg;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> (<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span>)). <span class="id">apply</span> <span class="id">PAD;</span> <span class="id">lia</span>. <span class="id">apply</span> <span class="id">PRIV;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;return&nbsp;from&nbsp;inlined&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MS0;</span> <span class="id">try</span> <span class="id">congruence</span>. <span class="id">rewrite</span> <span class="id">RET0</span> <span class="gallina-kwd">in</span> <span class="id">RET;</span> <span class="id">inv</span> <span class="id">RET</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#inline_return">inline_return</a></span> <span class="gallina-kwd">in</span> <span class="id">AT</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">PRIV':</span> <span class="id"><a href="compcert.backend.Inliningproof.html#range_private">range_private</a></span> <span class="id">F</span> <span class="id">m</span> <span class="id">m'</span> <span class="id">sp'</span> (<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span> <span class="id">ctx'</span>) <span class="id">f'</span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> (<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span>)). <span class="id">apply</span> <span class="id">PAD</span>. <span class="id">lia</span>. <span class="id">apply</span> <span class="id">PRIV</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">or</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;with&nbsp;a&nbsp;result&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop;</a></span> <span class="id">eauto</span>. <span class="id">simpl</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_set_reg">match_stacks_inside_set_reg;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_set_reg">agree_set_reg;</a></span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;without&nbsp;a&nbsp;result&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">econstructor;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Inop">exec_Inop;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">subst</span> <span class="id">vres</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#agree_set_reg_undef'">agree_set_reg_undef';</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="transf_initial_states" class="id"><a name="transf_initial_states" class="">transf_initial_states:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="st1:657" class="id"><a name="st1:657" class="">st1,</a></span> <span class="id"><a href="compcert.backend.RTL.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#st1:657">st1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="st2:658" class="id"><a name="st2:658" class="">st2,</a></span> <span class="id"><a href="compcert.backend.RTL.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tprog">tprog</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#st2:658">st2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#st1:657">st1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#st2:658">st2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#function_ptr_translated">function_ptr_translated;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">cu</span> &amp; <span class="id">tf</span> &amp; <span class="id">FIND</span> &amp; <span class="id">TR</span> &amp; <span class="id">LINK</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">tf</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">m0</span>)<span class="id">;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_match">Genv.init_mem_match</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.TRANSF">TRANSF</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Inliningproof.html#symbols_preserved">symbols_preserved</a></span>. <span class="id">replace</span> (<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tprog">tprog</a></span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Linking.html#match_program_main">match_program_main;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H3</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#sig_function_translated">sig_function_translated;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_nil">match_stacks_nil</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>).<br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>))<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_not_fresh">Genv.find_symbol_not_fresh</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_not_fresh">Genv.find_funct_ptr_not_fresh</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_not_fresh">Genv.find_var_info_not_fresh</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.initmem_inject">Genv.initmem_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="transf_final_states" class="id"><a name="transf_final_states" class="">transf_final_states:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="st1:659" class="id"><a name="st1:659" class="">st1</a></span> <span id="st2:660" class="id"><a name="st2:660" class="">st2</a></span> <span id="r:661" class="id"><a name="r:661" class="">r,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#st1:659">st1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#st2:660">st2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#final_state">final_state</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#st1:659">st1</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:661">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#final_state">final_state</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#st2:660">st2</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#r:661">r</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_empty">match_stacks_empty;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">EQ;</span> <span class="id">subst</span>. <span class="id">inv</span> <span class="id">VINJ</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningproof.html#match_stacks_inside_empty">match_stacks_inside_empty;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="transf_program_correct" class="id"><a name="transf_program_correct" class="">transf_program_correct:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="compcert.backend.RTL.html#semantics">semantics</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.prog">prog</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#semantics">semantics</a></span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING.tprog">tprog</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation_star">forward_simulation_star</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningproof.html#senv_preserved">senv_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="compcert.backend.Inliningproof.html#transf_initial_states">transf_initial_states</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="compcert.backend.Inliningproof.html#transf_final_states">transf_final_states</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="compcert.backend.Inliningproof.html#step_simulation">step_simulation</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Inliningproof.html#INLINING">INLINING</a></span>.<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
