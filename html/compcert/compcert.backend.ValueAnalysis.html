
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module ValueAnalysis</title>
<meta name="description" content="Documentation of Coq module ValueAnalysis" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module ValueAnalysis</h1>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.funind.FunInd.html">FunInd</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span> <span class="id"><a href="compcert.lib.Lattice.html">Lattice</a></span> <span class="id"><a href="compcert.backend.Kildall.html">Kildall</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.driver.Compopts.html">Compopts</a></span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="compcert.common.Builtins.html">Builtins</a></span> <span class="id"><a href="compcert.common.Events.html">Events</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.Registers.html">Registers</a></span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span> <span class="id"><a href="compcert.backend.RTL.html">RTL</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.ValueDomain.html">ValueDomain</a></span> <span class="id"><a href="compcert.x86.ValueAOp.html">ValueAOp</a></span> <span class="id"><a href="compcert.backend.Liveness.html">Liveness</a></span>.<br/>
<br/>
<h1> The dataflow analysis </h1>
<br/>
<span class="vernacular">Definition</span> <span id="areg" class="id"><a name="areg" class="">areg</a></span> (<span id="ae:1" class="id"><a name="ae:1" class="">ae:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aenv">aenv</a></span>) (<span id="r:2" class="id"><a name="r:2" class="">r:</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aval">aval</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#r:2">r</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:1">ae</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="aregs" class="id"><a name="aregs" class="">aregs</a></span> (<span id="ae:3" class="id"><a name="ae:3" class="">ae:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aenv">aenv</a></span>) (<span id="rl:4" class="id"><a name="rl:4" class="">rl:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aval">aval</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#areg">areg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:3">ae</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#rl:4">rl</a></span>.<br/>
<br/>
<div class="doc">Analysis of function calls.  We treat specially the case where
  neither the arguments nor the global variables point within the
  stack frame of the current function.  In this case, no pointer
  within the stack frame escapes during the call. </div>
<br/>
<span class="vernacular">Definition</span> <span id="mafter_public_call" class="id"><a name="mafter_public_call" class="">mafter_public_call</a></span> <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#amem">amem</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mtop">mtop</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="mafter_private_call" class="id"><a name="mafter_private_call" class="">mafter_private_call</a></span> (<span id="am_before:5" class="id"><a name="am_before:5" class="">am_before:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#amem">amem</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#amem">amem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">{|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#am_stack">am_stack</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am_before:5">am_before</a></span>.(<span class="id"><a href="compcert.backend.ValueDomain.html#am_stack">am_stack</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#am_glob">am_glob</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#am_nonstack">am_nonstack</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#am_top">am_top</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#plub">plub</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#ab_summary">ab_summary</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#am_stack">am_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am_before:5">am_before</a></span>)) <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span> <span class="id">|}</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="analyze_call" class="id"><a name="analyze_call" class="">analyze_call</a></span> (<span id="am:6" class="id"><a name="am:6" class="">am:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#amem">amem</a></span>) (<span id="aargs:7" class="id"><a name="aargs:7" class="">aargs:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aval">aval</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pincl">pincl</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:6">am</a></span>.(<span class="id"><a href="compcert.backend.ValueDomain.html#am_nonstack">am_nonstack</a></span>) <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span><br/>
&nbsp;&nbsp;&amp;&amp; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#forallb">forallb</a></span> (<span class="gallina-kwd">fun</span> <span id="av:8" class="id"><a name="av:8" class="">av</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vpincl">vpincl</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:8">av</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#aargs:7">aargs</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">then</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack,</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#mafter_private_call">mafter_private_call</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:6">am</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop,</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#mafter_public_call">mafter_public_call</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="transfer_call" class="id"><a name="transfer_call" class="">transfer_call</a></span> (<span id="ae:9" class="id"><a name="ae:9" class="">ae:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aenv">aenv</a></span>) (<span id="am:10" class="id"><a name="am:10" class="">am:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#amem">amem</a></span>) (<span id="args:11" class="id"><a name="args:11" class="">args:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span id="res:12" class="id"><a name="res:12" class="">res:</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="av:13" class="id"><a name="av:13" class="">av,</a></span> <span id="am':14" class="id"><a name="am':14" class="">am'</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze_call">analyze_call</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:10">am</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aregs">aregs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:9">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:11">args</a></span>) <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#AE.set">AE.set</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:12">res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:13">av</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:9">ae</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#am':14">am'</a></span>.<br/>
<br/>
<div class="doc">Analysis of builtins. </div>
<br/>
<span class="vernacular">Fixpoint</span> <span id="abuiltin_arg" class="id"><a name="abuiltin_arg" class="">abuiltin_arg</a></span> (<span id="ae:15" class="id"><a name="ae:15" class="">ae:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aenv">aenv</a></span>) (<span id="am:16" class="id"><a name="am:16" class="">am:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#amem">amem</a></span>) (<span id="rm:17" class="id"><a name="rm:17" class="">rm:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romem">romem</a></span>) (<span id="ba:18" class="id"><a name="ba:18" class="">ba:</a></span> <span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aval">aval</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ba:18">ba</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA">BA</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#areg">areg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:15">ae</a></span> <span class="id">r</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_int">BA_int</a></span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#I">I</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_long">BA_long</a></span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#L">L</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_float">BA_float</a></span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#F">F</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_single">BA_single</a></span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#FS">FS</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_loadstack">BA_loadstack</a></span> <span class="id">chunk</span> <span class="id">ofs</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#loadv">loadv</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:17">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:16">am</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ptr">Ptr</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id">ofs</span>))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_addrstack">BA_addrstack</a></span> <span class="id">ofs</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptr">Ptr</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_loadglobal">BA_loadglobal</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span> <span class="id">ofs</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#loadv">loadv</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:17">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:16">am</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ptr">Ptr</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> <span class="id">id</span> <span class="id">ofs</span>))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_addrglobal">BA_addrglobal</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span> <span class="id">ofs</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptr">Ptr</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> <span class="id">id</span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_splitlong">BA_splitlong</a></span> <span class="id">hi</span> <span class="id">lo</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#longofwords">longofwords</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg:19">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:15">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:16">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:17">rm</a></span> <span class="id">hi</span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg:19">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:15">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:16">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:17">rm</a></span> <span class="id">lo</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_addptr">BA_addptr</a></span> <span class="id">ba1</span> <span class="id">ba2</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="v1:21" class="id"><a name="v1:21" class="">v1</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg:19">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:15">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:16">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:17">rm</a></span> <span class="id">ba1</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="v2:22" class="id"><a name="v2:22" class="">v2</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg:19">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:15">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:16">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:17">rm</a></span> <span class="id">ba2</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.backend.ValueDomain.html#addl">addl</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v1:21">v1</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v2:22">v2</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.backend.ValueDomain.html#add">add</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v1:21">v1</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v2:22">v2</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="set_builtin_res" class="id"><a name="set_builtin_res" class="">set_builtin_res</a></span> (<span id="br:23" class="id"><a name="br:23" class="">br:</a></span> <span class="id"><a href="compcert.common.AST.html#builtin_res">builtin_res</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span id="av:24" class="id"><a name="av:24" class="">av:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aval">aval</a></span>) (<span id="ae:25" class="id"><a name="ae:25" class="">ae:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aenv">aenv</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aenv">aenv</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#br:23">br</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BR">BR</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#AE.set">AE.set</a></span> <span class="id">r</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:24">av</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:25">ae</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:25">ae</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="transfer_builtin_default" class="id"><a name="transfer_builtin_default" class="">transfer_builtin_default</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="ae:27" class="id"><a name="ae:27" class="">ae:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aenv">aenv</a></span>) (<span id="am:28" class="id"><a name="am:28" class="">am:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#amem">amem</a></span>) (<span id="rm:29" class="id"><a name="rm:29" class="">rm:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romem">romem</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="args:30" class="id"><a name="args:30" class="">args:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)) (<span id="res:31" class="id"><a name="res:31" class="">res:</a></span> <span class="id"><a href="compcert.common.AST.html#builtin_res">builtin_res</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> (<span id="av:32" class="id"><a name="av:32" class="">av,</a></span> <span id="am':33" class="id"><a name="am':33" class="">am'</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze_call">analyze_call</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:28">am</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:27">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:28">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:29">rm</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:30">args</a></span>) <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res">set_builtin_res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:31">res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:32">av</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:27">ae</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#am':33">am'</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="eval_static_builtin_function" class="id"><a name="eval_static_builtin_function" class="">eval_static_builtin_function</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="ae:34" class="id"><a name="ae:34" class="">ae:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aenv">aenv</a></span>) (<span id="am:35" class="id"><a name="am:35" class="">am:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#amem">amem</a></span>) (<span id="rm:36" class="id"><a name="rm:36" class="">rm:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romem">romem</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="bf:37" class="id"><a name="bf:37" class="">bf:</a></span> <span class="id"><a href="compcert.common.Builtins.html#builtin_function">builtin_function</a></span>) (<span id="args:38" class="id"><a name="args:38" class="">args:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Builtins.html#builtin_function_sem">builtin_function_sem</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bf:37">bf</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#val_of_aval">val_of_aval</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:34">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:35">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:36">rm</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:38">args</a></span>)) <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aval_of_val">aval_of_val</a></span> <span class="id">v</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="transfer_builtin" class="id"><a name="transfer_builtin" class="">transfer_builtin</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="ae:39" class="id"><a name="ae:39" class="">ae:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aenv">aenv</a></span>) (<span id="am:40" class="id"><a name="am:40" class="">am:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#amem">amem</a></span>) (<span id="rm:41" class="id"><a name="rm:41" class="">rm:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romem">romem</a></span>) (<span id="ef:42" class="id"><a name="ef:42" class="">ef:</a></span> <span class="id"><a href="compcert.common.AST.html#external_function">external_function</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="args:43" class="id"><a name="args:43" class="">args:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)) (<span id="res:44" class="id"><a name="res:44" class="">res:</a></span> <span class="id"><a href="compcert.common.AST.html#builtin_res">builtin_res</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ef:42">ef,</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:43">args</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#EF_vload">EF_vload</a></span> <span class="id">chunk,</span> <span class="id">addr</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="aaddr:47" class="id"><a name="aaddr:47" class="">aaddr</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> <span class="id">addr</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="a:48" class="id"><a name="a:48" class="">a</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.driver.Compopts.html#va_strict">va_strict</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">then</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vlub">vlub</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#loadv">loadv</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr:47">aaddr</a></span>) (<span class="id"><a href="compcert.backend.ValueDomain.html#vnormalize">vnormalize</a></span> <span class="id">chunk</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Glob">Glob</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vnormalize">vnormalize</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res">set_builtin_res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:44">res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:48">a</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#EF_vstore">EF_vstore</a></span> <span class="id">chunk,</span> <span class="id">addr</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">v</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="aaddr:49" class="id"><a name="aaddr:49" class="">aaddr</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> <span class="id">addr</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="av:50" class="id"><a name="av:50" class="">av</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> <span class="id">v</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="am':51" class="id"><a name="am':51" class="">am'</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#storev">storev</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr:49">aaddr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:50">av</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res">set_builtin_res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:44">res</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#ntop">ntop</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span>) (<span class="id"><a href="compcert.backend.ValueDomain.html#mlub">mlub</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am':51">am'</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#EF_memcpy">EF_memcpy</a></span> <span class="id">sz</span> <span class="id">al,</span> <span class="id">dst</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">src</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="adst:52" class="id"><a name="adst:52" class="">adst</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> <span class="id">dst</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="asrc:53" class="id"><a name="asrc:53" class="">asrc</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> <span class="id">src</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="p:54" class="id"><a name="p:54" class="">p</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#aptr_of_aval">aptr_of_aval</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#asrc:53">asrc</a></span>) <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="am':55" class="id"><a name="am':55" class="">am'</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#storebytes">storebytes</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#aptr_of_aval">aptr_of_aval</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#adst:52">adst</a></span>) <span class="id">sz</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:54">p</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res">set_builtin_res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:44">res</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#ntop">ntop</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#am':55">am'</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id"><a href="compcert.common.AST.html#EF_annot">EF_annot</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#EF_debug">EF_debug</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)<span class="id">,</span> <span class="id">_</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res">set_builtin_res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:44">res</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#ntop">ntop</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#EF_annot_val">EF_annot_val</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_,</span> <span class="id">v</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="av:56" class="id"><a name="av:56" class="">av</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> <span class="id">v</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res">set_builtin_res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:44">res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:56">av</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#EF_builtin">EF_builtin</a></span> <span class="id">name</span> <span class="id">sg,</span> <span class="id">_</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Builtins.html#lookup_builtin_function">lookup_builtin_function</a></span> <span class="id">name</span> <span class="id">sg</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">bf</span> <span class="id">=&gt;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#eval_static_builtin_function">eval_static_builtin_function</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> <span class="id">bf</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:43">args</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">av</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res">set_builtin_res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:44">res</a></span> <span class="id">av</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer_builtin_default">transfer_builtin_default</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:43">args</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:44">res</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer_builtin_default">transfer_builtin_default</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:43">args</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:44">res</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer_builtin_default">transfer_builtin_default</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:39">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:40">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:41">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:43">args</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:44">res</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">The transfer function for one instruction.  Given the abstract state
  "before" the instruction, computes the abstract state "after". </div>
<br/>
<span class="vernacular">Definition</span> <span id="transfer" class="id"><a name="transfer" class="">transfer</a></span> (<span id="f:57" class="id"><a name="f:57" class="">f:</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span>) (<span id="rm:58" class="id"><a name="rm:58" class="">rm:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romem">romem</a></span>) (<span id="pc:59" class="id"><a name="pc:59" class="">pc:</a></span> <span class="id"><a href="compcert.backend.RTL.html#node">node</a></span>) (<span id="ae:60" class="id"><a name="ae:60" class="">ae:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#aenv">aenv</a></span>) (<span id="am:61" class="id"><a name="am:61" class="">am:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#amem">amem</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.t">VA.t</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:57">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)<span class="id">!pc</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.Bot">VA.Bot</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Inop">Inop</a></span> <span class="id">s</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:61">am</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Iop">Iop</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">s</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="a:62" class="id"><a name="a:62" class="">a</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_operation">eval_static_operation</a></span> <span class="id">op</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aregs">aregs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span> <span class="id">args</span>) <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#AE.set">AE.set</a></span> <span class="id">res</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:62">a</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:61">am</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Iload">Iload</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id">s</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="a:63" class="id"><a name="a:63" class="">a</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#loadv">loadv</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:58">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:61">am</a></span> (<span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing">eval_static_addressing</a></span> <span class="id">addr</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aregs">aregs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span> <span class="id">args</span>)) <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#AE.set">AE.set</a></span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:63">a</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:61">am</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Istore">Istore</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">src</span> <span class="id">s</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="am':64" class="id"><a name="am':64" class="">am'</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#storev">storev</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:61">am</a></span> (<span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing">eval_static_addressing</a></span> <span class="id">addr</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aregs">aregs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span> <span class="id">args</span>)) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#areg">areg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span> <span class="id">src</span>) <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am':64">am'</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Icall">Icall</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#sig">sig</a></span> <span class="id">ros</span> <span class="id">args</span> <span class="id">res</span> <span class="id">s</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer_call">transfer_call</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:61">am</a></span> <span class="id">args</span> <span class="id">res</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Itailcall">Itailcall</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#sig">sig</a></span> <span class="id">ros</span> <span class="id">args</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.Bot">VA.Bot</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Ibuiltin">Ibuiltin</a></span> <span class="id">ef</span> <span class="id">args</span> <span class="id">res</span> <span class="id">s</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer_builtin">transfer_builtin</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:61">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:58">rm</a></span> <span class="id">ef</span> <span class="id">args</span> <span class="id">res</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Icond">Icond</a></span> <span class="id">cond</span> <span class="id">args</span> <span class="id">s1</span> <span class="id">s2</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:61">am</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Ijumptable">Ijumptable</a></span> <span class="id">arg</span> <span class="id">tbl</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:60">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:61">am</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Ireturn">Ireturn</a></span> <span class="id">arg</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.Bot">VA.Bot</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">A wrapper on <span class="bracket"><span class="id">transfer</span></span> that removes information associated with
  dead registers, so as to reduce the sizes of abstract states. </div>
<br/>
<span class="vernacular">Definition</span> <span id="transfer'" class="id"><a name="transfer'" class="">transfer'</a></span> (<span id="f:65" class="id"><a name="f:65" class="">f:</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span>) (<span id="lastuses:66" class="id"><a name="lastuses:66" class="">lastuses:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)) (<span id="rm:67" class="id"><a name="rm:67" class="">rm:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romem">romem</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="pc:68" class="id"><a name="pc:68" class="">pc:</a></span> <span class="id"><a href="compcert.backend.RTL.html#node">node</a></span>) (<span id="before:69" class="id"><a name="before:69" class="">before:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.t">VA.t</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.t">VA.t</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#before:69">before</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.Bot">VA.Bot</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.Bot">VA.Bot</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:65">f</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:67">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#pc:68">pc</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.Bot">VA.Bot</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.Bot">VA.Bot</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id">ae'</span> <span class="id">am'</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="ae'':71" class="id"><a name="ae'':71" class="">ae''</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#lastuses:66">lastuses!pc</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id">ae'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">regs</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#eforget">eforget</a></span> <span class="id">regs</span> <span class="id">ae'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae'':71">ae''</a></span> <span class="id">am'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">The forward dataflow analysis. </div>
<br/>
<span class="vernacular">Module</span> <span id="DS" class="id"><a name="DS" class="">DS</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Kildall.html#Dataflow_Solver">Dataflow_Solver</a></span>(<span class="id"><a href="compcert.backend.ValueDomain.html#VA">VA</a></span>)(<span class="id"><a href="compcert.backend.Kildall.html#NodeSetForward">NodeSetForward</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="mfunction_entry" class="id"><a name="mfunction_entry" class="">mfunction_entry</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">{|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#am_stack">am_stack</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_init">ablock_init</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Pbot">Pbot;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#am_glob">am_glob</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#am_nonstack">am_nonstack</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#am_top">am_top</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span> <span class="id">|}</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="analyze" class="id"><a name="analyze" class="">analyze</a></span> (<span id="rm:72" class="id"><a name="rm:72" class="">rm:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romem">romem</a></span>) (<span id="f:73" class="id"><a name="f:73" class="">f:</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span>)<span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">PMap.t</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.t">VA.t</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="lu:74" class="id"><a name="lu:74" class="">lu</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Liveness.html#last_uses">Liveness.last_uses</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:73">f</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="entry:75" class="id"><a name="entry:75" class="">entry</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#einit_regs">einit_regs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:73">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span>)) <span class="id"><a href="compcert.backend.ValueAnalysis.html#mfunction_entry">mfunction_entry</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#fixpoint">DS.fixpoint</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:73">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="compcert.backend.RTL.html#successors_instr">successors_instr</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer'">transfer'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:73">f</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#lu:74">lu</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:72">rm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#f:73">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#entry:75">entry</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.init">PMap.init</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#AE.top">AE.top</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mtop">mtop</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">res</span> <span class="id">=&gt;</span> <span class="id">res</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">Constructing the approximation of read-only globals </div>
<br/>
<span class="vernacular">Definition</span> <span id="store_init_data" class="id"><a name="store_init_data" class="">store_init_data</a></span> (<span id="ab:76" class="id"><a name="ab:76" class="">ab:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock">ablock</a></span>) (<span id="p:77" class="id"><a name="p:77" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="id:78" class="id"><a name="id:78" class="">id:</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock">ablock</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:78">id</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Init_int8">Init_int8</a></span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store">ablock_store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:76">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:77">p</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#I">I</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Init_int16">Init_int16</a></span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store">ablock_store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:76">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:77">p</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#I">I</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Init_int32">Init_int32</a></span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store">ablock_store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:76">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:77">p</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#I">I</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Init_int64">Init_int64</a></span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store">ablock_store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:76">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:77">p</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#L">L</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Init_float32">Init_float32</a></span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store">ablock_store</a></span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:76">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:77">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.driver.Compopts.html#propagate_float_constants">propagate_float_constants</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.backend.ValueDomain.html#FS">FS</a></span> <span class="id">n</span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ntop">ntop</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Init_float64">Init_float64</a></span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store">ablock_store</a></span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:76">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:77">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.driver.Compopts.html#propagate_float_constants">propagate_float_constants</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.backend.ValueDomain.html#F">F</a></span> <span class="id">n</span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ntop">ntop</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id">symb</span> <span class="id">ofs</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store">ablock_store</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:76">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:77">p</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ptr">Ptr</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> <span class="id">symb</span> <span class="id">ofs</span>))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Init_space">Init_space</a></span> <span class="id">n</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:76">ab</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="store_init_data_list" class="id"><a name="store_init_data_list" class="">store_init_data_list</a></span> (<span id="ab:80" class="id"><a name="ab:80" class="">ab:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock">ablock</a></span>) (<span id="p:81" class="id"><a name="p:81" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="idl:82" class="id"><a name="idl:82" class="">idl:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{struct</span> <span class="id">idl}:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock">ablock</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idl:82">idl</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:80">ab</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">idl'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_list:83">store_init_data_list</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:80">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:81">p</a></span> <span class="id">id</span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#p:81">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.AST.html#init_data_size">init_data_size</a></span> <span class="id">id</span>) <span class="id">idl'</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">When CompCert is used in separate compilation mode, the <span class="bracket"><span class="id">gvar_init</span></span>
  initializer attached to a readonly global variable may not correspond
  to the actual initial value of this global.  This occurs in two cases:
<ul>
<li>
 an <span class="bracket"><span class="id">extern</span> <span class="id">const</span></span> variable, which is represented by <span class="bracket"><span class="id">gvar_init</span> = <span class="id">nil</span></span>;
</li>
<li>
 a <span class="bracket"><span class="id">const</span></span> variable without an explicit initializer, which is treated
  by the linker as a "common" symbol, and is represented by
  <span class="bracket"><span class="id">gvar_init</span> = <span class="id">Init_space</span> <span class="id">sz</span> :: <span class="id">nil</span></span>.
</li>
</ul>
In both cases, the variable can be defined and initialized in another
compilation unit which is later linked with the current compilation unit. </div>
<br/>
<span class="vernacular">Definition</span> <span id="definitive_initializer" class="id"><a name="definitive_initializer" class="">definitive_initializer</a></span> (<span id="init:85" class="id"><a name="init:85" class="">init:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#init:85">init</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Init_space">Init_space</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="alloc_global" class="id"><a name="alloc_global" class="">alloc_global</a></span> (<span id="rm:87" class="id"><a name="rm:87" class="">rm:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romem">romem</a></span>) (<span id="idg:88" class="id"><a name="idg:88" class="">idg:</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>)<span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romem">romem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idg:88">idg</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id,</a></span> <span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> <span class="id">f</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">PTree.remove</a></span> <span class="id">id</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:87">rm</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id,</a></span> <span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">v</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_readonly">gvar_readonly</a></span>) &amp;&amp; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span>) &amp;&amp; <span class="id"><a href="compcert.backend.ValueAnalysis.html#definitive_initializer">definitive_initializer</a></span> <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">then</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_list">store_init_data_list</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#ablock_init">ablock_init</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Pbot">Pbot</a></span>) <span class="id">0</span> <span class="id">v</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>)) <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:87">rm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.remove">PTree.remove</a></span> <span class="id">id</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:87">rm</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="romem_for" class="id"><a name="romem_for" class="">romem_for</a></span> (<span id="p:90" class="id"><a name="p:90" class="">p:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romem">romem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#alloc_global">alloc_global</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:90">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_</span>).<br/>
<br/>
<h1> Soundness proof </h1>
<br/>
<div class="doc">Properties of the dataflow solution. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="analyze_entrypoint" class="id"><a name="analyze_entrypoint" class="">analyze_entrypoint:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="rm:91" class="id"><a name="rm:91" class="">rm</a></span> <span id="f:92" class="id"><a name="f:92" class="">f</a></span> <span id="vl:93" class="id"><a name="vl:93" class="">vl</a></span> <span id="m:94" class="id"><a name="m:94" class="">m</a></span> <span id="bc:95" class="id"><a name="bc:95" class="">bc,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="v:96" class="id"><a name="v:96" class="">v,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:96">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#vl:93">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:95">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:96">v</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:95">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:94">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#mfunction_entry">mfunction_entry</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="ae:97" class="id"><a name="ae:97" class="">ae</a></span> <span id="am:98" class="id"><a name="am:98" class="">am,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:91">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:92">f</a></span>)<span class="id">!!</span>(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:92">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:97">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:98">am</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:95">bc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#vl:93">vl</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:92">f</a></span>)) <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:97">ae</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:95">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:94">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:98">am</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">lu</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Liveness.html#last_uses">Liveness.last_uses</a></span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">entry</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#einit_regs">einit_regs</a></span> <span class="id">f</span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span>)) <span class="id"><a href="compcert.backend.ValueAnalysis.html#mfunction_entry">mfunction_entry</a></span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#fixpoint">DS.fixpoint</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span> <span class="id">f</span>) <span class="id"><a href="compcert.backend.RTL.html#successors_instr">successors_instr</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer'">transfer'</a></span> <span class="id">f</span> <span class="id">lu</span> <span class="id">rm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span> <span class="id">f</span>) <span class="id">entry</span>) <span class="gallina-kwd">as</span> <span class="id">[res|]</span> <span class="id">eqn:FIX</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id">A:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.ge">VA.ge</a></span> <span class="id">res!!</span>(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span> <span class="id">f</span>) <span class="id">entry</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#fixpoint_entry">DS.fixpoint_entry</a></span><span class="id">;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">res!!</span>(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span> <span class="id">f</span>)) <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">ae</span> <span class="id">am</span> <span class="id">];</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">A</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">A</span> <span class="gallina-kwd">as</span> <span class="id">[A1</span> <span class="id">A2]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">ae,</span> <span class="id">am</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_ge">ematch_ge;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_init">ematch_init;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="compcert.backend.ValueDomain.html#AE.top">AE.top</a></span><span class="id">,</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mtop">mtop</a></span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gi">PMap.gi</a></span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_ge">ematch_ge</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#einit_regs">einit_regs</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span> <span class="id">f</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_init">ematch_init;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#AE.ge_top">AE.ge_top</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_top'">mmatch_top';</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="analyze_successor" class="id"><a name="analyze_successor" class="">analyze_successor:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:99" class="id"><a name="f:99" class="">f</a></span> <span id="n:100" class="id"><a name="n:100" class="">n</a></span> <span id="ae:101" class="id"><a name="ae:101" class="">ae</a></span> <span id="am:102" class="id"><a name="am:102" class="">am</a></span> <span id="instr:103" class="id"><a name="instr:103" class="">instr</a></span> <span id="s:104" class="id"><a name="s:104" class="">s</a></span> <span id="rm:105" class="id"><a name="rm:105" class="">rm</a></span> <span id="ae':106" class="id"><a name="ae':106" class="">ae'</a></span> <span id="am':107" class="id"><a name="am':107" class="">am',</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:105">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:99">f</a></span>)<span class="id">!!n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:101">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:102">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#f:99">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)<span class="id">!n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#instr:103">instr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:104">s</a></span> (<span class="id"><a href="compcert.backend.RTL.html#successors_instr">successors_instr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#instr:103">instr</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:99">f</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:105">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:100">n</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:101">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:102">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae':106">ae'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am':107">am'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#VA.ge">VA.ge</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:105">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:99">f</a></span>)<span class="id">!!s</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:99">f</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:105">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:100">n</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:101">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:102">am</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">lu</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Liveness.html#last_uses">Liveness.last_uses</a></span> <span class="id">f</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">entry</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#einit_regs">einit_regs</a></span> <span class="id">f</span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span>)) <span class="id"><a href="compcert.backend.ValueAnalysis.html#mfunction_entry">mfunction_entry</a></span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#fixpoint">DS.fixpoint</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span> <span class="id">f</span>) <span class="id"><a href="compcert.backend.RTL.html#successors_instr">successors_instr</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer'">transfer'</a></span> <span class="id">f</span> <span class="id">lu</span> <span class="id">rm</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span> <span class="id">f</span>) <span class="id">entry</span>) <span class="gallina-kwd">as</span> <span class="id">[res|]</span> <span class="id">eqn:FIX</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id">A:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.ge">VA.ge</a></span> <span class="id">res!!s</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer'">transfer'</a></span> <span class="id">f</span> <span class="id">lu</span> <span class="id">rm</span> <span class="id">n</span> <span class="id">res#n</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#fixpoint_solution">DS.fixpoint_solution</a></span><span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer'">transfer'</a></span>. <span class="id">simpl</span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">A</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer'">transfer'</a></span> <span class="gallina-kwd">in</span> <span class="id">A</span>. <span class="id">rewrite</span> <span class="id">H2</span> <span class="gallina-kwd">in</span> <span class="id">A</span>. <span class="id">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">lu!n</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.ge_trans">VA.ge_trans</a></span>. <span class="id">eauto</span>. <span class="id">split;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#eforget_ge">eforget_ge</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">H2</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gi">PMap.gi</a></span>. <span class="id">split;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#AE.ge_top">AE.ge_top</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_top'">mmatch_top';</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="analyze_succ" class="id"><a name="analyze_succ" class="">analyze_succ:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e:108" class="id"><a name="e:108" class="">e</a></span> <span id="m:109" class="id"><a name="m:109" class="">m</a></span> <span id="rm:110" class="id"><a name="rm:110" class="">rm</a></span> <span id="f:111" class="id"><a name="f:111" class="">f</a></span> <span id="n:112" class="id"><a name="n:112" class="">n</a></span> <span id="ae:113" class="id"><a name="ae:113" class="">ae</a></span> <span id="am:114" class="id"><a name="am:114" class="">am</a></span> <span id="instr:115" class="id"><a name="instr:115" class="">instr</a></span> <span id="s:116" class="id"><a name="s:116" class="">s</a></span> <span id="ae':117" class="id"><a name="ae':117" class="">ae'</a></span> <span id="am':118" class="id"><a name="am':118" class="">am'</a></span> <span id="bc:119" class="id"><a name="bc:119" class="">bc,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:110">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:111">f</a></span>)<span class="id">!!n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:113">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:114">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#f:111">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)<span class="id">!n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#instr:115">instr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:116">s</a></span> (<span class="id"><a href="compcert.backend.RTL.html#successors_instr">successors_instr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#instr:115">instr</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:111">f</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:110">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:112">n</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:113">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:114">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae':117">ae'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am':118">am'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:119">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:108">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae':117">ae'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:119">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:109">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am':118">am'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="ae'':120" class="id"><a name="ae'':120" class="">ae''</a></span> <span id="am'':121" class="id"><a name="am'':121" class="">am'',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:110">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:111">f</a></span>)<span class="id">!!s</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae'':120">ae''</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am'':121">am''</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:119">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:108">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae'':120">ae''</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:119">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:109">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am'':121">am''</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze_successor">analyze_successor;</a></span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id">rm</span> <span class="id">f</span>)<span class="id">#s</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">ae''</span> <span class="id">am''];</span> <span class="id">simpl;</span> <span class="id">try</span> <span class="id">tauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">ae'',</span> <span class="id">am''</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_ge">ematch_ge;</a></span> <span class="id">eauto</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Analysis of registers and builtin arguments </h2>
<br/>
<span class="vernacular">Lemma</span> <span id="areg_sound" class="id"><a name="areg_sound" class="">areg_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:122" class="id"><a name="bc:122" class="">bc</a></span> <span id="e:123" class="id"><a name="e:123" class="">e</a></span> <span id="ae:124" class="id"><a name="ae:124" class="">ae</a></span> <span id="r:125" class="id"><a name="r:125" class="">r,</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:122">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:123">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:124">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:122">bc</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#e:123">e#r</a></span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#areg">areg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:124">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#r:125">r</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="aregs_sound" class="id"><a name="aregs_sound" class="">aregs_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:126" class="id"><a name="bc:126" class="">bc</a></span> <span id="e:127" class="id"><a name="e:127" class="">e</a></span> <span id="ae:128" class="id"><a name="ae:128" class="">ae</a></span> <span id="rl:129" class="id"><a name="rl:129" class="">rl,</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:126">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:127">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:128">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:126">bc</a></span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#e:127">e##rl</a></span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aregs">aregs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:128">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rl:129">rl</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">rl;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">constructor</span>. <span class="id">constructor;</span> <span class="id">[apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#areg_sound">areg_sound|];</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">areg_sound</span> <span class="id">aregs_sound:</span> <span class="id">va</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="abuiltin_arg_sound" class="id"><a name="abuiltin_arg_sound" class="">abuiltin_arg_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:130" class="id"><a name="bc:130" class="">bc</a></span> <span id="ge:131" class="id"><a name="ge:131" class="">ge</a></span> <span id="rs:132" class="id"><a name="rs:132" class="">rs</a></span> <span id="sp:133" class="id"><a name="sp:133" class="">sp</a></span> <span id="m:134" class="id"><a name="m:134" class="">m</a></span> <span id="ae:135" class="id"><a name="ae:135" class="">ae</a></span> <span id="rm:136" class="id"><a name="rm:136" class="">rm</a></span> <span id="am:137" class="id"><a name="am:137" class="">am,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:130">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rs:132">rs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:135">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:130">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:134">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:136">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:130">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:134">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:137">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:130">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:131">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:130">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:133">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="a:138" class="id"><a name="a:138" class="">a</a></span> <span id="v:139" class="id"><a name="v:139" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:131">ge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:140" class="id"><a name="r:140" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rs:132">rs#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:133">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:134">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:138">a</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:139">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:130">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:139">v</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:135">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:137">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:136">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:138">a</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">am;</span> <span class="id">intros</span> <span class="id">EM</span> <span class="id">RM</span> <span class="id">MM</span> <span class="id">GM</span> <span class="id">SP</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">simpl;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#loadv_sound">loadv_sound;</a></span> <span class="id">eauto</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>. <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<span class="id">-</span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>. <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#loadv_sound">loadv_sound;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.x86.ValueAOp.html#symbol_address_sound">symbol_address_sound;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.x86.ValueAOp.html#symbol_address_sound">symbol_address_sound;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="abuiltin_args_sound" class="id"><a name="abuiltin_args_sound" class="">abuiltin_args_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:141" class="id"><a name="bc:141" class="">bc</a></span> <span id="ge:142" class="id"><a name="ge:142" class="">ge</a></span> <span id="rs:143" class="id"><a name="rs:143" class="">rs</a></span> <span id="sp:144" class="id"><a name="sp:144" class="">sp</a></span> <span id="m:145" class="id"><a name="m:145" class="">m</a></span> <span id="ae:146" class="id"><a name="ae:146" class="">ae</a></span> <span id="rm:147" class="id"><a name="rm:147" class="">rm</a></span> <span id="am:148" class="id"><a name="am:148" class="">am,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:141">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rs:143">rs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:146">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:141">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:145">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:147">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:141">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:145">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:148">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:141">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:142">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:141">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:144">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="al:149" class="id"><a name="al:149" class="">al</a></span> <span id="vl:150" class="id"><a name="vl:150" class="">vl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:142">ge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:151" class="id"><a name="r:151" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rs:143">rs#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:144">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:145">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#al:149">al</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#vl:150">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:141">bc</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#vl:150">vl</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:146">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:148">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:147">rm</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#al:149">al</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">am;</span> <span class="id">intros</span> <span class="id">EM</span> <span class="id">RM</span> <span class="id">MM</span> <span class="id">GM</span> <span class="id">SP</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">simpl</span>.<br/>
<span class="id">-</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">constructor;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg_sound">abuiltin_arg_sound;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="set_builtin_res_sound" class="id"><a name="set_builtin_res_sound" class="">set_builtin_res_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:152" class="id"><a name="bc:152" class="">bc</a></span> <span id="rs:153" class="id"><a name="rs:153" class="">rs</a></span> <span id="ae:154" class="id"><a name="ae:154" class="">ae</a></span> <span id="v:155" class="id"><a name="v:155" class="">v</a></span> <span id="av:156" class="id"><a name="av:156" class="">av</a></span> <span id="res:157" class="id"><a name="res:157" class="">res,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:152">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rs:153">rs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:154">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:152">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:155">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:156">av</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:152">bc</a></span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:157">res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:155">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rs:153">rs</a></span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res">set_builtin_res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:157">res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:156">av</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:154">ae</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">res;</span> <span class="id">simpl;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_update">ematch_update;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="eval_static_builtin_function_sound" class="id"><a name="eval_static_builtin_function_sound" class="">eval_static_builtin_function_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:158" class="id"><a name="bc:158" class="">bc</a></span> <span id="ge:159" class="id"><a name="ge:159" class="">ge</a></span> <span id="rs:160" class="id"><a name="rs:160" class="">rs</a></span> <span id="sp:161" class="id"><a name="sp:161" class="">sp</a></span> <span id="m:162" class="id"><a name="m:162" class="">m</a></span> <span id="ae:163" class="id"><a name="ae:163" class="">ae</a></span> <span id="rm:164" class="id"><a name="rm:164" class="">rm</a></span> <span id="am:165" class="id"><a name="am:165" class="">am</a></span> (<span id="bf:166" class="id"><a name="bf:166" class="">bf:</a></span> <span class="id"><a href="compcert.common.Builtins.html#builtin_function">builtin_function</a></span>) <span id="al:167" class="id"><a name="al:167" class="">al</a></span> <span id="vl:168" class="id"><a name="vl:168" class="">vl</a></span> <span id="v:169" class="id"><a name="v:169" class="">v</a></span> <span id="va:170" class="id"><a name="va:170" class="">va,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:158">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rs:160">rs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:163">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:158">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:162">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:164">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:158">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:162">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:165">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:158">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:159">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:158">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:161">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:159">ge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:171" class="id"><a name="r:171" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rs:160">rs#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:161">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:162">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#al:167">al</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#vl:168">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#eval_static_builtin_function">eval_static_builtin_function</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:163">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:165">am</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:164">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bf:166">bf</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#al:167">al</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#va:170">va</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Builtins.html#builtin_function_sem">builtin_function_sem</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bf:166">bf</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#vl:168">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:169">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:158">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:169">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#va:170">va</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#eval_static_builtin_function">eval_static_builtin_function;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_args_sound">abuiltin_args_sound;</a></span> <span class="id">eauto</span>. <br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">vla</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id">rm</span>) <span class="id">al</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">intros</span> <span class="id">VMA</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Builtins.html#builtin_function_sem">builtin_function_sem</a></span> <span class="id">bf</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#val_of_aval">val_of_aval</a></span> <span class="id">vla</span>)) <span class="gallina-kwd">as</span> <span class="id">[v0|]</span> <span class="id">eqn:A;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">LD:</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id">v0</span> <span class="id">v</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_lessdef">val_inject_lessdef</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Builtins0.html#bs_inject">bs_inject</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.common.Builtins.html#builtin_function_sem">builtin_function_sem</a></span> <span class="id">bf</span>)). <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_list_lessdef">val_inject_list_lessdef</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#list_val_of_aval_sound">list_val_of_aval_sound;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">A,</span> <span class="id">H6;</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">LD</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aval_of_val_sound">aval_of_val_sound;</a></span> <span class="id">auto</span>. <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<h2> Constructing block classifications </h2>
<br/>
<span class="vernacular">Definition</span> <span id="bc_nostack" class="id"><a name="bc_nostack" class="">bc_nostack</a></span> (<span id="bc:172" class="id"><a name="bc:172" class="">bc:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#block_classification">block_classification</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:173" class="id"><a name="b:173" class="">b,</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:172">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:173">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="NOSTACK" class="id"><a name="NOSTACK" class="">NOSTACK</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="NOSTACK.bc" class="id"><a name="NOSTACK.bc" class="">bc:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#block_classification">block_classification</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="NOSTACK.NOSTACK" class="id"><a name="NOSTACK.NOSTACK" class="">NOSTACK:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#NOSTACK.bc">bc</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="pmatch_no_stack" class="id"><a name="pmatch_no_stack" class="">pmatch_no_stack:</a></span> <span class="gallina-kwd">forall</span> <span id="b:176" class="id"><a name="b:176" class="">b</a></span> <span id="ofs:177" class="id"><a name="ofs:177" class="">ofs</a></span> <span id="p:178" class="id"><a name="p:178" class="">p,</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#NOSTACK.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:176">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:177">ofs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:178">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#NOSTACK.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:176">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:177">ofs</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H;</span> <span class="id">constructor;</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="vmatch_no_stack" class="id"><a name="vmatch_no_stack" class="">vmatch_no_stack:</a></span> <span class="gallina-kwd">forall</span> <span id="v:179" class="id"><a name="v:179" class="">v</a></span> <span id="x:180" class="id"><a name="x:180" class="">x,</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#NOSTACK.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:179">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#x:180">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#NOSTACK.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:179">v</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">constructor;</span> <span class="id">auto;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#pmatch_no_stack">pmatch_no_stack;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="smatch_no_stack" class="id"><a name="smatch_no_stack" class="">smatch_no_stack:</a></span> <span class="gallina-kwd">forall</span> <span id="m:181" class="id"><a name="m:181" class="">m</a></span> <span id="b:182" class="id"><a name="b:182" class="">b</a></span> <span id="p:183" class="id"><a name="p:183" class="">p,</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#NOSTACK.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:181">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:182">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:183">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#NOSTACK.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:181">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:182">b</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span> <span class="gallina-kwd">as</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#vmatch_no_stack">vmatch_no_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#pmatch_no_stack">pmatch_no_stack;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="mmatch_no_stack" class="id"><a name="mmatch_no_stack" class="">mmatch_no_stack:</a></span> <span class="gallina-kwd">forall</span> <span id="m:184" class="id"><a name="m:184" class="">m</a></span> <span id="am:185" class="id"><a name="am:185" class="">am</a></span> <span id="astk:186" class="id"><a name="astk:186" class="">astk,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#NOSTACK.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:184">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:185">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#NOSTACK.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:184">m</a></span> <span class="id">{|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#am_stack">am_stack</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#astk:186">astk;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#am_glob">am_glob</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#am_nonstack">am_nonstack</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#am_top">am_top</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span> <span class="id">|}</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">elim</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#NOSTACK.NOSTACK">NOSTACK</a></span> <span class="id">b</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">discriminate</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#smatch_no_stack">smatch_no_stack;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#smatch_no_stack">smatch_no_stack;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#NOSTACK">NOSTACK</a></span>.<br/>
<br/>
<h2> Construction 1: allocating the stack frame at function entry </h2>
<br/>
<span class="vernacular">Ltac</span> <span class="id">splitall</span> <span class="id">:=</span> <span class="id">repeat</span> (<span class="gallina-kwd">match</span> <span class="id">goal</span> <span class="gallina-kwd">with</span> <span class="id">|-</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">split</span> <span class="gallina-kwd">end</span>).<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="allocate_stack" class="id"><a name="allocate_stack" class="">allocate_stack:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:187" class="id"><a name="m:187" class="">m</a></span> <span id="sz:188" class="id"><a name="sz:188" class="">sz</a></span> <span id="m':189" class="id"><a name="m':189" class="">m'</a></span> <span id="sp:190" class="id"><a name="sp:190" class="">sp</a></span> <span id="bc:191" class="id"><a name="bc:191" class="">bc</a></span> <span id="ge:192" class="id"><a name="ge:192" class="">ge</a></span> <span id="rm:193" class="id"><a name="rm:193" class="">rm</a></span> <span id="am:194" class="id"><a name="am:194" class="">am,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:187">m</a></span> <span class="id">0</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sz:188">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#m':189">m',</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:190">sp</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:191">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:192">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:191">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:187">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:193">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:191">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:187">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:194">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:191">bc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc':195" class="id"><a name="bc':195" class="">bc',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bc_incr">bc_incr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:191">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':195">bc'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':195">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:190">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':195">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:192">ge</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':195">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':189">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:193">rm</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':195">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':189">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#mfunction_entry">mfunction_entry</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:196" class="id"><a name="b:196" class="">b,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:196">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:190">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':195">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:196">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:191">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:196">b</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="v:197" class="id"><a name="v:197" class="">v</a></span> <span id="x:198" class="id"><a name="x:198" class="">x,</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:191">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:197">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#x:198">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':195">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:197">v</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">am;</span> <span class="id">intros</span> <span class="id">ALLOC</span> <span class="id">GENV</span> <span class="id">RO</span> <span class="id">MM</span> <span class="id">NOSTACK</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">NB</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">SP</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SPINVALID:</span> <span class="id">bc</span> <span class="id">sp</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">SP</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_below_invalid">bc_below_invalid</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
<span class="comment">(*&nbsp;Part&nbsp;1:&nbsp;constructing&nbsp;bc'&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="b:200" class="id"><span id="b:199" class="id"><a name="b:200" class="">b</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:199">b</a></span> <span class="id">sp</span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="gallina-kwd">else</span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:199">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_stack:</span> <span class="gallina-kwd">forall</span> <span id="b1:203" class="id"><span id="b1:201" class="id"><a name="b1:203" class="">b1</a></span></span> <span id="b2:204" class="id"><span id="b2:202" class="id"><a name="b2:204" class="">b2,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:201">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:202">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:201">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:202">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="b:206" class="id"><span id="b:205" class="id"><a name="b:206" class="">b,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:205">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:205">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">eelim</span> <span class="id">NOSTACK;</span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">transitivity</span> <span class="id">sp;</span> <span class="id">auto</span>. <span class="id">symmetry;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_glob:</span> <span class="gallina-kwd">forall</span> <span id="b1:210" class="id"><span id="b1:207" class="id"><a name="b1:210" class="">b1</a></span></span> <span id="b2:211" class="id"><span id="b2:208" class="id"><a name="b2:211" class="">b2</a></span></span> <span id="id:212" class="id"><span id="id:209" class="id"><a name="id:212" class="">id,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:207">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:209">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:208">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:209">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:207">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:208">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="b:215" class="id"><span id="b:213" class="id"><a name="b:215" class="">b</a></span></span> <span id="id:216" class="id"><span id="id:214" class="id"><a name="id:216" class="">id,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:213">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:214">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:213">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:214">id</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#bc_glob">bc_glob</a></span> <span class="id">bc</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">bc'</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BC">BC</a></span> <span class="id">f</span> <span class="id">F_stack</span> <span class="id">F_glob</span>). <span class="id">unfold</span> <span class="id">f</span> <span class="gallina-kwd">in</span> <span class="id">bc'</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">BC'EQ:</span> <span class="gallina-kwd">forall</span> <span id="b:218" class="id"><span id="b:217" class="id"><a name="b:218" class="">b,</a></span></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:217">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">bc'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:217">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:217">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">intros;</span> <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span>. <span class="id">congruence</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">INCR:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_incr">bc_incr</a></span> <span class="id">bc</span> <span class="id">bc'</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id">BC'EQ;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
<span class="comment">(*&nbsp;Part&nbsp;2:&nbsp;invariance&nbsp;properties&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SM:</span> <span class="gallina-kwd">forall</span> <span id="b:221" class="id"><span id="b:219" class="id"><a name="b:221" class="">b</a></span></span> <span id="p:222" class="id"><span id="p:220" class="id"><a name="p:222" class="">p,</a></span></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:219">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">bc</span> <span class="id">m</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:219">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:220">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">bc'</span> <span class="id">m'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:219">b</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch_incr">smatch_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">bc;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch_inv">smatch_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#smatch_no_stack">smatch_no_stack</a></span> <span class="gallina-kwd">with</span> <span class="id">p;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_alloc_unchanged">Mem.loadbytes_alloc_unchanged</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SMSTACK:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">bc'</span> <span class="id">m'</span> <span class="id">sp</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Pbot">Pbot</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_alloc_same">Mem.load_alloc_same</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">EQ</span>. <span class="id">subst</span> <span class="id">v</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_alloc_same">Mem.loadbytes_alloc_same</a></span><span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
<span class="comment">(*&nbsp;Conclusions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">bc';</span> <span class="id">splitall</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assumption</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;sp&nbsp;is&nbsp;BCstack&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;genv&nbsp;match&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match_exten">genv_match_exten;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;romatch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch_exten">romatch_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch_alloc">romatch_alloc;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;mmatch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;stack&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_init_sound">ablock_init_sound</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">apply</span> <span class="id">SMSTACK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">elim</span> (<span class="id">NOSTACK</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;globals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;nonstack&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>. <span class="id">eapply</span> <span class="id">SM;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_nonstack">mmatch_nonstack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;top&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch_ge">smatch_ge</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Pbot">Pbot</a></span>. <span class="id">apply</span> <span class="id">SMSTACK</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">SM;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_top">mmatch_top;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;below&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">NB</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b;</span> <span class="id">rewrite</span> <span class="id">SP;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;unchanged&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne</a></span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;values&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_incr">vmatch_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">bc;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#vmatch_no_stack">vmatch_no_stack;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Construction 2: turn the stack into an "other" block, at public calls or function returns </div>
<br/>
<span class="vernacular">Theorem</span> <span id="anonymize_stack" class="id"><a name="anonymize_stack" class="">anonymize_stack:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:223" class="id"><a name="m:223" class="">m</a></span> <span id="sp:224" class="id"><a name="sp:224" class="">sp</a></span> <span id="bc:225" class="id"><a name="bc:225" class="">bc</a></span> <span id="ge:226" class="id"><a name="ge:226" class="">ge</a></span> <span id="rm:227" class="id"><a name="rm:227" class="">rm</a></span> <span id="am:228" class="id"><a name="am:228" class="">am,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:225">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:226">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:225">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:223">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:227">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:225">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:223">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:228">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:225">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:224">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc':229" class="id"><a name="bc':229" class="">bc',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':229">bc'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':229">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:224">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCother">BCother</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:230" class="id"><a name="b:230" class="">b,</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:230">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:224">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':229">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:230">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:225">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:230">b</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="v:231" class="id"><a name="v:231" class="">v</a></span> <span id="x:232" class="id"><a name="x:232" class="">x,</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:225">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:231">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#x:232">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':229">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:231">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':229">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:226">ge</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':229">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:223">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:227">rm</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':229">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:223">m</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mtop">mtop</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">am;</span> <span class="id">intros</span> <span class="id">GENV</span> <span class="id">RO</span> <span class="id">MM</span> <span class="id">SP</span>.<br/>
<span class="comment">(*&nbsp;Part&nbsp;1:&nbsp;constructing&nbsp;bc'&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="b:234" class="id"><span id="b:233" class="id"><a name="b:234" class="">b</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:233">b</a></span> <span class="id">sp</span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCother">BCother</a></span> <span class="gallina-kwd">else</span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:233">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_stack:</span> <span class="gallina-kwd">forall</span> <span id="b1:237" class="id"><span id="b1:235" class="id"><a name="b1:237" class="">b1</a></span></span> <span id="b2:238" class="id"><span id="b2:236" class="id"><a name="b2:238" class="">b2,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:235">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:236">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:235">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:236">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_glob:</span> <span class="gallina-kwd">forall</span> <span id="b1:242" class="id"><span id="b1:239" class="id"><a name="b1:242" class="">b1</a></span></span> <span id="b2:243" class="id"><span id="b2:240" class="id"><a name="b2:243" class="">b2</a></span></span> <span id="id:244" class="id"><span id="id:241" class="id"><a name="id:244" class="">id,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:239">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:241">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:240">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:241">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:239">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:240">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_glob">bc_glob;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">bc'</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BC">BC</a></span> <span class="id">f</span> <span class="id">F_stack</span> <span class="id">F_glob</span>). <span class="id">unfold</span> <span class="id">f</span> <span class="gallina-kwd">in</span> <span class="id">bc'</span>.<br/>
<br/>
<span class="comment">(*&nbsp;Part&nbsp;2:&nbsp;matching&nbsp;wrt&nbsp;bc'&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">PM:</span> <span class="gallina-kwd">forall</span> <span id="b:248" class="id"><span id="b:245" class="id"><a name="b:248" class="">b</a></span></span> <span id="ofs:249" class="id"><span id="ofs:246" class="id"><a name="ofs:249" class="">ofs</a></span></span> <span id="p:250" class="id"><span id="p:247" class="id"><a name="p:250" class="">p,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:245">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:246">ofs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:247">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:245">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:246">ofs</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">assert</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch_top'">pmatch_top';</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor;</span> <span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">VM:</span> <span class="gallina-kwd">forall</span> <span id="v:253" class="id"><span id="v:251" class="id"><a name="v:253" class="">v</a></span></span> <span id="x:254" class="id"><span id="x:252" class="id"><a name="x:254" class="">x,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:251">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#x:252">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">bc'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:251">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">constructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SM:</span> <span class="gallina-kwd">forall</span> <span id="b:257" class="id"><span id="b:255" class="id"><a name="b:257" class="">b</a></span></span> <span id="p:258" class="id"><span id="p:256" class="id"><a name="p:258" class="">p,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">bc</span> <span class="id">m</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:255">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:256">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">bc'</span> <span class="id">m</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:255">b</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span> <span class="gallina-kwd">as</span> <span class="id">[S1</span> <span class="id">S2]</span>. <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">VM</span>. <span class="id">eapply</span> <span class="id">S1;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">PM</span>. <span class="id">eapply</span> <span class="id">S2;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
<span class="comment">(*&nbsp;Conclusions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">bc';</span> <span class="id">splitall</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;nostack&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">elim</span> <span class="id">n</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;bc'&nbsp;sp&nbsp;is&nbsp;BCother&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;other&nbsp;blocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">simpl;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;values&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;genv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match_exten">genv_match_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;romatch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch_exten">romatch_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;mmatch&nbsp;top&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>. <span class="id">elim</span> <span class="id">n</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">eapply</span> <span class="id">SM</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_stack">mmatch_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">SM</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_nonstack">mmatch_nonstack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">eapply</span> <span class="id">SM</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_stack">mmatch_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">SM</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_top">mmatch_top;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Construction 3: turn the stack into an invalid block, at private calls </div>
<br/>
<span class="vernacular">Theorem</span> <span id="hide_stack" class="id"><a name="hide_stack" class="">hide_stack:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:259" class="id"><a name="m:259" class="">m</a></span> <span id="sp:260" class="id"><a name="sp:260" class="">sp</a></span> <span id="bc:261" class="id"><a name="bc:261" class="">bc</a></span> <span id="ge:262" class="id"><a name="ge:262" class="">ge</a></span> <span id="rm:263" class="id"><a name="rm:263" class="">rm</a></span> <span id="am:264" class="id"><a name="am:264" class="">am,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:261">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:262">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:261">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:259">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:263">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:261">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:259">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:264">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:261">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:260">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pge">pge</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:264">am</a></span>.(<span class="id"><a href="compcert.backend.ValueDomain.html#am_nonstack">am_nonstack</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc':265" class="id"><a name="bc':265" class="">bc',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':265">bc'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':265">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:260">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:266" class="id"><a name="b:266" class="">b,</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:266">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:260">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':265">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:266">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:261">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:266">b</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="v:267" class="id"><a name="v:267" class="">v</a></span> <span id="x:268" class="id"><a name="x:268" class="">x,</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vge">vge</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#x:268">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:261">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:267">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#x:268">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':265">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:267">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':265">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:262">ge</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':265">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:259">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:263">rm</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':265">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:259">m</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mtop">mtop</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">am;</span> <span class="id">intros</span> <span class="id">GENV</span> <span class="id">RO</span> <span class="id">MM</span> <span class="id">SP</span> <span class="id">NOLEAK</span>.<br/>
<span class="comment">(*&nbsp;Part&nbsp;1:&nbsp;constructing&nbsp;bc'&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="b:270" class="id"><span id="b:269" class="id"><a name="b:270" class="">b</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:269">b</a></span> <span class="id">sp</span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span> <span class="gallina-kwd">else</span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:269">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_stack:</span> <span class="gallina-kwd">forall</span> <span id="b1:273" class="id"><span id="b1:271" class="id"><a name="b1:273" class="">b1</a></span></span> <span id="b2:274" class="id"><span id="b2:272" class="id"><a name="b2:274" class="">b2,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:271">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:272">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:271">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:272">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_glob:</span> <span class="gallina-kwd">forall</span> <span id="b1:278" class="id"><span id="b1:275" class="id"><a name="b1:278" class="">b1</a></span></span> <span id="b2:279" class="id"><span id="b2:276" class="id"><a name="b2:279" class="">b2</a></span></span> <span id="id:280" class="id"><span id="id:277" class="id"><a name="id:280" class="">id,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:275">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:277">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:276">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:277">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:275">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:276">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_glob">bc_glob;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">bc'</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BC">BC</a></span> <span class="id">f</span> <span class="id">F_stack</span> <span class="id">F_glob</span>). <span class="id">unfold</span> <span class="id">f</span> <span class="gallina-kwd">in</span> <span class="id">bc'</span>.<br/>
<br/>
<span class="comment">(*&nbsp;Part&nbsp;2:&nbsp;matching&nbsp;wrt&nbsp;bc'&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">PM:</span> <span class="gallina-kwd">forall</span> <span id="b:284" class="id"><span id="b:281" class="id"><a name="b:284" class="">b</a></span></span> <span id="ofs:285" class="id"><span id="ofs:282" class="id"><a name="ofs:285" class="">ofs</a></span></span> <span id="p:286" class="id"><span id="p:283" class="id"><a name="p:286" class="">p,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pge">pge</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:283">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:281">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:282">ofs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:283">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:281">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:282">ofs</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">assert</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch_ge">pmatch_ge;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">VM:</span> <span class="gallina-kwd">forall</span> <span id="v:289" class="id"><span id="v:287" class="id"><a name="v:289" class="">v</a></span></span> <span id="x:290" class="id"><span id="x:288" class="id"><a name="x:290" class="">x,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vge">vge</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#x:288">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:287">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#x:288">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">bc'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:287">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ifptr">vmatch_ifptr;</a></span> <span class="id">intros</span>. <span class="id">subst</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0;</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">eapply</span> <span class="id">PM;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SM:</span> <span class="gallina-kwd">forall</span> <span id="b:293" class="id"><span id="b:291" class="id"><a name="b:293" class="">b</a></span></span> <span id="p:294" class="id"><span id="p:292" class="id"><a name="p:294" class="">p,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pge">pge</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:292">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">bc</span> <span class="id">m</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:291">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:292">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">bc'</span> <span class="id">m</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:291">b</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H0</span> <span class="gallina-kwd">as</span> <span class="id">[S1</span> <span class="id">S2]</span>. <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">VM</span> <span class="gallina-kwd">with</span> (<span class="id">x</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id">p</span>). <span class="id">constructor;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id">S1;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">PM</span>. <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id">S2;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
<span class="comment">(*&nbsp;Conclusions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">bc';</span> <span class="id">splitall</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;nostack&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">elim</span> <span class="id">n</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;bc'&nbsp;sp&nbsp;is&nbsp;BCinvalid&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;other&nbsp;blocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">simpl;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;values&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;genv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match_exten">genv_match_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;romatch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch_exten">romatch_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;mmatch&nbsp;top&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>. <span class="id">elim</span> <span class="id">n</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">SM</span>. <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_nonstack">mmatch_nonstack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">SM</span>. <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_nonstack">mmatch_nonstack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">n</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Construction 4: restore the stack after a public call </div>
<br/>
<span class="vernacular">Theorem</span> <span id="return_from_public_call" class="id"><a name="return_from_public_call" class="">return_from_public_call:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="caller:295" class="id"><a name="caller:295" class="">caller</a></span> <span id="callee:296" class="id"><a name="callee:296" class="">callee:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#block_classification">block_classification</a></span>) <span id="bound:297" class="id"><a name="bound:297" class="">bound</a></span> <span id="sp:298" class="id"><a name="sp:298" class="">sp</a></span> <span id="ge:299" class="id"><a name="ge:299" class="">ge</a></span> <span id="e:300" class="id"><a name="e:300" class="">e</a></span> <span id="ae:301" class="id"><a name="ae:301" class="">ae</a></span> <span id="v:302" class="id"><a name="v:302" class="">v</a></span> <span id="m:303" class="id"><a name="m:303" class="">m</a></span> <span id="rm:304" class="id"><a name="rm:304" class="">rm,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bc_below">bc_below</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:295">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:297">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:296">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:298">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCother">BCother</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:295">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:298">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b:305" class="id"><a name="b:305" class="">b,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:305">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:297">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:305">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:298">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:295">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:305">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:296">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:305">b</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:295">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:299">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:295">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:300">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:301">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:297">bound</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:303">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:296">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:302">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:296">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:303">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:304">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:296">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:303">m</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mtop">mtop</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:296">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:299">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:296">callee</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc:306" class="id"><a name="bc:306" class="">bc,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:306">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:302">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:306">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:300">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:301">ae</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:306">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:303">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:304">rm</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:306">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:303">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#mafter_public_call">mafter_public_call</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:306">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:299">ge</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:306">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:298">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:307" class="id"><a name="b:307" class="">b,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:307">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:298">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:306">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:307">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:295">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:307">b</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">rm;</span> <span class="id">intros</span> <span class="id">BELOW</span> <span class="id">SP1</span> <span class="id">SP2</span> <span class="id">SAME</span> <span class="id">GE1</span> <span class="id">EM</span> <span class="id">BOUND</span> <span class="id">RESM</span> <span class="id">RM</span> <span class="id">MM</span> <span class="id">GE2</span> <span class="id">NOSTACK</span>.<br/>
<span class="comment">(*&nbsp;Constructing&nbsp;bc&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="b:309" class="id"><span id="b:308" class="id"><a name="b:309" class="">b</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:308">b</a></span> <span class="id">sp</span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="gallina-kwd">else</span> <span class="id">callee</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:308">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_stack:</span> <span class="gallina-kwd">forall</span> <span id="b1:312" class="id"><span id="b1:310" class="id"><a name="b1:312" class="">b1</a></span></span> <span id="b2:313" class="id"><span id="b2:311" class="id"><a name="b2:313" class="">b2,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:310">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:311">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:310">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:311">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="b:315" class="id"><span id="b:314" class="id"><a name="b:315" class="">b,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:314">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:314">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">eelim</span> <span class="id">NOSTACK;</span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">transitivity</span> <span class="id">sp;</span> <span class="id">auto</span>. <span class="id">symmetry;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_glob:</span> <span class="gallina-kwd">forall</span> <span id="b1:319" class="id"><span id="b1:316" class="id"><a name="b1:319" class="">b1</a></span></span> <span id="b2:320" class="id"><span id="b2:317" class="id"><a name="b2:320" class="">b2</a></span></span> <span id="id:321" class="id"><span id="id:318" class="id"><a name="id:321" class="">id,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:316">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:318">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:317">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:318">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:316">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:317">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="b:324" class="id"><span id="b:322" class="id"><a name="b:324" class="">b</a></span></span> <span id="id:325" class="id"><span id="id:323" class="id"><a name="id:325" class="">id,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:322">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:323">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">callee</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:322">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:323">id</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#bc_glob">bc_glob</a></span> <span class="id">callee</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">bc</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BC">BC</a></span> <span class="id">f</span> <span class="id">F_stack</span> <span class="id">F_glob</span>). <span class="id">unfold</span> <span class="id">f</span> <span class="gallina-kwd">in</span> <span class="id">bc</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">INCR:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_incr">bc_incr</a></span> <span class="id">caller</span> <span class="id">bc</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry;</span> <span class="id">apply</span> <span class="id">SAME;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
<span class="comment">(*&nbsp;Invariance&nbsp;properties&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">PM:</span> <span class="gallina-kwd">forall</span> <span id="b:329" class="id"><span id="b:326" class="id"><a name="b:329" class="">b</a></span></span> <span id="ofs:330" class="id"><span id="ofs:327" class="id"><a name="ofs:330" class="">ofs</a></span></span> <span id="p:331" class="id"><span id="p:328" class="id"><a name="p:331" class="">p,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">callee</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:326">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:327">ofs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:328">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:326">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:327">ofs</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">assert</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">callee</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch_top'">pmatch_top';</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor;</span> <span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">VM:</span> <span class="gallina-kwd">forall</span> <span id="v:334" class="id"><span id="v:332" class="id"><a name="v:334" class="">v</a></span></span> <span id="x:335" class="id"><span id="x:333" class="id"><a name="x:335" class="">x,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">callee</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:332">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#x:333">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:332">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">assert</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">callee</span> <span class="id">v0</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_top">vmatch_top;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0;</span> <span class="id">constructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SM:</span> <span class="gallina-kwd">forall</span> <span id="b:338" class="id"><span id="b:336" class="id"><a name="b:338" class="">b</a></span></span> <span id="p:339" class="id"><span id="p:337" class="id"><a name="p:339" class="">p,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">callee</span> <span class="id">m</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:336">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:337">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">bc</span> <span class="id">m</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:336">b</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H;</span> <span class="id">split;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id">VM;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id">PM;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
<span class="comment">(*&nbsp;Conclusions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">bc;</span> <span class="id">splitall</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;result&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">VM;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;environment&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_incr">ematch_incr;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;romem&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch_exten">romatch_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">callee;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;mmatch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;stack&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_init_sound">ablock_init_sound</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">eapply</span> <span class="id">SM</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_nonstack">mmatch_nonstack;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">elim</span> (<span class="id">NOSTACK</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;globals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;nonstack&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>. <span class="id">eapply</span> <span class="id">SM;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_nonstack">mmatch_nonstack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;top&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">SM</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_top">mmatch_top;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;below&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;genv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match_exten">genv_match_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">caller;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">SAME</span> <span class="gallina-kwd">in</span> <span class="id">H</span> <span class="gallina-kwd">by</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">GE2</span>) <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">GE1</span>) <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">SAME;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;sp&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;unchanged&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">apply</span> <span class="id">SAME;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans">Plt_trans</a></span>. <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">BELOW</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Construction 5: restore the stack after a private call </div>
<br/>
<span class="vernacular">Theorem</span> <span id="return_from_private_call" class="id"><a name="return_from_private_call" class="">return_from_private_call:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="caller:340" class="id"><a name="caller:340" class="">caller</a></span> <span id="callee:341" class="id"><a name="callee:341" class="">callee:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#block_classification">block_classification</a></span>) <span id="bound:342" class="id"><a name="bound:342" class="">bound</a></span> <span id="sp:343" class="id"><a name="sp:343" class="">sp</a></span> <span id="ge:344" class="id"><a name="ge:344" class="">ge</a></span> <span id="e:345" class="id"><a name="e:345" class="">e</a></span> <span id="ae:346" class="id"><a name="ae:346" class="">ae</a></span> <span id="v:347" class="id"><a name="v:347" class="">v</a></span> <span id="m:348" class="id"><a name="m:348" class="">m</a></span> <span id="rm:349" class="id"><a name="rm:349" class="">rm</a></span> <span id="am:350" class="id"><a name="am:350" class="">am,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bc_below">bc_below</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:340">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:342">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:341">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:343">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:340">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:343">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b:351" class="id"><a name="b:351" class="">b,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:351">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:342">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:351">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:343">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:340">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:351">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:341">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:351">b</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:340">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:344">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:340">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:345">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:346">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:340">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:348">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:343">sp</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:350">am</a></span>.(<span class="id"><a href="compcert.backend.ValueDomain.html#am_stack">am_stack</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:342">bound</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:348">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:341">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:347">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:341">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:348">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:349">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:341">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:348">m</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mtop">mtop</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:341">callee</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:344">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#callee:341">callee</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc:352" class="id"><a name="bc:352" class="">bc,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:352">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:347">v</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>)<br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:352">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:345">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:346">ae</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:352">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:348">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:349">rm</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:352">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:348">m</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#mafter_private_call">mafter_private_call</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:350">am</a></span>)<br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:352">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:344">ge</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:352">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:343">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:353" class="id"><a name="b:353" class="">b,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:353">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:343">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:352">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:353">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#caller:340">caller</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:353">b</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">am;</span> <span class="id">intros</span> <span class="id">BELOW</span> <span class="id">SP1</span> <span class="id">SP2</span> <span class="id">SAME</span> <span class="id">GE1</span> <span class="id">EM</span> <span class="id">CONTENTS</span> <span class="id">BOUND</span> <span class="id">RESM</span> <span class="id">RM</span> <span class="id">MM</span> <span class="id">GE2</span> <span class="id">NOSTACK</span>.<br/>
<span class="comment">(*&nbsp;Constructing&nbsp;bc&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="b:355" class="id"><span id="b:354" class="id"><a name="b:355" class="">b</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:354">b</a></span> <span class="id">sp</span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="gallina-kwd">else</span> <span class="id">callee</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:354">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_stack:</span> <span class="gallina-kwd">forall</span> <span id="b1:358" class="id"><span id="b1:356" class="id"><a name="b1:358" class="">b1</a></span></span> <span id="b2:359" class="id"><span id="b2:357" class="id"><a name="b2:359" class="">b2,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:356">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:357">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:356">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:357">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="b:361" class="id"><span id="b:360" class="id"><a name="b:361" class="">b,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:360">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:360">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">eelim</span> <span class="id">NOSTACK;</span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">transitivity</span> <span class="id">sp;</span> <span class="id">auto</span>. <span class="id">symmetry;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_glob:</span> <span class="gallina-kwd">forall</span> <span id="b1:365" class="id"><span id="b1:362" class="id"><a name="b1:365" class="">b1</a></span></span> <span id="b2:366" class="id"><span id="b2:363" class="id"><a name="b2:366" class="">b2</a></span></span> <span id="id:367" class="id"><span id="id:364" class="id"><a name="id:367" class="">id,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:362">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:364">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:363">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:364">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:362">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:363">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="b:370" class="id"><span id="b:368" class="id"><a name="b:370" class="">b</a></span></span> <span id="id:371" class="id"><span id="id:369" class="id"><a name="id:371" class="">id,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:368">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:369">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">callee</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:368">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:369">id</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#bc_glob">bc_glob</a></span> <span class="id">callee</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">bc</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BC">BC</a></span> <span class="id">f</span> <span class="id">F_stack</span> <span class="id">F_glob</span>). <span class="id">unfold</span> <span class="id">f</span> <span class="gallina-kwd">in</span> <span class="id">bc</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">INCR1:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_incr">bc_incr</a></span> <span class="id">caller</span> <span class="id">bc</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry;</span> <span class="id">apply</span> <span class="id">SAME;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">INCR2:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_incr">bc_incr</a></span> <span class="id">callee</span> <span class="id">bc</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
<br/>
<span class="comment">(*&nbsp;Invariance&nbsp;properties&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">PM:</span> <span class="gallina-kwd">forall</span> <span id="b:375" class="id"><span id="b:372" class="id"><a name="b:375" class="">b</a></span></span> <span id="ofs:376" class="id"><span id="ofs:373" class="id"><a name="ofs:376" class="">ofs</a></span></span> <span id="p:377" class="id"><span id="p:374" class="id"><a name="p:377" class="">p,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">callee</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:372">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:373">ofs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:374">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:372">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:373">ofs</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">assert</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">callee</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch_top'">pmatch_top';</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">VM:</span> <span class="gallina-kwd">forall</span> <span id="v:380" class="id"><span id="v:378" class="id"><a name="v:380" class="">v</a></span></span> <span id="x:381" class="id"><span id="x:379" class="id"><a name="x:381" class="">x,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">callee</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:378">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#x:379">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:378">v</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">assert</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">callee</span> <span class="id">v0</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_top">vmatch_top;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0;</span> <span class="id">constructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SM:</span> <span class="gallina-kwd">forall</span> <span id="b:384" class="id"><span id="b:382" class="id"><a name="b:384" class="">b</a></span></span> <span id="p:385" class="id"><span id="p:383" class="id"><a name="p:385" class="">p,</a></span></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">callee</span> <span class="id">m</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:382">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:383">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">bc</span> <span class="id">m</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:382">b</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H;</span> <span class="id">split;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id">VM;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id">PM;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">BSTK:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id">bc</span> <span class="id">m</span> <span class="id">sp</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#am_stack">am_stack</a></span> <span class="id">am</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch_incr">bmatch_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">caller;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
<span class="comment">(*&nbsp;Conclusions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">bc;</span> <span class="id">splitall</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;result&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">VM;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;environment&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_incr">ematch_incr;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;romem&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch_exten">romatch_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">callee;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;mmatch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;stack&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">exact</span> <span class="id">BSTK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">elim</span> (<span class="id">NOSTACK</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;globals&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;nonstack&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>. <span class="id">eapply</span> <span class="id">SM;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_nonstack">mmatch_nonstack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;top&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch_ge">smatch_ge</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#ab_summary">ab_summary</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#am_stack">am_stack</a></span> <span class="id">am</span>)). <span class="id">apply</span> <span class="id">BSTK</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pge_lub_l">pge_lub_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch_ge">smatch_ge</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>. <span class="id">eapply</span> <span class="id">SM</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_top">mmatch_top;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pge_lub_r">pge_lub_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;below&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">bound</span>. <span class="id">apply</span> <span class="id">BELOW</span>. <span class="id">congruence</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;genv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match_exten">genv_match_exten;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;sp&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;unchanged&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">apply</span> <span class="id">SAME;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans">Plt_trans</a></span>. <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">BELOW</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Construction 6: external call </div>
<br/>
<span class="vernacular">Theorem</span> <span id="external_call_match" class="id"><a name="external_call_match" class="">external_call_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ef:386" class="id"><a name="ef:386" class="">ef</a></span> (<span id="ge:387" class="id"><a name="ge:387" class="">ge:</a></span> <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>) <span id="vargs:388" class="id"><a name="vargs:388" class="">vargs</a></span> <span id="m:389" class="id"><a name="m:389" class="">m</a></span> <span id="t:390" class="id"><a name="t:390" class="">t</a></span> <span id="vres:391" class="id"><a name="vres:391" class="">vres</a></span> <span id="m':392" class="id"><a name="m':392" class="">m'</a></span> <span id="bc:393" class="id"><a name="bc:393" class="">bc</a></span> <span id="rm:394" class="id"><a name="rm:394" class="">rm</a></span> <span id="am:395" class="id"><a name="am:395" class="">am,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ef:386">ef</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:387">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#vargs:388">vargs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:389">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#t:390">t</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#vres:391">vres</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':392">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:393">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:387">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="v:396" class="id"><a name="v:396" class="">v,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:396">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#vargs:388">vargs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:393">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:396">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:393">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:389">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:394">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:393">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:389">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:395">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:393">bc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc':397" class="id"><a name="bc':397" class="">bc',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bc_incr">bc_incr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:393">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':397">bc'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:398" class="id"><a name="b:398" class="">b,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:398">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:389">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':397">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:398">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:393">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:398">b</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':397">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#vres:391">vres</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':397">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:387">ge</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':397">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':392">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:394">rm</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':397">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':392">m'</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mtop">mtop</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':397">bc'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:399" class="id"><a name="b:399" class="">b</a></span> <span id="ofs:400" class="id"><a name="ofs:400" class="">ofs</a></span> <span id="n:401" class="id"><a name="n:401" class="">n,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:389">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:399">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:393">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:399">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':392">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:399">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:400">ofs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:401">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:389">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:399">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:400">ofs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:401">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">am;</span> <span class="id">intros</span> <span class="id">EC</span> <span class="id">GENV</span> <span class="id">ARGS</span> <span class="id">RO</span> <span class="id">MM</span> <span class="id">NOSTACK</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Part&nbsp;1:&nbsp;using&nbsp;ec_mem_inject&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (@<span class="id"><a href="compcert.common.Events.html#external_call_mem_inject">external_call_mem_inject</a></span> <span class="id">ef</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m'</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#inj_of_bc">inj_of_bc</a></span> <span class="id">bc</span>) <span class="id">m</span> <span class="id">vargs</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#inj_of_bc_preserves_globals">inj_of_bc_preserves_globals;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id">EC</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_inj">mmatch_inj;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">ARGS</span>. <span class="id">generalize</span> <span class="id">vargs</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">vargs0;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_inj">vmatch_inj;</a></span> <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">j'</span> &amp; <span class="id">vres'</span> &amp; <span class="id">m''</span> &amp; <span class="id">EC'</span> &amp; <span class="id">IRES</span> &amp; <span class="id">IMEM</span> &amp; <span class="id">UNCH1</span> &amp; <span class="id">UNCH2</span> &amp; <span class="id">IINCR</span> &amp; <span class="id">ISEP</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">JBELOW:</span> <span class="gallina-kwd">forall</span> <span id="b:403" class="id"><span id="b:402" class="id"><a name="b:403" class="">b,</a></span></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:402">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">j'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:402">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#inj_of_bc">inj_of_bc</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:402">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#inj_of_bc">inj_of_bc</a></span> <span class="id">bc</span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[[b'</span> <span class="id">delta]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">IINCR;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">j'</span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[[b''</span> <span class="id">delta']</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:EQ';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">ISEP;</span> <span class="id">eauto</span>. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Part&nbsp;2:&nbsp;constructing&nbsp;bc'&nbsp;from&nbsp;j'&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="b:405" class="id"><span id="b:404" class="id"><a name="b:405" class="">b</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:404">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">then</span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:404">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="gallina-kwd">match</span> <span class="id">j'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:404">b</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCother">BCother</a></span> <span class="gallina-kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_stack:</span> <span class="gallina-kwd">forall</span> <span id="b1:408" class="id"><span id="b1:406" class="id"><a name="b1:408" class="">b1</a></span></span> <span id="b2:409" class="id"><span id="b2:407" class="id"><a name="b2:409" class="">b2,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:406">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:407">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:406">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:407">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="b:411" class="id"><span id="b:410" class="id"><a name="b:411" class="">b,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:410">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:410">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>))<span class="id">;</span> <span class="id">auto</span>. <span class="id">destruct</span> (<span class="id">j'</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">discriminate</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack</a></span> <span class="id">bc</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_glob:</span> <span class="gallina-kwd">forall</span> <span id="b1:415" class="id"><span id="b1:412" class="id"><a name="b1:415" class="">b1</a></span></span> <span id="b2:416" class="id"><span id="b2:413" class="id"><a name="b2:416" class="">b2</a></span></span> <span id="id:417" class="id"><span id="id:414" class="id"><a name="id:417" class="">id,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:412">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:414">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:413">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:414">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:412">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:413">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="b:420" class="id"><span id="b:418" class="id"><a name="b:420" class="">b</a></span></span> <span id="id:421" class="id"><span id="id:419" class="id"><a name="id:421" class="">id,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:418">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:419">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:418">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:419">id</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>))<span class="id">;</span> <span class="id">auto</span>. <span class="id">destruct</span> (<span class="id">j'</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">discriminate</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#bc_glob">bc_glob</a></span> <span class="id">bc</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">bc'</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BC">BC</a></span> <span class="id">f</span> <span class="id">F_stack</span> <span class="id">F_glob</span>). <span class="id">unfold</span> <span class="id">f</span> <span class="gallina-kwd">in</span> <span class="id">bc'</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">INCR:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_incr">bc_incr</a></span> <span class="id">bc</span> <span class="id">bc'</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">BC'INV:</span> <span class="gallina-kwd">forall</span> <span id="b:425" class="id"><span id="b:422" class="id"><a name="b:425" class="">b,</a></span></span> <span class="id">bc'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:422">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="b':426" class="id"><span id="b':423" class="id"><a name="b':426" class="">b'</a></span></span> <span id="delta:427" class="id"><span id="delta:424" class="id"><a name="delta:427" class="">delta,</a></span></span> <span class="id">j'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:422">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.ValueAnalysis.html#b':423">b',</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#delta:424">delta</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">b,</span> <span class="id">0</span>. <span class="id">rewrite</span> <span class="id">JBELOW</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#inj_of_bc_valid">inj_of_bc_valid;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">j'</span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[[b'</span> <span class="id">delta]</span> <span class="id">|</span> <span class="id">]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">b',</span> <span class="id">delta;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Part&nbsp;3:&nbsp;injection&nbsp;wrt&nbsp;j'&nbsp;implies&nbsp;matching&nbsp;with&nbsp;top&nbsp;wrt&nbsp;bc'&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">PMTOP:</span> <span class="gallina-kwd">forall</span> <span id="b:432" class="id"><span id="b:428" class="id"><a name="b:432" class="">b</a></span></span> <span id="b':433" class="id"><span id="b':429" class="id"><a name="b':433" class="">b'</a></span></span> <span id="delta:434" class="id"><span id="delta:430" class="id"><a name="delta:434" class="">delta</a></span></span> <span id="ofs:435" class="id"><span id="ofs:431" class="id"><a name="ofs:435" class="">ofs,</a></span></span> <span class="id">j'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:428">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#b':429">b',</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#delta:430">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:428">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:431">ofs</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">constructor</span>. <span class="id">simpl;</span> <span class="id">unfold</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">JBELOW</span> <span class="gallina-kwd">in</span> <span class="id">H</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#inj_of_bc_inv">inj_of_bc_inv;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">VMTOP:</span> <span class="gallina-kwd">forall</span> <span id="v:438" class="id"><span id="v:436" class="id"><a name="v:438" class="">v</a></span></span> <span id="v':439" class="id"><span id="v':437" class="id"><a name="v':439" class="">v',</a></span></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">j'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:436">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v':437">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">bc'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:436">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H;</span> <span class="id">constructor</span>. <span class="id">eapply</span> <span class="id">PMTOP;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SMTOP:</span> <span class="gallina-kwd">forall</span> <span id="b:441" class="id"><span id="b:440" class="id"><a name="b:441" class="">b,</a></span></span> <span class="id">bc'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:440">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id">bc'</span> <span class="id">m'</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:440">b</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">exploit</span> <span class="id">BC'INV;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">b'</span> &amp; <span class="id">delta</span> &amp; <span class="id">J'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inject">Mem.load_inject</a></span>. <span class="id">eexact</span> <span class="id">IMEM</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">v'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">VMTOP;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">exploit</span> <span class="id">BC'INV;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">b''</span> &amp; <span class="id">delta</span> &amp; <span class="id">J'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_inject">Mem.loadbytes_inject</a></span>. <span class="id">eexact</span> <span class="id">IMEM</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">bytes</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">B</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="id">eapply</span> <span class="id">PMTOP;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Conclusions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">bc';</span> <span class="id">splitall</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id">INCR</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;unchanged&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;vmatch&nbsp;res&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">VMTOP;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;genv&nbsp;match&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match_exten">genv_match_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span> <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)). <span class="id">auto</span>. <span class="id">destruct</span> (<span class="id">j'</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span> <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>). <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;romatch&nbsp;m'&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">RO;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">R</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch_incr">bmatch_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">bc;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch_ext">bmatch_ext</a></span> <span class="gallina-kwd">with</span> <span class="id">m;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_readonly">external_call_readonly</a></span> <span class="gallina-kwd">with</span> (<span class="id">m2</span> <span class="id">:=</span> <span class="id">m'</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> (<span class="id">Q</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm</a></span> <span class="gallina-kwd">with</span> (<span class="id">m2</span> <span class="id">:=</span> <span class="id">m'</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">j'</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;mmatch&nbsp;top&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_init_sound">ablock_init_sound</a></span>. <span class="id">apply</span> <span class="id">SMTOP</span>. <span class="id">simpl;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">SMTOP;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">SMTOP;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span>. <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">j'</span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[[bx</span> <span class="id">deltax]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:J'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;nostack&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">NOSTACK;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">j'</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;unmapped&nbsp;blocks&nbsp;are&nbsp;invariant&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_unchanged_on_1">Mem.loadbytes_unchanged_on_1</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">UNCH1;</span> <span class="id">auto</span>. <span class="id">intros;</span> <span class="id">red</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueDomain.html#inj_of_bc">inj_of_bc;</a></span> <span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Semantic invariant </h2>
<br/>
<span class="vernacular">Section</span> <span id="SOUNDNESS" class="id"><a name="SOUNDNESS" class="">SOUNDNESS</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="SOUNDNESS.prog" class="id"><a name="SOUNDNESS.prog" class="">prog:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="SOUNDNESS.ge" class="id"><a name="SOUNDNESS.ge" class="">ge:</a></span> <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<br/>
<span class="vernacular">Let</span> <span id="SOUNDNESS.rm" class="id"><a name="SOUNDNESS.rm" class="">rm</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.prog">prog</a></span>.<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="sound_stack" class="id"><a name="sound_stack" class="">sound_stack:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#block_classification">block_classification</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="sound_stack_nil" class="id"><a name="sound_stack_nil" class="">sound_stack_nil:</a></span> <span class="gallina-kwd">forall</span> <span id="bc:446" class="id"><a name="bc:446" class="">bc</a></span> <span id="m:447" class="id"><a name="m:447" class="">m</a></span> <span id="bound:448" class="id"><a name="bound:448" class="">bound,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack:444">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:446">bc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:447">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:448">bound</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="sound_stack_public_call" class="id"><a name="sound_stack_public_call" class="">sound_stack_public_call:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="bc:449" class="id"><a name="bc:449" class="">bc:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#block_classification">block_classification</a></span>) <span id="res:450" class="id"><a name="res:450" class="">res</a></span> <span id="f:451" class="id"><a name="f:451" class="">f</a></span> <span id="sp:452" class="id"><a name="sp:452" class="">sp</a></span> <span id="pc:453" class="id"><a name="pc:453" class="">pc</a></span> <span id="e:454" class="id"><a name="e:454" class="">e</a></span> <span id="stk:455" class="id"><a name="stk:455" class="">stk</a></span> <span id="m:456" class="id"><a name="m:456" class="">m</a></span> <span id="bound:457" class="id"><a name="bound:457" class="">bound</a></span> <span id="bc':458" class="id"><a name="bc':458" class="">bc'</a></span> <span id="bound':459" class="id"><a name="bound':459" class="">bound'</a></span> <span id="ae:460" class="id"><a name="ae:460" class="">ae</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STK:461" class="id"><a name="STK:461" class="">STK:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack:444">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':458">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:455">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:456">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:452">sp</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="INCR:462" class="id"><a name="INCR:462" class="">INCR:</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound':459">bound'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:457">bound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="BELOW:463" class="id"><a name="BELOW:463" class="">BELOW:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_below">bc_below</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':458">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound':459">bound'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SP:464" class="id"><a name="SP:464" class="">SP:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:449">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:452">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCother">BCother</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SP':465" class="id"><a name="SP':465" class="">SP':</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':458">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:452">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SAME:467" class="id"><a name="SAME:467" class="">SAME:</a></span> <span class="gallina-kwd">forall</span> <span id="b:466" class="id"><a name="b:466" class="">b,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:466">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound':459">bound'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:466">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:452">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:449">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:466">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':458">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:466">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="GE:468" class="id"><a name="GE:468" class="">GE:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':458">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.ge">ge</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="AN:469" class="id"><a name="AN:469" class="">AN:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.ge">VA.ge</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:451">f</a></span>)<span class="id">!!pc</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#AE.set">AE.set</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:450">res</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:460">ae</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#mafter_public_call">mafter_public_call</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="EM:470" class="id"><a name="EM:470" class="">EM:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':458">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:454">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:460">ae</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack:444">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:449">bc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:450">res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:451">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:452">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#pc:453">pc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:454">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:455">stk</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:456">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:457">bound</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="sound_stack_private_call" class="id"><a name="sound_stack_private_call" class="">sound_stack_private_call:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="bc:471" class="id"><a name="bc:471" class="">bc:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#block_classification">block_classification</a></span>) <span id="res:472" class="id"><a name="res:472" class="">res</a></span> <span id="f:473" class="id"><a name="f:473" class="">f</a></span> <span id="sp:474" class="id"><a name="sp:474" class="">sp</a></span> <span id="pc:475" class="id"><a name="pc:475" class="">pc</a></span> <span id="e:476" class="id"><a name="e:476" class="">e</a></span> <span id="stk:477" class="id"><a name="stk:477" class="">stk</a></span> <span id="m:478" class="id"><a name="m:478" class="">m</a></span> <span id="bound:479" class="id"><a name="bound:479" class="">bound</a></span> <span id="bc':480" class="id"><a name="bc':480" class="">bc'</a></span> <span id="bound':481" class="id"><a name="bound':481" class="">bound'</a></span> <span id="ae:482" class="id"><a name="ae:482" class="">ae</a></span> <span id="am:483" class="id"><a name="am:483" class="">am</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STK:484" class="id"><a name="STK:484" class="">STK:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack:444">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':480">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:477">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:478">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:474">sp</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="INCR:485" class="id"><a name="INCR:485" class="">INCR:</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound':481">bound'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:479">bound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="BELOW:486" class="id"><a name="BELOW:486" class="">BELOW:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_below">bc_below</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':480">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound':481">bound'</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SP:487" class="id"><a name="SP:487" class="">SP:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:471">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:474">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SP':488" class="id"><a name="SP':488" class="">SP':</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':480">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:474">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SAME:490" class="id"><a name="SAME:490" class="">SAME:</a></span> <span class="gallina-kwd">forall</span> <span id="b:489" class="id"><a name="b:489" class="">b,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:489">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound':481">bound'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:489">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:474">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:471">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:489">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':480">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:489">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="GE:491" class="id"><a name="GE:491" class="">GE:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':480">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.ge">ge</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="AN:492" class="id"><a name="AN:492" class="">AN:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.ge">VA.ge</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:473">f</a></span>)<span class="id">!!pc</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#AE.set">AE.set</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:472">res</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:482">ae</a></span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#mafter_private_call">mafter_private_call</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:483">am</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="EM:493" class="id"><a name="EM:493" class="">EM:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':480">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:476">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:482">ae</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="CONTENTS:494" class="id"><a name="CONTENTS:494" class="">CONTENTS:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc':480">bc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:478">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:474">sp</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:483">am</a></span>.(<span class="id"><a href="compcert.backend.ValueDomain.html#am_stack">am_stack</a></span>))<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack:444">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:471">bc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#res:472">res</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:473">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:474">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#pc:475">pc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:476">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:477">stk</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:478">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:479">bound</a></span>.<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="sound_state_base" class="id"><a name="sound_state_base" class="">sound_state_base:</a></span> <span class="id"><a href="compcert.backend.RTL.html#state">state</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="sound_regular_state" class="id"><a name="sound_regular_state" class="">sound_regular_state:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:497" class="id"><a name="s:497" class="">s</a></span> <span id="f:498" class="id"><a name="f:498" class="">f</a></span> <span id="sp:499" class="id"><a name="sp:499" class="">sp</a></span> <span id="pc:500" class="id"><a name="pc:500" class="">pc</a></span> <span id="e:501" class="id"><a name="e:501" class="">e</a></span> <span id="m:502" class="id"><a name="m:502" class="">m</a></span> <span id="ae:503" class="id"><a name="ae:503" class="">ae</a></span> <span id="am:504" class="id"><a name="am:504" class="">am</a></span> <span id="bc:505" class="id"><a name="bc:505" class="">bc</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STK:506" class="id"><a name="STK:506" class="">STK:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:505">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:497">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:502">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:499">sp</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="AN:507" class="id"><a name="AN:507" class="">AN:</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:498">f</a></span>)<span class="id">!!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:503">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:504">am</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="EM:508" class="id"><a name="EM:508" class="">EM:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:505">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:501">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:503">ae</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RO:509" class="id"><a name="RO:509" class="">RO:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:505">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:502">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MM:510" class="id"><a name="MM:510" class="">MM:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:505">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:502">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:504">am</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="GE:511" class="id"><a name="GE:511" class="">GE:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:505">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.ge">ge</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="SP:512" class="id"><a name="SP:512" class="">SP:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:505">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:499">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state_base:495">sound_state_base</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:497">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:498">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:499">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#pc:500">pc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:501">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:502">m</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="sound_call_state" class="id"><a name="sound_call_state" class="">sound_call_state:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:513" class="id"><a name="s:513" class="">s</a></span> <span id="fd:514" class="id"><a name="fd:514" class="">fd</a></span> <span id="args:515" class="id"><a name="args:515" class="">args</a></span> <span id="m:516" class="id"><a name="m:516" class="">m</a></span> <span id="bc:517" class="id"><a name="bc:517" class="">bc</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STK:518" class="id"><a name="STK:518" class="">STK:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:517">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:513">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:516">m</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:516">m</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="ARGS:520" class="id"><a name="ARGS:520" class="">ARGS:</a></span> <span class="gallina-kwd">forall</span> <span id="v:519" class="id"><a name="v:519" class="">v,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:519">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:515">args</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:517">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:519">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RO:521" class="id"><a name="RO:521" class="">RO:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:517">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:516">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MM:522" class="id"><a name="MM:522" class="">MM:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:517">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:516">m</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mtop">mtop</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="GE:523" class="id"><a name="GE:523" class="">GE:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:517">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.ge">ge</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="NOSTK:524" class="id"><a name="NOSTK:524" class="">NOSTK:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:517">bc</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state_base:495">sound_state_base</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:513">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#fd:514">fd</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:515">args</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:516">m</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="sound_return_state" class="id"><a name="sound_return_state" class="">sound_return_state:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="s:525" class="id"><a name="s:525" class="">s</a></span> <span id="v:526" class="id"><a name="v:526" class="">v</a></span> <span id="m:527" class="id"><a name="m:527" class="">m</a></span> <span id="bc:528" class="id"><a name="bc:528" class="">bc</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="STK:529" class="id"><a name="STK:529" class="">STK:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:528">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:525">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:527">m</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:527">m</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RES:530" class="id"><a name="RES:530" class="">RES:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:528">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:526">v</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vtop">Vtop</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="RO:531" class="id"><a name="RO:531" class="">RO:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:528">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:527">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="MM:532" class="id"><a name="MM:532" class="">MM:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:528">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:527">m</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#mtop">mtop</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="GE:533" class="id"><a name="GE:533" class="">GE:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:528">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.ge">ge</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="NOSTK:534" class="id"><a name="NOSTK:534" class="">NOSTK:</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:528">bc</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state_base:495">sound_state_base</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:525">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:526">v</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:527">m</a></span>).<br/>
<br/>
<div class="doc">Properties of the <span class="bracket"><span class="id">sound_stack</span></span> invariant on call stacks. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="sound_stack_ext" class="id"><a name="sound_stack_ext" class="">sound_stack_ext:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m':535" class="id"><a name="m':535" class="">m'</a></span> <span id="bc:536" class="id"><a name="bc:536" class="">bc</a></span> <span id="stk:537" class="id"><a name="stk:537" class="">stk</a></span> <span id="m:538" class="id"><a name="m:538" class="">m</a></span> <span id="bound:539" class="id"><a name="bound:539" class="">bound,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:536">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:537">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:538">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:539">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b:540" class="id"><a name="b:540" class="">b</a></span> <span id="ofs:541" class="id"><a name="ofs:541" class="">ofs</a></span> <span id="n:542" class="id"><a name="n:542" class="">n</a></span> <span id="bytes:543" class="id"><a name="bytes:543" class="">bytes,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:540">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:539">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:536">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:540">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:542">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':535">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:540">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:541">ofs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:542">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bytes:543">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:538">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:540">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:541">ofs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:542">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bytes:543">bytes</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:536">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:537">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':535">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:539">bound</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span> <span class="id">INV</span>.<br/>
<span class="id">-</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">sp</span> <span class="id">bound'</span>) <span class="gallina-kwd">by</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_public_call">sound_stack_public_call;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">IHsound_stack;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">INV</span>. <span class="id">extlia</span>. <span class="id">rewrite</span> <span class="id">SAME;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">ordered_type</span>. <span class="id">extlia</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">sp</span> <span class="id">bound'</span>) <span class="gallina-kwd">by</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_private_call">sound_stack_private_call;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">IHsound_stack;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">INV</span>. <span class="id">extlia</span>. <span class="id">rewrite</span> <span class="id">SAME;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">ordered_type</span>. <span class="id">extlia</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch_ext">bmatch_ext</a></span> <span class="gallina-kwd">with</span> <span class="id">m;</span> <span class="id">auto</span>. <span class="id">intros</span>. <span class="id">apply</span> <span class="id">INV</span>. <span class="id">extlia</span>. <span class="id">auto</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="sound_stack_inv" class="id"><a name="sound_stack_inv" class="">sound_stack_inv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m':544" class="id"><a name="m':544" class="">m'</a></span> <span id="bc:545" class="id"><a name="bc:545" class="">bc</a></span> <span id="stk:546" class="id"><a name="stk:546" class="">stk</a></span> <span id="m:547" class="id"><a name="m:547" class="">m</a></span> <span id="bound:548" class="id"><a name="bound:548" class="">bound,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:545">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:546">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:547">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:548">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b:549" class="id"><a name="b:549" class="">b</a></span> <span id="ofs:550" class="id"><a name="ofs:550" class="">ofs</a></span> <span id="n:551" class="id"><a name="n:551" class="">n,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:549">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:548">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:545">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:549">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:551">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':544">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:549">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:550">ofs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:551">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:547">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:549">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:550">ofs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:551">n</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:545">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:546">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':544">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:548">bound</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_ext">sound_stack_ext;</a></span> <span class="id">eauto</span>. <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="sound_stack_storev" class="id"><a name="sound_stack_storev" class="">sound_stack_storev:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:552" class="id"><a name="chunk:552" class="">chunk</a></span> <span id="m:553" class="id"><a name="m:553" class="">m</a></span> <span id="addr:554" class="id"><a name="addr:554" class="">addr</a></span> <span id="v:555" class="id"><a name="v:555" class="">v</a></span> <span id="m':556" class="id"><a name="m':556" class="">m'</a></span> <span id="bc:557" class="id"><a name="bc:557" class="">bc</a></span> <span id="aaddr:558" class="id"><a name="aaddr:558" class="">aaddr</a></span> <span id="stk:559" class="id"><a name="stk:559" class="">stk</a></span> <span id="bound:560" class="id"><a name="bound:560" class="">bound,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#chunk:552">chunk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:553">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#addr:554">addr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:555">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':556">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:557">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#addr:554">addr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr:558">aaddr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:557">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:559">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:553">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:560">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:557">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:559">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':556">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:560">bound</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_inv">sound_stack_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">addr;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id">b</span> <span class="id">i</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch_top'">pmatch_top';</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_store_other">Mem.loadbytes_store_other</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">left;</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="sound_stack_storebytes" class="id"><a name="sound_stack_storebytes" class="">sound_stack_storebytes:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:561" class="id"><a name="m:561" class="">m</a></span> <span id="b:562" class="id"><a name="b:562" class="">b</a></span> <span id="ofs:563" class="id"><a name="ofs:563" class="">ofs</a></span> <span id="bytes:564" class="id"><a name="bytes:564" class="">bytes</a></span> <span id="m':565" class="id"><a name="m':565" class="">m'</a></span> <span id="bc:566" class="id"><a name="bc:566" class="">bc</a></span> <span id="aaddr:567" class="id"><a name="aaddr:567" class="">aaddr</a></span> <span id="stk:568" class="id"><a name="stk:568" class="">stk</a></span> <span id="bound:569" class="id"><a name="bound:569" class="">bound,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:561">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:562">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:563">ofs</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#bytes:564">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':565">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:566">bc</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:562">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:563">ofs</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr:567">aaddr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:566">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:568">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:561">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:569">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:566">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:568">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':565">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:569">bound</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_inv">sound_stack_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch_top'">pmatch_top';</a></span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_storebytes_other">Mem.loadbytes_storebytes_other</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">left;</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="sound_stack_free" class="id"><a name="sound_stack_free" class="">sound_stack_free:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:570" class="id"><a name="m:570" class="">m</a></span> <span id="b:571" class="id"><a name="b:571" class="">b</a></span> <span id="lo:572" class="id"><a name="lo:572" class="">lo</a></span> <span id="hi:573" class="id"><a name="hi:573" class="">hi</a></span> <span id="m':574" class="id"><a name="m':574" class="">m'</a></span> <span id="bc:575" class="id"><a name="bc:575" class="">bc</a></span> <span id="stk:576" class="id"><a name="stk:576" class="">stk</a></span> <span id="bound:577" class="id"><a name="bound:577" class="">bound,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:570">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:571">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#lo:572">lo</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#hi:573">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':574">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:575">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:576">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:570">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:577">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:575">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:576">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':574">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:577">bound</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_ext">sound_stack_ext;</a></span> <span class="id">eauto</span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_free_2">Mem.loadbytes_free_2</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="sound_stack_new_bound" class="id"><a name="sound_stack_new_bound" class="">sound_stack_new_bound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:578" class="id"><a name="bc:578" class="">bc</a></span> <span id="stk:579" class="id"><a name="stk:579" class="">stk</a></span> <span id="m:580" class="id"><a name="m:580" class="">m</a></span> <span id="bound:581" class="id"><a name="bound:581" class="">bound</a></span> <span id="bound':582" class="id"><a name="bound':582" class="">bound',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:578">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:579">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:580">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:581">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:581">bound</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound':582">bound'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:578">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:579">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:580">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound':582">bound'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
<span class="id">-</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_public_call">sound_stack_public_call</a></span> <span class="gallina-kwd">with</span> (<span class="id">bound'</span> <span class="id">:=</span> <span class="id">bound'0</span>)<span class="id">;</span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_private_call">sound_stack_private_call</a></span> <span class="gallina-kwd">with</span> (<span class="id">bound'</span> <span class="id">:=</span> <span class="id">bound'0</span>)<span class="id">;</span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="sound_stack_exten" class="id"><a name="sound_stack_exten" class="">sound_stack_exten:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:583" class="id"><a name="bc:583" class="">bc</a></span> <span id="stk:584" class="id"><a name="stk:584" class="">stk</a></span> <span id="m:585" class="id"><a name="m:585" class="">m</a></span> <span id="bound:586" class="id"><a name="bound:586" class="">bound</a></span> (<span id="bc1:587" class="id"><a name="bc1:587" class="">bc1:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#block_classification">block_classification</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:583">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:584">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:585">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:586">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b:588" class="id"><a name="b:588" class="">b,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:588">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:586">bound</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc1:587">bc1</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:588">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:583">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:588">b</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc1:587">bc1</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#stk:584">stk</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:585">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bound:586">bound</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
<span class="id">-</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">sp</span> <span class="id">bound'</span>) <span class="gallina-kwd">by</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_public_call">sound_stack_public_call;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">extlia</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">sp</span> <span class="id">bound'</span>) <span class="gallina-kwd">by</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_private_call">sound_stack_private_call;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<h2> Preservation of the semantic invariant by one step of execution </h2>
<br/>
<span class="vernacular">Lemma</span> <span id="sound_succ_state" class="id"><a name="sound_succ_state" class="">sound_succ_state:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:589" class="id"><a name="bc:589" class="">bc</a></span> <span id="pc:590" class="id"><a name="pc:590" class="">pc</a></span> <span id="ae:591" class="id"><a name="ae:591" class="">ae</a></span> <span id="am:592" class="id"><a name="am:592" class="">am</a></span> <span id="instr:593" class="id"><a name="instr:593" class="">instr</a></span> <span id="ae':594" class="id"><a name="ae':594" class="">ae'</a></span> <span id="am':595" class="id"><a name="am':595" class="">am'</a></span>  <span id="s:596" class="id"><a name="s:596" class="">s</a></span> <span id="f:597" class="id"><a name="f:597" class="">f</a></span> <span id="sp:598" class="id"><a name="sp:598" class="">sp</a></span> <span id="pc':599" class="id"><a name="pc':599" class="">pc'</a></span> <span id="e':600" class="id"><a name="e':600" class="">e'</a></span> <span id="m':601" class="id"><a name="m':601" class="">m',</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:597">f</a></span>)<span class="id">!!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:591">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:592">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#f:597">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#instr:593">instr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#pc':599">pc'</a></span> (<span class="id"><a href="compcert.backend.RTL.html#successors_instr">successors_instr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#instr:593">instr</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:597">f</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#pc:590">pc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:591">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:592">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae':594">ae'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am':595">am'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:589">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e':600">e'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae':594">ae'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:589">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':601">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am':595">am'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:589">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':601">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:589">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:589">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:598">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack">sound_stack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:589">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:596">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':601">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:598">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state_base">sound_state_base</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:596">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:597">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:598">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#pc':599">pc'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e':600">e'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':601">m'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze_succ">analyze_succ;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">ae''</span> &amp; <span class="id">am''</span> &amp; <span class="id">AN</span> &amp; <span class="id">EM</span> &amp; <span class="id">MM</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="sound_step_base" class="id"><a name="sound_step_base" class="">sound_step_base:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="st:602" class="id"><a name="st:602" class="">st</a></span> <span id="t:603" class="id"><a name="t:603" class="">t</a></span> <span id="st':604" class="id"><a name="st':604" class="">st',</a></span> <span class="id"><a href="compcert.backend.RTL.html#step">RTL.step</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st:602">st</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#t:603">t</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st':604">st'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state_base">sound_state_base</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st:602">st</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state_base">sound_state_base</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st':604">st'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros</span> <span class="id">SOUND;</span> <span class="id">inv</span> <span class="id">SOUND</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;nop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;op&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_update">ematch_update;</a></span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_operation_sound">eval_static_operation_sound;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;load&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_update">ematch_update;</a></span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#loadv_sound">loadv_sound;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing_sound">eval_static_addressing_sound;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;store&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing_sound">eval_static_addressing_sound;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>. <span class="id">intros</span> <span class="id">VMADDR</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#storev_sound">storev_sound;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch_store">romatch_store;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_storev">sound_stack_storev;</a></span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">TR:</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id">pc</span> <span class="id">ae</span> <span class="id">am</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer_call">transfer_call</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id">args</span> <span class="id">res</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer_call">transfer_call,</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze_call">analyze_call</a></span> <span class="gallina-kwd">in</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#pincl">pincl</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#am_nonstack">am_nonstack</a></span> <span class="id">am</span>) <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span> &amp;&amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#forallb">forallb</a></span> (<span class="gallina-kwd">fun</span> <span id="av:606" class="id"><span id="av:605" class="id"><a name="av:606" class="">av</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vpincl">vpincl</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:605">av</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aregs">aregs</a></span> <span class="id">ae</span> <span class="id">args</span>)) <span class="id">eqn:NOLEAK</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;private&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvBooleans</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze_successor">analyze_successor;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id">TR</span>. <span class="id">intros</span> <span class="id">SUCC</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#hide_stack">hide_stack;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pincl_ge">pincl_ge;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bc'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_call_state">sound_call_state</a></span> <span class="gallina-kwd">with</span> <span class="id">bc';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_private_call">sound_stack_private_call</a></span> <span class="gallina-kwd">with</span> (<span class="id">bound'</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>) (<span class="id">bc'</span> <span class="id">:=</span> <span class="id">bc</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_stack">mmatch_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">r</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">subst</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">D</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#areg">areg</a></span> <span class="id">ae</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#forallb_forall">forallb_forall</a></span> <span class="gallina-kwd">in</span> <span class="id">H2</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vpincl_ge">vpincl_ge</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H2</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;public&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze_successor">analyze_successor;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id">TR</span>. <span class="id">intros</span> <span class="id">SUCC</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#anonymize_stack">anonymize_stack;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">bc'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_call_state">sound_call_state</a></span> <span class="gallina-kwd">with</span> <span class="id">bc';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_public_call">sound_stack_public_call</a></span> <span class="gallina-kwd">with</span> (<span class="id">bound'</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>) (<span class="id">bc'</span> <span class="id">:=</span> <span class="id">bc</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">r</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">subst</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">D</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#areg">areg</a></span> <span class="id">ae</span> <span class="id">r</span>). <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;tailcall&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#anonymize_stack">anonymize_stack;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">bc'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_call_state">sound_call_state</a></span> <span class="gallina-kwd">with</span> <span class="id">bc';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_new_bound">sound_stack_new_bound</a></span> <span class="gallina-kwd">with</span> <span class="id">stk</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_exten">sound_stack_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_free">sound_stack_free;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">C</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">r</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">subst</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">D</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#areg">areg</a></span> <span class="id">ae</span> <span class="id">r</span>). <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch_free">romatch_free;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_free">mmatch_free;</a></span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;builtin&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SPVALID:</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">sp0</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">TR:</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id">pc</span> <span class="id">ae</span> <span class="id">am</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer_builtin">transfer_builtin</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id">ef</span> <span class="id">args</span> <span class="id">res</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;default&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">DEFAULT:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id">pc</span> <span class="id">ae</span> <span class="id">am</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer_builtin_default">transfer_builtin_default</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id">args</span> <span class="id">res</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state_base">sound_state_base</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id">s</span> <span class="id">f</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp0</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">pc'</span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id">res</span> <span class="id">vres</span> <span class="id">rs</span>) <span class="id">m'</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer_builtin_default">transfer_builtin_default,</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze_call">analyze_call;</a></span> <span class="id">intros</span> <span class="id">TR'</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">aargs</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span>) <span class="id">args</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">ARGS:</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">bc</span>) <span class="id">vargs</span> <span class="id">aargs</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_args_sound">abuiltin_args_sound;</a></span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#pincl">pincl</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#am_nonstack">am_nonstack</a></span> <span class="id">am</span>) <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span> &amp;&amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#forallb">forallb</a></span> (<span class="gallina-kwd">fun</span> <span id="av:608" class="id"><span id="av:607" class="id"><a name="av:608" class="">av</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vpincl">vpincl</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:607">av</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Nonstack">Nonstack</a></span>) <span class="id">aargs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eqn:</span> <span class="id">NOLEAK</span>.<br/>
<span class="id">*</span> <span class="comment">(*&nbsp;private&nbsp;builtin&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvBooleans</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#forallb_forall">forallb_forall</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#hide_stack">hide_stack;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pincl_ge">pincl_ge;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bc1</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#external_call_match">external_call_match;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_in_left">list_forall2_in_left;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">av</span> &amp; <span class="id">U</span> &amp; <span class="id">V</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">D;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vpincl_ge">vpincl_ge</a></span>. <span class="id">apply</span> <span class="id">H3;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bc2</span> &amp; <span class="id">J</span> &amp; <span class="id">K</span> &amp; <span class="id">L</span> &amp; <span class="id">M</span> &amp; <span class="id">N</span> &amp; <span class="id">O</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#return_from_private_call">return_from_private_call</a></span> <span class="id">bc</span> <span class="id">bc2</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">K;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">K;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">C;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch_inv">bmatch_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_stack">mmatch_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">Q;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bc3</span> &amp; <span class="id">U</span> &amp; <span class="id">V</span> &amp; <span class="id">W</span> &amp; <span class="id">X</span> &amp; <span class="id">Y</span> &amp; <span class="id">Z</span> &amp; <span class="id">AA</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state</a></span> <span class="gallina-kwd">with</span> (<span class="id">bc</span> <span class="id">:=</span> <span class="id">bc3</span>)<span class="id">;</span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res_sound">set_builtin_res_sound;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_exten">sound_stack_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_inv">sound_stack_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">Q</span>. <span class="id">red</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans">Plt_trans;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">C;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">ordered_type</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id">AA</span>.<br/>
<span class="id">*</span> <span class="comment">(*&nbsp;public&nbsp;builtin&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#anonymize_stack">anonymize_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bc1</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#external_call_match">external_call_match;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_in_left">list_forall2_in_left;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">av</span> &amp; <span class="id">U</span> &amp; <span class="id">V</span>). <span class="id">eapply</span> <span class="id">D;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bc2</span> &amp; <span class="id">J</span> &amp; <span class="id">K</span> &amp; <span class="id">L</span> &amp; <span class="id">M</span> &amp; <span class="id">N</span> &amp; <span class="id">O</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#return_from_public_call">return_from_public_call</a></span> <span class="id">bc</span> <span class="id">bc2</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">K;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">K;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">C;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bc3</span> &amp; <span class="id">U</span> &amp; <span class="id">V</span> &amp; <span class="id">W</span> &amp; <span class="id">X</span> &amp; <span class="id">Y</span> &amp; <span class="id">Z</span> &amp; <span class="id">AA</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state</a></span> <span class="gallina-kwd">with</span> (<span class="id">bc</span> <span class="id">:=</span> <span class="id">bc3</span>)<span class="id">;</span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res_sound">set_builtin_res_sound;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_exten">sound_stack_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_inv">sound_stack_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">Q</span>. <span class="id">red</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans">Plt_trans;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">C;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">ordered_type</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id">AA</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer_builtin">transfer_builtin</a></span> <span class="gallina-kwd">in</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">ef;</span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;builtin&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Builtins.html#lookup_builtin_function">lookup_builtin_function</a></span> <span class="id">name</span> <span class="id">sg</span>) <span class="gallina-kwd">as</span> <span class="id">[bf|]</span> <span class="id">eqn:LK;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#eval_static_builtin_function">eval_static_builtin_function</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id">bf</span> <span class="id">args</span>) <span class="gallina-kwd">as</span> <span class="id">[av|]</span> <span class="id">eqn:ES;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">rewrite</span> <span class="id">LK</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res_sound">set_builtin_res_sound;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#eval_static_builtin_function_sound">eval_static_builtin_function_sound;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;volatile&nbsp;load&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H3;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg_sound">abuiltin_arg_sound;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">VM1</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res_sound">set_builtin_res_sound;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="comment">(*&nbsp;true&nbsp;volatile&nbsp;access&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">V:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">bc</span> <span class="id">v</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Glob">Glob</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">inv</span> <span class="id">H4;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">constructor</span>. <span class="id">econstructor</span>. <span class="id">eapply</span> <span class="id">GE;</span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#va_strict">va_strict</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>). <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_lub_r">vmatch_lub_r</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vnormalize_sound">vnormalize_sound</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vnormalize_sound">vnormalize_sound</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ge">vmatch_ge;</a></span> <span class="id">eauto</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="comment">(*&nbsp;normal&nbsp;memory&nbsp;access&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueDomain.html#loadv_sound">loadv_sound;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#va_strict">va_strict</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_lub_l">vmatch_lub_l</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vnormalize_cast">vnormalize_cast;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_top">vmatch_top;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;volatile&nbsp;store&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H3;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H4;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg_sound">abuiltin_arg_sound</a></span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="id">intros</span> <span class="id">VM1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg_sound">abuiltin_arg_sound</a></span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="id">intros</span> <span class="id">VM2</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="comment">(*&nbsp;true&nbsp;volatile&nbsp;access&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res_sound">set_builtin_res_sound;</a></span> <span class="id">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_lub_l">mmatch_lub_l;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">*</span> <span class="comment">(*&nbsp;normal&nbsp;memory&nbsp;access&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res_sound">set_builtin_res_sound;</a></span> <span class="id">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_lub_r">mmatch_lub_r</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#storev_sound">storev_sound;</a></span> <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch_store">romatch_store;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_storev">sound_stack_storev;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;memcpy&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H3;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H4;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg_sound">abuiltin_arg_sound</a></span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="id">intros</span> <span class="id">VM1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg_sound">abuiltin_arg_sound</a></span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="id">intros</span> <span class="id">VM2</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res_sound">set_builtin_res_sound;</a></span> <span class="id">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#storebytes_sound">storebytes_sound;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#match_aptr_of_aval">match_aptr_of_aval;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">Mem.loadbytes_length</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#loadbytes_sound">loadbytes_sound;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#match_aptr_of_aval">match_aptr_of_aval;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch_storebytes">romatch_storebytes;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_storebytes">sound_stack_storebytes;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;annot&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res_sound">set_builtin_res_sound;</a></span> <span class="id">auto</span>. <span class="id">constructor</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;annot&nbsp;val&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H3;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res_sound">set_builtin_res_sound;</a></span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg_sound">abuiltin_arg_sound;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;debug&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>. <span class="id">simpl;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#set_builtin_res_sound">set_builtin_res_sound;</a></span> <span class="id">auto</span>. <span class="id">constructor</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;cond&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">destruct</span> <span class="id">b;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;jumptable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_succ_state">sound_succ_state;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_nth_z_in">list_nth_z_in;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#transfer">transfer;</a></span> <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#anonymize_stack">anonymize_stack;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">bc'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_return_state">sound_return_state</a></span> <span class="gallina-kwd">with</span> <span class="id">bc';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_new_bound">sound_stack_new_bound</a></span> <span class="gallina-kwd">with</span> <span class="id">stk</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_exten">sound_stack_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_free">sound_stack_free;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">C</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_below">mmatch_below;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">or;</span> <span class="id">simpl</span>. <span class="id">eapply</span> <span class="id">D;</span> <span class="id">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch_free">romatch_free;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_free">mmatch_free;</a></span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;internal&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#allocate_stack">allocate_stack;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bc'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze_entrypoint">analyze_entrypoint</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id">f</span> <span class="id">args</span> <span class="id">m'</span> <span class="id">bc'</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">ae</span> &amp; <span class="id">am</span> &amp; <span class="id">AN</span> &amp; <span class="id">EM</span> &amp; <span class="id">MM'</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_exten">sound_stack_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_inv">sound_stack_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_alloc_unchanged">Mem.loadbytes_alloc_unchanged</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">F</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;external&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#external_call_match">external_call_match;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bc'</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span> &amp; <span class="id">K</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_new_bound">sound_stack_new_bound</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_exten">sound_stack_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_inv">sound_stack_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock;</a></span> <span class="id">eauto</span>.<br/>
<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STK</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;from&nbsp;public&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#return_from_public_call">return_from_public_call;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">rewrite</span> <span class="id">SAME;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bc1</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id">f</span>)<span class="id">#pc</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|ae'</span> <span class="id">am']</span> <span class="id">eqn:EQ;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">AN;</span> <span class="id">try</span> <span class="id">contradiction</span>. <span class="id">destruct</span> <span class="id">AN</span> <span class="gallina-kwd">as</span> <span class="id">[A1</span> <span class="id">A2]</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_regular_state">sound_regular_state</a></span> <span class="gallina-kwd">with</span> (<span class="id">bc</span> <span class="id">:=</span> <span class="id">bc1</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_exten">sound_stack_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_ge">ematch_ge;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_update">ematch_update</a></span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="comment">(*&nbsp;from&nbsp;private&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#return_from_private_call">return_from_private_call;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">rewrite</span> <span class="id">SAME;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bc1</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS.rm">rm</a></span> <span class="id">f</span>)<span class="id">#pc</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|ae'</span> <span class="id">am']</span> <span class="id">eqn:EQ;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">AN;</span> <span class="id">try</span> <span class="id">contradiction</span>. <span class="id">destruct</span> <span class="id">AN</span> <span class="gallina-kwd">as</span> <span class="id">[A1</span> <span class="id">A2]</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_regular_state">sound_regular_state</a></span> <span class="gallina-kwd">with</span> (<span class="id">bc</span> <span class="id">:=</span> <span class="id">bc1</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_stack_exten">sound_stack_exten</a></span> <span class="gallina-kwd">with</span> <span class="id">bc';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_ge">ematch_ge;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ematch_update">ematch_update</a></span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#SOUNDNESS">SOUNDNESS</a></span>.<br/>
<br/>
<h2> Extension to separate compilation </h2>
<br/>
<div class="doc">Following Kang et al, POPL 2016, we now extend the results above
  to the case where only one compilation unit is analyzed, and not the
  whole program.  </div>
<br/>
<span class="vernacular">Section</span> <span id="LINKING" class="id"><a name="LINKING" class="">LINKING</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="LINKING.prog" class="id"><a name="LINKING.prog" class="">prog:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="vernacular">Let</span> <span id="LINKING.ge" class="id"><a name="LINKING.ge" class="">ge</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#LINKING.prog">prog</a></span>.<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="sound_state" class="id"><a name="sound_state" class="">sound_state:</a></span> <span class="id"><a href="compcert.backend.RTL.html#state">state</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="sound_state_intro" class="id"><a name="sound_state_intro" class="">sound_state_intro:</a></span> <span class="gallina-kwd">forall</span> <span id="st:612" class="id"><a name="st:612" class="">st,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="cunit:613" class="id"><a name="cunit:613" class="">cunit,</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:613">cunit</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#LINKING.prog">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state_base">sound_state_base</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:613">cunit</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#LINKING.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st:612">st</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state:610">sound_state</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st:612">st</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="sound_step" class="id"><a name="sound_step" class="">sound_step:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="st:614" class="id"><a name="st:614" class="">st</a></span> <span id="t:615" class="id"><a name="t:615" class="">t</a></span> <span id="st':616" class="id"><a name="st':616" class="">st',</a></span> <span class="id"><a href="compcert.backend.RTL.html#step">RTL.step</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#LINKING.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st:614">st</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#t:615">t</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st':616">st'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st:614">st</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st':616">st'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_step_base">sound_step_base;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="sound_state_inv" class="id"><a name="sound_state_inv" class="">sound_state_inv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="st:617" class="id"><a name="st:617" class="">st</a></span> <span id="cunit:618" class="id"><a name="cunit:618" class="">cunit,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st:617">st</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:618">cunit</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#LINKING.prog">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state_base">sound_state_base</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:618">cunit</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#LINKING.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st:617">st</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#LINKING">LINKING</a></span>.<br/>
<br/>
<h2> Soundness of the initial memory abstraction </h2>
<br/>
<span class="vernacular">Section</span> <span id="INITIAL" class="id"><a name="INITIAL" class="">INITIAL</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="INITIAL.prog" class="id"><a name="INITIAL.prog" class="">prog:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<br/>
<span class="vernacular">Let</span> <span id="INITIAL.ge" class="id"><a name="INITIAL.ge" class="">ge</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.prog">prog</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="initial_block_classification" class="id"><a name="initial_block_classification" class="">initial_block_classification:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:620" class="id"><a name="m:620" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.prog">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:620">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc:621" class="id"><a name="bc:621" class="">bc,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:621">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_below">bc_below</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:621">bc</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:620">m</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:621">bc</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:622" class="id"><a name="b:622" class="">b</a></span> <span id="id:623" class="id"><a name="id:623" class="">id,</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:621">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:622">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:623">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:623">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:622">b</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:624" class="id"><a name="b:624" class="">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:620">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:624">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:621">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:624">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="b:626" class="id"><span id="b:625" class="id"><a name="b:626" class="">b</a></span></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:625">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span>) <span class="gallina-kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:625">b</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCother">BCother</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id">id</span> <span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_glob:</span> <span class="gallina-kwd">forall</span> <span id="b1:630" class="id"><span id="b1:627" class="id"><a name="b1:630" class="">b1</a></span></span> <span id="b2:631" class="id"><span id="b2:628" class="id"><a name="b2:631" class="">b2</a></span></span> <span id="id:632" class="id"><span id="id:629" class="id"><a name="id:632" class="">id,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:627">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:629">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:628">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:629">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:627">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:628">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span>))<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">b1</span>) <span class="gallina-kwd">as</span> <span class="id">[id1|]</span> <span class="id">eqn:I1;</span> <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b2</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span>))<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">b2</span>) <span class="gallina-kwd">as</span> <span class="id">[id2|]</span> <span class="id">eqn:I2;</span> <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">Genv.invert_find_symbol</a></span>. <span class="id">eexact</span> <span class="id">I1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">Genv.invert_find_symbol</a></span>. <span class="id">eexact</span> <span class="id">I2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F_stack:</span> <span class="gallina-kwd">forall</span> <span id="b1:635" class="id"><span id="b1:633" class="id"><a name="b1:635" class="">b1</a></span></span> <span id="b2:636" class="id"><span id="b2:634" class="id"><a name="b2:636" class="">b2,</a></span></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:633">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">f</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:634">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b1:633">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b2:634">b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span>))<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">b1</span>)<span class="id">;</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">bc</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.ValueDomain.html#BC">BC</a></span> <span class="id">f</span> <span class="id">F_stack</span> <span class="id">F_glob</span>). <span class="id">unfold</span> <span class="id">f</span> <span class="gallina-kwd">in</span> <span class="id">bc</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">bc;</span> <span class="id">splitall</span>.<br/>
<span class="id">-</span> <span class="id">split;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span> <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span><span class="id">;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_invert_symbol">Genv.find_invert_symbol</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">Genv.invert_find_symbol</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span>))<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">b</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span> <span class="gallina-kwd">by</span> <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span>)<span class="id">;</span> <span class="id">split;</span> <span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span>))<span class="id">;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">red;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">b</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span>))<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[id'</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:IS;</span> <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">Genv.invert_find_symbol</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">intros;</span> <span class="id">simpl</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge">ge;</a></span> <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span> <span class="gallina-kwd">by</span> <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.prog">prog</a></span>) <span class="id">b</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="INITIAL.INIT" class="id"><a name="INITIAL.INIT" class="">INIT</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="INITIAL.INIT.bc" class="id"><a name="INITIAL.INIT.bc" class="">bc:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#block_classification">block_classification</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="INITIAL.INIT.GMATCH" class="id"><a name="INITIAL.INIT.GMATCH" class="">GMATCH:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="store_init_data_summary" class="id"><a name="store_init_data_summary" class="">store_init_data_summary:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ab:639" class="id"><a name="ab:639" class="">ab</a></span> <span id="p:640" class="id"><a name="p:640" class="">p</a></span> <span id="id:641" class="id"><a name="id:641" class="">id,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pge">pge</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Glob">Glob</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#ab_summary">ab_summary</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:639">ab</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pge">pge</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Glob">Glob</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#ab_summary">ab_summary</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:639">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:640">p</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:641">id</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">DFL:</span> <span class="gallina-kwd">forall</span> <span id="chunk:644" class="id"><span id="chunk:642" class="id"><a name="chunk:644" class="">chunk</a></span></span> <span id="av:645" class="id"><span id="av:643" class="id"><a name="av:645" class="">av,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vge">vge</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ifptr">Ifptr</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Glob">Glob</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:643">av</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pge">pge</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Glob">Glob</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#ab_summary">ab_summary</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store">ablock_store</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#chunk:642">chunk</a></span> <span class="id">ab</span> <span class="id">p</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#av:643">av</a></span>))).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">simpl</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vplub">vplub;</a></span> <span class="id">destruct</span> <span class="id">av;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#plub_least">plub_least;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#plub_least">plub_least;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">id;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#propagate_float_constants">propagate_float_constants</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#propagate_float_constants">propagate_float_constants</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">DFL</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="store_init_data_list_summary" class="id"><a name="store_init_data_list_summary" class="">store_init_data_list_summary:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="idl:646" class="id"><a name="idl:646" class="">idl</a></span> <span id="ab:647" class="id"><a name="ab:647" class="">ab</a></span> <span id="p:648" class="id"><a name="p:648" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pge">pge</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Glob">Glob</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#ab_summary">ab_summary</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:647">ab</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pge">pge</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Glob">Glob</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#ab_summary">ab_summary</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:647">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:648">p</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idl:646">idl</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">idl;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id">IHidl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_summary">store_init_data_summary;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="store_init_data_sound" class="id"><a name="store_init_data_sound" class="">store_init_data_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:649" class="id"><a name="m:649" class="">m</a></span> <span id="b:650" class="id"><a name="b:650" class="">b</a></span> <span id="p:651" class="id"><a name="p:651" class="">p</a></span> <span id="id:652" class="id"><a name="id:652" class="">id</a></span> <span id="m':653" class="id"><a name="m':653" class="">m'</a></span> <span id="ab:654" class="id"><a name="ab:654" class="">ab,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">Genv.store_init_data</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:649">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:650">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:651">p</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:652">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':653">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:649">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:650">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:654">ab</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':653">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:650">b</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data">store_init_data</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:654">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:651">p</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:652">id</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">id;</span> <span class="id">try</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store_sound">ablock_store_sound;</a></span> <span class="id">eauto;</span> <span class="id">constructor</span>).<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;float32&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#propagate_float_constants">propagate_float_constants</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>)<span class="id">;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store_sound">ablock_store_sound;</a></span> <span class="id">eauto;</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;float64&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#propagate_float_constants">propagate_float_constants</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>)<span class="id">;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store_sound">ablock_store_sound;</a></span> <span class="id">eauto;</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;space&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;addrof&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">i</span>) <span class="gallina-kwd">as</span> <span class="id">[b'|]</span> <span class="id">eqn:FS;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_store_sound">ablock_store_sound;</a></span> <span class="id">eauto</span>. <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.GMATCH">GMATCH;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="store_init_data_list_sound" class="id"><a name="store_init_data_list_sound" class="">store_init_data_list_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="idl:655" class="id"><a name="idl:655" class="">idl</a></span> <span id="m:656" class="id"><a name="m:656" class="">m</a></span> <span id="b:657" class="id"><a name="b:657" class="">b</a></span> <span id="p:658" class="id"><a name="p:658" class="">p</a></span> <span id="m':659" class="id"><a name="m':659" class="">m'</a></span> <span id="ab:660" class="id"><a name="ab:660" class="">ab,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">Genv.store_init_data_list</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:656">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:657">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:658">p</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idl:655">idl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':659">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:656">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:657">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:660">ab</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':659">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:657">b</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_list">store_init_data_list</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:660">ab</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:658">p</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idl:655">idl</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">idl;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">Genv.store_init_data</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">a</span>) <span class="gallina-kwd">as</span> <span class="id">[m1|]</span> <span class="id">eqn:SI;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">IHidl;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_sound">store_init_data_sound;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="store_init_data_other" class="id"><a name="store_init_data_other" class="">store_init_data_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:661" class="id"><a name="m:661" class="">m</a></span> <span id="b:662" class="id"><a name="b:662" class="">b</a></span> <span id="p:663" class="id"><a name="p:663" class="">p</a></span> <span id="id:664" class="id"><a name="id:664" class="">id</a></span> <span id="m':665" class="id"><a name="m':665" class="">m'</a></span> <span id="ab:666" class="id"><a name="ab:666" class="">ab</a></span> <span id="b':667" class="id"><a name="b':667" class="">b',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">Genv.store_init_data</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:661">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:662">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:663">p</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:664">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':665">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#b':667">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:662">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:661">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b':667">b'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:666">ab</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':665">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b':667">b'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:666">ab</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch_inv">bmatch_inv;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">id;</span> <span class="id">try</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_store_other">Mem.loadbytes_store_other</a></span><span class="id">;</span> <span class="id">eauto;</span> <span class="id">fail</span>)<span class="id">;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">i</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_store_other">Mem.loadbytes_store_other</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="store_init_data_list_other" class="id"><a name="store_init_data_list_other" class="">store_init_data_list_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:668" class="id"><a name="b:668" class="">b</a></span> <span id="b':669" class="id"><a name="b':669" class="">b'</a></span> <span id="ab:670" class="id"><a name="ab:670" class="">ab</a></span> <span id="idl:671" class="id"><a name="idl:671" class="">idl</a></span> <span id="m:672" class="id"><a name="m:672" class="">m</a></span> <span id="p:673" class="id"><a name="p:673" class="">p</a></span> <span id="m':674" class="id"><a name="m':674" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">Genv.store_init_data_list</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:672">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:668">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:673">p</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idl:671">idl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':674">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#b':669">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:668">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:672">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b':669">b'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:670">ab</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':674">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b':669">b'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:670">ab</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">idl;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data">Genv.store_init_data</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">a</span>) <span class="gallina-kwd">as</span> <span class="id">[m1|]</span> <span class="id">eqn:SI;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">IHidl;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_other">store_init_data_other;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="store_zeros_same" class="id"><a name="store_zeros_same" class="">store_zeros_same:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:675" class="id"><a name="p:675" class="">p</a></span> <span id="m:676" class="id"><a name="m:676" class="">m</a></span> <span id="b:677" class="id"><a name="b:677" class="">b</a></span> <span id="pos:678" class="id"><a name="pos:678" class="">pos</a></span> <span id="n:679" class="id"><a name="n:679" class="">n</a></span> <span id="m':680" class="id"><a name="m':680" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:676">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:677">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#pos:678">pos</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:679">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':680">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:676">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:677">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:675">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#smatch">smatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':680">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:677">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:675">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">n</span>. <span class="id">functional</span> <span class="id">induction</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">pos</span> <span class="id">n</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id">IHo;</span> <span class="id">eauto</span>. <span class="id">change</span> <span class="id">p</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vplub">vplub</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#I">I</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>) <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#smatch_store">smatch_store;</a></span> <span class="id">eauto</span>. <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="store_zeros_other" class="id"><a name="store_zeros_other" class="">store_zeros_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':681" class="id"><a name="b':681" class="">b'</a></span> <span id="ab:682" class="id"><a name="ab:682" class="">ab</a></span> <span id="m:683" class="id"><a name="m:683" class="">m</a></span> <span id="b:684" class="id"><a name="b:684" class="">b</a></span> <span id="p:685" class="id"><a name="p:685" class="">p</a></span> <span id="n:686" class="id"><a name="n:686" class="">n</a></span> <span id="m':687" class="id"><a name="m':687" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:683">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:684">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#p:685">p</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#n:686">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':687">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#b':681">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:684">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:683">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b':681">b'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:682">ab</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':687">m'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b':681">b'</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:682">ab</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">n</span>. <span class="id">functional</span> <span class="id">induction</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">p</span> <span class="id">n</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">eapply</span> <span class="id">IHo;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch_inv">bmatch_inv;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_store_other">Mem.loadbytes_store_other</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="initial_mem_match" class="id"><a name="initial_mem_match" class="">initial_mem_match</a></span> (<span id="bc:688" class="id"><a name="bc:688" class="">bc:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#block_classification">block_classification</a></span>) (<span id="m:689" class="id"><a name="m:689" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span id="g:690" class="id"><a name="g:690" class="">g:</a></span> <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:691" class="id"><a name="id:691" class="">id</a></span> <span id="b:692" class="id"><a name="b:692" class="">b</a></span> <span id="v:693" class="id"><a name="v:693" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#g:690">g</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#id:691">id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:692">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#g:690">g</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:692">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:693">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#v:693">v</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:693">v</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_readonly">gvar_readonly</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#bmatch">bmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:688">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:689">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:692">b</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_list">store_init_data_list</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#ablock_init">ablock_init</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Pbot">Pbot</a></span>) <span class="id">0</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:693">v</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>)).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="alloc_global_match" class="id"><a name="alloc_global_match" class="">alloc_global_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:694" class="id"><a name="m:694" class="">m</a></span> <span id="g:695" class="id"><a name="g:695" class="">g</a></span> <span id="idg:696" class="id"><a name="idg:696" class="">idg</a></span> <span id="m':697" class="id"><a name="m':697" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#g:695">g</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:694">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#initial_mem_match">initial_mem_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:694">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#g:695">g</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">Genv.alloc_global</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:694">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idg:696">idg</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':697">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#initial_mem_match">initial_mem_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':697">m'</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_global">Genv.add_global</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#g:695">g</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idg:696">idg</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">idg</span> <span class="gallina-kwd">as</span> <span class="id">[id1</span> <span class="id">[fd</span> <span class="id">|</span> <span class="id">gv]];</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> <span class="id">0</span> <span class="id">1</span>) <span class="gallina-kwd">as</span> <span class="id">[m1</span> <span class="id">b1]</span> <span class="id">eqn:ALLOC</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="gallina-kwd">in</span> <span class="id">H2;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span><span class="id">,</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="gallina-kwd">in</span> <span class="id">H3;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H2</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">id1</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span>. <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id">g</span>)) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span><span class="id">;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span> <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne;</a></span> <span class="id">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span> <span class="id">b</span>) <span class="gallina-kwd">by</span> (<span class="id">red;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H;</span> <span class="id">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">b1</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">Mem.valid_not_valid_diff</a></span> <span class="gallina-kwd">with</span> <span class="id">m;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch_inv">bmatch_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n0</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_drop">Mem.loadbytes_drop</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_alloc_unchanged">Mem.loadbytes_alloc_unchanged</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">set</span> (<span class="id">sz</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> (<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">gv</span>)) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">m</span> <span class="id">0</span> <span class="id">sz</span>) <span class="gallina-kwd">as</span> <span class="id">[m1</span> <span class="id">b1]</span> <span class="id">eqn:ALLOC</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#store_zeros">store_zeros</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">0</span> <span class="id">sz</span>) <span class="gallina-kwd">as</span> <span class="id">[m2</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:STZ;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.store_init_data_list">Genv.store_init_data_list</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">0</span> (<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">gv</span>)) <span class="gallina-kwd">as</span> <span class="id">[m3</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:SIDL;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="gallina-kwd">in</span> <span class="id">H2;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span><span class="id">,</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="gallina-kwd">in</span> <span class="id">H3;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H2</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">id1</span>).<br/>
<span class="id">+</span> <span class="id">injection</span> <span class="id">H2;</span> <span class="id">clear</span> <span class="id">H2;</span> <span class="id">intro</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span>. <span class="id">injection</span> <span class="id">H3;</span> <span class="id">clear</span> <span class="id">H3;</span> <span class="id">intros</span> <span class="id">EQ';</span> <span class="id">subst</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">b1</span>). <span class="id">{</span> <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">congruence</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">clear</span> <span class="id">EQ</span>. <span class="id">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch_inv">bmatch_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m3</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_list_sound">store_init_data_list_sound;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#ablock_init_sound">ablock_init_sound</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#store_zeros_same">store_zeros_same;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_alloc_same">Mem.load_alloc_same</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">EQ;</span> <span class="id">subst</span> <span class="id">v;</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_alloc_same">Mem.loadbytes_alloc_same</a></span><span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_drop">Mem.loadbytes_drop</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">right;</span> <span class="id">right</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">Genv.perm_globvar</a></span>. <span class="id">rewrite</span> <span class="id">H4,</span> <span class="id">H5</span>. <span class="id">constructor</span>.<br/>
<span class="id">+</span> <span class="id">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id">g</span>)) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span><span class="id">;</span> <span class="id">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span> <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne;</a></span> <span class="id">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span> <span class="id">b</span>) <span class="gallina-kwd">by</span> (<span class="id">red;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H;</span> <span class="id">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">b1</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">Mem.valid_not_valid_diff</a></span> <span class="gallina-kwd">with</span> <span class="id">m;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch_inv">bmatch_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m3</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_list_other">store_init_data_list_other;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#store_zeros_other">store_zeros_other;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bmatch_inv">bmatch_inv</a></span> <span class="gallina-kwd">with</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_alloc_unchanged">Mem.loadbytes_alloc_unchanged</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_drop">Mem.loadbytes_drop</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="alloc_globals_match" class="id"><a name="alloc_globals_match" class="">alloc_globals_match:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="gl:698" class="id"><a name="gl:698" class="">gl</a></span> <span id="m:699" class="id"><a name="m:699" class="">m</a></span> <span id="g:700" class="id"><a name="g:700" class="">g</a></span> <span id="m':701" class="id"><a name="m':701" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#g:700">g</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:699">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#initial_mem_match">initial_mem_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:699">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#g:700">g</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_globals">Genv.alloc_globals</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:699">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#gl:698">gl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':701">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#initial_mem_match">initial_mem_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m':701">m'</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.add_globals">Genv.add_globals</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#g:700">g</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#gl:698">gl</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">gl;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global">Genv.alloc_global</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span> <span class="id">m</span> <span class="id">a</span>) <span class="gallina-kwd">as</span> <span class="id">[m1|]</span> <span class="id">eqn:AG;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">IHgl;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.alloc_global_nextblock">Genv.alloc_global_nextblock</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">simpl</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#alloc_global_match">alloc_global_match;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="romem_consistent" class="id"><a name="romem_consistent" class="">romem_consistent</a></span> (<span id="defmap:702" class="id"><a name="defmap:702" class="">defmap:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> (<span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>)) (<span id="rm:703" class="id"><a name="rm:703" class="">rm:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romem">romem</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:704" class="id"><a name="id:704" class="">id</a></span> <span id="ab:705" class="id"><a name="ab:705" class="">ab,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:703">rm!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:705">ab</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v:706" class="id"><a name="v:706" class="">v,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#defmap:702">defmap!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:706">v</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:706">v</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_readonly">gvar_readonly</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:706">v</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#definitive_initializer">definitive_initializer</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:706">v</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ab:705">ab</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_list">store_init_data_list</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#ablock_init">ablock_init</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Pbot">Pbot</a></span>) <span class="id">0</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#v:706">v</a></span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="alloc_global_consistent" class="id"><a name="alloc_global_consistent" class="">alloc_global_consistent:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="dm:707" class="id"><a name="dm:707" class="">dm</a></span> <span id="rm:708" class="id"><a name="rm:708" class="">rm</a></span> <span id="idg:709" class="id"><a name="idg:709" class="">idg,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_consistent">romem_consistent</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#dm:707">dm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:708">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_consistent">romem_consistent</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idg:709">idg</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idg:709">idg</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#dm:707">dm</a></span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#alloc_global">alloc_global</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:708">rm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idg:709">idg</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">destruct</span> <span class="id">idg</span> <span class="gallina-kwd">as</span> <span class="id">[id1</span> <span class="id">[f1</span> <span class="id">|</span> <span class="id">v1]];</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">id</span> <span class="id">id1</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.AST.html#gvar_readonly">gvar_readonly</a></span> <span class="id">v1</span> &amp;&amp; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span> <span class="id">v1</span>) &amp;&amp; <span class="id"><a href="compcert.backend.ValueAnalysis.html#definitive_initializer">definitive_initializer</a></span> (<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v1</span>)) <span class="id">eqn:RO</span>.<br/>
<span class="id">+</span> <span class="id">InvBooleans</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#negb_true_iff">negb_true_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">id1</span>).<br/>
<span class="id">*</span> <span class="id">inv</span> <span class="id">H0</span>. <span class="gallina-kwd">exists</span> <span class="id">v1;</span> <span class="id">auto</span>.<br/>
<span class="id">*</span> <span class="id">apply</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">id</span> <span class="id">id1</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="romem_for_consistent" class="id"><a name="romem_for_consistent" class="">romem_for_consistent:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cunit:710" class="id"><a name="cunit:710" class="">cunit,</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_consistent">romem_consistent</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:710">cunit</a></span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:710">cunit</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">REC:</span> <span class="gallina-kwd">forall</span> <span id="l:716" class="id"><span id="l:711" class="id"><a name="l:716" class="">l</a></span></span> <span id="dm:717" class="id"><span id="dm:712" class="id"><a name="dm:717" class="">dm</a></span></span> <span id="rm:718" class="id"><span id="rm:713" class="id"><a name="rm:718" class="">rm,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_consistent">romem_consistent</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#dm:712">dm</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:713">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_consistent">romem_consistent</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="m:719" class="id"><span id="m:714" class="id"><a name="m:719" class="">m</a></span></span> <span id="idg:720" class="id"><span id="idg:715" class="id"><a name="idg:720" class="">idg</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idg:715">idg</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#idg:715">idg</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:714">m</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#l:711">l</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#dm:712">dm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#alloc_global">alloc_global</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#l:711">l</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:713">rm</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">induction</span> <span class="id">l;</span> <span class="id">intros;</span> <span class="id">simpl;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id">IHl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#alloc_global_consistent">alloc_global_consistent;</a></span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">REC</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="romem_for_consistent_2" class="id"><a name="romem_for_consistent_2" class="">romem_for_consistent_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cunit:721" class="id"><a name="cunit:721" class="">cunit,</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:721">cunit</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.prog">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_consistent">romem_consistent</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.prog">prog</a></span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:721">cunit</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for_consistent">romem_for_consistent</a></span> <span class="id">cunit</span>)<span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">v</span> &amp; <span class="id">DM</span> &amp; <span class="id">RO</span> &amp; <span class="id">VO</span> &amp; <span class="id">DEFN</span> &amp; <span class="id">AB</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Linking.html#prog_defmap_linkorder">prog_defmap_linkorder</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">DM</span>) <span class="gallina-kwd">as</span> (<span class="id">gd</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">gd</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">v</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">inv</span> <span class="id">Q</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">f_equal</span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">info1,</span> <span class="id">info2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3;</span> <span class="id">auto;</span> <span class="id">discriminate</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">gd</span>. <span class="gallina-kwd">exists</span> <span class="id">v;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.INIT">INIT</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="initial_mem_matches" class="id"><a name="initial_mem_matches" class="">initial_mem_matches:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:722" class="id"><a name="m:722" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.prog">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:722">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc:723" class="id"><a name="bc:723" class="">bc,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:723">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_below">bc_below</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:723">bc</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:722">m</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc_nostack">bc_nostack</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:723">bc</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="cunit:724" class="id"><a name="cunit:724" class="">cunit,</a></span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:724">cunit</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.prog">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:723">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:722">m</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:724">cunit</a></span>))<br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:725" class="id"><a name="b:725" class="">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:722">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:725">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:723">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:725">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCinvalid">BCinvalid</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#initial_block_classification">initial_block_classification;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">bc</span> &amp; <span class="id">GE</span> &amp; <span class="id">BELOW</span> &amp; <span class="id">NOSTACK</span> &amp; <span class="id">INV</span> &amp; <span class="id">VALID</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">bc;</span> <span class="id">splitall;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#initial_mem_match">initial_mem_match</a></span> <span class="id">bc</span> <span class="id">m</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.ge">ge</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#alloc_globals_match">alloc_globals_match</a></span> <span class="gallina-kwd">with</span> (<span class="id">m</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span><span class="id">;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">B:</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_consistent">romem_consistent</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL.prog">prog</a></span>) (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id">cunit</span>)) <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for_consistent_2">romem_for_consistent_2;</a></span> <span class="id">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">B;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">v</span> &amp; <span class="id">DM</span> &amp; <span class="id">RO</span> &amp; <span class="id">NVOL</span> &amp; <span class="id">DEFN</span> &amp; <span class="id">EQ</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span> <span class="gallina-kwd">in</span> <span class="id">DM</span>. <span class="id">destruct</span> <span class="id">DM</span> <span class="gallina-kwd">as</span> (<span class="id">b1</span> &amp; <span class="id">FS</span> &amp; <span class="id">FD</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_iff">Genv.find_var_info_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">FD</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">b1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">b</span>). <span class="id">{</span> <span class="id">apply</span> <span class="id">INV</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge">ge</a></span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">congruence</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b1</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">subst</span> <span class="id">ab</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#store_init_data_list_summary">store_init_data_list_summary</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">subst</span> <span class="id">ab</span>. <span class="id">eapply</span> <span class="id">A;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization">Genv.init_mem_characterization</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id">Q;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[U</span> <span class="id">V]</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">Genv.perm_globvar</a></span> <span class="gallina-kwd">in</span> <span class="id">V;</span> <span class="id">rewrite</span> <span class="id">RO,</span> <span class="id">NVOL</span> <span class="gallina-kwd">in</span> <span class="id">V</span>. <span class="id">inv</span> <span class="id">V</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#INITIAL">INITIAL</a></span>.<br/>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="vernacular">Axioms</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="sound_initial" class="id"><a name="sound_initial" class="">sound_initial:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="prog:726" class="id"><a name="prog:726" class="">prog</a></span> <span id="st:727" class="id"><a name="st:727" class="">st,</a></span> <span class="id"><a href="compcert.backend.RTL.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:726">prog</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st:727">st</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:726">prog</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#st:727">st</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#initial_mem_matches">initial_mem_matches;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">bc</span> &amp; <span class="id">GE</span> &amp; <span class="id">BELOW</span> &amp; <span class="id">NOSTACK</span> &amp; <span class="id">RM</span> &amp; <span class="id">VALID</span>).<br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_call_state">sound_call_state</a></span> <span class="gallina-kwd">with</span> <span class="id">bc</span>.<br/>
<span class="id">-</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">simpl;</span> <span class="id">tauto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id">RM;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mmatch_inj_top">mmatch_inj_top</a></span> <span class="gallina-kwd">with</span> <span class="id">m0</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#inj_of_bc">inj_of_bc</a></span> <span class="id">bc</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>)).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.initmem_inject">Genv.initmem_inject</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">symmetry;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#extensionality">extensionality;</a></span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span><span class="id">;</span> <span class="id">intros</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#inj_of_bc_valid">inj_of_bc_valid;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueDomain.html#inj_of_bc">inj_of_bc</a></span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_below_invalid">bc_below_invalid;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">exact</span> <span class="id">GE</span>.<br/>
<span class="id">-</span> <span class="id">exact</span> <span class="id">NOSTACK</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">areg_sound</span> <span class="id">aregs_sound:</span> <span class="id">va</span>.<br/>
<br/>
<h1> Interface with other optimizations </h1>
<br/>
<span class="vernacular">Ltac</span> <span class="id">InvSoundState</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">goal</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">H1:</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id">?prog</span> <span class="id">?st,</span> <span class="id">H2:</span> <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id">?cunit</span> <span class="id">?prog</span> <span class="id">|-</span> <span class="id">_</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span class="id">S</span> <span class="id">:=</span> <span class="id">fresh</span> <span class="id">&quot;S&quot;</span> <span class="gallina-kwd">in</span> <span class="id">generalize</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state_inv">sound_state_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> <span class="id">H2</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">S;</span> <span class="id">inv</span> <span class="id">S</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="avalue" class="id"><a name="avalue" class="">avalue</a></span> (<span id="a:728" class="id"><a name="a:728" class="">a:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.t">VA.t</a></span>) (<span id="r:729" class="id"><a name="r:729" class="">r:</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aval">aval</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:728">a</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.Bot">VA.Bot</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Vbot">Vbot</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#r:729">r</a></span> <span class="id">ae</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="avalue_sound" class="id"><a name="avalue_sound" class="">avalue_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cunit:731" class="id"><a name="cunit:731" class="">cunit</a></span> <span id="prog:732" class="id"><a name="prog:732" class="">prog</a></span> <span id="s:733" class="id"><a name="s:733" class="">s</a></span> <span id="f:734" class="id"><a name="f:734" class="">f</a></span> <span id="sp:735" class="id"><a name="sp:735" class="">sp</a></span> <span id="pc:736" class="id"><a name="pc:736" class="">pc</a></span> <span id="e:737" class="id"><a name="e:737" class="">e</a></span> <span id="m:738" class="id"><a name="m:738" class="">m</a></span> <span id="r:739" class="id"><a name="r:739" class="">r,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:732">prog</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:733">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:734">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:735">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#pc:736">pc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:737">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:738">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:731">cunit</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:732">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc:740" class="id"><a name="bc:740" class="">bc,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:740">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:737">e#r</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#avalue">avalue</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:731">cunit</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:734">f</a></span>)<span class="id">!!pc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#r:739">r</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:740">bc</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:732">prog</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:740">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:735">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">InvSoundState</span>. <span class="gallina-kwd">exists</span> <span class="id">bc;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">AN</span>. <span class="id">apply</span> <span class="id">EM</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="aaddr" class="id"><a name="aaddr" class="">aaddr</a></span> (<span id="a:741" class="id"><a name="a:741" class="">a:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.t">VA.t</a></span>) (<span id="r:742" class="id"><a name="r:742" class="">r:</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aptr">aptr</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:741">a</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.Bot">VA.Bot</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Pbot">Pbot</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aptr_of_aval">aptr_of_aval</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#r:742">r</a></span> <span class="id">ae</span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="aaddr_sound" class="id"><a name="aaddr_sound" class="">aaddr_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cunit:744" class="id"><a name="cunit:744" class="">cunit</a></span> <span id="prog:745" class="id"><a name="prog:745" class="">prog</a></span> <span id="s:746" class="id"><a name="s:746" class="">s</a></span> <span id="f:747" class="id"><a name="f:747" class="">f</a></span> <span id="sp:748" class="id"><a name="sp:748" class="">sp</a></span> <span id="pc:749" class="id"><a name="pc:749" class="">pc</a></span> <span id="e:750" class="id"><a name="e:750" class="">e</a></span> <span id="m:751" class="id"><a name="m:751" class="">m</a></span> <span id="r:752" class="id"><a name="r:752" class="">r</a></span> <span id="b:753" class="id"><a name="b:753" class="">b</a></span> <span id="ofs:754" class="id"><a name="ofs:754" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:745">prog</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:746">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:747">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:748">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#pc:749">pc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:750">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:751">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:744">cunit</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:745">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#e:750">e#r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:753">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:754">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc:755" class="id"><a name="bc:755" class="">bc,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:755">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:753">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:754">ofs</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr">aaddr</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:744">cunit</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:747">f</a></span>)<span class="id">!!pc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#r:752">r</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:755">bc</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:745">prog</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:755">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:748">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">InvSoundState</span>. <span class="gallina-kwd">exists</span> <span class="id">bc;</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr">aaddr;</a></span> <span class="id">rewrite</span> <span class="id">AN</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#match_aptr_of_aval">match_aptr_of_aval</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H1</span>. <span class="id">apply</span> <span class="id">EM</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="aaddressing" class="id"><a name="aaddressing" class="">aaddressing</a></span> (<span id="a:756" class="id"><a name="a:756" class="">a:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.t">VA.t</a></span>) (<span id="addr:757" class="id"><a name="addr:757" class="">addr:</a></span> <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span>) (<span id="args:758" class="id"><a name="args:758" class="">args:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aptr">aptr</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:756">a</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.Bot">VA.Bot</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Pbot">Pbot</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aptr_of_aval">aptr_of_aval</a></span> (<span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing">eval_static_addressing</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#addr:757">addr</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aregs">aregs</a></span> <span class="id">ae</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:758">args</a></span>))<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="aaddressing_sound" class="id"><a name="aaddressing_sound" class="">aaddressing_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cunit:760" class="id"><a name="cunit:760" class="">cunit</a></span> <span id="prog:761" class="id"><a name="prog:761" class="">prog</a></span> <span id="s:762" class="id"><a name="s:762" class="">s</a></span> <span id="f:763" class="id"><a name="f:763" class="">f</a></span> <span id="sp:764" class="id"><a name="sp:764" class="">sp</a></span> <span id="pc:765" class="id"><a name="pc:765" class="">pc</a></span> <span id="e:766" class="id"><a name="e:766" class="">e</a></span> <span id="m:767" class="id"><a name="m:767" class="">m</a></span> <span id="addr:768" class="id"><a name="addr:768" class="">addr</a></span> <span id="args:769" class="id"><a name="args:769" class="">args</a></span> <span id="b:770" class="id"><a name="b:770" class="">b</a></span> <span id="ofs:771" class="id"><a name="ofs:771" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:761">prog</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:762">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:763">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:764">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#pc:765">pc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:766">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:767">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:760">cunit</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:761">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:761">prog</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:764">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#addr:768">addr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:766">e##args</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:770">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:771">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc:772" class="id"><a name="bc:772" class="">bc,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:772">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:770">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:771">ofs</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddressing">aaddressing</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:760">cunit</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:763">f</a></span>)<span class="id">!!pc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#addr:768">addr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#args:769">args</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:772">bc</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:761">prog</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:772">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:764">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">InvSoundState</span>. <span class="gallina-kwd">exists</span> <span class="id">bc;</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddressing">aaddressing</a></span>. <span class="id">rewrite</span> <span class="id">AN</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#match_aptr_of_aval">match_aptr_of_aval</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing_sound">eval_static_addressing_sound;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">va</span>.<br/>
Qed.</div>
<br/>
<div class="doc">This is a less precise version of <span class="bracket"><span class="id">abuiltin_arg</span></span>, where memory
    contents are not taken into account. </div>
<br/>
<span class="vernacular">Definition</span> <span id="aaddr_arg" class="id"><a name="aaddr_arg" class="">aaddr_arg</a></span> (<span id="a:773" class="id"><a name="a:773" class="">a:</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.t">VA.t</a></span>) (<span id="ba:774" class="id"><a name="ba:774" class="">ba:</a></span> <span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aptr">aptr</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:773">a</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.Bot">VA.Bot</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Pbot">Pbot</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ba:774">ba</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA">BA</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#aptr_of_aval">aptr_of_aval</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id">r</span> <span class="id">ae</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_addrstack">BA_addrstack</a></span> <span class="id">ofs</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#BA_addrglobal">BA_addrglobal</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span> <span class="id">ofs</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> <span class="id">id</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="aaddr_arg_sound_1" class="id"><a name="aaddr_arg_sound_1" class="">aaddr_arg_sound_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bc:777" class="id"><a name="bc:777" class="">bc</a></span> <span id="rs:778" class="id"><a name="rs:778" class="">rs</a></span> <span id="ae:779" class="id"><a name="ae:779" class="">ae</a></span> <span id="m:780" class="id"><a name="m:780" class="">m</a></span> <span id="rm:781" class="id"><a name="rm:781" class="">rm</a></span> <span id="am:782" class="id"><a name="am:782" class="">am</a></span> <span id="ge:783" class="id"><a name="ge:783" class="">ge</a></span> <span id="sp:784" class="id"><a name="sp:784" class="">sp</a></span> <span id="a:785" class="id"><a name="a:785" class="">a</a></span> <span id="b:786" class="id"><a name="b:786" class="">b</a></span> <span id="ofs:787" class="id"><a name="ofs:787" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:777">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rs:778">rs</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:779">ae</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#romatch">romatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:777">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:780">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rm:781">rm</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#mmatch">mmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:777">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:780">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:782">am</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:777">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:783">ge</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:777">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:784">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ge:783">ge</a></span> (<span class="gallina-kwd">fun</span> <span id="r:788" class="id"><a name="r:788" class="">r</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#rs:778">rs</a></span> <span class="id"><a href="compcert.backend.Registers.html#b7fcd9d9cea39780b0b643c430ee0981">#</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#r:788">r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:784">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:780">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:785">a</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:786">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:787">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:777">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:786">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:787">ofs</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr_arg">aaddr_arg</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ae:779">ae</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#am:782">am</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:785">a</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch_ge">pmatch_ge</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#aptr_of_aval">aptr_of_aval</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg">abuiltin_arg</a></span> <span class="id">ae</span> <span class="id">am</span> <span class="id">rm</span> <span class="id">a</span>)).<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">destruct</span> <span class="id">a;</span> <span class="id">try</span> (<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pge_top">pge_top</a></span>)<span class="id">;</span> <span class="id">simpl;</span> <span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pge_refl">pge_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#match_aptr_of_aval">match_aptr_of_aval</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#abuiltin_arg_sound">abuiltin_arg_sound;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="aaddr_arg_sound" class="id"><a name="aaddr_arg_sound" class="">aaddr_arg_sound:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cunit:789" class="id"><a name="cunit:789" class="">cunit</a></span> <span id="prog:790" class="id"><a name="prog:790" class="">prog</a></span> <span id="s:791" class="id"><a name="s:791" class="">s</a></span> <span id="f:792" class="id"><a name="f:792" class="">f</a></span> <span id="sp:793" class="id"><a name="sp:793" class="">sp</a></span> <span id="pc:794" class="id"><a name="pc:794" class="">pc</a></span> <span id="e:795" class="id"><a name="e:795" class="">e</a></span> <span id="m:796" class="id"><a name="m:796" class="">m</a></span> <span id="a:797" class="id"><a name="a:797" class="">a</a></span> <span id="b:798" class="id"><a name="b:798" class="">b</a></span> <span id="ofs:799" class="id"><a name="ofs:799" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:790">prog</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#s:791">s</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:792">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:793">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#pc:794">pc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:795">e</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:796">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:789">cunit</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:790">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:790">prog</a></span>) (<span class="gallina-kwd">fun</span> <span id="r:800" class="id"><a name="r:800" class="">r</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#e:795">e#r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:793">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#m:796">m</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:797">a</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:798">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:799">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bc:801" class="id"><a name="bc:801" class="">bc,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:801">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#b:798">b</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#ofs:799">ofs</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr_arg">aaddr_arg</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#analyze">analyze</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#cunit:789">cunit</a></span>) <span class="id"><a href="compcert.backend.ValueAnalysis.html#f:792">f</a></span>)<span class="id">!!pc</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#a:797">a</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:801">bc</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#prog:790">prog</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#bc:801">bc</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sp:793">sp</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">InvSoundState</span>. <span class="id">rewrite</span> <span class="id">AN</span>. <span class="gallina-kwd">exists</span> <span class="id">bc;</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr_arg_sound_1">aaddr_arg_sound_1;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
