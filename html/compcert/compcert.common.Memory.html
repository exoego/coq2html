
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Memory</title>
<meta name="description" content="Documentation of Coq module Memory" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module Memory</h1>
<br/>
<div class="doc">This file develops the memory model that is used in the dynamic
  semantics of all the languages used in the compiler.
  It defines a type <span class="bracket"><span class="id">mem</span></span> of memory states, the following 4 basic
  operations over memory states, and their properties:
<ul>
<li>
 <span class="bracket"><span class="id">load</span></span>: read a memory chunk at a given address;
</li>
<li>
 <span class="bracket"><span class="id">store</span></span>: store a memory chunk at a given address;
</li>
<li>
 <span class="bracket"><span class="id">alloc</span></span>: allocate a fresh memory block;
</li>
<li>
 <span class="bracket"><span class="id">free</span></span>: invalidate a memory block.
</li>
</ul>
</div>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zwf.html">Zwf</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="vernacular">Axioms</span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<span class="vernacular">Require</span> <span class="id"><a href="compcert.lib.Intv.html">Intv</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span>.<br/>
<span class="vernacular">Require</span> <span class="id"><a href="compcert.x86_64.Archi.html">Archi</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Export</span> <span class="id"><a href="compcert.common.Memdata.html">Memdata</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Export</span> <span class="id"><a href="compcert.common.Memtype.html">Memtype</a></span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Unset</span> <span class="id">Elimination</span> <span class="id">Schemes</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Unset</span> <span class="id">Case</span> <span class="id">Analysis</span> <span class="id">Schemes</span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Notation</span> <span id="c315e69cfe64a7553bd8eefc2c065fa3" class="id"><a name="c315e69cfe64a7553bd8eefc2c065fa3" class="">&quot;a # b&quot;</a></span> <span class="id">:=</span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id">b</span> <span class="id">a</span>) (<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">1</span>).<br/>
<br/>
<span class="vernacular">Module</span> <span id="Mem" class="id"><a name="Mem" class="">Mem</a></span> <span class="id">&lt;:</span> <span class="id"><a href="compcert.common.Memtype.html#MEM">MEM</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.perm_order'" class="id"><a name="Mem.perm_order'" class="">perm_order'</a></span> (<span id="po:1" class="id"><a name="po:1" class="">po:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>) (<span id="p:2" class="id"><a name="p:2" class="">p:</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#po:1">po</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">p'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id">p'</span> <span class="id"><a href="compcert.common.Memory.html#p:2">p</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.perm_order''" class="id"><a name="Mem.perm_order''" class="">perm_order''</a></span> (<span id="po1:4" class="id"><a name="po1:4" class="">po1</a></span> <span id="po2:5" class="id"><a name="po2:5" class="">po2:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#po1:4">po1,</a></span> <span class="id"><a href="compcert.common.Memory.html#po2:5">po2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">p1,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">p2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id">p1</span> <span class="id">p2</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Record</span> <span id="Mem.mem'" class="id"><a name="Mem.mem'" class="">mem'</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id">:=</span> <span class="id">mkmem</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span id="Mem.mem_contents" class="id"><a name="Mem.mem_contents" class="">mem_contents:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">PMap.t</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.t">ZMap.t</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>)<span class="id">;</span>  <span class="docright">(* <span class="bracket"><span class="id">block</span> -&gt; <span class="id">offset</span> -&gt; <span class="id">memval</span></span>  *)</span><br/>
&nbsp;&nbsp;<span id="Mem.mem_access" class="id"><a name="Mem.mem_access" class="">mem_access:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">PMap.t</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memtype.html#perm_kind">perm_kind</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>)<span class="id">;</span><br/>
<div class="doc r"> [block -&gt; offset -&gt; kind -&gt; option permission] </div>
&nbsp;&nbsp;<span id="Mem.nextblock" class="id"><a name="Mem.nextblock" class="">nextblock:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block;</a></span><br/>
&nbsp;&nbsp;<span id="Mem.access_max" class="id"><a name="Mem.access_max" class="">access_max:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:12" class="id"><a name="b:12" class="">b</a></span> <span id="ofs:13" class="id"><a name="ofs:13" class="">ofs,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_order''">perm_order''</a></span> (<span class="id"><a href="compcert.common.Memory.html#mem_access:10">mem_access#b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:13">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>) (<span class="id"><a href="compcert.common.Memory.html#mem_access:10">mem_access#b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:13">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span id="Mem.nextblock_noaccess" class="id"><a name="Mem.nextblock_noaccess" class="">nextblock_noaccess:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:15" class="id"><a name="b:15" class="">b</a></span> <span id="ofs:16" class="id"><a name="ofs:16" class="">ofs</a></span> <span id="k:17" class="id"><a name="k:17" class="">k,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span>(<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Memory.html#b:15">b</a></span> <span class="id"><a href="compcert.common.Memory.html#nextblock:11">nextblock</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#mem_access:10">mem_access#b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:16">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:17">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None;</a></span><br/>
&nbsp;&nbsp;<span id="Mem.contents_default" class="id"><a name="Mem.contents_default" class="">contents_default:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:19" class="id"><a name="b:19" class="">b,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Memory.html#mem_contents:9">mem_contents#b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.mem" class="id"><a name="Mem.mem" class="">mem</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem'">mem'</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.mkmem_ext" class="id"><a name="Mem.mkmem_ext" class="">mkmem_ext:</a></span><br/>
&nbsp;<span class="gallina-kwd">forall</span> <span id="cont1:21" class="id"><a name="cont1:21" class="">cont1</a></span> <span id="cont2:22" class="id"><a name="cont2:22" class="">cont2</a></span> <span id="acc1:23" class="id"><a name="acc1:23" class="">acc1</a></span> <span id="acc2:24" class="id"><a name="acc2:24" class="">acc2</a></span> <span id="next1:25" class="id"><a name="next1:25" class="">next1</a></span> <span id="next2:26" class="id"><a name="next2:26" class="">next2</a></span> <span id="a1:27" class="id"><a name="a1:27" class="">a1</a></span> <span id="a2:28" class="id"><a name="a2:28" class="">a2</a></span> <span id="b1:29" class="id"><a name="b1:29" class="">b1</a></span> <span id="b2:30" class="id"><a name="b2:30" class="">b2</a></span> <span id="c1:31" class="id"><a name="c1:31" class="">c1</a></span> <span id="c2:32" class="id"><a name="c2:32" class="">c2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#cont1:21">cont1=cont2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#acc1:23">acc1=acc2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#next1:25">next1=next2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> <span class="id"><a href="compcert.common.Memory.html#cont1:21">cont1</a></span> <span class="id"><a href="compcert.common.Memory.html#acc1:23">acc1</a></span> <span class="id"><a href="compcert.common.Memory.html#next1:25">next1</a></span> <span class="id"><a href="compcert.common.Memory.html#a1:27">a1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:29">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#c1:31">c1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> <span class="id"><a href="compcert.common.Memory.html#cont2:22">cont2</a></span> <span class="id"><a href="compcert.common.Memory.html#acc2:24">acc2</a></span> <span class="id"><a href="compcert.common.Memory.html#next2:26">next2</a></span> <span class="id"><a href="compcert.common.Memory.html#a2:28">a2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:30">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#c2:32">c2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">subst</span>. <span class="id">f_equal;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#proof_irr">proof_irr</a></span>.<br/>
Qed.</div>
<br/>
<h1> Validity of blocks and accesses </h1>
<br/>
<div class="doc">A block address is valid if it was previously allocated. It remains valid
  even after being freed. </div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.valid_block" class="id"><a name="Mem.valid_block" class="">valid_block</a></span> (<span id="m:33" class="id"><a name="m:33" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:34" class="id"><a name="b:34" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Memory.html#b:34">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m:33">m</a></span>).<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_not_valid_diff" class="id"><a name="Mem.valid_not_valid_diff" class="">valid_not_valid_diff:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:35" class="id"><a name="m:35" class="">m</a></span> <span id="b:36" class="id"><a name="b:36" class="">b</a></span> <span id="b':37" class="id"><a name="b':37" class="">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m:35">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:36">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span>(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m:35">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b':37">b'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b:36">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b':37">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">subst</span> <span class="id">b'</span>. <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">valid_not_valid_diff:</span> <span class="id">mem</span>.<br/>
<br/>
<div class="doc">Permissions </div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.perm" class="id"><a name="Mem.perm" class="">perm</a></span> (<span id="m:38" class="id"><a name="m:38" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:39" class="id"><a name="b:39" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="ofs:40" class="id"><a name="ofs:40" class="">ofs:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="k:41" class="id"><a name="k:41" class="">k:</a></span> <span class="id"><a href="compcert.common.Memtype.html#perm_kind">perm_kind</a></span>) (<span id="p:42" class="id"><a name="p:42" class="">p:</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm_order'">perm_order'</a></span> (<span class="id"><a href="compcert.common.Memory.html#m:38">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:40">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:41">k</a></span>) <span class="id"><a href="compcert.common.Memory.html#p:42">p</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_implies" class="id"><a name="Mem.perm_implies" class="">perm_implies:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:43" class="id"><a name="m:43" class="">m</a></span> <span id="b:44" class="id"><a name="b:44" class="">b</a></span> <span id="ofs:45" class="id"><a name="ofs:45" class="">ofs</a></span> <span id="k:46" class="id"><a name="k:46" class="">k</a></span> <span id="p1:47" class="id"><a name="p1:47" class="">p1</a></span> <span id="p2:48" class="id"><a name="p2:48" class="">p2,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:43">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:44">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:45">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:46">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p1:47">p1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#p1:47">p1</a></span> <span class="id"><a href="compcert.common.Memory.html#p2:48">p2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:43">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:44">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:45">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:46">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p2:48">p2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_order'">perm_order';</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span> <span class="id">ofs</span> <span class="id">k</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memtype.html#perm_order_trans">perm_order_trans;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">perm_implies:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_cur_max" class="id"><a name="Mem.perm_cur_max" class="">perm_cur_max:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:49" class="id"><a name="m:49" class="">m</a></span> <span id="b:50" class="id"><a name="b:50" class="">b</a></span> <span id="ofs:51" class="id"><a name="ofs:51" class="">ofs</a></span> <span id="p:52" class="id"><a name="p:52" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:49">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:50">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:51">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memory.html#p:52">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:49">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:50">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:51">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memory.html#p:52">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="po1:56" class="id"><span id="po1:53" class="id"><a name="po1:56" class="">po1</a></span></span> <span id="po2:57" class="id"><span id="po2:54" class="id"><a name="po2:57" class="">po2</a></span></span> <span id="p:58" class="id"><span id="p:55" class="id"><a name="p:58" class="">p,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm_order'">perm_order'</a></span> <span class="id"><a href="compcert.common.Memory.html#po2:54">po2</a></span> <span class="id"><a href="compcert.common.Memory.html#p:55">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_order''">perm_order''</a></span> <span class="id"><a href="compcert.common.Memory.html#po1:53">po1</a></span> <span class="id"><a href="compcert.common.Memory.html#po2:54">po2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_order'">perm_order'</a></span> <span class="id"><a href="compcert.common.Memory.html#po1:53">po1</a></span> <span class="id"><a href="compcert.common.Memory.html#p:55">p</a></span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_order'">perm_order',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_order''">perm_order''</a></span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">po2;</span> <span class="id">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">po1;</span> <span class="id">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memtype.html#perm_order_trans">perm_order_trans;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>). <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_cur" class="id"><a name="Mem.perm_cur" class="">perm_cur:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:59" class="id"><a name="m:59" class="">m</a></span> <span id="b:60" class="id"><a name="b:60" class="">b</a></span> <span id="ofs:61" class="id"><a name="ofs:61" class="">ofs</a></span> <span id="k:62" class="id"><a name="k:62" class="">k</a></span> <span id="p:63" class="id"><a name="p:63" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:59">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:60">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:61">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memory.html#p:63">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:59">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:60">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:61">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:62">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:63">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">k;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_max" class="id"><a name="Mem.perm_max" class="">perm_max:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:64" class="id"><a name="m:64" class="">m</a></span> <span id="b:65" class="id"><a name="b:65" class="">b</a></span> <span id="ofs:66" class="id"><a name="ofs:66" class="">ofs</a></span> <span id="k:67" class="id"><a name="k:67" class="">k</a></span> <span id="p:68" class="id"><a name="p:68" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:64">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:65">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:66">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:67">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:68">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:64">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:65">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:66">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memory.html#p:68">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">k;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">perm_cur</span> <span class="id">perm_max:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_valid_block" class="id"><a name="Mem.perm_valid_block" class="">perm_valid_block:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:69" class="id"><a name="m:69" class="">m</a></span> <span id="b:70" class="id"><a name="b:70" class="">b</a></span> <span id="ofs:71" class="id"><a name="ofs:71" class="">ofs</a></span> <span id="k:72" class="id"><a name="k:72" class="">k</a></span> <span id="p:73" class="id"><a name="p:73" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:69">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:70">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:71">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:72">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:73">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m:69">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:70">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> <span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span> <span class="id">ofs</span> <span class="id">k</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">perm_valid_block:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="Mem.perm_order_dec" class="id"><a name="Mem.perm_order_dec" class="">perm_order_dec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p1:74" class="id"><a name="p1:74" class="">p1</a></span> <span id="p2:75" class="id"><a name="p2:75" class="">p2,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#p1:74">p1</a></span> <span class="id"><a href="compcert.common.Memory.html#p2:75">p2}</a></span> <span class="id">+</span> <span class="id">{~perm_order</span> <span class="id"><a href="compcert.common.Memory.html#p1:74">p1</a></span> <span class="id"><a href="compcert.common.Memory.html#p2:75">p2}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">p1;</span> <span class="id">destruct</span> <span class="id">p2;</span> (<span class="id">left;</span> <span class="id">constructor</span>) <span class="id">||</span> (<span class="id">right;</span> <span class="id">intro</span> <span class="id">PO;</span> <span class="id">inversion</span> <span class="id">PO</span>).<br/>
Defined.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Mem.perm_order'_dec" class="id"><a name="Mem.perm_order'_dec" class="">perm_order'_dec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="op:76" class="id"><a name="op:76" class="">op</a></span> <span id="p:77" class="id"><a name="p:77" class="">p,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{perm_order'</a></span> <span class="id"><a href="compcert.common.Memory.html#op:76">op</a></span> <span class="id"><a href="compcert.common.Memory.html#p:77">p}</a></span> <span class="id">+</span> <span class="id">{~perm_order'</span> <span class="id"><a href="compcert.common.Memory.html#op:76">op</a></span> <span class="id"><a href="compcert.common.Memory.html#p:77">p}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">op;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_order'">perm_order'</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_order_dec">perm_order_dec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">tauto</span>.<br/>
Defined.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_dec" class="id"><a name="Mem.perm_dec" class="">perm_dec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:78" class="id"><a name="m:78" class="">m</a></span> <span id="b:79" class="id"><a name="b:79" class="">b</a></span> <span id="ofs:80" class="id"><a name="ofs:80" class="">ofs</a></span> <span id="k:81" class="id"><a name="k:81" class="">k</a></span> <span id="p:82" class="id"><a name="p:82" class="">p,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:78">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:79">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:80">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:81">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:82">p}</a></span> <span class="id">+</span> <span class="id">{~</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:78">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:79">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:80">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:81">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:82">p}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_order'_dec">perm_order'_dec</a></span>.<br/>
Defined.</div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.range_perm" class="id"><a name="Mem.range_perm" class="">range_perm</a></span> (<span id="m:83" class="id"><a name="m:83" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:84" class="id"><a name="b:84" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="lo:85" class="id"><a name="lo:85" class="">lo</a></span> <span id="hi:86" class="id"><a name="hi:86" class="">hi:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="k:87" class="id"><a name="k:87" class="">k:</a></span> <span class="id"><a href="compcert.common.Memtype.html#perm_kind">perm_kind</a></span>) (<span id="p:88" class="id"><a name="p:88" class="">p:</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ofs:89" class="id"><a name="ofs:89" class="">ofs,</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:85">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:89">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:86">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:83">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:84">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:89">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:87">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:88">p</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.range_perm_implies" class="id"><a name="Mem.range_perm_implies" class="">range_perm_implies:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:90" class="id"><a name="m:90" class="">m</a></span> <span id="b:91" class="id"><a name="b:91" class="">b</a></span> <span id="lo:92" class="id"><a name="lo:92" class="">lo</a></span> <span id="hi:93" class="id"><a name="hi:93" class="">hi</a></span> <span id="k:94" class="id"><a name="k:94" class="">k</a></span> <span id="p1:95" class="id"><a name="p1:95" class="">p1</a></span> <span id="p2:96" class="id"><a name="p2:96" class="">p2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:90">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:91">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:92">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:93">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k:94">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p1:95">p1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#p1:95">p1</a></span> <span class="id"><a href="compcert.common.Memory.html#p2:96">p2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:90">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:91">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:92">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:93">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k:94">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p2:96">p2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm;</a></span> <span class="id">intros;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.range_perm_cur" class="id"><a name="Mem.range_perm_cur" class="">range_perm_cur:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:97" class="id"><a name="m:97" class="">m</a></span> <span id="b:98" class="id"><a name="b:98" class="">b</a></span> <span id="lo:99" class="id"><a name="lo:99" class="">lo</a></span> <span id="hi:100" class="id"><a name="hi:100" class="">hi</a></span> <span id="k:101" class="id"><a name="k:101" class="">k</a></span> <span id="p:102" class="id"><a name="p:102" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:97">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:98">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:99">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:100">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memory.html#p:102">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:97">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:98">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:99">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:100">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k:101">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:102">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm;</a></span> <span class="id">intros;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.range_perm_max" class="id"><a name="Mem.range_perm_max" class="">range_perm_max:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:103" class="id"><a name="m:103" class="">m</a></span> <span id="b:104" class="id"><a name="b:104" class="">b</a></span> <span id="lo:105" class="id"><a name="lo:105" class="">lo</a></span> <span id="hi:106" class="id"><a name="hi:106" class="">hi</a></span> <span id="k:107" class="id"><a name="k:107" class="">k</a></span> <span id="p:108" class="id"><a name="p:108" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:103">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:104">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:105">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:106">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k:107">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:108">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:103">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:104">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:105">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:106">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memory.html#p:108">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm;</a></span> <span class="id">intros;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">range_perm_implies</span> <span class="id">range_perm_cur</span> <span class="id">range_perm_max:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.range_perm_dec" class="id"><a name="Mem.range_perm_dec" class="">range_perm_dec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:109" class="id"><a name="m:109" class="">m</a></span> <span id="b:110" class="id"><a name="b:110" class="">b</a></span> <span id="lo:111" class="id"><a name="lo:111" class="">lo</a></span> <span id="hi:112" class="id"><a name="hi:112" class="">hi</a></span> <span id="k:113" class="id"><a name="k:113" class="">k</a></span> <span id="p:114" class="id"><a name="p:114" class="">p,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:109">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:110">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:111">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:112">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k:113">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:114">p}</a></span> <span class="id">+</span> <span class="id">{~</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:109">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:110">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:111">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:112">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k:113">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:114">p}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">lo</span> <span class="gallina-kwd">using</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_induction_type">well_founded_induction_type</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zwf.html#Zwf_up_well_founded">Zwf_up_well_founded</a></span> <span class="id">hi</span>)).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">lo</span> <span class="id">hi</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">k</span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">H</span> (<span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>)). <span class="id">red</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">lo</span> <span class="id">ofs</span>). <span class="id">congruence</span>. <span class="id">apply</span> <span class="id">r</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">elim</span> <span class="id">n</span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">apply</span> <span class="id">H0;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">elim</span> <span class="id">n</span>. <span class="id">apply</span> <span class="id">H0</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">extlia</span>.<br/>
Defined.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">valid_access</span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span></span> holds if a memory access
    of the given chunk is possible in <span class="bracket"><span class="id">m</span></span> at address <span class="bracket"><span class="id">b</span>, <span class="id">ofs</span></span>
    with current permissions <span class="bracket"><span class="id">p</span></span>.
    This means:
<ul>
<li>
 The range of bytes accessed all have current permission <span class="bracket"><span class="id">p</span></span>.
</li>
<li>
 The offset <span class="bracket"><span class="id">ofs</span></span> is aligned.
</li>
</ul>
</div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.valid_access" class="id"><a name="Mem.valid_access" class="">valid_access</a></span> (<span id="m:115" class="id"><a name="m:115" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="chunk:116" class="id"><a name="chunk:116" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span id="b:117" class="id"><a name="b:117" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="ofs:118" class="id"><a name="ofs:118" class="">ofs:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="p:119" class="id"><a name="p:119" class="">p:</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>)<span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:115">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:117">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:118">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:118">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:116">chunk</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memory.html#p:119">p</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:116">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:118">ofs</a></span>).<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_implies" class="id"><a name="Mem.valid_access_implies" class="">valid_access_implies:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:120" class="id"><a name="m:120" class="">m</a></span> <span id="chunk:121" class="id"><a name="chunk:121" class="">chunk</a></span> <span id="b:122" class="id"><a name="b:122" class="">b</a></span> <span id="ofs:123" class="id"><a name="ofs:123" class="">ofs</a></span> <span id="p1:124" class="id"><a name="p1:124" class="">p1</a></span> <span id="p2:125" class="id"><a name="p2:125" class="">p2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:120">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:121">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:122">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:123">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p1:124">p1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#p1:124">p1</a></span> <span class="id"><a href="compcert.common.Memory.html#p2:125">p2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:120">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:121">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:122">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:123">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p2:125">p2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_freeable_any" class="id"><a name="Mem.valid_access_freeable_any" class="">valid_access_freeable_any:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:126" class="id"><a name="m:126" class="">m</a></span> <span id="chunk:127" class="id"><a name="chunk:127" class="">chunk</a></span> <span id="b:128" class="id"><a name="b:128" class="">b</a></span> <span id="ofs:129" class="id"><a name="ofs:129" class="">ofs</a></span> <span id="p:130" class="id"><a name="p:130" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:126">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:127">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:128">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:129">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:126">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:127">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:128">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:129">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:130">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_implies">valid_access_implies;</a></span> <span class="id">eauto</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">valid_access_implies:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_valid_block" class="id"><a name="Mem.valid_access_valid_block" class="">valid_access_valid_block:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:131" class="id"><a name="m:131" class="">m</a></span> <span id="chunk:132" class="id"><a name="chunk:132" class="">chunk</a></span> <span id="b:133" class="id"><a name="b:133" class="">b</a></span> <span id="ofs:134" class="id"><a name="ofs:134" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:131">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:132">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:133">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:134">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m:131">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:133">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">valid_access_valid_block:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.valid_access_perm" class="id"><a name="Mem.valid_access_perm" class="">valid_access_perm:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:135" class="id"><a name="m:135" class="">m</a></span> <span id="chunk:136" class="id"><a name="chunk:136" class="">chunk</a></span> <span id="b:137" class="id"><a name="b:137" class="">b</a></span> <span id="ofs:138" class="id"><a name="ofs:138" class="">ofs</a></span> <span id="k:139" class="id"><a name="k:139" class="">k</a></span> <span id="p:140" class="id"><a name="p:140" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:135">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:136">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:137">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:138">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:140">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:135">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:137">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:138">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:139">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:140">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">perm_cur</a></span>. <span class="id">apply</span> <span class="id">H</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>). <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.valid_access_compat" class="id"><a name="Mem.valid_access_compat" class="">valid_access_compat:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:141" class="id"><a name="m:141" class="">m</a></span> <span id="chunk1:142" class="id"><a name="chunk1:142" class="">chunk1</a></span> <span id="chunk2:143" class="id"><a name="chunk2:143" class="">chunk2</a></span> <span id="b:144" class="id"><a name="b:144" class="">b</a></span> <span id="ofs:145" class="id"><a name="ofs:145" class="">ofs</a></span> <span id="p:146" class="id"><a name="p:146" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1:142">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:143">chunk2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:143">chunk2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1:142">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:141">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1:142">chunk1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:144">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:145">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:146">p-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:141">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:143">chunk2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:144">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:145">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:146">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">rewrite</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">H2</span>. <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_trans">Z.divide_trans</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memdata.html#align_le_divides">align_le_divides;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.valid_access_dec" class="id"><a name="Mem.valid_access_dec" class="">valid_access_dec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:147" class="id"><a name="m:147" class="">m</a></span> <span id="chunk:148" class="id"><a name="chunk:148" class="">chunk</a></span> <span id="b:149" class="id"><a name="b:149" class="">b</a></span> <span id="ofs:150" class="id"><a name="ofs:150" class="">ofs</a></span> <span id="p:151" class="id"><a name="p:151" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:147">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:148">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:149">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:150">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:151">p}</a></span> <span class="id">+</span> <span class="id">{~</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:147">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:148">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:149">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:150">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:151">p}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znumtheory.html#Zdivide_dec">Zdivide_dec</a></span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id">chunk</span>) <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">red;</span> <span class="id">intro</span> <span class="id">V;</span> <span class="id">inv</span> <span class="id">V;</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">red;</span> <span class="id">intro</span> <span class="id">V;</span> <span class="id">inv</span> <span class="id">V;</span> <span class="id">contradiction</span>.<br/>
Defined.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">valid_pointer</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span></span> returns <span class="bracket"><span class="id">true</span></span> if the address <span class="bracket"><span class="id">b</span>, <span class="id">ofs</span></span>
  is nonempty in <span class="bracket"><span class="id">m</span></span> and <span class="bracket"><span class="id">false</span></span> if it is empty. </div>
<span class="vernacular">Definition</span> <span id="Mem.valid_pointer" class="id"><a name="Mem.valid_pointer" class="">valid_pointer</a></span> (<span id="m:152" class="id"><a name="m:152" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:153" class="id"><a name="b:153" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="ofs:154" class="id"><a name="ofs:154" class="">ofs:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m:152">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:153">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:154">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_pointer_nonempty_perm" class="id"><a name="Mem.valid_pointer_nonempty_perm" class="">valid_pointer_nonempty_perm:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:155" class="id"><a name="m:155" class="">m</a></span> <span id="b:156" class="id"><a name="b:156" class="">b</a></span> <span id="ofs:157" class="id"><a name="ofs:157" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m:155">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:156">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:157">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:155">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:156">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:157">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>)<span class="id">;</span> <span class="id">simpl;</span><br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_pointer_valid_access" class="id"><a name="Mem.valid_pointer_valid_access" class="">valid_pointer_valid_access:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:158" class="id"><a name="m:158" class="">m</a></span> <span id="b:159" class="id"><a name="b:159" class="">b</a></span> <span id="ofs:160" class="id"><a name="ofs:160" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m:158">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:159">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:160">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:158">m</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#b:159">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:160">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_nonempty_perm">valid_pointer_nonempty_perm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">simpl;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">replace</span> <span class="id">ofs0</span> <span class="gallina-kwd">with</span> <span class="id">ofs</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_1_l">Z.divide_1_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id">H</span>. <span class="id">simpl</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">C allows pointers one past the last element of an array.  These are not
  valid according to the previously defined <span class="bracket"><span class="id">valid_pointer</span></span>. The property
  <span class="bracket"><span class="id">weak_valid_pointer</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span></span> holds if address <span class="bracket"><span class="id">b</span>, <span class="id">ofs</span></span> is a valid pointer
  in <span class="bracket"><span class="id">m</span></span>, or a pointer one past a valid block in <span class="bracket"><span class="id">m</span></span>.  </div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.weak_valid_pointer" class="id"><a name="Mem.weak_valid_pointer" class="">weak_valid_pointer</a></span> (<span id="m:161" class="id"><a name="m:161" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:162" class="id"><a name="b:162" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="ofs:163" class="id"><a name="ofs:163" class="">ofs:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m:161">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:162">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:163">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185">||</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m:161">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:162">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:163">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.weak_valid_pointer_spec" class="id"><a name="Mem.weak_valid_pointer_spec" class="">weak_valid_pointer_spec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:164" class="id"><a name="m:164" class="">m</a></span> <span id="b:165" class="id"><a name="b:165" class="">b</a></span> <span id="ofs:166" class="id"><a name="ofs:166" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m:164">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:165">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:166">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m:164">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:165">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:166">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m:164">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:165">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:166">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span>. <span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>.<br/>
Qed.</div>
<span class="vernacular">Lemma</span> <span id="Mem.valid_pointer_implies" class="id"><a name="Mem.valid_pointer_implies" class="">valid_pointer_implies:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:167" class="id"><a name="m:167" class="">m</a></span> <span id="b:168" class="id"><a name="b:168" class="">b</a></span> <span id="ofs:169" class="id"><a name="ofs:169" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m:167">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:168">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:169">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m:167">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:168">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:169">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_spec">weak_valid_pointer_spec</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Operations over memory stores </h1>
<br/>
<div class="doc">The initial store </div>
<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="Mem.empty" class="id"><a name="Mem.empty" class="">empty:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.init">PMap.init</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.init">ZMap.init</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.init">PMap.init</a></span> (<span class="gallina-kwd">fun</span> <span id="ofs:170" class="id"><a name="ofs:170" class="">ofs</a></span> <span id="k:171" class="id"><a name="k:171" class="">k</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">1</span>%<span class="id">positive</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<br/>
<div class="doc">Allocation of a fresh block with the given bounds.  Return an updated
  memory state and the address of the fresh block, which initially contains
  undefined cells.  Note that allocation never fails: we model an
  infinite memory. </div>
<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="Mem.alloc" class="id"><a name="Mem.alloc" class="">alloc</a></span> (<span id="m:172" class="id"><a name="m:172" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="lo:173" class="id"><a name="lo:173" class="">lo</a></span> <span id="hi:174" class="id"><a name="hi:174" class="">hi:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#m:172">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#ZMap.init">ZMap.init</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:172">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#m:172">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="ofs:175" class="id"><a name="ofs:175" class="">ofs</a></span> <span id="k:176" class="id"><a name="k:176" class="">k</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:173">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:175">ofs</a></span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:175">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:174">hi</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:172">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span> <span class="id"><a href="compcert.common.Memory.html#m:172">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> <span class="id">_</span> <span class="id">_,</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:172">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Next Obligation.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">lo</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>)<span class="id">;</span> <span class="id">red;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>.<br/>
Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Next Obligation.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">elim</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_succ">Plt_succ</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess</a></span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Next Obligation.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>)). <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Freeing a block between the given bounds.
  Return the updated memory state where the given range of the given block
  has been invalidated: future reads and writes to this
  range will fail.  Requires freeable permission on the given range. </div>
<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="Mem.unchecked_free" class="id"><a name="Mem.unchecked_free" class="">unchecked_free</a></span> (<span id="m:177" class="id"><a name="m:177" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:178" class="id"><a name="b:178" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="lo:179" class="id"><a name="lo:179" class="">lo</a></span> <span id="hi:180" class="id"><a name="hi:180" class="">hi:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">:</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> <span class="id"><a href="compcert.common.Memory.html#m:177">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#b:178">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="ofs:181" class="id"><a name="ofs:181" class="">ofs</a></span> <span id="k:182" class="id"><a name="k:182" class="">k</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:179">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:181">ofs</a></span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:181">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:180">hi</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#m:177">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:181">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:182">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:177">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:177">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>) <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Next Obligation.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">lo</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>). <span class="id">red;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>.<br/>
Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Next Obligation.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>). <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">lo</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>). <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Next Obligation.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.free" class="id"><a name="Mem.free" class="">free</a></span> (<span id="m:183" class="id"><a name="m:183" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:184" class="id"><a name="b:184" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="lo:185" class="id"><a name="lo:185" class="">lo</a></span> <span id="hi:186" class="id"><a name="hi:186" class="">hi:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m:183">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:184">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:185">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:186">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free</a></span> <span class="id"><a href="compcert.common.Memory.html#m:183">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:184">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:185">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:186">hi</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="Mem.free_list" class="id"><a name="Mem.free_list" class="">free_list</a></span> (<span id="m:187" class="id"><a name="m:187" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="l:188" class="id"><a name="l:188" class="">l:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) <span class="id">{struct</span> <span class="id">l}:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#l:188">l</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m:187">m</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id">b,</span> <span class="id">lo,</span> <span class="id">hi</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">l'</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m:187">m</a></span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memory.html#free_list:189">free_list</a></span> <span class="id">m'</span> <span class="id">l'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">Memory reads. </div>
<br/>
<div class="doc">Reading N adjacent bytes in a block content. </div>
<br/>
<span class="vernacular">Fixpoint</span> <span id="Mem.getN" class="id"><a name="Mem.getN" class="">getN</a></span> (<span id="n:191" class="id"><a name="n:191" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span id="p:192" class="id"><a name="p:192" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="c:193" class="id"><a name="c:193" class="">c:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.t">ZMap.t</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) <span class="id">{struct</span> <span class="id">n}:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#n:191">n</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#p:192">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c:193">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memory.html#getN:194">getN</a></span> <span class="id">n'</span> (<span class="id"><a href="compcert.common.Memory.html#p:192">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="compcert.common.Memory.html#c:193">c</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">load</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span></span> perform a read in memory state <span class="bracket"><span class="id">m</span></span>, at address
  <span class="bracket"><span class="id">b</span></span> and offset <span class="bracket"><span class="id">ofs</span></span>.  It returns the value of the memory chunk
  at that address.  <span class="bracket"><span class="id">None</span></span> is returned if the accessed bytes
  are not readable. </div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.load" class="id"><a name="Mem.load" class="">load</a></span> (<span id="chunk:196" class="id"><a name="chunk:196" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span id="m:197" class="id"><a name="m:197" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:198" class="id"><a name="b:198" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="ofs:199" class="id"><a name="ofs:199" class="">ofs:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m:197">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:196">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:198">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:199">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:196">chunk</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:196">chunk</a></span>) <span class="id"><a href="compcert.common.Memory.html#ofs:199">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m:197">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>)))<br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">loadv</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">addr</span></span> is similar, but the address and offset are given
  as a single value <span class="bracket"><span class="id">addr</span></span>, which must be a pointer value. </div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.loadv" class="id"><a name="Mem.loadv" class="">loadv</a></span> (<span id="chunk:200" class="id"><a name="chunk:200" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span id="m:201" class="id"><a name="m:201" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="addr:202" class="id"><a name="addr:202" class="">addr:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#addr:202">addr</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:200">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:201">m</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">loadbytes</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span></span> reads <span class="bracket"><span class="id">n</span></span> consecutive bytes starting at
  location <span class="bracket">(<span class="id">b</span>, <span class="id">ofs</span>)</span>.  Returns <span class="bracket"><span class="id">None</span></span> if the accessed locations are
  not readable. </div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.loadbytes" class="id"><a name="Mem.loadbytes" class="">loadbytes</a></span> (<span id="m:204" class="id"><a name="m:204" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:205" class="id"><a name="b:205" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="ofs:206" class="id"><a name="ofs:206" class="">ofs</a></span> <span id="n:207" class="id"><a name="n:207" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m:204">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:205">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:206">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:206">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#n:207">n</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n:207">n</a></span>) <span class="id"><a href="compcert.common.Memory.html#ofs:206">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m:204">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>))<br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<div class="doc">Memory stores. </div>
<br/>
<div class="doc">Writing N adjacent bytes in a block content. </div>
<br/>
<span class="vernacular">Fixpoint</span> <span id="Mem.setN" class="id"><a name="Mem.setN" class="">setN</a></span> (<span id="vl:208" class="id"><a name="vl:208" class="">vl:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) (<span id="p:209" class="id"><a name="p:209" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="c:210" class="id"><a name="c:210" class="">c:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.t">ZMap.t</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) <span class="id">{struct</span> <span class="id">vl}:</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.t">ZMap.t</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#vl:208">vl</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memory.html#c:210">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">v</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">vl'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memory.html#setN:211">setN</a></span> <span class="id">vl'</span> (<span class="id"><a href="compcert.common.Memory.html#p:209">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) (<span class="id"><a href="compcert.lib.Maps.html#ZMap.set">ZMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#p:209">p</a></span> <span class="id">v</span> <span class="id"><a href="compcert.common.Memory.html#c:210">c</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="Mem.setN_other" class="id"><a name="Mem.setN_other" class="">setN_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="vl:213" class="id"><a name="vl:213" class="">vl</a></span> <span id="c:214" class="id"><a name="c:214" class="">c</a></span> <span id="p:215" class="id"><a name="p:215" class="">p</a></span> <span id="q:216" class="id"><a name="q:216" class="">q,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r:217" class="id"><a name="r:217" class="">r,</a></span> <span class="id"><a href="compcert.common.Memory.html#p:215">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#r:217">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#p:215">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:213">vl</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#r:217">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#q:216">q</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q:216">q</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:213">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#p:215">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c:214">c</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q:216">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c:214">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">vl;</span> <span class="id">intros;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">length</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">q</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.set">ZMap.set</a></span> <span class="id">p</span> <span class="id">a</span> <span class="id">c</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHvl</span>. <span class="id">intros</span>. <span class="id">apply</span> <span class="id">H</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gso">ZMap.gso</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#not_eq_sym">not_eq_sym</a></span>. <span class="id">apply</span> <span class="id">H</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Mem.setN_outside" class="id"><a name="Mem.setN_outside" class="">setN_outside:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="vl:218" class="id"><a name="vl:218" class="">vl</a></span> <span id="c:219" class="id"><a name="c:219" class="">c</a></span> <span id="p:220" class="id"><a name="p:220" class="">p</a></span> <span id="q:221" class="id"><a name="q:221" class="">q,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#q:221">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#p:220">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#q:221">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#p:220">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:218">vl</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q:221">q</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:218">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#p:220">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c:219">c</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q:221">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c:219">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_other">setN_other</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Mem.getN_setN_same" class="id"><a name="Mem.getN_setN_same" class="">getN_setN_same:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="vl:222" class="id"><a name="vl:222" class="">vl</a></span> <span id="p:223" class="id"><a name="p:223" class="">p</a></span> <span id="c:224" class="id"><a name="c:224" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:222">vl</a></span>) <span class="id"><a href="compcert.common.Memory.html#p:223">p</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:222">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#p:223">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c:224">c</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:222">vl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">vl;</span> <span class="id">intros;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gss">ZMap.gss</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHvl</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Mem.getN_exten" class="id"><a name="Mem.getN_exten" class="">getN_exten:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c1:225" class="id"><a name="c1:225" class="">c1</a></span> <span id="c2:226" class="id"><a name="c2:226" class="">c2</a></span> <span id="n:227" class="id"><a name="n:227" class="">n</a></span> <span id="p:228" class="id"><a name="p:228" class="">p,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:229" class="id"><a name="i:229" class="">i,</a></span> <span class="id"><a href="compcert.common.Memory.html#p:228">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#i:229">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#p:228">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n:227">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#i:229">i</a></span> <span class="id"><a href="compcert.common.Memory.html#c1:225">c1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#i:229">i</a></span> <span class="id"><a href="compcert.common.Memory.html#c2:226">c2</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n:227">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p:228">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c1:225">c1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n:227">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p:228">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c2:226">c2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">intros</span>. <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">simpl</span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>. <span class="id">lia</span>. <span class="id">apply</span> <span class="id">IHn</span>. <span class="id">intros</span>. <span class="id">apply</span> <span class="id">H</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Mem.getN_setN_disjoint" class="id"><a name="Mem.getN_setN_disjoint" class="">getN_setN_disjoint:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="vl:230" class="id"><a name="vl:230" class="">vl</a></span> <span id="q:231" class="id"><a name="q:231" class="">q</a></span> <span id="c:232" class="id"><a name="c:232" class="">c</a></span> <span id="n:233" class="id"><a name="n:233" class="">n</a></span> <span id="p:234" class="id"><a name="p:234" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Intv.html#disjoint">Intv.disjoint</a></span> (<span class="id"><a href="compcert.common.Memory.html#p:234">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#p:234">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n:233">n</a></span>) (<span class="id"><a href="compcert.common.Memory.html#q:231">q,</a></span> <span class="id"><a href="compcert.common.Memory.html#q:231">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:230">vl</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n:233">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p:234">p</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:230">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#q:231">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c:232">c</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n:233">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p:234">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c:232">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_exten">getN_exten</a></span>. <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_other">setN_other</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros;</span> <span class="id">subst</span> <span class="id">r</span>. <span class="id">eelim</span> <span class="id">H;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Mem.getN_setN_outside" class="id"><a name="Mem.getN_setN_outside" class="">getN_setN_outside:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="vl:235" class="id"><a name="vl:235" class="">vl</a></span> <span id="q:236" class="id"><a name="q:236" class="">q</a></span> <span id="c:237" class="id"><a name="c:237" class="">c</a></span> <span id="n:238" class="id"><a name="n:238" class="">n</a></span> <span id="p:239" class="id"><a name="p:239" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#p:239">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n:238">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#q:236">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#q:236">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:235">vl</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#p:239">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n:238">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p:239">p</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:235">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#q:236">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c:237">c</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n:238">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p:239">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c:237">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_disjoint">getN_setN_disjoint</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Intv.html#disjoint_range">Intv.disjoint_range</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Mem.setN_default" class="id"><a name="Mem.setN_default" class="">setN_default:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="vl:240" class="id"><a name="vl:240" class="">vl</a></span> <span id="q:241" class="id"><a name="q:241" class="">q</a></span> <span id="c:242" class="id"><a name="c:242" class="">c,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:240">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#q:241">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c:242">c</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Memory.html#c:242">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">vl;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">IHvl</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">store</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span></span> perform a write in memory state <span class="bracket"><span class="id">m</span></span>.
  Value <span class="bracket"><span class="id">v</span></span> is stored at address <span class="bracket"><span class="id">b</span></span> and offset <span class="bracket"><span class="id">ofs</span></span>.
  Return the updated memory store, or <span class="bracket"><span class="id">None</span></span> if the accessed bytes
  are not writable. </div>
<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="Mem.store" class="id"><a name="Mem.store" class="">store</a></span> (<span id="chunk:243" class="id"><a name="chunk:243" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span id="m:244" class="id"><a name="m:244" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:245" class="id"><a name="b:245" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="ofs:246" class="id"><a name="ofs:246" class="">ofs:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="v:247" class="id"><a name="v:247" class="">v:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m:244">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:243">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:245">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:246">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span> <span class="gallina-kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#b:245">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:243">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#v:247">v</a></span>) <span class="id"><a href="compcert.common.Memory.html#ofs:246">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m:244">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:244">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:244">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:244">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Next Obligation.</span></div>
<div class="proofscript" id="proof38">
 <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Next Obligation.</span></div>
<div class="proofscript" id="proof39">
 <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess;</a></span> <span class="id">auto</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Next Obligation.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_default">setN_default</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">storev</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">addr</span> <span class="id">v</span></span> is similar, but the address and offset are given
  as a single value <span class="bracket"><span class="id">addr</span></span>, which must be a pointer value. </div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.storev" class="id"><a name="Mem.storev" class="">storev</a></span> (<span id="chunk:248" class="id"><a name="chunk:248" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span id="m:249" class="id"><a name="m:249" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="addr:250" class="id"><a name="addr:250" class="">addr</a></span> <span id="v:251" class="id"><a name="v:251" class="">v:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#addr:250">addr</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:248">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:249">m</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) <span class="id"><a href="compcert.common.Memory.html#v:251">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">storebytes</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes</span></span> stores the given list of bytes <span class="bracket"><span class="id">bytes</span></span>
  starting at location <span class="bracket">(<span class="id">b</span>, <span class="id">ofs</span>)</span>.  Returns updated memory state
  or <span class="bracket"><span class="id">None</span></span> if the accessed locations are not writable. </div>
<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="Mem.storebytes" class="id"><a name="Mem.storebytes" class="">storebytes</a></span> (<span id="m:253" class="id"><a name="m:253" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:254" class="id"><a name="b:254" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="ofs:255" class="id"><a name="ofs:255" class="">ofs:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="bytes:256" class="id"><a name="bytes:256" class="">bytes:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m:253">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:254">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:255">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:255">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:256">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span> <span class="gallina-kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#b:254">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:256">bytes</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:255">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m:253">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>)) <span class="id"><a href="compcert.common.Memory.html#m:253">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:253">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:253">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Next Obligation.</span></div>
<div class="proofscript" id="proof41">
 <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Next Obligation.</span></div>
<div class="proofscript" id="proof42">
 <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess;</a></span> <span class="id">auto</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Next Obligation.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_default">setN_default</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">drop_perm</span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">p</span></span> sets the max permissions of the byte range
    <span class="bracket">(<span class="id">b</span>, <span class="id">lo</span>) ... (<span class="id">b</span>, <span class="id">hi</span> - 1)</span> to <span class="bracket"><span class="id">p</span></span>.  These bytes must have current permissions
    <span class="bracket"><span class="id">Freeable</span></span> in the initial memory state <span class="bracket"><span class="id">m</span></span>.
    Returns updated memory state, or <span class="bracket"><span class="id">None</span></span> if insufficient permissions. </div>
<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="Mem.drop_perm" class="id"><a name="Mem.drop_perm" class="">drop_perm</a></span> (<span id="m:257" class="id"><a name="m:257" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span id="b:258" class="id"><a name="b:258" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="lo:259" class="id"><a name="lo:259" class="">lo</a></span> <span id="hi:260" class="id"><a name="hi:260" class="">hi:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="p:261" class="id"><a name="p:261" class="">p:</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m:257">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:258">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:259">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:260">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="gallina-kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> <span class="id"><a href="compcert.common.Memory.html#m:257">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#b:258">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="ofs:262" class="id"><a name="ofs:262" class="">ofs</a></span> <span id="k:263" class="id"><a name="k:263" class="">k</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:259">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:262">ofs</a></span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:262">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:260">hi</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#p:261">p</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#m:257">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:262">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:263">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:257">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m:257">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>) <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Next Obligation.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>). <span class="id">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">lo</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>). <span class="id">red;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>.<br/>
Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Next Obligation.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess</a></span> <span class="id">m</span> <span class="id">b0</span> <span class="id">ofs</span> <span class="id">k</span>). <span class="id">auto</span>. <span class="id">intros</span> <span class="id">NOACC</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>). <span class="id">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">lo</span> <span class="id">ofs</span>). <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">P:</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>) <span class="gallina-kwd">by</span> <span class="id">auto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">perm_cur</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="gallina-kwd">in</span> <span class="id">P</span>. <span class="id">rewrite</span> <span class="id">NOACC</span> <span class="gallina-kwd">in</span> <span class="id">P</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Next Obligation.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
Qed.</div>
<br/>
<h1> Properties of the memory operations </h1>
<br/>
<div class="doc">Properties of the empty store. </div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.nextblock_empty" class="id"><a name="Mem.nextblock_empty" class="">nextblock_empty:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">empty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">1</span>%<span class="id">positive</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
 <span class="id">reflexivity</span>. Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_empty" class="id"><a name="Mem.perm_empty" class="">perm_empty:</a></span> <span class="gallina-kwd">forall</span> <span id="b:264" class="id"><a name="b:264" class="">b</a></span> <span id="ofs:265" class="id"><a name="ofs:265" class="">ofs</a></span> <span id="k:266" class="id"><a name="k:266" class="">k</a></span> <span id="p:267" class="id"><a name="p:267" class="">p,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">empty</a></span> <span class="id"><a href="compcert.common.Memory.html#b:264">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:265">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:266">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:267">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">empty;</a></span> <span class="id">simpl</span>. <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_empty" class="id"><a name="Mem.valid_access_empty" class="">valid_access_empty:</a></span> <span class="gallina-kwd">forall</span> <span id="chunk:268" class="id"><a name="chunk:268" class="">chunk</a></span> <span id="b:269" class="id"><a name="b:269" class="">b</a></span> <span id="ofs:270" class="id"><a name="ofs:270" class="">ofs</a></span> <span id="p:271" class="id"><a name="p:271" class="">p,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">empty</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:268">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:269">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:270">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:271">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">red;</span> <span class="id">intros</span>. <span class="id">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_empty">perm_empty</a></span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>). <span class="id">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">load</span></span> </h2>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_load" class="id"><a name="Mem.valid_access_load" class="">valid_access_load:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:272" class="id"><a name="m:272" class="">m</a></span> <span id="chunk:273" class="id"><a name="chunk:273" class="">chunk</a></span> <span id="b:274" class="id"><a name="b:274" class="">b</a></span> <span id="ofs:275" class="id"><a name="ofs:275" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:272">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:273">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:274">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:275">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v:276" class="id"><a name="v:276" class="">v,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:273">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:272">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:274">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:275">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:276">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">econstructor</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_valid_access" class="id"><a name="Mem.load_valid_access" class="">load_valid_access:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:277" class="id"><a name="m:277" class="">m</a></span> <span id="chunk:278" class="id"><a name="chunk:278" class="">chunk</a></span> <span id="b:279" class="id"><a name="b:279" class="">b</a></span> <span id="ofs:280" class="id"><a name="ofs:280" class="">ofs</a></span> <span id="v:281" class="id"><a name="v:281" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:278">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:277">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:279">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:280">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:281">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m:277">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:278">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:279">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:280">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">v</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.load_result" class="id"><a name="Mem.load_result" class="">load_result:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:282" class="id"><a name="chunk:282" class="">chunk</a></span> <span id="m:283" class="id"><a name="m:283" class="">m</a></span> <span id="b:284" class="id"><a name="b:284" class="">b</a></span> <span id="ofs:285" class="id"><a name="ofs:285" class="">ofs</a></span> <span id="v:286" class="id"><a name="v:286" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:282">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:283">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:284">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:285">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:286">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#v:286">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:282">chunk</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:282">chunk</a></span>) <span class="id"><a href="compcert.common.Memory.html#ofs:285">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m:283">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">v</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">load_valid_access</span> <span class="id">valid_access_load:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_type" class="id"><a name="Mem.load_type" class="">load_type:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:287" class="id"><a name="m:287" class="">m</a></span> <span id="chunk:288" class="id"><a name="chunk:288" class="">chunk</a></span> <span id="b:289" class="id"><a name="b:289" class="">b</a></span> <span id="ofs:290" class="id"><a name="ofs:290" class="">ofs</a></span> <span id="v:291" class="id"><a name="v:291" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:288">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:287">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:289">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:290">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:291">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.has_type">Val.has_type</a></span> <span class="id"><a href="compcert.common.Memory.html#v:291">v</a></span> (<span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:288">chunk</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result;</a></span> <span class="id">eauto;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_type">decode_val_type</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_rettype" class="id"><a name="Mem.load_rettype" class="">load_rettype:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:292" class="id"><a name="m:292" class="">m</a></span> <span id="chunk:293" class="id"><a name="chunk:293" class="">chunk</a></span> <span id="b:294" class="id"><a name="b:294" class="">b</a></span> <span id="ofs:295" class="id"><a name="ofs:295" class="">ofs</a></span> <span id="v:296" class="id"><a name="v:296" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:293">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:292">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:294">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:295">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:296">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.has_rettype">Val.has_rettype</a></span> <span class="id"><a href="compcert.common.Memory.html#v:296">v</a></span> (<span class="id"><a href="compcert.common.AST.html#rettype_of_chunk">rettype_of_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:293">chunk</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result;</a></span> <span class="id">eauto;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_rettype">decode_val_rettype</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_cast" class="id"><a name="Mem.load_cast" class="">load_cast:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:297" class="id"><a name="m:297" class="">m</a></span> <span id="chunk:298" class="id"><a name="chunk:298" class="">chunk</a></span> <span id="b:299" class="id"><a name="b:299" class="">b</a></span> <span id="ofs:300" class="id"><a name="ofs:300" class="">ofs</a></span> <span id="v:301" class="id"><a name="v:301" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:298">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:297">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:299">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:300">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:301">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#chunk:298">chunk</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memory.html#v:301">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id">8</span> <span class="id"><a href="compcert.common.Memory.html#v:301">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memory.html#v:301">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> <span class="id">8</span> <span class="id"><a href="compcert.common.Memory.html#v:301">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memory.html#v:301">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id">16</span> <span class="id"><a href="compcert.common.Memory.html#v:301">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memory.html#v:301">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> <span class="id">16</span> <span class="id"><a href="compcert.common.Memory.html#v:301">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">l</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>) <span class="id">ofs</span> <span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">subst</span> <span class="id">v</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_cast">decode_val_cast</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_int8_signed_unsigned" class="id"><a name="Mem.load_int8_signed_unsigned" class="">load_int8_signed_unsigned:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:303" class="id"><a name="m:303" class="">m</a></span> <span id="b:304" class="id"><a name="b:304" class="">b</a></span> <span id="ofs:305" class="id"><a name="ofs:305" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m:303">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:304">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:305">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id">8</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m:303">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:304">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:305">ofs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">cl</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span>) <span class="id">ofs</span> <span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true;</a></span> <span class="id">auto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">cl</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">decEq</span>. <span class="id">decEq</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext_zero_ext">Int.sign_ext_zero_ext</a></span>. <span class="id">auto</span>. <span class="id">compute;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_int16_signed_unsigned" class="id"><a name="Mem.load_int16_signed_unsigned" class="">load_int16_signed_unsigned:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:306" class="id"><a name="m:306" class="">m</a></span> <span id="b:307" class="id"><a name="b:307" class="">b</a></span> <span id="ofs:308" class="id"><a name="ofs:308" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m:306">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:307">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:308">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id">16</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m:306">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:307">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:308">ofs</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">cl</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span>) <span class="id">ofs</span> <span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true;</a></span> <span class="id">auto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">cl</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">decEq</span>. <span class="id">decEq</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext_zero_ext">Int.sign_ext_zero_ext</a></span>. <span class="id">auto</span>. <span class="id">compute;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">loadbytes</span></span> </h2>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.range_perm_loadbytes" class="id"><a name="Mem.range_perm_loadbytes" class="">range_perm_loadbytes:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:309" class="id"><a name="m:309" class="">m</a></span> <span id="b:310" class="id"><a name="b:310" class="">b</a></span> <span id="ofs:311" class="id"><a name="ofs:311" class="">ofs</a></span> <span id="len:312" class="id"><a name="len:312" class="">len,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:309">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:310">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:311">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:311">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#len:312">len</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bytes:313" class="id"><a name="bytes:313" class="">bytes,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:309">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:310">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:311">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len:312">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:313">bytes</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">econstructor</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_range_perm" class="id"><a name="Mem.loadbytes_range_perm" class="">loadbytes_range_perm:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:314" class="id"><a name="m:314" class="">m</a></span> <span id="b:315" class="id"><a name="b:315" class="">b</a></span> <span id="ofs:316" class="id"><a name="ofs:316" class="">ofs</a></span> <span id="len:317" class="id"><a name="len:317" class="">len</a></span> <span id="bytes:318" class="id"><a name="bytes:318" class="">bytes,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:314">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:315">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:316">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len:317">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:318">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:314">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:315">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:316">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:316">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#len:317">len</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">bytes</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">len</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>). <span class="id">auto</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_load" class="id"><a name="Mem.loadbytes_load" class="">loadbytes_load:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:319" class="id"><a name="chunk:319" class="">chunk</a></span> <span id="m:320" class="id"><a name="m:320" class="">m</a></span> <span id="b:321" class="id"><a name="b:321" class="">b</a></span> <span id="ofs:322" class="id"><a name="ofs:322" class="">ofs</a></span> <span id="bytes:323" class="id"><a name="bytes:323" class="">bytes,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:320">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:321">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:322">ofs</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:319">chunk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:323">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:319">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:322">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:319">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:320">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:321">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:322">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:319">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:323">bytes</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_loadbytes" class="id"><a name="Mem.load_loadbytes" class="">load_loadbytes:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:324" class="id"><a name="chunk:324" class="">chunk</a></span> <span id="m:325" class="id"><a name="m:325" class="">m</a></span> <span id="b:326" class="id"><a name="b:326" class="">b</a></span> <span id="ofs:327" class="id"><a name="ofs:327" class="">ofs</a></span> <span id="v:328" class="id"><a name="v:328" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:324">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:325">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:326">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:327">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:328">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bytes:329" class="id"><a name="bytes:329" class="">bytes,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:325">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:326">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:327">ofs</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:324">chunk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:329">bytes</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#v:328">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:324">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:329">bytes</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_valid_access">load_valid_access;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result;</a></span> <span class="id">eauto</span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>) <span class="id">ofs</span> <span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>)<span class="id">;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.getN_length" class="id"><a name="Mem.getN_length" class="">getN_length:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c:330" class="id"><a name="c:330" class="">c</a></span> <span id="n:331" class="id"><a name="n:331" class="">n</a></span> <span id="p:332" class="id"><a name="p:332" class="">p,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n:331">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p:332">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c:330">c</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#n:331">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">auto</span>. <span class="id">decEq;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_length" class="id"><a name="Mem.loadbytes_length" class="">loadbytes_length:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:333" class="id"><a name="m:333" class="">m</a></span> <span id="b:334" class="id"><a name="b:334" class="">b</a></span> <span id="ofs:335" class="id"><a name="ofs:335" class="">ofs</a></span> <span id="n:336" class="id"><a name="n:336" class="">n</a></span> <span id="bytes:337" class="id"><a name="bytes:337" class="">bytes,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:333">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:334">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:335">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:336">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:337">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:337">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n:336">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<span class="id">;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_length">getN_length</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_empty" class="id"><a name="Mem.loadbytes_empty" class="">loadbytes_empty:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:338" class="id"><a name="m:338" class="">m</a></span> <span id="b:339" class="id"><a name="b:339" class="">b</a></span> <span id="ofs:340" class="id"><a name="ofs:340" class="">ofs</a></span> <span id="n:341" class="id"><a name="n:341" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#n:341">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:338">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:339">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:340">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:341">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#Z_to_nat_neg">Z_to_nat_neg;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.getN_concat" class="id"><a name="Mem.getN_concat" class="">getN_concat:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c:342" class="id"><a name="c:342" class="">c</a></span> <span id="n1:343" class="id"><a name="n1:343" class="">n1</a></span> <span id="n2:344" class="id"><a name="n2:344" class="">n2</a></span> <span id="p:345" class="id"><a name="p:345" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memory.html#n1:343">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:344">n2</a></span>)%<span class="id">nat</span> <span class="id"><a href="compcert.common.Memory.html#p:345">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c:342">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:343">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#p:345">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c:342">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:344">n2</a></span> (<span class="id"><a href="compcert.common.Memory.html#p:345">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:343">n1</a></span>) <span class="id"><a href="compcert.common.Memory.html#c:342">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">decEq</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>. <span class="id">simpl</span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n1</span>)) <span class="gallina-kwd">with</span> ((<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id">+</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n1</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_concat" class="id"><a name="Mem.loadbytes_concat" class="">loadbytes_concat:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:346" class="id"><a name="m:346" class="">m</a></span> <span id="b:347" class="id"><a name="b:347" class="">b</a></span> <span id="ofs:348" class="id"><a name="ofs:348" class="">ofs</a></span> <span id="n1:349" class="id"><a name="n1:349" class="">n1</a></span> <span id="n2:350" class="id"><a name="n2:350" class="">n2</a></span> <span id="bytes1:351" class="id"><a name="bytes1:351" class="">bytes1</a></span> <span id="bytes2:352" class="id"><a name="bytes2:352" class="">bytes2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:346">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:347">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:348">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:349">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:351">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:346">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:347">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:348">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:349">n1</a></span>) <span class="id"><a href="compcert.common.Memory.html#n2:350">n2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:352">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#n1:349">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:350">n2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:346">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:347">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:348">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#n1:349">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:350">n2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#bytes1:351">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:352">bytes2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n1</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<span class="id">;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n1</span>) (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n2</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<span class="id">;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.inj_add">Z2Nat.inj_add</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_concat">getN_concat</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">ofs0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">ofs0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n1</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span>. <span class="id">apply</span> <span class="id">r;</span> <span class="id">lia</span>. <span class="id">apply</span> <span class="id">r0;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_split" class="id"><a name="Mem.loadbytes_split" class="">loadbytes_split:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:353" class="id"><a name="m:353" class="">m</a></span> <span id="b:354" class="id"><a name="b:354" class="">b</a></span> <span id="ofs:355" class="id"><a name="ofs:355" class="">ofs</a></span> <span id="n1:356" class="id"><a name="n1:356" class="">n1</a></span> <span id="n2:357" class="id"><a name="n2:357" class="">n2</a></span> <span id="bytes:358" class="id"><a name="bytes:358" class="">bytes,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:353">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:354">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:355">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#n1:356">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:357">n2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:358">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#n1:356">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:357">n2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bytes1:359" class="id"><a name="bytes1:359" class="">bytes1,</a></span> <span class="gallina-kwd">exists</span> <span id="bytes2:360" class="id"><a name="bytes2:360" class="">bytes2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:353">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:354">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:355">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:356">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:359">bytes1</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:353">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:354">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:355">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:356">n1</a></span>) <span class="id"><a href="compcert.common.Memory.html#n2:357">n2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:360">bytes2</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#bytes:358">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:359">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:360">bytes2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> (<span class="id">n1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n2</span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.inj_add">Z2Nat.inj_add</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_concat">getN_concat</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">reflexivity</span>. <span class="id">split</span>. <span class="id">reflexivity</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">apply</span> <span class="id">r;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">apply</span> <span class="id">r;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_rep" class="id"><a name="Mem.load_rep" class="">load_rep:</a></span><br/>
&nbsp;<span class="gallina-kwd">forall</span> <span id="ch:361" class="id"><a name="ch:361" class="">ch</a></span> <span id="m1:362" class="id"><a name="m1:362" class="">m1</a></span> <span id="m2:363" class="id"><a name="m2:363" class="">m2</a></span> <span id="b:364" class="id"><a name="b:364" class="">b</a></span> <span id="ofs:365" class="id"><a name="ofs:365" class="">ofs</a></span> <span id="v1:366" class="id"><a name="v1:366" class="">v1</a></span> <span id="v2:367" class="id"><a name="v2:367" class="">v2,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="z:368" class="id"><a name="z:368" class="">z,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#z:368">z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#ch:361">ch</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:365">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#z:368">z</a></span>) <span class="id"><a href="compcert.common.Memory.html#m1:362">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:365">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#z:368">z</a></span>) <span class="id"><a href="compcert.common.Memory.html#m2:363">m2</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#ch:361">ch</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:362">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:364">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:365">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:366">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#ch:361">ch</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:363">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:364">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:365">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:367">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#v1:366">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:367">v2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">ch</span>) <span class="gallina-kwd">as</span> <span class="id">n;</span> <span class="id">clear</span> <span class="id">Heqn</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">ofs</span> <span class="id">H;</span> <span class="id">induction</span> <span class="id">n;</span> <span class="id">intros;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id">ofs</span> <span class="gallina-kwd">with</span> (<span class="id">ofs+0</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHn</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_assoc">Z.add_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_int64_split" class="id"><a name="Mem.load_int64_split" class="">load_int64_split:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:369" class="id"><a name="m:369" class="">m</a></span> <span id="b:370" class="id"><a name="b:370" class="">b</a></span> <span id="ofs:371" class="id"><a name="ofs:371" class="">ofs</a></span> <span id="v:372" class="id"><a name="v:372" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.common.Memory.html#m:369">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:370">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:371">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:372">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v1:373" class="id"><a name="v1:373" class="">v1</a></span> <span id="v2:374" class="id"><a name="v2:374" class="">v2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m:369">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:370">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:371">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#v1:373">v1</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#v2:374">v2</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m:369">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:370">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:371">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">4</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#v2:374">v2</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#v1:373">v1</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v:372">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.longofwords">Val.longofwords</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:373">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:374">v2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_valid_access">load_valid_access;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_loadbytes">load_loadbytes</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="id">simpl</span>. <span class="id">intros</span> <span class="id">[bytes</span> <span class="id">[LB</span> <span class="id">EQ]]</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id">8</span> <span class="gallina-kwd">with</span> (<span class="id">4</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">4</span>) <span class="gallina-kwd">in</span> <span class="id">LB</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_split">loadbytes_split</a></span>. <span class="id">eexact</span> <span class="id">LB</span>. <span class="id">lia</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">bytes1</span> &amp; <span class="id">bytes2</span> &amp; <span class="id">LB1</span> &amp; <span class="id">LB2</span> &amp; <span class="id">APP</span>).<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id">4</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span>) <span class="gallina-kwd">in</span> <span class="id">LB1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_load">loadbytes_load</a></span>. <span class="id">eexact</span> <span class="id">LB1</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_trans">Z.divide_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">8;</span> <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id">4</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span>) <span class="gallina-kwd">in</span> <span class="id">LB2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_load">loadbytes_load</a></span>. <span class="id">eexact</span> <span class="id">LB2</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_trans">Z.divide_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">8;</span> <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">2;</span> <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id">bytes1</span> <span class="gallina-kwd">else</span> <span class="id">bytes2</span>))<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id">bytes2</span> <span class="gallina-kwd">else</span> <span class="id">bytes1</span>)).<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ</span>. <span class="id">rewrite</span> <span class="id">APP</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_int64">decode_val_int64;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">loadbytes_length;</a></span> <span class="id">eauto</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">loadbytes_length;</a></span> <span class="id">eauto</span>. <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.addressing_int64_split" class="id"><a name="Mem.addressing_int64_split" class="">addressing_int64_split:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i:375" class="id"><a name="i:375" class="">i,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id">8</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#i:375">i</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Memory.html#i:375">i</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">4</span>))) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#i:375">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">4</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_unsigned">Ptrofs.add_unsigned</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">4</span>))) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">4</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span> (<span class="id">symmetry;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.agree32_of_int">Ptrofs.agree32_of_int</a></span><span class="id">;</span> <span class="id">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">4</span>)) <span class="gallina-kwd">with</span> <span class="id">4</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Zdivide_interval">Zdivide_interval</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">i</span>) <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.modulus">Ptrofs.modulus</a></span> <span class="id">8</span>).<br/>
&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range">Ptrofs.unsigned_range</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zwordsize">Ptrofs.zwordsize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">3</span>)).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.modulus">Ptrofs.modulus</a></span><span class="id">,</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zwordsize">Ptrofs.zwordsize</a></span><span class="id">,</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.wordsize">Ptrofs.wordsize</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Wordsize_Ptrofs.wordsize">Wordsize_Ptrofs.wordsize</a></span>. <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadv_int64_split" class="id"><a name="Mem.loadv_int64_split" class="">loadv_int64_split:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:376" class="id"><a name="m:376" class="">m</a></span> <span id="a:377" class="id"><a name="a:377" class="">a</a></span> <span id="v:378" class="id"><a name="v:378" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.common.Memory.html#m:376">m</a></span> <span class="id"><a href="compcert.common.Memory.html#a:377">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:378">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v1:379" class="id"><a name="v1:379" class="">v1</a></span> <span id="v2:380" class="id"><a name="v2:380" class="">v2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m:376">m</a></span> <span class="id"><a href="compcert.common.Memory.html#a:377">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#v1:379">v1</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#v2:380">v2</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m:376">m</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.common.Memory.html#a:377">a</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">4</span>))) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#v2:380">v2</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#v1:379">v1</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v:378">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.longofwords">Val.longofwords</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:379">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:380">v2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">a;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_int64_split">load_int64_split;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">v1</span> &amp; <span class="id">v2</span> &amp; <span class="id">L1</span> &amp; <span class="id">L2</span> &amp; <span class="id">EQ</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span><span class="id">;</span> <span class="id">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">NV:</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">4</span>))) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">4</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.addressing_int64_split">addressing_int64_split;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_valid_access">load_valid_access</a></span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">v1,</span> <span class="id">v2</span>.<br/>
<span class="vernacular">Opaque</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">NV</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">store</span></span> </h2>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_store" class="id"><a name="Mem.valid_access_store" class="">valid_access_store:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:381" class="id"><a name="m1:381" class="">m1</a></span> <span id="chunk:382" class="id"><a name="chunk:382" class="">chunk</a></span> <span id="b:383" class="id"><a name="b:383" class="">b</a></span> <span id="ofs:384" class="id"><a name="ofs:384" class="">ofs</a></span> <span id="v:385" class="id"><a name="v:385" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:381">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:382">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:383">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:384">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">{</a></span> <span id="m2:386" class="id"><a name="m2:386" class="">m2:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">|</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:382">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:381">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:383">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:384">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:385">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:386">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m1</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
Defined.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">valid_access_store:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="Mem.STORE" class="id"><a name="Mem.STORE" class="">STORE</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.STORE.chunk" class="id"><a name="Mem.STORE.chunk" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.STORE.m1" class="id"><a name="Mem.STORE.m1" class="">m1:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.STORE.b" class="id"><a name="Mem.STORE.b" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.STORE.ofs" class="id"><a name="Mem.STORE.ofs" class="">ofs:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.STORE.v" class="id"><a name="Mem.STORE.v" class="">v:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.STORE.m2" class="id"><a name="Mem.STORE.m2" class="">m2:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="Mem.STORE.STORE" class="id"><a name="Mem.STORE.STORE" class="">STORE:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.store_access" class="id"><a name="Mem.store_access" class="">store_access:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="gallina-kwd">in</span> <span class="id">STORE</span>. <span class="id">destruct</span> ( <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.store_mem_contents" class="id"><a name="Mem.store_mem_contents" class="">store_mem_contents:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>) <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>) <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="gallina-kwd">in</span> <span class="id">STORE</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_store_1" class="id"><a name="Mem.perm_store_1" class="">perm_store_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':394" class="id"><a name="b':394" class="">b'</a></span> <span id="ofs':395" class="id"><a name="ofs':395" class="">ofs'</a></span> <span id="k:396" class="id"><a name="k:396" class="">k</a></span> <span id="p:397" class="id"><a name="p:397" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':394">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':395">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#k:396">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:397">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':394">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':395">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#k:396">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:397">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_access">store_access;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_store_2" class="id"><a name="Mem.perm_store_2" class="">perm_store_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':398" class="id"><a name="b':398" class="">b'</a></span> <span id="ofs':399" class="id"><a name="ofs':399" class="">ofs'</a></span> <span id="k:400" class="id"><a name="k:400" class="">k</a></span> <span id="p:401" class="id"><a name="p:401" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':398">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':399">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#k:400">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:401">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':398">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':399">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#k:400">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:401">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>.  <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_access">store_access</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">perm_store_1</span> <span class="id">perm_store_2:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.nextblock_store" class="id"><a name="Mem.nextblock_store" class="">nextblock_store:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="gallina-kwd">in</span> <span class="id">STORE</span>. <span class="id">destruct</span> ( <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_valid_block_1" class="id"><a name="Mem.store_valid_block_1" class="">store_valid_block_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':402" class="id"><a name="b':402" class="">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':402">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':402">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_valid_block_2" class="id"><a name="Mem.store_valid_block_2" class="">store_valid_block_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':403" class="id"><a name="b':403" class="">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':403">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':403">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">store_valid_block_1</span> <span class="id">store_valid_block_2:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_valid_access_1" class="id"><a name="Mem.store_valid_access_1" class="">store_valid_access_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk':404" class="id"><a name="chunk':404" class="">chunk'</a></span> <span id="b':405" class="id"><a name="b':405" class="">b'</a></span> <span id="ofs':406" class="id"><a name="ofs':406" class="">ofs'</a></span> <span id="p:407" class="id"><a name="p:407" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':404">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':405">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':406">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#p:407">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':404">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':405">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':406">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#p:407">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">try</span> <span class="id">red;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_valid_access_2" class="id"><a name="Mem.store_valid_access_2" class="">store_valid_access_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk':408" class="id"><a name="chunk':408" class="">chunk'</a></span> <span id="b':409" class="id"><a name="b':409" class="">b'</a></span> <span id="ofs':410" class="id"><a name="ofs':410" class="">ofs'</a></span> <span id="p:411" class="id"><a name="p:411" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':408">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':409">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':410">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#p:411">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':408">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':409">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':410">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#p:411">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">try</span> <span class="id">red;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_valid_access_3" class="id"><a name="Mem.store_valid_access_3" class="">store_valid_access_3:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="gallina-kwd">in</span> <span class="id">STORE</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">store_valid_access_1</span> <span class="id">store_valid_access_2</span> <span class="id">store_valid_access_3:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_store_similar" class="id"><a name="Mem.load_store_similar" class="">load_store_similar:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk':412" class="id"><a name="chunk':412" class="">chunk',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':412">chunk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':412">chunk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v':413" class="id"><a name="v':413" class="">v',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':412">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v':413">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_val">decode_encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':412">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#v':413">v'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof83')">Proof.</span></div>
<div class="proofscript" id="proof83">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_load">valid_access_load</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id">chunk'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_compat">valid_access_compat</a></span>. <span class="id">symmetry;</span> <span class="id">eauto</span>. <span class="id">auto</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[v'</span> <span class="id">LOAD]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">v';</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">B</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk'</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_same">getN_setN_same</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_val_general">decode_encode_val_general</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj">Nat2Z.inj</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_store_similar_2" class="id"><a name="Mem.load_store_similar_2" class="">load_store_similar_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk':414" class="id"><a name="chunk':414" class="">chunk',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':414">chunk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':414">chunk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':414">chunk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':414">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':414">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof84')">Proof.</span></div>
<div class="proofscript" id="proof84">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.load_store_similar">load_store_similar</a></span> <span class="id">chunk'</span>) <span class="gallina-kwd">as</span> <span class="id">[v'</span> <span class="id">[A</span> <span class="id">B]];</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">A</span>. <span class="id">decEq</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_val_similar">decode_encode_val_similar</a></span> <span class="gallina-kwd">with</span> (<span class="id">chunk1</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_store_same" class="id"><a name="Mem.load_store_same" class="">load_store_same:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</span></div>
<div class="proofscript" id="proof85">
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_similar_2">load_store_similar_2;</a></span> <span class="id">auto</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_store_other" class="id"><a name="Mem.load_store_other" class="">load_store_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk':415" class="id"><a name="chunk':415" class="">chunk'</a></span> <span id="b':416" class="id"><a name="b':416" class="">b'</a></span> <span id="ofs':417" class="id"><a name="ofs':417" class="">ofs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b':416">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span><br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#ofs':417">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':415">chunk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span><br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':417">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':415">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':416">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':417">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':415">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':416">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':417">ofs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">chunk'</span> <span class="id">b'</span> <span class="id">ofs'</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">decEq</span>. <span class="id">decEq</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b'</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span>). <span class="id">subst</span> <span class="id">b'</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_outside">getN_setN_outside</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_store_same" class="id"><a name="Mem.loadbytes_store_same" class="">loadbytes_store_same:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>) <span class="gallina-kwd">by</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span>)) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_same">getN_setN_same</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_store_other" class="id"><a name="Mem.loadbytes_store_other" class="">loadbytes_store_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':418" class="id"><a name="b':418" class="">b'</a></span> <span id="ofs':419" class="id"><a name="ofs':419" class="">ofs'</a></span> <span id="n:420" class="id"><a name="n:420" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b':418">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span><br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#n:420">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">0</span><br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#ofs':419">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#n:420">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span><br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':419">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':418">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':419">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#n:420">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':418">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':419">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#n:420">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">b'</span> <span class="id">ofs'</span> (<span class="id">ofs'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">decEq</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b'</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span>). <span class="id">subst</span> <span class="id">b'</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">n</span> <span class="id">0</span>) <span class="gallina-kwd">as</span> <span class="id">[z</span> <span class="id">|</span> <span class="id">n0]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Z_to_nat_neg">Z_to_nat_neg</a></span> <span class="id">_</span> <span class="id">z</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_outside">getN_setN_outside</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span>. <span class="id">auto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intro;</span> <span class="id">elim</span> <span class="id">n0;</span> <span class="id">red;</span> <span class="id">intros;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.setN_in" class="id"><a name="Mem.setN_in" class="">setN_in:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="vl:421" class="id"><a name="vl:421" class="">vl</a></span> <span id="p:422" class="id"><a name="p:422" class="">p</a></span> <span id="q:423" class="id"><a name="q:423" class="">q</a></span> <span id="c:424" class="id"><a name="c:424" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#p:422">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#q:423">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#p:422">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:421">vl</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q:423">q</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl:421">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#p:422">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c:424">c</a></span>)) <span class="id"><a href="compcert.common.Memory.html#vl:421">vl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">vl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">length</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">p</span> <span class="id">q</span>). <span class="id">subst</span> <span class="id">q</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gss">ZMap.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">apply</span> <span class="id">IHvl</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.getN_in" class="id"><a name="Mem.getN_in" class="">getN_in:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="c:425" class="id"><a name="c:425" class="">c</a></span> <span id="q:426" class="id"><a name="q:426" class="">q</a></span> <span id="n:427" class="id"><a name="n:427" class="">n</a></span> <span id="p:428" class="id"><a name="p:428" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#p:428">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#q:426">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#p:428">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n:427">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q:426">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c:425">c</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n:427">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p:428">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c:425">c</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">p</span> <span class="id">q</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">q</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">apply</span> <span class="id">IHn</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE">STORE</a></span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">perm_store_1</span> <span class="id">perm_store_2:</span> <span class="id">mem</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">store_valid_block_1</span> <span class="id">store_valid_block_2:</span> <span class="id">mem</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">store_valid_access_1</span> <span class="id">store_valid_access_2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">store_valid_access_3:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.load_store_overlap" class="id"><a name="Mem.load_store_overlap" class="">load_store_overlap:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:429" class="id"><a name="chunk:429" class="">chunk</a></span> <span id="m1:430" class="id"><a name="m1:430" class="">m1</a></span> <span id="b:431" class="id"><a name="b:431" class="">b</a></span> <span id="ofs:432" class="id"><a name="ofs:432" class="">ofs</a></span> <span id="v:433" class="id"><a name="v:433" class="">v</a></span> <span id="m2:434" class="id"><a name="m2:434" class="">m2</a></span> <span id="chunk':435" class="id"><a name="chunk':435" class="">chunk'</a></span> <span id="ofs':436" class="id"><a name="ofs':436" class="">ofs'</a></span> <span id="v':437" class="id"><a name="v':437" class="">v',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:429">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:430">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:431">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:432">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:433">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:434">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':435">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:434">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:431">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':436">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v':437">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs':436">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':435">chunk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:432">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs:432">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:429">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':436">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="mv1:438" class="id"><a name="mv1:438" class="">mv1</a></span> <span id="mvl:439" class="id"><a name="mvl:439" class="">mvl</a></span> <span id="mv1':440" class="id"><a name="mv1':440" class="">mv1'</a></span> <span id="mvl':441" class="id"><a name="mvl':441" class="">mvl',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_encoding">shape_encoding</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:429">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#v:433">v</a></span> (<span class="id"><a href="compcert.common.Memory.html#mv1:438">mv1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memory.html#mvl:439">mvl</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span>  <span class="id"><a href="compcert.common.Memdata.html#shape_decoding">shape_decoding</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':435">chunk'</a></span> (<span class="id"><a href="compcert.common.Memory.html#mv1':440">mv1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memory.html#mvl':441">mvl'</a></span>) <span class="id"><a href="compcert.common.Memory.html#v':437">v'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span>  (   (<span class="id"><a href="compcert.common.Memory.html#ofs':436">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:432">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Memory.html#mv1':440">mv1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#mv1:438">mv1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">\/</span> (<span class="id"><a href="compcert.common.Memory.html#ofs':436">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:432">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memory.html#mv1':440">mv1'</a></span> <span class="id"><a href="compcert.common.Memory.html#mvl:439">mvl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">\/</span> (<span class="id"><a href="compcert.common.Memory.html#ofs':436">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:432">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memory.html#mv1:438">mv1</a></span> <span class="id"><a href="compcert.common.Memory.html#mvl':441">mvl'</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result;</a></span> <span class="id">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">c</span> <span class="id">:=</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id">m1</span>)<span class="id">#b</span>). <span class="id">intros</span> <span class="id">V'</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat_pos">size_chunk_nat_pos</a></span> <span class="id">chunk</span>) <span class="gallina-kwd">as</span> <span class="id">[sz</span> <span class="id">SIZE]</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat_pos">size_chunk_nat_pos</a></span> <span class="id">chunk'</span>) <span class="gallina-kwd">as</span> <span class="id">[sz'</span> <span class="id">SIZE']</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id">chunk</span> <span class="id">v</span>) <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">mv1</span> <span class="id">mvl]</span> <span class="id">eqn:ENC</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="id">chunk</span> <span class="id">v</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">ENC;</span> <span class="id">simpl;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">c'</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> (<span class="id">mv1::mvl</span>) <span class="id">ofs</span> <span class="id">c</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">mv1,</span> <span class="id">mvl,</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">ofs'</span> <span class="id">c'</span>)<span class="id">,</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id">sz'</span> (<span class="id">ofs'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id">c'</span>).<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">ENC</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_shape">encode_val_shape</a></span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">rewrite</span> <span class="id">V',</span> <span class="id">SIZE'</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_shape">decode_val_shape</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">ofs'</span> <span class="id">ofs</span>).<br/>
<span class="id">-</span> <span class="id">subst</span> <span class="id">ofs'</span>. <span class="id">left;</span> <span class="id">split</span>. <span class="id">auto</span>. <span class="id">unfold</span> <span class="id">c'</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gss">ZMap.gss</a></span>.<br/>
<span class="id">-</span> <span class="id">right</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">ofs'</span>).<br/>
<span class="comment">(*&nbsp;If&nbsp;ofs&nbsp;&lt;&nbsp;ofs':&nbsp;&nbsp;the&nbsp;load&nbsp;reads&nbsp;(at&nbsp;ofs')&nbsp;a&nbsp;continuation&nbsp;byte&nbsp;from&nbsp;the&nbsp;write.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ofs&nbsp;&nbsp;&nbsp;ofs'&nbsp;&nbsp;&nbsp;ofs+|chunk|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-------------------]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;write<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-------------------]&nbsp;&nbsp;read<br/>
*)</span><br/>
<span class="id">+</span> <span class="id">left;</span> <span class="id">split</span>. <span class="id">lia</span>. <span class="id">unfold</span> <span class="id">c'</span>. <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_in">setN_in</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id">mv1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">mvl</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">ENC;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv;</a></span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">length</span> <span class="gallina-kwd">in</span> <span class="id">H3</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span>. <span class="id">lia</span>.<br/>
<span class="comment">(*&nbsp;If&nbsp;ofs&nbsp;&gt;&nbsp;ofs':&nbsp;&nbsp;the&nbsp;load&nbsp;reads&nbsp;(at&nbsp;ofs)&nbsp;the&nbsp;first&nbsp;byte&nbsp;from&nbsp;the&nbsp;write.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ofs'&nbsp;&nbsp;&nbsp;ofs&nbsp;&nbsp;&nbsp;ofs'+|chunk'|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-------------------]&nbsp;&nbsp;write<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[----------------]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read<br/>
*)</span><br/>
<span class="id">+</span> <span class="id">right;</span> <span class="id">split</span>. <span class="id">lia</span>. <span class="id">replace</span> <span class="id">mv1</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">ofs</span> <span class="id">c'</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_in">getN_in</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">sz'</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="id">rewrite</span> <span class="id">SIZE'</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">c'</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gss">ZMap.gss</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.compat_pointer_chunks" class="id"><a name="Mem.compat_pointer_chunks" class="">compat_pointer_chunks</a></span> (<span id="chunk1:442" class="id"><a name="chunk1:442" class="">chunk1</a></span> <span id="chunk2:443" class="id"><a name="chunk2:443" class="">chunk2:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#chunk1:442">chunk1,</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:443">chunk2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span>)<span class="id">,</span> (<span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>)<span class="id">,</span> (<span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.compat_pointer_chunks_true" class="id"><a name="Mem.compat_pointer_chunks_true" class="">compat_pointer_chunks_true:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk1:446" class="id"><a name="chunk1:446" class="">chunk1</a></span> <span id="chunk2:447" class="id"><a name="chunk2:447" class="">chunk2,</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#chunk1:446">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1:446">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1:446">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1:446">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#chunk2:447">chunk2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:447">chunk2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:447">chunk2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:447">chunk2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#quantity_chunk">quantity_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1:446">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#quantity_chunk">quantity_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:447">chunk2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.compat_pointer_chunks">compat_pointer_chunks</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1:446">chunk1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:447">chunk2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span> <span class="gallina-kwd">as</span> <span class="id">[P|[P|[P|P]]];</span> <span class="id">destruct</span> <span class="id">H0</span> <span class="gallina-kwd">as</span> <span class="id">[Q|[Q|[Q|Q]]];</span><br/>
&nbsp;&nbsp;<span class="id">subst;</span> <span class="id">red;</span> <span class="id">auto;</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_pointer_store" class="id"><a name="Mem.load_pointer_store" class="">load_pointer_store:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:448" class="id"><a name="chunk:448" class="">chunk</a></span> <span id="m1:449" class="id"><a name="m1:449" class="">m1</a></span> <span id="b:450" class="id"><a name="b:450" class="">b</a></span> <span id="ofs:451" class="id"><a name="ofs:451" class="">ofs</a></span> <span id="v:452" class="id"><a name="v:452" class="">v</a></span> <span id="m2:453" class="id"><a name="m2:453" class="">m2</a></span> <span id="chunk':454" class="id"><a name="chunk':454" class="">chunk'</a></span> <span id="b':455" class="id"><a name="b':455" class="">b'</a></span> <span id="ofs':456" class="id"><a name="ofs':456" class="">ofs'</a></span> <span id="v_b:457" class="id"><a name="v_b:457" class="">v_b</a></span> <span id="v_o:458" class="id"><a name="v_o:458" class="">v_o,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:448">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:449">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:450">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:451">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:452">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:453">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':454">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:453">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':455">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':456">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#v_b:457">v_b</a></span> <span class="id"><a href="compcert.common.Memory.html#v_o:458">v_o</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#v:452">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#v_b:457">v_b</a></span> <span class="id"><a href="compcert.common.Memory.html#v_o:458">v_o</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.compat_pointer_chunks">compat_pointer_chunks</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:448">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':454">chunk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Memory.html#b':455">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#b:450">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':456">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:451">ofs</a></span>)<br/>
&nbsp;&nbsp;<span class="id">\/</span> (<span class="id"><a href="compcert.common.Memory.html#b':455">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b:450">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':456">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':454">chunk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:451">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:451">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:448">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':456">ofs'</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b'</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">subst</span> <span class="id">b'</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">ofs'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk'</span>) <span class="id">ofs</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) <span class="id">ofs'</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_overlap">load_store_overlap;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">mv1</span> &amp; <span class="id">mvl</span> &amp; <span class="id">mv1'</span> &amp; <span class="id">mvl'</span> &amp; <span class="id">ENC</span> &amp; <span class="id">DEC</span> &amp; <span class="id">CASES</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">DEC;</span> <span class="id">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">CASES</span> <span class="gallina-kwd">as</span> <span class="id">[</span>(<span class="id">A</span> &amp; <span class="id">B</span>) <span class="id">|</span> <span class="id">[</span>(<span class="id">A</span> &amp; <span class="id">B</span>) <span class="id">|</span> (<span class="id">A</span> &amp; <span class="id">B</span>)<span class="id">]]</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Same&nbsp;offset&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">subst</span>. <span class="id">inv</span> <span class="id">ENC</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> (<span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">auto</span> <span class="id">||</span> <span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;<span class="id">left;</span> <span class="id">split</span>. <span class="id">rewrite</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="gallina-kwd">as</span> <span class="id">[P|[P|[P|P]]];</span> <span class="id">subst</span> <span class="id">chunk';</span> <span class="id">destruct</span> <span class="id">v0;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H3;</span><br/>
&nbsp;&nbsp;<span class="id">try</span> <span class="id">congruence;</span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.compat_pointer_chunks_true">compat_pointer_chunks_true;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;ofs'&nbsp;&gt;&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ENC</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id">H10;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">j</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">inv</span> <span class="id">P</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id">H8;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">n</span> &amp; <span class="id">P</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id">H2;</span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;ofs'&nbsp;&lt;&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H7;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">j</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">subst</span> <span class="id">mv1</span>. <span class="id">inv</span> <span class="id">ENC</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_store_pointer_overlap" class="id"><a name="Mem.load_store_pointer_overlap" class="">load_store_pointer_overlap:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:459" class="id"><a name="chunk:459" class="">chunk</a></span> <span id="m1:460" class="id"><a name="m1:460" class="">m1</a></span> <span id="b:461" class="id"><a name="b:461" class="">b</a></span> <span id="ofs:462" class="id"><a name="ofs:462" class="">ofs</a></span> <span id="v_b:463" class="id"><a name="v_b:463" class="">v_b</a></span> <span id="v_o:464" class="id"><a name="v_o:464" class="">v_o</a></span> <span id="m2:465" class="id"><a name="m2:465" class="">m2</a></span> <span id="chunk':466" class="id"><a name="chunk':466" class="">chunk'</a></span> <span id="ofs':467" class="id"><a name="ofs':467" class="">ofs'</a></span> <span id="v:468" class="id"><a name="v:468" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:459">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:460">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:461">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:462">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#v_b:463">v_b</a></span> <span class="id"><a href="compcert.common.Memory.html#v_o:464">v_o</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:465">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':466">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:465">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:461">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':467">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:468">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs':467">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:462">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs':467">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':466">chunk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:462">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs:462">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:459">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':467">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#v:468">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof94')">Proof.</span></div>
<div class="proofscript" id="proof94">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_overlap">load_store_overlap;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">mv1</span> &amp; <span class="id">mvl</span> &amp; <span class="id">mv1'</span> &amp; <span class="id">mvl'</span> &amp; <span class="id">ENC</span> &amp; <span class="id">DEC</span> &amp; <span class="id">CASES</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">CASES</span> <span class="gallina-kwd">as</span> <span class="id">[</span>(<span class="id">A</span> &amp; <span class="id">B</span>) <span class="id">|</span> <span class="id">[</span>(<span class="id">A</span> &amp; <span class="id">B</span>) <span class="id">|</span> (<span class="id">A</span> &amp; <span class="id">B</span>)<span class="id">]]</span>.<br/>
<span class="id">-</span> <span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">ENC</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id">H9;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">j</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">subst</span> <span class="id">mv1'</span>. <span class="id">inv</span> <span class="id">DEC</span>. <span class="id">congruence</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id">H5;</span> <span class="id">eauto</span>. <span class="id">intros;</span> <span class="id">subst</span>. <span class="id">inv</span> <span class="id">DEC;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">inv</span> <span class="id">DEC</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id">H10;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">j</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">subst</span> <span class="id">mv1</span>. <span class="id">inv</span> <span class="id">ENC</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id">H8;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">n</span> &amp; <span class="id">P</span>). <span class="id">subst</span> <span class="id">mv1</span>. <span class="id">inv</span> <span class="id">ENC</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_store_pointer_mismatch" class="id"><a name="Mem.load_store_pointer_mismatch" class="">load_store_pointer_mismatch:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:469" class="id"><a name="chunk:469" class="">chunk</a></span> <span id="m1:470" class="id"><a name="m1:470" class="">m1</a></span> <span id="b:471" class="id"><a name="b:471" class="">b</a></span> <span id="ofs:472" class="id"><a name="ofs:472" class="">ofs</a></span> <span id="v_b:473" class="id"><a name="v_b:473" class="">v_b</a></span> <span id="v_o:474" class="id"><a name="v_o:474" class="">v_o</a></span> <span id="m2:475" class="id"><a name="m2:475" class="">m2</a></span> <span id="chunk':476" class="id"><a name="chunk':476" class="">chunk'</a></span> <span id="v:477" class="id"><a name="v:477" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:469">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:470">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:471">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:472">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#v_b:473">v_b</a></span> <span class="id"><a href="compcert.common.Memory.html#v_o:474">v_o</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:475">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':476">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:475">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:471">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:472">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:477">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~compat_pointer_chunks</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:469">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':476">chunk'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#v:477">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof95')">Proof.</span></div>
<div class="proofscript" id="proof95">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_overlap">load_store_overlap;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk'</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">mv1</span> &amp; <span class="id">mvl</span> &amp; <span class="id">mv1'</span> &amp; <span class="id">mvl'</span> &amp; <span class="id">ENC</span> &amp; <span class="id">DEC</span> &amp; <span class="id">CASES</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">CASES</span> <span class="gallina-kwd">as</span> <span class="id">[</span>(<span class="id">A</span> &amp; <span class="id">B</span>) <span class="id">|</span> <span class="id">[</span>(<span class="id">A</span> &amp; <span class="id">B</span>) <span class="id">|</span> (<span class="id">A</span> &amp; <span class="id">B</span>)<span class="id">]];</span> <span class="id">try</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ENC;</span> <span class="id">inv</span> <span class="id">DEC;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">elim</span> <span class="id">H1</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.compat_pointer_chunks_true">compat_pointer_chunks_true;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.store_similar_chunks" class="id"><a name="Mem.store_similar_chunks" class="">store_similar_chunks:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk1:478" class="id"><a name="chunk1:478" class="">chunk1</a></span> <span id="chunk2:479" class="id"><a name="chunk2:479" class="">chunk2</a></span> <span id="v1:480" class="id"><a name="v1:480" class="">v1</a></span> <span id="v2:481" class="id"><a name="v2:481" class="">v2</a></span> <span id="m:482" class="id"><a name="m:482" class="">m</a></span> <span id="b:483" class="id"><a name="b:483" class="">b</a></span> <span id="ofs:484" class="id"><a name="ofs:484" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1:478">chunk1</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:480">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:479">chunk2</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:481">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1:478">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:479">chunk2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1:478">chunk1</a></span> <span class="id"><a href="compcert.common.Memory.html#m:482">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:483">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:484">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:480">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2:479">chunk2</a></span> <span class="id"><a href="compcert.common.Memory.html#m:482">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:483">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:484">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:481">v2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof96')">Proof.</span></div>
<div class="proofscript" id="proof96">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="id">chunk1</span> <span class="id">v1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="id">chunk2</span> <span class="id">v2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id">chunk1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id">chunk2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mkmem_ext">mkmem_ext;</a></span> <span class="id">auto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> <span class="id">n</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_compat">valid_access_compat</a></span> <span class="gallina-kwd">with</span> <span class="id">chunk1;</span> <span class="id">auto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> <span class="id">n</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_compat">valid_access_compat</a></span> <span class="gallina-kwd">with</span> <span class="id">chunk2;</span> <span class="id">auto</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_signed_unsigned_8" class="id"><a name="Mem.store_signed_unsigned_8" class="">store_signed_unsigned_8:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:485" class="id"><a name="m:485" class="">m</a></span> <span id="b:486" class="id"><a name="b:486" class="">b</a></span> <span id="ofs:487" class="id"><a name="ofs:487" class="">ofs</a></span> <span id="v:488" class="id"><a name="v:488" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m:485">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:486">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:487">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:488">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m:485">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:486">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:487">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:488">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof97')">Proof.</span></div>
<div class="proofscript" id="proof97">
 <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int8_signed_unsigned">encode_val_int8_signed_unsigned</a></span>. <span class="id">auto</span>. Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_signed_unsigned_16" class="id"><a name="Mem.store_signed_unsigned_16" class="">store_signed_unsigned_16:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:489" class="id"><a name="m:489" class="">m</a></span> <span id="b:490" class="id"><a name="b:490" class="">b</a></span> <span id="ofs:491" class="id"><a name="ofs:491" class="">ofs</a></span> <span id="v:492" class="id"><a name="v:492" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m:489">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:490">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:491">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:492">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m:489">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:490">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:491">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:492">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof98')">Proof.</span></div>
<div class="proofscript" id="proof98">
 <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int16_signed_unsigned">encode_val_int16_signed_unsigned</a></span>. <span class="id">auto</span>. Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_int8_zero_ext" class="id"><a name="Mem.store_int8_zero_ext" class="">store_int8_zero_ext:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:493" class="id"><a name="m:493" class="">m</a></span> <span id="b:494" class="id"><a name="b:494" class="">b</a></span> <span id="ofs:495" class="id"><a name="ofs:495" class="">ofs</a></span> <span id="n:496" class="id"><a name="n:496" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m:493">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:494">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:495">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">8</span> <span class="id"><a href="compcert.common.Memory.html#n:496">n</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m:493">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:494">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:495">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memory.html#n:496">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof99')">Proof.</span></div>
<div class="proofscript" id="proof99">
 <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int8_zero_ext">encode_val_int8_zero_ext</a></span>. <span class="id">auto</span>. Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_int8_sign_ext" class="id"><a name="Mem.store_int8_sign_ext" class="">store_int8_sign_ext:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:497" class="id"><a name="m:497" class="">m</a></span> <span id="b:498" class="id"><a name="b:498" class="">b</a></span> <span id="ofs:499" class="id"><a name="ofs:499" class="">ofs</a></span> <span id="n:500" class="id"><a name="n:500" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m:497">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:498">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:499">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">8</span> <span class="id"><a href="compcert.common.Memory.html#n:500">n</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m:497">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:498">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:499">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memory.html#n:500">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof100')">Proof.</span></div>
<div class="proofscript" id="proof100">
 <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int8_sign_ext">encode_val_int8_sign_ext</a></span>. <span class="id">auto</span>. Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_int16_zero_ext" class="id"><a name="Mem.store_int16_zero_ext" class="">store_int16_zero_ext:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:501" class="id"><a name="m:501" class="">m</a></span> <span id="b:502" class="id"><a name="b:502" class="">b</a></span> <span id="ofs:503" class="id"><a name="ofs:503" class="">ofs</a></span> <span id="n:504" class="id"><a name="n:504" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m:501">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:502">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:503">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">16</span> <span class="id"><a href="compcert.common.Memory.html#n:504">n</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m:501">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:502">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:503">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memory.html#n:504">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof101')">Proof.</span></div>
<div class="proofscript" id="proof101">
 <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int16_zero_ext">encode_val_int16_zero_ext</a></span>. <span class="id">auto</span>. Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_int16_sign_ext" class="id"><a name="Mem.store_int16_sign_ext" class="">store_int16_sign_ext:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:505" class="id"><a name="m:505" class="">m</a></span> <span id="b:506" class="id"><a name="b:506" class="">b</a></span> <span id="ofs:507" class="id"><a name="ofs:507" class="">ofs</a></span> <span id="n:508" class="id"><a name="n:508" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m:505">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:506">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:507">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">16</span> <span class="id"><a href="compcert.common.Memory.html#n:508">n</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m:505">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:506">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:507">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memory.html#n:508">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof102')">Proof.</span></div>
<div class="proofscript" id="proof102">
 <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int16_sign_ext">encode_val_int16_sign_ext</a></span>. <span class="id">auto</span>. Qed.</div>
<br/>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">storebytes</span></span>. </h2>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.range_perm_storebytes" class="id"><a name="Mem.range_perm_storebytes" class="">range_perm_storebytes:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:509" class="id"><a name="m1:509" class="">m1</a></span> <span id="b:510" class="id"><a name="b:510" class="">b</a></span> <span id="ofs:511" class="id"><a name="ofs:511" class="">ofs</a></span> <span id="bytes:512" class="id"><a name="bytes:512" class="">bytes,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:509">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:510">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:511">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:511">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:512">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">{</a></span> <span id="m2:513" class="id"><a name="m2:513" class="">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">|</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:509">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:510">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:511">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:512">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:513">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof103')">Proof.</span></div>
<div class="proofscript" id="proof103">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes</span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor;</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
Defined.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_store" class="id"><a name="Mem.storebytes_store" class="">storebytes_store:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:514" class="id"><a name="m1:514" class="">m1</a></span> <span id="b:515" class="id"><a name="b:515" class="">b</a></span> <span id="ofs:516" class="id"><a name="ofs:516" class="">ofs</a></span> <span id="chunk:517" class="id"><a name="chunk:517" class="">chunk</a></span> <span id="v:518" class="id"><a name="v:518" class="">v</a></span> <span id="m2:519" class="id"><a name="m2:519" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:514">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:515">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:516">ofs</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:517">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#v:518">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:519">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:517">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:516">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:517">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:514">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:515">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:516">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:518">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:519">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof104')">Proof.</span></div>
<div class="proofscript" id="proof104">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id">chunk</span> <span class="id">v</span>))) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m1</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mkmem_ext">mkmem_ext;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> <span class="id">n</span>. <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="gallina-kwd">in</span> <span class="id">r</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_storebytes" class="id"><a name="Mem.store_storebytes" class="">store_storebytes:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:520" class="id"><a name="m1:520" class="">m1</a></span> <span id="b:521" class="id"><a name="b:521" class="">b</a></span> <span id="ofs:522" class="id"><a name="ofs:522" class="">ofs</a></span> <span id="chunk:523" class="id"><a name="chunk:523" class="">chunk</a></span> <span id="v:524" class="id"><a name="v:524" class="">v</a></span> <span id="m2:525" class="id"><a name="m2:525" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:523">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:520">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:521">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:522">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:524">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:525">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:520">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:521">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:522">ofs</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:523">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#v:524">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:525">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof105')">Proof.</span></div>
<div class="proofscript" id="proof105">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m1</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id">chunk</span> <span class="id">v</span>))) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mkmem_ext">mkmem_ext;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">v0</span>.  <span class="id">elim</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Section</span> <span id="Mem.STOREBYTES" class="id"><a name="Mem.STOREBYTES" class="">STOREBYTES</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.STOREBYTES.m1" class="id"><a name="Mem.STOREBYTES.m1" class="">m1:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.STOREBYTES.b" class="id"><a name="Mem.STOREBYTES.b" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.STOREBYTES.ofs" class="id"><a name="Mem.STOREBYTES.ofs" class="">ofs:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.STOREBYTES.bytes" class="id"><a name="Mem.STOREBYTES.bytes" class="">bytes:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.STOREBYTES.m2" class="id"><a name="Mem.STOREBYTES.m2" class="">m2:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="Mem.STOREBYTES.STORE" class="id"><a name="Mem.STOREBYTES.STORE" class="">STORE:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.storebytes_access" class="id"><a name="Mem.storebytes_access" class="">storebytes_access:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof106')">Proof.</span></div>
<div class="proofscript" id="proof106">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="gallina-kwd">in</span> <span class="id">STORE</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.storebytes_mem_contents" class="id"><a name="Mem.storebytes_mem_contents" class="">storebytes_mem_contents:</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b</a></span>) <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof107')">Proof.</span></div>
<div class="proofscript" id="proof107">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="gallina-kwd">in</span> <span class="id">STORE</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_storebytes_1" class="id"><a name="Mem.perm_storebytes_1" class="">perm_storebytes_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':532" class="id"><a name="b':532" class="">b'</a></span> <span id="ofs':533" class="id"><a name="ofs':533" class="">ofs'</a></span> <span id="k:534" class="id"><a name="k:534" class="">k</a></span> <span id="p:535" class="id"><a name="p:535" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':532">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':533">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#k:534">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:535">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':532">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':533">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#k:534">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:535">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof108')">Proof.</span></div>
<div class="proofscript" id="proof108">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_access">storebytes_access;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_storebytes_2" class="id"><a name="Mem.perm_storebytes_2" class="">perm_storebytes_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':536" class="id"><a name="b':536" class="">b'</a></span> <span id="ofs':537" class="id"><a name="ofs':537" class="">ofs'</a></span> <span id="k:538" class="id"><a name="k:538" class="">k</a></span> <span id="p:539" class="id"><a name="p:539" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':536">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':537">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#k:538">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:539">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':536">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':537">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#k:538">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:539">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof109')">Proof.</span></div>
<div class="proofscript" id="proof109">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_access">storebytes_access</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">perm_storebytes_1</span> <span class="id">perm_storebytes_2:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_valid_access_1" class="id"><a name="Mem.storebytes_valid_access_1" class="">storebytes_valid_access_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk':540" class="id"><a name="chunk':540" class="">chunk'</a></span> <span id="b':541" class="id"><a name="b':541" class="">b'</a></span> <span id="ofs':542" class="id"><a name="ofs':542" class="">ofs'</a></span> <span id="p:543" class="id"><a name="p:543" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':540">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':541">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':542">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#p:543">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':540">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':541">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':542">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#p:543">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof110')">Proof.</span></div>
<div class="proofscript" id="proof110">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">try</span> <span class="id">red;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_valid_access_2" class="id"><a name="Mem.storebytes_valid_access_2" class="">storebytes_valid_access_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk':544" class="id"><a name="chunk':544" class="">chunk'</a></span> <span id="b':545" class="id"><a name="b':545" class="">b'</a></span> <span id="ofs':546" class="id"><a name="ofs':546" class="">ofs'</a></span> <span id="p:547" class="id"><a name="p:547" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':544">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':545">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':546">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#p:547">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk':544">chunk'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':545">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':546">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#p:547">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof111')">Proof.</span></div>
<div class="proofscript" id="proof111">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">try</span> <span class="id">red;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">storebytes_valid_access_1</span> <span class="id">storebytes_valid_access_2:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.nextblock_storebytes" class="id"><a name="Mem.nextblock_storebytes" class="">nextblock_storebytes:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof112')">Proof.</span></div>
<div class="proofscript" id="proof112">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="gallina-kwd">in</span> <span class="id">STORE</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_valid_block_1" class="id"><a name="Mem.storebytes_valid_block_1" class="">storebytes_valid_block_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':548" class="id"><a name="b':548" class="">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':548">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':548">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof113')">Proof.</span></div>
<div class="proofscript" id="proof113">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_valid_block_2" class="id"><a name="Mem.storebytes_valid_block_2" class="">storebytes_valid_block_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':549" class="id"><a name="b':549" class="">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':549">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':549">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof114')">Proof.</span></div>
<div class="proofscript" id="proof114">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">storebytes_valid_block_1</span> <span class="id">storebytes_valid_block_2:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_range_perm" class="id"><a name="Mem.storebytes_range_perm" class="">storebytes_range_perm:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof115')">Proof.</span></div>
<div class="proofscript" id="proof115">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="gallina-kwd">in</span> <span class="id">STORE</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_storebytes_same" class="id"><a name="Mem.loadbytes_storebytes_same" class="">loadbytes_storebytes_same:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof116')">Proof.</span></div>
<div class="proofscript" id="proof116">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">assert</span> (<span class="id">STORE2:=STORE</span>). <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="gallina-kwd">in</span> <span class="id">STORE2</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">decEq</span>. <span class="id">inv</span> <span class="id">STORE2;</span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.id">Nat2Z.id</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_same">getN_setN_same</a></span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_storebytes_disjoint" class="id"><a name="Mem.loadbytes_storebytes_disjoint" class="">loadbytes_storebytes_disjoint:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':550" class="id"><a name="b':550" class="">b'</a></span> <span id="ofs':551" class="id"><a name="ofs':551" class="">ofs'</a></span> <span id="len:552" class="id"><a name="len:552" class="">len,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#len:552">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b':550">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.lib.Intv.html#disjoint">Intv.disjoint</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs':551">ofs',</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':551">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#len:552">len</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':550">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':551">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#len:552">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':550">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':551">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#len:552">len</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof117')">Proof.</span></div>
<div class="proofscript" id="proof117">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">b'</span> <span class="id">ofs'</span> (<span class="id">ofs'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">len</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b'</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span>). <span class="id">subst</span> <span class="id">b'</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_disjoint">getN_setN_disjoint</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">n</span>. <span class="id">red;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_storebytes_other" class="id"><a name="Mem.loadbytes_storebytes_other" class="">loadbytes_storebytes_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':553" class="id"><a name="b':553" class="">b'</a></span> <span id="ofs':554" class="id"><a name="ofs':554" class="">ofs'</a></span> <span id="len:555" class="id"><a name="len:555" class="">len,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#len:555">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b':553">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span><br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#ofs':554">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#len:555">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span><br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':554">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':553">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':554">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#len:555">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':553">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':554">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#len:555">len</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof118')">Proof.</span></div>
<div class="proofscript" id="proof118">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_storebytes_disjoint">loadbytes_storebytes_disjoint;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">right</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Intv.html#disjoint_range">Intv.disjoint_range</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_storebytes_other" class="id"><a name="Mem.load_storebytes_other" class="">load_storebytes_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:556" class="id"><a name="chunk:556" class="">chunk</a></span> <span id="b':557" class="id"><a name="b':557" class="">b'</a></span> <span id="ofs':558" class="id"><a name="ofs':558" class="">ofs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b':557">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span><br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#ofs':558">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:556">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span><br/>
&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':558">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:556">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':557">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':558">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:556">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':557">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':558">ofs'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof119')">Proof.</span></div>
<div class="proofscript" id="proof119">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">chunk</span> <span class="id">b'</span> <span class="id">ofs'</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b'</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span>). <span class="id">subst</span> <span class="id">b'</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_outside">getN_setN_outside</a></span>. <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">v;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">red;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">n</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">split;</span> <span class="id">auto</span>. <span class="id">red;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES">STOREBYTES</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.setN_concat" class="id"><a name="Mem.setN_concat" class="">setN_concat:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bytes1:559" class="id"><a name="bytes1:559" class="">bytes1</a></span> <span id="bytes2:560" class="id"><a name="bytes2:560" class="">bytes2</a></span> <span id="ofs:561" class="id"><a name="ofs:561" class="">ofs</a></span> <span id="c:562" class="id"><a name="c:562" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> (<span class="id"><a href="compcert.common.Memory.html#bytes1:559">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:560">bytes2</a></span>) <span class="id"><a href="compcert.common.Memory.html#ofs:561">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#c:562">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:560">bytes2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:561">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:559">bytes1</a></span>)) (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:559">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:561">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#c:562">c</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof120')">Proof.</span></div>
<div class="proofscript" id="proof120">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">bytes1;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">decEq</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">length</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">IHbytes1</span>. <span class="id">decEq</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_concat" class="id"><a name="Mem.storebytes_concat" class="">storebytes_concat:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:563" class="id"><a name="m:563" class="">m</a></span> <span id="b:564" class="id"><a name="b:564" class="">b</a></span> <span id="ofs:565" class="id"><a name="ofs:565" class="">ofs</a></span> <span id="bytes1:566" class="id"><a name="bytes1:566" class="">bytes1</a></span> <span id="m1:567" class="id"><a name="m1:567" class="">m1</a></span> <span id="bytes2:568" class="id"><a name="bytes2:568" class="">bytes2</a></span> <span id="m2:569" class="id"><a name="m2:569" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:563">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:564">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:565">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:566">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:567">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:567">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:564">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:565">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:566">bytes1</a></span>)) <span class="id"><a href="compcert.common.Memory.html#bytes2:568">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:569">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:563">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:564">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:565">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#bytes1:566">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:568">bytes2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:569">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof121')">Proof.</span></div>
<div class="proofscript" id="proof121">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">generalize</span> <span class="id">H;</span> <span class="id">intro</span> <span class="id">ST1</span>. <span class="id">generalize</span> <span class="id">H0;</span> <span class="id">intro</span> <span class="id">ST2</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes;</a></span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="gallina-kwd">in</span> <span class="id">ST1;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="gallina-kwd">in</span> <span class="id">ST2</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>)) (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes2</span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>)<span class="id">;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id">bytes1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id">bytes2</span>))) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ST1;</span> <span class="id">inv</span> <span class="id">ST2;</span> <span class="id">simpl</span>. <span class="id">decEq</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mkmem_ext">mkmem_ext;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>.  <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_concat">setN_concat</a></span>. <span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.set2">PMap.set2</a></span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_add">Nat2Z.inj_add</a></span>. <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>))).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">r</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">r0</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_split" class="id"><a name="Mem.storebytes_split" class="">storebytes_split:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:570" class="id"><a name="m:570" class="">m</a></span> <span id="b:571" class="id"><a name="b:571" class="">b</a></span> <span id="ofs:572" class="id"><a name="ofs:572" class="">ofs</a></span> <span id="bytes1:573" class="id"><a name="bytes1:573" class="">bytes1</a></span> <span id="bytes2:574" class="id"><a name="bytes2:574" class="">bytes2</a></span> <span id="m2:575" class="id"><a name="m2:575" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:570">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:571">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:572">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#bytes1:573">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:574">bytes2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:575">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="m1:576" class="id"><a name="m1:576" class="">m1,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:570">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:571">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:572">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:573">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:576">m1</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:576">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:571">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:572">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:573">bytes1</a></span>)) <span class="id"><a href="compcert.common.Memory.html#bytes2:574">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:575">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof122')">Proof.</span></div>
<div class="proofscript" id="proof122">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_storebytes">range_perm_storebytes</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes1</span>) <span class="gallina-kwd">as</span> <span class="id">[m1</span> <span class="id">ST1]</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">storebytes_range_perm;</a></span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_add">Nat2Z.inj_add</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_storebytes">range_perm_storebytes</a></span> <span class="id">m1</span> <span class="id">b</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>)) <span class="id">bytes2</span>) <span class="gallina-kwd">as</span> <span class="id">[m2'</span> <span class="id">ST2]</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1;</a></span> <span class="id">eauto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">storebytes_range_perm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">H</span>. <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">ofs0</span>). <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_add">Nat2Z.inj_add</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2'</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_concat">storebytes_concat;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">m1;</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_int64_split" class="id"><a name="Mem.store_int64_split" class="">store_int64_split:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:577" class="id"><a name="m:577" class="">m</a></span> <span id="b:578" class="id"><a name="b:578" class="">b</a></span> <span id="ofs:579" class="id"><a name="ofs:579" class="">ofs</a></span> <span id="v:580" class="id"><a name="v:580" class="">v</a></span> <span id="m':581" class="id"><a name="m':581" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.common.Memory.html#m:577">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:578">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:579">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:580">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':581">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="m1:582" class="id"><a name="m1:582" class="">m1,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m:577">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:578">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:579">ofs</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword">Val.hiword</a></span> <span class="id"><a href="compcert.common.Memory.html#v:580">v</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.loword">Val.loword</a></span> <span class="id"><a href="compcert.common.Memory.html#v:580">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:582">m1</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:582">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:578">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:579">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">4</span>) (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.loword">Val.loword</a></span> <span class="id"><a href="compcert.common.Memory.html#v:580">v</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword">Val.hiword</a></span> <span class="id"><a href="compcert.common.Memory.html#v:580">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':581">m'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof123')">Proof.</span></div>
<div class="proofscript" id="proof123">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">store_valid_access_3;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_storebytes">store_storebytes</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="id">intros</span> <span class="id">SB</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int64">encode_val_int64</a></span> <span class="gallina-kwd">in</span> <span class="id">SB</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_split">storebytes_split</a></span>. <span class="id">eexact</span> <span class="id">SB</span>. <span class="id">intros</span> <span class="id">[m1</span> <span class="id">[SB1</span> <span class="id">SB2]]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="gallina-kwd">in</span> <span class="id">SB2</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">SB2</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">m1;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_store">storebytes_store</a></span>. <span class="id">exact</span> <span class="id">SB1</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_trans">Z.divide_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">8;</span> <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_store">storebytes_store</a></span>. <span class="id">exact</span> <span class="id">SB2</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_trans">Z.divide_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">8;</span> <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">2;</span> <span class="id">auto</span>. <span class="gallina-kwd">exists</span> <span class="id">1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storev_int64_split" class="id"><a name="Mem.storev_int64_split" class="">storev_int64_split:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:583" class="id"><a name="m:583" class="">m</a></span> <span id="a:584" class="id"><a name="a:584" class="">a</a></span> <span id="v:585" class="id"><a name="v:585" class="">v</a></span> <span id="m':586" class="id"><a name="m':586" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.common.Memory.html#m:583">m</a></span> <span class="id"><a href="compcert.common.Memory.html#a:584">a</a></span> <span class="id"><a href="compcert.common.Memory.html#v:585">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':586">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="m1:587" class="id"><a name="m1:587" class="">m1,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m:583">m</a></span> <span class="id"><a href="compcert.common.Memory.html#a:584">a</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword">Val.hiword</a></span> <span class="id"><a href="compcert.common.Memory.html#v:585">v</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.loword">Val.loword</a></span> <span class="id"><a href="compcert.common.Memory.html#v:585">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:587">m1</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:587">m1</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.common.Memory.html#a:584">a</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">4</span>))) (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.loword">Val.loword</a></span> <span class="id"><a href="compcert.common.Memory.html#v:585">v</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword">Val.hiword</a></span> <span class="id"><a href="compcert.common.Memory.html#v:585">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':586">m'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof124')">Proof.</span></div>
<div class="proofscript" id="proof124">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">a;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_int64_split">store_int64_split;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[m1</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">m1;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span>. <span class="id">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.addressing_int64_split">addressing_int64_split;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">store_valid_access_3</a></span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>. <span class="id">exact</span> <span class="id">Q</span>.<br/>
Qed.</div>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">alloc</span></span>. </h2>
<br/>
<span class="vernacular">Section</span> <span id="Mem.ALLOC" class="id"><a name="Mem.ALLOC" class="">ALLOC</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Mem.ALLOC.m1" class="id"><a name="Mem.ALLOC.m1" class="">m1:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="vernacular">Variables</span> <span id="Mem.ALLOC.lo" class="id"><a name="Mem.ALLOC.lo" class="">lo</a></span> <span id="Mem.ALLOC.hi" class="id"><a name="Mem.ALLOC.hi" class="">hi:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.ALLOC.m2" class="id"><a name="Mem.ALLOC.m2" class="">m2:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.ALLOC.b" class="id"><a name="Mem.ALLOC.b" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="Mem.ALLOC.ALLOC" class="id"><a name="Mem.ALLOC.ALLOC" class="">ALLOC:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span>).<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.nextblock_alloc" class="id"><a name="Mem.nextblock_alloc" class="">nextblock_alloc:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof125')">Proof.</span></div>
<div class="proofscript" id="proof125">
&nbsp;&nbsp;<span class="id">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.alloc_result" class="id"><a name="Mem.alloc_result" class="">alloc_result:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof126')">Proof.</span></div>
<div class="proofscript" id="proof126">
&nbsp;&nbsp;<span class="id">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_block_alloc" class="id"><a name="Mem.valid_block_alloc" class="">valid_block_alloc:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':594" class="id"><a name="b':594" class="">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':594">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':594">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof127')">Proof.</span></div>
<div class="proofscript" id="proof127">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.fresh_block_alloc" class="id"><a name="Mem.fresh_block_alloc" class="">fresh_block_alloc:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span>(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof128')">Proof.</span></div>
<div class="proofscript" id="proof128">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_new_block" class="id"><a name="Mem.valid_new_block" class="">valid_new_block:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof129')">Proof.</span></div>
<div class="proofscript" id="proof129">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_succ">Plt_succ</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">valid_block_alloc</span> <span class="id">fresh_block_alloc</span> <span class="id">valid_new_block:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_block_alloc_inv" class="id"><a name="Mem.valid_block_alloc_inv" class="">valid_block_alloc_inv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':595" class="id"><a name="b':595" class="">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':595">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b':595">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':595">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof130')">Proof.</span></div>
<div class="proofscript" id="proof130">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_succ_inv">Plt_succ_inv;</a></span> <span class="id">eauto</span>. <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_alloc_1" class="id"><a name="Mem.perm_alloc_1" class="">perm_alloc_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':596" class="id"><a name="b':596" class="">b'</a></span> <span id="ofs:597" class="id"><a name="ofs:597" class="">ofs</a></span> <span id="k:598" class="id"><a name="k:598" class="">k</a></span> <span id="p:599" class="id"><a name="p:599" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':596">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:597">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:598">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:599">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':596">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:597">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:598">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:599">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof131')">Proof.</span></div>
<div class="proofscript" id="proof131">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm;</a></span> <span class="id">intros</span>. <span class="id">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H1;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b'</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span>))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">contradiction</span>. <span class="id">subst</span> <span class="id">b'</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_alloc_2" class="id"><a name="Mem.perm_alloc_2" class="">perm_alloc_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ofs:600" class="id"><a name="ofs:600" class="">ofs</a></span> <span id="k:601" class="id"><a name="k:601" class="">k,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:600">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:600">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:601">k</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof132')">Proof.</span></div>
<div class="proofscript" id="proof132">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm;</a></span> <span class="id">intros</span>. <span class="id">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H1;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle_true">zle_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>. <span class="id">simpl</span>. <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>. <span class="id">lia</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_alloc_inv" class="id"><a name="Mem.perm_alloc_inv" class="">perm_alloc_inv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':602" class="id"><a name="b':602" class="">b'</a></span> <span id="ofs:603" class="id"><a name="ofs:603" class="">ofs</a></span> <span id="k:604" class="id"><a name="k:604" class="">k</a></span> <span id="p:605" class="id"><a name="p:605" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':602">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:603">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:604">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:605">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.common.Memory.html#b':602">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:603">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':602">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:603">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:604">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:605">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof133')">Proof.</span></div>
<div class="proofscript" id="proof133">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">p;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>. <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b'</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span>))<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> <span class="id">ofs</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">contradiction</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span>)<span class="id">;</span> <span class="id">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_alloc_3" class="id"><a name="Mem.perm_alloc_3" class="">perm_alloc_3:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ofs:606" class="id"><a name="ofs:606" class="">ofs</a></span> <span id="k:607" class="id"><a name="k:607" class="">k</a></span> <span id="p:608" class="id"><a name="p:608" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:606">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:607">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:608">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:606">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof134')">Proof.</span></div>
<div class="proofscript" id="proof134">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv;</a></span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_alloc_4" class="id"><a name="Mem.perm_alloc_4" class="">perm_alloc_4:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':609" class="id"><a name="b':609" class="">b'</a></span> <span id="ofs:610" class="id"><a name="ofs:610" class="">ofs</a></span> <span id="k:611" class="id"><a name="k:611" class="">k</a></span> <span id="p:612" class="id"><a name="p:612" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':609">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:610">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:611">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:612">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b':609">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':609">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:610">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:611">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:612">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof135')">Proof.</span></div>
<div class="proofscript" id="proof135">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv;</a></span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">perm_alloc_1</span> <span class="id">perm_alloc_2</span> <span class="id">perm_alloc_3</span> <span class="id">perm_alloc_4:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_alloc_other" class="id"><a name="Mem.valid_access_alloc_other" class="">valid_access_alloc_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:613" class="id"><a name="chunk:613" class="">chunk</a></span> <span id="b':614" class="id"><a name="b':614" class="">b'</a></span> <span id="ofs:615" class="id"><a name="ofs:615" class="">ofs</a></span> <span id="p:616" class="id"><a name="p:616" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:613">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b':614">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:615">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:616">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:613">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b':614">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:615">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:616">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof136')">Proof.</span></div>
<div class="proofscript" id="proof136">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_alloc_same" class="id"><a name="Mem.valid_access_alloc_same" class="">valid_access_alloc_same:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:617" class="id"><a name="chunk:617" class="">chunk</a></span> <span id="ofs:618" class="id"><a name="ofs:618" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:618">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:618">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:617">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:617">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:618">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:617">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:618">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof137')">Proof.</span></div>
<div class="proofscript" id="proof137">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">constructor;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2</a></span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">valid_access_alloc_other</span> <span class="id">valid_access_alloc_same:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_alloc_inv" class="id"><a name="Mem.valid_access_alloc_inv" class="">valid_access_alloc_inv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:619" class="id"><a name="chunk:619" class="">chunk</a></span> <span id="b':620" class="id"><a name="b':620" class="">b'</a></span> <span id="ofs:621" class="id"><a name="ofs:621" class="">ofs</a></span> <span id="p:622" class="id"><a name="p:622" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:619">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b':620">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:621">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:622">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.common.Memory.html#b':620">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:621">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:621">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:619">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:619">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:621">ofs</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:619">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b':620">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:621">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:622">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof138')">Proof.</span></div>
<div class="proofscript" id="proof138">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>)<span class="id">;</span> <span class="id">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b'</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span>). <span class="id">subst</span> <span class="id">b'</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>). <span class="id">apply</span> <span class="id">H0</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>). <span class="id">apply</span> <span class="id">H0</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>. <span class="id">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>. <span class="id">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">auto</span>. <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="id">apply</span> <span class="id">H0</span>. <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_alloc_unchanged" class="id"><a name="Mem.load_alloc_unchanged" class="">load_alloc_unchanged:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:623" class="id"><a name="chunk:623" class="">chunk</a></span> <span id="b':624" class="id"><a name="b':624" class="">b'</a></span> <span id="ofs:625" class="id"><a name="ofs:625" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':624">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:623">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':624">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:625">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:623">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':624">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:625">ofs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof139')">Proof.</span></div>
<div class="proofscript" id="proof139">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id">chunk</span> <span class="id">b'</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_alloc_inv">valid_access_alloc_inv;</a></span> <span class="id">eauto</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b'</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b'</span>. <span class="id">exfalso</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H2;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>. <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H1</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#not_eq_sym">not_eq_sym;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_alloc_other" class="id"><a name="Mem.load_alloc_other" class="">load_alloc_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:626" class="id"><a name="chunk:626" class="">chunk</a></span> <span id="b':627" class="id"><a name="b':627" class="">b'</a></span> <span id="ofs:628" class="id"><a name="ofs:628" class="">ofs</a></span> <span id="v:629" class="id"><a name="v:629" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:626">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':627">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:628">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:629">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:626">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':627">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:628">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:629">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof140')">Proof.</span></div>
<div class="proofscript" id="proof140">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_alloc_unchanged">load_alloc_unchanged</a></span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_alloc_same" class="id"><a name="Mem.load_alloc_same" class="">load_alloc_same:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:630" class="id"><a name="chunk:630" class="">chunk</a></span> <span id="ofs:631" class="id"><a name="ofs:631" class="">ofs</a></span> <span id="v:632" class="id"><a name="v:632" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:630">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:631">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:632">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#v:632">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof141')">Proof.</span></div>
<div class="proofscript" id="proof141">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result;</a></span> <span class="id">eauto</span>. <span class="id">intro</span>. <span class="id">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H2;</span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat_pos">size_chunk_nat_pos</a></span> <span class="id">chunk</span>) <span class="gallina-kwd">as</span> <span class="id">[n</span> <span class="id">E]</span>. <span class="id">rewrite</span> <span class="id">E</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gi">ZMap.gi</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_undef">decode_val_undef</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_alloc_same'" class="id"><a name="Mem.load_alloc_same'" class="">load_alloc_same':</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:633" class="id"><a name="chunk:633" class="">chunk</a></span> <span id="ofs:634" class="id"><a name="ofs:634" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:634">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:634">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:633">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:633">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:634">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:633">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:634">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof142')">Proof.</span></div>
<div class="proofscript" id="proof142">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">assert</span> (<span class="gallina-kwd">exists</span> <span id="v:636" class="id"><span id="v:635" class="id"><a name="v:636" class="">v,</a></span></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:635">v</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_load">valid_access_load</a></span>. <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2</a></span>. <span class="id">lia</span>. <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H2</span> <span class="gallina-kwd">as</span> <span class="id">[v</span> <span class="id">LOAD]</span>. <span class="id">rewrite</span> <span class="id">LOAD</span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_alloc_same">load_alloc_same;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_alloc_unchanged" class="id"><a name="Mem.loadbytes_alloc_unchanged" class="">loadbytes_alloc_unchanged:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':637" class="id"><a name="b':637" class="">b'</a></span> <span id="ofs:638" class="id"><a name="ofs:638" class="">ofs</a></span> <span id="n:639" class="id"><a name="n:639" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':637">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':637">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:638">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:639">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':637">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:638">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:639">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof143')">Proof.</span></div>
<div class="proofscript" id="proof143">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b'</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC;</a></span> <span class="id">intros</span> <span class="id">A</span> <span class="id">B</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">B;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>. <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">A</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">n0</span>. <span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4;</a></span> <span class="id">eauto</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_alloc_same" class="id"><a name="Mem.loadbytes_alloc_same" class="">loadbytes_alloc_same:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:640" class="id"><a name="n:640" class="">n</a></span> <span id="ofs:641" class="id"><a name="ofs:641" class="">ofs</a></span> <span id="bytes:642" class="id"><a name="bytes:642" class="">bytes</a></span> <span id="byte:643" class="id"><a name="byte:643" class="">byte,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:641">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:640">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:642">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memory.html#byte:643">byte</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:642">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#byte:643">byte</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof144')">Proof.</span></div>
<div class="proofscript" id="proof144">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC;</a></span> <span class="id">intros</span> <span class="id">A</span> <span class="id">B</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">A;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">B;</span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> <span class="id">n</span>) <span class="id">ofs</span>. <span class="id">induction</span> <span class="id">n0;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gi">ZMap.gi</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id">H0;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC">ALLOC</a></span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">valid_block_alloc</span> <span class="id">fresh_block_alloc</span> <span class="id">valid_new_block:</span> <span class="id">mem</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">valid_access_alloc_other</span> <span class="id">valid_access_alloc_same:</span> <span class="id">mem</span>.<br/>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">free</span></span>. </h2>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.range_perm_free" class="id"><a name="Mem.range_perm_free" class="">range_perm_free:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:644" class="id"><a name="m1:644" class="">m1</a></span> <span id="b:645" class="id"><a name="b:645" class="">b</a></span> <span id="lo:646" class="id"><a name="lo:646" class="">lo</a></span> <span id="hi:647" class="id"><a name="hi:647" class="">hi,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:644">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:645">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:646">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:647">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">{</a></span> <span id="m2:648" class="id"><a name="m2:648" class="">m2:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">|</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:644">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:645">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:646">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:647">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:648">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof145')">Proof.</span></div>
<div class="proofscript" id="proof145">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true;</a></span> <span class="id">auto</span>. <span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
Defined.</div>
<br/>
<span class="vernacular">Section</span> <span id="Mem.FREE" class="id"><a name="Mem.FREE" class="">FREE</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Mem.FREE.m1" class="id"><a name="Mem.FREE.m1" class="">m1:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.FREE.bf" class="id"><a name="Mem.FREE.bf" class="">bf:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="vernacular">Variables</span> <span id="Mem.FREE.lo" class="id"><a name="Mem.FREE.lo" class="">lo</a></span> <span id="Mem.FREE.hi" class="id"><a name="Mem.FREE.hi" class="">hi:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.FREE.m2" class="id"><a name="Mem.FREE.m2" class="">m2:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="Mem.FREE.FREE" class="id"><a name="Mem.FREE.FREE" class="">FREE:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.free_range_perm" class="id"><a name="Mem.free_range_perm" class="">free_range_perm:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof146')">Proof.</span></div>
<div class="proofscript" id="proof146">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="gallina-kwd">in</span> <span class="id">FREE</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.free_result" class="id"><a name="Mem.free_result" class="">free_result:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof147')">Proof.</span></div>
<div class="proofscript" id="proof147">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="gallina-kwd">in</span> <span class="id">FREE</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">congruence</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.nextblock_free" class="id"><a name="Mem.nextblock_free" class="">nextblock_free:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof148')">Proof.</span></div>
<div class="proofscript" id="proof148">
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result;</a></span> <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_block_free_1" class="id"><a name="Mem.valid_block_free_1" class="">valid_block_free_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:655" class="id"><a name="b:655" class="">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:655">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:655">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof149')">Proof.</span></div>
<div class="proofscript" id="proof149">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_block_free_2" class="id"><a name="Mem.valid_block_free_2" class="">valid_block_free_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:656" class="id"><a name="b:656" class="">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:656">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:656">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof150')">Proof.</span></div>
<div class="proofscript" id="proof150">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">valid_block_free_1</span> <span class="id">valid_block_free_2:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_free_1" class="id"><a name="Mem.perm_free_1" class="">perm_free_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:657" class="id"><a name="b:657" class="">b</a></span> <span id="ofs:658" class="id"><a name="ofs:658" class="">ofs</a></span> <span id="k:659" class="id"><a name="k:659" class="">k</a></span> <span id="p:660" class="id"><a name="p:660" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b:657">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:658">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:658">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:657">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:658">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:659">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:660">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:657">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:658">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:659">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:660">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof151')">Proof.</span></div>
<div class="proofscript" id="proof151">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span>). <span class="id">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id">ofs</span>)<span class="id">;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>)<span class="id">;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exfalso;</span> <span class="id">intuition</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">zarith</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_free_2" class="id"><a name="Mem.perm_free_2" class="">perm_free_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ofs:661" class="id"><a name="ofs:661" class="">ofs</a></span> <span id="k:662" class="id"><a name="k:662" class="">k</a></span> <span id="p:663" class="id"><a name="p:663" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:661">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:661">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:662">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:663">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof152')">Proof.</span></div>
<div class="proofscript" id="proof152">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle_true">zle_true</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">tauto</span>. <span class="id">lia</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_free_3" class="id"><a name="Mem.perm_free_3" class="">perm_free_3:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:664" class="id"><a name="b:664" class="">b</a></span> <span id="ofs:665" class="id"><a name="ofs:665" class="">ofs</a></span> <span id="k:666" class="id"><a name="k:666" class="">k</a></span> <span id="p:667" class="id"><a name="p:667" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:664">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:665">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:666">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:667">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:664">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:665">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:666">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:667">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof153')">Proof.</span></div>
<div class="proofscript" id="proof153">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">p</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span>). <span class="id">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id">ofs</span>)<span class="id">;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>)<span class="id">;</span> <span class="id">simpl</span>. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_free_inv" class="id"><a name="Mem.perm_free_inv" class="">perm_free_inv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:668" class="id"><a name="b:668" class="">b</a></span> <span id="ofs:669" class="id"><a name="ofs:669" class="">ofs</a></span> <span id="k:670" class="id"><a name="k:670" class="">k</a></span> <span id="p:671" class="id"><a name="p:671" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:668">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:669">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:670">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:671">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#b:668">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:669">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>) <span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:668">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:669">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:670">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:671">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof154')">Proof.</span></div>
<div class="proofscript" id="proof154">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id">ofs</span>)<span class="id">;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>)<span class="id">;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_free_1" class="id"><a name="Mem.valid_access_free_1" class="">valid_access_free_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:672" class="id"><a name="chunk:672" class="">chunk</a></span> <span id="b:673" class="id"><a name="b:673" class="">b</a></span> <span id="ofs:674" class="id"><a name="ofs:674" class="">ofs</a></span> <span id="p:675" class="id"><a name="p:675" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:672">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:673">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:674">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:675">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b:673">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:674">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:672">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:674">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:672">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:673">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:674">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:675">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof155')">Proof.</span></div>
<div class="proofscript" id="proof155">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">perm_free_1;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>). <span class="id">intuition</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">zarith</span>. <span class="id">right</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_free_2" class="id"><a name="Mem.valid_access_free_2" class="">valid_access_free_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:676" class="id"><a name="chunk:676" class="">chunk</a></span> <span id="ofs:677" class="id"><a name="ofs:677" class="">ofs</a></span> <span id="p:678" class="id"><a name="p:678" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:677">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:676">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:677">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span>(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:676">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:677">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:678">p</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof156')">Proof.</span></div>
<div class="proofscript" id="proof156">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span>).<br/>
&nbsp;&nbsp;<span class="id">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">apply</span> <span class="id">H3</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">apply</span> <span class="id">H3</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_free_inv_1" class="id"><a name="Mem.valid_access_free_inv_1" class="">valid_access_free_inv_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:679" class="id"><a name="chunk:679" class="">chunk</a></span> <span id="b:680" class="id"><a name="b:680" class="">b</a></span> <span id="ofs:681" class="id"><a name="ofs:681" class="">ofs</a></span> <span id="p:682" class="id"><a name="p:682" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:679">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:680">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:681">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:682">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:679">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:680">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:681">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:682">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof157')">Proof.</span></div>
<div class="proofscript" id="proof157">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">generalize</span> (<span class="id">H</span> <span class="id">ofs0</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span>). <span class="id">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id">ofs0</span>)<span class="id">;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>)<span class="id">;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">tauto</span>. <span class="id">auto</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_free_inv_2" class="id"><a name="Mem.valid_access_free_inv_2" class="">valid_access_free_inv_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:683" class="id"><a name="chunk:683" class="">chunk</a></span> <span id="ofs:684" class="id"><a name="ofs:684" class="">ofs</a></span> <span id="p:685" class="id"><a name="p:685" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:683">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:684">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:685">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:684">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:683">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:684">ofs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof158')">Proof.</span></div>
<div class="proofscript" id="proof158">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id">ofs</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_free_2">valid_access_free_2</a></span> <span class="id">chunk</span> <span class="id">ofs</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_free" class="id"><a name="Mem.load_free" class="">load_free:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:686" class="id"><a name="chunk:686" class="">chunk</a></span> <span id="b:687" class="id"><a name="b:687" class="">b</a></span> <span id="ofs:688" class="id"><a name="ofs:688" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b:687">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:688">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:686">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:688">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:686">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:687">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:688">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:686">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:687">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:688">ofs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof159')">Proof.</span></div>
<div class="proofscript" id="proof159">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_free_inv_1">valid_access_free_inv_1;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intro;</span> <span class="id">elim</span> <span class="id">n</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_free_1">valid_access_free_1;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_free_2" class="id"><a name="Mem.load_free_2" class="">load_free_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:689" class="id"><a name="chunk:689" class="">chunk</a></span> <span id="b:690" class="id"><a name="b:690" class="">b</a></span> <span id="ofs:691" class="id"><a name="ofs:691" class="">ofs</a></span> <span id="v:692" class="id"><a name="v:692" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:689">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:690">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:691">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:692">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:689">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:690">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:691">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:692">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof160')">Proof.</span></div>
<div class="proofscript" id="proof160">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_free_inv_1">valid_access_free_inv_1</a></span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_free" class="id"><a name="Mem.loadbytes_free" class="">loadbytes_free:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:693" class="id"><a name="b:693" class="">b</a></span> <span id="ofs:694" class="id"><a name="ofs:694" class="">ofs</a></span> <span id="n:695" class="id"><a name="n:695" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b:693">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:694">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#n:695">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:694">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:693">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:694">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:695">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:693">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:694">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:695">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof161')">Proof.</span></div>
<div class="proofscript" id="proof161">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">elim</span> <span class="id">n0;</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">perm_free_1;</a></span> <span class="id">eauto</span>. <span class="id">destruct</span> <span class="id">H;</span> <span class="id">auto</span>. <span class="id">right;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_free_2" class="id"><a name="Mem.loadbytes_free_2" class="">loadbytes_free_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:696" class="id"><a name="b:696" class="">b</a></span> <span id="ofs:697" class="id"><a name="ofs:697" class="">ofs</a></span> <span id="n:698" class="id"><a name="n:698" class="">n</a></span> <span id="bytes:699" class="id"><a name="bytes:699" class="">bytes,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:696">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:697">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:698">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:699">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:696">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:697">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:698">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:699">bytes</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof162')">Proof.</span></div>
<div class="proofscript" id="proof162">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE">FREE</a></span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">valid_block_free_1</span> <span class="id">valid_block_free_2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">perm_free_1</span> <span class="id">perm_free_2</span> <span class="id">perm_free_3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">valid_access_free_1</span> <span class="id">valid_access_free_inv_1:</span> <span class="id">mem</span>.<br/>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">drop_perm</span></span> </h2>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.range_perm_drop_1" class="id"><a name="Mem.range_perm_drop_1" class="">range_perm_drop_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:700" class="id"><a name="m:700" class="">m</a></span> <span id="b:701" class="id"><a name="b:701" class="">b</a></span> <span id="lo:702" class="id"><a name="lo:702" class="">lo</a></span> <span id="hi:703" class="id"><a name="hi:703" class="">hi</a></span> <span id="p:704" class="id"><a name="p:704" class="">p</a></span> <span id="m':705" class="id"><a name="m':705" class="">m',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:700">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:701">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:702">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:703">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p:704">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':705">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:700">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:701">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:702">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:703">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof163')">Proof.</span></div>
<div class="proofscript" id="proof163">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>). <span class="id">auto</span>. <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.range_perm_drop_2" class="id"><a name="Mem.range_perm_drop_2" class="">range_perm_drop_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:706" class="id"><a name="m:706" class="">m</a></span> <span id="b:707" class="id"><a name="b:707" class="">b</a></span> <span id="lo:708" class="id"><a name="lo:708" class="">lo</a></span> <span id="hi:709" class="id"><a name="hi:709" class="">hi</a></span> <span id="p:710" class="id"><a name="p:710" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:706">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:707">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:708">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:709">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">{m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">|</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:706">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:707">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:708">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:709">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p:710">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':711">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof164')">Proof.</span></div>
<div class="proofscript" id="proof164">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>). <span class="id">econstructor</span>. <span class="id">eauto</span>. <span class="id">contradiction</span>.<br/>
Defined.</div>
<br/>
<span class="vernacular">Section</span> <span id="Mem.DROP" class="id"><a name="Mem.DROP" class="">DROP</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Mem.DROP.m" class="id"><a name="Mem.DROP.m" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.DROP.b" class="id"><a name="Mem.DROP.b" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.DROP.lo" class="id"><a name="Mem.DROP.lo" class="">lo</a></span> <span id="Mem.DROP.hi" class="id"><a name="Mem.DROP.hi" class="">hi:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.DROP.p" class="id"><a name="Mem.DROP.p" class="">p:</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Mem.DROP.m'" class="id"><a name="Mem.DROP.m'" class="">m':</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="Mem.DROP.DROP" class="id"><a name="Mem.DROP.DROP" class="">DROP:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.nextblock_drop" class="id"><a name="Mem.nextblock_drop" class="">nextblock_drop:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof165')">Proof.</span></div>
<div class="proofscript" id="proof165">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">DROP</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.drop_perm_valid_block_1" class="id"><a name="Mem.drop_perm_valid_block_1" class="">drop_perm_valid_block_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':719" class="id"><a name="b':719" class="">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b':719">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':719">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof166')">Proof.</span></div>
<div class="proofscript" id="proof166">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_drop">nextblock_drop;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.drop_perm_valid_block_2" class="id"><a name="Mem.drop_perm_valid_block_2" class="">drop_perm_valid_block_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':720" class="id"><a name="b':720" class="">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':720">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b':720">b'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof167')">Proof.</span></div>
<div class="proofscript" id="proof167">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_drop">nextblock_drop;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_drop_1" class="id"><a name="Mem.perm_drop_1" class="">perm_drop_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ofs:721" class="id"><a name="ofs:721" class="">ofs</a></span> <span id="k:722" class="id"><a name="k:722" class="">k,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:721">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:721">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:722">k</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof168')">Proof.</span></div>
<div class="proofscript" id="proof168">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">DROP</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle_true">zle_true</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>. <span class="id">simpl</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_drop_2" class="id"><a name="Mem.perm_drop_2" class="">perm_drop_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ofs:723" class="id"><a name="ofs:723" class="">ofs</a></span> <span id="k:724" class="id"><a name="k:724" class="">k</a></span> <span id="p':725" class="id"><a name="p':725" class="">p',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:723">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:723">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:724">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p':725">p'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#p':725">p'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof169')">Proof.</span></div>
<div class="proofscript" id="proof169">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">DROP</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H0</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm;</a></span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle_true">zle_true</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>. <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_drop_3" class="id"><a name="Mem.perm_drop_3" class="">perm_drop_3:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':726" class="id"><a name="b':726" class="">b'</a></span> <span id="ofs:727" class="id"><a name="ofs:727" class="">ofs</a></span> <span id="k:728" class="id"><a name="k:728" class="">k</a></span> <span id="p':729" class="id"><a name="p':729" class="">p',</a></span> <span class="id"><a href="compcert.common.Memory.html#b':726">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:727">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:727">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b':726">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:727">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:728">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p':729">p'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':726">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:727">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:728">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p':729">p'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof170')">Proof.</span></div>
<div class="proofscript" id="proof170">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">DROP</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm;</a></span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b'</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span>). <span class="id">subst</span> <span class="id">b'</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id">ofs</span>). <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span>).<br/>
&nbsp;&nbsp;<span class="id">byContradiction</span>. <span class="id">intuition</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_drop_4" class="id"><a name="Mem.perm_drop_4" class="">perm_drop_4:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':730" class="id"><a name="b':730" class="">b'</a></span> <span id="ofs:731" class="id"><a name="ofs:731" class="">ofs</a></span> <span id="k:732" class="id"><a name="k:732" class="">k</a></span> <span id="p':733" class="id"><a name="p':733" class="">p',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':730">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:731">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:732">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p':733">p'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b':730">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:731">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:732">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p':733">p'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof171')">Proof.</span></div>
<div class="proofscript" id="proof171">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">DROP</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm;</a></span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b'</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b'</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id">ofs</span>). <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span>).<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">perm_cur</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">r</span>. <span class="id">tauto</span>. <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.valid_access_drop_1" class="id"><a name="Mem.valid_access_drop_1" class="">valid_access_drop_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:734" class="id"><a name="chunk:734" class="">chunk</a></span> <span id="b':735" class="id"><a name="b':735" class="">b'</a></span> <span id="ofs:736" class="id"><a name="ofs:736" class="">ofs</a></span> <span id="p':737" class="id"><a name="p':737" class="">p',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b':735">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:736">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:734">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:736">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#p':737">p'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:734">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b':735">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:736">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p':737">p'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:734">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b':735">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:736">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p':737">p'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof172')">Proof.</span></div>
<div class="proofscript" id="proof172">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b'</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span>). <span class="id">subst</span> <span class="id">b'</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id">ofs0</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_1">perm_drop_1;</a></span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>)<span class="id">;</span> <span class="id">intros</span>. <span class="id">intuition</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">zarith</span> <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.valid_access_drop_2" class="id"><a name="Mem.valid_access_drop_2" class="">valid_access_drop_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:738" class="id"><a name="chunk:738" class="">chunk</a></span> <span id="b':739" class="id"><a name="b':739" class="">b'</a></span> <span id="ofs:740" class="id"><a name="ofs:740" class="">ofs</a></span> <span id="p':741" class="id"><a name="p':741" class="">p',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:738">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b':739">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:740">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p':741">p'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:738">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b':739">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:740">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p':741">p'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof173')">Proof.</span></div>
<div class="proofscript" id="proof173">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H;</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_drop" class="id"><a name="Mem.load_drop" class="">load_drop:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:742" class="id"><a name="chunk:742" class="">chunk</a></span> <span id="b':743" class="id"><a name="b':743" class="">b'</a></span> <span id="ofs:744" class="id"><a name="ofs:744" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b':743">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:744">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:742">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:744">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:742">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':743">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:744">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:742">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b':743">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:744">ofs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof174')">Proof.</span></div>
<div class="proofscript" id="proof174">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id">chunk</span> <span class="id">b'</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">DROP</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>. <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_drop_1">valid_access_drop_1;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">n</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_drop_2">valid_access_drop_2;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_drop" class="id"><a name="Mem.loadbytes_drop" class="">loadbytes_drop:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b':745" class="id"><a name="b':745" class="">b'</a></span> <span id="ofs:746" class="id"><a name="ofs:746" class="">ofs</a></span> <span id="n:747" class="id"><a name="n:747" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b':745">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:746">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#n:747">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:746">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m'">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b':745">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:746">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:747">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b':745">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:746">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:747">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof175')">Proof.</span></div>
<div class="proofscript" id="proof175">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id">b'</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">DROP</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>. <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b'</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span>). <span class="id">subst</span> <span class="id">b'</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id">ofs0</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_1">perm_drop_1;</a></span> <span class="id">eauto</span>. <span class="id">lia</span>. <span class="id">intuition</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">zarith</span> <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">n0;</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP">DROP</a></span>.<br/>
<br/>
<h1> Generic injections </h1>
<br/>
<div class="doc">A memory state <span class="bracket"><span class="id">m1</span></span> generically injects into another memory state <span class="bracket"><span class="id">m2</span></span> via the
  memory injection <span class="bracket"><span class="id">f</span></span> if the following conditions hold:
<ul>
<li>
 each access in <span class="bracket"><span class="id">m2</span></span> that corresponds to a valid access in <span class="bracket"><span class="id">m1</span></span>
  is itself valid;
</li>
<li>
 the memory value associated in <span class="bracket"><span class="id">m1</span></span> to an accessible address
  must inject into <span class="bracket"><span class="id">m2</span></span>'s memory value at the corersponding address.
</li>
</ul>
</div>
<br/>
<span class="vernacular">Record</span> <span id="Mem.mem_inj" class="id"><a name="Mem.mem_inj" class="">mem_inj</a></span> (<span id="f:748" class="id"><a name="f:748" class="">f:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span id="m1:749" class="id"><a name="m1:749" class="">m1</a></span> <span id="m2:750" class="id"><a name="m2:750" class="">m2:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">mk_mem_inj</span> <span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mi_perm" class="id"><a name="Mem.mi_perm" class="">mi_perm:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b1:752" class="id"><a name="b1:752" class="">b1</a></span> <span id="b2:753" class="id"><a name="b2:753" class="">b2</a></span> <span id="delta:754" class="id"><a name="delta:754" class="">delta</a></span> <span id="ofs:755" class="id"><a name="ofs:755" class="">ofs</a></span> <span id="k:756" class="id"><a name="k:756" class="">k</a></span> <span id="p:757" class="id"><a name="p:757" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:748">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:752">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:753">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:754">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:749">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:752">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:755">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:756">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:757">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:750">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:753">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:755">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:754">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k:756">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:757">p;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mi_align" class="id"><a name="Mem.mi_align" class="">mi_align:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b1:759" class="id"><a name="b1:759" class="">b1</a></span> <span id="b2:760" class="id"><a name="b2:760" class="">b2</a></span> <span id="delta:761" class="id"><a name="delta:761" class="">delta</a></span> <span id="chunk:762" class="id"><a name="chunk:762" class="">chunk</a></span> <span id="ofs:763" class="id"><a name="ofs:763" class="">ofs</a></span> <span id="p:764" class="id"><a name="p:764" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:748">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:759">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:760">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:761">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:749">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:759">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:763">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:763">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:762">chunk</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memory.html#p:764">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:762">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:761">delta</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mi_memval" class="id"><a name="Mem.mi_memval" class="">mi_memval:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b1:766" class="id"><a name="b1:766" class="">b1</a></span> <span id="ofs:767" class="id"><a name="ofs:767" class="">ofs</a></span> <span id="b2:768" class="id"><a name="b2:768" class="">b2</a></span> <span id="delta:769" class="id"><a name="delta:769" class="">delta,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:748">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:766">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:768">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:769">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:749">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:766">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:767">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:748">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:767">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:749">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:767">ofs+delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#m2:750">m2</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b2</a></span>)<br/>
&nbsp;&nbsp;<span class="id">}</span>.<br/>
<br/>
<div class="doc">Preservation of permissions </div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.perm_inj" class="id"><a name="Mem.perm_inj" class="">perm_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:771" class="id"><a name="f:771" class="">f</a></span> <span id="m1:772" class="id"><a name="m1:772" class="">m1</a></span> <span id="m2:773" class="id"><a name="m2:773" class="">m2</a></span> <span id="b1:774" class="id"><a name="b1:774" class="">b1</a></span> <span id="ofs:775" class="id"><a name="ofs:775" class="">ofs</a></span> <span id="k:776" class="id"><a name="k:776" class="">k</a></span> <span id="p:777" class="id"><a name="p:777" class="">p</a></span> <span id="b2:778" class="id"><a name="b2:778" class="">b2</a></span> <span id="delta:779" class="id"><a name="delta:779" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:771">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:772">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:773">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:772">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:774">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:775">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:776">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:777">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:771">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:774">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:778">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:779">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:773">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:778">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:775">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:779">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k:776">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:777">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof176')">Proof.</span></div>
<div class="proofscript" id="proof176">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_perm">mi_perm;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.range_perm_inj" class="id"><a name="Mem.range_perm_inj" class="">range_perm_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:780" class="id"><a name="f:780" class="">f</a></span> <span id="m1:781" class="id"><a name="m1:781" class="">m1</a></span> <span id="m2:782" class="id"><a name="m2:782" class="">m2</a></span> <span id="b1:783" class="id"><a name="b1:783" class="">b1</a></span> <span id="lo:784" class="id"><a name="lo:784" class="">lo</a></span> <span id="hi:785" class="id"><a name="hi:785" class="">hi</a></span> <span id="k:786" class="id"><a name="k:786" class="">k</a></span> <span id="p:787" class="id"><a name="p:787" class="">p</a></span> <span id="b2:788" class="id"><a name="b2:788" class="">b2</a></span> <span id="delta:789" class="id"><a name="delta:789" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:780">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:781">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:782">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:781">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:783">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:784">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:785">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k:786">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:787">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:780">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:783">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:788">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:789">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:782">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:788">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#lo:784">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:789">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#hi:785">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:789">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k:786">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:787">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof177')">Proof.</span></div>
<div class="proofscript" id="proof177">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id">ofs</span> <span class="gallina-kwd">with</span> ((<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta</span>) <span class="id">+</span> <span class="id">delta</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">H0</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.valid_access_inj" class="id"><a name="Mem.valid_access_inj" class="">valid_access_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:790" class="id"><a name="f:790" class="">f</a></span> <span id="m1:791" class="id"><a name="m1:791" class="">m1</a></span> <span id="m2:792" class="id"><a name="m2:792" class="">m2</a></span> <span id="b1:793" class="id"><a name="b1:793" class="">b1</a></span> <span id="b2:794" class="id"><a name="b2:794" class="">b2</a></span> <span id="delta:795" class="id"><a name="delta:795" class="">delta</a></span> <span id="chunk:796" class="id"><a name="chunk:796" class="">chunk</a></span> <span id="ofs:797" class="id"><a name="ofs:797" class="">ofs</a></span> <span id="p:798" class="id"><a name="p:798" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:790">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:791">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:792">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:790">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:793">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:794">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:795">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:791">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:796">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:793">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:797">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:798">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:792">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:796">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:794">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:797">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:795">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#p:798">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof178')">Proof.</span></div>
<div class="proofscript" id="proof178">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H1</span> <span class="gallina-kwd">as</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">with</span> ((<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) <span class="id">+</span> <span class="id">delta</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_inj">range_perm_inj;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_align">mi_align;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of loads. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.getN_inj" class="id"><a name="Mem.getN_inj" class="">getN_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:799" class="id"><a name="f:799" class="">f</a></span> <span id="m1:800" class="id"><a name="m1:800" class="">m1</a></span> <span id="m2:801" class="id"><a name="m2:801" class="">m2</a></span> <span id="b1:802" class="id"><a name="b1:802" class="">b1</a></span> <span id="b2:803" class="id"><a name="b2:803" class="">b2</a></span> <span id="delta:804" class="id"><a name="delta:804" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:799">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:800">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:801">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:799">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:802">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:803">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:804">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:805" class="id"><a name="n:805" class="">n</a></span> <span id="ofs:806" class="id"><a name="ofs:806" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:800">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:802">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:806">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:806">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n:805">n</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:799">f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n:805">n</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:806">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m1:800">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b1</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n:805">n</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:806">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:804">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#m2:801">m2</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b2</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof179')">Proof.</span></div>
<div class="proofscript" id="proof179">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">intros;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_memval">mi_memval;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H1</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="gallina-kwd">with</span> ((<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id">+</span> <span class="id">delta</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHn</span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">apply</span> <span class="id">H1;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.load_inj" class="id"><a name="Mem.load_inj" class="">load_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:807" class="id"><a name="f:807" class="">f</a></span> <span id="m1:808" class="id"><a name="m1:808" class="">m1</a></span> <span id="m2:809" class="id"><a name="m2:809" class="">m2</a></span> <span id="chunk:810" class="id"><a name="chunk:810" class="">chunk</a></span> <span id="b1:811" class="id"><a name="b1:811" class="">b1</a></span> <span id="ofs:812" class="id"><a name="ofs:812" class="">ofs</a></span> <span id="b2:813" class="id"><a name="b2:813" class="">b2</a></span> <span id="delta:814" class="id"><a name="delta:814" class="">delta</a></span> <span id="v1:815" class="id"><a name="v1:815" class="">v1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:807">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:808">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:809">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:810">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:808">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:811">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:812">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:815">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:807">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:811">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:813">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:814">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v2:816" class="id"><a name="v2:816" class="">v2,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:810">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:809">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:813">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:812">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:814">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:816">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:807">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:815">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:816">v2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof180')">Proof.</span></div>
<div class="proofscript" id="proof180">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id">chunk</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>) (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) (<span class="id">m2</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b2</a></span>))).<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inj">valid_access_inj;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result;</a></span> <span class="id">eauto</span>. <span class="id">intro</span>. <span class="id">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_inject">decode_val_inject</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_inj">getN_inj;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_valid_access">load_valid_access;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.loadbytes_inj" class="id"><a name="Mem.loadbytes_inj" class="">loadbytes_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:817" class="id"><a name="f:817" class="">f</a></span> <span id="m1:818" class="id"><a name="m1:818" class="">m1</a></span> <span id="m2:819" class="id"><a name="m2:819" class="">m2</a></span> <span id="len:820" class="id"><a name="len:820" class="">len</a></span> <span id="b1:821" class="id"><a name="b1:821" class="">b1</a></span> <span id="ofs:822" class="id"><a name="ofs:822" class="">ofs</a></span> <span id="b2:823" class="id"><a name="b2:823" class="">b2</a></span> <span id="delta:824" class="id"><a name="delta:824" class="">delta</a></span> <span id="bytes1:825" class="id"><a name="bytes1:825" class="">bytes1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:817">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:818">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:819">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:818">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:821">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:822">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len:820">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:825">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:817">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:821">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:823">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:824">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bytes2:826" class="id"><a name="bytes2:826" class="">bytes2,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:819">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:823">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:822">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:824">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#len:820">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:826">bytes2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:817">f</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes1:825">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:826">bytes2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof181')">Proof.</span></div>
<div class="proofscript" id="proof181">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">len</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> <span class="id">len</span>) (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) (<span class="id">m2</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b2</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">len</span>) <span class="gallina-kwd">with</span> ((<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">len</span>) <span class="id">+</span> <span class="id">delta</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_inj">range_perm_inj;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_inj">getN_inj;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">0</span> <span class="id">len</span>). <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#Z_to_nat_neg">Z_to_nat_neg</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">simpl</span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of stores. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.setN_inj" class="id"><a name="Mem.setN_inj" class="">setN_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="access:827" class="id"><a name="access:827" class="">access:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span>) <span id="delta:828" class="id"><a name="delta:828" class="">delta</a></span> <span id="f:829" class="id"><a name="f:829" class="">f</a></span> <span id="vl1:830" class="id"><a name="vl1:830" class="">vl1</a></span> <span id="vl2:831" class="id"><a name="vl2:831" class="">vl2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:829">f</a></span>) <span class="id"><a href="compcert.common.Memory.html#vl1:830">vl1</a></span> <span class="id"><a href="compcert.common.Memory.html#vl2:831">vl2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:832" class="id"><a name="p:832" class="">p</a></span> <span id="c1:833" class="id"><a name="c1:833" class="">c1</a></span> <span id="c2:834" class="id"><a name="c2:834" class="">c2,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="q:835" class="id"><a name="q:835" class="">q,</a></span> <span class="id"><a href="compcert.common.Memory.html#access:827">access</a></span> <span class="id"><a href="compcert.common.Memory.html#q:835">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:829">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q:835">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c1:833">c1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="compcert.common.Memory.html#q:835">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:828">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#c2:834">c2</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="q:836" class="id"><a name="q:836" class="">q,</a></span> <span class="id"><a href="compcert.common.Memory.html#access:827">access</a></span> <span class="id"><a href="compcert.common.Memory.html#q:836">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:829">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q:836">q</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl1:830">vl1</a></span> <span class="id"><a href="compcert.common.Memory.html#p:832">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c1:833">c1</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="compcert.common.Memory.html#q:836">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:828">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl2:831">vl2</a></span> (<span class="id"><a href="compcert.common.Memory.html#p:832">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:828">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#c2:834">c2</a></span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof182')">Proof.</span></div>
<div class="proofscript" id="proof182">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="gallina-kwd">with</span> ((<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id">+</span> <span class="id">delta</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHlist_forall2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gsspec">ZMap.gsspec</a></span> <span class="gallina-kwd">at</span> <span class="id">1</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#ZIndexed.eq">ZIndexed.eq</a></span> <span class="id">q0</span> <span class="id">p</span>). <span class="id">subst</span> <span class="id">q0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gss">ZMap.gss</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gso">ZMap.gso</a></span>. <span class="id">auto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#ZIndexed.t">ZIndexed.t</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.meminj_no_overlap" class="id"><a name="Mem.meminj_no_overlap" class="">meminj_no_overlap</a></span> (<span id="f:837" class="id"><a name="f:837" class="">f:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span id="m:838" class="id"><a name="m:838" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b1:839" class="id"><a name="b1:839" class="">b1</a></span> <span id="b1':840" class="id"><a name="b1':840" class="">b1'</a></span> <span id="delta1:841" class="id"><a name="delta1:841" class="">delta1</a></span> <span id="b2:842" class="id"><a name="b2:842" class="">b2</a></span> <span id="b2':843" class="id"><a name="b2':843" class="">b2'</a></span> <span id="delta2:844" class="id"><a name="delta2:844" class="">delta2</a></span> <span id="ofs1:845" class="id"><a name="ofs1:845" class="">ofs1</a></span> <span id="ofs2:846" class="id"><a name="ofs2:846" class="">ofs2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1:839">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:842">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:837">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:839">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b1':840">b1',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta1:841">delta1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:837">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:842">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2':843">b2',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta2:844">delta2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:838">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:839">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:845">ofs1</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:838">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:842">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:846">ofs2</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1':840">b1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b2':843">b2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:845">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta1:841">delta1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:846">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta2:844">delta2</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.store_mapped_inj" class="id"><a name="Mem.store_mapped_inj" class="">store_mapped_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:847" class="id"><a name="f:847" class="">f</a></span> <span id="chunk:848" class="id"><a name="chunk:848" class="">chunk</a></span> <span id="m1:849" class="id"><a name="m1:849" class="">m1</a></span> <span id="b1:850" class="id"><a name="b1:850" class="">b1</a></span> <span id="ofs:851" class="id"><a name="ofs:851" class="">ofs</a></span> <span id="v1:852" class="id"><a name="v1:852" class="">v1</a></span> <span id="n1:853" class="id"><a name="n1:853" class="">n1</a></span> <span id="m2:854" class="id"><a name="m2:854" class="">m2</a></span> <span id="b2:855" class="id"><a name="b2:855" class="">b2</a></span> <span id="delta:856" class="id"><a name="delta:856" class="">delta</a></span> <span id="v2:857" class="id"><a name="v2:857" class="">v2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:847">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:849">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:854">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:848">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:849">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:850">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:851">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:852">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:853">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> <span class="id"><a href="compcert.common.Memory.html#f:847">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:849">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:847">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:850">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:855">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:856">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:847">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:852">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:857">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="n2:858" class="id"><a name="n2:858" class="">n2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:848">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:854">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:855">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:851">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:856">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#v2:857">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:858">n2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:847">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:853">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:858">n2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof183')">Proof.</span></div>
<div class="proofscript" id="proof183">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b2</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inj">valid_access_inj;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_store">valid_access_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">v2</span> <span class="id">H4</span>) <span class="gallina-kwd">as</span> <span class="id">[n2</span> <span class="id">STORE]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">n2;</span> <span class="id">split</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_1">perm_store_1;</a></span> <span class="id">[eexact</span> <span class="id">STORE|]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_perm">mi_perm;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_align">mi_align</a></span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs0</span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">STORE</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="id">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;=&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">b3</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">b2</span>) <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">subst</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">delta0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">delta</span>) <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">subst</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_inj">setN_inj</a></span> <span class="gallina-kwd">with</span> (<span class="id">access</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="ofs:860" class="id"><span id="ofs:859" class="id"><a name="ofs:860" class="">ofs</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id"><a href="compcert.common.Memory.html#ofs:859">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject;</a></span> <span class="id">auto</span>. <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_memval">mi_memval;</a></span> <span class="id">eauto</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b3</span> <span class="id">b2</span>). <span class="id">subst</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;&lt;&gt;&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_other">setN_other</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_memval">mi_memval;</a></span> <span class="id">eauto</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">b2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">b2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">ofs0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> (<span class="id">r</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta</span>) <span class="id">+</span> <span class="id">delta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H1;</span> <span class="id">eauto</span>. <span class="id">eauto</span> <span class="id">6</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">store_valid_access_3</a></span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="id">apply</span> <span class="id">A</span>. <span class="id">lia</span>. <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H8</span>. <span class="id">congruence</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;&lt;&gt;&nbsp;b1,&nbsp;block&nbsp;&lt;&gt;&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_memval">mi_memval;</a></span> <span class="id">eauto</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.store_unmapped_inj" class="id"><a name="Mem.store_unmapped_inj" class="">store_unmapped_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:861" class="id"><a name="f:861" class="">f</a></span> <span id="chunk:862" class="id"><a name="chunk:862" class="">chunk</a></span> <span id="m1:863" class="id"><a name="m1:863" class="">m1</a></span> <span id="b1:864" class="id"><a name="b1:864" class="">b1</a></span> <span id="ofs:865" class="id"><a name="ofs:865" class="">ofs</a></span> <span id="v1:866" class="id"><a name="v1:866" class="">v1</a></span> <span id="n1:867" class="id"><a name="n1:867" class="">n1</a></span> <span id="m2:868" class="id"><a name="m2:868" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:861">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:863">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:868">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:862">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:863">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:864">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:865">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:866">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:867">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:861">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:864">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:861">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:867">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:868">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof184')">Proof.</span></div>
<div class="proofscript" id="proof184">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_perm">mi_perm;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_align">mi_align</a></span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs0</span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_memval">mi_memval;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.store_outside_inj" class="id"><a name="Mem.store_outside_inj" class="">store_outside_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:869" class="id"><a name="f:869" class="">f</a></span> <span id="m1:870" class="id"><a name="m1:870" class="">m1</a></span> <span id="m2:871" class="id"><a name="m2:871" class="">m2</a></span> <span id="chunk:872" class="id"><a name="chunk:872" class="">chunk</a></span> <span id="b:873" class="id"><a name="b:873" class="">b</a></span> <span id="ofs:874" class="id"><a name="ofs:874" class="">ofs</a></span> <span id="v:875" class="id"><a name="v:875" class="">v</a></span> <span id="m2':876" class="id"><a name="m2':876" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:869">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:870">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:871">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b':877" class="id"><a name="b':877" class="">b'</a></span> <span id="delta:878" class="id"><a name="delta:878" class="">delta</a></span> <span id="ofs':879" class="id"><a name="ofs':879" class="">ofs',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:869">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b':877">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b:873">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:878">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:870">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':877">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':879">ofs'</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs:874">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':879">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:878">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:874">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:872">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:872">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:871">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:873">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:874">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:875">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':876">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:869">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:870">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':876">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof185')">Proof.</span></div>
<div class="proofscript" id="proof185">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;access&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">mi_align0;</span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b2</span> <span class="id">b</span>). <span class="id">subst</span> <span class="id">b2</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">ofs0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) <span class="id">ofs</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) (<span class="id">ofs0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">byContradiction</span>. <span class="id">eapply</span> <span class="id">H0;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.storebytes_mapped_inj" class="id"><a name="Mem.storebytes_mapped_inj" class="">storebytes_mapped_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:880" class="id"><a name="f:880" class="">f</a></span> <span id="m1:881" class="id"><a name="m1:881" class="">m1</a></span> <span id="b1:882" class="id"><a name="b1:882" class="">b1</a></span> <span id="ofs:883" class="id"><a name="ofs:883" class="">ofs</a></span> <span id="bytes1:884" class="id"><a name="bytes1:884" class="">bytes1</a></span> <span id="n1:885" class="id"><a name="n1:885" class="">n1</a></span> <span id="m2:886" class="id"><a name="m2:886" class="">m2</a></span> <span id="b2:887" class="id"><a name="b2:887" class="">b2</a></span> <span id="delta:888" class="id"><a name="delta:888" class="">delta</a></span> <span id="bytes2:889" class="id"><a name="bytes2:889" class="">bytes2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:880">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:881">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:886">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:881">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:882">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:883">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:884">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:885">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> <span class="id"><a href="compcert.common.Memory.html#f:880">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:881">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:880">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:882">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:887">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:888">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:880">f</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes1:884">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:889">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="n2:890" class="id"><a name="n2:890" class="">n2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:886">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:887">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:883">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:888">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes2:889">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:890">n2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:880">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:885">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:890">n2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof186')">Proof.</span></div>
<div class="proofscript" id="proof186">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id">m2</span> <span class="id">b2</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes2</span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">with</span> ((<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>)) <span class="id">+</span> <span class="id">delta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_inj">range_perm_inj;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">storebytes_range_perm;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_length">list_forall2_length</a></span> <span class="id">H3</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_storebytes">range_perm_storebytes</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span>) <span class="gallina-kwd">as</span> <span class="id">[n2</span> <span class="id">STORE]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">n2;</span> <span class="id">split</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1;</a></span> <span class="id">[apply</span> <span class="id">STORE</span> <span class="id">|]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_perm0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_align">mi_align</a></span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs0</span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b0</span> <span class="id">ofs0</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">STORE</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="id">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;=&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">b3</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">b2</span>) <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">subst</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">delta0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">delta</span>) <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">subst</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_inj">setN_inj</a></span> <span class="gallina-kwd">with</span> (<span class="id">access</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="ofs:892" class="id"><span id="ofs:891" class="id"><a name="ofs:892" class="">ofs</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id"><a href="compcert.common.Memory.html#ofs:891">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b3</span> <span class="id">b2</span>). <span class="id">subst</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;&lt;&gt;&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_other">setN_other</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">b2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">b2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">ofs0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> (<span class="id">r</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta</span>) <span class="id">+</span> <span class="id">delta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H1;</span> <span class="id">eauto</span> <span class="id">6</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">storebytes_range_perm</a></span>. <span class="id">eexact</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">r</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_length">list_forall2_length</a></span> <span class="id">H3</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span> <span class="id">6</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H9</span>. <span class="id">congruence</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;&lt;&gt;&nbsp;b1,&nbsp;block&nbsp;&lt;&gt;&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.storebytes_unmapped_inj" class="id"><a name="Mem.storebytes_unmapped_inj" class="">storebytes_unmapped_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:893" class="id"><a name="f:893" class="">f</a></span> <span id="m1:894" class="id"><a name="m1:894" class="">m1</a></span> <span id="b1:895" class="id"><a name="b1:895" class="">b1</a></span> <span id="ofs:896" class="id"><a name="ofs:896" class="">ofs</a></span> <span id="bytes1:897" class="id"><a name="bytes1:897" class="">bytes1</a></span> <span id="n1:898" class="id"><a name="n1:898" class="">n1</a></span> <span id="m2:899" class="id"><a name="m2:899" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:893">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:894">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:899">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:894">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:895">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:896">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:897">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:898">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:893">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:895">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:893">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:898">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:899">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof187')">Proof.</span></div>
<div class="proofscript" id="proof187">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_perm0;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_align">mi_align</a></span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs0</span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>. <span class="id">eapply</span> <span class="id">mi_memval0;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.storebytes_outside_inj" class="id"><a name="Mem.storebytes_outside_inj" class="">storebytes_outside_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:900" class="id"><a name="f:900" class="">f</a></span> <span id="m1:901" class="id"><a name="m1:901" class="">m1</a></span> <span id="m2:902" class="id"><a name="m2:902" class="">m2</a></span> <span id="b:903" class="id"><a name="b:903" class="">b</a></span> <span id="ofs:904" class="id"><a name="ofs:904" class="">ofs</a></span> <span id="bytes2:905" class="id"><a name="bytes2:905" class="">bytes2</a></span> <span id="m2':906" class="id"><a name="m2':906" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:900">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:901">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:902">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b':907" class="id"><a name="b':907" class="">b'</a></span> <span id="delta:908" class="id"><a name="delta:908" class="">delta</a></span> <span id="ofs':909" class="id"><a name="ofs':909" class="">ofs',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:900">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b':907">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b:903">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:908">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:901">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':907">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':909">ofs'</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs:904">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':909">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:908">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:904">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:905">bytes2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:902">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:903">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:904">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:905">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':906">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:900">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:901">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':906">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof188')">Proof.</span></div>
<div class="proofscript" id="proof188">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b2</span> <span class="id">b</span>). <span class="id">subst</span> <span class="id">b2</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">ofs0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) <span class="id">ofs</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes2</span>)) (<span class="id">ofs0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">byContradiction</span>. <span class="id">eapply</span> <span class="id">H0;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.storebytes_empty_inj" class="id"><a name="Mem.storebytes_empty_inj" class="">storebytes_empty_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:910" class="id"><a name="f:910" class="">f</a></span> <span id="m1:911" class="id"><a name="m1:911" class="">m1</a></span> <span id="b1:912" class="id"><a name="b1:912" class="">b1</a></span> <span id="ofs1:913" class="id"><a name="ofs1:913" class="">ofs1</a></span> <span id="m1':914" class="id"><a name="m1':914" class="">m1'</a></span> <span id="m2:915" class="id"><a name="m2:915" class="">m2</a></span> <span id="b2:916" class="id"><a name="b2:916" class="">b2</a></span> <span id="ofs2:917" class="id"><a name="ofs2:917" class="">ofs2</a></span> <span id="m2':918" class="id"><a name="m2':918" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:910">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:911">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:915">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:911">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:912">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:913">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':914">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:915">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:916">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:917">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':918">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:910">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':914">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':918">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof189')">Proof.</span></div>
<div class="proofscript" id="proof189">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_perm0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_align0</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs</span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b0</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b1</span>)<span class="id">;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b3</span> <span class="id">b2</span>)<span class="id">;</span> <span class="id">subst;</span> <span class="id">eapply</span> <span class="id">mi_memval0;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of allocations </div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.alloc_right_inj" class="id"><a name="Mem.alloc_right_inj" class="">alloc_right_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:919" class="id"><a name="f:919" class="">f</a></span> <span id="m1:920" class="id"><a name="m1:920" class="">m1</a></span> <span id="m2:921" class="id"><a name="m2:921" class="">m2</a></span> <span id="lo:922" class="id"><a name="lo:922" class="">lo</a></span> <span id="hi:923" class="id"><a name="hi:923" class="">hi</a></span> <span id="b2:924" class="id"><a name="b2:924" class="">b2</a></span> <span id="m2':925" class="id"><a name="m2':925" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:919">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:920">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:921">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:921">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:922">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:923">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m2':925">m2',</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:924">b2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:919">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:920">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':925">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof190')">Proof.</span></div>
<div class="proofscript" id="proof190">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">injection</span> <span class="id">H0</span>. <span class="id">intros</span> <span class="id">NEXT</span> <span class="id">MEM</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m2</span> <span class="id">b0</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_perm0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m2</span> <span class="id">b0</span>) <span class="gallina-kwd">by</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">MEM;</span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">NEXT</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.alloc_left_unmapped_inj" class="id"><a name="Mem.alloc_left_unmapped_inj" class="">alloc_left_unmapped_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:926" class="id"><a name="f:926" class="">f</a></span> <span id="m1:927" class="id"><a name="m1:927" class="">m1</a></span> <span id="m2:928" class="id"><a name="m2:928" class="">m2</a></span> <span id="lo:929" class="id"><a name="lo:929" class="">lo</a></span> <span id="hi:930" class="id"><a name="hi:930" class="">hi</a></span> <span id="m1':931" class="id"><a name="m1':931" class="">m1'</a></span> <span id="b1:932" class="id"><a name="b1:932" class="">b1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:926">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:927">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:928">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:927">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:929">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:930">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m1':931">m1',</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:932">b1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:926">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:932">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:926">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':931">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:928">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof191')">Proof.</span></div>
<div class="proofscript" id="proof191">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="id">congruence</span>. <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_align0</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs</span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">congruence</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">injection</span> <span class="id">H0;</span> <span class="id">intros</span> <span class="id">NEXT</span> <span class="id">MEM</span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">MEM;</span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">NEXT</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="gallina-kwd">in</span> <span class="id">H4</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gi">ZMap.gi</a></span>. <span class="id">constructor</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.inj_offset_aligned" class="id"><a name="Mem.inj_offset_aligned" class="">inj_offset_aligned</a></span> (<span id="delta:933" class="id"><a name="delta:933" class="">delta:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="size:934" class="id"><a name="size:934" class="">size:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:935" class="id"><a name="chunk:935" class="">chunk,</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:935">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#size:934">size</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:935">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:933">delta</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.alloc_left_mapped_inj" class="id"><a name="Mem.alloc_left_mapped_inj" class="">alloc_left_mapped_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:936" class="id"><a name="f:936" class="">f</a></span> <span id="m1:937" class="id"><a name="m1:937" class="">m1</a></span> <span id="m2:938" class="id"><a name="m2:938" class="">m2</a></span> <span id="lo:939" class="id"><a name="lo:939" class="">lo</a></span> <span id="hi:940" class="id"><a name="hi:940" class="">hi</a></span> <span id="m1':941" class="id"><a name="m1':941" class="">m1'</a></span> <span id="b1:942" class="id"><a name="b1:942" class="">b1</a></span> <span id="b2:943" class="id"><a name="b2:943" class="">b2</a></span> <span id="delta:944" class="id"><a name="delta:944" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:936">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:937">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:938">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:937">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:939">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:940">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m1':941">m1',</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:942">b1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:938">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:943">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inj_offset_aligned">inj_offset_aligned</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:944">delta</a></span> (<span class="id"><a href="compcert.common.Memory.html#hi:940">hi-lo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="ofs:945" class="id"><a name="ofs:945" class="">ofs</a></span> <span id="k:946" class="id"><a name="k:946" class="">k</a></span> <span id="p:947" class="id"><a name="p:947" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:939">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:945">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:940">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:938">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:943">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:945">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:944">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k:946">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:947">p</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:936">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:942">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:943">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:944">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:936">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':941">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:938">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof192')">Proof.</span></div>
<div class="proofscript" id="proof192">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="id">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H4</span> <span class="gallina-kwd">in</span> <span class="id">H5;</span> <span class="id">inv</span> <span class="id">H5</span>. <span class="id">eauto</span>. <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b0</span>. <span class="id">assert</span> (<span class="id">delta0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">delta</span>) <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">subst</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id">hi</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_3">perm_alloc_3;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">H6</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>)<span class="id">;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id">hi</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_3">perm_alloc_3;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">H6</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>)<span class="id">;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H2</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_align0</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs</span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">injection</span> <span class="id">H0;</span> <span class="id">intros</span> <span class="id">NEXT</span> <span class="id">MEM</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">MEM;</span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">NEXT</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="gallina-kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gi">ZMap.gi</a></span>. <span class="id">constructor</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.free_left_inj" class="id"><a name="Mem.free_left_inj" class="">free_left_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:948" class="id"><a name="f:948" class="">f</a></span> <span id="m1:949" class="id"><a name="m1:949" class="">m1</a></span> <span id="m2:950" class="id"><a name="m2:950" class="">m2</a></span> <span id="b:951" class="id"><a name="b:951" class="">b</a></span> <span id="lo:952" class="id"><a name="lo:952" class="">lo</a></span> <span id="hi:953" class="id"><a name="hi:953" class="">hi</a></span> <span id="m1':954" class="id"><a name="m1':954" class="">m1',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:948">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:949">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:950">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:949">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:951">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:952">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:953">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':954">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:948">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':954">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:950">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof193')">Proof.</span></div>
<div class="proofscript" id="proof193">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result;</a></span> <span class="id">eauto</span>. <span class="id">intro</span> <span class="id">FREE</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_align0</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs</span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">FREE;</span> <span class="id">simpl</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.free_right_inj" class="id"><a name="Mem.free_right_inj" class="">free_right_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:955" class="id"><a name="f:955" class="">f</a></span> <span id="m1:956" class="id"><a name="m1:956" class="">m1</a></span> <span id="m2:957" class="id"><a name="m2:957" class="">m2</a></span> <span id="b:958" class="id"><a name="b:958" class="">b</a></span> <span id="lo:959" class="id"><a name="lo:959" class="">lo</a></span> <span id="hi:960" class="id"><a name="hi:960" class="">hi</a></span> <span id="m2':961" class="id"><a name="m2':961" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:955">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:956">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:957">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:957">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:958">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:959">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:960">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':961">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b':962" class="id"><a name="b':962" class="">b'</a></span> <span id="delta:963" class="id"><a name="delta:963" class="">delta</a></span> <span id="ofs:964" class="id"><a name="ofs:964" class="">ofs</a></span> <span id="k:965" class="id"><a name="k:965" class="">k</a></span> <span id="p:966" class="id"><a name="p:966" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:955">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b':962">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b:958">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:963">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:956">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':962">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:964">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:965">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:966">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:959">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:964">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:963">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:960">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:955">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:956">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':961">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof194')">Proof.</span></div>
<div class="proofscript" id="proof194">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result;</a></span> <span class="id">eauto</span>. <span class="id">intro</span> <span class="id">FREE</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">PERM:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b1:973" class="id"><span id="b1:967" class="id"><a name="b1:973" class="">b1</a></span></span> <span id="b2:974" class="id"><span id="b2:968" class="id"><a name="b2:974" class="">b2</a></span></span> <span id="delta:975" class="id"><span id="delta:969" class="id"><a name="delta:975" class="">delta</a></span></span> <span id="ofs:976" class="id"><span id="ofs:970" class="id"><a name="ofs:976" class="">ofs</a></span></span> <span id="k:977" class="id"><span id="k:971" class="id"><a name="k:977" class="">k</a></span></span> <span id="p:978" class="id"><span id="p:972" class="id"><a name="p:978" class="">p,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span> <span class="id"><a href="compcert.common.Memory.html#b1:967">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:968">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:969">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id"><a href="compcert.common.Memory.html#b1:967">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:970">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:971">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:972">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m2'</span> <span class="id"><a href="compcert.common.Memory.html#b2:968">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:970">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:969">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k:971">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:972">p</a></span>).<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">perm_free_1;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">subst</span> <span class="id">b</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> (<span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id">hi</span>)). <span class="id">red;</span> <span class="id">intros;</span> <span class="id">eapply</span> <span class="id">H1;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_align0;</span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">FREE;</span> <span class="id">simpl</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of <span class="bracket"><span class="id">drop_perm</span></span> operations. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.drop_unmapped_inj" class="id"><a name="Mem.drop_unmapped_inj" class="">drop_unmapped_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:979" class="id"><a name="f:979" class="">f</a></span> <span id="m1:980" class="id"><a name="m1:980" class="">m1</a></span> <span id="m2:981" class="id"><a name="m2:981" class="">m2</a></span> <span id="b:982" class="id"><a name="b:982" class="">b</a></span> <span id="lo:983" class="id"><a name="lo:983" class="">lo</a></span> <span id="hi:984" class="id"><a name="hi:984" class="">hi</a></span> <span id="p:985" class="id"><a name="p:985" class="">p</a></span> <span id="m1':986" class="id"><a name="m1':986" class="">m1',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:979">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:980">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:981">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:980">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:982">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:983">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:984">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p:985">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':986">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:979">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:982">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:979">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':986">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:981">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof195')">Proof.</span></div>
<div class="proofscript" id="proof195">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_perm0;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_align0</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs</span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id">p0</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">ofs</span> <span class="id">m1'</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b1</a></span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">ofs</span> <span class="id">m1</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b1</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">mi_memval0;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.drop_mapped_inj" class="id"><a name="Mem.drop_mapped_inj" class="">drop_mapped_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:987" class="id"><a name="f:987" class="">f</a></span> <span id="m1:988" class="id"><a name="m1:988" class="">m1</a></span> <span id="m2:989" class="id"><a name="m2:989" class="">m2</a></span> <span id="b1:990" class="id"><a name="b1:990" class="">b1</a></span> <span id="b2:991" class="id"><a name="b2:991" class="">b2</a></span> <span id="delta:992" class="id"><a name="delta:992" class="">delta</a></span> <span id="lo:993" class="id"><a name="lo:993" class="">lo</a></span> <span id="hi:994" class="id"><a name="hi:994" class="">hi</a></span> <span id="p:995" class="id"><a name="p:995" class="">p</a></span> <span id="m1':996" class="id"><a name="m1':996" class="">m1',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:987">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:988">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:989">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:988">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:990">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:993">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:994">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p:995">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':996">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> <span class="id"><a href="compcert.common.Memory.html#f:987">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:988">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:987">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:990">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:991">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:992">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="m2':997" class="id"><a name="m2':997" class="">m2',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:989">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:991">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#lo:993">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:992">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#hi:994">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:992">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#p:995">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':997">m2'</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:987">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':996">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':997">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof196')">Proof.</span></div>
<div class="proofscript" id="proof196">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">{</a></span> <span id="m2':999" class="id"><span id="m2':998" class="id"><a name="m2':999" class="">m2'</a></span></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">|</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id">m2</span> <span class="id">b2</span> (<span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) (<span class="id">hi</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) <span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':998">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">}</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_drop_2">range_perm_drop_2</a></span>. <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id">ofs</span> <span class="gallina-kwd">with</span> ((<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta</span>) <span class="id">+</span> <span class="id">delta</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_drop_1">range_perm_drop_1;</a></span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">X</span> <span class="gallina-kwd">as</span> <span class="id">[m2'</span> <span class="id">DROP]</span>. <span class="gallina-kwd">exists</span> <span class="id">m2';</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m2</span> <span class="id">b3</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta0</span>) <span class="id">k</span> <span class="id">p0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_perm0;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">b0</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;b1&nbsp;=&nbsp;b0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b0</span>. <span class="id">rewrite</span> <span class="id">H2</span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta0</span>) (<span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta0</span>)). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">hi</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta0</span>) (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta0</span>)). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id">p</span> <span class="id">p0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_2">perm_drop_2</a></span>.  <span class="id">eexact</span> <span class="id">H0</span>. <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">ofs</span>). <span class="id">lia</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id">p;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_1">perm_drop_1</a></span>. <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;b1&nbsp;&lt;&gt;&nbsp;b0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b3</span> <span class="id">b2</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta0</span>) (<span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">hi</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta0</span>))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_drop_1">range_perm_drop_1;</a></span> <span class="id">eauto</span>. <span class="id">lia</span>. <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_max">perm_max</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id">p0</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">zarith</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_align0</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs</span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id">p0</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;memval&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">m1'</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b0</a></span>) <span class="gallina-kwd">with</span> (<span class="id">m1</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b0</a></span>).<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">m2'</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b3</a></span>) <span class="gallina-kwd">with</span> (<span class="id">m2</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b3</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">mi_memval0;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">DROP;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m2</span> <span class="id">b2</span> (<span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) (<span class="id">hi</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">DROP;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.drop_outside_inj" class="id"><a name="Mem.drop_outside_inj" class="">drop_outside_inj:</a></span> <span class="gallina-kwd">forall</span> <span id="f:1000" class="id"><a name="f:1000" class="">f</a></span> <span id="m1:1001" class="id"><a name="m1:1001" class="">m1</a></span> <span id="m2:1002" class="id"><a name="m2:1002" class="">m2</a></span> <span id="b:1003" class="id"><a name="b:1003" class="">b</a></span> <span id="lo:1004" class="id"><a name="lo:1004" class="">lo</a></span> <span id="hi:1005" class="id"><a name="hi:1005" class="">hi</a></span> <span id="p:1006" class="id"><a name="p:1006" class="">p</a></span> <span id="m2':1007" class="id"><a name="m2':1007" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1000">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1001">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1002">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1002">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1003">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1004">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1005">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1006">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1007">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b':1008" class="id"><a name="b':1008" class="">b'</a></span> <span id="delta:1009" class="id"><a name="delta:1009" class="">delta</a></span> <span id="ofs':1010" class="id"><a name="ofs':1010" class="">ofs'</a></span> <span id="k:1011" class="id"><a name="k:1011" class="">k</a></span> <span id="p:1012" class="id"><a name="p:1012" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1000">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1008">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b:1003">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1009">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1001">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1008">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1010">ofs'</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1011">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1012">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#lo:1004">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1010">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1009">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1005">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1000">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1001">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1007">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof197')">Proof.</span></div>
<div class="proofscript" id="proof197">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">subst</span> <span class="id">b2</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) <span class="id">lo</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">hi</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">byContradiction</span>. <span class="id">exploit</span> <span class="id">H1;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_align0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">m2'</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b2</a></span>) <span class="gallina-kwd">with</span> (<span class="id">m2</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<span class="id"><a href="compcert.common.Memory.html#c315e69cfe64a7553bd8eefc2c065fa3">#b2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">mi_memval0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Memory extensions </h1>
<br/>
<div class="doc"> A store <span class="bracket"><span class="id">m2</span></span> extends a store <span class="bracket"><span class="id">m1</span></span> if <span class="bracket"><span class="id">m2</span></span> can be obtained from <span class="bracket"><span class="id">m1</span></span>
  by increasing the sizes of the memory blocks of <span class="bracket"><span class="id">m1</span></span> (decreasing
  the low bounds, increasing the high bounds), and replacing some of
  the <span class="bracket"><span class="id">Vundef</span></span> values stored in <span class="bracket"><span class="id">m1</span></span> by more defined values stored
  in <span class="bracket"><span class="id">m2</span></span> at the same locations. </div>
<br/>
<span class="vernacular">Record</span> <span id="Mem.extends'" class="id"><a name="Mem.extends'" class="">extends'</a></span> (<span id="m1:1013" class="id"><a name="m1:1013" class="">m1</a></span> <span id="m2:1014" class="id"><a name="m2:1014" class="">m2:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">mk_extends</span> <span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mext_next" class="id"><a name="Mem.mext_next" class="">mext_next:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1013">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1014">m2;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mext_inj" class="id"><a name="Mem.mext_inj" class="">mext_inj:</a></span>  <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1013">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1014">m2;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mext_perm_inv" class="id"><a name="Mem.mext_perm_inv" class="">mext_perm_inv:</a></span> <span class="gallina-kwd">forall</span> <span id="b:1018" class="id"><a name="b:1018" class="">b</a></span> <span id="ofs:1019" class="id"><a name="ofs:1019" class="">ofs</a></span> <span id="k:1020" class="id"><a name="k:1020" class="">k</a></span> <span id="p:1021" class="id"><a name="p:1021" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1014">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1018">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1019">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1020">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1021">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1013">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1018">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1019">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1020">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1021">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1013">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1018">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1019">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span><br/>
&nbsp;&nbsp;<span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.extends" class="id"><a name="Mem.extends" class="">extends</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends'">extends'</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.extends_refl" class="id"><a name="Mem.extends_refl" class="">extends_refl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1023" class="id"><a name="m:1023" class="">m,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1023">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1023">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof198')">Proof.</span></div>
<div class="proofscript" id="proof198">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">constructor</span>. <span class="id">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>) <span class="gallina-kwd">with</span> <span class="id">ofs</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>) <span class="gallina-kwd">with</span> <span class="id">ofs</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef_refl">memval_lessdef_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_extends" class="id"><a name="Mem.load_extends" class="">load_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:1024" class="id"><a name="chunk:1024" class="">chunk</a></span> <span id="m1:1025" class="id"><a name="m1:1025" class="">m1</a></span> <span id="m2:1026" class="id"><a name="m2:1026" class="">m2</a></span> <span id="b:1027" class="id"><a name="b:1027" class="">b</a></span> <span id="ofs:1028" class="id"><a name="ofs:1028" class="">ofs</a></span> <span id="v1:1029" class="id"><a name="v1:1029" class="">v1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1025">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1026">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1024">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1025">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1027">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1028">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1029">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v2:1030" class="id"><a name="v2:1030" class="">v2,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1024">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1026">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1027">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1028">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1030">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1029">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1030">v2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof199')">Proof.</span></div>
<div class="proofscript" id="proof199">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inj">load_inj;</a></span> <span class="id">eauto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[v2</span> <span class="id">[A</span> <span class="id">B]]</span>. <span class="gallina-kwd">exists</span> <span class="id">v2;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>) <span class="gallina-kwd">with</span> <span class="id">ofs</span> <span class="gallina-kwd">in</span> <span class="id">A</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span> <span class="gallina-kwd">in</span> <span class="id">B</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadv_extends" class="id"><a name="Mem.loadv_extends" class="">loadv_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:1031" class="id"><a name="chunk:1031" class="">chunk</a></span> <span id="m1:1032" class="id"><a name="m1:1032" class="">m1</a></span> <span id="m2:1033" class="id"><a name="m2:1033" class="">m2</a></span> <span id="addr1:1034" class="id"><a name="addr1:1034" class="">addr1</a></span> <span id="addr2:1035" class="id"><a name="addr2:1035" class="">addr2</a></span> <span id="v1:1036" class="id"><a name="v1:1036" class="">v1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1032">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1033">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1031">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1032">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#addr1:1034">addr1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1036">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#addr1:1034">addr1</a></span> <span class="id"><a href="compcert.common.Memory.html#addr2:1035">addr2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v2:1037" class="id"><a name="v2:1037" class="">v2,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1031">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1033">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#addr2:1035">addr2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1037">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1036">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1037">v2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof200')">Proof.</span></div>
<div class="proofscript" id="proof200">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv;</a></span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">addr2;</span> <span class="id">try</span> <span class="id">congruence</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_extends">load_extends;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_extends" class="id"><a name="Mem.loadbytes_extends" class="">loadbytes_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1038" class="id"><a name="m1:1038" class="">m1</a></span> <span id="m2:1039" class="id"><a name="m2:1039" class="">m2</a></span> <span id="b:1040" class="id"><a name="b:1040" class="">b</a></span> <span id="ofs:1041" class="id"><a name="ofs:1041" class="">ofs</a></span> <span id="len:1042" class="id"><a name="len:1042" class="">len</a></span> <span id="bytes1:1043" class="id"><a name="bytes1:1043" class="">bytes1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1038">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1039">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1038">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1040">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1041">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len:1042">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:1043">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bytes2:1044" class="id"><a name="bytes2:1044" class="">bytes2,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1039">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1040">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1041">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len:1042">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:1044">bytes2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef">memval_lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:1043">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:1044">bytes2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof201')">Proof.</span></div>
<div class="proofscript" id="proof201">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id">ofs</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_inj">loadbytes_inj;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_within_extends" class="id"><a name="Mem.store_within_extends" class="">store_within_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:1045" class="id"><a name="chunk:1045" class="">chunk</a></span> <span id="m1:1046" class="id"><a name="m1:1046" class="">m1</a></span> <span id="m2:1047" class="id"><a name="m2:1047" class="">m2</a></span> <span id="b:1048" class="id"><a name="b:1048" class="">b</a></span> <span id="ofs:1049" class="id"><a name="ofs:1049" class="">ofs</a></span> <span id="v1:1050" class="id"><a name="v1:1050" class="">v1</a></span> <span id="m1':1051" class="id"><a name="m1':1051" class="">m1'</a></span> <span id="v2:1052" class="id"><a name="v2:1052" class="">v2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1046">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1047">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1045">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1046">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1048">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1049">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1050">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1051">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1050">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1052">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="m2':1053" class="id"><a name="m2':1053" class="">m2',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1045">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1047">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1048">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1049">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1052">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1053">m2'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1051">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1053">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof202')">Proof.</span></div>
<div class="proofscript" id="proof202">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mapped_inj">store_mapped_inj;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H3;</span> <span class="id">inv</span> <span class="id">H4</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[m2'</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">m2';</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>) <span class="gallina-kwd">with</span> <span class="id">ofs</span> <span class="gallina-kwd">in</span> <span class="id">A</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span>).<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">mext_perm_inv0;</span> <span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_1">perm_store_1,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_outside_extends" class="id"><a name="Mem.store_outside_extends" class="">store_outside_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:1054" class="id"><a name="chunk:1054" class="">chunk</a></span> <span id="m1:1055" class="id"><a name="m1:1055" class="">m1</a></span> <span id="m2:1056" class="id"><a name="m2:1056" class="">m2</a></span> <span id="b:1057" class="id"><a name="b:1057" class="">b</a></span> <span id="ofs:1058" class="id"><a name="ofs:1058" class="">ofs</a></span> <span id="v:1059" class="id"><a name="v:1059" class="">v</a></span> <span id="m2':1060" class="id"><a name="m2':1060" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1055">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1056">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1054">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1056">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1057">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1058">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:1059">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1060">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="ofs':1061" class="id"><a name="ofs':1061" class="">ofs',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1055">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1057">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1061">ofs'</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1058">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1061">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1058">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1054">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1055">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1060">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof203')">Proof.</span></div>
<div class="proofscript" id="proof203">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_outside_inj">store_outside_inj;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">eapply</span> <span class="id">H1;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storev_extends" class="id"><a name="Mem.storev_extends" class="">storev_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:1062" class="id"><a name="chunk:1062" class="">chunk</a></span> <span id="m1:1063" class="id"><a name="m1:1063" class="">m1</a></span> <span id="m2:1064" class="id"><a name="m2:1064" class="">m2</a></span> <span id="addr1:1065" class="id"><a name="addr1:1065" class="">addr1</a></span> <span id="v1:1066" class="id"><a name="v1:1066" class="">v1</a></span> <span id="m1':1067" class="id"><a name="m1':1067" class="">m1'</a></span> <span id="addr2:1068" class="id"><a name="addr2:1068" class="">addr2</a></span> <span id="v2:1069" class="id"><a name="v2:1069" class="">v2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1063">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1064">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1062">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1063">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#addr1:1065">addr1</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1066">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1067">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#addr1:1065">addr1</a></span> <span class="id"><a href="compcert.common.Memory.html#addr2:1068">addr2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1066">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1069">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="m2':1070" class="id"><a name="m2':1070" class="">m2',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1062">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1064">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#addr2:1068">addr2</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1069">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1070">m2'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1067">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1070">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof204')">Proof.</span></div>
<div class="proofscript" id="proof204">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev;</a></span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">addr2;</span> <span class="id">try</span> <span class="id">congruence</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_within_extends">store_within_extends;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_within_extends" class="id"><a name="Mem.storebytes_within_extends" class="">storebytes_within_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1071" class="id"><a name="m1:1071" class="">m1</a></span> <span id="m2:1072" class="id"><a name="m2:1072" class="">m2</a></span> <span id="b:1073" class="id"><a name="b:1073" class="">b</a></span> <span id="ofs:1074" class="id"><a name="ofs:1074" class="">ofs</a></span> <span id="bytes1:1075" class="id"><a name="bytes1:1075" class="">bytes1</a></span> <span id="m1':1076" class="id"><a name="m1':1076" class="">m1'</a></span> <span id="bytes2:1077" class="id"><a name="bytes2:1077" class="">bytes2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1071">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1072">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1071">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1073">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1074">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:1075">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1076">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef">memval_lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:1075">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:1077">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="m2':1078" class="id"><a name="m2':1078" class="">m2',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1072">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1073">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1074">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:1077">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1078">m2'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1076">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1078">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof205')">Proof.</span></div>
<div class="proofscript" id="proof205">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mapped_inj">storebytes_mapped_inj;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H3;</span> <span class="id">inv</span> <span class="id">H4</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[m2'</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">m2';</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>) <span class="gallina-kwd">with</span> <span class="id">ofs</span> <span class="gallina-kwd">in</span> <span class="id">A</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span>).<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">mext_perm_inv0;</span> <span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_outside_extends" class="id"><a name="Mem.storebytes_outside_extends" class="">storebytes_outside_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1079" class="id"><a name="m1:1079" class="">m1</a></span> <span id="m2:1080" class="id"><a name="m2:1080" class="">m2</a></span> <span id="b:1081" class="id"><a name="b:1081" class="">b</a></span> <span id="ofs:1082" class="id"><a name="ofs:1082" class="">ofs</a></span> <span id="bytes2:1083" class="id"><a name="bytes2:1083" class="">bytes2</a></span> <span id="m2':1084" class="id"><a name="m2':1084" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1079">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1080">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1080">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1081">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1082">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:1083">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1084">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="ofs':1085" class="id"><a name="ofs':1085" class="">ofs',</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1079">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1081">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1085">ofs'</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1082">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1085">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1082">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:1083">bytes2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1079">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1084">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof206')">Proof.</span></div>
<div class="proofscript" id="proof206">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_outside_inj">storebytes_outside_inj;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">eapply</span> <span class="id">H1;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.alloc_extends" class="id"><a name="Mem.alloc_extends" class="">alloc_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1086" class="id"><a name="m1:1086" class="">m1</a></span> <span id="m2:1087" class="id"><a name="m2:1087" class="">m2</a></span> <span id="lo1:1088" class="id"><a name="lo1:1088" class="">lo1</a></span> <span id="hi1:1089" class="id"><a name="hi1:1089" class="">hi1</a></span> <span id="b:1090" class="id"><a name="b:1090" class="">b</a></span> <span id="m1':1091" class="id"><a name="m1':1091" class="">m1'</a></span> <span id="lo2:1092" class="id"><a name="lo2:1092" class="">lo2</a></span> <span id="hi2:1093" class="id"><a name="hi2:1093" class="">hi2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1086">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1087">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1086">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo1:1088">lo1</a></span> <span class="id"><a href="compcert.common.Memory.html#hi1:1089">hi1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m1':1091">m1',</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1090">b</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#lo2:1092">lo2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#lo1:1088">lo1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi1:1089">hi1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#hi2:1093">hi2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="m2':1094" class="id"><a name="m2':1094" class="">m2',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1087">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#lo2:1092">lo2</a></span> <span class="id"><a href="compcert.common.Memory.html#hi2:1093">hi2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m2':1094">m2',</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1090">b</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1091">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1094">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof207')">Proof.</span></div>
<div class="proofscript" id="proof207">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id">m2</span> <span class="id">lo2</span> <span class="id">hi2</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">m2'</span> <span class="id">b'</span> <span class="id">ALLOC</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">b'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ALLOC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b'</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">m2';</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ALLOC</span>).<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_mapped_inj">alloc_left_mapped_inj</a></span> <span class="gallina-kwd">with</span> (<span class="id">m1</span> <span class="id">:=</span> <span class="id">m1</span>) (<span class="id">m2</span> <span class="id">:=</span> <span class="id">m2'</span>) (<span class="id">b2</span> <span class="id">:=</span> <span class="id">b</span>) (<span class="id">delta</span> <span class="id">:=</span> <span class="id">0</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_right_inj">alloc_right_inj;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">red</span>. <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable;</a></span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">b0</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">PERM</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EITHER:</span> <span class="id">lo1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id">hi1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span>(<span class="id">lo1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id">hi1</span>)) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">EITHER</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable;</a></span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mext_perm_inv0;</span> <span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.free_left_extends" class="id"><a name="Mem.free_left_extends" class="">free_left_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1095" class="id"><a name="m1:1095" class="">m1</a></span> <span id="m2:1096" class="id"><a name="m2:1096" class="">m2</a></span> <span id="b:1097" class="id"><a name="b:1097" class="">b</a></span> <span id="lo:1098" class="id"><a name="lo:1098" class="">lo</a></span> <span id="hi:1099" class="id"><a name="hi:1099" class="">hi</a></span> <span id="m1':1100" class="id"><a name="m1':1100" class="">m1',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1095">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1096">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1095">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1097">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1098">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1099">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1100">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1100">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1096">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof208')">Proof.</span></div>
<div class="proofscript" id="proof208">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">nextblock_free</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inj">free_left_inj;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">mext_perm_inv0;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_inv">perm_free_inv</a></span> <span class="gallina-kwd">in</span> <span class="id">A;</span> <span class="id">eauto</span>. <span class="id">destruct</span> <span class="id">A</span> <span class="gallina-kwd">as</span> <span class="id">[[A</span> <span class="id">B]|A];</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b0</span>. <span class="id">right;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.free_right_extends" class="id"><a name="Mem.free_right_extends" class="">free_right_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1101" class="id"><a name="m1:1101" class="">m1</a></span> <span id="m2:1102" class="id"><a name="m2:1102" class="">m2</a></span> <span id="b:1103" class="id"><a name="b:1103" class="">b</a></span> <span id="lo:1104" class="id"><a name="lo:1104" class="">lo</a></span> <span id="hi:1105" class="id"><a name="hi:1105" class="">hi</a></span> <span id="m2':1106" class="id"><a name="m2':1106" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1101">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1102">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1102">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1103">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1104">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1105">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1106">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="ofs:1107" class="id"><a name="ofs:1107" class="">ofs</a></span> <span id="k:1108" class="id"><a name="k:1108" class="">k</a></span> <span id="p:1109" class="id"><a name="p:1109" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1101">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1103">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1107">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1108">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1109">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1104">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1107">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1105">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1101">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1106">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof209')">Proof.</span></div>
<div class="proofscript" id="proof209">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">nextblock_free</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_right_inj">free_right_inj;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">eapply</span> <span class="id">H1;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.free_parallel_extends" class="id"><a name="Mem.free_parallel_extends" class="">free_parallel_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1110" class="id"><a name="m1:1110" class="">m1</a></span> <span id="m2:1111" class="id"><a name="m2:1111" class="">m2</a></span> <span id="b:1112" class="id"><a name="b:1112" class="">b</a></span> <span id="lo:1113" class="id"><a name="lo:1113" class="">lo</a></span> <span id="hi:1114" class="id"><a name="hi:1114" class="">hi</a></span> <span id="m1':1115" class="id"><a name="m1':1115" class="">m1',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1110">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1111">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1110">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1112">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1113">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1114">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1115">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="m2':1116" class="id"><a name="m2':1116" class="">m2',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1111">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1112">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1113">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1114">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1116">m2'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1115">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1116">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof210')">Proof.</span></div>
<div class="proofscript" id="proof210">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">{</a></span> <span id="m2':1118" class="id"><span id="m2':1117" class="id"><a name="m2':1118" class="">m2':</a></span></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">|</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1117">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#6556914db359db999889decec6a4a562">}</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_free">range_perm_free</a></span>. <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> <span class="id">ofs</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span> <span class="gallina-kwd">with</span> (<span class="id">b1</span> <span class="id">:=</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">free_range_perm;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">X</span> <span class="gallina-kwd">as</span> <span class="id">[m2'</span> <span class="id">FREE]</span>. <span class="gallina-kwd">exists</span> <span class="id">m2';</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">nextblock_free</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">nextblock_free</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">FREE</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_right_inj">free_right_inj</a></span> <span class="gallina-kwd">with</span> (<span class="id">m1</span> <span class="id">:=</span> <span class="id">m1'</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inj">free_left_inj;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id;</a></span> <span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2</a></span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">ofs</span>)<span class="id">;</span> <span class="id">lia</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">mext_perm_inv0;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_inv">perm_free_inv</a></span> <span class="gallina-kwd">in</span> <span class="id">A;</span> <span class="id">eauto</span>. <span class="id">destruct</span> <span class="id">A</span> <span class="gallina-kwd">as</span> <span class="id">[[A</span> <span class="id">B]|A];</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b0</span>. <span class="id">right;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_block_extends" class="id"><a name="Mem.valid_block_extends" class="">valid_block_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1119" class="id"><a name="m1:1119" class="">m1</a></span> <span id="m2:1120" class="id"><a name="m2:1120" class="">m2</a></span> <span id="b:1121" class="id"><a name="b:1121" class="">b,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1119">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1120">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1119">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1121">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1120">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1121">b</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof211')">Proof.</span></div>
<div class="proofscript" id="proof211">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>. <span class="id">rewrite</span> <span class="id">mext_next0</span>. <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_extends" class="id"><a name="Mem.perm_extends" class="">perm_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1122" class="id"><a name="m1:1122" class="">m1</a></span> <span id="m2:1123" class="id"><a name="m2:1123" class="">m2</a></span> <span id="b:1124" class="id"><a name="b:1124" class="">b</a></span> <span id="ofs:1125" class="id"><a name="ofs:1125" class="">ofs</a></span> <span id="k:1126" class="id"><a name="k:1126" class="">k</a></span> <span id="p:1127" class="id"><a name="p:1127" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1122">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1123">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1122">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1124">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1125">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1126">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1127">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1123">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1124">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1125">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1126">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1127">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof212')">Proof.</span></div>
<div class="proofscript" id="proof212">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">replace</span> <span class="id">ofs</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_extends_inv" class="id"><a name="Mem.perm_extends_inv" class="">perm_extends_inv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1128" class="id"><a name="m1:1128" class="">m1</a></span> <span id="m2:1129" class="id"><a name="m2:1129" class="">m2</a></span> <span id="b:1130" class="id"><a name="b:1130" class="">b</a></span> <span id="ofs:1131" class="id"><a name="ofs:1131" class="">ofs</a></span> <span id="k:1132" class="id"><a name="k:1132" class="">k</a></span> <span id="p:1133" class="id"><a name="p:1133" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1128">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1129">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1129">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1130">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1131">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1132">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1133">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1128">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1130">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1131">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1132">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1133">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1128">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1130">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1131">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof213')">Proof.</span></div>
<div class="proofscript" id="proof213">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_extends" class="id"><a name="Mem.valid_access_extends" class="">valid_access_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1134" class="id"><a name="m1:1134" class="">m1</a></span> <span id="m2:1135" class="id"><a name="m2:1135" class="">m2</a></span> <span id="chunk:1136" class="id"><a name="chunk:1136" class="">chunk</a></span> <span id="b:1137" class="id"><a name="b:1137" class="">b</a></span> <span id="ofs:1138" class="id"><a name="ofs:1138" class="">ofs</a></span> <span id="p:1139" class="id"><a name="p:1139" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1134">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1135">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1134">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1136">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1137">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1138">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1139">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1135">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1136">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1137">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1138">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1139">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof214')">Proof.</span></div>
<div class="proofscript" id="proof214">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">replace</span> <span class="id">ofs</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inj">valid_access_inj;</a></span> <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_pointer_extends" class="id"><a name="Mem.valid_pointer_extends" class="">valid_pointer_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1140" class="id"><a name="m1:1140" class="">m1</a></span> <span id="m2:1141" class="id"><a name="m2:1141" class="">m2</a></span> <span id="b:1142" class="id"><a name="b:1142" class="">b</a></span> <span id="ofs:1143" class="id"><a name="ofs:1143" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1140">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1141">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1140">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1142">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1143">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1141">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1142">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1143">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof215')">Proof.</span></div>
<div class="proofscript" id="proof215">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_extends">valid_access_extends;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.weak_valid_pointer_extends" class="id"><a name="Mem.weak_valid_pointer_extends" class="">weak_valid_pointer_extends:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1144" class="id"><a name="m1:1144" class="">m1</a></span> <span id="m2:1145" class="id"><a name="m2:1145" class="">m2</a></span> <span id="b:1146" class="id"><a name="b:1146" class="">b</a></span> <span id="ofs:1147" class="id"><a name="ofs:1147" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1144">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1145">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1144">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1146">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1147">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1145">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1146">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1147">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof216')">Proof.</span></div>
<div class="proofscript" id="proof216">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">1</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span>. <span class="id">rewrite</span> <span class="id">!orb_true_iff</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[];</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_extends">valid_pointer_extends</a></span>.<br/>
Qed.</div>
<br/>
<h1> Memory injections </h1>
<br/>
<div class="doc">A memory state <span class="bracket"><span class="id">m1</span></span> injects into another memory state <span class="bracket"><span class="id">m2</span></span> via the
  memory injection <span class="bracket"><span class="id">f</span></span> if the following conditions hold:
<ul>
<li>
 each access in <span class="bracket"><span class="id">m2</span></span> that corresponds to a valid access in <span class="bracket"><span class="id">m1</span></span>
  is itself valid;
</li>
<li>
 the memory value associated in <span class="bracket"><span class="id">m1</span></span> to an accessible address
  must inject into <span class="bracket"><span class="id">m2</span></span>'s memory value at the corersponding address;
</li>
<li>
 unallocated blocks in <span class="bracket"><span class="id">m1</span></span> must be mapped to <span class="bracket"><span class="id">None</span></span> by <span class="bracket"><span class="id">f</span></span>;
</li>
<li>
 if <span class="bracket"><span class="id">f</span> <span class="id">b</span> = <span class="id">Some</span>(<span class="id">b</span>', <span class="id">delta</span>)</span>, <span class="bracket"><span class="id">b</span>'</span> must be valid in <span class="bracket"><span class="id">m2</span></span>;
</li>
<li>
 distinct blocks in <span class="bracket"><span class="id">m1</span></span> are mapped to non-overlapping sub-blocks in <span class="bracket"><span class="id">m2</span></span>;
</li>
<li>
 the sizes of <span class="bracket"><span class="id">m2</span></span>'s blocks are representable with unsigned machine integers;
</li>
<li>
 pointers that could be represented using unsigned machine integers remain
  representable after the injection.
</li>
</ul>
</div>
<br/>
<span class="vernacular">Record</span> <span id="Mem.inject'" class="id"><a name="Mem.inject'" class="">inject'</a></span> (<span id="f:1148" class="id"><a name="f:1148" class="">f:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span id="m1:1149" class="id"><a name="m1:1149" class="">m1</a></span> <span id="m2:1150" class="id"><a name="m2:1150" class="">m2:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">mk_inject</span> <span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mi_inj" class="id"><a name="Mem.mi_inj" class="">mi_inj:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1148">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1149">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1150">m2;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mi_freeblocks" class="id"><a name="Mem.mi_freeblocks" class="">mi_freeblocks:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:1153" class="id"><a name="b:1153" class="">b,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span>(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1149">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1153">b</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1148">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1153">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mi_mappedblocks" class="id"><a name="Mem.mi_mappedblocks" class="">mi_mappedblocks:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:1155" class="id"><a name="b:1155" class="">b</a></span> <span id="b':1156" class="id"><a name="b':1156" class="">b'</a></span> <span id="delta:1157" class="id"><a name="delta:1157" class="">delta,</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1148">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1155">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b':1156">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1157">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1150">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1156">b';</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mi_no_overlap" class="id"><a name="Mem.mi_no_overlap" class="">mi_no_overlap:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1148">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1149">m1;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mi_representable" class="id"><a name="Mem.mi_representable" class="">mi_representable:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:1160" class="id"><a name="b:1160" class="">b</a></span> <span id="b':1161" class="id"><a name="b':1161" class="">b'</a></span> <span id="delta:1162" class="id"><a name="delta:1162" class="">delta</a></span> <span id="ofs:1163" class="id"><a name="ofs:1163" class="">ofs,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1148">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1160">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b':1161">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1162">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1149">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1160">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1163">ofs</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1149">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1160">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1163">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#delta:1162">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1163">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1162">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span><span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span id="Mem.mi_perm_inv" class="id"><a name="Mem.mi_perm_inv" class="">mi_perm_inv:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b1:1165" class="id"><a name="b1:1165" class="">b1</a></span> <span id="ofs:1166" class="id"><a name="ofs:1166" class="">ofs</a></span> <span id="b2:1167" class="id"><a name="b2:1167" class="">b2</a></span> <span id="delta:1168" class="id"><a name="delta:1168" class="">delta</a></span> <span id="k:1169" class="id"><a name="k:1169" class="">k</a></span> <span id="p:1170" class="id"><a name="p:1170" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1148">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1165">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:1167">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1168">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1150">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1167">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1166">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1168">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k:1169">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1170">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1149">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1165">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1166">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1169">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1170">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1149">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1165">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1166">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span><br/>
&nbsp;&nbsp;<span class="id">}</span>.<br/>
<span class="vernacular">Definition</span> <span id="Mem.inject" class="id"><a name="Mem.inject" class="">inject</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject'">inject'</a></span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">mi_mappedblocks:</span> <span class="id">mem</span>.<br/>
<br/>
<div class="doc">Preservation of access validity and pointer validity </div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_block_inject_1" class="id"><a name="Mem.valid_block_inject_1" class="">valid_block_inject_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1172" class="id"><a name="f:1172" class="">f</a></span> <span id="m1:1173" class="id"><a name="m1:1173" class="">m1</a></span> <span id="m2:1174" class="id"><a name="m2:1174" class="">m2</a></span> <span id="b1:1175" class="id"><a name="b1:1175" class="">b1</a></span> <span id="b2:1176" class="id"><a name="b2:1176" class="">b2</a></span> <span id="delta:1177" class="id"><a name="delta:1177" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1172">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1175">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:1176">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1177">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1172">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1173">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1174">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1173">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1175">b1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof217')">Proof.</span></div>
<div class="proofscript" id="proof217">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>)). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">f</span> <span class="id">b1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_freeblocks">mi_freeblocks;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_block_inject_2" class="id"><a name="Mem.valid_block_inject_2" class="">valid_block_inject_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1178" class="id"><a name="f:1178" class="">f</a></span> <span id="m1:1179" class="id"><a name="m1:1179" class="">m1</a></span> <span id="m2:1180" class="id"><a name="m2:1180" class="">m2</a></span> <span id="b1:1181" class="id"><a name="b1:1181" class="">b1</a></span> <span id="b2:1182" class="id"><a name="b2:1182" class="">b2</a></span> <span id="delta:1183" class="id"><a name="delta:1183" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1178">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1181">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:1182">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1183">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1178">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1179">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1180">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1180">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1182">b2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof218')">Proof.</span></div>
<div class="proofscript" id="proof218">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_mappedblocks">mi_mappedblocks;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span> <span class="id">valid_block_inject_1</span> <span class="id">valid_block_inject_2:</span> <span class="id">mem</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_inject" class="id"><a name="Mem.perm_inject" class="">perm_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1184" class="id"><a name="f:1184" class="">f</a></span> <span id="m1:1185" class="id"><a name="m1:1185" class="">m1</a></span> <span id="m2:1186" class="id"><a name="m2:1186" class="">m2</a></span> <span id="b1:1187" class="id"><a name="b1:1187" class="">b1</a></span> <span id="b2:1188" class="id"><a name="b2:1188" class="">b2</a></span> <span id="delta:1189" class="id"><a name="delta:1189" class="">delta</a></span> <span id="ofs:1190" class="id"><a name="ofs:1190" class="">ofs</a></span> <span id="k:1191" class="id"><a name="k:1191" class="">k</a></span> <span id="p:1192" class="id"><a name="p:1192" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1184">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1187">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:1188">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1189">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1184">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1185">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1186">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1185">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1187">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1190">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1191">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1192">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1186">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1188">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1190">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1189">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k:1191">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1192">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof219')">Proof.</span></div>
<div class="proofscript" id="proof219">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.perm_inject_inv" class="id"><a name="Mem.perm_inject_inv" class="">perm_inject_inv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1193" class="id"><a name="f:1193" class="">f</a></span> <span id="m1:1194" class="id"><a name="m1:1194" class="">m1</a></span> <span id="m2:1195" class="id"><a name="m2:1195" class="">m2</a></span> <span id="b1:1196" class="id"><a name="b1:1196" class="">b1</a></span> <span id="ofs:1197" class="id"><a name="ofs:1197" class="">ofs</a></span> <span id="b2:1198" class="id"><a name="b2:1198" class="">b2</a></span> <span id="delta:1199" class="id"><a name="delta:1199" class="">delta</a></span> <span id="k:1200" class="id"><a name="k:1200" class="">k</a></span> <span id="p:1201" class="id"><a name="p:1201" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1193">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1194">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1195">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1193">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1196">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:1198">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1199">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1195">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1198">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1197">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1199">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k:1200">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1201">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1194">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1196">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1197">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1200">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1201">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1194">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1196">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1197">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof220')">Proof.</span></div>
<div class="proofscript" id="proof220">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_perm_inv">mi_perm_inv;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.range_perm_inject" class="id"><a name="Mem.range_perm_inject" class="">range_perm_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1202" class="id"><a name="f:1202" class="">f</a></span> <span id="m1:1203" class="id"><a name="m1:1203" class="">m1</a></span> <span id="m2:1204" class="id"><a name="m2:1204" class="">m2</a></span> <span id="b1:1205" class="id"><a name="b1:1205" class="">b1</a></span> <span id="b2:1206" class="id"><a name="b2:1206" class="">b2</a></span> <span id="delta:1207" class="id"><a name="delta:1207" class="">delta</a></span> <span id="lo:1208" class="id"><a name="lo:1208" class="">lo</a></span> <span id="hi:1209" class="id"><a name="hi:1209" class="">hi</a></span> <span id="k:1210" class="id"><a name="k:1210" class="">k</a></span> <span id="p:1211" class="id"><a name="p:1211" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1202">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1205">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:1206">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1207">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1202">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1203">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1204">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1203">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1205">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1208">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1209">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1210">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1211">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1204">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1206">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#lo:1208">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1207">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#hi:1209">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1207">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k:1210">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1211">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof221')">Proof.</span></div>
<div class="proofscript" id="proof221">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_inj">range_perm_inj;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_access_inject" class="id"><a name="Mem.valid_access_inject" class="">valid_access_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1212" class="id"><a name="f:1212" class="">f</a></span> <span id="m1:1213" class="id"><a name="m1:1213" class="">m1</a></span> <span id="m2:1214" class="id"><a name="m2:1214" class="">m2</a></span> <span id="chunk:1215" class="id"><a name="chunk:1215" class="">chunk</a></span> <span id="b1:1216" class="id"><a name="b1:1216" class="">b1</a></span> <span id="ofs:1217" class="id"><a name="ofs:1217" class="">ofs</a></span> <span id="b2:1218" class="id"><a name="b2:1218" class="">b2</a></span> <span id="delta:1219" class="id"><a name="delta:1219" class="">delta</a></span> <span id="p:1220" class="id"><a name="p:1220" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1212">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1216">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:1218">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1219">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1212">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1213">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1214">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1213">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1215">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1216">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1217">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1220">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1214">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1215">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1218">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1217">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1219">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#p:1220">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof222')">Proof.</span></div>
<div class="proofscript" id="proof222">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inj">valid_access_inj;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_inj">mi_inj;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_pointer_inject" class="id"><a name="Mem.valid_pointer_inject" class="">valid_pointer_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1221" class="id"><a name="f:1221" class="">f</a></span> <span id="m1:1222" class="id"><a name="m1:1222" class="">m1</a></span> <span id="m2:1223" class="id"><a name="m2:1223" class="">m2</a></span> <span id="b1:1224" class="id"><a name="b1:1224" class="">b1</a></span> <span id="ofs:1225" class="id"><a name="ofs:1225" class="">ofs</a></span> <span id="b2:1226" class="id"><a name="b2:1226" class="">b2</a></span> <span id="delta:1227" class="id"><a name="delta:1227" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1221">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1224">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:1226">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1227">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1221">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1222">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1223">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1222">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1224">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1225">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1223">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1226">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1225">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1227">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof223')">Proof.</span></div>
<div class="proofscript" id="proof223">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inject">valid_access_inject;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.weak_valid_pointer_inject" class="id"><a name="Mem.weak_valid_pointer_inject" class="">weak_valid_pointer_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1228" class="id"><a name="f:1228" class="">f</a></span> <span id="m1:1229" class="id"><a name="m1:1229" class="">m1</a></span> <span id="m2:1230" class="id"><a name="m2:1230" class="">m2</a></span> <span id="b1:1231" class="id"><a name="b1:1231" class="">b1</a></span> <span id="ofs:1232" class="id"><a name="ofs:1232" class="">ofs</a></span> <span id="b2:1233" class="id"><a name="b2:1233" class="">b2</a></span> <span id="delta:1234" class="id"><a name="delta:1234" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1228">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1231">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:1233">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1234">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1228">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1229">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1230">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1229">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1231">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1232">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1230">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1233">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1232">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1234">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof224')">Proof.</span></div>
<div class="proofscript" id="proof224">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">2</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span>. <span class="id">rewrite</span> <span class="id">!orb_true_iff</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="gallina-kwd">with</span> ((<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id">+</span> <span class="id">delta</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[];</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_inject">valid_pointer_inject</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">The following lemmas establish the absence of machine integer overflow
  during address computations. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.address_inject" class="id"><a name="Mem.address_inject" class="">address_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1235" class="id"><a name="f:1235" class="">f</a></span> <span id="m1:1236" class="id"><a name="m1:1236" class="">m1</a></span> <span id="m2:1237" class="id"><a name="m2:1237" class="">m2</a></span> <span id="b1:1238" class="id"><a name="b1:1238" class="">b1</a></span> <span id="ofs1:1239" class="id"><a name="ofs1:1239" class="">ofs1</a></span> <span id="b2:1240" class="id"><a name="b2:1240" class="">b2</a></span> <span id="delta:1241" class="id"><a name="delta:1241" class="">delta</a></span> <span id="p:1242" class="id"><a name="p:1242" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1235">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1236">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1237">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1236">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1238">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1239">ofs1</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1242">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1235">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1238">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:1240">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1241">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1239">ofs1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1241">delta</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1239">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1241">delta</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof225')">Proof.</span></div>
<div class="proofscript" id="proof225">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b1</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>) <span class="gallina-kwd">by</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">mi_representable;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id">delta</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range">Ptrofs.unsigned_range</a></span> <span class="id">ofs1</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span>. <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span><span class="id">;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.address_inject'" class="id"><a name="Mem.address_inject'" class="">address_inject':</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1243" class="id"><a name="f:1243" class="">f</a></span> <span id="m1:1244" class="id"><a name="m1:1244" class="">m1</a></span> <span id="m2:1245" class="id"><a name="m2:1245" class="">m2</a></span> <span id="chunk:1246" class="id"><a name="chunk:1246" class="">chunk</a></span> <span id="b1:1247" class="id"><a name="b1:1247" class="">b1</a></span> <span id="ofs1:1248" class="id"><a name="ofs1:1248" class="">ofs1</a></span> <span id="b2:1249" class="id"><a name="b2:1249" class="">b2</a></span> <span id="delta:1250" class="id"><a name="delta:1250" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1243">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1244">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1245">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1244">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1246">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1247">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1248">ofs1</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1243">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1247">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:1249">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1250">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1248">ofs1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1250">delta</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1248">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1250">delta</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof226')">Proof.</span></div>
<div class="proofscript" id="proof226">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">address_inject;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H0</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>). <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.weak_valid_pointer_inject_no_overflow" class="id"><a name="Mem.weak_valid_pointer_inject_no_overflow" class="">weak_valid_pointer_inject_no_overflow:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1251" class="id"><a name="f:1251" class="">f</a></span> <span id="m1:1252" class="id"><a name="m1:1252" class="">m1</a></span> <span id="m2:1253" class="id"><a name="m2:1253" class="">m2</a></span> <span id="b:1254" class="id"><a name="b:1254" class="">b</a></span> <span id="ofs:1255" class="id"><a name="ofs:1255" class="">ofs</a></span> <span id="b':1256" class="id"><a name="b':1256" class="">b'</a></span> <span id="delta:1257" class="id"><a name="delta:1257" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1251">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1252">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1253">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1252">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1254">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1255">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1251">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1254">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b':1256">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1257">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1255">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1257">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof227')">Proof.</span></div>
<div class="proofscript" id="proof227">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_spec">weak_valid_pointer_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_nonempty_perm">valid_pointer_nonempty_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">mi_representable;</a></span> <span class="id">eauto</span>. <span class="id">destruct</span> <span class="id">H0;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range">Ptrofs.unsigned_range</a></span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span><span class="id">;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_pointer_inject_no_overflow" class="id"><a name="Mem.valid_pointer_inject_no_overflow" class="">valid_pointer_inject_no_overflow:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1258" class="id"><a name="f:1258" class="">f</a></span> <span id="m1:1259" class="id"><a name="m1:1259" class="">m1</a></span> <span id="m2:1260" class="id"><a name="m2:1260" class="">m2</a></span> <span id="b:1261" class="id"><a name="b:1261" class="">b</a></span> <span id="ofs:1262" class="id"><a name="ofs:1262" class="">ofs</a></span> <span id="b':1263" class="id"><a name="b':1263" class="">b'</a></span> <span id="delta:1264" class="id"><a name="delta:1264" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1258">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1259">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1260">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1259">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1261">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1262">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1258">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1261">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b':1263">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1264">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1262">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1264">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof228')">Proof.</span></div>
<div class="proofscript" id="proof228">
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject_no_overflow">weak_valid_pointer_inject_no_overflow,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_implies">valid_pointer_implies</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.valid_pointer_inject_val" class="id"><a name="Mem.valid_pointer_inject_val" class="">valid_pointer_inject_val:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1265" class="id"><a name="f:1265" class="">f</a></span> <span id="m1:1266" class="id"><a name="m1:1266" class="">m1</a></span> <span id="m2:1267" class="id"><a name="m2:1267" class="">m2</a></span> <span id="b:1268" class="id"><a name="b:1268" class="">b</a></span> <span id="ofs:1269" class="id"><a name="ofs:1269" class="">ofs</a></span> <span id="b':1270" class="id"><a name="b':1270" class="">b'</a></span> <span id="ofs':1271" class="id"><a name="ofs':1271" class="">ofs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1265">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1266">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1267">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1266">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1268">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1269">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1265">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1268">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1269">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1270">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1271">ofs'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1267">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1270">b'</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1271">ofs'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof229')">Proof.</span></div>
<div class="proofscript" id="proof229">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject'">address_inject';</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_inject">valid_pointer_inject;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.weak_valid_pointer_inject_val" class="id"><a name="Mem.weak_valid_pointer_inject_val" class="">weak_valid_pointer_inject_val:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1272" class="id"><a name="f:1272" class="">f</a></span> <span id="m1:1273" class="id"><a name="m1:1273" class="">m1</a></span> <span id="m2:1274" class="id"><a name="m2:1274" class="">m2</a></span> <span id="b:1275" class="id"><a name="b:1275" class="">b</a></span> <span id="ofs:1276" class="id"><a name="ofs:1276" class="">ofs</a></span> <span id="b':1277" class="id"><a name="b':1277" class="">b'</a></span> <span id="ofs':1278" class="id"><a name="ofs':1278" class="">ofs',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1272">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1273">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1274">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1273">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1275">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1276">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1272">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1275">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1276">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1277">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1278">ofs'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1274">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1277">b'</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1278">ofs'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof230')">Proof.</span></div>
<div class="proofscript" id="proof230">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject">weak_valid_pointer_inject;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">W</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_spec">weak_valid_pointer_spec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_nonempty_perm">valid_pointer_nonempty_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">mi_representable;</a></span> <span class="id">eauto</span>. <span class="id">destruct</span> <span class="id">H0;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range">Ptrofs.unsigned_range</a></span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span>. <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span><span class="id">;</span> <span class="id">auto;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.inject_no_overlap" class="id"><a name="Mem.inject_no_overlap" class="">inject_no_overlap:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1279" class="id"><a name="f:1279" class="">f</a></span> <span id="m1:1280" class="id"><a name="m1:1280" class="">m1</a></span> <span id="m2:1281" class="id"><a name="m2:1281" class="">m2</a></span> <span id="b1:1282" class="id"><a name="b1:1282" class="">b1</a></span> <span id="b2:1283" class="id"><a name="b2:1283" class="">b2</a></span> <span id="b1':1284" class="id"><a name="b1':1284" class="">b1'</a></span> <span id="b2':1285" class="id"><a name="b2':1285" class="">b2'</a></span> <span id="delta1:1286" class="id"><a name="delta1:1286" class="">delta1</a></span> <span id="delta2:1287" class="id"><a name="delta2:1287" class="">delta2</a></span> <span id="ofs1:1288" class="id"><a name="ofs1:1288" class="">ofs1</a></span> <span id="ofs2:1289" class="id"><a name="ofs2:1289" class="">ofs2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1279">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1280">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1281">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1:1282">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1283">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1279">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1282">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b1':1284">b1',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta1:1286">delta1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1279">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1283">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2':1285">b2',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta2:1287">delta2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1280">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1282">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1288">ofs1</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1280">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1283">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1289">ofs2</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1':1284">b1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b2':1285">b2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1288">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta1:1286">delta1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1289">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta2:1287">delta2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof231')">Proof.</span></div>
<div class="proofscript" id="proof231">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">eapply</span> <span class="id">mi_no_overlap0;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.different_pointers_inject" class="id"><a name="Mem.different_pointers_inject" class="">different_pointers_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1290" class="id"><a name="f:1290" class="">f</a></span> <span id="m:1291" class="id"><a name="m:1291" class="">m</a></span> <span id="m':1292" class="id"><a name="m':1292" class="">m'</a></span> <span id="b1:1293" class="id"><a name="b1:1293" class="">b1</a></span> <span id="ofs1:1294" class="id"><a name="ofs1:1294" class="">ofs1</a></span> <span id="b2:1295" class="id"><a name="b2:1295" class="">b2</a></span> <span id="ofs2:1296" class="id"><a name="ofs2:1296" class="">ofs2</a></span> <span id="b1':1297" class="id"><a name="b1':1297" class="">b1'</a></span> <span id="delta1:1298" class="id"><a name="delta1:1298" class="">delta1</a></span> <span id="b2':1299" class="id"><a name="b2':1299" class="">b2'</a></span> <span id="delta2:1300" class="id"><a name="delta2:1300" class="">delta2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1290">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1291">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1292">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1:1293">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1295">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1291">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1293">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1294">ofs1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1291">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1295">b2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1296">ofs2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1290">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1293">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b1':1297">b1',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta1:1298">delta1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1290">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1295">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2':1299">b2',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta2:1300">delta2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1':1297">b1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b2':1299">b2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1294">ofs1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta1:1298">delta1</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1296">ofs2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta2:1300">delta2</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof232')">Proof.</span></div>
<div class="proofscript" id="proof232">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span> <span class="gallina-kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.address_inject'">address_inject'</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H1</span> <span class="id">H3</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.address_inject'">address_inject'</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H2</span> <span class="id">H4</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H5</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_no_overlap">mi_no_overlap;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="id">apply</span> (<span class="id">H5</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="id">apply</span> (<span class="id">H1</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs2</span>)). <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.disjoint_or_equal_inject" class="id"><a name="Mem.disjoint_or_equal_inject" class="">disjoint_or_equal_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1301" class="id"><a name="f:1301" class="">f</a></span> <span id="m:1302" class="id"><a name="m:1302" class="">m</a></span> <span id="m':1303" class="id"><a name="m':1303" class="">m'</a></span> <span id="b1:1304" class="id"><a name="b1:1304" class="">b1</a></span> <span id="b1':1305" class="id"><a name="b1':1305" class="">b1'</a></span> <span id="delta1:1306" class="id"><a name="delta1:1306" class="">delta1</a></span> <span id="b2:1307" class="id"><a name="b2:1307" class="">b2</a></span> <span id="b2':1308" class="id"><a name="b2':1308" class="">b2'</a></span> <span id="delta2:1309" class="id"><a name="delta2:1309" class="">delta2</a></span> <span id="ofs1:1310" class="id"><a name="ofs1:1310" class="">ofs1</a></span> <span id="ofs2:1311" class="id"><a name="ofs2:1311" class="">ofs2</a></span> <span id="sz:1312" class="id"><a name="sz:1312" class="">sz,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1301">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1302">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1303">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1301">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1304">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b1':1305">b1',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta1:1306">delta1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1301">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1307">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2':1308">b2',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta2:1309">delta2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1302">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1304">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1310">ofs1</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs1:1310">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#sz:1312">sz</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1302">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1307">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1311">ofs2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs2:1311">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#sz:1312">sz</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#sz:1312">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1:1304">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1307">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1310">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1311">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1310">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#sz:1312">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1311">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1311">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#sz:1312">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1310">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1':1305">b1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b2':1308">b2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1310">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta1:1306">delta1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1311">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta2:1309">delta2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1310">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta1:1306">delta1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#sz:1312">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1311">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta2:1309">delta2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">\/</span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1311">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta2:1309">delta2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#sz:1312">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1310">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta1:1306">delta1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof233')">Proof.</span></div>
<div class="proofscript" id="proof233">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">b2</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">b1'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">b2'</span>) <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">assert</span> (<span class="id">delta1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">delta2</span>) <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H5</span>. <span class="id">congruence</span>. <span class="id">right</span>. <span class="id">destruct</span> <span class="id">H5</span>. <span class="id">left;</span> <span class="id">congruence</span>. <span class="id">right</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1'</span> <span class="id">b2'</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">subst</span>. <span class="id">right</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">i1</span> <span class="id">:=</span> (<span class="id">ofs1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta1,</span> <span class="id">ofs1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">i2</span> <span class="id">:=</span> (<span class="id">ofs2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta2,</span> <span class="id">ofs2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">i1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">i2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">i2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">i1</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Intv.html#range_disjoint'">Intv.range_disjoint</a></span><span class="id">';</span> <span class="id">simpl;</span> <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Intv.html#disjoint">Intv.disjoint</a></span><span class="id">,</span> <span class="id"><a href="compcert.lib.Intv.html#In">Intv.In</a></span><span class="id">;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_no_overlap">mi_no_overlap;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta1</span>). <span class="id">apply</span> <span class="id">H2</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta2</span>). <span class="id">apply</span> <span class="id">H3</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">zarith</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.aligned_area_inject" class="id"><a name="Mem.aligned_area_inject" class="">aligned_area_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1313" class="id"><a name="f:1313" class="">f</a></span> <span id="m:1314" class="id"><a name="m:1314" class="">m</a></span> <span id="m':1315" class="id"><a name="m':1315" class="">m'</a></span> <span id="b:1316" class="id"><a name="b:1316" class="">b</a></span> <span id="ofs:1317" class="id"><a name="ofs:1317" class="">ofs</a></span> <span id="al:1318" class="id"><a name="al:1318" class="">al</a></span> <span id="sz:1319" class="id"><a name="sz:1319" class="">sz</a></span> <span id="b':1320" class="id"><a name="b':1320" class="">b'</a></span> <span id="delta:1321" class="id"><a name="delta:1321" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1313">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1314">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1315">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#al:1318">al</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#al:1318">al</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#al:1318">al</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">4</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memory.html#al:1318">al</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">8</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#sz:1319">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#al:1318">al</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memory.html#sz:1319">sz</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1314">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1316">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1317">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1317">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#sz:1319">sz</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#al:1318">al</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1317">ofs</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1313">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1316">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b':1320">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1321">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#al:1318">al</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1317">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1321">delta</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof234')">Proof.</span></div>
<div class="proofscript" id="proof234">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">P:</span> <span class="id">al</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">0</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Q:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">al</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">sz</span>). <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znumtheory.html#Zdivide_bounds">Zdivide_bounds;</a></span> <span class="id">auto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">Q;</span> <span class="id">try</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">Q;</span> <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">R:</span> <span class="gallina-kwd">exists</span> <span id="chunk:1323" class="id"><span id="chunk:1322" class="id"><a name="chunk:1323" class="">chunk,</a></span></span> <span class="id">al</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1322">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id">al</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1322">chunk</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0</span>. <span class="id">subst;</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0</span>. <span class="id">subst;</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0</span>. <span class="id">subst;</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst;</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">R</span> <span class="gallina-kwd">as</span> <span class="id">[chunk</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">apply</span> <span class="id">H3</span>. <span class="id">lia</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inject">valid_access_inject;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[C</span> <span class="id">D]</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of loads </div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.load_inject" class="id"><a name="Mem.load_inject" class="">load_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1324" class="id"><a name="f:1324" class="">f</a></span> <span id="m1:1325" class="id"><a name="m1:1325" class="">m1</a></span> <span id="m2:1326" class="id"><a name="m2:1326" class="">m2</a></span> <span id="chunk:1327" class="id"><a name="chunk:1327" class="">chunk</a></span> <span id="b1:1328" class="id"><a name="b1:1328" class="">b1</a></span> <span id="ofs:1329" class="id"><a name="ofs:1329" class="">ofs</a></span> <span id="b2:1330" class="id"><a name="b2:1330" class="">b2</a></span> <span id="delta:1331" class="id"><a name="delta:1331" class="">delta</a></span> <span id="v1:1332" class="id"><a name="v1:1332" class="">v1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1324">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1325">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1326">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1327">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1325">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1328">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1329">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1332">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1324">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1328">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:1330">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1331">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v2:1333" class="id"><a name="v2:1333" class="">v2,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1327">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1326">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1330">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1329">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1331">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1333">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1324">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1332">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1333">v2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof235')">Proof.</span></div>
<div class="proofscript" id="proof235">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inj">load_inj;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadv_inject" class="id"><a name="Mem.loadv_inject" class="">loadv_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1334" class="id"><a name="f:1334" class="">f</a></span> <span id="m1:1335" class="id"><a name="m1:1335" class="">m1</a></span> <span id="m2:1336" class="id"><a name="m2:1336" class="">m2</a></span> <span id="chunk:1337" class="id"><a name="chunk:1337" class="">chunk</a></span> <span id="a1:1338" class="id"><a name="a1:1338" class="">a1</a></span> <span id="a2:1339" class="id"><a name="a2:1339" class="">a2</a></span> <span id="v1:1340" class="id"><a name="v1:1340" class="">v1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1334">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1335">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1336">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1337">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1335">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#a1:1338">a1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1340">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1334">f</a></span> <span class="id"><a href="compcert.common.Memory.html#a1:1338">a1</a></span> <span class="id"><a href="compcert.common.Memory.html#a2:1339">a2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v2:1341" class="id"><a name="v2:1341" class="">v2,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1337">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1336">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#a2:1339">a2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1341">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1334">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1340">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1341">v2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof236')">Proof.</span></div>
<div class="proofscript" id="proof236">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inject">load_inject;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[v2</span> <span class="id">[LOAD</span> <span class="id">INJ]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">v2;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs1</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>).<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">symmetry</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject'">address_inject';</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.loadbytes_inject" class="id"><a name="Mem.loadbytes_inject" class="">loadbytes_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1342" class="id"><a name="f:1342" class="">f</a></span> <span id="m1:1343" class="id"><a name="m1:1343" class="">m1</a></span> <span id="m2:1344" class="id"><a name="m2:1344" class="">m2</a></span> <span id="b1:1345" class="id"><a name="b1:1345" class="">b1</a></span> <span id="ofs:1346" class="id"><a name="ofs:1346" class="">ofs</a></span> <span id="len:1347" class="id"><a name="len:1347" class="">len</a></span> <span id="b2:1348" class="id"><a name="b2:1348" class="">b2</a></span> <span id="delta:1349" class="id"><a name="delta:1349" class="">delta</a></span> <span id="bytes1:1350" class="id"><a name="bytes1:1350" class="">bytes1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1342">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1343">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1344">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1343">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1345">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1346">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len:1347">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:1350">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1342">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1345">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:1348">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1349">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="bytes2:1351" class="id"><a name="bytes2:1351" class="">bytes2,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1344">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1348">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1346">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1349">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#len:1347">len</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:1351">bytes2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1342">f</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes1:1350">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:1351">bytes2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof237')">Proof.</span></div>
<div class="proofscript" id="proof237">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_inj">loadbytes_inj;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of stores </div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_mapped_inject" class="id"><a name="Mem.store_mapped_inject" class="">store_mapped_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1352" class="id"><a name="f:1352" class="">f</a></span> <span id="chunk:1353" class="id"><a name="chunk:1353" class="">chunk</a></span> <span id="m1:1354" class="id"><a name="m1:1354" class="">m1</a></span> <span id="b1:1355" class="id"><a name="b1:1355" class="">b1</a></span> <span id="ofs:1356" class="id"><a name="ofs:1356" class="">ofs</a></span> <span id="v1:1357" class="id"><a name="v1:1357" class="">v1</a></span> <span id="n1:1358" class="id"><a name="n1:1358" class="">n1</a></span> <span id="m2:1359" class="id"><a name="m2:1359" class="">m2</a></span> <span id="b2:1360" class="id"><a name="b2:1360" class="">b2</a></span> <span id="delta:1361" class="id"><a name="delta:1361" class="">delta</a></span> <span id="v2:1362" class="id"><a name="v2:1362" class="">v2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1352">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1354">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1359">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1353">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1354">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1355">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1356">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1357">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:1358">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1352">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1355">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:1360">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1361">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1352">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1357">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1362">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="n2:1363" class="id"><a name="n2:1363" class="">n2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1353">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1359">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1360">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1356">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1361">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#v2:1362">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:1363">n2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1352">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:1358">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:1363">n2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof238')">Proof.</span></div>
<div class="proofscript" id="proof238">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mapped_inj">store_mapped_inj;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[n2</span> <span class="id">[STORE</span> <span class="id">MI]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">n2;</span> <span class="id">split</span>. <span class="id">eauto</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">mi_representable;</a></span> <span class="id">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_1">perm_store_1,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_unmapped_inject" class="id"><a name="Mem.store_unmapped_inject" class="">store_unmapped_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1364" class="id"><a name="f:1364" class="">f</a></span> <span id="chunk:1365" class="id"><a name="chunk:1365" class="">chunk</a></span> <span id="m1:1366" class="id"><a name="m1:1366" class="">m1</a></span> <span id="b1:1367" class="id"><a name="b1:1367" class="">b1</a></span> <span id="ofs:1368" class="id"><a name="ofs:1368" class="">ofs</a></span> <span id="v1:1369" class="id"><a name="v1:1369" class="">v1</a></span> <span id="n1:1370" class="id"><a name="n1:1370" class="">n1</a></span> <span id="m2:1371" class="id"><a name="m2:1371" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1364">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1366">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1371">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1365">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1366">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1367">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1368">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1369">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:1370">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1364">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1367">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1364">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:1370">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1371">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof239')">Proof.</span></div>
<div class="proofscript" id="proof239">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unmapped_inj">store_unmapped_inj;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">mi_representable;</a></span> <span class="id">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H3;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_1">perm_store_1,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_outside_inject" class="id"><a name="Mem.store_outside_inject" class="">store_outside_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1372" class="id"><a name="f:1372" class="">f</a></span> <span id="m1:1373" class="id"><a name="m1:1373" class="">m1</a></span> <span id="m2:1374" class="id"><a name="m2:1374" class="">m2</a></span> <span id="chunk:1375" class="id"><a name="chunk:1375" class="">chunk</a></span> <span id="b:1376" class="id"><a name="b:1376" class="">b</a></span> <span id="ofs:1377" class="id"><a name="ofs:1377" class="">ofs</a></span> <span id="v:1378" class="id"><a name="v:1378" class="">v</a></span> <span id="m2':1379" class="id"><a name="m2':1379" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1372">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1373">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1374">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b':1380" class="id"><a name="b':1380" class="">b'</a></span> <span id="delta:1381" class="id"><a name="delta:1381" class="">delta</a></span> <span id="ofs':1382" class="id"><a name="ofs':1382" class="">ofs',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1372">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1380">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b:1376">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1381">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1373">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1380">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1382">ofs'</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs:1377">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1382">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1381">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1377">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1375">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1375">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1374">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1376">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1377">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:1378">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1379">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1372">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1373">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1379">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof240')">Proof.</span></div>
<div class="proofscript" id="proof240">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_outside_inj">store_outside_inj;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storev_mapped_inject" class="id"><a name="Mem.storev_mapped_inject" class="">storev_mapped_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1383" class="id"><a name="f:1383" class="">f</a></span> <span id="chunk:1384" class="id"><a name="chunk:1384" class="">chunk</a></span> <span id="m1:1385" class="id"><a name="m1:1385" class="">m1</a></span> <span id="a1:1386" class="id"><a name="a1:1386" class="">a1</a></span> <span id="v1:1387" class="id"><a name="v1:1387" class="">v1</a></span> <span id="n1:1388" class="id"><a name="n1:1388" class="">n1</a></span> <span id="m2:1389" class="id"><a name="m2:1389" class="">m2</a></span> <span id="a2:1390" class="id"><a name="a2:1390" class="">a2</a></span> <span id="v2:1391" class="id"><a name="v2:1391" class="">v2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1383">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1385">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1389">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1384">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1385">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#a1:1386">a1</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1387">v1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:1388">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1383">f</a></span> <span class="id"><a href="compcert.common.Memory.html#a1:1386">a1</a></span> <span class="id"><a href="compcert.common.Memory.html#a2:1390">a2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1383">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1387">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1391">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="n2:1392" class="id"><a name="n2:1392" class="">n2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1384">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1389">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#a2:1390">a2</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1391">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:1392">n2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1383">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:1388">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:1392">n2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof241')">Proof.</span></div>
<div class="proofscript" id="proof241">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H1;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs1</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mapped_inject">store_mapped_inject;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject'">address_inject';</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_mapped_inject" class="id"><a name="Mem.storebytes_mapped_inject" class="">storebytes_mapped_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1393" class="id"><a name="f:1393" class="">f</a></span> <span id="m1:1394" class="id"><a name="m1:1394" class="">m1</a></span> <span id="b1:1395" class="id"><a name="b1:1395" class="">b1</a></span> <span id="ofs:1396" class="id"><a name="ofs:1396" class="">ofs</a></span> <span id="bytes1:1397" class="id"><a name="bytes1:1397" class="">bytes1</a></span> <span id="n1:1398" class="id"><a name="n1:1398" class="">n1</a></span> <span id="m2:1399" class="id"><a name="m2:1399" class="">m2</a></span> <span id="b2:1400" class="id"><a name="b2:1400" class="">b2</a></span> <span id="delta:1401" class="id"><a name="delta:1401" class="">delta</a></span> <span id="bytes2:1402" class="id"><a name="bytes2:1402" class="">bytes2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1393">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1394">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1399">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1394">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1395">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1396">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:1397">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:1398">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1393">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1395">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:1400">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1401">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1393">f</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes1:1397">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:1402">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="n2:1403" class="id"><a name="n2:1403" class="">n2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1399">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1400">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1396">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1401">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes2:1402">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:1403">n2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1393">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:1398">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#n2:1403">n2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof242')">Proof.</span></div>
<div class="proofscript" id="proof242">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mapped_inj">storebytes_mapped_inj;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[n2</span> <span class="id">[STORE</span> <span class="id">MI]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">n2;</span> <span class="id">split</span>. <span class="id">eauto</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">mi_freeblocks0</span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">H3;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_no_overlap0;</span> <span class="id">eauto;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_representable0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_unmapped_inject" class="id"><a name="Mem.storebytes_unmapped_inject" class="">storebytes_unmapped_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1404" class="id"><a name="f:1404" class="">f</a></span> <span id="m1:1405" class="id"><a name="m1:1405" class="">m1</a></span> <span id="b1:1406" class="id"><a name="b1:1406" class="">b1</a></span> <span id="ofs:1407" class="id"><a name="ofs:1407" class="">ofs</a></span> <span id="bytes1:1408" class="id"><a name="bytes1:1408" class="">bytes1</a></span> <span id="n1:1409" class="id"><a name="n1:1409" class="">n1</a></span> <span id="m2:1410" class="id"><a name="m2:1410" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1404">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1405">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1410">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1405">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1406">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1407">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1:1408">bytes1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:1409">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1404">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1406">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1404">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1:1409">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1410">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof243')">Proof.</span></div>
<div class="proofscript" id="proof243">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unmapped_inj">storebytes_unmapped_inj;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">mi_freeblocks0</span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">H2;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_no_overlap0;</span> <span class="id">eauto;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_representable0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H3;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_outside_inject" class="id"><a name="Mem.storebytes_outside_inject" class="">storebytes_outside_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1411" class="id"><a name="f:1411" class="">f</a></span> <span id="m1:1412" class="id"><a name="m1:1412" class="">m1</a></span> <span id="m2:1413" class="id"><a name="m2:1413" class="">m2</a></span> <span id="b:1414" class="id"><a name="b:1414" class="">b</a></span> <span id="ofs:1415" class="id"><a name="ofs:1415" class="">ofs</a></span> <span id="bytes2:1416" class="id"><a name="bytes2:1416" class="">bytes2</a></span> <span id="m2':1417" class="id"><a name="m2':1417" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1411">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1412">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1413">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b':1418" class="id"><a name="b':1418" class="">b'</a></span> <span id="delta:1419" class="id"><a name="delta:1419" class="">delta</a></span> <span id="ofs':1420" class="id"><a name="ofs':1420" class="">ofs',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1411">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1418">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b:1414">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1419">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1412">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1418">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1420">ofs'</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs:1415">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs':1420">ofs'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1419">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1415">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:1416">bytes2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1413">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1414">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1415">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2:1416">bytes2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1417">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1411">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1412">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1417">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof244')">Proof.</span></div>
<div class="proofscript" id="proof244">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_outside_inj">storebytes_outside_inj;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.storebytes_empty_inject" class="id"><a name="Mem.storebytes_empty_inject" class="">storebytes_empty_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1421" class="id"><a name="f:1421" class="">f</a></span> <span id="m1:1422" class="id"><a name="m1:1422" class="">m1</a></span> <span id="b1:1423" class="id"><a name="b1:1423" class="">b1</a></span> <span id="ofs1:1424" class="id"><a name="ofs1:1424" class="">ofs1</a></span> <span id="m1':1425" class="id"><a name="m1':1425" class="">m1'</a></span> <span id="m2:1426" class="id"><a name="m2:1426" class="">m2</a></span> <span id="b2:1427" class="id"><a name="b2:1427" class="">b2</a></span> <span id="ofs2:1428" class="id"><a name="ofs2:1428" class="">ofs2</a></span> <span id="m2':1429" class="id"><a name="m2':1429" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1421">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1422">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1426">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1422">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1423">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1:1424">ofs1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1425">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1426">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1427">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2:1428">ofs2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1429">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1421">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1425">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1429">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof245')">Proof.</span></div>
<div class="proofscript" id="proof245">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_empty_inj">storebytes_empty_inj;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">mi_freeblocks0</span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">H2;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_no_overlap0;</span> <span class="id">eauto;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_representable0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H3;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.alloc_right_inject" class="id"><a name="Mem.alloc_right_inject" class="">alloc_right_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1430" class="id"><a name="f:1430" class="">f</a></span> <span id="m1:1431" class="id"><a name="m1:1431" class="">m1</a></span> <span id="m2:1432" class="id"><a name="m2:1432" class="">m2</a></span> <span id="lo:1433" class="id"><a name="lo:1433" class="">lo</a></span> <span id="hi:1434" class="id"><a name="hi:1434" class="">hi</a></span> <span id="b2:1435" class="id"><a name="b2:1435" class="">b2</a></span> <span id="m2':1436" class="id"><a name="m2':1436" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1430">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1431">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1432">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1432">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1433">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1434">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m2':1436">m2',</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1435">b2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1430">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1431">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1436">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof246')">Proof.</span></div>
<div class="proofscript" id="proof246">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">injection</span> <span class="id">H0</span>. <span class="id">intros</span> <span class="id">NEXT</span> <span class="id">MEM</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_right_inj">alloc_right_inj;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span> <span class="gallina-kwd">in</span> <span class="id">H2;</span> <span class="id">eauto</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b2</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b0</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">fresh_block_alloc;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.alloc_left_unmapped_inject" class="id"><a name="Mem.alloc_left_unmapped_inject" class="">alloc_left_unmapped_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1437" class="id"><a name="f:1437" class="">f</a></span> <span id="m1:1438" class="id"><a name="m1:1438" class="">m1</a></span> <span id="m2:1439" class="id"><a name="m2:1439" class="">m2</a></span> <span id="lo:1440" class="id"><a name="lo:1440" class="">lo</a></span> <span id="hi:1441" class="id"><a name="hi:1441" class="">hi</a></span> <span id="m1':1442" class="id"><a name="m1':1442" class="">m1'</a></span> <span id="b1:1443" class="id"><a name="b1:1443" class="">b1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1437">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1438">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1439">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1438">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1440">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1441">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m1':1442">m1',</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1443">b1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="f':1444" class="id"><a name="f':1444" class="">f',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1444">f'</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1442">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1439">m2</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1437">f</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1444">f'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#f':1444">f'</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1443">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:1445" class="id"><a name="b:1445" class="">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1445">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1443">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1444">f'</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1445">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1437">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1445">b</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof247')">Proof.</span></div>
<div class="proofscript" id="proof247">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f'</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="b:1447" class="id"><span id="b:1446" class="id"><a name="b:1447" class="">b</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1446">b</a></span> <span class="id">b1</span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="gallina-kwd">else</span> <span class="id">f</span> <span class="id"><a href="compcert.common.Memory.html#b:1446">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id">f</span> <span class="id">f'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="id">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">f</span> <span class="id">b1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>). <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id">f'</span> <span class="id">m1</span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">mi_inj0;</span> <span class="id">constructor;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="id">congruence</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="id">congruence</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject_incr">memval_inject_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">f;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">f';</span> <span class="id">split</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_unmapped_inj">alloc_left_unmapped_inj;</a></span> <span class="id">eauto</span>. <span class="id">unfold</span> <span class="id">f';</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id">f'</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">mi_freeblocks0</span>. <span class="id">red;</span> <span class="id">intro;</span> <span class="id">elim</span> <span class="id">H3</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="id">congruence</span>. <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>)<span class="id">;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">b1</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_no_overlap0</span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="id">eauto</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H6</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H7</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false;</a></span> <span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_representable0;</span> <span class="id">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id">f'</span> <span class="gallina-kwd">in</span> <span class="id">H3;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
<span class="comment">(*&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;image&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">unfold</span> <span class="id">f';</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="comment">(*&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id">f';</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.alloc_left_mapped_inject" class="id"><a name="Mem.alloc_left_mapped_inject" class="">alloc_left_mapped_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1448" class="id"><a name="f:1448" class="">f</a></span> <span id="m1:1449" class="id"><a name="m1:1449" class="">m1</a></span> <span id="m2:1450" class="id"><a name="m2:1450" class="">m2</a></span> <span id="lo:1451" class="id"><a name="lo:1451" class="">lo</a></span> <span id="hi:1452" class="id"><a name="hi:1452" class="">hi</a></span> <span id="m1':1453" class="id"><a name="m1':1453" class="">m1'</a></span> <span id="b1:1454" class="id"><a name="b1:1454" class="">b1</a></span> <span id="b2:1455" class="id"><a name="b2:1455" class="">b2</a></span> <span id="delta:1456" class="id"><a name="delta:1456" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1448">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1449">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1450">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1449">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1451">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1452">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m1':1453">m1',</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1454">b1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1450">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1455">b2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1456">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="ofs:1457" class="id"><a name="ofs:1457" class="">ofs</a></span> <span id="k:1458" class="id"><a name="k:1458" class="">k</a></span> <span id="p:1459" class="id"><a name="p:1459" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1450">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1455">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1457">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1458">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1459">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1456">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1457">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="ofs:1460" class="id"><a name="ofs:1460" class="">ofs</a></span> <span id="k:1461" class="id"><a name="k:1461" class="">k</a></span> <span id="p:1462" class="id"><a name="p:1462" class="">p,</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1451">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1460">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1452">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1450">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1455">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs:1460">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1456">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k:1461">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1462">p</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inj_offset_aligned">inj_offset_aligned</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1456">delta</a></span> (<span class="id"><a href="compcert.common.Memory.html#hi:1452">hi-lo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b:1463" class="id"><a name="b:1463" class="">b</a></span> <span id="delta':1464" class="id"><a name="delta':1464" class="">delta'</a></span> <span id="ofs:1465" class="id"><a name="ofs:1465" class="">ofs</a></span> <span id="k:1466" class="id"><a name="k:1466" class="">k</a></span> <span id="p:1467" class="id"><a name="p:1467" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1448">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1463">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2:1455">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta':1464">delta'</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1449">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1463">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1465">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1466">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1467">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#lo:1451">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1456">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1465">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta':1464">delta'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1452">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1456">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="f':1468" class="id"><a name="f':1468" class="">f',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1468">f'</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1453">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1450">m2</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1448">f</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1468">f'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#f':1468">f'</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1454">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:1455">b2,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1456">delta</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:1469" class="id"><a name="b:1469" class="">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1469">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1454">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1468">f'</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1469">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1448">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1469">b</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof248')">Proof.</span></div>
<div class="proofscript" id="proof248">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f'</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="b:1471" class="id"><span id="b:1470" class="id"><a name="b:1471" class="">b</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1470">b</a></span> <span class="id">b1</span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b2,</span> <span class="id">delta</span>) <span class="gallina-kwd">else</span> <span class="id">f</span> <span class="id"><a href="compcert.common.Memory.html#b:1470">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id">f</span> <span class="id">f'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="id">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">f</span> <span class="id">b1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>). <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id">f'</span> <span class="id">m1</span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">mi_inj0;</span> <span class="id">constructor;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H8</span>. <span class="id">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">fresh_block_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H8</span>. <span class="id">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">fresh_block_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_valid_block">perm_valid_block</a></span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs</span>). <span class="id">apply</span> <span class="id">H9</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H8</span>. <span class="id">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">fresh_block_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject_incr">memval_inject_incr</a></span> <span class="gallina-kwd">with</span> <span class="id">f;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">f'</span>. <span class="id">split</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_mapped_inj">alloc_left_mapped_inj;</a></span> <span class="id">eauto</span>. <span class="id">unfold</span> <span class="id">f';</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="id">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> <span class="id">H9</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="id">congruence</span>. <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H12</span>. <span class="id">intros</span> <span class="id">P1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H13</span>. <span class="id">intros</span> <span class="id">P2</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>)<span class="id">;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b3</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H10;</span> <span class="id">subst</span> <span class="id">b0</span> <span class="id">b1'</span> <span class="id">delta1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">b2'</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">subst</span> <span class="id">b2'</span>. <span class="id">right;</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H6;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H11;</span> <span class="id">subst</span> <span class="id">b3</span> <span class="id">b2'</span> <span class="id">delta2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1'</span> <span class="id">b2</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">subst</span> <span class="id">b1'</span>. <span class="id">right;</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H6;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">f';</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id">subst</span>. <span class="id">injection</span> <span class="id">H9;</span> <span class="id">intros;</span> <span class="id">subst</span> <span class="id">b'</span> <span class="id">delta0</span>. <span class="id">destruct</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv;</a></span> <span class="id">eauto;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true;</a></span> <span class="id">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H3</span>. <span class="id">apply</span> <span class="id">H4</span> <span class="gallina-kwd">with</span> (<span class="id">k</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span> <span class="id">ofs</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv;</a></span> <span class="id">eauto;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true;</a></span> <span class="id">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H3</span>. <span class="id">apply</span> <span class="id">H4</span> <span class="gallina-kwd">with</span> (<span class="id">k</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span> <span class="id">ofs</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_representable0;</span> <span class="id">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H10;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id">f'</span> <span class="gallina-kwd">in</span> <span class="id">H9;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H9;</span> <span class="id">clear</span> <span class="id">H9;</span> <span class="id">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EITHER:</span> <span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id">hi</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span>(<span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id">hi</span>)) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">EITHER</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable;</a></span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">intros</span> <span class="id">A</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span> <span class="gallina-kwd">in</span> <span class="id">A;</span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span> <span class="gallina-kwd">in</span> <span class="id">A</span>. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span>. <span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
<span class="comment">(*&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;image&nbsp;of&nbsp;b1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">unfold</span> <span class="id">f';</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="comment">(*&nbsp;image&nbsp;of&nbsp;others&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id">f';</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.alloc_parallel_inject" class="id"><a name="Mem.alloc_parallel_inject" class="">alloc_parallel_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1472" class="id"><a name="f:1472" class="">f</a></span> <span id="m1:1473" class="id"><a name="m1:1473" class="">m1</a></span> <span id="m2:1474" class="id"><a name="m2:1474" class="">m2</a></span> <span id="lo1:1475" class="id"><a name="lo1:1475" class="">lo1</a></span> <span id="hi1:1476" class="id"><a name="hi1:1476" class="">hi1</a></span> <span id="m1':1477" class="id"><a name="m1':1477" class="">m1'</a></span> <span id="b1:1478" class="id"><a name="b1:1478" class="">b1</a></span> <span id="lo2:1479" class="id"><a name="lo2:1479" class="">lo2</a></span> <span id="hi2:1480" class="id"><a name="hi2:1480" class="">hi2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1472">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1473">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1474">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1473">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo1:1475">lo1</a></span> <span class="id"><a href="compcert.common.Memory.html#hi1:1476">hi1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m1':1477">m1',</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1478">b1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#lo2:1479">lo2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#lo1:1475">lo1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi1:1476">hi1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#hi2:1480">hi2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="f':1481" class="id"><a name="f':1481" class="">f',</a></span> <span class="gallina-kwd">exists</span> <span id="m2':1482" class="id"><a name="m2':1482" class="">m2',</a></span> <span class="gallina-kwd">exists</span> <span id="b2:1483" class="id"><a name="b2:1483" class="">b2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1474">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#lo2:1479">lo2</a></span> <span class="id"><a href="compcert.common.Memory.html#hi2:1480">hi2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m2':1482">m2',</a></span> <span class="id"><a href="compcert.common.Memory.html#b2:1483">b2</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1481">f'</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1477">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1482">m2'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1472">f</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1481">f'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#f':1481">f'</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1478">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2:1483">b2,</a></span> <span class="id">0</span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> (<span class="gallina-kwd">forall</span> <span id="b:1484" class="id"><a name="b:1484" class="">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1484">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1478">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1481">f'</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1484">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1472">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1484">b</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof249')">Proof.</span></div>
<div class="proofscript" id="proof249">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id">m2</span> <span class="id">lo2</span> <span class="id">hi2</span>). <span class="id">intros</span> <span class="id">m2'</span> <span class="id">b2</span> <span class="id">ALLOC</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_mapped_inject">alloc_left_mapped_inject</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_right_inject">alloc_right_inject;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">b2</span>). <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">0</span>). <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>. <span class="id">generalize</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.modulus_pos">Ptrofs.modulus_pos</a></span><span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable;</a></span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2;</a></span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">valid_not_valid_diff</a></span> <span class="id">m2</span> <span class="id">b2</span> <span class="id">b2</span>)<span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[f'</span> <span class="id">[A</span> <span class="id">[B</span> <span class="id">[C</span> <span class="id">D]]]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">f';</span> <span class="gallina-kwd">exists</span> <span class="id">m2';</span> <span class="gallina-kwd">exists</span> <span class="id">b2;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of <span class="bracket"><span class="id">free</span></span> operations </div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.free_left_inject" class="id"><a name="Mem.free_left_inject" class="">free_left_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1485" class="id"><a name="f:1485" class="">f</a></span> <span id="m1:1486" class="id"><a name="m1:1486" class="">m1</a></span> <span id="m2:1487" class="id"><a name="m2:1487" class="">m2</a></span> <span id="b:1488" class="id"><a name="b:1488" class="">b</a></span> <span id="lo:1489" class="id"><a name="lo:1489" class="">lo</a></span> <span id="hi:1490" class="id"><a name="hi:1490" class="">hi</a></span> <span id="m1':1491" class="id"><a name="m1':1491" class="">m1',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1485">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1486">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1487">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1486">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1488">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1489">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1490">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1491">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1485">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1491">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1487">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof250')">Proof.</span></div>
<div class="proofscript" id="proof250">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inj">free_left_inj;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_representable0;</span> <span class="id">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H2;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span>. <span class="id">intuition</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_inv">perm_free_inv</a></span> <span class="gallina-kwd">in</span> <span class="id">H4;</span> <span class="id">eauto</span>. <span class="id">destruct</span> <span class="id">H4</span> <span class="gallina-kwd">as</span> <span class="id">[[A</span> <span class="id">B]</span> <span class="id">|</span> <span class="id">A];</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b1</span>. <span class="id">right;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.free_list_left_inject" class="id"><a name="Mem.free_list_left_inject" class="">free_list_left_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1492" class="id"><a name="f:1492" class="">f</a></span> <span id="m2:1493" class="id"><a name="m2:1493" class="">m2</a></span> <span id="l:1494" class="id"><a name="l:1494" class="">l</a></span> <span id="m1:1495" class="id"><a name="m1:1495" class="">m1</a></span> <span id="m1':1496" class="id"><a name="m1':1496" class="">m1',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1492">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1495">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1493">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">free_list</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1495">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#l:1494">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1496">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1492">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1496">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1493">m2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof251')">Proof.</span></div>
<div class="proofscript" id="proof251">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span> <span class="gallina-kwd">as</span> <span class="id">[[b</span> <span class="id">lo]</span> <span class="id">hi]</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>) <span class="gallina-kwd">as</span> <span class="id">[m11|]</span> <span class="id">eqn:E;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHl</span> <span class="gallina-kwd">with</span> <span class="id">m11;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inject">free_left_inject;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.free_right_inject" class="id"><a name="Mem.free_right_inject" class="">free_right_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1497" class="id"><a name="f:1497" class="">f</a></span> <span id="m1:1498" class="id"><a name="m1:1498" class="">m1</a></span> <span id="m2:1499" class="id"><a name="m2:1499" class="">m2</a></span> <span id="b:1500" class="id"><a name="b:1500" class="">b</a></span> <span id="lo:1501" class="id"><a name="lo:1501" class="">lo</a></span> <span id="hi:1502" class="id"><a name="hi:1502" class="">hi</a></span> <span id="m2':1503" class="id"><a name="m2':1503" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1497">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1498">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1499">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1499">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1500">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1501">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1502">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1503">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b1:1504" class="id"><a name="b1:1504" class="">b1</a></span> <span id="delta:1505" class="id"><a name="delta:1505" class="">delta</a></span> <span id="ofs:1506" class="id"><a name="ofs:1506" class="">ofs</a></span> <span id="k:1507" class="id"><a name="k:1507" class="">k</a></span> <span id="p:1508" class="id"><a name="p:1508" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1497">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1504">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b:1500">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1505">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1498">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1504">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1506">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1507">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1508">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#lo:1501">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1506">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1505">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1502">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1497">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1498">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1503">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof252')">Proof.</span></div>
<div class="proofscript" id="proof252">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_right_inj">free_right_inj;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.perm_free_list" class="id"><a name="Mem.perm_free_list" class="">perm_free_list:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:1509" class="id"><a name="l:1509" class="">l</a></span> <span id="m:1510" class="id"><a name="m:1510" class="">m</a></span> <span id="m':1511" class="id"><a name="m':1511" class="">m'</a></span> <span id="b:1512" class="id"><a name="b:1512" class="">b</a></span> <span id="ofs:1513" class="id"><a name="ofs:1513" class="">ofs</a></span> <span id="k:1514" class="id"><a name="k:1514" class="">k</a></span> <span id="p:1515" class="id"><a name="p:1515" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">free_list</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1510">m</a></span> <span class="id"><a href="compcert.common.Memory.html#l:1509">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1511">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1511">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1512">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1513">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1514">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1515">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1510">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1512">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1513">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1514">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1515">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="lo:1516" class="id"><a name="lo:1516" class="">lo</a></span> <span id="hi:1517" class="id"><a name="hi:1517" class="">hi,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Memory.html#b:1512">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1516">lo,</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1517">hi</a></span>) <span class="id"><a href="compcert.common.Memory.html#l:1509">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1516">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1513">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1517">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof253')">Proof.</span></div>
<div class="proofscript" id="proof253">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span> <span class="gallina-kwd">as</span> <span class="id">[[b1</span> <span class="id">lo1]</span> <span class="id">hi1]</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id">m</span> <span class="id">b1</span> <span class="id">lo1</span> <span class="id">hi1</span>) <span class="gallina-kwd">as</span> <span class="id">[m1|]</span> <span class="id">eqn:E;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHl;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">E</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>). <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.free_inject" class="id"><a name="Mem.free_inject" class="">free_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1518" class="id"><a name="f:1518" class="">f</a></span> <span id="m1:1519" class="id"><a name="m1:1519" class="">m1</a></span> <span id="l:1520" class="id"><a name="l:1520" class="">l</a></span> <span id="m1':1521" class="id"><a name="m1':1521" class="">m1'</a></span> <span id="m2:1522" class="id"><a name="m2:1522" class="">m2</a></span> <span id="b:1523" class="id"><a name="b:1523" class="">b</a></span> <span id="lo:1524" class="id"><a name="lo:1524" class="">lo</a></span> <span id="hi:1525" class="id"><a name="hi:1525" class="">hi</a></span> <span id="m2':1526" class="id"><a name="m2':1526" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1518">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1519">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1522">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">free_list</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1519">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#l:1520">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1521">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1522">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1523">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1524">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1525">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1526">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b1:1527" class="id"><a name="b1:1527" class="">b1</a></span> <span id="delta:1528" class="id"><a name="delta:1528" class="">delta</a></span> <span id="ofs:1529" class="id"><a name="ofs:1529" class="">ofs</a></span> <span id="k:1530" class="id"><a name="k:1530" class="">k</a></span> <span id="p:1531" class="id"><a name="p:1531" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1518">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1527">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b:1523">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1528">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1519">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1:1527">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1529">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1530">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1531">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1524">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1529">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1528">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1525">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="lo1:1532" class="id"><a name="lo1:1532" class="">lo1,</a></span> <span class="gallina-kwd">exists</span> <span id="hi1:1533" class="id"><a name="hi1:1533" class="">hi1,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Memory.html#b1:1527">b1,</a></span> <span class="id"><a href="compcert.common.Memory.html#lo1:1532">lo1,</a></span> <span class="id"><a href="compcert.common.Memory.html#hi1:1533">hi1</a></span>) <span class="id"><a href="compcert.common.Memory.html#l:1520">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.common.Memory.html#lo1:1532">lo1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1529">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi1:1533">hi1</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1518">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1521">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1526">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof254')">Proof.</span></div>
<div class="proofscript" id="proof254">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_right_inject">free_right_inject;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_list_left_inject">free_list_left_inject;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_list">perm_free_list;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H2;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[lo1</span> <span class="id">[hi1</span> <span class="id">[C</span> <span class="id">D]]]</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.free_parallel_inject" class="id"><a name="Mem.free_parallel_inject" class="">free_parallel_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1534" class="id"><a name="f:1534" class="">f</a></span> <span id="m1:1535" class="id"><a name="m1:1535" class="">m1</a></span> <span id="m2:1536" class="id"><a name="m2:1536" class="">m2</a></span> <span id="b:1537" class="id"><a name="b:1537" class="">b</a></span> <span id="lo:1538" class="id"><a name="lo:1538" class="">lo</a></span> <span id="hi:1539" class="id"><a name="hi:1539" class="">hi</a></span> <span id="m1':1540" class="id"><a name="m1':1540" class="">m1'</a></span> <span id="b':1541" class="id"><a name="b':1541" class="">b'</a></span> <span id="delta:1542" class="id"><a name="delta:1542" class="">delta,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1534">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1535">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1536">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1535">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1537">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1538">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1539">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1540">m1'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1534">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1537">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b':1541">b',</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1542">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="m2':1543" class="id"><a name="m2':1543" class="">m2',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1536">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1541">b'</a></span> (<span class="id"><a href="compcert.common.Memory.html#lo:1538">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1542">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#hi:1539">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1542">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1543">m2'</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1534">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1':1540">m1'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1543">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof255')">Proof.</span></div>
<div class="proofscript" id="proof255">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_free">range_perm_free</a></span> <span class="id">m2</span> <span class="id">b'</span> (<span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>) (<span class="id">hi</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta</span>)) <span class="gallina-kwd">as</span> <span class="id">[m2'</span> <span class="id">FREE]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_inject">range_perm_inject;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">free_range_perm;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">m2';</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_inject">free_inject</a></span> <span class="gallina-kwd">with</span> (<span class="id">m1</span> <span class="id">:=</span> <span class="id">m1</span>) (<span class="id">l</span> <span class="id">:=</span> (<span class="id">b,lo,hi</span>)<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::nil</a></span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b1</span>. <span class="id">rewrite</span> <span class="id">H1</span> <span class="gallina-kwd">in</span> <span class="id">H2;</span> <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">lo,</span> <span class="id">hi;</span> <span class="id">split;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_no_overlap">mi_no_overlap</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="id">eexact</span> <span class="id">n</span>. <span class="id">eauto</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_max">perm_max</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span>. <span class="id">eauto</span>. <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable;</a></span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">free_range_perm;</a></span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[A|A]</span>. <span class="id">congruence</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.drop_outside_inject" class="id"><a name="Mem.drop_outside_inject" class="">drop_outside_inject:</a></span> <span class="gallina-kwd">forall</span> <span id="f:1544" class="id"><a name="f:1544" class="">f</a></span> <span id="m1:1545" class="id"><a name="m1:1545" class="">m1</a></span> <span id="m2:1546" class="id"><a name="m2:1546" class="">m2</a></span> <span id="b:1547" class="id"><a name="b:1547" class="">b</a></span> <span id="lo:1548" class="id"><a name="lo:1548" class="">lo</a></span> <span id="hi:1549" class="id"><a name="hi:1549" class="">hi</a></span> <span id="p:1550" class="id"><a name="p:1550" class="">p</a></span> <span id="m2':1551" class="id"><a name="m2':1551" class="">m2',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1544">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1545">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1546">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1546">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1547">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1548">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1549">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1550">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1551">m2'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b':1552" class="id"><a name="b':1552" class="">b'</a></span> <span id="delta:1553" class="id"><a name="delta:1553" class="">delta</a></span> <span id="ofs:1554" class="id"><a name="ofs:1554" class="">ofs</a></span> <span id="k:1555" class="id"><a name="k:1555" class="">k</a></span> <span id="p:1556" class="id"><a name="p:1556" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f:1544">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1552">b'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b:1547">b,</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1553">delta</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1545">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b':1552">b'</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1554">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1555">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1556">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1548">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1554">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#delta:1553">delta</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1549">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1544">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1545">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2':1551">m2'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof256')">Proof.</span></div>
<div class="proofscript" id="proof256">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_outside_inj">drop_outside_inj;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_drop">nextblock_drop;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Composing two memory injections. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.mem_inj_compose" class="id"><a name="Mem.mem_inj_compose" class="">mem_inj_compose:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1557" class="id"><a name="f:1557" class="">f</a></span> <span id="f':1558" class="id"><a name="f':1558" class="">f'</a></span> <span id="m1:1559" class="id"><a name="m1:1559" class="">m1</a></span> <span id="m2:1560" class="id"><a name="m2:1560" class="">m2</a></span> <span id="m3:1561" class="id"><a name="m3:1561" class="">m3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1557">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1559">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1560">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1558">f'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1560">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1561">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1557">f</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1558">f'</a></span>) <span class="id"><a href="compcert.common.Memory.html#m1:1559">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1561">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof257')">Proof.</span></div>
<div class="proofscript" id="proof257">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span>. <span class="id">inv</span> <span class="id">H;</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="gallina-kwd">as</span> <span class="id">[[b'</span> <span class="id">delta']</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f'</span> <span class="id">b'</span>) <span class="gallina-kwd">as</span> <span class="id">[[b''</span> <span class="id">delta'']</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> (<span class="id">delta'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta''</span>)) <span class="gallina-kwd">with</span> ((<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta'</span>) <span class="id">+</span> <span class="id">delta''</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="gallina-kwd">as</span> <span class="id">[[b'</span> <span class="id">delta']</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f'</span> <span class="id">b'</span>) <span class="gallina-kwd">as</span> <span class="id">[[b''</span> <span class="id">delta'']</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_align0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_align1</span> <span class="gallina-kwd">with</span> (<span class="id">ofs</span> <span class="id">:=</span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta'</span>) (<span class="id">p</span> <span class="id">:=</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">replace</span> <span class="id">ofs0</span> <span class="gallina-kwd">with</span> ((<span class="id">ofs0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">delta'</span>) <span class="id">+</span> <span class="id">delta'</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_perm0;</span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id">H0</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;memval&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="gallina-kwd">as</span> <span class="id">[[b'</span> <span class="id">delta']</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f'</span> <span class="id">b'</span>) <span class="gallina-kwd">as</span> <span class="id">[[b''</span> <span class="id">delta'']</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> (<span class="id">delta'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta''</span>)) <span class="gallina-kwd">with</span> ((<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta'</span>) <span class="id">+</span> <span class="id">delta''</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject_compose">memval_inject_compose;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.inject_compose" class="id"><a name="Mem.inject_compose" class="">inject_compose:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1562" class="id"><a name="f:1562" class="">f</a></span> <span id="f':1563" class="id"><a name="f':1563" class="">f'</a></span> <span id="m1:1564" class="id"><a name="m1:1564" class="">m1</a></span> <span id="m2:1565" class="id"><a name="m2:1565" class="">m2</a></span> <span id="m3:1566" class="id"><a name="m3:1566" class="">m3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1562">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1564">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1565">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1563">f'</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1565">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1566">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1562">f</a></span> <span class="id"><a href="compcert.common.Memory.html#f':1563">f'</a></span>) <span class="id"><a href="compcert.common.Memory.html#m1:1564">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1566">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof258')">Proof.</span></div>
<div class="proofscript" id="proof258">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H;</span> <span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj_compose">mem_inj_compose;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;unmapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">erewrite</span> <span class="id">mi_freeblocks0;</span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[[b1</span> <span class="id">delta1]</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f'</span> <span class="id">b1</span>) <span class="gallina-kwd">as</span> <span class="id">[[b2</span> <span class="id">delta2]</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="gallina-kwd">as</span> <span class="id">[[b1x</span> <span class="id">delta1x]</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f'</span> <span class="id">b1x</span>) <span class="gallina-kwd">as</span> <span class="id">[[b1y</span> <span class="id">delta1y]</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f</span> <span class="id">b2</span>) <span class="gallina-kwd">as</span> <span class="id">[[b2x</span> <span class="id">delta2x]</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f'</span> <span class="id">b2x</span>) <span class="gallina-kwd">as</span> <span class="id">[[b2y</span> <span class="id">delta2y]</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_no_overlap0;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1x</span> <span class="id">b2x</span>).<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b1x</span>. <span class="id">destruct</span> <span class="id">A</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">delta1y</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">delta2y</span>) <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">right;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_no_overlap1</span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>. <span class="id">eauto</span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">lia</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="gallina-kwd">as</span> <span class="id">[[b1</span> <span class="id">delta1]</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f'</span> <span class="id">b1</span>) <span class="gallina-kwd">as</span> <span class="id">[[b2</span> <span class="id">delta2]</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_representable0;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A</span> <span class="id">B]</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">ofs'</span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta1</span>)).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">ofs';</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_representable1</span>. <span class="id">eauto</span>. <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">ofs'</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id">+</span> <span class="id">delta1</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span>. <span class="id">lia</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="gallina-kwd">as</span> <span class="id">[[b'</span> <span class="id">delta']</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f'</span> <span class="id">b'</span>) <span class="gallina-kwd">as</span> <span class="id">[[b''</span> <span class="id">delta'']</span> <span class="id">|]</span> <span class="id">eqn:?;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H;</span> <span class="id">clear</span> <span class="id">H;</span> <span class="id">subst</span> <span class="id">b''</span> <span class="id">delta</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> (<span class="id">delta'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta''</span>)) <span class="gallina-kwd">with</span> ((<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">delta'</span>) <span class="id">+</span> <span class="id">delta''</span>) <span class="gallina-kwd">in</span> <span class="id">H0</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_perm_inv1;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">elim</span> <span class="id">A</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.val_lessdef_inject_compose" class="id"><a name="Mem.val_lessdef_inject_compose" class="">val_lessdef_inject_compose:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1567" class="id"><a name="f:1567" class="">f</a></span> <span id="v1:1568" class="id"><a name="v1:1568" class="">v1</a></span> <span id="v2:1569" class="id"><a name="v2:1569" class="">v2</a></span> <span id="v3:1570" class="id"><a name="v3:1570" class="">v3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1568">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1569">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1567">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1569">v2</a></span> <span class="id"><a href="compcert.common.Memory.html#v3:1570">v3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1567">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1568">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v3:1570">v3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof259')">Proof.</span></div>
<div class="proofscript" id="proof259">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.val_inject_lessdef_compose" class="id"><a name="Mem.val_inject_lessdef_compose" class="">val_inject_lessdef_compose:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1571" class="id"><a name="f:1571" class="">f</a></span> <span id="v1:1572" class="id"><a name="v1:1572" class="">v1</a></span> <span id="v2:1573" class="id"><a name="v2:1573" class="">v2</a></span> <span id="v3:1574" class="id"><a name="v3:1574" class="">v3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1571">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1572">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1573">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v2:1573">v2</a></span> <span class="id"><a href="compcert.common.Memory.html#v3:1574">v3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1571">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1:1572">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v3:1574">v3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof260')">Proof.</span></div>
<div class="proofscript" id="proof260">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.extends_inject_compose" class="id"><a name="Mem.extends_inject_compose" class="">extends_inject_compose:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1575" class="id"><a name="f:1575" class="">f</a></span> <span id="m1:1576" class="id"><a name="m1:1576" class="">m1</a></span> <span id="m2:1577" class="id"><a name="m2:1577" class="">m2</a></span> <span id="m3:1578" class="id"><a name="m3:1578" class="">m3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1576">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1577">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1575">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1577">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1578">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1575">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1576">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1578">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof261')">Proof.</span></div>
<div class="proofscript" id="proof261">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H;</span> <span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id">f</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id">f</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj_compose">mem_inj_compose;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#extensionality">extensionality;</a></span> <span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj,</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f</span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[[y</span> <span class="id">delta]</span> <span class="id">|</span> <span class="id">];</span> <span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;unmapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_freeblocks0</span>. <span class="id">erewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_extends">valid_block_extends;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_no_overlap0;</span> <span class="id">eauto;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_extends">perm_extends;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_representable0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H1;</span> <span class="id">eauto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_extends">perm_extends</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mext_perm_inv0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">A</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_extends">perm_extends;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.inject_extends_compose" class="id"><a name="Mem.inject_extends_compose" class="">inject_extends_compose:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:1579" class="id"><a name="f:1579" class="">f</a></span> <span id="m1:1580" class="id"><a name="m1:1580" class="">m1</a></span> <span id="m2:1581" class="id"><a name="m2:1581" class="">m2</a></span> <span id="m3:1582" class="id"><a name="m3:1582" class="">m3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1579">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1580">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1581">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1581">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1582">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f:1579">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1580">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1582">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof262')">Proof.</span></div>
<div class="proofscript" id="proof262">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H;</span> <span class="id">inversion</span> <span class="id">H0</span>. <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id">f</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id">f</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>). <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj_compose">mem_inj_compose;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#extensionality">extensionality;</a></span> <span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj,</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">f</span> <span class="id">x</span>) <span class="gallina-kwd">as</span> <span class="id">[[y</span> <span class="id">delta]</span> <span class="id">|</span> <span class="id">];</span> <span class="id">auto</span>. <span class="id">decEq</span>. <span class="id">decEq</span>. <span class="id">lia</span>.<br/>
<span class="comment">(*&nbsp;unmapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;mapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_extends">valid_block_extends;</a></span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id">mi_no_overlap0;</span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_representable0;</span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mext_perm_inv0;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mi_perm_inv0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">A</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.extends_extends_compose" class="id"><a name="Mem.extends_extends_compose" class="">extends_extends_compose:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1583" class="id"><a name="m1:1583" class="">m1</a></span> <span id="m2:1584" class="id"><a name="m2:1584" class="">m2</a></span> <span id="m3:1585" class="id"><a name="m3:1585" class="">m3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1583">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1584">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1584">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1585">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1583">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1585">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof263')">Proof.</span></div>
<div class="proofscript" id="proof263">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H;</span> <span class="id">subst;</span> <span class="id">inv</span> <span class="id">H0;</span> <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;nextblock&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;meminj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj_compose">mem_inj_compose;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#extensionality">extensionality;</a></span> <span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj,</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mext_perm_inv1;</span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[A|A]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">mext_perm_inv0;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">A</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_extends">perm_extends;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Injecting a memory into itself. </div>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.flat_inj" class="id"><a name="Mem.flat_inj" class="">flat_inj</a></span> (<span id="thr:1586" class="id"><a name="thr:1586" class="">thr:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span> (<span id="b:1587" class="id"><a name="b:1587" class="">b:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1587">b</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1586">thr</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b:1587">b,</a></span> <span class="id">0</span>) <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Mem.inject_neutral" class="id"><a name="Mem.inject_neutral" class="">inject_neutral</a></span> (<span id="thr:1588" class="id"><a name="thr:1588" class="">thr:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span id="m:1589" class="id"><a name="m:1589" class="">m:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1588">thr</a></span>) <span class="id"><a href="compcert.common.Memory.html#m:1589">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1589">m</a></span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="Mem.flat_inj_no_overlap" class="id"><a name="Mem.flat_inj_no_overlap" class="">flat_inj_no_overlap:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="thr:1590" class="id"><a name="thr:1590" class="">thr</a></span> <span id="m:1591" class="id"><a name="m:1591" class="">m,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1590">thr</a></span>) <span class="id"><a href="compcert.common.Memory.html#m:1591">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof264')">Proof.</span></div>
<div class="proofscript" id="proof264">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj;</a></span> <span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> <span class="id">thr</span>)<span class="id">;</span> <span class="id">inversion</span> <span class="id">H0;</span> <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b2</span> <span class="id">thr</span>)<span class="id">;</span> <span class="id">inversion</span> <span class="id">H1;</span> <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.neutral_inject" class="id"><a name="Mem.neutral_inject" class="">neutral_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1592" class="id"><a name="m:1592" class="">m,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1592">m</a></span>) <span class="id"><a href="compcert.common.Memory.html#m:1592">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1592">m</a></span>)) <span class="id"><a href="compcert.common.Memory.html#m:1592">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1592">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof265')">Proof.</span></div>
<div class="proofscript" id="proof265">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;meminj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>))<span class="id">;</span> <span class="id">inversion</span> <span class="id">H0;</span> <span class="id">subst</span>. <span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj_no_overlap">flat_inj_no_overlap</a></span>.<br/>
<span class="comment">(*&nbsp;range&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>))<span class="id">;</span> <span class="id">inv</span> <span class="id">H0</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span> <span class="id">ofs</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>))<span class="id">;</span> <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.empty_inject_neutral" class="id"><a name="Mem.empty_inject_neutral" class="">empty_inject_neutral:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="thr:1593" class="id"><a name="thr:1593" class="">thr,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1593">thr</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">empty</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof266')">Proof.</span></div>
<div class="proofscript" id="proof266">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> <span class="id">thr</span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>) <span class="gallina-kwd">with</span> <span class="id">ofs</span> <span class="gallina-kwd">by</span> <span class="id">lia;</span> <span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> <span class="id">thr</span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gi">PMap.gi</a></span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gi">ZMap.gi</a></span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.alloc_inject_neutral" class="id"><a name="Mem.alloc_inject_neutral" class="">alloc_inject_neutral:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="thr:1594" class="id"><a name="thr:1594" class="">thr</a></span> <span id="m:1595" class="id"><a name="m:1595" class="">m</a></span> <span id="lo:1596" class="id"><a name="lo:1596" class="">lo</a></span> <span id="hi:1597" class="id"><a name="hi:1597" class="">hi</a></span> <span id="b:1598" class="id"><a name="b:1598" class="">b</a></span> <span id="m':1599" class="id"><a name="m':1599" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1595">m</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1596">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1597">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m':1599">m',</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1598">b</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1594">thr</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1595">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1595">m</a></span>) <span class="id"><a href="compcert.common.Memory.html#thr:1594">thr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1594">thr</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1599">m'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof267')">Proof.</span></div>
<div class="proofscript" id="proof267">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_mapped_inj">alloc_left_mapped_inj</a></span> <span class="gallina-kwd">with</span> (<span class="id">m1</span> <span class="id">:=</span> <span class="id">m</span>) (<span class="id">b2</span> <span class="id">:=</span> <span class="id">b</span>) (<span class="id">delta</span> <span class="id">:=</span> <span class="id">0</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_right_inj">alloc_right_inj;</a></span> <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">red</span>. <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable;</a></span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2;</a></span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.store_inject_neutral" class="id"><a name="Mem.store_inject_neutral" class="">store_inject_neutral:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:1600" class="id"><a name="chunk:1600" class="">chunk</a></span> <span id="m:1601" class="id"><a name="m:1601" class="">m</a></span> <span id="b:1602" class="id"><a name="b:1602" class="">b</a></span> <span id="ofs:1603" class="id"><a name="ofs:1603" class="">ofs</a></span> <span id="v:1604" class="id"><a name="v:1604" class="">v</a></span> <span id="m':1605" class="id"><a name="m':1605" class="">m'</a></span> <span id="thr:1606" class="id"><a name="thr:1606" class="">thr,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1600">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1601">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1602">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1603">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:1604">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1605">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1606">thr</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1601">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1602">b</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1606">thr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1606">thr</a></span>) <span class="id"><a href="compcert.common.Memory.html#v:1604">v</a></span> <span class="id"><a href="compcert.common.Memory.html#v:1604">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1606">thr</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1605">m'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof268')">Proof.</span></div>
<div class="proofscript" id="proof268">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mapped_inj">store_mapped_inj</a></span>. <span class="id">eauto</span>. <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj_no_overlap">flat_inj_no_overlap</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true;</a></span> <span class="id">auto</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">0</span>) <span class="gallina-kwd">with</span> <span class="id">ofs</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[m''</span> <span class="id">[A</span> <span class="id">B]]</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Mem.drop_inject_neutral" class="id"><a name="Mem.drop_inject_neutral" class="">drop_inject_neutral:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1607" class="id"><a name="m:1607" class="">m</a></span> <span id="b:1608" class="id"><a name="b:1608" class="">b</a></span> <span id="lo:1609" class="id"><a name="lo:1609" class="">lo</a></span> <span id="hi:1610" class="id"><a name="hi:1610" class="">hi</a></span> <span id="p:1611" class="id"><a name="p:1611" class="">p</a></span> <span id="m':1612" class="id"><a name="m':1612" class="">m'</a></span> <span id="thr:1613" class="id"><a name="thr:1613" class="">thr,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1607">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1608">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1609">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1610">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1611">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1612">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1613">thr</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1607">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1608">b</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1613">thr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr:1613">thr</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1612">m'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof269')">Proof.</span></div>
<div class="proofscript" id="proof269">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_mapped_inj">drop_mapped_inj;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj_no_overlap">flat_inj_no_overlap</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="id">intros</span> <span class="id">[m''</span> <span class="id">[A</span> <span class="id">B]]</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<h1> Invariance properties between two memory states </h1>
<br/>
<span class="vernacular">Section</span> <span id="Mem.UNCHANGED_ON" class="id"><a name="Mem.UNCHANGED_ON" class="">UNCHANGED_ON</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Mem.UNCHANGED_ON.P" class="id"><a name="Mem.UNCHANGED_ON.P" class="">P:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span>.<br/>
<br/>
<span class="vernacular">Record</span> <span id="Mem.unchanged_on" class="id"><a name="Mem.unchanged_on" class="">unchanged_on</a></span> (<span id="m_before:1615" class="id"><a name="m_before:1615" class="">m_before</a></span> <span id="m_after:1616" class="id"><a name="m_after:1616" class="">m_after:</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span> <span class="id">mk_unchanged_on</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span id="Mem.unchanged_on_nextblock" class="id"><a name="Mem.unchanged_on_nextblock" class="">unchanged_on_nextblock:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m_before:1615">m_before</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m_after:1616">m_after</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span id="Mem.unchanged_on_perm" class="id"><a name="Mem.unchanged_on_perm" class="">unchanged_on_perm:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:1619" class="id"><a name="b:1619" class="">b</a></span> <span id="ofs:1620" class="id"><a name="ofs:1620" class="">ofs</a></span> <span id="k:1621" class="id"><a name="k:1621" class="">k</a></span> <span id="p:1622" class="id"><a name="p:1622" class="">p,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1619">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1620">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m_before:1615">m_before</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1619">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m_before:1615">m_before</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1619">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1620">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1621">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1622">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m_after:1616">m_after</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1619">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1620">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1621">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1622">p</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span id="Mem.unchanged_on_contents" class="id"><a name="Mem.unchanged_on_contents" class="">unchanged_on_contents:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:1624" class="id"><a name="b:1624" class="">b</a></span> <span id="ofs:1625" class="id"><a name="ofs:1625" class="">ofs,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1624">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1625">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m_before:1615">m_before</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1624">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1625">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1625">ofs</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1624">b</a></span> <span class="id"><a href="compcert.common.Memory.html#m_after:1616">m_after</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1625">ofs</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1624">b</a></span> <span class="id"><a href="compcert.common.Memory.html#m_before:1615">m_before</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>))<br/>
<span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.unchanged_on_refl" class="id"><a name="Mem.unchanged_on_refl" class="">unchanged_on_refl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1627" class="id"><a name="m:1627" class="">m,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1627">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1627">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof270')">Proof.</span></div>
<div class="proofscript" id="proof270">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>. <span class="id">tauto</span>. <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.valid_block_unchanged_on" class="id"><a name="Mem.valid_block_unchanged_on" class="">valid_block_unchanged_on:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1628" class="id"><a name="m:1628" class="">m</a></span> <span id="m':1629" class="id"><a name="m':1629" class="">m'</a></span> <span id="b:1630" class="id"><a name="b:1630" class="">b,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1628">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1629">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1628">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1630">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1629">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1630">b</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof271')">Proof.</span></div>
<div class="proofscript" id="proof271">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block;</a></span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">unchanged_on_nextblock</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.perm_unchanged_on" class="id"><a name="Mem.perm_unchanged_on" class="">perm_unchanged_on:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1631" class="id"><a name="m:1631" class="">m</a></span> <span id="m':1632" class="id"><a name="m':1632" class="">m'</a></span> <span id="b:1633" class="id"><a name="b:1633" class="">b</a></span> <span id="ofs:1634" class="id"><a name="ofs:1634" class="">ofs</a></span> <span id="k:1635" class="id"><a name="k:1635" class="">k</a></span> <span id="p:1636" class="id"><a name="p:1636" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1631">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1632">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1633">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1634">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1631">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1633">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1634">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1635">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1636">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1632">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1633">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1634">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1635">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1636">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof272')">Proof.</span></div>
<div class="proofscript" id="proof272">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id">unchanged_on_perm0;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_valid_block">perm_valid_block;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.perm_unchanged_on_2" class="id"><a name="Mem.perm_unchanged_on_2" class="">perm_unchanged_on_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1637" class="id"><a name="m:1637" class="">m</a></span> <span id="m':1638" class="id"><a name="m':1638" class="">m'</a></span> <span id="b:1639" class="id"><a name="b:1639" class="">b</a></span> <span id="ofs:1640" class="id"><a name="ofs:1640" class="">ofs</a></span> <span id="k:1641" class="id"><a name="k:1641" class="">k</a></span> <span id="p:1642" class="id"><a name="p:1642" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1637">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1638">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1639">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1640">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1637">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1639">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1638">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1639">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1640">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1641">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1642">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1637">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1639">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1640">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k:1641">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1642">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof273')">Proof.</span></div>
<div class="proofscript" id="proof273">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id">unchanged_on_perm0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.unchanged_on_trans" class="id"><a name="Mem.unchanged_on_trans" class="">unchanged_on_trans:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1643" class="id"><a name="m1:1643" class="">m1</a></span> <span id="m2:1644" class="id"><a name="m2:1644" class="">m2</a></span> <span id="m3:1645" class="id"><a name="m3:1645" class="">m3,</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1643">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1644">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m2:1644">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1645">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m1:1643">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3:1645">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof274')">Proof.</span></div>
<div class="proofscript" id="proof274">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">unchanged_on_nextblock;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_perm">unchanged_on_perm;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">valid_block_unchanged_on;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">transitivity</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">ofs</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id">m2</span>)<span class="id">#b</span>)<span class="id">;</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_contents">unchanged_on_contents;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">perm_unchanged_on;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.loadbytes_unchanged_on_1" class="id"><a name="Mem.loadbytes_unchanged_on_1" class="">loadbytes_unchanged_on_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1646" class="id"><a name="m:1646" class="">m</a></span> <span id="m':1647" class="id"><a name="m':1647" class="">m'</a></span> <span id="b:1648" class="id"><a name="b:1648" class="">b</a></span> <span id="ofs:1649" class="id"><a name="ofs:1649" class="">ofs</a></span> <span id="n:1650" class="id"><a name="n:1650" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1646">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1647">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1646">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1648">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:1651" class="id"><a name="i:1651" class="">i,</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1649">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1651">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1649">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#n:1650">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1648">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1651">i</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1647">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1648">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1649">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:1650">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1646">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1648">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1649">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:1650">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof275')">Proof.</span></div>
<div class="proofscript" id="proof275">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">n</span> <span class="id">0</span>).<br/>
<span class="id">+</span> <span class="id">erewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_empty">loadbytes_empty</a></span> <span class="gallina-kwd">by</span> <span class="id">assumption</span>. <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>. <span class="id">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_exten">getN_exten</a></span>. <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">unchanged_on_contents0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id">unchanged_on_perm0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">n0;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id">&lt;-</span> <span class="id">unchanged_on_perm0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.loadbytes_unchanged_on" class="id"><a name="Mem.loadbytes_unchanged_on" class="">loadbytes_unchanged_on:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1652" class="id"><a name="m:1652" class="">m</a></span> <span id="m':1653" class="id"><a name="m':1653" class="">m'</a></span> <span id="b:1654" class="id"><a name="b:1654" class="">b</a></span> <span id="ofs:1655" class="id"><a name="ofs:1655" class="">ofs</a></span> <span id="n:1656" class="id"><a name="n:1656" class="">n</a></span> <span id="bytes:1657" class="id"><a name="bytes:1657" class="">bytes,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1652">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1653">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:1658" class="id"><a name="i:1658" class="">i,</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1655">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1658">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1655">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memory.html#n:1656">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1654">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1658">i</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1652">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1654">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1655">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:1656">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:1657">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1653">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1654">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1655">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n:1656">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:1657">bytes</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof276')">Proof.</span></div>
<div class="proofscript" id="proof276">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">n</span> <span class="id">0</span>).<br/>
<span class="id">+</span> <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_empty">loadbytes_empty</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span> <span class="gallina-kwd">by</span> <span class="id">assumption</span>. <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H1</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_unchanged_on_1">loadbytes_unchanged_on_1;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_range_perm">loadbytes_range_perm;</a></span> <span class="id">eauto</span>. <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id">ofs</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.load_unchanged_on_1" class="id"><a name="Mem.load_unchanged_on_1" class="">load_unchanged_on_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1659" class="id"><a name="m:1659" class="">m</a></span> <span id="m':1660" class="id"><a name="m':1660" class="">m'</a></span> <span id="chunk:1661" class="id"><a name="chunk:1661" class="">chunk</a></span> <span id="b:1662" class="id"><a name="b:1662" class="">b</a></span> <span id="ofs:1663" class="id"><a name="ofs:1663" class="">ofs,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1659">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1660">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1659">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1662">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:1664" class="id"><a name="i:1664" class="">i,</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1663">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1664">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1663">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1661">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1662">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1664">i</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1661">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1660">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1662">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1663">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1661">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1659">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1662">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1663">ofs</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof277')">Proof.</span></div>
<div class="proofscript" id="proof277">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">v</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="id">f_equal</span>. <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_exten">getN_exten</a></span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span> <span class="gallina-kwd">in</span> <span class="id">H4</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_contents">unchanged_on_contents;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">auto</span>. <span class="id">red;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">perm_unchanged_on;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span> <span class="id">[A</span> <span class="id">B];</span> <span class="id">elim</span> <span class="id">n;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on_2">perm_unchanged_on_2;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.load_unchanged_on" class="id"><a name="Mem.load_unchanged_on" class="">load_unchanged_on:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1665" class="id"><a name="m:1665" class="">m</a></span> <span id="m':1666" class="id"><a name="m':1666" class="">m'</a></span> <span id="chunk:1667" class="id"><a name="chunk:1667" class="">chunk</a></span> <span id="b:1668" class="id"><a name="b:1668" class="">b</a></span> <span id="ofs:1669" class="id"><a name="ofs:1669" class="">ofs</a></span> <span id="v:1670" class="id"><a name="v:1670" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1665">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1666">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:1671" class="id"><a name="i:1671" class="">i,</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1669">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1671">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1669">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1667">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1668">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1671">i</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1667">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1665">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1668">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1669">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:1670">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1667">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1666">m'</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1668">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1669">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v:1670">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof278')">Proof.</span></div>
<div class="proofscript" id="proof278">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H1</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_unchanged_on_1">load_unchanged_on_1;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.store_unchanged_on" class="id"><a name="Mem.store_unchanged_on" class="">store_unchanged_on:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:1672" class="id"><a name="chunk:1672" class="">chunk</a></span> <span id="m:1673" class="id"><a name="m:1673" class="">m</a></span> <span id="b:1674" class="id"><a name="b:1674" class="">b</a></span> <span id="ofs:1675" class="id"><a name="ofs:1675" class="">ofs</a></span> <span id="v:1676" class="id"><a name="v:1676" class="">v</a></span> <span id="m':1677" class="id"><a name="m':1677" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1672">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1673">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1674">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1675">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v:1676">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1677">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:1678" class="id"><a name="i:1678" class="">i,</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1675">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1678">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1675">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk:1672">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1674">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1678">i</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1673">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1677">m'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof279')">Proof.</span></div>
<div class="proofscript" id="proof279">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
<span class="id">-</span> <span class="id">split;</span> <span class="id">intros;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="id">-</span> <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents;</a></span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">subst</span> <span class="id">b0</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> <span class="id">ofs</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> (<span class="id">H0</span> <span class="id">ofs0</span>). <span class="id">lia</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.storebytes_unchanged_on" class="id"><a name="Mem.storebytes_unchanged_on" class="">storebytes_unchanged_on:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1679" class="id"><a name="m:1679" class="">m</a></span> <span id="b:1680" class="id"><a name="b:1680" class="">b</a></span> <span id="ofs:1681" class="id"><a name="ofs:1681" class="">ofs</a></span> <span id="bytes:1682" class="id"><a name="bytes:1682" class="">bytes</a></span> <span id="m':1683" class="id"><a name="m':1683" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1679">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1680">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1681">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:1682">bytes</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1683">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:1684" class="id"><a name="i:1684" class="">i,</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1681">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1684">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1681">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes:1682">bytes</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1680">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1684">i</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1679">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1683">m'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof280')">Proof.</span></div>
<div class="proofscript" id="proof280">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
<span class="id">-</span> <span class="id">split;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1;</a></span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents;</a></span> <span class="id">eauto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">subst</span> <span class="id">b0</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> <span class="id">ofs</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> (<span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes</span>)))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span> (<span class="id">H0</span> <span class="id">ofs0</span>). <span class="id">lia</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.alloc_unchanged_on" class="id"><a name="Mem.alloc_unchanged_on" class="">alloc_unchanged_on:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1685" class="id"><a name="m:1685" class="">m</a></span> <span id="lo:1686" class="id"><a name="lo:1686" class="">lo</a></span> <span id="hi:1687" class="id"><a name="hi:1687" class="">hi</a></span> <span id="m':1688" class="id"><a name="m':1688" class="">m'</a></span> <span id="b:1689" class="id"><a name="b:1689" class="">b,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1685">m</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1686">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1687">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.common.Memory.html#m':1688">m',</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1689">b</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1685">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1688">m'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof281')">Proof.</span></div>
<div class="proofscript" id="proof281">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_succ">Ple_succ</a></span>.<br/>
<span class="id">-</span> <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">valid_not_valid_diff;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
<span class="id">-</span> <span class="id">injection</span> <span class="id">H;</span> <span class="id">intros</span> <span class="id">A</span> <span class="id">B</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">B;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">A</span>.  <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">valid_not_valid_diff;</a></span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.free_unchanged_on" class="id"><a name="Mem.free_unchanged_on" class="">free_unchanged_on:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1690" class="id"><a name="m:1690" class="">m</a></span> <span id="b:1691" class="id"><a name="b:1691" class="">b</a></span> <span id="lo:1692" class="id"><a name="lo:1692" class="">lo</a></span> <span id="hi:1693" class="id"><a name="hi:1693" class="">hi</a></span> <span id="m':1694" class="id"><a name="m':1694" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1690">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1691">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1692">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1693">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1694">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:1695" class="id"><a name="i:1695" class="">i,</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1692">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1695">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1693">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1691">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1695">i</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1690">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1694">m'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof282')">Proof.</span></div>
<div class="proofscript" id="proof282">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">nextblock_free</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
<span class="id">-</span> <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">perm_free_1;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">lo</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">hi</span> <span class="id">ofs</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b0</span>. <span class="id">elim</span> (<span class="id">H0</span> <span class="id">ofs</span>). <span class="id">lia</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.drop_perm_unchanged_on" class="id"><a name="Mem.drop_perm_unchanged_on" class="">drop_perm_unchanged_on:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1696" class="id"><a name="m:1696" class="">m</a></span> <span id="b:1697" class="id"><a name="b:1697" class="">b</a></span> <span id="lo:1698" class="id"><a name="lo:1698" class="">lo</a></span> <span id="hi:1699" class="id"><a name="hi:1699" class="">hi</a></span> <span id="p:1700" class="id"><a name="p:1700" class="">p</a></span> <span id="m':1701" class="id"><a name="m':1701" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1696">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1697">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1698">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1699">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p:1700">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1701">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:1702" class="id"><a name="i:1702" class="">i,</a></span> <span class="id"><a href="compcert.common.Memory.html#lo:1698">lo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1702">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.common.Memory.html#hi:1699">hi</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1697">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i:1702">i</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1696">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1701">m'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof283')">Proof.</span></div>
<div class="proofscript" id="proof283">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_drop">nextblock_drop</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
<span class="id">-</span> <span class="id">split;</span> <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> (<span class="id">lo</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">ofs</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id">hi</span>)). <span class="id">{</span> <span class="id">red;</span> <span class="id">intros;</span> <span class="id">eelim</span> <span class="id">H0;</span> <span class="id">eauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">right;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H;</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON">UNCHANGED_ON</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Mem.unchanged_on_implies" class="id"><a name="Mem.unchanged_on_implies" class="">unchanged_on_implies:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="P:1703" class="id"><a name="P:1703" class="">P</a></span> <span id="Q:1704" class="id"><a name="Q:1704" class="">Q:</a></span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span>) <span id="m:1705" class="id"><a name="m:1705" class="">m</a></span> <span id="m':1706" class="id"><a name="m':1706" class="">m',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#P:1703">P</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1705">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1706">m'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="b:1707" class="id"><a name="b:1707" class="">b</a></span> <span id="ofs:1708" class="id"><a name="ofs:1708" class="">ofs,</a></span> <span class="id"><a href="compcert.common.Memory.html#Q:1704">Q</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1707">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1708">ofs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1705">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1707">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memory.html#P:1703">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b:1707">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs:1708">ofs</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#Q:1704">Q</a></span> <span class="id"><a href="compcert.common.Memory.html#m:1705">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m':1706">m'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof284')">Proof.</span></div>
<div class="proofscript" id="proof284">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">constructor;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id">unchanged_on_perm0;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id">unchanged_on_contents0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H0;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_valid_block">perm_valid_block;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem">Mem</a></span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span id="mem" class="id"><a name="mem" class="">mem</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memory.html#mem">Mem.mem</a></span>.<br/>
<br/>
<span class="id">Global</span> <span class="vernacular">Opaque</span> <span class="id"><a href="compcert.common.Memory.html#alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#free">Mem.free</a></span> <span class="id"><a href="compcert.common.Memory.html#store">Mem.store</a></span> <span class="id"><a href="compcert.common.Memory.html#load">Mem.load</a></span> <span class="id"><a href="compcert.common.Memory.html#storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#loadbytes">Mem.loadbytes</a></span>.<br/>
<br/>
<span class="id">Global</span> <span class="vernacular">Hint</span> <span class="id">Resolve</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_not_valid_diff</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_implies</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_cur</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_max</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_valid_block</span><br/>
&nbsp;&nbsp;<span class="id">Mem.range_perm_implies</span><br/>
&nbsp;&nbsp;<span class="id">Mem.range_perm_cur</span><br/>
&nbsp;&nbsp;<span class="id">Mem.range_perm_max</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_implies</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_valid_block</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_perm</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_load</span><br/>
&nbsp;&nbsp;<span class="id">Mem.load_valid_access</span><br/>
&nbsp;&nbsp;<span class="id">Mem.loadbytes_range_perm</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_store</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_store_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_store_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.nextblock_store</span><br/>
&nbsp;&nbsp;<span class="id">Mem.store_valid_block_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.store_valid_block_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.store_valid_access_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.store_valid_access_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.store_valid_access_3</span><br/>
&nbsp;&nbsp;<span class="id">Mem.storebytes_range_perm</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_storebytes_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_storebytes_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.storebytes_valid_access_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.storebytes_valid_access_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.nextblock_storebytes</span><br/>
&nbsp;&nbsp;<span class="id">Mem.storebytes_valid_block_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.storebytes_valid_block_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.nextblock_alloc</span><br/>
&nbsp;&nbsp;<span class="id">Mem.alloc_result</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_block_alloc</span><br/>
&nbsp;&nbsp;<span class="id">Mem.fresh_block_alloc</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_new_block</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_alloc_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_alloc_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_alloc_3</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_alloc_4</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_alloc_inv</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_alloc_other</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_alloc_same</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_alloc_inv</span><br/>
&nbsp;&nbsp;<span class="id">Mem.range_perm_free</span><br/>
&nbsp;&nbsp;<span class="id">Mem.free_range_perm</span><br/>
&nbsp;&nbsp;<span class="id">Mem.nextblock_free</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_block_free_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_block_free_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_free_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_free_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_free_3</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_free_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_free_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_free_inv_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_free_inv_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.unchanged_on_refl</span><br/>
<span class="id">:</span> <span class="id">mem</span>.<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
