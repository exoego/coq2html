
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module IEEE754_extra</title>
<meta name="description" content="Documentation of Coq module IEEE754_extra" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module IEEE754_extra</h1>
<br/>
<div class="doc">Additional operations and proofs about IEEE-754 binary
    floating-point numbers, on top of the Flocq library. </div>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Reals.html">Reals</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html">SpecFloat</a></span>.<br/>
<span class="vernacular">From</span> <span class="id">Flocq</span> <span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="Flocq.Core.Core.html">Core</a></span> <span class="id"><a href="Flocq.Core.Digits.html">Digits</a></span> <span class="id"><a href="Flocq.Calc.Operations.html">Operations</a></span> <span class="id"><a href="Flocq.Calc.Round.html">Round</a></span> <span class="id"><a href="Flocq.Calc.Bracket.html">Bracket</a></span> <span class="id"><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html">Binary</a></span> <span class="id"><a href="Flocq.Prop.Round_odd.html">Round_odd</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.ZArith.html">ZArith</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.micromega.Psatz.html">Psatz</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html">Bool</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Eqdep_dec.html">Eqdep_dec</a></span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Open</span> <span class="vernacular">Scope</span> <span class="id">Z_scope</span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="Extra_ops" class="id"><a name="Extra_ops" class="">Extra_ops</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">prec</span></span> is the number of bits of the mantissa including the implicit one.
    <span class="bracket"><span class="id">emax</span></span> is the exponent of the infinities.
    Typically p=24 and emax = 128 in single precision. </div>
<br/>
<span class="vernacular">Variable</span> <span id="Extra_ops.prec" class="id"><a name="Extra_ops.prec" class="">prec</a></span> <span id="Extra_ops.emax" class="id"><a name="Extra_ops.emax" class="">emax</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Context</span> (<span id="prec_gt_0_:3" class="id"><a name="prec_gt_0_:3" class="">prec_gt_0_</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>).<br/>
<span class="vernacular">Context</span> (<span id="prec_lt_emax_:4" class="id"><a name="prec_lt_emax_:4" class="">prec_lt_emax_</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#Prec_lt_emax">Prec_lt_emax</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>).<br/>
<span class="vernacular">Notation</span> <span id="emin" class="id"><a name="emin" class="">emin</a></span> <span class="id">:=</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#emin">emin</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>).<br/>
<span class="vernacular">Notation</span> <span id="fexp" class="id"><a name="fexp" class="">fexp</a></span> <span class="id">:=</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#fexp">fexp</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>).<br/>
<span class="vernacular">Notation</span> <span id="binary_float" class="id"><a name="binary_float" class="">binary_float</a></span> <span class="id">:=</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#binary_float">binary_float</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>).<br/>
<br/>
<div class="doc">Remarks on <span class="bracket"><span class="id">is_finite</span></span> </div>
<br/>
<span class="vernacular">Remark</span> <span id="is_finite_not_is_nan" class="id"><a name="is_finite_not_is_nan" class="">is_finite_not_is_nan:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="f:5" class="id"><a name="f:5" class="">f:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>)<span class="id">,</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:5">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_nan">is_nan</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:5">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">f;</span> <span class="id">reflexivity</span> <span class="id">||</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="is_finite_strict_finite" class="id"><a name="is_finite_strict_finite" class="">is_finite_strict_finite:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="f:6" class="id"><a name="f:6" class="">f:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>)<span class="id">,</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite_strict">is_finite_strict</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:6">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:6">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">f;</span> <span class="id">reflexivity</span> <span class="id">||</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Digression on FP numbers that cannot be <span class="bracket">-0.0</span>. </div>
<br/>
<span class="vernacular">Definition</span> <span id="is_finite_pos0" class="id"><a name="is_finite_pos0" class="">is_finite_pos0</a></span> (<span id="f:7" class="id"><a name="f:7" class="">f:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:7">f</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_zero">B754_zero</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id">s</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_infinity">B754_infinity</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_nan">B754_nan</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_finite">B754_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Bsign_pos0" class="id"><a name="Bsign_pos0" class="">Bsign_pos0:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:9" class="id"><a name="x:9" class="">x,</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#is_finite_pos0">is_finite_pos0</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:9">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:9">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:9">x</a></span>) <span class="id">0</span>%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">x</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">[]</span> <span class="id">|</span> <span class="id">|</span> <span class="id">|</span> <span class="id">[]</span> <span class="id">ex</span> <span class="id">mx</span> <span class="id">Bx</span> <span class="id">];</span> <span class="id">try</span> <span class="id">discriminate;</span> <span class="id">simpl</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_false">Rlt_bool_false;</a></span> <span class="id">auto</span>. <span class="id">lra</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_true">Rlt_bool_true;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_lt_0">F2R_lt_0</a></span>. <span class="id">compute;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_false">Rlt_bool_false;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> ((<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">ex</span>) <span class="id">mx</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">0</span>)%<span class="id">R</span>) <span class="gallina-kwd">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;( <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_gt_0">F2R_gt_0;</a></span> <span class="id">compute;</span> <span class="id">auto</span> ).<br/>
&nbsp;&nbsp;<span class="id">lra</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="B2R_inj_pos0" class="id"><a name="B2R_inj_pos0" class="">B2R_inj_pos0:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:10" class="id"><a name="x:10" class="">x</a></span> <span id="y:11" class="id"><a name="y:11" class="">y,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#is_finite_pos0">is_finite_pos0</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:10">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#is_finite_pos0">is_finite_pos0</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:11">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:10">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:11">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#x:10">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:11">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R_Bsign_inj">B2R_Bsign_inj</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x;</span> <span class="id">reflexivity||discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">y;</span> <span class="id">reflexivity||discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bsign_pos0">Bsign_pos0</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Decidable equality </h2>
<br/>
<span class="vernacular">Definition</span> <span id="Beq_dec" class="id"><a name="Beq_dec" class="">Beq_dec:</a></span> <span class="gallina-kwd">forall</span> (<span id="f1:12" class="id"><a name="f1:12" class="">f1</a></span> <span id="f2:13" class="id"><a name="f2:13" class="">f2:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>)<span class="id">,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{f1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f2:13">f2}</a></span> <span class="id">+</span> <span class="id">{f1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f2:13">f2}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">UIP_bool:</span> <span class="gallina-kwd">forall</span> (<span id="b1:18" class="id"><span id="b1:14" class="id"><a name="b1:18" class="">b1</a></span></span> <span id="b2:19" class="id"><span id="b2:15" class="id"><a name="b2:19" class="">b2:</a></span></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span id="e:20" class="id"><span id="e:16" class="id"><a name="e:20" class="">e</a></span></span> <span id="e':21" class="id"><span id="e':17" class="id"><a name="e':21" class="">e':</a></span></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#b1:14">b1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#b2:15">b2</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:16">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e':17">e'</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Eqdep_dec.html#UIP_dec">UIP_dec</a></span>. <span class="id">decide</span> <span class="id">equality</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="vernacular">Ltac</span> <span class="id">try_not_eq</span> <span class="id">:=</span> <span class="id">try</span> <span class="id">solve</span> <span class="id">[right;</span> <span class="id">congruence]</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">f1</span> <span class="gallina-kwd">as</span> <span class="id">[s1|s1|s1</span> <span class="id">p1</span> <span class="id">H1|s1</span> <span class="id">m1</span> <span class="id">e1</span> <span class="id">H1],</span> <span class="id">f2</span> <span class="gallina-kwd">as</span> <span class="id">[s2|s2|s2</span> <span class="id">p2</span> <span class="id">H2|s2</span> <span class="id">m2</span> <span class="id">e2</span> <span class="id">H2];</span><br/>
&nbsp;&nbsp;<span class="id">try</span> <span class="id">destruct</span> <span class="id">s1;</span> <span class="id">try</span> <span class="id">destruct</span> <span class="id">s2;</span><br/>
&nbsp;&nbsp;<span class="id">try</span> <span class="id">solve</span> <span class="id">[left;</span> <span class="id">auto];</span> <span class="id">try_not_eq</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.eq_dec">Pos.eq_dec</a></span> <span class="id">p1</span> <span class="id">p2</span>)<span class="id">;</span> <span class="id">try_not_eq;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst;</span> <span class="id">left;</span> <span class="id">f_equal;</span> <span class="id">f_equal;</span> <span class="id">apply</span> <span class="id">UIP_bool</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.eq_dec">Pos.eq_dec</a></span> <span class="id">p1</span> <span class="id">p2</span>)<span class="id">;</span> <span class="id">try_not_eq;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst;</span> <span class="id">left;</span> <span class="id">f_equal;</span> <span class="id">f_equal;</span> <span class="id">apply</span> <span class="id">UIP_bool</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.eq_dec">Pos.eq_dec</a></span> <span class="id">m1</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">try_not_eq;</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eq_dec">Z.eq_dec</a></span> <span class="id">e1</span> <span class="id">e2</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">solve</span> <span class="id">[right;</span> <span class="id">intro</span> <span class="id">H;</span> <span class="id">inversion</span> <span class="id">H;</span> <span class="id">congruence];</span><br/>
&nbsp;&nbsp;<span class="id">subst;</span> <span class="id">left;</span> <span class="id">f_equal;</span> <span class="id">apply</span> <span class="id">UIP_bool</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.eq_dec">Pos.eq_dec</a></span> <span class="id">m1</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">try_not_eq;</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eq_dec">Z.eq_dec</a></span> <span class="id">e1</span> <span class="id">e2</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">solve</span> <span class="id">[right;</span> <span class="id">intro</span> <span class="id">H;</span> <span class="id">inversion</span> <span class="id">H;</span> <span class="id">congruence];</span><br/>
&nbsp;&nbsp;<span class="id">subst;</span> <span class="id">left;</span> <span class="id">f_equal;</span> <span class="id">apply</span> <span class="id">UIP_bool</span>.<br/>
Defined.</div>
<br/>
<h2> Conversion from an integer to a FP number </h2>
<br/>
<div class="doc">Integers that can be represented exactly as FP numbers. </div>
<br/>
<span class="vernacular">Definition</span> <span id="integer_representable" class="id"><a name="integer_representable" class="">integer_representable</a></span> (<span id="n:22" class="id"><a name="n:22" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:22">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:22">n</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="int_upper_bound_eq" class="id"><a name="int_upper_bound_eq" class="">int_upper_bound_eq:</a></span> <span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id">2^prec</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id">*</span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_,</span> <span class="id">prec_lt_emax_</span>.<br/>
&nbsp;&nbsp;<span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">replace</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>)%<span class="id">Z</span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="gallina-kwd">by</span> <span class="id">ring</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="integer_representable_n2p" class="id"><a name="integer_representable_n2p" class="">integer_representable_n2p:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:23" class="id"><a name="n:23" class="">n</a></span> <span id="p:24" class="id"><a name="p:24" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-2^prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:23">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id">2^prec</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:24">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:24">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:23">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">2^p</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">split</span>.<br/>
<span class="id">-</span> <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_,</span> <span class="id">prec_lt_emax_</span>. <span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> (<span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">2^p</span>)) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">2^p</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_upper_bound_eq">int_upper_bound_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat">Zmult_le_compat</a></span>. <span class="id">lia</span>. <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_le">Zpower_le</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_mul">Z.abs_mul</a></span>. <span class="id">f_equal</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span>. <span class="id">auto</span>. <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>).<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.FLT.html#generic_format_FLT">generic_format_FLT</a></span>. <span class="gallina-kwd">exists</span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">n</span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">emin,</span> <span class="id"><a href="Flocq.Core.Defs.html#Fexp">Fexp;</a></span> <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_,</span> <span class="id">prec_lt_emax_;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="integer_representable_2p" class="id"><a name="integer_representable_2p" class="">integer_representable_2p:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:25" class="id"><a name="p:25" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:25">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> (<span class="id">2^p</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">split</span>.<br/>
<span class="id">-</span> <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="gallina-kwd">by</span> (<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-1</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_le">Zpower_le</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-1</a></span>)<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*2</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">change</span> <span class="id">2</span> <span class="gallina-kwd">with</span> (<span class="id">2^1</span>) <span class="gallina-kwd">at</span> <span class="id">3</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>. <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_le">Zpower_le</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>). <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
<span class="id">-</span> <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_,</span> <span class="id">prec_lt_emax_</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.FLT.html#generic_format_FLT">generic_format_FLT</a></span>. <span class="gallina-kwd">exists</span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">1</span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span>. <span class="id">auto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">Z.abs</span>. <span class="id">change</span> <span class="id">1</span> <span class="gallina-kwd">with</span> (<span class="id">2^0</span>). <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_lt">Zpower_lt</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>). <span class="id">lia</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">emin,</span> <span class="id"><a href="Flocq.Core.Defs.html#Fexp">Fexp;</a></span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="integer_representable_opp" class="id"><a name="integer_representable_opp" class="">integer_representable_opp:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:26" class="id"><a name="n:26" class="">n,</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:26">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">n</span> (<span class="id">A</span> &amp; <span class="id">B</span>)<span class="id">;</span> <span class="id">split</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_opp">Z.abs_opp</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#opp_IZR">opp_IZR</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_opp">generic_format_opp;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="integer_representable_n2p_wide" class="id"><a name="integer_representable_n2p_wide" class="">integer_representable_n2p_wide:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:27" class="id"><a name="n:27" class="">n</a></span> <span id="p:28" class="id"><a name="p:28" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-2^prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:27">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id">2^prec</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:28">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:28">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:27">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">2^p</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eq_dec">Z.eq_dec</a></span> <span class="id">n</span> (<span class="id">2^prec</span>))<span class="id">;</span> <span class="id">[idtac</span> <span class="id">|</span> <span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eq_dec">Z.eq_dec</a></span> <span class="id">n</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-2^prec</a></span>))<span class="id">]</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">e</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_2p">integer_representable_2p</a></span>. <span class="id">lia</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">e</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_mult_distr_l">Zopp_mult_distr_l</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_opp">integer_representable_opp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_2p">integer_representable_2p</a></span>. <span class="id">lia</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_n2p">integer_representable_n2p;</a></span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="integer_representable_n" class="id"><a name="integer_representable_n" class="">integer_representable_n:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:29" class="id"><a name="n:29" class="">n,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-2^prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:29">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id">2^prec</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:29">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_,</span> <span class="id">prec_lt_emax_</span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id">n</span> <span class="gallina-kwd">with</span> (<span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">2^0</span>) <span class="gallina-kwd">by</span> (<span class="id">change</span> (<span class="id">2^0</span>) <span class="gallina-kwd">with</span> <span class="id">1;</span> <span class="id">ring</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_n2p_wide">integer_representable_n2p_wide</a></span>. <span class="id">auto</span>. <span class="id">lia</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="round_int_no_overflow" class="id"><a name="round_int_no_overflow" class="">round_int_no_overflow:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:30" class="id"><a name="n:30" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:30">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:30">n</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_,</span> <span class="id">prec_lt_emax_</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Round_NE.html#round_NE_abs">round_NE_abs</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>))).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le_generic">round_le_generic</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#fexp_correct">fexp_correct;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.FLT.html#generic_format_FLT">generic_format_FLT</a></span>. <span class="gallina-kwd">exists</span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id">2^prec-1</span>) (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_upper_bound_eq">int_upper_bound_eq</a></span>. <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">2^prec</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>)<span class="id">;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#Fnum">Fnum;</a></span> <span class="id">simpl;</span> <span class="id">zify;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">emin,</span> <span class="id"><a href="Flocq.Core.Defs.html#Fexp">Fexp;</a></span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#abs_IZR">abs_IZR</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>)) <span class="gallina-kwd">by</span> (<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>)<span class="id">;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#fexp_correct">fexp_correct</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Conversion from an integer.  Round to nearest. </div>
<br/>
<span class="vernacular">Definition</span> <span id="BofZ" class="id"><a name="BofZ" class="">BofZ</a></span> (<span id="n:31" class="id"><a name="n:31" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#binary_normalize">binary_normalize</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:31">n</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="BofZ_correct" class="id"><a name="BofZ_correct" class="">BofZ_correct:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:32" class="id"><a name="n:32" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:32">n</a></span>))) (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:32">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:32">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:32">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:32">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb">Z.ltb</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:32">n</a></span> <span class="id">0</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2FF">B2FF</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:32">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#binary_overflow">binary_overflow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb">Z.ltb</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:32">n</a></span> <span class="id">0</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#binary_normalize_correct">binary_normalize_correct</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> <span class="id">n</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin;</a></span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp;</a></span> <span class="id">fold</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id">{|</span> <span class="id"><a href="Flocq.Core.Defs.html#Fnum">Fnum</a></span> <span class="id">:=</span> <span class="id">n;</span> <span class="id"><a href="Flocq.Core.Defs.html#Fexp">Fexp</a></span> <span class="id">:=</span> <span class="id">0</span> <span class="id">|}</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
<span class="id">-</span> <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="id">split;</span> <span class="id">[|split]</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">rewrite</span> <span class="id">C</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_IZR">Rcompare_IZR</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb">Z.ltb</a></span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span> <span class="id">A;</span> <span class="id">rewrite</span> <span class="id">A</span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> <span class="id">n</span> <span class="id">0</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">SPEC;</span> <span class="id">inversion</span> <span class="id">SPEC</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_true">Rlt_bool_true;</a></span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_false">Rlt_bool_false;</a></span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>. <span class="id">ring</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="BofZ_finite" class="id"><a name="BofZ_finite" class="">BofZ_finite:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:33" class="id"><a name="n:33" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:33">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:33">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:33">n</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:33">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:33">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb">Z.ltb</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:33">n</a></span> <span class="id">0</span>%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_correct">BofZ_correct</a></span> <span class="id">n</span>). <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_true">Rlt_bool_true</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#round_int_no_overflow">round_int_no_overflow;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="BofZ_representable" class="id"><a name="BofZ_representable" class="">BofZ_representable:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:34" class="id"><a name="n:34" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:34">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:34">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:34">n</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:34">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:34">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:34">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id">0</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span> <span class="gallina-kwd">as</span> (<span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_finite">BofZ_finite</a></span> <span class="id">n</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intuition</span>. <span class="id">rewrite</span> <span class="id">A</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#valid_rnd_round_mode">valid_rnd_round_mode</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="BofZ_exact" class="id"><a name="BofZ_exact" class="">BofZ_exact:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:35" class="id"><a name="n:35" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-2^prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:35">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id">2^prec</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:35">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:35">n</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:35">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:35">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb">Z.ltb</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:35">n</a></span> <span class="id">0</span>%<span class="id">Z</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_representable">BofZ_representable</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_n">integer_representable_n;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="BofZ_finite_pos0" class="id"><a name="BofZ_finite_pos0" class="">BofZ_finite_pos0:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:36" class="id"><a name="n:36" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:36">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#is_finite_pos0">is_finite_pos0</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:36">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#binary_normalize_correct">binary_normalize_correct</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> <span class="id">n</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin;</a></span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp;</a></span> <span class="id">fold</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id">{|</span> <span class="id"><a href="Flocq.Core.Defs.html#Fnum">Fnum</a></span> <span class="id">:=</span> <span class="id">n;</span> <span class="id"><a href="Flocq.Core.Defs.html#Fexp">Fexp</a></span> <span class="id">:=</span> <span class="id">0</span> <span class="id">|}</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">n</span>) <span class="gallina-kwd">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl;</span> <span class="id">ring</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_true">Rlt_bool_true</a></span> <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#round_int_no_overflow">round_int_no_overflow;</a></span> <span class="id">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">n</span>)<span class="id">;</span> <span class="id">auto;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">rewrite</span> <span class="id">C</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_IZR">Rcompare_IZR</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zcompare_spec">Zcompare_spec</a></span> <span class="id">n</span> <span class="id">0</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">SPEC;</span> <span class="id">destruct</span> <span class="id">SPEC;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> ((<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> <span class="id"><a href="Flocq.Core.Round_NE.html#ZnearestE">ZnearestE</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">n</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id">-1</span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le_generic">round_le_generic</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#fexp_correct">fexp_correct</a></span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_opp">integer_representable_opp</a></span> <span class="id">1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_2p">integer_representable_2p</a></span> <span class="id">0</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_,</span> <span class="id">prec_lt_emax_;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le;</a></span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">lra</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="BofZ_finite_equal" class="id"><a name="BofZ_finite_equal" class="">BofZ_finite_equal:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:37" class="id"><a name="x:37" class="">x</a></span> <span id="y:38" class="id"><a name="y:38" class="">y,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:37">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:38">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:37">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:38">y</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:37">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:38">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#B2R_inj_pos0">B2R_inj_pos0;</a></span> <span class="id">auto;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_finite_pos0">BofZ_finite_pos0;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Commutation properties with addition, subtraction, multiplication. </div>
<br/>
<span class="vernacular">Theorem</span> <span id="BofZ_plus" class="id"><a name="BofZ_plus" class="">BofZ_plus:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="nan:39" class="id"><a name="nan:39" class="">nan</a></span> <span id="p:40" class="id"><a name="p:40" class="">p</a></span> <span id="q:41" class="id"><a name="q:41" class="">q,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:40">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:41">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#Bplus">Bplus</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#nan:39">nan</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:40">p</a></span>) (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:41">q</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#p:40">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:41">q</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_representable">BofZ_representable</a></span> <span class="id">p</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_representable">BofZ_representable</a></span> <span class="id">q</span>) <span class="gallina-kwd">as</span> (<span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bplus_correct">Bplus_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">nan</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">p</span>) (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">q</span>) <span class="id">B</span> <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin;</a></span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">A,</span> <span class="id">D</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_correct">BofZ_correct</a></span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">q</span>)). <span class="id">destruct</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
<span class="id">-</span> <span class="id">intros</span> (<span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>) (<span class="id">U</span> &amp; <span class="id">V</span> &amp; <span class="id">W</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R_Bsign_inj">B2R_Bsign_inj;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">P,</span> <span class="id">U;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">R,</span> <span class="id">W,</span> <span class="id">C,</span> <span class="id">F</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_IZR">Rcompare_IZR</a></span>. <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb">Z.ltb</a></span> <span class="gallina-kwd">at</span> <span class="id">3</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zcompare_spec">Zcompare_spec</a></span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">q</span>) <span class="id">0</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">SPEC;</span> <span class="id">inversion</span> <span class="id">SPEC;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EITHER:</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">q</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">EITHER;</span> <span class="id">[apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_intro1">andb_false_intro1</a></span> <span class="id">|</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_intro2">andb_false_intro2];</a></span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_false">Zlt_bool_false;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span> <span class="id">P</span> (<span class="id">U</span> &amp; <span class="id">V</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2FF_inj">B2FF_inj</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">P,</span> <span class="id">U,</span> <span class="id">C</span>. <span class="id">f_equal</span>. <span class="id">rewrite</span> <span class="id">C,</span> <span class="id">F</span> <span class="gallina-kwd">in</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_spec">Zlt_bool_spec</a></span> <span class="id">p</span> <span class="id">0</span>) (<span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_spec">Zlt_bool_spec</a></span> <span class="id">q</span> <span class="id">0</span>). <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">SPEC1</span> <span class="id">SPEC2;</span> <span class="id">inversion</span> <span class="id">SPEC1;</span> <span class="id">inversion</span> <span class="id">SPEC2;</span> <span class="id">try</span> <span class="id">congruence;</span> <span class="id">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_true">Zlt_bool_true;</a></span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_false">Zlt_bool_false;</a></span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="BofZ_minus" class="id"><a name="BofZ_minus" class="">BofZ_minus:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="nan:42" class="id"><a name="nan:42" class="">nan</a></span> <span id="p:43" class="id"><a name="p:43" class="">p</a></span> <span id="q:44" class="id"><a name="q:44" class="">q,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:43">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:44">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#Bminus">Bminus</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#nan:42">nan</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:43">p</a></span>) (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:44">q</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#p:43">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:44">q</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_representable">BofZ_representable</a></span> <span class="id">p</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_representable">BofZ_representable</a></span> <span class="id">q</span>) <span class="gallina-kwd">as</span> (<span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bminus_correct">Bminus_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">nan</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">p</span>) (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">q</span>) <span class="id">B</span> <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin;</a></span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">A,</span> <span class="id">D</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#minus_IZR">minus_IZR</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_correct">BofZ_correct</a></span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">q</span>)). <span class="id">destruct</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
<span class="id">-</span> <span class="id">intros</span> (<span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>) (<span class="id">U</span> &amp; <span class="id">V</span> &amp; <span class="id">W</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R_Bsign_inj">B2R_Bsign_inj;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">P,</span> <span class="id">U;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">R,</span> <span class="id">W,</span> <span class="id">C,</span> <span class="id">F</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_IZR">Rcompare_IZR</a></span>. <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb">Z.ltb</a></span> <span class="gallina-kwd">at</span> <span class="id">3</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zcompare_spec">Zcompare_spec</a></span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">q</span>) <span class="id">0</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">SPEC;</span> <span class="id">inversion</span> <span class="id">SPEC;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EITHER:</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">q</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">0</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">EITHER;</span> <span class="id">[apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_intro1">andb_false_intro1</a></span> <span class="id">|</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_intro2">andb_false_intro2]</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_false">Zlt_bool_false;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_true">Zlt_bool_true;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span> <span class="id">P</span> (<span class="id">U</span> &amp; <span class="id">V</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2FF_inj">B2FF_inj</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">P,</span> <span class="id">U,</span> <span class="id">C</span>. <span class="id">f_equal</span>. <span class="id">rewrite</span> <span class="id">C,</span> <span class="id">F</span> <span class="gallina-kwd">in</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_spec">Zlt_bool_spec</a></span> <span class="id">p</span> <span class="id">0</span>) (<span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_spec">Zlt_bool_spec</a></span> <span class="id">q</span> <span class="id">0</span>). <span class="id">rewrite</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">SPEC1</span> <span class="id">SPEC2;</span> <span class="id">inversion</span> <span class="id">SPEC1;</span> <span class="id">inversion</span> <span class="id">SPEC2;</span> <span class="id">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H3</span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_true">Zlt_bool_true;</a></span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_false">Zlt_bool_false;</a></span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H3</span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="BofZ_mult" class="id"><a name="BofZ_mult" class="">BofZ_mult:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="nan:45" class="id"><a name="nan:45" class="">nan</a></span> <span id="p:46" class="id"><a name="p:46" class="">p</a></span> <span id="q:47" class="id"><a name="q:47" class="">q,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:46">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:47">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:47">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult">Bmult</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#nan:45">nan</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:46">p</a></span>) (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:47">q</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#p:46">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:47">q</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">SIGN:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#xorb">xorb</a></span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id">0</span>) (<span class="id">q</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id">0</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">q</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id">0</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_false">Zlt_bool_false</a></span> <span class="id">q</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_spec">Zlt_bool_spec</a></span> <span class="id">p</span> <span class="id">0</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">SPEC;</span> <span class="id">inversion</span> <span class="id">SPEC;</span> <span class="id">simpl;</span> <span class="id">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_true">Zlt_bool_true</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_comm">Z.mul_comm</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_pos_neg">Z.mul_pos_neg</a></span><span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_false">Zlt_bool_false</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zsame_sign_imp">Zsame_sign_imp;</a></span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_representable">BofZ_representable</a></span> <span class="id">p</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_representable">BofZ_representable</a></span> <span class="id">q</span>) <span class="gallina-kwd">as</span> (<span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult_correct">Bmult_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">nan</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">p</span>) (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">q</span>)).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin;</a></span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">A,</span> <span class="id">B,</span> <span class="id">C,</span> <span class="id">D,</span> <span class="id">E,</span> <span class="id">F</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_correct">BofZ_correct</a></span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">q</span>)). <span class="id">destruct</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
<span class="id">-</span> <span class="id">intros</span> (<span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>) (<span class="id">U</span> &amp; <span class="id">V</span> &amp; <span class="id">W</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R_Bsign_inj">B2R_Bsign_inj;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">P,</span> <span class="id">U;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">R,</span> <span class="id">W;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#is_finite_not_is_nan">is_finite_not_is_nan;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span> <span class="id">P</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2FF_inj">B2FF_inj</a></span>. <span class="id">rewrite</span> <span class="id">P,</span> <span class="id">U</span>. <span class="id">f_equal</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="BofZ_mult_2p" class="id"><a name="BofZ_mult_2p" class="">BofZ_mult_2p:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="nan:48" class="id"><a name="nan:48" class="">nan</a></span> <span id="x:49" class="id"><a name="x:49" class="">x</a></span> <span id="p:50" class="id"><a name="p:50" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:49">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">2^prec</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:49">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:50">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult">Bmult</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#nan:48">nan</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:49">x</a></span>) (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> (<span class="id">2^p</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#x:49">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">2^p</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eq_dec">Z.eq_dec</a></span> <span class="id">x</span> <span class="id">0</span>).<br/>
<span class="id">-</span> <span class="id">subst</span> <span class="id">x</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_mult">BofZ_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_n">integer_representable_n</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>). <span class="id">simpl;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_2p">integer_representable_2p</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>%<span class="id">R</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_neq">IZR_neq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_finite">BofZ_finite</a></span> <span class="id">x</span> <span class="id">H</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_representable">BofZ_representable</a></span> (<span class="id">2^p</span>)) <span class="gallina-kwd">as</span> (<span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_2p">integer_representable_2p</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">2^p</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp,</a></span> <span class="id">fexp</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id">2^p</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2^p</a></span>). <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_mult_bpow">mag_mult_bpow</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag_abs">mag_abs</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag_bpow">mag_bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_le">mag_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="gallina-kwd">by</span> (<span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_;lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#abs_IZR">abs_IZR</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le;</a></span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">emin;</span> <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_;</span> <span class="id">zify;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="m:52" class="id"><span id="m:51" class="id"><a name="m:52" class="">m,</a></span></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:51">m</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id">2^p</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:51">m</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">2^p</span>)))%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>. <span class="id">rewrite</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.opp_add_distr">Z.opp_add_distr</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set</span> (<span class="id">a</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">x</span>)<span class="id">;</span> <span class="id">set</span> (<span class="id">b</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> <span class="id">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">a</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id">2^p</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> (<span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>)))%<span class="id">R</span> <span class="gallina-kwd">with</span> (<span class="id">a</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id">b</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.  <span class="id">f_equal</span>. <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> ((<span class="id">a</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id">b</span>) <span class="id">*</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id">2^p</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>)))%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>). <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>) <span class="gallina-kwd">with</span> <span class="id">0</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">change</span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">0</span>) <span class="gallina-kwd">with</span> <span class="id">1</span>%<span class="id">R</span>. <span class="id">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ring</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="m:55" class="id"><span id="m:53" class="id"><a name="m:55" class="">m</a></span></span> <span id="x:56" class="id"><span id="x:54" class="id"><a name="x:56" class="">x,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:53">m</a></span>) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:53">m</a></span>) <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:54">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:53">m</a></span>) <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:54">x</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#valid_rnd_round_mode">valid_rnd_round_mode</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_format_round">generic_format_round</a></span>.  <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#fexp_correct">fexp_correct;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#valid_rnd_round_mode">valid_rnd_round_mode</a></span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#xorb">xorb</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id">0</span>) (<span class="id">2^p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id">0</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">2^p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id">0</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">2^p</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>)<span class="id">;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_false">Zlt_bool_false</a></span> (<span class="id">2^p</span>)) <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#xorb_false_r">xorb_false_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_spec">Zlt_bool_spec</a></span> <span class="id">x</span> <span class="id">0</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">SPEC;</span> <span class="id">inversion</span> <span class="id">SPEC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_true">Zlt_bool_true</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_neg_pos">Z.mul_neg_pos</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_false">Zlt_bool_false</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_nonneg_nonneg">Z.mul_nonneg_nonneg</a></span><span class="id">;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult_correct">Bmult_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">nan</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> (<span class="id">2^p</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_correct">BofZ_correct</a></span> (<span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">2^p</span>)).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin;</a></span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span>. <span class="id">rewrite</span> <span class="id">A,</span> <span class="id">B,</span> <span class="id">C,</span> <span class="id">D,</span> <span class="id">E,</span> <span class="id">F,</span> <span class="id">H4,</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
<span class="id">+</span> <span class="id">intros</span> (<span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>) (<span class="id">U</span> &amp; <span class="id">V</span> &amp; <span class="id">W</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R_Bsign_inj">B2R_Bsign_inj;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">P,</span> <span class="id">U</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">R,</span> <span class="id">W</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#is_finite_not_is_nan">is_finite_not_is_nan;</a></span> <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">intros</span> <span class="id">P</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2FF_inj">B2FF_inj</a></span>. <span class="id">rewrite</span> <span class="id">P,</span> <span class="id">U</span>. <span class="id">f_equal;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Rounding to odd the argument of <span class="bracket"><span class="id">BofZ</span></span>. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="round_odd_flt" class="id"><a name="round_odd_flt" class="">round_odd_flt:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="prec':57" class="id"><a name="prec':57" class="">prec'</a></span> <span id="emin':58" class="id"><a name="emin':58" class="">emin'</a></span> <span id="x:59" class="id"><a name="x:59" class="">x</a></span> <span id="choice:60" class="id"><a name="choice:60" class="">choice,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#prec':57">prec'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#prec':57">prec'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin':58">emin'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#choice:60">choice</a></span>) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin':58">emin'</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#prec':57">prec'</a></span>) <span class="id"><a href="Flocq.Prop.Round_odd.html#Zrnd_odd">Zrnd_odd</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:59">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#choice:60">choice</a></span>) <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:59">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Prop.Round_odd.html#round_N_odd">round_N_odd</a></span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#fexp_correct">fexp_correct;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.FLT.html#exists_NE_FLT">exists_NE_FLT</a></span>. <span class="id">right;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>. <span class="id">red;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.FLT.html#exists_NE_FLT">exists_NE_FLT</a></span>. <span class="id">right;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">fexp,</span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp;</a></span> <span class="id">intros</span>. <span class="id">zify;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Corollary</span> <span id="round_odd_fix" class="id"><a name="round_odd_fix" class="">round_odd_fix:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:61" class="id"><a name="x:61" class="">x</a></span> <span id="p:62" class="id"><a name="p:62" class="">p</a></span> <span id="choice:63" class="id"><a name="choice:63" class="">choice,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:62">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:62">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:61">x</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#choice:63">choice</a></span>) (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="Flocq.Core.FIX.html#FIX_exp">FIX_exp</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:62">p</a></span>) <span class="id"><a href="Flocq.Prop.Round_odd.html#Zrnd_odd">Zrnd_odd</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:61">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#choice:63">choice</a></span>) <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:61">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_EM_T">Req_EM_T</a></span> <span class="id">x</span> <span class="id">0</span>%<span class="id">R</span>).<br/>
<span class="id">-</span> <span class="id">subst</span> <span class="id">x</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Prop.Round_odd.html#valid_rnd_odd">valid_rnd_odd</a></span>.<br/>
<span class="id">-</span> <span class="id">set</span> (<span class="id">prec'</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">emin'</span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">PREC:</span> <span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag_abs">mag_abs</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_le">mag_le;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_bpow">mag_bpow</a></span> <span class="gallina-kwd">in</span> <span class="id">PREC</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">CANON:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin'</span> <span class="id">prec'</span>) <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="Flocq.Core.FIX.html#FIX_exp">FIX_exp</a></span> <span class="id">p</span>) <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp,</a></span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp,</a></span> <span class="id"><a href="Flocq.Core.FIX.html#FIX_exp">FIX_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="Flocq.Core.Raux.html#mag">mag</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">prec'</span>) <span class="gallina-kwd">with</span> <span class="id">p</span> <span class="gallina-kwd">by</span> (<span class="id">unfold</span> <span class="id">prec';</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max_l">Z.max_l</a></span>. <span class="id">unfold</span> <span class="id">emin',</span> <span class="id">emin</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_,</span> <span class="id">prec_lt_emax_;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">RND:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="Flocq.Core.FIX.html#FIX_exp">FIX_exp</a></span> <span class="id">p</span>) <span class="id"><a href="Flocq.Prop.Round_odd.html#Zrnd_odd">Zrnd_odd</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin'</span> <span class="id">prec'</span>) <span class="id"><a href="Flocq.Prop.Round_odd.html#Zrnd_odd">Zrnd_odd</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>. <span class="id">rewrite</span> <span class="id">CANON</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">RND</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#round_odd_flt">round_odd_flt</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">prec'</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">prec'</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">emin'</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="int_round_odd" class="id"><a name="int_round_odd" class="">int_round_odd</a></span> (<span id="x:64" class="id"><a name="x:64" class="">x:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span id="p:65" class="id"><a name="p:65" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eqb">Z.eqb</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#x:64">x</a></span> <span class="id">mod</span> <span class="id">2^p</span>) <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185">||</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.odd">Z.odd</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#x:64">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3c2652250c7a120d67ccc0e8f58ae75">/</a></span> <span class="id">2^p</span>) <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:64">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3c2652250c7a120d67ccc0e8f58ae75">/</a></span> <span class="id">2^p</span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:64">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3c2652250c7a120d67ccc0e8f58ae75">/</a></span> <span class="id">2^p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id">*</span> <span class="id">2^p</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Zrnd_odd_int" class="id"><a name="Zrnd_odd_int" class="">Zrnd_odd_int:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:66" class="id"><a name="n:66" class="">n</a></span> <span id="p:67" class="id"><a name="p:67" class="">p,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:67">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Prop.Round_odd.html#Zrnd_odd">Zrnd_odd</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:66">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">2^p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:66">n</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:67">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">clear</span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">2^p</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>)<span class="id">;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3c2652250c7a120d67ccc0e8f58ae75">/</a></span> <span class="id">2^p</span>) <span class="id">*</span> <span class="id">2^p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">n</span> <span class="id">mod</span> <span class="id">2^p</span>) <span class="gallina-kwd">by</span> (<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_comm">Z.mul_comm</a></span><span class="id">;</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.div_mod">Z.div_mod</a></span><span class="id">;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id">n</span> <span class="id">mod</span> <span class="id">2^p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id">2^p</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_mod_lt">Z_mod_lt;</a></span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span>. <span class="id">set</span> (<span class="id">q</span> <span class="id">:=</span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3c2652250c7a120d67ccc0e8f58ae75">/</a></span> <span class="id">2^p</span>) <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">set</span> (<span class="id">r</span> <span class="id">:=</span> <span class="id">n</span> <span class="id">mod</span> <span class="id">2^p</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">1</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>. <span class="id">replace</span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>) <span class="gallina-kwd">with</span> <span class="id">0</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">q</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">r</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>))%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">H1</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id">2^p</span>)) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2^p</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>. <span class="id">rewrite</span> <span class="id">H4</span>. <span class="id">ring</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">r</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">p</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le;</a></span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt;</a></span> <span class="id">tauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">r</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id">1</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>)). <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos;</a></span> <span class="id">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H4</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>. <span class="id">auto</span>. <span class="id">tauto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">q</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_imp">Zfloor_imp</a></span>. <span class="id">rewrite</span> <span class="id">H5</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>. <span class="id">lra</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Prop.Round_odd.html#Zrnd_odd">Zrnd_odd</a></span>. <span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_EM_T">Req_EM_T</a></span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">r</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">H8</span> <span class="gallina-kwd">in</span> <span class="id">e</span>. <span class="id">rewrite</span> <span class="id">e</span> <span class="gallina-kwd">in</span> <span class="id">H5</span>. <span class="id">lra</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_integral">Rmult_integral</a></span> <span class="gallina-kwd">in</span> <span class="id">H9</span>. <span class="id">destruct</span> <span class="id">H9;</span> <span class="id">[</span> <span class="id">|</span> <span class="id">lra</span> <span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#eq_IZR">eq_IZR</a></span> <span class="id">r</span> <span class="id">0</span>) <span class="gallina-kwd">in</span> <span class="id">H9</span>. <span class="id">apply</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eqb_eq">Z.eqb_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">H9</span>. <span class="id">rewrite</span> <span class="id">H9</span>. <span class="id">assumption</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">r</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">H8</span> <span class="gallina-kwd">in</span> <span class="id">n0</span>. <span class="id">lra</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eqb">Z.eqb</a></span> <span class="id">r</span> <span class="id">0</span>) <span class="id">eqn:RZ</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eqb_eq">Z.eqb_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">RZ</span>. <span class="id">rewrite</span> <span class="id">RZ</span> <span class="gallina-kwd">in</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> <span class="gallina-kwd">in</span> <span class="id">H9</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span> <span class="gallina-kwd">by</span> <span class="id">lra</span>. <span class="id">rewrite</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zeven.html#Zeven">Zeven</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.even">Z.even</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zeven.html#Zodd_even_bool">Zodd_even_bool</a></span>. <span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.even">Z.even</a></span> <span class="id">q</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="int_round_odd_le" class="id"><a name="int_round_odd_le" class="">int_round_odd_le:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:68" class="id"><a name="p:68" class="">p</a></span> <span id="x:69" class="id"><a name="x:69" class="">x</a></span> <span id="y:70" class="id"><a name="y:70" class="">y,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:68">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#x:69">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:70">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:69">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:68">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:70">y</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:68">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">clear</span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="Flocq.Prop.Round_odd.html#Zrnd_odd">Zrnd_odd</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="Flocq.Prop.Round_odd.html#Zrnd_odd">Zrnd_odd</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">y</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-p</a></span>))).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Zrnd_le">Zrnd_le</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Prop.Round_odd.html#valid_rnd_odd">valid_rnd_odd</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le;</a></span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Zrnd_odd_int">Zrnd_odd_int</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat_r">Zmult_le_compat_r</a></span>. <span class="id">auto</span>. <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>).<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="int_round_odd_exact" class="id"><a name="int_round_odd_exact" class="">int_round_odd_exact:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:71" class="id"><a name="p:71" class="">p</a></span> <span id="x:72" class="id"><a name="x:72" class="">x,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:71">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id">2^p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:72">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:72">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:71">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:72">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">clear</span>. <span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znumtheory.html#Zdivide_mod">Znumtheory.Zdivide_mod</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_comm">Z.mul_comm</a></span>. <span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_exact_2">Z_div_exact_2</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_gt">Z.lt_gt</a></span>. <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>). <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="BofZ_round_odd" class="id"><a name="BofZ_round_odd" class="">BofZ_round_odd:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:73" class="id"><a name="x:73" class="">x</a></span> <span id="p:74" class="id"><a name="p:74" class="">p,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:73">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:74">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:74">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:73">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:73">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:73">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:74">p</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span> <span class="id">p</span> <span class="id">PREC</span> <span class="id">XRANGE</span> <span class="id">PRANGE</span> <span class="id">XGE</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">DIV:</span> (<span class="id">2^p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>))).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_upper_bound_eq">int_upper_bound_eq</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_mul_r">Z.divide_mul_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">p</span>)). <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">f_equal;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">YRANGE:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> <span class="id">x</span> <span class="id">p</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_le">Z.abs_le</a></span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span>(<span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>))) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span>(<span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>))) <span class="id">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd_le">int_round_odd_le;</a></span> <span class="id">zify;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd_exact">int_round_odd_exact</a></span>. <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_opp_r">Z.divide_opp_r</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>)) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> (<span class="id">2^emax</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">2^</span>(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax-prec</a></span>)) <span class="id">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd_le">int_round_odd_le;</a></span> <span class="id">zify;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd_exact">int_round_odd_exact</a></span>. <span class="id">lia</span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_finite">BofZ_finite</a></span> <span class="id">x</span> <span class="id">XRANGE</span>) <span class="gallina-kwd">as</span> (<span class="id">X1</span> &amp; <span class="id">X2</span> &amp; <span class="id">X3</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_finite">BofZ_finite</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> <span class="id">x</span> <span class="id">p</span>) <span class="id">YRANGE</span>) <span class="gallina-kwd">as</span> (<span class="id">Y1</span> &amp; <span class="id">Y2</span> &amp; <span class="id">Y3</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_finite_equal">BofZ_finite_equal;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">X1,</span> <span class="id">Y1</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> <span class="id">x</span> <span class="id">p</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="Flocq.Core.FIX.html#FIX_exp">FIX_exp</a></span> <span class="id">p</span>) <span class="id"><a href="Flocq.Prop.Round_odd.html#Zrnd_odd">Zrnd_odd</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa,</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp,</a></span> <span class="id"><a href="Flocq.Core.FIX.html#FIX_exp">FIX_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Zrnd_odd_int">Zrnd_odd_int</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>. <span class="id">f_equal</span>. <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span>. <span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#round_odd_fix">round_odd_fix</a></span>. <span class="id">auto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#abs_IZR">abs_IZR</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="int_round_odd_shifts" class="id"><a name="int_round_odd_shifts" class="">int_round_odd_shifts:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:75" class="id"><a name="x:75" class="">x</a></span> <span id="p:76" class="id"><a name="p:76" class="">p,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:76">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:75">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:76">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftl">Z.shiftl</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eqb">Z.eqb</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#x:75">x</a></span> <span class="id">mod</span> <span class="id">2^p</span>) <span class="id">0</span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftr">Z.shiftr</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:75">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:76">p</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lor">Z.lor</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftr">Z.shiftr</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:75">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:76">p</a></span>) <span class="id">1</span>) <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:76">p</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">clear</span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftl_mul_pow2">Z.shiftl_mul_pow2</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftr_div_pow2">Z.shiftr_div_pow2</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">x</span> <span class="id">mod</span> <span class="id">2^p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b">=?</a></span> <span class="id">0</span>) <span class="id">eqn:E</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="gallina-kwd">forall</span> <span id="n:78" class="id"><span id="n:77" class="id"><a name="n:78" class="">n,</a></span></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.odd">Z.odd</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:77">n</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:77">n</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:77">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id">=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lor">Z.lor</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:77">n</a></span> <span class="id">1</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">destruct</span> <span class="id">n;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">p0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">p0;</span> <span class="id">auto</span>. <span class="id">induction</span> <span class="id">p0;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id">H0</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="int_round_odd_bits" class="id"><a name="int_round_odd_bits" class="">int_round_odd_bits:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:79" class="id"><a name="x:79" class="">x</a></span> <span id="y:80" class="id"><a name="y:80" class="">y</a></span> <span id="p:81" class="id"><a name="p:81" class="">p,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:81">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:82" class="id"><a name="i:82" class="">i,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#i:82">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:81">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.testbit">Z.testbit</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:80">y</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#i:82">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.testbit">Z.testbit</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:80">y</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:81">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eqb">Z.eqb</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#x:79">x</a></span> <span class="id">mod</span> <span class="id">2^p</span>) <span class="id">0</span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.testbit">Z.testbit</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:79">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:81">p</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:83" class="id"><a name="i:83" class="">i,</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:81">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#i:83">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.testbit">Z.testbit</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:80">y</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#i:83">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.testbit">Z.testbit</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:79">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#i:83">i</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd">int_round_odd</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:79">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:81">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:80">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="id">clear</span>. <span class="id">intros</span> <span class="id">until</span> <span class="id">p;</span> <span class="id">intros</span> <span class="id">PPOS</span> <span class="id">BELOW</span> <span class="id">AT</span> <span class="id">ABOVE</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#int_round_odd_shifts">int_round_odd_shifts</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.bits_inj'">Z.bits_inj</a></span><span class="id">'</span>. <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zcompare_spec">Zcompare_spec</a></span> <span class="id">n</span> <span class="id">p</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">SPEC;</span> <span class="id">inversion</span> <span class="id">SPEC</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">BELOW</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftl_spec_low">Z.shiftl_spec_low</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">subst</span> <span class="id">n</span>. <span class="id">rewrite</span> <span class="id">AT</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftl_spec_high">Z.shiftl_spec_high</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">p</span>) <span class="gallina-kwd">with</span> <span class="id">0</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">x</span> <span class="id">mod</span> <span class="id">2^p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b">=?</a></span> <span class="id">0</span>).<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftr_spec">Z.shiftr_spec</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">f_equal;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lor_spec">Z.lor_spec</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_r">orb_true_r</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">ABOVE</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.  <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftl_spec_high">Z.shiftl_spec_high</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">x</span> <span class="id">mod</span> <span class="id">2^p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b">=?</a></span> <span class="id">0</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftr_spec">Z.shiftr_spec</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">f_equal;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lor_spec">Z.lor_spec</a></span><span class="id">,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftr_spec">Z.shiftr_spec</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id">1</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ones">Z.ones</a></span> <span class="id">1</span>). <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ones_spec_high">Z.ones_spec_high</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#orb_false_r">orb_false_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">f_equal;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<h2> Conversion from a FP number to an integer </h2>
<br/>
<div class="doc">Always rounds toward zero. </div>
<br/>
<span class="vernacular">Definition</span> <span id="ZofB" class="id"><a name="ZofB" class="">ZofB</a></span> (<span id="f:84" class="id"><a name="f:84" class="">f:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:84">f</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_finite">B754_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">s</span> <span class="id">m</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">e</span>) <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#cond_Zopp">cond_Zopp</a></span> <span class="id">s</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">m</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">e</span>)%<span class="id">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_finite">B754_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">s</span> <span class="id">m</span> <span class="id">0</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#cond_Zopp">cond_Zopp</a></span> <span class="id">s</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">m</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_finite">B754_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">s</span> <span class="id">m</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zneg">Zneg</a></span> <span class="id">e</span>) <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#cond_Zopp">cond_Zopp</a></span> <span class="id">s</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3c2652250c7a120d67ccc0e8f58ae75">/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">e</span>))%<span class="id">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_zero">B754_zero</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">0</span>%<span class="id">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="ZofB_correct" class="id"><a name="ZofB_correct" class="">ZofB_correct:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:86" class="id"><a name="f:86" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:86">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:86">f</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:86">f</a></span>)) <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">f</span> <span class="gallina-kwd">as</span> <span class="id">[s|s|s</span> <span class="id">p</span> <span class="id">H|s</span> <span class="id">m</span> <span class="id">e</span> <span class="id">H];</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">f_equal</span>. <span class="id">symmetry</span>. <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span> <span class="id">0</span>).<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">e;</span> <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_cond_Zopp">IZR_cond_Zopp</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#cond_Ropp_mult_l">cond_Ropp_mult_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EQ:</span> <span class="gallina-kwd">forall</span> <span id="x:88" class="id"><span id="x:87" class="id"><a name="x:88" class="">x,</a></span></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#cond_Ropp">cond_Ropp</a></span> <span class="id">s</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:87">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#cond_Zopp">cond_Zopp</a></span> <span class="id">s</span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:87">x</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">s;</span> <span class="id">simpl;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_opp">Ztrunc_opp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ</span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_pos_gt_0">Zpower_pos_gt_0</a></span> <span class="id">2</span> <span class="id">p</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id">_</span>))<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_floor">Ztrunc_floor</a></span>. <span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_div">Zfloor_div</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>. <span class="id">compute;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Interval properties. </div>
<br/>
<span class="vernacular">Remark</span> <span id="Ztrunc_range_pos" class="id"><a name="Ztrunc_range_pos" class="">Ztrunc_range_pos:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:89" class="id"><a name="x:89" class="">x,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:89">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:89">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:89">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:89">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>)%<span class="id">Z</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_floor">Ztrunc_floor</a></span>. <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_ub">Zfloor_ub</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Raux.html#Rle_bool_spec">Rle_bool_spec</a></span> <span class="id">0</span>%<span class="id">R</span> <span class="id">x</span>). <span class="id">intros</span> <span class="id">RLE;</span> <span class="id">inversion</span> <span class="id">RLE;</span> <span class="id">subst;</span> <span class="id">clear</span> <span class="id">RLE</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_ceil">Ztrunc_ceil</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span> <span class="gallina-kwd">by</span> <span class="id">lra</span>. <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">0</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad">+</a></span> <span class="id">1</span>)%<span class="id">R</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_ub">Zfloor_ub</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>. <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">lra</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Ztrunc_range_zero" class="id"><a name="Ztrunc_range_zero" class="">Ztrunc_range_zero:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:90" class="id"><a name="x:90" class="">x,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:90">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id">-1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:90">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id">1</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Raux.html#Rle_bool_spec">Rle_bool_spec</a></span> <span class="id">0</span>%<span class="id">R</span> <span class="id">x</span>). <span class="id">intros</span> <span class="id">RLE;</span> <span class="id">inversion</span> <span class="id">RLE;</span> <span class="id">subst;</span> <span class="id">clear</span> <span class="id">RLE</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_floor">Ztrunc_floor</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">0</span>%<span class="id">R;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_0_1">Rlt_0_1</a></span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">replace</span> <span class="id">1</span>%<span class="id">R</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad">+</a></span> <span class="id">1</span>)%<span class="id">R</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_ub">Zfloor_ub</a></span>. <span class="id">rewrite</span> <span class="id">H</span>. <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_ceil">Ztrunc_ceil</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span> <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le;</a></span> <span class="id">auto</span>). <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_cancel">Ropp_lt_cancel</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-</a></span>(<span class="id">1</span>))). <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> <span class="id">1</span>%<span class="id">R</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad">+</a></span> <span class="id">1</span>)%<span class="id">R</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_ub">Zfloor_ub</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Raux.html#Zceil">Zceil</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">replace</span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>)) <span class="gallina-kwd">with</span> <span class="id">0</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">0</span>%<span class="id">R;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_0_1">Rle_0_1</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="ZofB_range_pos" class="id"><a name="ZofB_range_pos" class="">ZofB_range_pos:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:91" class="id"><a name="f:91" class="">f</a></span> <span id="n:92" class="id"><a name="n:92" class="">n,</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:91">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:92">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:92">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:92">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:91">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:92">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>)%<span class="id">Z</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_correct">ZofB_correct</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">f</span>) <span class="id">eqn:FIN;</span> <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Ztrunc_range_pos">Ztrunc_range_pos</a></span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="ZofB_range_neg" class="id"><a name="ZofB_range_neg" class="">ZofB_range_neg:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:93" class="id"><a name="f:93" class="">f</a></span> <span id="n:94" class="id"><a name="n:94" class="">n,</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:93">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:94">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:94">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:94">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#655439258f20e6256090528bc533ae29">&lt;</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:93">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#655439258f20e6256090528bc533ae29">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:94">n</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_correct">ZofB_correct</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">f</span>) <span class="id">eqn:FIN;</span> <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">x</span> <span class="id">:=</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">f</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">set</span> (<span class="id">y</span> <span class="id">:=</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:'-'_x">-x</a></span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id">y</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;=</a></span> <span class="id">y</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#b6aaeb1973f5e630a6779ff194ed22e3">&lt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id">y</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>)%<span class="id">Z</span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Ztrunc_range_pos">Ztrunc_range_pos</a></span>. <span class="id">unfold</span> <span class="id">y</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_opp">Ztrunc_opp</a></span>. <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">A</span> <span class="gallina-kwd">as</span> <span class="id">[B</span> <span class="id">C]</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">y</span> <span class="gallina-kwd">in</span> <span class="id">B,</span> <span class="id">C</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_opp">Ztrunc_opp</a></span> <span class="gallina-kwd">in</span> <span class="id">B,</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>)) <span class="gallina-kwd">in</span> <span class="id">C</span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#opp_IZR">opp_IZR</a></span> <span class="gallina-kwd">in</span> <span class="id">B,</span> <span class="id">C</span>. <span class="id">lra</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="ZofB_range_zero" class="id"><a name="ZofB_range_zero" class="">ZofB_range_zero:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:95" class="id"><a name="f:95" class="">f,</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:95">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id">-1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:95">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id">1</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_correct">ZofB_correct</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">f</span>) <span class="id">eqn:FIN;</span> <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Ztrunc_range_zero">Ztrunc_range_zero</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="ZofB_range_nonneg" class="id"><a name="ZofB_range_nonneg" class="">ZofB_range_nonneg:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:96" class="id"><a name="f:96" class="">f</a></span> <span id="n:97" class="id"><a name="n:97" class="">n,</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:96">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:97">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:97">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id">-1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:96">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:97">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>)%<span class="id">Z</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eq_dec">Z.eq_dec</a></span> <span class="id">n</span> <span class="id">0</span>).<br/>
<span class="id">-</span> <span class="id">subst</span> <span class="id">n</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range_zero">ZofB_range_zero</a></span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range_pos">ZofB_range_pos</a></span> <span class="id">f</span> <span class="id">n</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">auto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> <span class="id">0</span>%<span class="id">R</span>. <span class="id">simpl;</span> <span class="id">lra</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">n</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">For representable integers, <span class="bracket"><span class="id">ZofB</span></span> is left inverse of <span class="bracket"><span class="id">BofZ</span></span>. </div>
<br/>
<span class="vernacular">Theorem</span> <span id="ZofBofZ_exact" class="id"><a name="ZofBofZ_exact" class="">ZofBofZ_exact:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:98" class="id"><a name="n:98" class="">n,</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:98">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:98">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:98">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_representable">BofZ_representable</a></span> <span class="id">n</span> <span class="id">H</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_correct">ZofB_correct</a></span>. <span class="id">rewrite</span> <span class="id">A,</span> <span class="id">B</span>. <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_IZR">Ztrunc_IZR</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Compatibility with subtraction </div>
<br/>
<span class="vernacular">Remark</span> <span id="Zfloor_minus" class="id"><a name="Zfloor_minus" class="">Zfloor_minus:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:99" class="id"><a name="x:99" class="">x</a></span> <span id="n:100" class="id"><a name="n:100" class="">n,</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#x:99">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:100">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:99">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:100">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_imp">Zfloor_imp</a></span>. <span class="id">replace</span> (<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="gallina-kwd">with</span> ((<span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id">-</span> <span class="id">n</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#minus_IZR">minus_IZR</a></span>. <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_r">Rplus_le_compat_r</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_compat_r">Rplus_lt_compat_r</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#plus_IZR">plus_IZR</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_ub">Zfloor_ub</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="ZofB_minus" class="id"><a name="ZofB_minus" class="">ZofB_minus:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="minus_nan:101" class="id"><a name="minus_nan:101" class="">minus_nan</a></span> <span id="m:102" class="id"><a name="m:102" class="">m</a></span> <span id="f:103" class="id"><a name="f:103" class="">f</a></span> <span id="p:104" class="id"><a name="p:104" class="">p</a></span> <span id="q:105" class="id"><a name="q:105" class="">q,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:103">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:104">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:104">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id">2*q</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:105">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^prec</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:105">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:103">f</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bminus">Bminus</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#minus_nan:101">minus_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:102">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:103">f</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:105">q</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#p:104">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:105">q</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">Q:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-2^prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id">q</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id">2^prec</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">split;</span> <span class="id">auto</span>.  <span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>)<span class="id">;</span> <span class="id">simpl;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">RANGE:</span> (<span class="id">-1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>)%<span class="id">Z</span>)%<span class="id">R</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range_nonneg">ZofB_range_nonneg;</a></span> <span class="id">auto;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_correct">ZofB_correct</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">f</span>) <span class="id">eqn:FIN;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">PQ2:</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">q</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id">2</span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>. <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EXACT:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id">m</span>) (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">q</span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'-'_x">-</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">q</span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#valid_rnd_round_mode">valid_rnd_round_mode</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Prop.Sterbenz.html#sterbenz_aux">sterbenz_aux</a></span>. <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp_monotone">FLT_exp_monotone</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#generic_format_B2R">generic_format_B2R</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_n">integer_representable_n</a></span>. <span class="id">auto</span>. <span class="id">lra</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_exact">BofZ_exact</a></span> <span class="id">q</span> <span class="id">Q</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bminus_correct">Bminus_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">minus_nan</span> <span class="id">m</span> <span class="id">f</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">q</span>) <span class="id">FIN</span> <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_true">Rlt_bool_true</a></span>.<br/>
<span class="id">-</span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin;</a></span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span>. <span class="id">intros</span> (<span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_correct">ZofB_correct</a></span>. <span class="id">rewrite</span> <span class="id">E</span>. <span class="id">rewrite</span> <span class="id">D</span>. <span class="id">rewrite</span> <span class="id">A</span>. <span class="id">rewrite</span> <span class="id">EXACT</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>. <span class="id">f_equal</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc_floor">Ztrunc_floor</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Zfloor_minus">Zfloor_minus</a></span>.<br/>
&nbsp;&nbsp;<span class="id">lra</span>. <span class="id">lra</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">A</span>. <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin;</a></span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span>. <span class="id">rewrite</span> <span class="id">EXACT</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">q</span>). <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_le">Rabs_le</a></span>. <span class="id">lra</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le;</a></span> <span class="id">auto</span>. <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_lt">bpow_lt</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">A variant of <span class="bracket"><span class="id">ZofB</span></span> that bounds the range of representable integers. </div>
<br/>
<span class="vernacular">Definition</span> <span id="ZofB_range" class="id"><a name="ZofB_range" class="">ZofB_range</a></span> (<span id="f:106" class="id"><a name="f:106" class="">f:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>) (<span id="zmin:107" class="id"><a name="zmin:107" class="">zmin</a></span> <span id="zmax:108" class="id"><a name="zmax:108" class="">zmax:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:106">f</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">z</span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.leb">Z.leb</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#zmin:107">zmin</a></span> <span class="id">z</span> &amp;&amp; <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.leb">Z.leb</a></span> <span class="id">z</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#zmax:108">zmax</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">z</span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="ZofB_range_correct" class="id"><a name="ZofB_range_correct" class="">ZofB_range_correct:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:109" class="id"><a name="f:109" class="">f</a></span> <span id="min:110" class="id"><a name="min:110" class="">min</a></span> <span id="max:111" class="id"><a name="max:111" class="">max,</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="n:112" class="id"><a name="n:112" class="">n</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:109">f</a></span>) <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range">ZofB_range</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:109">f</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#min:110">min</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#max:111">max</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:109">f</a></span> &amp;&amp; <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.leb">Z.leb</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#min:110">min</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:112">n</a></span> &amp;&amp; <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.leb">Z.leb</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:112">n</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#max:111">max</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:112">n</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range">ZofB_range</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_correct">ZofB_correct</a></span>. <span class="id">fold</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">f</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="ZofB_range_inversion" class="id"><a name="ZofB_range_inversion" class="">ZofB_range_inversion:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:113" class="id"><a name="f:113" class="">f</a></span> <span id="min:114" class="id"><a name="min:114" class="">min</a></span> <span id="max:115" class="id"><a name="max:115" class="">max</a></span> <span id="n:116" class="id"><a name="n:116" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range">ZofB_range</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:113">f</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#min:114">min</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#max:115">max</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:116">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#min:114">min</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:116">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:116">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#max:115">max</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:113">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:116">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range_correct">ZofB_range_correct</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_correct">ZofB_correct</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">f</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">n1</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>)) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">min</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e">&lt;=?</a></span> <span class="id">n1</span>) <span class="id">eqn:MIN;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">n1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e">&lt;=?</a></span> <span class="id">max</span>) <span class="id">eqn:MAX;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">inversion</span> <span class="id">H</span>. <span class="id">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="ZofB_range_minus" class="id"><a name="ZofB_range_minus" class="">ZofB_range_minus:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="minus_nan:117" class="id"><a name="minus_nan:117" class="">minus_nan</a></span> <span id="m:118" class="id"><a name="m:118" class="">m</a></span> <span id="f:119" class="id"><a name="f:119" class="">f</a></span> <span id="p:120" class="id"><a name="p:120" class="">p</a></span> <span id="q:121" class="id"><a name="q:121" class="">q,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range">ZofB_range</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:119">f</a></span> <span class="id">0</span> (<span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:121">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#p:120">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:121">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2^prec</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:121">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:119">f</a></span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range">ZofB_range</a></span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bminus">Bminus</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#minus_nan:117">minus_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:118">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:119">f</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:121">q</a></span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-q</a></span>) (<span class="id"><a href="compcert.lib.IEEE754_extra.html#q:121">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#p:120">p</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#q:121">q</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range_inversion">ZofB_range_inversion</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f'</span> <span class="id">:=</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bminus">Bminus</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">minus_nan</span> <span class="id">m</span> <span class="id">f</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">q</span>)).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">D:</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> <span class="id">f'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">p</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">q</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_minus">ZofB_minus</a></span>. <span class="id">auto</span>. <span class="id">lia</span>. <span class="id">auto</span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range">ZofB_range</a></span>. <span class="id">rewrite</span> <span class="id">D</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zle_bool_true">Zle_bool_true</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zle_bool_true">Zle_bool_true</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Algebraic identities </h2>
<br/>
<div class="doc">Commutativity of addition and multiplication </div>
<br/>
<span class="vernacular">Theorem</span> <span id="Bplus_commut" class="id"><a name="Bplus_commut" class="">Bplus_commut:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="plus_nan:122" class="id"><a name="plus_nan:122" class="">plus_nan</a></span> <span id="mode:123" class="id"><a name="mode:123" class="">mode</a></span> (<span id="x:124" class="id"><a name="x:124" class="">x</a></span> <span id="y:125" class="id"><a name="y:125" class="">y:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#plus_nan:122">plus_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:124">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:125">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#plus_nan:122">plus_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:125">y</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:124">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#Bplus">Bplus</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#plus_nan:122">plus_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mode:123">mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:124">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:125">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bplus">Bplus</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#plus_nan:122">plus_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mode:123">mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:125">y</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:124">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">y;</span> <span class="id">intros</span> <span class="id">NAN</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bplus">Bplus</a></span>. <span class="id">rewrite</span> <span class="id">NAN</span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x</span> <span class="gallina-kwd">as</span> <span class="id">[sx|sx|sx</span> <span class="id">px</span> <span class="id">Hx|sx</span> <span class="id">mx</span> <span class="id">ex</span> <span class="id">Hx];</span> <span class="id">destruct</span> <span class="id">y</span> <span class="gallina-kwd">as</span> <span class="id">[sy|sy|sy</span> <span class="id">py</span> <span class="id">Hy|sy</span> <span class="id">my</span> <span class="id">ey</span> <span class="id">Hy];</span> <span class="id">auto;</span> <span class="id">simpl</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Raux.html#eqb_sym">eqb_sym</a></span> <span class="id">sy</span> <span class="id">sx</span>). <span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#eqb">eqb</a></span> <span class="id">sx</span> <span class="id">sy</span>) <span class="id">eqn:EQB;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">f_equal;</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#eqb_prop">eqb_prop;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> (<span class="id"><a href="Flocq.Core.Raux.html#eqb_sym">eqb_sym</a></span> <span class="id">sy</span> <span class="id">sx</span>). <span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#eqb">eqb</a></span> <span class="id">sx</span> <span class="id">sy</span>) <span class="id">eqn:EQB;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">f_equal;</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#eqb_prop">eqb_prop;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.min_comm">Z.min_comm</a></span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Bmult_commut" class="id"><a name="Bmult_commut" class="">Bmult_commut:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="mult_nan:126" class="id"><a name="mult_nan:126" class="">mult_nan</a></span> <span id="mode:127" class="id"><a name="mode:127" class="">mode</a></span> (<span id="x:128" class="id"><a name="x:128" class="">x</a></span> <span id="y:129" class="id"><a name="y:129" class="">y:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#mult_nan:126">mult_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:128">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:129">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mult_nan:126">mult_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:129">y</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:128">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult">Bmult</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mult_nan:126">mult_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mode:127">mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:128">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:129">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult">Bmult</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mult_nan:126">mult_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mode:127">mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:129">y</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:128">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">y;</span> <span class="id">intros</span> <span class="id">NAN</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult">Bmult</a></span>. <span class="id">rewrite</span> <span class="id">NAN</span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x</span> <span class="gallina-kwd">as</span> <span class="id">[sx|sx|sx</span> <span class="id">px</span> <span class="id">Hx|sx</span> <span class="id">mx</span> <span class="id">ex</span> <span class="id">Hx];</span> <span class="id">destruct</span> <span class="id">y</span> <span class="gallina-kwd">as</span> <span class="id">[sy|sy|sy</span> <span class="id">py</span> <span class="id">Hy|sy</span> <span class="id">my</span> <span class="id">ey</span> <span class="id">Hy];</span> <span class="id">auto;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">try</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#xorb_comm">xorb_comm;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#B2SF_inj">B2SF_inj</a></span>. <span class="id">rewrite</span> <span class="id">2!B2SF_SF2B</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#xorb_comm">xorb_comm,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.mul_comm">Pos.mul_comm</a></span><span class="id">,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Multiplication by 2 is diagonal addition. </div>
<br/>
<span class="vernacular">Theorem</span> <span id="Bmult2_Bplus" class="id"><a name="Bmult2_Bplus" class="">Bmult2_Bplus:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="plus_nan:130" class="id"><a name="plus_nan:130" class="">plus_nan</a></span> <span id="mult_nan:131" class="id"><a name="mult_nan:131" class="">mult_nan</a></span> <span id="mode:132" class="id"><a name="mode:132" class="">mode</a></span> (<span id="f:133" class="id"><a name="f:133" class="">f:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> (<span id="x:134" class="id"><a name="x:134" class="">x</a></span> <span id="y:135" class="id"><a name="y:135" class="">y:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#is_nan">is_nan</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:134">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:135">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#plus_nan:130">plus_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:134">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:134">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mult_nan:131">mult_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:134">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:135">y</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#Bplus">Bplus</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#plus_nan:130">plus_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mode:132">mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:133">f</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:133">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult">Bmult</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mult_nan:131">mult_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mode:132">mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:133">f</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">2</span>%<span class="id">Z</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">f;</span> <span class="id">intros</span> <span class="id">NAN</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_representable">BofZ_representable</a></span> <span class="id">2</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable_2p">integer_representable_2p</a></span> <span class="id">1</span>). <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_,</span> <span class="id">prec_lt_emax_;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult_correct">Bmult_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mult_nan</span> <span class="id">mode</span> <span class="id">f</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">2</span>%<span class="id">Z</span>)). <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">A,</span> <span class="id">B,</span> <span class="id">C</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#xorb_false_r">xorb_false_r</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>) <span class="id">eqn:FIN</span>.<br/>
<span class="id">-</span> <span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bplus_correct">Bplus_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">plus_nan</span> <span class="id">mode</span> <span class="id">f</span> <span class="id">f</span> <span class="id">FIN</span> <span class="id">FIN</span>). <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EQ:</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">f</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">2</span>%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">f</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3e57074ab0a6a36b253e873a1bdac6ad">+</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">f</span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">ring</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">EQ</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> <span class="id">H0</span> <span class="gallina-kwd">as</span> (<span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>). <span class="id">destruct</span> <span class="id">H</span> <span class="gallina-kwd">as</span> (<span class="id">S</span> &amp; <span class="id">T</span> &amp; <span class="id">U</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R_Bsign_inj">B2R_Bsign_inj;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">P,</span> <span class="id">S</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">R,</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> <span class="id">0</span>%<span class="id">R</span> <span class="gallina-kwd">with</span> (<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id">2</span>)%<span class="id">R</span> <span class="gallina-kwd">by</span> <span class="id">ring</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_mult_r">Rcompare_mult_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_diag">andb_diag,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#orb_diag">orb_diag</a></span>. <span class="id">destruct</span> <span class="id">f</span> <span class="gallina-kwd">as</span> <span class="id">[s|s|s</span> <span class="id">p</span> <span class="id">H|s</span> <span class="id">m</span> <span class="id">e</span> <span class="id">H];</span> <span class="id">try</span> <span class="id">discriminate;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_Eq">Rcompare_Eq</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">destruct</span> <span class="id">mode;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span> <span class="id">0</span>%<span class="id">R</span> <span class="gallina-kwd">with</span> (@<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">{|</span> <span class="id"><a href="Flocq.Core.Defs.html#Fnum">Fnum</a></span> <span class="id">:=</span> <span class="id">0</span>%<span class="id">Z;</span> <span class="id"><a href="Flocq.Core.Defs.html#Fexp">Fexp</a></span> <span class="id">:=</span> <span class="id">e</span> <span class="id">|}</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Float_prop.html#Rcompare_F2R">Rcompare_F2R</a></span>. <span class="id">destruct</span> <span class="id">s;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span>. <span class="id">simpl</span>. <span class="id">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult">Bmult</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">mult_nan</span> <span class="id">mode</span> <span class="id">f</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">2</span>))<span class="id">;</span> <span class="id">reflexivity</span> <span class="id">||</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> <span class="id">H0</span> <span class="gallina-kwd">as</span> (<span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2FF_inj">B2FF_inj</a></span>. <span class="id">rewrite</span> <span class="id">P,</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">f</span> <span class="gallina-kwd">as</span> <span class="id">[sf|sf|sf</span> <span class="id">pf</span> <span class="id">Hf|sf</span> <span class="id">mf</span> <span class="id">ef</span> <span class="id">Hf];</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">unfold</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bplus">Bplus</a></span>. <span class="id">simpl</span> <span class="id">BinarySingleNaN.Bplus</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#eqb_true">eqb_true</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id">2</span>) <span class="gallina-kwd">as</span> <span class="id">[|</span> <span class="id">|</span> <span class="id">|s2</span> <span class="id">m2</span> <span class="id">e2</span> <span class="id">H2]</span> <span class="id">eqn:B2;</span> <span class="id">try</span> <span class="id">discriminate;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> ((<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">2</span>)%<span class="id">Z</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#eq_IZR">eq_IZR;</a></span> <span class="id">auto</span>). <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">s2</span>. <span class="id">unfold</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult">Bmult</a></span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#xorb_false_r">xorb_false_r</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">unfold</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bplus">Bplus,</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult">Bmult</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">NAN</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Divisions that can be turned into multiplications by an inverse </div>
<br/>
<span class="vernacular">Definition</span> <span id="Bexact_inverse_mantissa" class="id"><a name="Bexact_inverse_mantissa" class="">Bexact_inverse_mantissa</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.iter">Z.iter</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="Bexact_inverse_mantissa_value" class="id"><a name="Bexact_inverse_mantissa_value" class="">Bexact_inverse_mantissa_value:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse_mantissa">Bexact_inverse_mantissa</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">REC:</span> <span class="gallina-kwd">forall</span> <span id="n:137" class="id"><span id="n:136" class="id"><a name="n:137" class="">n,</a></span></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat_rect">nat_rect</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> (<span class="gallina-kwd">fun</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span>) <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:136">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:136">n</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">induction</span> <span class="id">n</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">nat_rect</span>. <span class="id">transitivity</span> (<span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat_rect">nat_rect</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> (<span class="gallina-kwd">fun</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span>) <span class="id">n</span>)). <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>. <span class="id">rewrite</span> <span class="id">IHn</span>. <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> <span class="id">1</span>) <span class="gallina-kwd">with</span> <span class="id">2</span>. <span class="id">ring</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse_mantissa">Bexact_inverse_mantissa</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zmisc.html#iter_nat_of_Z">iter_nat_of_Z</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id">REC</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Zabs2Nat.id_abs">Zabs2Nat.id_abs</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Bexact_inverse_mantissa_digits2_pos" class="id"><a name="Bexact_inverse_mantissa_digits2_pos" class="">Bexact_inverse_mantissa_digits2_pos:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#digits2_pos">digits2_pos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse_mantissa">Bexact_inverse_mantissa</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">DIGITS:</span> <span class="gallina-kwd">forall</span> <span id="n:139" class="id"><span id="n:138" class="id"><a name="n:139" class="">n,</a></span></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#digits2_pos">digits2_pos</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat_rect">nat_rect</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> (<span class="gallina-kwd">fun</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span>) <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:138">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:138">n+1</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">induction</span> <span class="id">n;</span> <span class="id">simpl</span>. <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">IHn</span>. <span class="id">destruct</span> <span class="id">n;</span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse_mantissa">Bexact_inverse_mantissa</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zmisc.html#iter_nat_of_Z">iter_nat_of_Z</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">rewrite</span> <span class="id">DIGITS</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Zabs2Nat.abs_nat_nonneg">Zabs2Nat.abs_nat_nonneg</a></span><span class="id">,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.inj_sub">Z2Nat.inj_sub</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec;</a></span> <span class="id">try</span>  <span class="id">discriminate</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.sub_add">Nat.sub_add</a></span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.Pnat.html#Pos2Nat.id">Pos2Nat.id</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">zify;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="bounded_Bexact_inverse" class="id"><a name="bounded_Bexact_inverse" class="">bounded_Bexact_inverse:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="e:140" class="id"><a name="e:140" class="">e,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:140">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#bounded">bounded</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse_mantissa">Bexact_inverse_mantissa</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:140">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#bounded">bounded,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#canonical_mantissa">canonical_mantissa</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zeq_is_eq_bool">Zeq_is_eq_bool</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_is_le_bool">Zle_is_le_bool</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse_mantissa_digits2_pos">Bexact_inverse_mantissa_digits2_pos</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">fexp,</span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp,</a></span> <span class="id">emin</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="Bexact_inverse" class="id"><a name="Bexact_inverse" class="">Bexact_inverse</a></span> (<span id="f:141" class="id"><a name="f:141" class="">f:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:141">f</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_finite">B754_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">s</span> <span class="id">m</span> <span class="id">e</span> <span class="id">B</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.eq_dec">Pos.eq_dec</a></span> <span class="id">m</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse_mantissa">Bexact_inverse_mantissa</a></span> <span class="gallina-kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="e':143" class="id"><a name="e':143" class="">e'</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id">*</span> <span class="id">2</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_le_dec">Z_le_dec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e':143">e'</a></span> <span class="gallina-kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_le_dec">Z_le_dec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e':143">e'</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="gallina-kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="Flocq.IEEE754.Binary.html#B754_finite">B754_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">s</span> <span class="id">m</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e':143">e'</a></span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Next Obligation.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#bounded_Bexact_inverse">bounded_Bexact_inverse</a></span> <span class="gallina-kwd">in</span> <span class="id">B</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#bounded_Bexact_inverse">bounded_Bexact_inverse</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">emin</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Bexact_inverse_correct" class="id"><a name="Bexact_inverse_correct" class="">Bexact_inverse_correct:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:144" class="id"><a name="f:144" class="">f</a></span> <span id="f':145" class="id"><a name="f':145" class="">f',</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse">Bexact_inverse</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:144">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f':145">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite_strict">is_finite_strict</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:144">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite_strict">is_finite_strict</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f':145">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f':145">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:144">f</a></span>)%<span class="id">R</span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:144">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id">0</span>%<span class="id">R</span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f':145">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:144">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof with</span></div>
<div class="proofscript" id="proof51">
 (<span class="id">try</span> <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">f</span> <span class="id">f'</span> <span class="id">EI</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse">Bexact_inverse</a></span> <span class="gallina-kwd">in</span> <span class="id">EI</span>. <span class="id">destruct</span> <span class="id">f</span> <span class="gallina-kwd">as</span> <span class="id">[s|s|s</span> <span class="id">p</span> <span class="id">H|s</span> <span class="id">m</span> <span class="id">e</span> <span class="id">H]</span>...<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.eq_dec">Pos.eq_dec</a></span> <span class="id">m</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse_mantissa">Bexact_inverse_mantissa</a></span>)...<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">e'</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>) <span class="id">*</span> <span class="id">2</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_le_dec">Z_le_dec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="id">e'</span>)...<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_le_dec">Z_le_dec</a></span> <span class="id">e'</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>)...<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">EI;</span> <span class="id">clear</span> <span class="id">EI;</span> <span class="id">subst</span> <span class="id">f'</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">auto</span>. <span class="id">split</span>. <span class="id">auto</span>. <span class="id">split</span>. <span class="id">unfold</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse_mantissa_value">Bexact_inverse_mantissa_value</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_cond_Zopp">IZR_cond_Zopp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">!</span> <span class="id"><a href="Flocq.Core.Raux.html#cond_Ropp_mult_l">cond_Ropp_mult_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>))) <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>))<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> (<span class="id">symmetry;</span> <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>)<span class="id">;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">!</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">e'</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">e</span>)) <span class="gallina-kwd">by</span> (<span class="id">unfold</span> <span class="id">e';</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_opp">bpow_opp</a></span>. <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Raux.html#cond_Ropp">cond_Ropp;</a></span> <span class="id">destruct</span> <span class="id">s;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">field</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_neq_0">F2R_neq_0</a></span>. <span class="id">destruct</span> <span class="id">s;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Bdiv_mult_inverse" class="id"><a name="Bdiv_mult_inverse" class="">Bdiv_mult_inverse:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="div_nan:146" class="id"><a name="div_nan:146" class="">div_nan</a></span> <span id="mult_nan:147" class="id"><a name="mult_nan:147" class="">mult_nan</a></span> <span id="mode:148" class="id"><a name="mode:148" class="">mode</a></span> <span id="x:149" class="id"><a name="x:149" class="">x</a></span> <span id="y:150" class="id"><a name="y:150" class="">y</a></span> <span id="z:151" class="id"><a name="z:151" class="">z,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> (<span id="x:152" class="id"><a name="x:152" class="">x</a></span> <span id="y:153" class="id"><a name="y:153" class="">y</a></span> <span id="z:154" class="id"><a name="z:154" class="">z:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#is_nan">is_nan</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:152">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:153">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#z:154">z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#div_nan:146">div_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:152">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:153">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mult_nan:147">mult_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:152">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#z:154">z</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse">Bexact_inverse</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:150">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#z:151">z</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#Bdiv">Bdiv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#div_nan:146">div_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mode:148">mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:149">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:150">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult">Bmult</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mult_nan:147">mult_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#mode:148">mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:149">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#z:151">z</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">z;</span> <span class="id">intros</span> <span class="id">NAN;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bexact_inverse_correct">Bexact_inverse_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bmult_correct">Bmult_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mult_nan</span> <span class="id">mode</span> <span class="id">x</span> <span class="id">z</span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bdiv_correct">Bdiv_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">div_nan</span> <span class="id">mode</span> <span class="id">x</span> <span class="id">y</span> <span class="id">D</span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">C</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">x</span>) <span class="id">eqn:FINX</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> <span class="id">H0</span> <span class="gallina-kwd">as</span> (<span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>). <span class="id">destruct</span> <span class="id">H1</span> <span class="gallina-kwd">as</span> (<span class="id">S</span> &amp; <span class="id">T</span> &amp; <span class="id">U</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R_Bsign_inj">B2R_Bsign_inj;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Q</span>. <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#is_finite_strict_finite">is_finite_strict_finite;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">P,</span> <span class="id">S</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">R,</span> <span class="id">U,</span> <span class="id">E</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#is_finite_not_is_nan">is_finite_not_is_nan;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#is_finite_not_is_nan">is_finite_not_is_nan</a></span>. <span class="id">rewrite</span> <span class="id">Q</span>. <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#is_finite_strict_finite">is_finite_strict_finite;</a></span> <span class="id">auto</span>.  <span class="id">+</span> <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2FF_inj">B2FF_inj</a></span>. <span class="id">rewrite</span> <span class="id">H0,</span> <span class="id">H1</span>. <span class="id">rewrite</span> <span class="id">E</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">y;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">destruct</span> <span class="id">z;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x;</span> <span class="id">try</span> <span class="id">discriminate;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">E</span>. <span class="id">now</span> <span class="id">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">unfold</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bdiv">Bdiv</a></span>. <span class="id">now</span> <span class="id">rewrite</span> (<span class="id">NAN</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#B754_finite">B754_finite</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">s0</span> <span class="id">m0</span> <span class="id">e1</span> <span class="id">e2</span>)).<br/>
Qed.</div>
<br/>
<h2> Conversion from scientific notation </h2>
<br/>
<div class="doc">Russian peasant exponentiation </div>
<br/>
<span class="vernacular">Fixpoint</span> <span id="pos_pow" class="id"><a name="pos_pow" class="">pos_pow</a></span> (<span id="x:155" class="id"><a name="x:155" class="">x</a></span> <span id="y:156" class="id"><a name="y:156" class="">y:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:156">y</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:155">x</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.square">Pos.square</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#pos_pow:157">pos_pow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:155">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:156">y</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.mul">Pos.mul</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:155">x</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.square">Pos.square</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#pos_pow:157">pos_pow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:155">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:156">y</a></span>))<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="pos_pow_spec" class="id"><a name="pos_pow_spec" class="">pos_pow_spec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:159" class="id"><a name="x:159" class="">x</a></span> <span id="y:160" class="id"><a name="y:160" class="">y,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#pos_pow">pos_pow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:159">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:160">y</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:159">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:160">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">REC:</span> <span class="gallina-kwd">forall</span> <span id="y:163" class="id"><span id="y:161" class="id"><a name="y:163" class="">y</a></span></span> <span id="a:164" class="id"><span id="a:162" class="id"><a name="a:164" class="">a,</a></span></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.iter">Pos.iter</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.mul">Pos.mul</a></span> <span class="id">x</span>) <span class="id"><a href="compcert.lib.IEEE754_extra.html#a:162">a</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:161">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.mul">Pos.mul</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#pos_pow">pos_pow</a></span> <span class="id">x</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:161">y</a></span>) <span class="id"><a href="compcert.lib.IEEE754_extra.html#a:162">a</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">induction</span> <span class="id">y;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id">IHy,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.square_spec">Pos.square_spec</a></span><span class="id">,</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.mul_assoc">Pos.mul_assoc</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id">IHy,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.square_spec">Pos.square_spec</a></span><span class="id">,</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.mul_assoc">Pos.mul_assoc</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Pos2Z.inj_pow_pos">Pos2Z.inj_pow_pos</a></span>. <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.pow">Pos.pow</a></span>. <span class="id">rewrite</span> <span class="id">REC</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.mul_1_r">Pos.mul_1_r</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Given a base <span class="bracket"><span class="id">base</span></span>, a mantissa <span class="bracket"><span class="id">m</span></span> and an exponent <span class="bracket"><span class="id">e</span></span>, the following function
  computes the FP number closest to <span class="bracket"><span class="id">m</span> * <span class="id">base</span> ^ <span class="id">e</span></span>, using round to odd, ties break to even.
  The algorithm is naive, computing <span class="bracket"><span class="id">base</span> ^ |<span class="id">e</span>|</span> exactly before doing a multiplication or
  division with <span class="bracket"><span class="id">m</span></span>.  However, we treat specially very large or very small values of <span class="bracket"><span class="id">e</span></span>,
  when the result is known to be <span class="bracket">+<span class="id">infinity</span></span> or <span class="bracket">0.0</span> respectively. </div>
<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="Bparse" class="id"><a name="Bparse" class="">Bparse</a></span> (<span id="base:165" class="id"><a name="base:165" class="">base:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:166" class="id"><a name="m:166" class="">m:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="e:167" class="id"><a name="e:167" class="">e:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">:</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#binary_float">binary_float</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:167">e</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:166">m</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">p</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:167">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:165">base</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">then</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:166">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#pos_pow">pos_pow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:165">base</a></span> <span class="id">p</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_infinity">B754_infinity</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zneg">Zneg</a></span> <span class="id">p</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:167">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:165">base</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_up">Z.log2_up</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:166">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">then</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_zero">B754_zero</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#BSN2B'">BSN2B'</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#SF2B">SF2B</a></span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#Bdiv_correct_aux">Bdiv_correct_aux</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:166">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#pos_pow">pos_pow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:165">base</a></span> <span class="id">p</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>))) <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Next Obligation.</span></div>
<div class="proofscript" id="proof54">
<span class="id">destruct</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#Bdiv_correct_aux">Bdiv_correct_aux</a></span> <span class="gallina-kwd">as</span> <span class="id">[H1</span> <span class="id">H2]</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#is_nan_SF2B">is_nan_SF2B</a></span>.<br/>
<span class="id">clear</span> <span class="id">H1</span>.<br/>
<span class="id">destruct</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#SFdiv_core_binary">SFdiv_core_binary</a></span> <span class="gallina-kwd">as</span> <span class="id">[[mz</span> <span class="id">ez]</span> <span class="id">lz]</span>.<br/>
<span class="id">destruct</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
<span class="id">destruct</span> <span class="id">H2</span> <span class="gallina-kwd">as</span> <span class="id">[_</span> <span class="id">[H</span> <span class="id">_]]</span>.<br/>
<span class="id">now</span> <span class="id">destruct</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#binary_round_aux">BinarySingleNaN.binary_round_aux</a></span>.<br/>
<span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H2</span>.<br/>
<span class="id">rewrite</span> <span class="id">H2</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#is_nan_binary_overflow">is_nan_binary_overflow</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties of <span class="bracket"><span class="id">Z.log2</span></span> and <span class="bracket"><span class="id">Z.log2_up</span></span>. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="Zpower_log" class="id"><a name="Zpower_log" class="">Zpower_log:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="base:169" class="id"><a name="base:169" class="">base:</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix">radix</a></span>) <span id="n:170" class="id"><a name="n:170" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:170">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:170">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:169">base</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:169">base</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:170">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#6f909ea2391c6073ff1047e870dd64e2">&lt;=</a></span> <span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:170">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_up">Z.log2_up</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:169">base</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">base</span>) <span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#radix_gt_0">radix_gt_0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">B:</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> <span class="id">base</span>) <span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_nonneg">Z.log2_nonneg</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">C:</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_up">Z.log2_up</a></span> <span class="id">base</span>) <span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_up_nonneg">Z.log2_up_nonneg</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_spec">Z.log2_spec</a></span> <span class="id">base</span>) <span class="gallina-kwd">as</span> <span class="id">[D</span> <span class="id">E];</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_up_spec">Z.log2_up_spec</a></span> <span class="id">base</span>) <span class="gallina-kwd">as</span> <span class="id">[F</span> <span class="id">G]</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Zaux.html#radix_gt_1">radix_gt_1</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">K:</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> <span class="id">base</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_nonneg">Z.pow_nonneg</a></span><span class="id">;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_comm">Z.mul_comm</a></span> <span class="id">n</span>). <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_mul_r">Z.pow_mul_r</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_le_mono_l">Z.pow_le_mono_l</a></span><span class="id">;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="bpow_log_pos" class="id"><a name="bpow_log_pos" class="">bpow_log_pos:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="base:171" class="id"><a name="base:171" class="">base:</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix">radix</a></span>) <span id="n:172" class="id"><a name="n:172" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:172">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:172">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:171">base</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:171">base</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:172">n</a></span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">!</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le;</a></span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Zpower_log">Zpower_log;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_comm">Z.mul_comm</a></span><span class="id">;</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_gt_0_le_0_compat">Zmult_gt_0_le_0_compat</a></span>. <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_nonneg">Z.log2_nonneg</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="bpow_log_neg" class="id"><a name="bpow_log_neg" class="">bpow_log_neg:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="base:173" class="id"><a name="base:173" class="">base:</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix">radix</a></span>) <span id="n:174" class="id"><a name="n:174" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:174">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:173">base</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:174">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#n:174">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:173">base</a></span>)%<span class="id">Z</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">set</span> (<span class="id">m</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-n</a></span>). <span class="id">replace</span> <span class="id">n</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-m</a></span>) <span class="gallina-kwd">by</span> (<span class="id">unfold</span> <span class="id">m;</span> <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_opp_l">Z.mul_opp_l</a></span><span class="id">,</span> <span class="id">!</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_opp">bpow_opp</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rinv_le">Rinv_le</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#bpow_log_pos">bpow_log_pos</a></span>. <span class="id">unfold</span> <span class="id">m;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Overflow and underflow conditions. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="round_integer_overflow" class="id"><a name="round_integer_overflow" class="">round_integer_overflow:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="base:175" class="id"><a name="base:175" class="">base:</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix">radix</a></span>) <span id="e:176" class="id"><a name="e:176" class="">e</a></span> <span id="m:177" class="id"><a name="m:177" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:176">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:176">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:175">base</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#77d341fe206b2891763e25999ffddca2">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:177">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:175">base</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:176">e</a></span>))%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>) (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le">round_le;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#fexp_correct">fexp_correct;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#valid_rnd_round_mode">valid_rnd_round_mode</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>)). <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat">Rmult_le_compat</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_0_1">Rle_0_1</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>. <span class="id">zify;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span>. <span class="id">eapply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>. <span class="id">eassumption</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#bpow_log_pos">bpow_log_pos;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.FLT.html#generic_format_FLT">generic_format_FLT</a></span>. <span class="gallina-kwd">exists</span> (<span class="id"><a href="Flocq.Core.Defs.html#Float">Float</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">1</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>. <span class="id">ring</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_gt_1">Zpower_gt_1</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">unfold</span> <span class="id">emin;</span> <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_,</span> <span class="id">prec_lt_emax_;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="round_NE_underflows" class="id"><a name="round_NE_underflows" class="">round_NE_underflows:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:178" class="id"><a name="x:178" class="">x,</a></span><br/>
&nbsp;&nbsp;(<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:178">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#fbdebc8c1a732d40499de973c18a9a13">&lt;=</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>))%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>) <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:178">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">eps</span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span>)) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>) <span class="id">eps</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">E:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> <span class="id">eps</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#cexp">cexp,</a></span> <span class="id">eps</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#mag_bpow">mag_bpow</a></span>. <span class="id">unfold</span> <span class="id">fexp,</span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span>. <span class="id">zify;</span> <span class="id">red</span> <span class="gallina-kwd">in</span> <span class="id">prec_gt_0_;</span> <span class="id">lia</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#scaled_mantissa">scaled_mantissa;</a></span> <span class="id">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">P:</span> (<span class="id">eps</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-emin</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/</a></span> <span class="id">2</span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">eps</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>. <span class="id">replace</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id">1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-emin</a></span>) <span class="gallina-kwd">with</span> (<span class="id">-1</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">P</span>. <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#Znearest">Znearest</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">F:</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#2299a6ef56270a66cc1b95489d0f6e3a">/</a></span> <span class="id">2</span>)%<span class="id">R</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Zfloor_imp">Zfloor_imp</a></span>. <span class="id">simpl</span>. <span class="id">lra</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">F</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_0_r">Rminus_0_r</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_Eq">Rcompare_Eq</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">A</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le">round_le</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#fexp_correct">fexp_correct;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#valid_rnd_round_mode">valid_rnd_round_mode</a></span>. <span class="id">tauto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_le">round_le</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#fexp_correct">fexp_correct;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#valid_rnd_round_mode">valid_rnd_round_mode</a></span>. <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="round_integer_underflow" class="id"><a name="round_integer_underflow" class="">round_integer_underflow:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="base:179" class="id"><a name="base:179" class="">base:</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix">radix</a></span>) <span id="e:180" class="id"><a name="e:180" class="">e</a></span> <span id="m:181" class="id"><a name="m:181" class="">m,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#e:180">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#e:180">e</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:179">base</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_up">Z.log2_up</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:181">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:181">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:179">base</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:180">e</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span>%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#round_NE_underflows">round_NE_underflows</a></span>. <span class="id">split</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>. <span class="id">zify;</span> <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_up">Z.log2_up</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">e</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> <span class="id">base</span>)).<br/>
<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_plus">bpow_plus</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat">Rmult_le_compat</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le;</a></span> <span class="id">zify;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.eq_dec">Z.eq_dec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m</span>) <span class="id">1</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">e0</span>. <span class="id">simpl</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_up_spec">Z.log2_up_spec</a></span>. <span class="id">zify;</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_up_nonneg">Z.log2_up_nonneg</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#bpow_log_neg">bpow_log_neg</a></span>. <span class="id">auto</span>.<br/>
<span class="id">+</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correctness of Bparse </div>
<br/>
<span class="vernacular">Theorem</span> <span id="Bparse_correct" class="id"><a name="Bparse_correct" class="">Bparse_correct:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="b:182" class="id"><a name="b:182" class="">b</a></span> <span id="m:183" class="id"><a name="m:183" class="">m</a></span> <span id="e:184" class="id"><a name="e:184" class="">e</a></span> (<span id="BASE:185" class="id"><a name="BASE:185" class="">BASE:</a></span> <span class="id">2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#b:182">b</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="base:186" class="id"><a name="base:186" class="">base</a></span> <span class="id">:=</span> <span class="id">{|</span> <span class="id"><a href="Flocq.Core.Zaux.html#radix_val">radix_val</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#b:182">b;</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix_prop">radix_prop</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_imp_le_bool">Zle_imp_le_bool</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BASE:185">BASE</a></span> <span class="id">|}</span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="r:187" class="id"><a name="r:187" class="">r</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:183">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#base:186">base</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:184">e</a></span>) <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#r:187">r</a></span>) (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>) <span class="gallina-kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bparse">Bparse</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#b:182">b</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:183">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:184">e</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#r:187">r</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bparse">Bparse</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#b:182">b</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:183">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:184">e</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bparse">Bparse</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#b:182">b</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:183">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:184">e</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2FF">B2FF</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bparse">Bparse</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#b:182">b</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:183">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#e:184">e</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#F754_infinity">F754_infinity</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="gallina-kwd">forall</span> <span id="x:189" class="id"><span id="x:188" class="id"><a name="x:189" class="">x,</a></span></span> @<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id">{|</span> <span class="id"><a href="Flocq.Core.Defs.html#Fnum">Fnum</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:188">x;</a></span> <span class="id"><a href="Flocq.Core.Defs.html#Fexp">Fexp</a></span> <span class="id">:=</span> <span class="id">0</span> <span class="id">|}</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:188">x</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R,</a></span> <span class="id"><a href="Flocq.Core.Defs.html#Fnum">Fnum;</a></span> <span class="id">simpl</span>. <span class="id">ring</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bparse">Bparse,</a></span> <span class="id">r</span>. <span class="id">destruct</span> <span class="id">e</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">e</span> <span class="id">|</span> <span class="id">e]</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;e&nbsp;=&nbsp;Z0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id">base</span> <span class="id">0</span>) <span class="gallina-kwd">with</span> <span class="id">1</span>%<span class="id">R</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_correct">BofZ_correct</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m</span>)).<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;e&nbsp;=&nbsp;Zpos&nbsp;e&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">e</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">b</span>)) <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>).<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;no&nbsp;overflow&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#pos_pow_spec">pos_pow_spec</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Raux.html#IZR_Zpower">IZR_Zpower</a></span> <span class="gallina-kwd">by</span> (<span class="id">zify;</span> <span class="id">lia</span>). <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#mult_IZR">mult_IZR</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">e</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf">&lt;?</a></span> <span class="id">0</span>).<br/>
&nbsp;&nbsp;<span class="id">exact</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_correct">BofZ_correct</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">e</span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_ge">Z.ltb_ge</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_comm">Z.mul_comm</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_gt_0_le_0_compat">Zmult_gt_0_le_0_compat</a></span>. <span class="id">zify;</span> <span class="id">lia</span>.  <span class="id">apply</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span> <span class="id">base</span>).<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;overflow&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_false">Rlt_bool_false</a></span>. <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans;</a></span> <span class="id">[idtac|apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rle_abs">Rle_abs]</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#round_integer_overflow">round_integer_overflow</a></span> <span class="id">base</span>). <span class="id">zify;</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;e&nbsp;=&nbsp;Zneg&nbsp;e&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.neg">Z.neg</a></span> <span class="id">e</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2">Z.log2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">b</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.log2_up">Z.log2_up</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m</span>)) <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin</a></span>).<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;undeflow&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#round_integer_underflow">round_integer_underflow;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_true">Rlt_bool_true</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">0</span>)%<span class="id">R</span> <span class="gallina-kwd">with</span> <span class="id">0</span>%<span class="id">R</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>. <span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#abs_IZR">abs_IZR</a></span> <span class="id">0</span>).<br/>
&nbsp;&nbsp;<span class="id">zify;</span> <span class="id">lia</span>.<br/>
<span class="id">+</span> <span class="comment">(*&nbsp;no&nbsp;underflow&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R_BSN2B'">B2R_BSN2B',</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#B2R_SF2B">B2R_SF2B</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2FF_BSN2B'">B2FF_BSN2B',</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#B2SF_SF2B">B2SF_SF2B</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign_BSN2B'">Bsign_BSN2B',</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#Bsign_SF2B">Bsign_SF2B</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite_BSN2B'">is_finite_BSN2B',</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#is_finite_SF2B">is_finite_SF2B</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#Bdiv_correct_aux">Bdiv_correct_aux</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">m</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#pos_pow">pos_pow</a></span> <span class="id">b</span> <span class="id">e</span>) <span class="id">0</span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f</span> <span class="id">:=</span> <span class="gallina-kwd">let</span> <span class="id">'</span>(<span class="id">mz,</span> <span class="id">ez,</span> <span class="id">lz</span>) <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#SFdiv_core_binary">SFdiv_core_binary</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m</span>) <span class="id">0</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#pos_pow">pos_pow</a></span> <span class="id">b</span> <span class="id">e</span>)) <span class="id">0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">in</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#binary_round_aux">binary_round_aux</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.prec">prec</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#xorb">xorb</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">mz</span> <span class="id">ez</span> <span class="id">lz</span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin">emin;</a></span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id">A</span>. <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#cond_Zopp">cond_Zopp</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#pos_pow_spec">pos_pow_spec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">B:</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#3942bfc45fbeaeee49010b741755982b">/</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43">^</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">e</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id">base</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.neg">Z.neg</a></span> <span class="id">e</span>))%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">change</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.neg">Z.neg</a></span> <span class="id">e</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:'-'_x">-</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">e</span>)). <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_opp">bpow_opp</a></span>. <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">B</span>. <span class="id">intros</span> <span class="id">[P</span> <span class="id">Q]</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp">fexp</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#e1dae7ed53bffa765009199d058dd327">*</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id">base</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.neg">Z.neg</a></span> <span class="id">e</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops.emax">emax</a></span>)).<br/>
<span class="id">*</span> <span class="id">destruct</span> <span class="id">Q</span> <span class="gallina-kwd">as</span> (<span class="id">Q1</span> &amp; <span class="id">Q2</span> &amp; <span class="id">Q3</span>).<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">rewrite</span> <span class="id">Q1</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">auto</span>.<br/>
<span class="id">*</span> <span class="id">rewrite</span> <span class="id">Q</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Extra_ops">Extra_ops</a></span>.<br/>
<br/>
<h2> Conversions between two FP formats </h2>
<br/>
<span class="vernacular">Section</span> <span id="Conversions" class="id"><a name="Conversions" class="">Conversions</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Conversions.prec1" class="id"><a name="Conversions.prec1" class="">prec1</a></span> <span id="Conversions.emax1" class="id"><a name="Conversions.emax1" class="">emax1</a></span> <span id="Conversions.prec2" class="id"><a name="Conversions.prec2" class="">prec2</a></span> <span id="Conversions.emax2" class="id"><a name="Conversions.emax2" class="">emax2</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Context</span> (<span id="prec1_gt_0_:194" class="id"><a name="prec1_gt_0_:194" class="">prec1_gt_0_</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span>) (<span id="prec2_gt_0_:195" class="id"><a name="prec2_gt_0_:195" class="">prec2_gt_0_</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span>).<br/>
<span class="vernacular">Let</span> <span id="Conversions.emin1" class="id"><a name="Conversions.emin1" class="">emin1</a></span> <span class="id">:=</span> (<span class="id">3</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span>)%<span class="id">Z</span>.<br/>
<span class="vernacular">Let</span> <span id="Conversions.fexp1" class="id"><a name="Conversions.fexp1" class="">fexp1</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emin1">emin1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span>.<br/>
<span class="vernacular">Let</span> <span id="Conversions.emin2" class="id"><a name="Conversions.emin2" class="">emin2</a></span> <span class="id">:=</span> (<span class="id">3</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span>)%<span class="id">Z</span>.<br/>
<span class="vernacular">Let</span> <span id="Conversions.fexp2" class="id"><a name="Conversions.fexp2" class="">fexp2</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emin2">emin2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="Conversions.Hmax1" class="id"><a name="Conversions.Hmax1" class="">Hmax1</a></span> <span class="id">:</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span>)%<span class="id">Z</span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="Conversions.Hmax2" class="id"><a name="Conversions.Hmax2" class="">Hmax2</a></span> <span class="id">:</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span>)%<span class="id">Z</span>.<br/>
<span class="vernacular">Let</span> <span id="Conversions.binary_float1" class="id"><a name="Conversions.binary_float1" class="">binary_float1</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#binary_float">binary_float</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span>.<br/>
<span class="vernacular">Let</span> <span id="Conversions.binary_float2" class="id"><a name="Conversions.binary_float2" class="">binary_float2</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#binary_float">binary_float</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Bconv" class="id"><a name="Bconv" class="">Bconv</a></span> (<span id="conv_nan:199" class="id"><a name="conv_nan:199" class="">conv_nan:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.binary_float1">binary_float1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">{x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f">|</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_nan">is_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:198">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true}</a></span>) (<span id="md:200" class="id"><a name="md:200" class="">md:</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode">mode</a></span>) (<span id="f:201" class="id"><a name="f:201" class="">f:</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.binary_float1">binary_float1</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.binary_float2">binary_float2</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:201">f</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_nan">B754_nan</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#build_nan">build_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:199">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:201">f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_infinity">B754_infinity</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_infinity">B754_infinity</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_zero">B754_zero</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">s</span> <span class="id">=&gt;</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_zero">B754_zero</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B754_finite">B754_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">s</span> <span class="id">m</span> <span class="id">e</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#binary_normalize">binary_normalize</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.Hmax2">Hmax2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#md:200">md</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#cond_Zopp">cond_Zopp</a></span> <span class="id">s</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">m</span>)) <span class="id">e</span> <span class="id">s</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Bconv_correct" class="id"><a name="Bconv_correct" class="">Bconv_correct:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="conv_nan:203" class="id"><a name="conv_nan:203" class="">conv_nan</a></span> <span id="m:204" class="id"><a name="m:204" class="">m</a></span> <span id="f:205" class="id"><a name="f:205" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:205">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.fexp2">fexp2</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:204">m</a></span>) (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:205">f</a></span>))) (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:203">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:204">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:205">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.fexp2">fexp2</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:204">m</a></span>) (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:205">f</a></span>)<br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:203">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:204">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:205">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:203">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:204">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:205">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:205">f</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2FF">B2FF</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:203">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:204">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:205">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#binary_overflow">binary_overflow</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:204">m</a></span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:205">f</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">f</span> <span class="gallina-kwd">as</span> <span class="id">[sf|sf|sf</span> <span class="id">pf</span> <span class="id">Hf|sf</span> <span class="id">mf</span> <span class="id">ef</span> <span class="id">Hf];</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
<span class="id">-</span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_0">round_0</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_true">Rlt_bool_true</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#valid_rnd_round_mode">valid_rnd_round_mode</a></span>.<br/>
<span class="id">-</span> <span class="id">generalize</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#binary_normalize_correct">binary_normalize_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.Hmax2">Hmax2</a></span> <span class="id">m</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#cond_Zopp">cond_Zopp</a></span> <span class="id">sf</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">mf</span>)) <span class="id">ef</span> <span class="id">sf</span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emin2">emin2;</a></span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.fexp2">fexp2</a></span>. <span class="id">simpl</span>. <span class="id">destruct</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="id">split</span>. <span class="id">auto</span>. <span class="id">split</span>. <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">sf;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_Lt">Rcompare_Lt</a></span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_lt_0">F2R_lt_0</a></span>. <span class="id">simpl</span>. <span class="id">compute;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_Gt">Rcompare_Gt</a></span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_gt_0">F2R_gt_0</a></span>. <span class="id">simpl</span>. <span class="id">compute;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">intros</span> <span class="id">A</span>. <span class="id">rewrite</span> <span class="id">A</span>. <span class="id">f_equal</span>. <span class="id">destruct</span> <span class="id">sf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_true">Rlt_bool_true</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_lt_0">F2R_lt_0</a></span>. <span class="id">simpl</span>. <span class="id">compute;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_false">Rlt_bool_false</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_lt">Rgt_lt</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_gt_0">F2R_gt_0</a></span>. <span class="id">simpl</span>. <span class="id">compute;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Converting a finite FP number to higher or equal precision preserves its value. </div>
<br/>
<span class="vernacular">Theorem</span> <span id="Bconv_widen_exact" class="id"><a name="Bconv_widen_exact" class="">Bconv_widen_exact:</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span>)%<span class="id">Z</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="conv_nan:206" class="id"><a name="conv_nan:206" class="">conv_nan</a></span> <span id="m:207" class="id"><a name="m:207" class="">m</a></span> <span id="f:208" class="id"><a name="f:208" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:208">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:206">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:207">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:208">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:208">f</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:206">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:207">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:208">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:206">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:207">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:208">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bsign">Bsign</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:208">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">PREC</span> <span class="id">EMAX;</span> <span class="id">intros</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv_correct">Bconv_correct</a></span> <span class="id">conv_nan</span> <span class="id">m</span> <span class="id">f</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">LT:</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#::R_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">f;</span> <span class="id">try</span> <span class="id">discriminate;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="Flocq.Core.Raux.html#bpow">bpow</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_cond_Zopp">F2R_cond_Zopp</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#abs_cond_Ropp">abs_cond_Ropp</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>. <span class="id">simpl</span> <span class="id">Z.abs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#bounded_lt_emax">bounded_lt_emax;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_le">bpow_le</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">EQ:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.fexp2">fexp2</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id">m</span>) (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span> <span class="id">f</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#valid_rnd_round_mode">valid_rnd_round_mode</a></span>. <span class="id">eapply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#generic_inclusion_le">generic_inclusion_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">5:</span> <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#generic_format_B2R">generic_format_B2R</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#fexp_correct">fexp_correct;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#fexp_correct">fexp_correct;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span>). <span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#fexp">fexp,</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#fexp2">fexp2,</a></span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span>. <span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Floats.SpecFloat.html#emin">emin,</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#emin2">emin2</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_true">Rlt_bool_true</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Conversion from integers and change of format </div>
<br/>
<span class="vernacular">Theorem</span> <span id="Bconv_BofZ" class="id"><a name="Bconv_BofZ" class="">Bconv_BofZ:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="conv_nan:209" class="id"><a name="conv_nan:209" class="">conv_nan</a></span> <span id="n:210" class="id"><a name="n:210" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#integer_representable">integer_representable</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:210">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:209">conv_nan</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.Hmax1">Hmax1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:210">n</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.Hmax2">Hmax2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:210">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ_representable">BofZ_representable</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.Hmax1">Hmax1</a></span> <span class="id">n</span> <span class="id">H</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f</span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1_gt_0_">prec1_gt_0_</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.Hmax1">Hmax1</a></span> <span class="id">n</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv_correct">Bconv_correct</a></span> <span class="id">conv_nan</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> <span class="id">f</span> <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#BofZ">BofZ</a></span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#binary_normalize_correct">binary_normalize_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.Hmax2">Hmax2</a></span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#mode_NE">mode_NE</a></span> <span class="id">n</span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emin2">emin2;</a></span> <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.fexp2">fexp2</a></span>. <span class="id">rewrite</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R</a></span> <span class="id">{|</span> <span class="id"><a href="Flocq.Core.Defs.html#Fnum">Fnum</a></span> <span class="id">:=</span> <span class="id">n;</span> <span class="id"><a href="Flocq.Core.Defs.html#Fexp">Fexp</a></span> <span class="id">:=</span> <span class="id">0</span> <span class="id">|}</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#IZR">IZR</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
<span class="id">-</span> <span class="id">intros</span> (<span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>) (<span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>). <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R_Bsign_inj">B2R_Bsign_inj;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id">P,</span> <span class="id">D</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">F,</span> <span class="id">C,</span> <span class="id">R</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rcompare_IZR">Rcompare_IZR</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb">Z.ltb</a></span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2FF_inj">B2FF_inj</a></span>. <span class="id">rewrite</span> <span class="id">P,</span> <span class="id">Q</span>. <span class="id">rewrite</span> <span class="id">C</span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="Flocq.Core.Zaux.html#Zlt_bool_spec">Zlt_bool_spec</a></span> <span class="id">n</span> <span class="id">0</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">LT;</span> <span class="id">inversion</span> <span class="id">LT</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_true">Rlt_bool_true;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_lt">IZR_lt;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_false">Rlt_bool_false;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#IZR_le">IZR_le;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="Flocq.Core.Defs.html#F2R">F2R;</a></span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Change of format (to higher precision) and conversion to integer. </div>
<br/>
<span class="vernacular">Theorem</span> <span id="ZofB_Bconv" class="id"><a name="ZofB_Bconv" class="">ZofB_Bconv:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="conv_nan:211" class="id"><a name="conv_nan:211" class="">conv_nan</a></span> <span id="m:212" class="id"><a name="m:212" class="">m</a></span> <span id="f:213" class="id"><a name="f:213" class="">f</a></span> <span id="n:214" class="id"><a name="n:214" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:213">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:214">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB">ZofB</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:211">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:212">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:213">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:214">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_correct">ZofB_correct</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>) <span class="id">eqn:FIN;</span> <span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv_widen_exact">Bconv_widen_exact</a></span> <span class="id">H</span> <span class="id">H0</span> <span class="id">conv_nan</span> <span class="id">m</span> <span class="id">f</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_correct">ZofB_correct</a></span>. <span class="id">rewrite</span> <span class="id">B</span>. <span class="id">rewrite</span> <span class="id">A</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="ZofB_range_Bconv" class="id"><a name="ZofB_range_Bconv" class="">ZofB_range_Bconv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="min1:215" class="id"><a name="min1:215" class="">min1</a></span> <span id="max1:216" class="id"><a name="max1:216" class="">max1</a></span> <span id="min2:217" class="id"><a name="min2:217" class="">min2</a></span> <span id="max2:218" class="id"><a name="max2:218" class="">max2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#min2:217">min2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#min1:215">min1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#max1:216">max1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#max2:218">max2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="conv_nan:219" class="id"><a name="conv_nan:219" class="">conv_nan</a></span> <span id="m:220" class="id"><a name="m:220" class="">m</a></span> <span id="f:221" class="id"><a name="f:221" class="">f</a></span> <span id="n:222" class="id"><a name="n:222" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range">ZofB_range</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:221">f</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#min1:215">min1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#max1:216">max1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:222">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range">ZofB_range</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:219">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:220">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:221">f</a></span>) <span class="id"><a href="compcert.lib.IEEE754_extra.html#min2:217">min2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#max2:218">max2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#n:222">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range_inversion">ZofB_range_inversion</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_range">ZofB_range</a></span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#ZofB_Bconv">ZofB_Bconv</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="Flocq.Core.Zaux.html#Zle_bool_true">Zle_bool_true</a></span> <span class="gallina-kwd">by</span> <span class="id">lia</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Change of format (to higher precision) and comparison. </div>
<br/>
<span class="vernacular">Theorem</span> <span id="Bcompare_Bconv_widen" class="id"><a name="Bcompare_Bconv_widen" class="">Bcompare_Bconv_widen:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec2">prec2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.prec1">prec1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax2">emax2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions.emax1">emax1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="conv_nan:223" class="id"><a name="conv_nan:223" class="">conv_nan</a></span> <span id="m:224" class="id"><a name="m:224" class="">m</a></span> <span id="x:225" class="id"><a name="x:225" class="">x</a></span> <span id="y:226" class="id"><a name="y:226" class="">y,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#Bcompare">Bcompare</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:223">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:224">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:225">x</a></span>) (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#conv_nan:223">conv_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:224">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:226">y</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bcompare">Bcompare</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#x:225">x</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#y:226">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">x</span> &amp;&amp; <span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">y</span>) <span class="id">eqn:FIN</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">FIN</span>. <span class="id">destruct</span> <span class="id">FIN</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv_widen_exact">Bconv_widen_exact</a></span> <span class="id">H</span> <span class="id">H0</span> <span class="id">conv_nan</span> <span class="id">m</span> <span class="id">x</span> <span class="id">H1</span>) <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv_widen_exact">Bconv_widen_exact</a></span> <span class="id">H</span> <span class="id">H0</span> <span class="id">conv_nan</span> <span class="id">m</span> <span class="id">y</span> <span class="id">H2</span>) <span class="gallina-kwd">as</span> (<span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#Bcompare_correct">Bcompare_correct</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">A,</span> <span class="id">D</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv_widen_exact">Bconv_widen_exact</a></span> <span class="id">H</span> <span class="id">H0</span> <span class="id">conv_nan</span> <span class="id">m</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv_widen_exact">Bconv_widen_exact</a></span> <span class="id">H</span> <span class="id">H0</span> <span class="id">conv_nan</span> <span class="id">m</span> <span class="id">y</span>)<span class="id">;</span> <span class="id">intros</span> <span class="id">P</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">x</span> <span class="gallina-kwd">as</span> <span class="id">[sx|sx|sx</span> <span class="id">px</span> <span class="id">Hx|sx</span> <span class="id">mx</span> <span class="id">ex</span> <span class="id">Hx],</span> <span class="id">y</span> <span class="gallina-kwd">as</span> <span class="id">[sy|sy|sy</span> <span class="id">py</span> <span class="id">Hy|sy</span> <span class="id">my</span> <span class="id">ey</span> <span class="id">Hy];</span> <span class="id">try</span> <span class="id">discriminate;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">P,</span> <span class="id">Q;</span> <span class="id">simpl;</span><br/>
&nbsp;&nbsp;<span class="id">repeat</span> (<span class="gallina-kwd">match</span> <span class="id">goal</span> <span class="gallina-kwd">with</span> <span class="id">|-</span> <span class="id">context</span> <span class="id">[conv_nan</span> <span class="id">?b</span> <span class="id">?pl]</span> <span class="id">=&gt;</span> <span class="id">destruct</span> (<span class="id">conv_nan</span> <span class="id">b</span> <span class="id">pl</span>) <span class="gallina-kwd">end</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">Q</span> <span class="gallina-kwd">as</span> (<span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">destruct</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#binary_normalize">binary_normalize</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">P</span> <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">destruct</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#binary_normalize">binary_normalize</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">P</span> <span class="gallina-kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">destruct</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#binary_normalize">binary_normalize</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Conversions">Conversions</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="Compose_Conversions" class="id"><a name="Compose_Conversions" class="">Compose_Conversions</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Compose_Conversions.prec1" class="id"><a name="Compose_Conversions.prec1" class="">prec1</a></span> <span id="Compose_Conversions.emax1" class="id"><a name="Compose_Conversions.emax1" class="">emax1</a></span> <span id="Compose_Conversions.prec2" class="id"><a name="Compose_Conversions.prec2" class="">prec2</a></span> <span id="Compose_Conversions.emax2" class="id"><a name="Compose_Conversions.emax2" class="">emax2</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="vernacular">Context</span> (<span id="prec1_gt_0_:231" class="id"><a name="prec1_gt_0_:231" class="">prec1_gt_0_</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec1">prec1</a></span>) (<span id="prec2_gt_0_:232" class="id"><a name="prec2_gt_0_:232" class="">prec2_gt_0_</a></span> <span class="id">:</span> <span class="id"><a href="Flocq.Core.FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec2">prec2</a></span>).<br/>
<span class="vernacular">Let</span> <span id="Compose_Conversions.emin1" class="id"><a name="Compose_Conversions.emin1" class="">emin1</a></span> <span class="id">:=</span> (<span class="id">3</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax1">emax1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec1">prec1</a></span>)%<span class="id">Z</span>.<br/>
<span class="vernacular">Let</span> <span id="Compose_Conversions.fexp1" class="id"><a name="Compose_Conversions.fexp1" class="">fexp1</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emin1">emin1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec1">prec1</a></span>.<br/>
<span class="vernacular">Let</span> <span id="Compose_Conversions.emin2" class="id"><a name="Compose_Conversions.emin2" class="">emin2</a></span> <span class="id">:=</span> (<span class="id">3</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax2">emax2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x">-</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec2">prec2</a></span>)%<span class="id">Z</span>.<br/>
<span class="vernacular">Let</span> <span id="Compose_Conversions.fexp2" class="id"><a name="Compose_Conversions.fexp2" class="">fexp2</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.Core.FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emin2">emin2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec2">prec2</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="Compose_Conversions.Hmax1" class="id"><a name="Compose_Conversions.Hmax1" class="">Hmax1</a></span> <span class="id">:</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec1">prec1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax1">emax1</a></span>)%<span class="id">Z</span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="Compose_Conversions.Hmax2" class="id"><a name="Compose_Conversions.Hmax2" class="">Hmax2</a></span> <span class="id">:</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec2">prec2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax2">emax2</a></span>)%<span class="id">Z</span>.<br/>
<span class="vernacular">Let</span> <span id="Compose_Conversions.binary_float1" class="id"><a name="Compose_Conversions.binary_float1" class="">binary_float1</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#binary_float">binary_float</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax1">emax1</a></span>.<br/>
<span class="vernacular">Let</span> <span id="Compose_Conversions.binary_float2" class="id"><a name="Compose_Conversions.binary_float2" class="">binary_float2</a></span> <span class="id">:=</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#binary_float">binary_float</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec2">prec2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax2">emax2</a></span>.<br/>
<br/>
<div class="doc">Converting to a higher precision then down to the original format
    is the identity. </div>
<span class="vernacular">Theorem</span> <span id="Bconv_narrow_widen" class="id"><a name="Bconv_narrow_widen" class="">Bconv_narrow_widen:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec2">prec2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec1">prec1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax2">emax2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax1">emax1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="narrow_nan:235" class="id"><a name="narrow_nan:235" class="">narrow_nan</a></span> <span id="widen_nan:236" class="id"><a name="widen_nan:236" class="">widen_nan</a></span> <span id="m:237" class="id"><a name="m:237" class="">m</a></span> <span id="f:238" class="id"><a name="f:238" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="Flocq.IEEE754.Binary.html#is_nan">is_nan</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:238">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec2">prec2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax2">emax2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax1">emax1</a></span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.Hmax1">Hmax1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#narrow_nan:235">narrow_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:237">m</a></span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax1">emax1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec2">prec2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax2">emax2</a></span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.Hmax2">Hmax2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#widen_nan:236">widen_nan</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#m:237">m</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:238">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#f:238">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="Flocq.IEEE754.Binary.html#is_finite">is_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>) <span class="id">eqn:FIN</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id">EQ:</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round">round</a></span> <span class="id"><a href="Flocq.Core.Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.fexp1">fexp1</a></span> (<span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#round_mode">round_mode</a></span> <span class="id">m</span>) (<span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax1">emax1</a></span> <span class="id">f</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R">B2R</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax1">emax1</a></span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Generic_fmt.html#round_generic">round_generic</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.BinarySingleNaN.html#valid_rnd_round_mode">valid_rnd_round_mode</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#generic_format_B2R">generic_format_B2R</a></span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv_widen_exact">Bconv_widen_exact</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.Hmax2">Hmax2</a></span> <span class="id">H</span> <span class="id">H0</span> <span class="id">widen_nan</span> <span class="id">m</span> <span class="id">f</span> <span class="id">FIN</span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">f'</span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv">Bconv</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec1">prec1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax1">emax1</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.prec2">prec2</a></span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emax2">emax2</a></span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.Hmax2">Hmax2</a></span> <span class="id">widen_nan</span> <span class="id">m</span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.IEEE754_extra.html#Bconv_correct">Bconv_correct</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.Hmax1">Hmax1</a></span> <span class="id">narrow_nan</span> <span class="id">m</span> <span class="id">f'</span> <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.emin1">emin1</a></span>. <span class="id">fold</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions.fexp1">fexp1</a></span>. <span class="id">rewrite</span> <span class="id">A,</span> <span class="id">C,</span> <span class="id">EQ</span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#Rlt_bool_true">Rlt_bool_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#B2R_Bsign_inj">B2R_Bsign_inj;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">f;</span> <span class="id">try</span> <span class="id">discriminate;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>. <span class="id">apply</span> <span class="id"><a href="Flocq.Core.Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_cond_Zopp">F2R_cond_Zopp</a></span>. <span class="id">rewrite</span> <span class="id"><a href="Flocq.Core.Raux.html#abs_cond_Ropp">abs_cond_Ropp</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="Flocq.Core.Float_prop.html#F2R_Zabs">F2R_Zabs</a></span>. <span class="id">simpl</span> <span class="id">Z.abs</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="Flocq.IEEE754.Binary.html#bounded_lt_emax">bounded_lt_emax;</a></span> <span class="id">eauto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">f;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.IEEE754_extra.html#Compose_Conversions">Compose_Conversions</a></span>.<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
