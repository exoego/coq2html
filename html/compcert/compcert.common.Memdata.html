
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Memdata</title>
<meta name="description" content="Documentation of Coq module Memdata" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module Memdata</h1>
<br/>
<div class="doc">In-memory representation of values. </div>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Zbits.html">Zbits</a></span>.<br/>
<span class="vernacular">Require</span> <span class="id"><a href="compcert.x86_64.Archi.html">Archi</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span>.<br/>
<br/>
<h1> Properties of memory chunks </h1>
<br/>
<div class="doc">Memory reads and writes are performed by quantities called memory chunks,
  encoding the type, size and signedness of the chunk being addressed.
  The following functions extract the size information from a chunk. </div>
<br/>
<span class="vernacular">Definition</span> <span id="size_chunk" class="id"><a name="size_chunk" class="">size_chunk</a></span> (<span id="chunk:1" class="id"><a name="chunk:1" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#chunk:1">chunk</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id">=&gt;</span> <span class="id">1</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id">=&gt;</span> <span class="id">1</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id">=&gt;</span> <span class="id">2</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id">=&gt;</span> <span class="id">2</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">=&gt;</span> <span class="id">4</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">=&gt;</span> <span class="id">8</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> <span class="id">=&gt;</span> <span class="id">4</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> <span class="id">=&gt;</span> <span class="id">8</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id">=&gt;</span> <span class="id">4</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> <span class="id">=&gt;</span> <span class="id">8</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="size_chunk_pos" class="id"><a name="size_chunk_pos" class="">size_chunk_pos:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:3" class="id"><a name="chunk:3" class="">chunk,</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:3">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">simpl;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="size_chunk_nat" class="id"><a name="size_chunk_nat" class="">size_chunk_nat</a></span> (<span id="chunk:4" class="id"><a name="chunk:4" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span>(<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:4">chunk</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="size_chunk_conv" class="id"><a name="size_chunk_conv" class="">size_chunk_conv:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:5" class="id"><a name="chunk:5" class="">chunk,</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:5">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:5">chunk</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="size_chunk_nat_pos" class="id"><a name="size_chunk_nat_pos" class="">size_chunk_nat_pos:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:6" class="id"><a name="chunk:6" class="">chunk,</a></span> <span class="gallina-kwd">exists</span> <span id="n:7" class="id"><a name="n:7" class="">n,</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:6">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:7">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>). <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>).<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="gallina-kwd">exists</span> <span class="id">n;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="size_chunk_Mptr" class="id"><a name="size_chunk_Mptr" class="">size_chunk_Mptr:</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id">8</span> <span class="gallina-kwd">else</span> <span class="id">4</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr;</a></span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Memory reads and writes must respect alignment constraints:
  the byte offset of the location being addressed should be an exact
  multiple of the natural alignment for the chunk being addressed.
  This natural alignment is defined by the following
  <span class="bracket"><span class="id">align_chunk</span></span> function.  Some target architectures
  (e.g. PowerPC and x86) have no alignment constraints, which we could
  reflect by taking <span class="bracket"><span class="id">align_chunk</span> <span class="id">chunk</span> = 1</span>.  However, other architectures
  have stronger alignment requirements.  The following definition is
  appropriate for PowerPC, ARM and x86. </div>
<br/>
<span class="vernacular">Definition</span> <span id="align_chunk" class="id"><a name="align_chunk" class="">align_chunk</a></span> (<span id="chunk:8" class="id"><a name="chunk:8" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#chunk:8">chunk</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id">=&gt;</span> <span class="id">1</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id">=&gt;</span> <span class="id">1</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id">=&gt;</span> <span class="id">2</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id">=&gt;</span> <span class="id">2</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">=&gt;</span> <span class="id">4</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">=&gt;</span> <span class="id">8</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> <span class="id">=&gt;</span> <span class="id">4</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> <span class="id">=&gt;</span> <span class="id">4</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id">=&gt;</span> <span class="id">4</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> <span class="id">=&gt;</span> <span class="id">4</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="align_chunk_pos" class="id"><a name="align_chunk_pos" class="">align_chunk_pos:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:10" class="id"><a name="chunk:10" class="">chunk,</a></span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:10">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">intro</span>. <span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">simpl;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="align_chunk_Mptr" class="id"><a name="align_chunk_Mptr" class="">align_chunk_Mptr:</a></span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id">8</span> <span class="gallina-kwd">else</span> <span class="id">4</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr;</a></span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="align_size_chunk_divides" class="id"><a name="align_size_chunk_divides" class="">align_size_chunk_divides:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:11" class="id"><a name="chunk:11" class="">chunk,</a></span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:11">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:11">chunk</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">simpl;</span> <span class="id">try</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_refl">Z.divide_refl</a></span><span class="id">;</span> <span class="gallina-kwd">exists</span> <span class="id">2;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="align_le_divides" class="id"><a name="align_le_divides" class="">align_le_divides:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk1:12" class="id"><a name="chunk1:12" class="">chunk1</a></span> <span id="chunk2:13" class="id"><a name="chunk2:13" class="">chunk2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk1:12">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk2:13">chunk2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk1:12">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk2:13">chunk2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">chunk1;</span> <span class="id">destruct</span> <span class="id">chunk2;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span><br/>
&nbsp;&nbsp;<span class="id">solve</span> <span class="id">[</span> <span class="id">extlia</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_refl">Z.divide_refl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="gallina-kwd">exists</span> <span class="id">2;</span> <span class="id">reflexivity</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="gallina-kwd">exists</span> <span class="id">4;</span> <span class="id">reflexivity</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="gallina-kwd">exists</span> <span class="id">8;</span> <span class="id">reflexivity</span> <span class="id">]</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Inductive</span> <span id="quantity" class="id"><a name="quantity" class="">quantity</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id">:=</span> <span id="Q32" class="id"><a name="Q32" class="">Q32</a></span> <span class="id">|</span> <span id="Q64" class="id"><a name="Q64" class="">Q64</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="quantity_eq" class="id"><a name="quantity_eq" class="">quantity_eq</a></span> (<span id="q1:16" class="id"><a name="q1:16" class="">q1</a></span> <span id="q2:17" class="id"><a name="q2:17" class="">q2:</a></span> <span class="id"><a href="compcert.common.Memdata.html#quantity">quantity</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{q1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#q2:17">q2}</a></span> <span class="id">+</span> <span class="id">{q1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#q2:17">q2}</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
 <span class="id">decide</span> <span class="id">equality</span>. Defined.</div>
<span class="id">Global</span> <span class="vernacular">Opaque</span> <span class="id"><a href="compcert.common.Memdata.html#quantity_eq">quantity_eq</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="size_quantity_nat" class="id"><a name="size_quantity_nat" class="">size_quantity_nat</a></span> (<span id="q:18" class="id"><a name="q:18" class="">q:</a></span> <span class="id"><a href="compcert.common.Memdata.html#quantity">quantity</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#q:18">q</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Memdata.html#Q32">Q32</a></span> <span class="id">=&gt;</span> <span class="id">4</span>%<span class="id">nat</span> <span class="id">|</span> <span class="id"><a href="compcert.common.Memdata.html#Q64">Q64</a></span> <span class="id">=&gt;</span> <span class="id">8</span>%<span class="id">nat</span> <span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="size_quantity_nat_pos" class="id"><a name="size_quantity_nat_pos" class="">size_quantity_nat_pos:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="q:20" class="id"><a name="q:20" class="">q,</a></span> <span class="gallina-kwd">exists</span> <span id="n:21" class="id"><a name="n:21" class="">n,</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:20">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:21">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">q;</span> <span class="id">[exists</span> <span class="id">3</span>%<span class="id">nat</span> <span class="id">|</span> <span class="gallina-kwd">exists</span> <span class="id">7</span>%<span class="id">nat];</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Memory values </h1>
<br/>
<div class="doc">A ``memory value'' is a byte-sized quantity that describes the current
  content of a memory cell.  It can be either:
<ul>
<li>
 a concrete 8-bit integer;
</li>
<li>
 a byte-sized fragment of an opaque value;
</li>
<li>
 the special constant <span class="bracket"><span class="id">Undef</span></span> that represents uninitialized memory.
</li>
</ul>
</div>
<br/>
<div class="doc">Values stored in memory cells. </div>
<br/>
<span class="vernacular">Inductive</span> <span id="memval" class="id"><a name="memval" class="">memval:</a></span> <span class="gallina-kwd">Type</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="Undef" class="id"><a name="Undef" class="">Undef:</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval:22">memval</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="Byte" class="id"><a name="Byte" class="">Byte:</a></span> <span class="id"><a href="compcert.lib.Integers.html#byte">byte</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval:22">memval</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="Fragment" class="id"><a name="Fragment" class="">Fragment:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#quantity">quantity</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval:22">memval</a></span>.<br/>
<br/>
<h1> Encoding and decoding integers </h1>
<br/>
<div class="doc">We define functions to convert between integers and lists of bytes
  of a given length </div>
<br/>
<span class="vernacular">Fixpoint</span> <span id="bytes_of_int" class="id"><a name="bytes_of_int" class="">bytes_of_int</a></span> (<span id="n:24" class="id"><a name="n:24" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span id="x:25" class="id"><a name="x:25" class="">x:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">{struct</span> <span class="id">n}:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.lib.Integers.html#byte">byte</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#n:24">n</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Integers.html#Byte.repr">Byte.repr</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:25">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memdata.html#bytes_of_int:26">bytes_of_int</a></span> <span class="id">m</span> (<span class="id"><a href="compcert.common.Memdata.html#x:25">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3c2652250c7a120d67ccc0e8f58ae75">/</a></span> <span class="id">256</span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="int_of_bytes" class="id"><a name="int_of_bytes" class="">int_of_bytes</a></span> (<span id="l:28" class="id"><a name="l:28" class="">l:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.lib.Integers.html#byte">byte</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#l:28">l</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id">0</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">l'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Integers.html#Byte.unsigned">Byte.unsigned</a></span> <span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#int_of_bytes:29">int_of_bytes</a></span> <span class="id">l'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">256</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="rev_if_be" class="id"><a name="rev_if_be" class="">rev_if_be</a></span> (<span id="l:31" class="id"><a name="l:31" class="">l:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.lib.Integers.html#byte">byte</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.lib.Integers.html#byte">byte</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev">List.rev</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:31">l</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memdata.html#l:31">l</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="encode_int" class="id"><a name="encode_int" class="">encode_int</a></span> (<span id="sz:32" class="id"><a name="sz:32" class="">sz:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span id="x:33" class="id"><a name="x:33" class="">x:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.lib.Integers.html#byte">byte</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be</a></span> (<span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="id"><a href="compcert.common.Memdata.html#sz:32">sz</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:33">x</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="decode_int" class="id"><a name="decode_int" class="">decode_int</a></span> (<span id="b:34" class="id"><a name="b:34" class="">b:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.lib.Integers.html#byte">byte</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#int_of_bytes">int_of_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be</a></span> <span class="id"><a href="compcert.common.Memdata.html#b:34">b</a></span>).<br/>
<br/>
<div class="doc">Length properties </div>
<br/>
<span class="vernacular">Lemma</span> <span id="length_bytes_of_int" class="id"><a name="length_bytes_of_int" class="">length_bytes_of_int:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:35" class="id"><a name="n:35" class="">n</a></span> <span id="x:36" class="id"><a name="x:36" class="">x,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:35">n</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:36">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:35">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">auto</span>. <span class="id">decEq</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="rev_if_be_length" class="id"><a name="rev_if_be_length" class="">rev_if_be_length:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:37" class="id"><a name="l:37" class="">l,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:37">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:37">l</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be;</a></span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev_length">List.rev_length</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_int_length" class="id"><a name="encode_int_length" class="">encode_int_length:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="sz:38" class="id"><a name="sz:38" class="">sz</a></span> <span id="x:39" class="id"><a name="x:39" class="">x,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span>(<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id"><a href="compcert.common.Memdata.html#sz:38">sz</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:39">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#sz:38">sz</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#rev_if_be_length">rev_if_be_length</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#length_bytes_of_int">length_bytes_of_int</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Decoding after encoding </div>
<br/>
<span class="vernacular">Lemma</span> <span id="int_of_bytes_of_int" class="id"><a name="int_of_bytes_of_int" class="">int_of_bytes_of_int:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:40" class="id"><a name="n:40" class="">n</a></span> <span id="x:41" class="id"><a name="x:41" class="">x,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#int_of_bytes">int_of_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:40">n</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:41">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:41">x</a></span> <span class="id">mod</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:40">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Zmod_1_r">Zmod_1_r</a></span>. <span class="id">auto</span>.<br/>
<span class="vernacular">Opaque</span> <span class="id"><a href="compcert.lib.Integers.html#Byte.wordsize">Byte.wordsize</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">8</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p_is_exp">two_p_is_exp;</a></span> <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zmod_recombine">Zmod_recombine</a></span>. <span class="id">rewrite</span> <span class="id">IHn</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_comm">Z.add_comm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.lib.Integers.html#Byte.unsigned">Byte.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Byte.repr">Byte.repr</a></span> <span class="id">x</span>)) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Byte.Z_mod_modulus">Byte.Z_mod_modulus</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Byte.Z_mod_modulus_eq">Byte.Z_mod_modulus_eq</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p_gt_ZERO">two_p_gt_ZERO</a></span>. <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p_gt_ZERO">two_p_gt_ZERO</a></span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="rev_if_be_involutive" class="id"><a name="rev_if_be_involutive" class="">rev_if_be_involutive:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:42" class="id"><a name="l:42" class="">l,</a></span> <span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be</a></span> (<span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:42">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:42">l</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be;</a></span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev_involutive">List.rev_involutive</a></span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_encode_int" class="id"><a name="decode_encode_int" class="">decode_encode_int:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:43" class="id"><a name="n:43" class="">n</a></span> <span id="x:44" class="id"><a name="x:44" class="">x,</a></span> <span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:43">n</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:44">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:44">x</a></span> <span class="id">mod</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:43">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int,</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int;</a></span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#rev_if_be_involutive">rev_if_be_involutive</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#int_of_bytes_of_int">int_of_bytes_of_int</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_encode_int_1" class="id"><a name="decode_encode_int_1" class="">decode_encode_int_1:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:45" class="id"><a name="x:45" class="">x,</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">1</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:45">x</a></span>))) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">8</span> <span class="id"><a href="compcert.common.Memdata.html#x:45">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_int">decode_encode_int</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr_unsigned">Int.repr_unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">8</span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;<span class="id">decEq</span>. <span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext_mod">Int.zero_ext_mod</a></span>. <span class="id">compute</span>. <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_encode_int_2" class="id"><a name="decode_encode_int_2" class="">decode_encode_int_2:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:46" class="id"><a name="x:46" class="">x,</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">2</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:46">x</a></span>))) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">16</span> <span class="id"><a href="compcert.common.Memdata.html#x:46">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_int">decode_encode_int</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr_unsigned">Int.repr_unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">16</span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;<span class="id">decEq</span>. <span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext_mod">Int.zero_ext_mod</a></span>. <span class="id">compute;</span> <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_encode_int_4" class="id"><a name="decode_encode_int_4" class="">decode_encode_int_4:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:47" class="id"><a name="x:47" class="">x,</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">4</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:47">x</a></span>))) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:47">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_int">decode_encode_int</a></span>. <span class="id">transitivity</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;<span class="id">decEq</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mod_small">Z.mod_small</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.repr_unsigned">Int.repr_unsigned</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_encode_int_8" class="id"><a name="decode_encode_int_8" class="">decode_encode_int_8:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:48" class="id"><a name="x:48" class="">x,</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">8</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.unsigned">Int64.unsigned</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:48">x</a></span>))) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:48">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_int">decode_encode_int</a></span>. <span class="id">transitivity</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.unsigned">Int64.unsigned</a></span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;<span class="id">decEq</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mod_small">Z.mod_small</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.unsigned_range">Int64.unsigned_range</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.repr_unsigned">Int64.repr_unsigned</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">A length-<span class="bracket"><span class="id">n</span></span> encoding depends only on the low <span class="bracket">8*<span class="id">n</span></span> bits of the integer. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="bytes_of_int_mod" class="id"><a name="bytes_of_int_mod" class="">bytes_of_int_mod:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:49" class="id"><a name="n:49" class="">n</a></span> <span id="x:50" class="id"><a name="x:50" class="">x</a></span> <span id="y:51" class="id"><a name="y:51" class="">y,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Zbits.html#eqmod">eqmod</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:49">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>)) <span class="id"><a href="compcert.common.Memdata.html#x:50">x</a></span> <span class="id"><a href="compcert.common.Memdata.html#y:51">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:49">n</a></span> <span class="id"><a href="compcert.common.Memdata.html#x:50">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:49">n</a></span> <span class="id"><a href="compcert.common.Memdata.html#y:51">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">8</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p_is_exp">two_p_is_exp;</a></span> <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intro</span> <span class="id">EQM</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Byte.eqm_samerepr">Byte.eqm_samerepr</a></span>. <span class="id">red</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.lib.Zbits.html#eqmod_divides">eqmod_divides;</a></span> <span class="id">eauto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_factor_r">Z.divide_factor_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHn</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">EQM</span> <span class="gallina-kwd">as</span> <span class="id">[k</span> <span class="id">EQ]</span>. <span class="gallina-kwd">exists</span> <span class="id">k</span>. <span class="id">rewrite</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_plus_full_l">Z_div_plus_full_l</a></span>. <span class="id">decEq</span>. <span class="id">change</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> <span class="id">8</span>) <span class="gallina-kwd">with</span> <span class="id">256</span>. <span class="id">ring</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_int_8_mod" class="id"><a name="encode_int_8_mod" class="">encode_int_8_mod:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:52" class="id"><a name="x:52" class="">x</a></span> <span id="y:53" class="id"><a name="y:53" class="">y,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Zbits.html#eqmod">eqmod</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> <span class="id">8</span>) <span class="id"><a href="compcert.common.Memdata.html#x:52">x</a></span> <span class="id"><a href="compcert.common.Memdata.html#y:53">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">1</span>%<span class="id">nat</span> <span class="id"><a href="compcert.common.Memdata.html#x:52">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">1</span>%<span class="id">nat</span> <span class="id"><a href="compcert.common.Memdata.html#y:53">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span>. <span class="id">decEq</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#bytes_of_int_mod">bytes_of_int_mod</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_int_16_mod" class="id"><a name="encode_int_16_mod" class="">encode_int_16_mod:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:54" class="id"><a name="x:54" class="">x</a></span> <span id="y:55" class="id"><a name="y:55" class="">y,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Zbits.html#eqmod">eqmod</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> <span class="id">16</span>) <span class="id"><a href="compcert.common.Memdata.html#x:54">x</a></span> <span class="id"><a href="compcert.common.Memdata.html#y:55">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">2</span>%<span class="id">nat</span> <span class="id"><a href="compcert.common.Memdata.html#x:54">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">2</span>%<span class="id">nat</span> <span class="id"><a href="compcert.common.Memdata.html#y:55">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span>. <span class="id">decEq</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#bytes_of_int_mod">bytes_of_int_mod</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Encoding and decoding values </h1>
<br/>
<span class="vernacular">Definition</span> <span id="inj_bytes" class="id"><a name="inj_bytes" class="">inj_bytes</a></span> (<span id="bl:56" class="id"><a name="bl:56" class="">bl:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.lib.Integers.html#byte">byte</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:56">bl</a></span>.<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="proj_bytes" class="id"><a name="proj_bytes" class="">proj_bytes</a></span> (<span id="vl:57" class="id"><a name="vl:57" class="">vl:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.lib.Integers.html#byte">byte</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#vl:57">vl</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">vl'</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes:58">proj_bytes</a></span> <span class="id">vl'</span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">bl</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">bl</span>) <span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="length_inj_bytes" class="id"><a name="length_inj_bytes" class="">length_inj_bytes:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bl:60" class="id"><a name="bl:60" class="">bl,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:60">bl</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:60">bl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_length">List.map_length</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="proj_inj_bytes" class="id"><a name="proj_inj_bytes" class="">proj_inj_bytes:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bl:61" class="id"><a name="bl:61" class="">bl,</a></span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:61">bl</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:61">bl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">bl;</span> <span class="id">simpl</span>. <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">IHbl</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="inj_proj_bytes" class="id"><a name="inj_proj_bytes" class="">inj_proj_bytes:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cl:62" class="id"><a name="cl:62" class="">cl</a></span> <span id="bl:63" class="id"><a name="bl:63" class="">bl,</a></span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#cl:62">cl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:63">bl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#cl:62">cl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:63">bl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">cl;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a;</span> <span class="id">try</span> <span class="id">congruence</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">cl</span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">decEq</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Fixpoint</span> <span id="inj_value_rec" class="id"><a name="inj_value_rec" class="">inj_value_rec</a></span> (<span id="n:64" class="id"><a name="n:64" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span id="v:65" class="id"><a name="v:65" class="">v:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span id="q:66" class="id"><a name="q:66" class="">q:</a></span> <span class="id"><a href="compcert.common.Memdata.html#quantity">quantity</a></span>) <span class="id">{struct</span> <span class="id">n}:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#n:64">n</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:65">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:66">q</a></span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memdata.html#inj_value_rec:67">inj_value_rec</a></span> <span class="id">m</span> <span class="id"><a href="compcert.common.Memdata.html#v:65">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:66">q</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="inj_value" class="id"><a name="inj_value" class="">inj_value</a></span> (<span id="q:69" class="id"><a name="q:69" class="">q:</a></span> <span class="id"><a href="compcert.common.Memdata.html#quantity">quantity</a></span>) (<span id="v:70" class="id"><a name="v:70" class="">v:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#inj_value_rec">inj_value_rec</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:69">q</a></span>) <span class="id"><a href="compcert.common.Memdata.html#v:70">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:69">q</a></span>.<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="check_value" class="id"><a name="check_value" class="">check_value</a></span> (<span id="n:71" class="id"><a name="n:71" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span id="v:72" class="id"><a name="v:72" class="">v:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span id="q:73" class="id"><a name="q:73" class="">q:</a></span> <span class="id"><a href="compcert.common.Memdata.html#quantity">quantity</a></span>) (<span id="vl:74" class="id"><a name="vl:74" class="">vl:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{struct</span> <span class="id">n}</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#n:71">n,</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:74">vl</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">m,</span> <span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id">v'</span> <span class="id">q'</span> <span class="id">m'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">vl'</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.eq">Val.eq</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:72">v</a></span> <span class="id">v'</span> &amp;&amp; <span class="id"><a href="compcert.common.Memdata.html#quantity_eq">quantity_eq</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:73">q</a></span> <span class="id">q'</span> &amp;&amp; <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb">Nat.eqb</a></span> <span class="id">m</span> <span class="id">m'</span> &amp;&amp; <span class="id"><a href="compcert.common.Memdata.html#check_value:75">check_value</a></span> <span class="id">m</span> <span class="id"><a href="compcert.common.Memdata.html#v:72">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:73">q</a></span> <span class="id">vl'</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="proj_value" class="id"><a name="proj_value" class="">proj_value</a></span> (<span id="q:78" class="id"><a name="q:78" class="">q:</a></span> <span class="id"><a href="compcert.common.Memdata.html#quantity">quantity</a></span>) (<span id="vl:79" class="id"><a name="vl:79" class="">vl:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#vl:79">vl</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id">v</span> <span class="id">q'</span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">vl'</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.common.Memdata.html#check_value">check_value</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:78">q</a></span>) <span class="id">v</span> <span class="id"><a href="compcert.common.Memdata.html#q:78">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:79">vl</a></span> <span class="gallina-kwd">then</span> <span class="id">v</span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="encode_val" class="id"><a name="encode_val" class="">encode_val</a></span> (<span id="chunk:81" class="id"><a name="chunk:81" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span id="v:82" class="id"><a name="v:82" class="">v:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#v:82">v,</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:81">chunk</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> (<span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">1</span>%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> (<span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">2</span>%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">4</span>%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs,</span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#repeat">List.repeat</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> <span class="id">4</span>%<span class="id">nat</span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#Q32">Q32</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:82">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">8</span>%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.unsigned">Int64.unsigned</a></span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs,</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#Q64">Q64</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:82">v</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#repeat">List.repeat</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> <span class="id">8</span>%<span class="id">nat</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">4</span>%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> (<span class="id"><a href="compcert.lib.Floats.html#Float32.to_bits">Float32.to_bits</a></span> <span class="id">n</span>)))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">8</span>%<span class="id">nat</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.unsigned">Int64.unsigned</a></span> (<span class="id"><a href="compcert.lib.Floats.html#Float.to_bits">Float.to_bits</a></span> <span class="id">n</span>)))<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#Q32">Q32</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:82">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#Q64">Q64</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:82">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#repeat">List.repeat</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:81">chunk</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="decode_val" class="id"><a name="decode_val" class="">decode_val</a></span> (<span id="chunk:85" class="id"><a name="chunk:85" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span id="vl:86" class="id"><a name="vl:86" class="">vl:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:86">vl</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">bl</span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#chunk:85">chunk</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">8</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> <span class="id">bl</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">8</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> <span class="id">bl</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">16</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> <span class="id">bl</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">16</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> <span class="id">bl</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span>(<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> <span class="id">bl</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span>(<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> <span class="id">bl</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span>(<span class="id"><a href="compcert.lib.Floats.html#Float32.of_bits">Float32.of_bits</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> <span class="id">bl</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span>(<span class="id"><a href="compcert.lib.Floats.html#Float.of_bits">Float.of_bits</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> <span class="id">bl</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#chunk:85">chunk</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:85">chunk</a></span> (<span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#Q32">Q32</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:86">vl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:85">chunk</a></span> (<span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#Q32">Q32</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:86">vl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:85">chunk</a></span> (<span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#Q64">Q64</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:86">vl</a></span>) <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:85">chunk</a></span> (<span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#Q64">Q64</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:86">vl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Ltac</span> <span class="id">solve_encode_val_length</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">goal</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">|-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#length_inj_bytes">length_inj_bytes;</a></span> <span class="id">solve_encode_val_length</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">|-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_length">encode_int_length</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">|-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="gallina-kwd">if</span> <span class="id">?x</span> <span class="gallina-kwd">then</span> <span class="id">_</span> <span class="gallina-kwd">else</span> <span class="id">_</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">destruct</span> <span class="id">x</span> <span class="id">eqn:?;</span> <span class="id">solve_encode_val_length</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">reflexivity</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_val_length" class="id"><a name="encode_val_length" class="">encode_val_length:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:89" class="id"><a name="chunk:89" class="">chunk</a></span> <span id="v:90" class="id"><a name="v:90" class="">v,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span>(<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:89">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:90">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:89">chunk</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">v;</span> <span class="id">simpl;</span> <span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">solve_encode_val_length</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="check_inj_value" class="id"><a name="check_inj_value" class="">check_inj_value:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:91" class="id"><a name="v:91" class="">v</a></span> <span id="q:92" class="id"><a name="q:92" class="">q</a></span> <span id="n:93" class="id"><a name="n:93" class="">n,</a></span> <span class="id"><a href="compcert.common.Memdata.html#check_value">check_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:93">n</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:91">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:92">q</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_value_rec">inj_value_rec</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:93">n</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:91">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:92">q</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_refl">Nat.eqb_refl</a></span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="proj_inj_value" class="id"><a name="proj_inj_value" class="">proj_inj_value:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="q:94" class="id"><a name="q:94" class="">q</a></span> <span id="v:95" class="id"><a name="v:95" class="">v,</a></span> <span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:94">q</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:94">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:95">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:95">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value,</a></span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat_pos">size_quantity_nat_pos</a></span> <span class="id">q</span>) <span class="gallina-kwd">as</span> <span class="id">[n</span> <span class="id">EQ]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ</span> <span class="gallina-kwd">at</span> <span class="id">1</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#check_inj_value">check_inj_value</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="in_inj_value" class="id"><a name="in_inj_value" class="">in_inj_value:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="mv:96" class="id"><a name="mv:96" class="">mv</a></span> <span id="v:97" class="id"><a name="v:97" class="">v</a></span> <span id="q:98" class="id"><a name="q:98" class="">q,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:96">mv</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:98">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:97">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="n:99" class="id"><a name="n:99" class="">n,</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:96">mv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:97">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:98">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:99">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
<span class="vernacular">Local</span> <span class="vernacular">Transparent</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value;</a></span> <span class="id">intros</span> <span class="id">until</span> <span class="id">q</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id">q</span>). <span class="id">induction</span> <span class="id">n;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H</span>. <span class="gallina-kwd">exists</span> <span class="id">n;</span> <span class="id">auto</span>. <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="proj_inj_value_mismatch" class="id"><a name="proj_inj_value_mismatch" class="">proj_inj_value_mismatch:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="q1:100" class="id"><a name="q1:100" class="">q1</a></span> <span id="q2:101" class="id"><a name="q2:101" class="">q2</a></span> <span id="v:102" class="id"><a name="v:102" class="">v,</a></span> <span class="id"><a href="compcert.common.Memdata.html#q1:100">q1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#q2:101">q2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q1:100">q1</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q2:101">q2</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:102">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id">q2</span> <span class="id">v</span>) <span class="id">eqn:V</span>. <span class="id">auto</span>. <span class="id">destruct</span> <span class="id">m;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#in_inj_value">in_inj_value</a></span> (<span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id">v0</span> <span class="id">q</span> <span class="id">n</span>) <span class="id">v</span> <span class="id">q2</span>) <span class="gallina-kwd">as</span> <span class="id">[n'</span> <span class="id">EQ]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">V;</span> <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>. <span class="id">inv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat_pos">size_quantity_nat_pos</a></span> <span class="id">q1</span>) <span class="gallina-kwd">as</span> <span class="id">[p</span> <span class="id">EQ1];</span> <span class="id">rewrite</span> <span class="id">EQ1;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span> <span class="gallina-kwd">by</span> <span class="id">congruence</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="decode_encode_val" class="id"><a name="decode_encode_val" class="">decode_encode_val</a></span> (<span id="v1:103" class="id"><a name="v1:103" class="">v1:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span id="chunk1:104" class="id"><a name="chunk1:104" class="">chunk1</a></span> <span id="chunk2:105" class="id"><a name="chunk2:105" class="">chunk2:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span id="v2:106" class="id"><a name="v2:106" class="">v2:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#v1:103">v1,</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk1:104">chunk1,</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk2:105">chunk2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef,</a></span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">8</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">8</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">8</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">8</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">16</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">16</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">16</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">16</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32,</a></span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32,</a></span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span>(<span class="id"><a href="compcert.lib.Floats.html#Float32.of_bits">Float32.of_bits</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64,</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> (<span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>)<span class="id">,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n,</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="docright">(* nothing meaningful to say about v2  *)</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs,</span> (<span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span>)<span class="id">,</span> (<span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs,</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64,</a></span> (<span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs,</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64,</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs,</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs,</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64,</a></span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span>(<span class="id"><a href="compcert.lib.Floats.html#Float.of_bits">Float.of_bits</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n,</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64,</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n,</span> (<span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed|Mint8unsigned|Mint16signed|Mint16unsigned|Mint32|Mfloat32|Mfloat64|Many32</a></span>)<span class="id">,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n,</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="docright">(* nothing meaningful to say about v2  *)</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f,</span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64,</a></span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f,</span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span>(<span class="id"><a href="compcert.lib.Floats.html#Float.to_bits">Float.to_bits</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f,</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64,</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f,</span> (<span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed|Mint8unsigned|Mint16signed|Mint16unsigned|Mint32|Mfloat32|Mint64|Many32</a></span>)<span class="id">,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f,</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>   <br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f,</span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32,</a></span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f,</span> <span class="id"><a href="compcert.common.AST.html#Mfloat32">Mfloat32,</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.lib.Floats.html#Float32.to_bits">Float32.to_bits</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f,</span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32,</a></span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f,</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64,</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f,</span> (<span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed|Mint8unsigned|Mint16signed|Mint16unsigned|Mint32|Mint64|Mfloat64|Many64</a></span>)<span class="id">,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v2:106">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f,</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="decode_val_undef" class="id"><a name="decode_val_undef" class="">decode_val_undef:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bl:110" class="id"><a name="bl:110" class="">bl</a></span> <span id="chunk:111" class="id"><a name="chunk:111" class="">chunk,</a></span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:111">chunk</a></span> (<span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:110">bl</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span>. <span class="id">simpl</span>. <span class="id">destruct</span> <span class="id">chunk,</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="proj_bytes_inj_value" class="id"><a name="proj_bytes_inj_value" class="">proj_bytes_inj_value:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="q:112" class="id"><a name="q:112" class="">q</a></span> <span id="v:113" class="id"><a name="v:113" class="">v,</a></span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:112">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:113">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">q;</span> <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Ltac</span> <span class="id">solve_decode_encode_val_general</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">exact</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span> <span class="id">||</span> <span class="id">reflexivity</span> <span class="id">||</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">goal</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">|-</span> <span class="id">context</span> <span class="id">[</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="gallina-kwd">then</span> <span class="id">_</span> <span class="gallina-kwd">else</span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id">eqn:?</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">|-</span> <span class="id">context</span> <span class="id">[</span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> <span class="id">_</span>) <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#proj_inj_bytes">proj_inj_bytes</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">|-</span> <span class="id">context</span> <span class="id">[</span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes_inj_value">proj_bytes_inj_value</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">|-</span> <span class="id">context</span> <span class="id">[</span> <span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">rewrite</span> <span class="id">?proj_inj_value,</span> <span class="id">?proj_inj_value_mismatch</span> <span class="gallina-kwd">by</span> <span class="id">congruence</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">|-</span> <span class="id">context</span> <span class="id">[</span> <span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span>(<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">1</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">_</span>))) <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_int_1">decode_encode_int_1</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">|-</span> <span class="id">context</span> <span class="id">[</span> <span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span>(<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">2</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">_</span>))) <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_int_2">decode_encode_int_2</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">|-</span> <span class="id">context</span> <span class="id">[</span> <span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span>(<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">4</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">_</span>))) <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_int_4">decode_encode_int_4</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">|-</span> <span class="id">context</span> <span class="id">[</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span>(<span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int</a></span> <span class="id">8</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.unsigned">Int64.unsigned</a></span> <span class="id">_</span>))) <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_int_8">decode_encode_int_8</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">|-</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">_</span> <span class="id">_</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">f_equal;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext_idem">Int.sign_ext_idem</a></span><span class="id">;</span> <span class="id">lia</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">|-</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">_</span> <span class="id">_</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">f_equal;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext_idem">Int.zero_ext_idem</a></span><span class="id">;</span> <span class="id">lia</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">|-</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">_</span> <span class="id">_</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">f_equal;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext_zero_ext">Int.sign_ext_zero_ext</a></span><span class="id">;</span> <span class="id">lia</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_encode_val_general" class="id"><a name="decode_encode_val_general" class="">decode_encode_val_general:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:114" class="id"><a name="v:114" class="">v</a></span> <span id="chunk1:115" class="id"><a name="chunk1:115" class="">chunk1</a></span> <span id="chunk2:116" class="id"><a name="chunk2:116" class="">chunk2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#decode_encode_val">decode_encode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:114">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk1:115">chunk1</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk2:116">chunk2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk2:116">chunk2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk1:115">chunk1</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:114">v</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
<span class="vernacular">Opaque</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">v;</span> <span class="id">destruct</span> <span class="id">chunk1</span> <span class="id">eqn:C1;</span> <span class="id">try</span> (<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_undef">decode_val_undef</a></span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">chunk2</span> <span class="id">eqn:C2;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_val">decode_encode_val,</a></span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val,</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span><span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">solve_decode_encode_val_general</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Floats.html#Float.of_to_bits">Float.of_to_bits</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Floats.html#Float32.of_to_bits">Float32.of_to_bits</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_encode_val_similar" class="id"><a name="decode_encode_val_similar" class="">decode_encode_val_similar:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v1:117" class="id"><a name="v1:117" class="">v1</a></span> <span id="chunk1:118" class="id"><a name="chunk1:118" class="">chunk1</a></span> <span id="chunk2:119" class="id"><a name="chunk2:119" class="">chunk2</a></span> <span id="v2:120" class="id"><a name="v2:120" class="">v2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk1:118">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk2:119">chunk2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk1:118">chunk1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk2:119">chunk2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#decode_encode_val">decode_encode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#v1:117">v1</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk1:118">chunk1</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk2:119">chunk2</a></span> <span class="id"><a href="compcert.common.Memdata.html#v2:120">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#v2:120">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk2:119">chunk2</a></span> <span class="id"><a href="compcert.common.Memdata.html#v1:117">v1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">v2;</span> <span class="id">intros</span> <span class="id">TY</span> <span class="id">SZ</span> <span class="id">DE</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">chunk1;</span> <span class="id">destruct</span> <span class="id">chunk2;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">TY;</span> <span class="id">try</span> <span class="id">discriminate;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">SZ;</span> <span class="id">try</span> <span class="id">extlia;</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">v1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_val_rettype" class="id"><a name="decode_val_rettype" class="">decode_val_rettype:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:121" class="id"><a name="chunk:121" class="">chunk</a></span> <span id="cl:122" class="id"><a name="cl:122" class="">cl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.has_rettype">Val.has_rettype</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:121">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#cl:122">cl</a></span>) (<span class="id"><a href="compcert.common.AST.html#rettype_of_chunk">rettype_of_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:121">chunk</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">cl</span>).<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">simpl;</span> <span class="id">rewrite</span> <span class="id">?</span> <span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext_idem">Int.sign_ext_idem</a></span><span class="id">,</span> <span class="id">?</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext_idem">Int.zero_ext_idem</a></span> <span class="gallina-kwd">by</span> <span class="id">lia;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="vernacular">Local</span> <span class="vernacular">Opaque</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">simpl;</span><br/>
&nbsp;&nbsp;(<span class="id">exact</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span> <span class="id">||</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result_type">Val.load_result_type</a></span> <span class="id">||</span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> (<span class="id">exact</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span> <span class="id">||</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result_type">Val.load_result_type</a></span>)).<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_val_type" class="id"><a name="decode_val_type" class="">decode_val_type:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:123" class="id"><a name="chunk:123" class="">chunk</a></span> <span id="cl:124" class="id"><a name="cl:124" class="">cl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.has_type">Val.has_type</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:123">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#cl:124">cl</a></span>) (<span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:123">chunk</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.common.AST.html#proj_rettype_of_chunk">proj_rettype_of_chunk</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.has_proj_rettype">Val.has_proj_rettype</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_rettype">decode_val_rettype</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_val_int8_signed_unsigned" class="id"><a name="encode_val_int8_signed_unsigned" class="">encode_val_int8_signed_unsigned:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:125" class="id"><a name="v:125" class="">v,</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:125">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:125">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">v;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_val_int16_signed_unsigned" class="id"><a name="encode_val_int16_signed_unsigned" class="">encode_val_int16_signed_unsigned:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:126" class="id"><a name="v:126" class="">v,</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:126">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:126">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">v;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_val_int8_zero_ext" class="id"><a name="encode_val_int8_zero_ext" class="">encode_val_int8_zero_ext:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:127" class="id"><a name="n:127" class="">n,</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">8</span> <span class="id"><a href="compcert.common.Memdata.html#n:127">n</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:127">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span>. <span class="id">decEq</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_8_mod">encode_int_8_mod</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_zero_ext">Int.eqmod_zero_ext</a></span>.<br/>
&nbsp;&nbsp;<span class="id">compute;</span> <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_val_int8_sign_ext" class="id"><a name="encode_val_int8_sign_ext" class="">encode_val_int8_sign_ext:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:128" class="id"><a name="n:128" class="">n,</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">8</span> <span class="id"><a href="compcert.common.Memdata.html#n:128">n</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:128">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span>. <span class="id">decEq</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_8_mod">encode_int_8_mod</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_sign_ext'">Int.eqmod_sign_ext</a></span><span class="id">'</span>. <span class="id">compute;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_val_int16_zero_ext" class="id"><a name="encode_val_int16_zero_ext" class="">encode_val_int16_zero_ext:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:129" class="id"><a name="n:129" class="">n,</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">16</span> <span class="id"><a href="compcert.common.Memdata.html#n:129">n</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:129">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span>. <span class="id">decEq</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_16_mod">encode_int_16_mod</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_zero_ext">Int.eqmod_zero_ext</a></span>. <span class="id">compute;</span> <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_val_int16_sign_ext" class="id"><a name="encode_val_int16_sign_ext" class="">encode_val_int16_sign_ext:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:130" class="id"><a name="n:130" class="">n,</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> <span class="id">16</span> <span class="id"><a href="compcert.common.Memdata.html#n:130">n</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:130">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span>. <span class="id">decEq</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_16_mod">encode_int_16_mod</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_sign_ext'">Int.eqmod_sign_ext</a></span><span class="id">'</span>. <span class="id">compute;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_val_cast" class="id"><a name="decode_val_cast" class="">decode_val_cast:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="chunk:131" class="id"><a name="chunk:131" class="">chunk</a></span> <span id="l:132" class="id"><a name="l:132" class="">l,</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span id="v:133" class="id"><a name="v:133" class="">v</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:131">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:132">l</a></span> <span class="gallina-kwd">in</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#chunk:131">chunk</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v:133">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id">8</span> <span class="id"><a href="compcert.common.Memdata.html#v:133">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v:133">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> <span class="id">8</span> <span class="id"><a href="compcert.common.Memdata.html#v:133">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v:133">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id">16</span> <span class="id"><a href="compcert.common.Memdata.html#v:133">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#v:133">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> <span class="id">16</span> <span class="id"><a href="compcert.common.Memdata.html#v:133">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="id">intros</span>. <br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="id"><a href="compcert.common.Values.html#Val.has_rettype">Val.has_rettype</a></span> <span class="id">v</span> (<span class="id"><a href="compcert.common.AST.html#rettype_of_chunk">rettype_of_chunk</a></span> <span class="id">chunk</span>)) <span class="gallina-kwd">by</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_rettype">decode_val_rettype</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">auto;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">A;</span> <span class="id">destruct</span> <span class="id">v;</span> <span class="id">try</span> <span class="id">contradiction;</span> <span class="id">simpl;</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Pointers cannot be forged. </div>
<br/>
<span class="vernacular">Definition</span> <span id="quantity_chunk" class="id"><a name="quantity_chunk" class="">quantity_chunk</a></span> (<span id="chunk:135" class="id"><a name="chunk:135" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#chunk:135">chunk</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Mfloat64">Mfloat64</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#Q64">Q64</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#Q32">Q32</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="shape_encoding" class="id"><a name="shape_encoding" class="">shape_encoding</a></span> (<span id="chunk:137" class="id"><a name="chunk:137" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span id="v:138" class="id"><a name="v:138" class="">v:</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="shape_encoding_f" class="id"><a name="shape_encoding_f" class="">shape_encoding_f:</a></span> <span class="gallina-kwd">forall</span> <span id="q:141" class="id"><a name="q:141" class="">q</a></span> <span id="i:142" class="id"><a name="i:142" class="">i</a></span> <span id="mvl:143" class="id"><a name="mvl:143" class="">mvl,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#chunk:137">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:137">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:137">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:137">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#q:141">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#quantity_chunk">quantity_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:137">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.common.Memdata.html#i:142">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:141">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="mv:144" class="id"><a name="mv:144" class="">mv,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:144">mv</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:143">mvl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="j:145" class="id"><a name="j:145" class="">j,</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:144">mv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:138">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:141">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#j:145">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.common.Memdata.html#j:145">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:141">q</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_encoding:139">shape_encoding</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:137">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:138">v</a></span> (<span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:138">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:141">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#i:142">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:143">mvl</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="shape_encoding_b" class="id"><a name="shape_encoding_b" class="">shape_encoding_b:</a></span> <span class="gallina-kwd">forall</span> <span id="b:146" class="id"><a name="b:146" class="">b</a></span> <span id="mvl:147" class="id"><a name="mvl:147" class="">mvl,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#v:138">v</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> <span class="gallina-kwd">end</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="mv:149" class="id"><a name="mv:149" class="">mv,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:149">mv</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:147">mvl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="b':150" class="id"><a name="b':150" class="">b',</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:149">mv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.common.Memdata.html#b':150">b'</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_encoding:139">shape_encoding</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:137">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:138">v</a></span> (<span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.common.Memdata.html#b:146">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:147">mvl</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="shape_encoding_u" class="id"><a name="shape_encoding_u" class="">shape_encoding_u:</a></span> <span class="gallina-kwd">forall</span> <span id="mvl:151" class="id"><a name="mvl:151" class="">mvl,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="mv:152" class="id"><a name="mv:152" class="">mv,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:152">mv</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:151">mvl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:152">mv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_encoding:139">shape_encoding</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:137">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:138">v</a></span> (<span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:151">mvl</a></span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_val_shape" class="id"><a name="encode_val_shape" class="">encode_val_shape:</a></span> <span class="gallina-kwd">forall</span> <span id="chunk:153" class="id"><a name="chunk:153" class="">chunk</a></span> <span id="v:154" class="id"><a name="v:154" class="">v,</a></span> <span class="id"><a href="compcert.common.Memdata.html#shape_encoding">shape_encoding</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:153">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:154">v</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:153">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:154">v</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat_pos">size_chunk_nat_pos</a></span> <span class="id">chunk</span>) <span class="gallina-kwd">as</span> <span class="id">[sz</span> <span class="id">EQ]</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="gallina-kwd">forall</span> <span id="mv:159" class="id"><span id="mv:155" class="id"><a name="mv:159" class="">mv</a></span></span> <span id="q:160" class="id"><span id="q:156" class="id"><a name="q:160" class="">q</a></span></span> <span id="n:161" class="id"><span id="n:157" class="id"><a name="n:161" class="">n,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#n:157">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:156">q</a></span>)%<span class="id">nat</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:155">mv</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_value_rec">inj_value_rec</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:157">n</a></span> <span class="id">v</span> <span class="id"><a href="compcert.common.Memdata.html#q:156">q</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="j:162" class="id"><span id="j:158" class="id"><a name="j:162" class="">j,</a></span></span> <span class="id"><a href="compcert.common.Memdata.html#mv:155">mv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id">v</span> <span class="id"><a href="compcert.common.Memdata.html#q:156">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#j:158">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.common.Memdata.html#j:158">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:156">q</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">simpl;</span> <span class="id">intros</span>. <span class="id">contradiction</span>. <span class="id">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">n;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">lia</span>. <span class="id">apply</span> <span class="id">IHn;</span> <span class="id">auto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">B:</span> <span class="gallina-kwd">forall</span> <span id="q:164" class="id"><span id="q:163" class="id"><a name="q:164" class="">q,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#q:163">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#quantity_chunk">quantity_chunk</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_encoding">shape_encoding</a></span> <span class="id">chunk</span> <span class="id">v</span> (<span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:163">q</a></span> <span class="id">v</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
<span class="vernacular">Local</span> <span class="vernacular">Transparent</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat_pos">size_quantity_nat_pos</a></span> <span class="id">q</span>) <span class="gallina-kwd">as</span> <span class="id">[sz'</span> <span class="id">EQ']</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ'</span>. <span class="id">simpl</span>. <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id">A;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">C:</span> <span class="gallina-kwd">forall</span> <span id="bl:167" class="id"><span id="bl:165" class="id"><a name="bl:167" class="">bl,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">v</span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> <span class="gallina-kwd">end</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:165">bl</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_encoding">shape_encoding</a></span> <span class="id">chunk</span> <span class="id">v</span> (<span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:165">bl</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">bl</span> <span class="gallina-kwd">as</span> <span class="id">[|b1</span> <span class="id">bl]</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">congruence</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">auto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes;</a></span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> (<span class="id">b</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>)<span class="id">;</span> <span class="gallina-kwd">exists</span> <span class="id">b;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">D:</span> <span class="id"><a href="compcert.common.Memdata.html#shape_encoding">shape_encoding</a></span> <span class="id">chunk</span> <span class="id">v</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#repeat">List.repeat</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>))).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">EQ;</span> <span class="id">simpl;</span> <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#repeat_spec">repeat_spec;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="id">chunk</span> <span class="id">v</span>). <span class="id">intros</span> <span class="id">LEN</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val;</a></span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="gallina-kwd">in</span> <span class="id">LEN;</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">v;</span> <span class="id">destruct</span> <span class="id">chunk;</span><br/>
&nbsp;&nbsp;(<span class="id">apply</span> <span class="id">B</span> <span class="id">||</span> <span class="id">apply</span> <span class="id">C</span> <span class="id">||</span> <span class="id">apply</span> <span class="id">D</span> <span class="id">||</span> (<span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> (<span class="id">apply</span> <span class="id">B</span> <span class="id">||</span> <span class="id">apply</span> <span class="id">D</span>)))<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Inductive</span> <span id="shape_decoding" class="id"><a name="shape_decoding" class="">shape_decoding</a></span> (<span id="chunk:169" class="id"><a name="chunk:169" class="">chunk:</a></span> <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="shape_decoding_f" class="id"><a name="shape_decoding_f" class="">shape_decoding_f:</a></span> <span class="gallina-kwd">forall</span> <span id="v:172" class="id"><a name="v:172" class="">v</a></span> <span id="q:173" class="id"><a name="q:173" class="">q</a></span> <span id="i:174" class="id"><a name="i:174" class="">i</a></span> <span id="mvl:175" class="id"><a name="mvl:175" class="">mvl,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#chunk:169">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:169">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:169">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:169">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#q:173">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#quantity_chunk">quantity_chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:169">chunk</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.common.Memdata.html#i:174">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:173">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="mv:176" class="id"><a name="mv:176" class="">mv,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:176">mv</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:175">mvl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="j:177" class="id"><a name="j:177" class="">j,</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:176">mv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:172">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:173">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#j:177">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.common.Memdata.html#j:177">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:173">q</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_decoding:170">shape_decoding</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:169">chunk</a></span> (<span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:172">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:173">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#i:174">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:175">mvl</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:169">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:172">v</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="shape_decoding_b" class="id"><a name="shape_decoding_b" class="">shape_decoding_b:</a></span> <span class="gallina-kwd">forall</span> <span id="b:178" class="id"><a name="b:178" class="">b</a></span> <span id="mvl:179" class="id"><a name="mvl:179" class="">mvl</a></span> <span id="v:180" class="id"><a name="v:180" class="">v,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#v:180">v</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span> <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="id">|</span>  <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> <span class="gallina-kwd">end</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="mv:182" class="id"><a name="mv:182" class="">mv,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:182">mv</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:179">mvl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="b':183" class="id"><a name="b':183" class="">b',</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:182">mv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.common.Memdata.html#b':183">b'</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_decoding:170">shape_decoding</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:169">chunk</a></span> (<span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.common.Memdata.html#b:178">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:179">mvl</a></span>) <span class="id"><a href="compcert.common.Memdata.html#v:180">v</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="shape_decoding_u" class="id"><a name="shape_decoding_u" class="">shape_decoding_u:</a></span> <span class="gallina-kwd">forall</span> <span id="mvl:184" class="id"><a name="mvl:184" class="">mvl,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_decoding:170">shape_decoding</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:169">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:184">mvl</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_val_shape" class="id"><a name="decode_val_shape" class="">decode_val_shape:</a></span> <span class="gallina-kwd">forall</span> <span id="chunk:185" class="id"><a name="chunk:185" class="">chunk</a></span> <span id="mv1:186" class="id"><a name="mv1:186" class="">mv1</a></span> <span id="mvl:187" class="id"><a name="mvl:187" class="">mvl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_decoding">shape_decoding</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:185">chunk</a></span> (<span class="id"><a href="compcert.common.Memdata.html#mv1:186">mv1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:187">mvl</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:185">chunk</a></span> (<span class="id"><a href="compcert.common.Memdata.html#mv1:186">mv1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvl:187">mvl</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="gallina-kwd">forall</span> <span id="mv:192" class="id"><span id="mv:188" class="id"><a name="mv:192" class="">mv</a></span></span> <span id="mvs:193" class="id"><span id="mvs:189" class="id"><a name="mvs:193" class="">mvs</a></span></span> <span id="bs:194" class="id"><span id="bs:190" class="id"><a name="bs:194" class="">bs,</a></span></span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvs:189">mvs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memdata.html#bs:190">bs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:188">mv</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvs:189">mvs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="b:195" class="id"><span id="b:191" class="id"><a name="b:195" class="">b,</a></span></span> <span class="id"><a href="compcert.common.Memdata.html#mv:188">mv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.common.Memdata.html#b:191">b</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">mvs;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="gallina-kwd">exists</span> <span class="id">i;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">mvs</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">B:</span> <span class="gallina-kwd">forall</span> <span id="v:202" class="id"><span id="v:196" class="id"><a name="v:202" class="">v</a></span></span> <span id="q:203" class="id"><span id="q:197" class="id"><a name="q:203" class="">q</a></span></span> <span id="mv:204" class="id"><span id="mv:198" class="id"><a name="mv:204" class="">mv</a></span></span> <span id="n:205" class="id"><span id="n:199" class="id"><a name="n:205" class="">n</a></span></span> <span id="mvs:206" class="id"><span id="mvs:200" class="id"><a name="mvs:206" class="">mvs,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#check_value">check_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:199">n</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:196">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:197">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvs:200">mvs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:198">mv</a></span> <span class="id"><a href="compcert.common.Memdata.html#mvs:200">mvs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.common.Memdata.html#n:199">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:197">q</a></span>)%<span class="id">nat</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="j:207" class="id"><span id="j:201" class="id"><a name="j:207" class="">j,</a></span></span> <span class="id"><a href="compcert.common.Memdata.html#mv:198">mv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:196">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:197">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#j:201">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.common.Memdata.html#j:201">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:197">q</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">destruct</span> <span class="id">mvs;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">m;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">InvBooleans</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_eq">Nat.eqb_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">H4</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0</span>. <span class="id">subst</span> <span class="id">mv</span>. <span class="gallina-kwd">exists</span> <span class="id">n0;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">IHn;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">U:</span> <span class="gallina-kwd">forall</span> <span id="mvs:209" class="id"><span id="mvs:208" class="id"><a name="mvs:209" class="">mvs,</a></span></span> <span class="id"><a href="compcert.common.Memdata.html#shape_decoding">shape_decoding</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.common.Memdata.html#mvs:208">mvs</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">replace</span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>) <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">C:</span> <span class="gallina-kwd">forall</span> <span id="q:211" class="id"><span id="q:210" class="id"><a name="q:211" class="">q,</a></span></span> <span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:210">q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id">chunk</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_decoding">shape_decoding</a></span> <span class="id">chunk</span> (<span class="id">mv1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">mvl</span>) (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id">chunk</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:210">q</a></span> (<span class="id">mv1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">mvl</span>)))).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span>. <span class="id">destruct</span> <span class="id">mv1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat_pos">size_quantity_nat_pos</a></span> <span class="id">q</span>) <span class="gallina-kwd">as</span> <span class="id">[sz</span> <span class="id">EQ]</span>. <span class="id">rewrite</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#quantity_eq">quantity_eq</a></span> <span class="id">q</span> <span class="id">q0</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb">Nat.eqb</a></span> <span class="id">sz</span> <span class="id">n</span>) <span class="id">eqn:EQN;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#check_value">check_value</a></span> <span class="id">sz</span> <span class="id">v</span> <span class="id">q</span> <span class="id">mvl</span>) <span class="id">eqn:CHECK;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_eq">Nat.eqb_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">EQN</span>. <span class="id">subst</span> <span class="id">n</span> <span class="id">q0</span>. <span class="id">constructor</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0</span> <span class="gallina-kwd">as</span> <span class="id">[E|[E|[E|E]]];</span> <span class="id">subst</span> <span class="id">chunk;</span> <span class="id">destruct</span> <span class="id">q;</span> <span class="id">auto</span> <span class="id">||</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id">B;</span> <span class="id">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> (<span class="id">mv1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">mvl</span>)) <span class="gallina-kwd">as</span> <span class="id">[bl|]</span> <span class="id">eqn:PB</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">A</span> <span class="id">mv1</span>)<span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>. <span class="id">intros</span> <span class="id">[b1</span> <span class="id">EQ1];</span> <span class="id">subst</span> <span class="id">mv1</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">chunk;</span> (<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#shape_decoding_u">shape_decoding_u</a></span> <span class="id">||</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#shape_decoding_b">shape_decoding_b</a></span>)<span class="id">;</span> <span class="id">eauto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">chunk,</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> (<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#shape_decoding_u">shape_decoding_u</a></span> <span class="id">||</span> <span class="id">apply</span> <span class="id">C</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Compatibility with memory injections </h1>
<br/>
<div class="doc">Relating two memory values according to a memory injection. </div>
<br/>
<span class="vernacular">Inductive</span> <span id="memval_inject" class="id"><a name="memval_inject" class="">memval_inject</a></span> (<span id="f:212" class="id"><a name="f:212" class="">f:</a></span> <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>)<span class="id">:</span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="memval_inject_byte" class="id"><a name="memval_inject_byte" class="">memval_inject_byte:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:215" class="id"><a name="n:215" class="">n,</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject:213">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:212">f</a></span> (<span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:215">n</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#Byte">Byte</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:215">n</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="memval_inject_frag" class="id"><a name="memval_inject_frag" class="">memval_inject_frag:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v1:216" class="id"><a name="v1:216" class="">v1</a></span> <span id="v2:217" class="id"><a name="v2:217" class="">v2</a></span> <span id="q:218" class="id"><a name="q:218" class="">q</a></span> <span id="n:219" class="id"><a name="n:219" class="">n,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:212">f</a></span> <span class="id"><a href="compcert.common.Memdata.html#v1:216">v1</a></span> <span class="id"><a href="compcert.common.Memdata.html#v2:217">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#memval_inject:213">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:212">f</a></span> (<span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="compcert.common.Memdata.html#v1:216">v1</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:218">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:219">n</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id"><a href="compcert.common.Memdata.html#v2:217">v2</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:218">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:219">n</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="memval_inject_undef" class="id"><a name="memval_inject_undef" class="">memval_inject_undef:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="mv:220" class="id"><a name="mv:220" class="">mv,</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject:213">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:212">f</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:220">mv</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="memval_inject_incr" class="id"><a name="memval_inject_incr" class="">memval_inject_incr:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:221" class="id"><a name="f:221" class="">f</a></span> <span id="f':222" class="id"><a name="f':222" class="">f'</a></span> <span id="v1:223" class="id"><a name="v1:223" class="">v1</a></span> <span id="v2:224" class="id"><a name="v2:224" class="">v2,</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:221">f</a></span> <span class="id"><a href="compcert.common.Memdata.html#v1:223">v1</a></span> <span class="id"><a href="compcert.common.Memdata.html#v2:224">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:221">f</a></span> <span class="id"><a href="compcert.common.Memdata.html#f':222">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f':222">f'</a></span> <span class="id"><a href="compcert.common.Memdata.html#v1:223">v1</a></span> <span class="id"><a href="compcert.common.Memdata.html#v2:224">v2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H;</span> <span class="id">econstructor</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_incr">val_inject_incr;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">decode_val</span></span>, applied to lists of memory values that are pairwise
  related by <span class="bracket"><span class="id">memval_inject</span></span>, returns values that are related by <span class="bracket"><span class="id">Val.inject</span></span>. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="proj_bytes_inject" class="id"><a name="proj_bytes_inject" class="">proj_bytes_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:225" class="id"><a name="f:225" class="">f</a></span> <span id="vl:226" class="id"><a name="vl:226" class="">vl</a></span> <span id="vl':227" class="id"><a name="vl':227" class="">vl',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:225">f</a></span>) <span class="id"><a href="compcert.common.Memdata.html#vl:226">vl</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl':227">vl'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="bl:228" class="id"><a name="bl:228" class="">bl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:226">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:228">bl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl':227">vl'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:228">bl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">simpl</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">al</span>)<span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> (<span class="id">IHlist_forall2</span> <span class="id">l</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="check_value_inject" class="id"><a name="check_value_inject" class="">check_value_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:229" class="id"><a name="f:229" class="">f</a></span> <span id="vl:230" class="id"><a name="vl:230" class="">vl</a></span> <span id="vl':231" class="id"><a name="vl':231" class="">vl',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:229">f</a></span>) <span class="id"><a href="compcert.common.Memdata.html#vl:230">vl</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl':231">vl'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:232" class="id"><a name="v:232" class="">v</a></span> <span id="v':233" class="id"><a name="v':233" class="">v'</a></span> <span id="q:234" class="id"><a name="q:234" class="">q</a></span> <span id="n:235" class="id"><a name="n:235" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#check_value">check_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:235">n</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:232">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:234">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:230">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:229">f</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:232">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#v':233">v'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:232">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#check_value">check_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:235">n</a></span> <span class="id"><a href="compcert.common.Memdata.html#v':233">v'</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:234">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl':231">vl'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">intros;</span> <span class="id">destruct</span> <span class="id">n;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">InvBooleans</span>. <span class="id">assert</span> (<span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">n0</span>) <span class="gallina-kwd">by</span> (<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_eq">Nat.eqb_eq</a></span><span class="id">;</span> <span class="id">auto</span>). <span class="id">subst</span> <span class="id">v1</span> <span class="id">q0</span> <span class="id">n0</span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> <span class="id">v2</span> <span class="gallina-kwd">with</span> <span class="id">v'</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool;</a></span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_refl">Nat.eqb_refl</a></span>. <span class="id">simpl;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2;</span> <span class="id">try</span> <span class="id">discriminate;</span> <span class="id">inv</span> <span class="id">H4;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="proj_value_inject" class="id"><a name="proj_value_inject" class="">proj_value_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:236" class="id"><a name="f:236" class="">f</a></span> <span id="q:237" class="id"><a name="q:237" class="">q</a></span> <span id="vl1:238" class="id"><a name="vl1:238" class="">vl1</a></span> <span id="vl2:239" class="id"><a name="vl2:239" class="">vl2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:236">f</a></span>) <span class="id"><a href="compcert.common.Memdata.html#vl1:238">vl1</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl2:239">vl2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:236">f</a></span> (<span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:237">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl1:238">vl1</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:237">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl2:239">vl2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H;</span> <span class="id">subst</span>. <span class="id">auto</span>. <span class="id">inversion</span> <span class="id">H0;</span> <span class="id">subst;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#check_value">check_value</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id">q</span>) <span class="id">v1</span> <span class="id">q</span> (<span class="id"><a href="compcert.common.Memdata.html#Fragment">Fragment</a></span> <span class="id">v1</span> <span class="id">q0</span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">al</span>)) <span class="id">eqn:B;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Values.html#Val.eq">Val.eq</a></span> <span class="id">v1</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>). <span class="id">subst;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memdata.html#check_value_inject">check_value_inject</a></span> <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="proj_bytes_not_inject" class="id"><a name="proj_bytes_not_inject" class="">proj_bytes_not_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:240" class="id"><a name="f:240" class="">f</a></span> <span id="vl:241" class="id"><a name="vl:241" class="">vl</a></span> <span id="vl':242" class="id"><a name="vl':242" class="">vl',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:240">f</a></span>) <span class="id"><a href="compcert.common.Memdata.html#vl:241">vl</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl':242">vl'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:241">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl':242">vl'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:241">vl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">1;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H;</span> <span class="id">try</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">apply</span> <span class="id">IHlist_forall2</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">al</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">bl</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="check_value_undef" class="id"><a name="check_value_undef" class="">check_value_undef:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n:243" class="id"><a name="n:243" class="">n</a></span> <span id="q:244" class="id"><a name="q:244" class="">q</a></span> <span id="v:245" class="id"><a name="v:245" class="">v</a></span> <span id="vl:246" class="id"><a name="vl:246" class="">vl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:246">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#check_value">check_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:243">n</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:245">v</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:244">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:246">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">intros;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">vl</span>. <span class="id">elim</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">vl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">m;</span> <span class="id">auto</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">destruct</span> <span class="id">H</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHn;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_r">andb_false_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="proj_value_undef" class="id"><a name="proj_value_undef" class="">proj_value_undef:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="q:247" class="id"><a name="q:247" class="">q</a></span> <span id="vl:248" class="id"><a name="vl:248" class="">vl,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:248">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:247">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:248">vl</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">vl;</span> <span class="id">auto</span>. <span class="id">destruct</span> <span class="id">m;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#check_value_undef">check_value_undef</a></span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="decode_val_inject" class="id"><a name="decode_val_inject" class="">decode_val_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:249" class="id"><a name="f:249" class="">f</a></span> <span id="vl1:250" class="id"><a name="vl1:250" class="">vl1</a></span> <span id="vl2:251" class="id"><a name="vl2:251" class="">vl2</a></span> <span id="chunk:252" class="id"><a name="chunk:252" class="">chunk,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:249">f</a></span>) <span class="id"><a href="compcert.common.Memdata.html#vl1:250">vl1</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl2:251">vl2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:249">f</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:252">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl1:250">vl1</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:252">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl2:251">vl2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">vl1</span>) <span class="gallina-kwd">as</span> <span class="id">[bl1|]</span> <span class="id">eqn:PB1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes_inject">proj_bytes_inject;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">PB2</span>. <span class="id">rewrite</span> <span class="id">PB2</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="gallina-kwd">forall</span> <span id="q:255" class="id"><span id="q:253" class="id"><a name="q:255" class="">q</a></span></span> <span id="fn:256" class="id"><span id="fn:254" class="id"><a name="fn:256" class="">fn,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">f</span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id">chunk</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:253">q</a></span> <span class="id">vl1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">vl2</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">bl</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Memdata.html#fn:254">fn</a></span> <span class="id">bl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id">chunk</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_value">proj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:253">q</a></span> <span class="id">vl2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">vl2</span>) <span class="gallina-kwd">as</span> <span class="id">[bl2|]</span> <span class="id">eqn:PB2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#proj_value_undef">proj_value_undef</a></span>. <span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">auto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes_not_inject">proj_bytes_not_inject;</a></span> <span class="id">eauto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result_inject">Val.load_result_inject</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#proj_value_inject">proj_value_inject;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">chunk;</span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Symmetrically, <span class="bracket"><span class="id">encode_val</span></span>, applied to values related by <span class="bracket"><span class="id">Val.inject</span></span>,
  returns lists of memory values that are pairwise
  related by <span class="bracket"><span class="id">memval_inject</span></span>. </div>
<br/>
<span class="vernacular">Lemma</span> <span id="inj_bytes_inject" class="id"><a name="inj_bytes_inject" class="">inj_bytes_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:257" class="id"><a name="f:257" class="">f</a></span> <span id="bl:258" class="id"><a name="bl:258" class="">bl,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:257">f</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:258">bl</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#bl:258">bl</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">bl;</span> <span class="id">constructor;</span> <span class="id">auto</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="repeat_Undef_inject_any" class="id"><a name="repeat_Undef_inject_any" class="">repeat_Undef_inject_any:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:259" class="id"><a name="f:259" class="">f</a></span> <span id="vl:260" class="id"><a name="vl:260" class="">vl,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:259">f</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#repeat">List.repeat</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memdata.html#vl:260">vl</a></span>)) <span class="id"><a href="compcert.common.Memdata.html#vl:260">vl</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">vl;</span> <span class="id">simpl;</span> <span class="id">constructor;</span> <span class="id">auto</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="repeat_Undef_inject_encode_val" class="id"><a name="repeat_Undef_inject_encode_val" class="">repeat_Undef_inject_encode_val:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:261" class="id"><a name="f:261" class="">f</a></span> <span id="chunk:262" class="id"><a name="chunk:262" class="">chunk</a></span> <span id="v:263" class="id"><a name="v:263" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:261">f</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#repeat">List.repeat</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:262">chunk</a></span>)) (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:262">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:263">v</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="id">chunk</span> <span class="id">v</span>). <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#repeat_Undef_inject_any">repeat_Undef_inject_any</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="repeat_Undef_inject_self" class="id"><a name="repeat_Undef_inject_self" class="">repeat_Undef_inject_self:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:264" class="id"><a name="f:264" class="">f</a></span> <span id="n:265" class="id"><a name="n:265" class="">n,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:264">f</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#repeat">List.repeat</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:265">n</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#repeat">List.repeat</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span> <span class="id"><a href="compcert.common.Memdata.html#n:265">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n;</span> <span class="id">simpl;</span> <span class="id">constructor;</span> <span class="id">auto</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="inj_value_inject" class="id"><a name="inj_value_inject" class="">inj_value_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:266" class="id"><a name="f:266" class="">f</a></span> <span id="v1:267" class="id"><a name="v1:267" class="">v1</a></span> <span id="v2:268" class="id"><a name="v2:268" class="">v2</a></span> <span id="q:269" class="id"><a name="q:269" class="">q,</a></span> <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:266">f</a></span> <span class="id"><a href="compcert.common.Memdata.html#v1:267">v1</a></span> <span class="id"><a href="compcert.common.Memdata.html#v2:268">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:266">f</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:269">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#v1:267">v1</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span> <span class="id"><a href="compcert.common.Memdata.html#q:269">q</a></span> <span class="id"><a href="compcert.common.Memdata.html#v2:268">v2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Transparent</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value">inj_value</a></span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_quantity_nat">size_quantity_nat</a></span> <span class="id">q</span>). <span class="id">induction</span> <span class="id">n;</span> <span class="id">simpl;</span> <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="encode_val_inject" class="id"><a name="encode_val_inject" class="">encode_val_inject:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:270" class="id"><a name="f:270" class="">f</a></span> <span id="v1:271" class="id"><a name="v1:271" class="">v1</a></span> <span id="v2:272" class="id"><a name="v2:272" class="">v2</a></span> <span id="chunk:273" class="id"><a name="chunk:273" class="">chunk,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:270">f</a></span> <span class="id"><a href="compcert.common.Memdata.html#v1:271">v1</a></span> <span class="id"><a href="compcert.common.Memdata.html#v2:272">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:270">f</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:273">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#v1:271">v1</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memdata.html#chunk:273">chunk</a></span> <span class="id"><a href="compcert.common.Memdata.html#v2:272">v2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
<span class="vernacular">Local</span> <span class="vernacular">Opaque</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#repeat">List.repeat</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">H;</span> <span class="id">subst;</span> <span class="id">simpl;</span> <span class="id">destruct</span> <span class="id">chunk;</span><br/>
&nbsp;&nbsp;<span class="id">auto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes_inject">inj_bytes_inject,</a></span> <span class="id"><a href="compcert.common.Memdata.html#inj_value_inject">inj_value_inject,</a></span> <span class="id"><a href="compcert.common.Memdata.html#repeat_Undef_inject_self">repeat_Undef_inject_self,</a></span> <span class="id"><a href="compcert.common.Memdata.html#repeat_Undef_inject_encode_val">repeat_Undef_inject_encode_val</a></span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">auto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value_inject">inj_value_inject,</a></span> <span class="id"><a href="compcert.common.Memdata.html#repeat_Undef_inject_self">repeat_Undef_inject_self</a></span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><span class="id">;</span> <span class="id">auto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value_inject">inj_value_inject,</a></span> <span class="id"><a href="compcert.common.Memdata.html#repeat_Undef_inject_self">repeat_Undef_inject_self</a></span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span>. <span class="id">destruct</span> <span class="id">v2;</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value_inject">inj_value_inject;</a></span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span>. <span class="id">destruct</span> <span class="id">v2;</span> <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value_inject">inj_value_inject;</a></span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="memval_lessdef" class="id"><a name="memval_lessdef" class="">memval_lessdef:</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="memval_lessdef_refl" class="id"><a name="memval_lessdef_refl" class="">memval_lessdef_refl:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="mv:274" class="id"><a name="mv:274" class="">mv,</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef">memval_lessdef</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:274">mv</a></span> <span class="id"><a href="compcert.common.Memdata.html#mv:274">mv</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;<span class="id">red</span>. <span class="id">destruct</span> <span class="id">mv;</span> <span class="id">econstructor</span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">memval_inject</span></span> and compositions </div>
<br/>
<span class="vernacular">Lemma</span> <span id="memval_inject_compose" class="id"><a name="memval_inject_compose" class="">memval_inject_compose:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="f:275" class="id"><a name="f:275" class="">f</a></span> <span id="f':276" class="id"><a name="f':276" class="">f'</a></span> <span id="v1:277" class="id"><a name="v1:277" class="">v1</a></span> <span id="v2:278" class="id"><a name="v2:278" class="">v2</a></span> <span id="v3:279" class="id"><a name="v3:279" class="">v3,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:275">f</a></span> <span class="id"><a href="compcert.common.Memdata.html#v1:277">v1</a></span> <span class="id"><a href="compcert.common.Memdata.html#v2:278">v2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memdata.html#f':276">f'</a></span> <span class="id"><a href="compcert.common.Memdata.html#v2:278">v2</a></span> <span class="id"><a href="compcert.common.Memdata.html#v3:279">v3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id"><a href="compcert.common.Memdata.html#f:275">f</a></span> <span class="id"><a href="compcert.common.Memdata.html#f':276">f'</a></span>) <span class="id"><a href="compcert.common.Memdata.html#v1:277">v1</a></span> <span class="id"><a href="compcert.common.Memdata.html#v3:279">v3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_compose">val_inject_compose;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<h1> Breaking 64-bit memory accesses into two 32-bit accesses </h1>
<br/>
<span class="vernacular">Lemma</span> <span id="int_of_bytes_append" class="id"><a name="int_of_bytes_append" class="">int_of_bytes_append:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l2:280" class="id"><a name="l2:280" class="">l2</a></span> <span id="l1:281" class="id"><a name="l1:281" class="">l1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#int_of_bytes">int_of_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#l1:281">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.common.Memdata.html#l2:280">l2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#int_of_bytes">int_of_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#l1:281">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#int_of_bytes">int_of_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#l2:280">l2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memdata.html#l1:281">l1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l1;</span> <span class="id">simpl</span> <span class="id">int_of_bytes;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">ring</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">length</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">l1</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">l1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">8</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p_is_exp">two_p_is_exp</a></span>. <span class="id">change</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> <span class="id">8</span>) <span class="gallina-kwd">with</span> <span class="id">256</span>. <span class="id">rewrite</span> <span class="id">IHl1</span>. <span class="id">ring</span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="int_of_bytes_range" class="id"><a name="int_of_bytes_range" class="">int_of_bytes_range:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:282" class="id"><a name="l:282" class="">l,</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memdata.html#int_of_bytes">int_of_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:282">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:282">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">length</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>.<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">l</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">l</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">8</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p_is_exp">two_p_is_exp</a></span>. <span class="id">change</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> <span class="id">8</span>) <span class="gallina-kwd">with</span> <span class="id">256</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">int_of_bytes</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Byte.unsigned_range">Byte.unsigned_range</a></span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id"><a href="compcert.lib.Integers.html#Byte.modulus">Byte.modulus</a></span> <span class="gallina-kwd">with</span> <span class="id">256</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="length_proj_bytes" class="id"><a name="length_proj_bytes" class="">length_proj_bytes:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:283" class="id"><a name="l:283" class="">l</a></span> <span id="b:284" class="id"><a name="b:284" class="">b,</a></span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:283">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memdata.html#b:284">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memdata.html#b:284">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:283">l</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a;</span> <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">l</span>) <span class="id">eqn:E;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">f_equal</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="proj_bytes_append" class="id"><a name="proj_bytes_append" class="">proj_bytes_append:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l2:285" class="id"><a name="l2:285" class="">l2</a></span> <span id="l1:286" class="id"><a name="l1:286" class="">l1,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> (<span class="id"><a href="compcert.common.Memdata.html#l1:286">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.common.Memdata.html#l2:285">l2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#l1:286">l1,</a></span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#l2:285">l2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b1,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b2</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id">b2</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l1;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">l2</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">IHl1</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">l1</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">l2</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="decode_val_int64" class="id"><a name="decode_val_int64" class="">decode_val_int64:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l1:287" class="id"><a name="l1:287" class="">l1</a></span> <span id="l2:288" class="id"><a name="l2:288" class="">l2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memdata.html#l1:287">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">4</span>%<span class="id">nat</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memdata.html#l2:288">l2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">4</span>%<span class="id">nat</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> (<span class="id"><a href="compcert.common.Memdata.html#l1:287">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.common.Memdata.html#l2:288">l2</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Values.html#Val.longofwords">Val.longofwords</a></span> (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Memdata.html#l1:287">l1</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memdata.html#l2:288">l2</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Memdata.html#l2:288">l2</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Memdata.html#l1:287">l1</a></span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span>. <span class="id">rewrite</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#proj_bytes_append">proj_bytes_append</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">l1</span>) <span class="gallina-kwd">as</span> <span class="id">[b1|]</span> <span class="id">eqn:B1;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">l2</span>) <span class="gallina-kwd">as</span> <span class="id">[b2|]</span> <span class="id">eqn:B2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memdata.html#length_proj_bytes">length_proj_bytes</a></span>. <span class="id">eexact</span> <span class="id">B1</span>. <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">intro</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memdata.html#length_proj_bytes">length_proj_bytes</a></span>. <span class="id">eexact</span> <span class="id">B2</span>. <span class="id">rewrite</span> <span class="id">H0;</span> <span class="id">intro</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">UR:</span> <span class="gallina-kwd">forall</span> <span id="l:290" class="id"><span id="l:289" class="id"><a name="l:290" class="">l,</a></span></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:289">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">4</span>%<span class="id">nat</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.common.Memdata.html#int_of_bytes">int_of_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:289">l</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Memdata.html#int_of_bytes">int_of_bytes</a></span> <span class="id"><a href="compcert.common.Memdata.html#l:289">l</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_repr">Int.unsigned_repr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#int_of_bytes_range">int_of_bytes_range</a></span> <span class="id">l</span>). <span class="id">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">4</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>)) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.max_unsigned">Int.max_unsigned</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id">1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_int">decode_int,</a></span> <span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be</a></span>. <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span><span class="id">;</span> <span class="id">rewrite</span> <span class="id">B1;</span> <span class="id">rewrite</span> <span class="id">B2</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev_length">rev_length</a></span> <span class="id">b1</span>) <span class="gallina-kwd">in</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev_length">rev_length</a></span> <span class="id">b2</span>) <span class="gallina-kwd">in</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev_app_distr">rev_app_distr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set</span> (<span class="id">b1'</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id">b1</span>) <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">set</span> (<span class="id">b2'</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id">b2</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.longofwords">Val.longofwords</a></span>. <span class="id">f_equal</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.ofwords_add">Int64.ofwords_add</a></span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!UR</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#int_of_bytes_append">int_of_bytes_append</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">L2</span>. <span class="id">change</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">4</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>) <span class="gallina-kwd">with</span> <span class="id">32</span>. <span class="id">ring</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.longofwords">Val.longofwords</a></span>. <span class="id">f_equal</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.ofwords_add">Int64.ofwords_add</a></span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!UR</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#int_of_bytes_append">int_of_bytes_append</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">L1</span>. <span class="id">change</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">4</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>) <span class="gallina-kwd">with</span> <span class="id">32</span>. <span class="id">ring</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="bytes_of_int_append" class="id"><a name="bytes_of_int_append" class="">bytes_of_int_append:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="n2:291" class="id"><a name="n2:291" class="">n2</a></span> <span id="x2:292" class="id"><a name="x2:292" class="">x2</a></span> <span id="n1:293" class="id"><a name="n1:293" class="">n1</a></span> <span id="x1:294" class="id"><a name="x1:294" class="">x1,</a></span><br/>
&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.common.Memdata.html#x1:294">x1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#n1:293">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> (<span class="id"><a href="compcert.common.Memdata.html#n1:293">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#n2:291">n2</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#x1:294">x1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.common.Memdata.html#x2:292">x2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memdata.html#n1:293">n1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="id"><a href="compcert.common.Memdata.html#n1:293">n1</a></span> <span class="id"><a href="compcert.common.Memdata.html#x1:294">x1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="id"><a href="compcert.common.Memdata.html#n2:291">n2</a></span> <span class="id"><a href="compcert.common.Memdata.html#x2:292">x2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n1;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">f_equal</span>. <span class="id">lia</span>.<br/>
<span class="id">-</span> <span class="id">assert</span> (<span class="id">E:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n1</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">256</span>).<br/>
&nbsp;&nbsp;<span class="id">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>. <span class="id">change</span> <span class="id">256</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> <span class="id">8</span>). <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p_is_exp">two_p_is_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>. <span class="id">lia</span>. <span class="id">lia</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">simpl</span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Byte.eqm_samerepr">Byte.eqm_samerepr</a></span>. <span class="gallina-kwd">exists</span> (<span class="id">x2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>)).<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id"><a href="compcert.lib.Integers.html#Byte.modulus">Byte.modulus</a></span> <span class="gallina-kwd">with</span> <span class="id">256</span>. <span class="id">ring</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_assoc">Z.mul_assoc</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_plus">Z_div_plus</a></span>. <span class="id">apply</span> <span class="id">IHn1</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zdiv_interval_1">Zdiv_interval_1</a></span>. <span class="id">lia</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p_gt_ZERO">two_p_gt_ZERO;</a></span> <span class="id">lia</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="bytes_of_int64" class="id"><a name="bytes_of_int64" class="">bytes_of_int64:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="i:295" class="id"><a name="i:295" class="">i,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="id">8</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.unsigned">Int64.unsigned</a></span> <span class="id"><a href="compcert.common.Memdata.html#i:295">i</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="id">4</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.loword">Int64.loword</a></span> <span class="id"><a href="compcert.common.Memdata.html#i:295">i</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> <span class="id">4</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.hiword">Int64.hiword</a></span> <span class="id"><a href="compcert.common.Memdata.html#i:295">i</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">transitivity</span> (<span class="id"><a href="compcert.common.Memdata.html#bytes_of_int">bytes_of_int</a></span> (<span class="id">4</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633">+</a></span> <span class="id">4</span>) (<span class="id"><a href="compcert.lib.Integers.html#Int64.unsigned">Int64.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.ofwords">Int64.ofwords</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.hiword">Int64.hiword</a></span> <span class="id">i</span>) (<span class="id"><a href="compcert.lib.Integers.html#Int64.loword">Int64.loword</a></span> <span class="id">i</span>)))).<br/>
&nbsp;&nbsp;<span class="id">f_equal</span>. <span class="id">f_equal</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.ofwords_recompose">Int64.ofwords_recompose</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.ofwords_add'">Int64.ofwords_add</a></span><span class="id">'</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id">32</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">4</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#d3ea1afb7d81263dc23c4eb0da2a3c4e">*</a></span> <span class="id">8</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_comm">Z.add_comm</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#bytes_of_int_append">bytes_of_int_append</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="encode_val_int64" class="id"><a name="encode_val_int64" class="">encode_val_int64:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="v:296" class="id"><a name="v:296" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:296">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword">Val.hiword</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:296">v</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.loword">Val.loword</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:296">v</a></span>)<br/>
&nbsp;&nbsp;<span class="id">++</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> (<span class="gallina-kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.loword">Val.loword</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:296">v</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword">Val.hiword</a></span> <span class="id"><a href="compcert.common.Memdata.html#v:296">v</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span>. <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">v;</span> <span class="id">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="id">eqn:BI;</span> <span class="id">try</span> <span class="id">reflexivity;</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.loword">Val.loword</a></span><span class="id">,</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword">Val.hiword</a></span><span class="id">,</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int,</a></span> <span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be</a></span>. <span class="id">rewrite</span> <span class="id">BI</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev_app_distr">rev_app_distr</a></span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#bytes_of_int64">bytes_of_int64</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes">inj_bytes</a></span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int">encode_int,</a></span> <span class="id"><a href="compcert.common.Memdata.html#rev_if_be">rev_if_be</a></span>. <span class="id">rewrite</span> <span class="id">BI</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.common.Memdata.html#bytes_of_int64">bytes_of_int64</a></span>.<br/>
Qed.</div>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
