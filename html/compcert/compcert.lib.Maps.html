
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Maps</title>
<meta name="description" content="Documentation of Coq module Maps" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module Maps</h1>
<br/>
<div class="doc">Applicative finite maps are the main data structure used in this
  project.  A finite map associates data to keys.  The two main operations
  are <span class="bracket"><span class="id">set</span> <span class="id">k</span> <span class="id">d</span> <span class="id">m</span></span>, which returns a map identical to <span class="bracket"><span class="id">m</span></span> except that <span class="bracket"><span class="id">d</span></span>
  is associated to <span class="bracket"><span class="id">k</span></span>, and <span class="bracket"><span class="id">get</span> <span class="id">k</span> <span class="id">m</span></span> which returns the data associated
  to key <span class="bracket"><span class="id">k</span></span> in map <span class="bracket"><span class="id">m</span></span>.  In this library, we distinguish two kinds of maps:
<ul>
<li>
 Trees: the <span class="bracket"><span class="id">get</span></span> operation returns an option type, either <span class="bracket"><span class="id">None</span></span>
  if no data is associated to the key, or <span class="bracket"><span class="id">Some</span> <span class="id">d</span></span> otherwise.
</li>
<li>
 Maps: the <span class="bracket"><span class="id">get</span></span> operation always returns a data.  If no data was explicitly
  associated with the key, a default data provided at map initialization time
  is returned.
</li>
</ul>
  In this library, we provide efficient implementations of trees and
  maps whose keys range over the type <span class="bracket"><span class="id">positive</span></span> of binary positive
  integers or any type that can be injected into <span class="bracket"><span class="id">positive</span></span>.  The
  implementation is based on radix-2 search trees (uncompressed
  Patricia trees) and guarantees logarithmic-time operations.  An
  inefficient implementation of maps as functions is also provided.
</div>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<br/>
<span class="vernacular">Local</span> <span class="vernacular">Unset</span> <span class="id">Elimination</span> <span class="id">Schemes</span>.<br/>
<span class="vernacular">Local</span> <span class="vernacular">Unset</span> <span class="id">Case</span> <span class="id">Analysis</span> <span class="id">Schemes</span>.<br/>
<br/>
<span class="gallina-kwd">Set</span> <span class="vernacular">Implicit</span> <span class="vernacular">Arguments</span>.<br/>
<br/>
<h1> The abstract signatures of trees </h1>
<br/>
<span class="vernacular">Module</span> <span class="gallina-kwd">Type</span> <span id="TREE" class="id"><a name="TREE" class="">TREE</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.elt" class="id"><a name="TREE.elt" class="">elt:</a></span> <span class="gallina-kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.elt_eq" class="id"><a name="TREE.elt_eq" class="">elt_eq:</a></span> <span class="gallina-kwd">forall</span> (<span id="a:2" class="id"><a name="a:2" class="">a</a></span> <span id="b:3" class="id"><a name="b:3" class="">b:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>)<span class="id">,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#b:3">b}</a></span> <span class="id">+</span> <span class="id">{a</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#b:3">b}</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.t" class="id"><a name="TREE.t" class="">t:</a></span> <span class="gallina-kwd">Type</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.empty" class="id"><a name="TREE.empty" class="">empty:</a></span> <span class="gallina-kwd">forall</span> (<span id="A:6" class="id"><a name="A:6" class="">A:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:6">A</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.get" class="id"><a name="TREE.get" class="">get:</a></span> <span class="gallina-kwd">forall</span> (<span id="A:8" class="id"><a name="A:8" class="">A:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:8">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:8">A</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.set" class="id"><a name="TREE.set" class="">set:</a></span> <span class="gallina-kwd">forall</span> (<span id="A:10" class="id"><a name="A:10" class="">A:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:10">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:10">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:10">A</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.remove" class="id"><a name="TREE.remove" class="">remove:</a></span> <span class="gallina-kwd">forall</span> (<span id="A:12" class="id"><a name="A:12" class="">A:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:12">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:12">A</a></span>.<br/>
<br/>
<div class="doc">The ``good variables'' properties for trees, expressing
    commutations between <span class="bracket"><span class="id">get</span></span>, <span class="bracket"><span class="id">set</span></span> and <span class="bracket"><span class="id">remove</span></span>. </div>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.gempty" class="id"><a name="TREE.gempty" class="">gempty:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:14" class="id"><a name="A:14" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:15" class="id"><a name="i:15" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:15">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.empty">empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:14">A</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.gss" class="id"><a name="TREE.gss" class="">gss:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:17" class="id"><a name="A:17" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:18" class="id"><a name="i:18" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>) (<span id="x:19" class="id"><a name="x:19" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:17">A</a></span>) (<span id="m:20" class="id"><a name="m:20" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:17">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:18">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:18">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:19">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:20">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:19">x</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.gso" class="id"><a name="TREE.gso" class="">gso:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:22" class="id"><a name="A:22" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:23" class="id"><a name="i:23" class="">i</a></span> <span id="j:24" class="id"><a name="j:24" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>) (<span id="x:25" class="id"><a name="x:25" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:22">A</a></span>) (<span id="m:26" class="id"><a name="m:26" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:22">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#i:23">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:24">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:23">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:24">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:25">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:26">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:23">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:26">m</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.gsspec" class="id"><a name="TREE.gsspec" class="">gsspec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:28" class="id"><a name="A:28" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:29" class="id"><a name="i:29" class="">i</a></span> <span id="j:30" class="id"><a name="j:30" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>) (<span id="x:31" class="id"><a name="x:31" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:28">A</a></span>) (<span id="m:32" class="id"><a name="m:32" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:28">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:29">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:30">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:31">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:32">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt_eq">elt_eq</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:29">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:30">j</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:31">x</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:29">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:32">m</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.grs" class="id"><a name="TREE.grs" class="">grs:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:34" class="id"><a name="A:34" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:35" class="id"><a name="i:35" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>) (<span id="m:36" class="id"><a name="m:36" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:34">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:35">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:35">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:36">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.gro" class="id"><a name="TREE.gro" class="">gro:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:38" class="id"><a name="A:38" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:39" class="id"><a name="i:39" class="">i</a></span> <span id="j:40" class="id"><a name="j:40" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>) (<span id="m:41" class="id"><a name="m:41" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:38">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#i:39">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:40">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:39">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:40">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:41">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:39">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:41">m</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.grspec" class="id"><a name="TREE.grspec" class="">grspec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:43" class="id"><a name="A:43" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:44" class="id"><a name="i:44" class="">i</a></span> <span id="j:45" class="id"><a name="j:45" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>) (<span id="m:46" class="id"><a name="m:46" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:43">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:44">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:45">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:46">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt_eq">elt_eq</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:44">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:45">j</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:44">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:46">m</a></span>.<br/>
<br/>
<div class="doc">Extensional equality between trees. </div>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.beq" class="id"><a name="TREE.beq" class="">beq:</a></span> <span class="gallina-kwd">forall</span> (<span id="A:48" class="id"><a name="A:48" class="">A:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> (<span class="id"><a href="compcert.lib.Maps.html#A:48">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:48">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:48">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:48">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.beq_correct" class="id"><a name="TREE.beq_correct" class="">beq_correct:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:50" class="id"><a name="A:50" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="eqA:51" class="id"><a name="eqA:51" class="">eqA:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:50">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:50">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span id="t1:52" class="id"><a name="t1:52" class="">t1</a></span> <span id="t2:53" class="id"><a name="t2:53" class="">t2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:50">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#TREE.beq">beq</a></span> <span class="id"><a href="compcert.lib.Maps.html#eqA:51">eqA</a></span> <span class="id"><a href="compcert.lib.Maps.html#t1:52">t1</a></span> <span class="id"><a href="compcert.lib.Maps.html#t2:53">t2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> (<span id="x:54" class="id"><a name="x:54" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:54">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#t1:52">t1,</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:54">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#t2:53">t2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">y1,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">y2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#eqA:51">eqA</a></span> <span class="id">y1</span> <span class="id">y2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>).<br/>
<br/>
<div class="doc">Applying a function to all data of a tree. </div>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.map" class="id"><a name="TREE.map" class="">map:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:56" class="id"><a name="A:56" class="">A</a></span> <span id="B:57" class="id"><a name="B:57" class="">B:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:56">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:57">B</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:56">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:57">B</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.gmap" class="id"><a name="TREE.gmap" class="">gmap:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:59" class="id"><a name="A:59" class="">A</a></span> <span id="B:60" class="id"><a name="B:60" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:61" class="id"><a name="f:61" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:59">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:60">B</a></span>) (<span id="i:62" class="id"><a name="i:62" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>) (<span id="m:63" class="id"><a name="m:63" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:59">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:62">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.map">map</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:61">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:63">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> (<span class="id"><a href="compcert.lib.Maps.html#f:61">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:62">i</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:62">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:63">m</a></span>).<br/>
<br/>
<div class="doc">Same as <span class="bracket"><span class="id">map</span></span>, but the function does not receive the <span class="bracket"><span class="id">elt</span></span> argument. </div>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.map1" class="id"><a name="TREE.map1" class="">map1:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:65" class="id"><a name="A:65" class="">A</a></span> <span id="B:66" class="id"><a name="B:66" class="">B:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> (<span class="id"><a href="compcert.lib.Maps.html#A:65">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:66">B</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:65">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:66">B</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.gmap1" class="id"><a name="TREE.gmap1" class="">gmap1:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:68" class="id"><a name="A:68" class="">A</a></span> <span id="B:69" class="id"><a name="B:69" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:70" class="id"><a name="f:70" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:68">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:69">B</a></span>) (<span id="i:71" class="id"><a name="i:71" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>) (<span id="m:72" class="id"><a name="m:72" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:68">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:71">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.map1">map1</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:70">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:72">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:70">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:71">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:72">m</a></span>).<br/>
<br/>
<div class="doc">Applying a function pairwise to all data of two trees. </div>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.combine" class="id"><a name="TREE.combine" class="">combine:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:74" class="id"><a name="A:74" class="">A</a></span> <span id="B:75" class="id"><a name="B:75" class="">B</a></span> <span id="C:76" class="id"><a name="C:76" class="">C:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:74">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:75">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#C:76">C</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:74">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:75">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#C:76">C</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.gcombine" class="id"><a name="TREE.gcombine" class="">gcombine:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:78" class="id"><a name="A:78" class="">A</a></span> <span id="B:79" class="id"><a name="B:79" class="">B</a></span> <span id="C:80" class="id"><a name="C:80" class="">C:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:81" class="id"><a name="f:81" class="">f:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:78">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:79">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#C:80">C</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#f:81">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="m1:82" class="id"><a name="m1:82" class="">m1:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:78">A</a></span>) (<span id="m2:83" class="id"><a name="m2:83" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:79">B</a></span>) (<span id="i:84" class="id"><a name="i:84" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:84">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.combine">combine</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:81">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:82">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:83">m2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:81">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:84">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:82">m1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:84">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:83">m2</a></span>).<br/>
<br/>
<div class="doc">Enumerating the bindings of a tree. </div>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.elements" class="id"><a name="TREE.elements" class="">elements:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:86" class="id"><a name="A:86" class="">A:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:86">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:86">A</a></span>).<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.elements_correct" class="id"><a name="TREE.elements_correct" class="">elements_correct:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:88" class="id"><a name="A:88" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="m:89" class="id"><a name="m:89" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:88">A</a></span>) (<span id="i:90" class="id"><a name="i:90" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>) (<span id="v:91" class="id"><a name="v:91" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:88">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:90">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:89">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:91">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#i:90">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:91">v</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#TREE.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:89">m</a></span>).<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.elements_complete" class="id"><a name="TREE.elements_complete" class="">elements_complete:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:93" class="id"><a name="A:93" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="m:94" class="id"><a name="m:94" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:93">A</a></span>) (<span id="i:95" class="id"><a name="i:95" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span>) (<span id="v:96" class="id"><a name="v:96" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:93">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#i:95">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:96">v</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#TREE.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:94">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:95">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:94">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:96">v</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.elements_keys_norepet" class="id"><a name="TREE.elements_keys_norepet" class="">elements_keys_norepet:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:98" class="id"><a name="A:98" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="m:99" class="id"><a name="m:99" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:98">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:98">A</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#TREE.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:99">m</a></span>)).<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.elements_extensional" class="id"><a name="TREE.elements_extensional" class="">elements_extensional:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:101" class="id"><a name="A:101" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="m:102" class="id"><a name="m:102" class="">m</a></span> <span id="n:103" class="id"><a name="n:103" class="">n:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:101">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:104" class="id"><a name="i:104" class="">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:104">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:102">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:104">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#n:103">n</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#TREE.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:102">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#n:103">n</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.elements_remove" class="id"><a name="TREE.elements_remove" class="">elements_remove:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:106" class="id"><a name="A:106" class="">A:</a></span> <span class="gallina-kwd">Type</span>) <span id="i:107" class="id"><a name="i:107" class="">i</a></span> <span id="v:108" class="id"><a name="v:108" class="">v</a></span> (<span id="m:109" class="id"><a name="m:109" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:106">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#TREE.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:107">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:109">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:108">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="l1:110" class="id"><a name="l1:110" class="">l1</a></span> <span id="l2:111" class="id"><a name="l2:111" class="">l2,</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:109">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:110">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> (<span class="id"><a href="compcert.lib.Maps.html#i:107">i,v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:111">l2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elements">elements</a></span> (<span class="id"><a href="compcert.lib.Maps.html#TREE.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:107">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:109">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:110">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:111">l2</a></span>.<br/>
<br/>
<div class="doc">Folding a function over all bindings of a tree. </div>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.fold" class="id"><a name="TREE.fold" class="">fold:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:113" class="id"><a name="A:113" class="">A</a></span> <span id="B:114" class="id"><a name="B:114" class="">B:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> (<span class="id"><a href="compcert.lib.Maps.html#B:114">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:113">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:114">B</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:113">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:114">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:114">B</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.fold_spec" class="id"><a name="TREE.fold_spec" class="">fold_spec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:116" class="id"><a name="A:116" class="">A</a></span> <span id="B:117" class="id"><a name="B:117" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:118" class="id"><a name="f:118" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:117">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.elt">elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:116">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:117">B</a></span>) (<span id="v:119" class="id"><a name="v:119" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:117">B</a></span>) (<span id="m:120" class="id"><a name="m:120" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:116">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#TREE.fold">fold</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:118">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:120">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:119">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="a:121" class="id"><a name="a:121" class="">a</a></span> <span id="p:122" class="id"><a name="p:122" class="">p</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:118">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:121">a</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:122">p</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:122">p</a></span>)) (<span class="id"><a href="compcert.lib.Maps.html#TREE.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:120">m</a></span>) <span class="id"><a href="compcert.lib.Maps.html#v:119">v</a></span>.<br/>
<div class="doc">Same as <span class="bracket"><span class="id">fold</span></span>, but the function does not receive the <span class="bracket"><span class="id">elt</span></span> argument. </div>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="TREE.fold1" class="id"><a name="TREE.fold1" class="">fold1:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:124" class="id"><a name="A:124" class="">A</a></span> <span id="B:125" class="id"><a name="B:125" class="">B:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> (<span class="id"><a href="compcert.lib.Maps.html#B:125">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:124">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:125">B</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:124">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:125">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:125">B</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="TREE.fold1_spec" class="id"><a name="TREE.fold1_spec" class="">fold1_spec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:127" class="id"><a name="A:127" class="">A</a></span> <span id="B:128" class="id"><a name="B:128" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:129" class="id"><a name="f:129" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:128">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:127">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:128">B</a></span>) (<span id="v:130" class="id"><a name="v:130" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:128">B</a></span>) (<span id="m:131" class="id"><a name="m:131" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#TREE.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:127">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#TREE.fold1">fold1</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:129">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:131">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:130">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="a:132" class="id"><a name="a:132" class="">a</a></span> <span id="p:133" class="id"><a name="p:133" class="">p</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:129">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:132">a</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:133">p</a></span>)) (<span class="id"><a href="compcert.lib.Maps.html#TREE.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:131">m</a></span>) <span class="id"><a href="compcert.lib.Maps.html#v:130">v</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#TREE">TREE</a></span>.<br/>
<br/>
<h1> The abstract signatures of maps </h1>
<br/>
<span class="vernacular">Module</span> <span class="gallina-kwd">Type</span> <span id="MAP" class="id"><a name="MAP" class="">MAP</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="MAP.elt" class="id"><a name="MAP.elt" class="">elt:</a></span> <span class="gallina-kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="MAP.elt_eq" class="id"><a name="MAP.elt_eq" class="">elt_eq:</a></span> <span class="gallina-kwd">forall</span> (<span id="a:136" class="id"><a name="a:136" class="">a</a></span> <span id="b:137" class="id"><a name="b:137" class="">b:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.elt">elt</a></span>)<span class="id">,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#b:137">b}</a></span> <span class="id">+</span> <span class="id">{a</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#b:137">b}</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="MAP.t" class="id"><a name="MAP.t" class="">t:</a></span> <span class="gallina-kwd">Type</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="MAP.init" class="id"><a name="MAP.init" class="">init:</a></span> <span class="gallina-kwd">forall</span> (<span id="A:140" class="id"><a name="A:140" class="">A:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#A:140">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:140">A</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="MAP.get" class="id"><a name="MAP.get" class="">get:</a></span> <span class="gallina-kwd">forall</span> (<span id="A:142" class="id"><a name="A:142" class="">A:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#MAP.elt">elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:142">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:142">A</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="MAP.set" class="id"><a name="MAP.set" class="">set:</a></span> <span class="gallina-kwd">forall</span> (<span id="A:144" class="id"><a name="A:144" class="">A:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#MAP.elt">elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:144">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:144">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:144">A</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="MAP.gi" class="id"><a name="MAP.gi" class="">gi:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:146" class="id"><a name="A:146" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:147" class="id"><a name="i:147" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.elt">elt</a></span>) (<span id="x:148" class="id"><a name="x:148" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:146">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#MAP.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:147">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#MAP.init">init</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:148">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:148">x</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="MAP.gss" class="id"><a name="MAP.gss" class="">gss:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:150" class="id"><a name="A:150" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:151" class="id"><a name="i:151" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.elt">elt</a></span>) (<span id="x:152" class="id"><a name="x:152" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:150">A</a></span>) (<span id="m:153" class="id"><a name="m:153" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:150">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#MAP.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:151">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#MAP.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:151">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:152">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:153">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:152">x</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="MAP.gso" class="id"><a name="MAP.gso" class="">gso:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:155" class="id"><a name="A:155" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:156" class="id"><a name="i:156" class="">i</a></span> <span id="j:157" class="id"><a name="j:157" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.elt">elt</a></span>) (<span id="x:158" class="id"><a name="x:158" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:155">A</a></span>) (<span id="m:159" class="id"><a name="m:159" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:155">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#i:156">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:157">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:156">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#MAP.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:157">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:158">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:159">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:156">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:159">m</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="MAP.gsspec" class="id"><a name="MAP.gsspec" class="">gsspec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:161" class="id"><a name="A:161" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:162" class="id"><a name="i:162" class="">i</a></span> <span id="j:163" class="id"><a name="j:163" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.elt">elt</a></span>) (<span id="x:164" class="id"><a name="x:164" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:161">A</a></span>) (<span id="m:165" class="id"><a name="m:165" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:161">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#MAP.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:162">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#MAP.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:163">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:164">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:165">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Maps.html#MAP.elt_eq">elt_eq</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:162">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:163">j</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.lib.Maps.html#x:164">x</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#MAP.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:162">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:165">m</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="MAP.gsident" class="id"><a name="MAP.gsident" class="">gsident:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:167" class="id"><a name="A:167" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:168" class="id"><a name="i:168" class="">i</a></span> <span id="j:169" class="id"><a name="j:169" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.elt">elt</a></span>) (<span id="m:170" class="id"><a name="m:170" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:167">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#MAP.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:169">j</a></span> (<span class="id"><a href="compcert.lib.Maps.html#MAP.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:168">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#MAP.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:168">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:170">m</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:170">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:169">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:170">m</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="MAP.map" class="id"><a name="MAP.map" class="">map:</a></span> <span class="gallina-kwd">forall</span> (<span id="A:172" class="id"><a name="A:172" class="">A</a></span> <span id="B:173" class="id"><a name="B:173" class="">B:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> (<span class="id"><a href="compcert.lib.Maps.html#A:172">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:173">B</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#MAP.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:172">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:173">B</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="MAP.gmap" class="id"><a name="MAP.gmap" class="">gmap:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:175" class="id"><a name="A:175" class="">A</a></span> <span id="B:176" class="id"><a name="B:176" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:177" class="id"><a name="f:177" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:175">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:176">B</a></span>) (<span id="i:178" class="id"><a name="i:178" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.elt">elt</a></span>) (<span id="m:179" class="id"><a name="m:179" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#MAP.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:175">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#MAP.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:178">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#MAP.map">map</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:177">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:179">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:177">f</a></span>(<span class="id"><a href="compcert.lib.Maps.html#MAP.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:178">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:179">m</a></span>).<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#MAP">MAP</a></span>.<br/>
<br/>
<h1> An implementation of trees over type <span class="bracket"><span class="id">positive</span></span> </h1>
<br/>
<span class="vernacular">Module</span> <span id="PTree" class="id"><a name="PTree" class="">PTree</a></span> <span class="id">&lt;:</span> <span class="id"><a href="compcert.lib.Maps.html#TREE">TREE</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.elt" class="id"><a name="PTree.elt" class="">elt</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.elt_eq" class="id"><a name="PTree.elt_eq" class="">elt_eq</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span>.<br/>
<br/>
<h2> Representation of trees </h2>
<br/>
<div class="doc">The type <span class="bracket"><span class="id">tree</span>'</span> of nonempty trees.  Each constructor is of the form
    <span class="bracket"><span class="id">NodeXYZ</span></span>, where the bit <span class="bracket"><span class="id">X</span></span> says whether there is a left subtree,
    <span class="bracket"><span class="id">Y</span></span> whether there is a value at this node, and <span class="bracket"><span class="id">Z</span></span> whether there is
    a right subtree. </div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Inductive</span> <span id="PTree.tree'" class="id"><a name="PTree.tree'" class="">tree'</a></span> (<span id="A:181" class="id"><a name="A:181" class="">A:</a></span> <span class="gallina-kwd">Type</span>) <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id">:=</span> <br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="PTree.Node001" class="id"><a name="PTree.Node001" class="">Node001:</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="PTree.Node010" class="id"><a name="PTree.Node010" class="">Node010:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="PTree.Node011" class="id"><a name="PTree.Node011" class="">Node011:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="PTree.Node100" class="id"><a name="PTree.Node100" class="">Node100:</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="PTree.Node101" class="id"><a name="PTree.Node101" class="">Node101:</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="PTree.Node110" class="id"><a name="PTree.Node110" class="">Node110:</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="PTree.Node111" class="id"><a name="PTree.Node111" class="">Node111:</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree':182">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:181">A</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Inductive</span> <span id="PTree.tree" class="id"><a name="PTree.tree" class="">tree</a></span> (<span id="A:184" class="id"><a name="A:184" class="">A:</a></span> <span class="gallina-kwd">Type</span>) <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id">:=</span> <br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="PTree.Empty" class="id"><a name="PTree.Empty" class="">Empty</a></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#tree:185">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:184">A</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="PTree.Nodes" class="id"><a name="PTree.Nodes" class="">Nodes:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:184">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#tree:185">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:184">A</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">{A}</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">{A}</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">{A}</span> <span class="id">_</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">{A}</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">{A}</span> <span class="id">_</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">{A}</span> <span class="id">_</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">{A}</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">{A}</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">{A}</span> <span class="id">_</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Scheme</span> <span id="PTree.tree'_ind" class="id"><a name="PTree.tree'_ind" class="">tree'_ind</a></span> <span class="id">:=</span> <span class="id">Induction</span> <span class="gallina-kwd">for</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id">Sort</span> <span class="gallina-kwd">Prop</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.t" class="id"><a name="PTree.t" class="">t</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span>.<br/>
<br/>
<div class="doc">A smart constructor for type <span class="bracket"><span class="id">tree</span></span>: given a (possibly empty)
      left subtree, a (possibly absent) value, and a (possibly empty)
      right subtree, it builds the corresponding tree. </div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.Node" class="id"><a name="PTree.Node" class="">Node</a></span> <span class="id">{A}</span> (<span id="l:188" class="id"><a name="l:188" class="">l:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:187">A</a></span>) (<span id="o:189" class="id"><a name="o:189" class="">o:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:187">A</a></span>) (<span id="r:190" class="id"><a name="r:190" class="">r:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:187">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:187">A</a></span> <span class="id">:=</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#l:188">l,o,r</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x</span> <span class="id">r'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l',</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l',</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l'</span> <span class="id">r'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l',</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l'</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l',</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l'</span> <span class="id">x</span> <span class="id">r'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<h2> Basic operations: <span class="bracket"><span class="id">empty</span></span>, <span class="bracket"><span class="id">get</span></span>, <span class="bracket"><span class="id">set</span></span>, <span class="bracket"><span class="id">remove</span></span> </h2>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.empty" class="id"><a name="PTree.empty" class="">empty</a></span> (<span id="A:194" class="id"><a name="A:194" class="">A:</a></span> <span class="gallina-kwd">Type</span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:194">A</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.get'" class="id"><a name="PTree.get'" class="">get'</a></span> <span class="id">{A}</span> (<span id="p:196" class="id"><a name="p:196" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:197" class="id"><a name="m:197" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:195">A</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:195">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#p:196">p,</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:197">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">_</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">_</span> <span class="id">x</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#get':198">get'</a></span> <span class="id">q</span> <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">m'</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#get':198">get'</a></span> <span class="id">q</span> <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">m'</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#get':198">get'</a></span> <span class="id">q</span> <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">m'</span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#get':198">get'</a></span> <span class="id">q</span> <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#get':198">get'</a></span> <span class="id">q</span> <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">_</span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#get':198">get'</a></span> <span class="id">q</span> <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">_</span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#get':198">get'</a></span> <span class="id">q</span> <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#get':198">get'</a></span> <span class="id">q</span> <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.get" class="id"><a name="PTree.get" class="">get</a></span> <span class="id">{A}</span> (<span id="p:202" class="id"><a name="p:202" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:203" class="id"><a name="m:203" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:201">A</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:201">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:203">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get'">get'</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:202">p</a></span> <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">set0</span> <span class="id">p</span> <span class="id">x</span></span> constructs the singleton tree that maps <span class="bracket"><span class="id">p</span></span> to <span class="bracket"><span class="id">x</span></span>
      and has no other bindings. </div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.set0" class="id"><a name="PTree.set0" class="">set0</a></span> <span class="id">{A}</span> (<span id="p:206" class="id"><a name="p:206" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="x:207" class="id"><a name="x:207" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:205">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:205">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#p:206">p</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:207">x</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> (<span class="id"><a href="compcert.lib.Maps.html#set0:208">set0</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:207">x</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> (<span class="id"><a href="compcert.lib.Maps.html#set0:208">set0</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:207">x</a></span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.set'" class="id"><a name="PTree.set'" class="">set'</a></span> <span class="id">{A}</span> (<span id="p:211" class="id"><a name="p:211" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="x:212" class="id"><a name="x:212" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:210">A</a></span>) (<span id="m:213" class="id"><a name="m:213" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:210">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:210">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#p:211">p,</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:213">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">r</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">_</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">r</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">r</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">_</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">r</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set0">set0</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span>) <span class="id">r</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set0">set0</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span>) <span class="id">y</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">y</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set0">set0</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span>) <span class="id">y</span> <span class="id">r</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> (<span class="id"><a href="compcert.lib.Maps.html#set':214">set'</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">l</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> (<span class="id"><a href="compcert.lib.Maps.html#set':214">set'</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">l</span>) <span class="id">r</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> (<span class="id"><a href="compcert.lib.Maps.html#set':214">set'</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">l</span>) <span class="id">y</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">y</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> (<span class="id"><a href="compcert.lib.Maps.html#set':214">set'</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">l</span>) <span class="id">y</span> <span class="id">r</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> (<span class="id"><a href="compcert.lib.Maps.html#set':214">set'</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">y</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set0">set0</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">y</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">y</span> (<span class="id"><a href="compcert.lib.Maps.html#set':214">set'</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set0">set0</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> (<span class="id"><a href="compcert.lib.Maps.html#set':214">set'</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">y</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set0">set0</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">y</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">y</span> (<span class="id"><a href="compcert.lib.Maps.html#set':214">set'</a></span> <span class="id">q</span> <span class="id"><a href="compcert.lib.Maps.html#x:212">x</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.set" class="id"><a name="PTree.set" class="">set</a></span> <span class="id">{A}</span> (<span id="p:218" class="id"><a name="p:218" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="x:219" class="id"><a name="x:219" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:217">A</a></span>) (<span id="m:220" class="id"><a name="m:220" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:217">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:217">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:220">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set0">set0</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:218">p</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:219">x</a></span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set'">set'</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:218">p</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:219">x</a></span> <span class="id">m'</span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">Removal in a nonempty tree produces a possibly empty tree.
      To simplify the code, we use the <span class="bracket"><span class="id">Node</span></span> smart constructor in the
      cases where the result can be empty or nonempty, depending on the
      results of the recursive calls. </div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.rem'" class="id"><a name="PTree.rem'" class="">rem'</a></span> <span class="id">{A}</span> (<span id="p:223" class="id"><a name="p:223" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:224" class="id"><a name="m:224" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:222">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:222">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#p:223">p,</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:224">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:224">m</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">_</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:224">m</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:224">m</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">_</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:224">m</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:224">m</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">y</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:224">m</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#rem':225">rem'</a></span> <span class="id">q</span> <span class="id">l</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#rem':225">rem'</a></span> <span class="id">q</span> <span class="id">l</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#rem':225">rem'</a></span> <span class="id">q</span> <span class="id">l</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">y</span>) <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">y</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#rem':225">rem'</a></span> <span class="id">q</span> <span class="id">l</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">y</span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="compcert.lib.Maps.html#rem':225">rem'</a></span> <span class="id">q</span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:224">m</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">y</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">y</span>) (<span class="id"><a href="compcert.lib.Maps.html#rem':225">rem'</a></span> <span class="id">q</span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:224">m</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="compcert.lib.Maps.html#rem':225">rem'</a></span> <span class="id">q</span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">y</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:224">m</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">q,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">y</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">y</span>) (<span class="id"><a href="compcert.lib.Maps.html#rem':225">rem'</a></span> <span class="id">q</span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">This use of <span class="bracket"><span class="id">Node</span></span> causes some run-time overhead, which we eliminate
      by partial evaluation within Coq. </div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.remove'" class="id"><a name="PTree.remove'" class="">remove'</a></span> <span class="id">:=</span> <span class="vernacular">Eval</span> <span class="id">cbv</span> <span class="id">[rem'</span> <span class="id">Node]</span> <span class="gallina-kwd">in</span> @<span class="id"><a href="compcert.lib.Maps.html#PTree.rem'">rem'</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.remove" class="id"><a name="PTree.remove" class="">remove</a></span> <span class="id">{A}</span> (<span id="p:229" class="id"><a name="p:229" class="">p:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:230" class="id"><a name="m:230" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:228">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:228">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:230">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.remove'">remove'</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:229">p</a></span> <span class="id">m'</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<h2> Good variable properties for the basic operations </h2>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.gempty" class="id"><a name="PTree.gempty" class="">gempty:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:232" class="id"><a name="A:232" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:233" class="id"><a name="i:233" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:233">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:232">A</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
 <span class="id">reflexivity</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.gEmpty" class="id"><a name="PTree.gEmpty" class="">gEmpty:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:234" class="id"><a name="A:234" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:235" class="id"><a name="i:235" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:235">i</a></span> (@<span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:234">A</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
 <span class="id">reflexivity</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.gss0" class="id"><a name="PTree.gss0" class="">gss0:</a></span> <span class="gallina-kwd">forall</span> <span class="id">{A}</span> <span id="p:237" class="id"><a name="p:237" class="">p</a></span> (<span id="x:238" class="id"><a name="x:238" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:236">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get'">get'</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:237">p</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set0">set0</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:237">p</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:238">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:238">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="id">induction</span> <span class="id">p;</span> <span class="id">simpl;</span> <span class="id">auto</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.gso0" class="id"><a name="PTree.gso0" class="">gso0:</a></span> <span class="gallina-kwd">forall</span> <span class="id">{A}</span> <span id="p:240" class="id"><a name="p:240" class="">p</a></span> <span id="q:241" class="id"><a name="q:241" class="">q</a></span> (<span id="x:242" class="id"><a name="x:242" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:239">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#p:240">p&lt;&gt;q</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get'">get'</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:240">p</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set0">set0</a></span> <span class="id"><a href="compcert.lib.Maps.html#q:241">q</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:242">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">p;</span> <span class="id">destruct</span> <span class="id">q;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">auto;</span> <span class="id">try</span> <span class="id">apply</span> <span class="id">IHp;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.gss" class="id"><a name="PTree.gss" class="">gss:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:243" class="id"><a name="A:243" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:244" class="id"><a name="i:244" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="x:245" class="id"><a name="x:245" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:243">A</a></span>) (<span id="m:246" class="id"><a name="m:246" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:243">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:244">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:244">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:245">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:246">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:245">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">m</span> <span class="gallina-kwd">as</span> <span class="id">[|m];</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss0">gss0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="id">revert</span> <span class="id">m;</span> <span class="id">induction</span> <span class="id">i;</span> <span class="id">destruct</span> <span class="id">m;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">auto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss0">gss0</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.gso" class="id"><a name="PTree.gso" class="">gso:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:247" class="id"><a name="A:247" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:248" class="id"><a name="i:248" class="">i</a></span> <span id="j:249" class="id"><a name="j:249" class="">j:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="x:250" class="id"><a name="x:250" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:247">A</a></span>) (<span id="m:251" class="id"><a name="m:251" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:247">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#i:248">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:249">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:248">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:249">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:250">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:251">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:248">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:251">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">m</span> <span class="gallina-kwd">as</span> <span class="id">[|m];</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso0">gso0;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="id">revert</span> <span class="id">m</span> <span class="id">j</span> <span class="id">H;</span> <span class="id">induction</span> <span class="id">i;</span> <span class="id">destruct</span> <span class="id">j,m;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">auto;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve</span> <span class="id">[apply</span> <span class="id">IHi;</span> <span class="id">congruence</span> <span class="id">|</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso0">gso0;</a></span> <span class="id">congruence</span> <span class="id">|</span> <span class="id">congruence]</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.gsspec" class="id"><a name="PTree.gsspec" class="">gsspec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:252" class="id"><a name="A:252" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:253" class="id"><a name="i:253" class="">i</a></span> <span id="j:254" class="id"><a name="j:254" class="">j:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="x:255" class="id"><a name="x:255" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:252">A</a></span>) (<span id="m:256" class="id"><a name="m:256" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:252">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:253">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:254">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:255">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:256">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:253">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:254">j</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:255">x</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:253">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:256">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">i</span> <span class="id">j</span>)<span class="id">;</span> <span class="id">[</span> <span class="id">rewrite</span> <span class="id">e;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">gss</a></span> <span class="id">|</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">gso;</a></span> <span class="id">auto</span> <span class="id">]</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.gNode" class="id"><a name="PTree.gNode" class="">gNode:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id">{A}</span> (<span id="i:258" class="id"><a name="i:258" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="l:259" class="id"><a name="l:259" class="">l:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:257">A</a></span>) (<span id="x:260" class="id"><a name="x:260" class="">x:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:257">A</a></span>) (<span id="r:261" class="id"><a name="r:261" class="">r:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:257">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:258">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:259">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:260">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:261">r</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#i:258">i</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#x:260">x</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">j</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">j</span> <span class="id"><a href="compcert.lib.Maps.html#l:259">l</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">j</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">j</span> <span class="id"><a href="compcert.lib.Maps.html#r:261">r</a></span> <span class="gallina-kwd">end</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">l,</span> <span class="id">x,</span> <span class="id">r;</span> <span class="id">simpl;</span> <span class="id">auto;</span> <span class="id">destruct</span> <span class="id">i;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.grs" class="id"><a name="PTree.grs" class="">grs:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:263" class="id"><a name="A:263" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:264" class="id"><a name="i:264" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:265" class="id"><a name="m:265" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:263">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:264">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:264">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:265">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Local</span> <span class="vernacular">Opaque</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">m</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|m];</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove'">remove'</a></span> <span class="id">i</span> <span class="id">m</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.rem'">rem'</a></span> <span class="id">i</span> <span class="id">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">m</span>. <span class="id">induction</span> <span class="id">i;</span> <span class="id">destruct</span> <span class="id">m;</span> <span class="id">simpl;</span> <span class="id">auto;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.gro" class="id"><a name="PTree.gro" class="">gro:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:266" class="id"><a name="A:266" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:267" class="id"><a name="i:267" class="">i</a></span> <span id="j:268" class="id"><a name="j:268" class="">j:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:269" class="id"><a name="m:269" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:266">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#i:267">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:268">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:267">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:268">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:269">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:267">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:269">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Local</span> <span class="vernacular">Opaque</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">m</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|m];</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove'">remove'</a></span> <span class="id">j</span> <span class="id">m</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.rem'">rem'</a></span> <span class="id">j</span> <span class="id">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">j</span> <span class="id">m</span>. <span class="id">induction</span> <span class="id">i;</span> <span class="id">destruct</span> <span class="id">j,</span> <span class="id">m;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">auto;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">solve</span> <span class="id">[</span> <span class="id">congruence</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode;</a></span> <span class="id">auto;</span> <span class="id">apply</span> <span class="id">IHi;</span> <span class="id">congruence</span> <span class="id">]</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.grspec" class="id"><a name="PTree.grspec" class="">grspec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:270" class="id"><a name="A:270" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:271" class="id"><a name="i:271" class="">i</a></span> <span id="j:272" class="id"><a name="j:272" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elt">elt</a></span>) (<span id="m:273" class="id"><a name="m:273" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:270">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:271">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:272">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:273">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">elt_eq</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:271">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:272">j</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:271">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:273">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">elt_eq</a></span> <span class="id">i</span> <span class="id">j</span>). <span class="id">subst</span> <span class="id">j</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grs">grs</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gro">gro;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Custom case analysis principles and induction principles </h2>
<br/>
<div class="doc">We can view trees as being of one of two (non-exclusive)
    cases: either <span class="bracket"><span class="id">Empty</span></span> for an empty tree, or <span class="bracket"><span class="id">Node</span> <span class="id">l</span> <span class="id">o</span> <span class="id">r</span></span> for a
    nonempty tree, with <span class="bracket"><span class="id">l</span></span> and <span class="bracket"><span class="id">r</span></span> the left and right subtrees
    and <span class="bracket"><span class="id">o</span></span> an optional value.  The <span class="bracket"><span class="id">Empty</span></span> constructor and the <span class="bracket"><span class="id">Node</span></span>
    smart function defined above provide one half of the view: the one
    that lets us construct values of type <span class="bracket"><span class="id">tree</span> <span class="id">A</span></span>.
    We now define the other half of the view: the one that lets us
    inspect and recurse over values of type <span class="bracket"><span class="id">tree</span> <span class="id">A</span></span>.  This is achieved
    by defining appropriate principles for case analysis and induction. </div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.not_trivially_empty" class="id"><a name="PTree.not_trivially_empty" class="">not_trivially_empty</a></span> <span class="id">{A}</span> (<span id="l:275" class="id"><a name="l:275" class="">l:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:274">A</a></span>) (<span id="o:276" class="id"><a name="o:276" class="">o:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:274">A</a></span>) (<span id="r:277" class="id"><a name="r:277" class="">r:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:274">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#l:275">l,</a></span> <span class="id"><a href="compcert.lib.Maps.html#o:276">o,</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:277">r</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">A case analysis principle </div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Section</span> <span id="PTree.TREE_CASE" class="id"><a name="PTree.TREE_CASE" class="">TREE_CASE</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Context</span> <span class="id">{A</span> <span id="B:282" class="id"><a name="B:282" class="">B:</a></span> <span class="id">Type}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="empty:283" class="id"><a name="empty:283" class="">empty:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:282">B</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="node:284" class="id"><a name="node:284" class="">node:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:281">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:281">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:281">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:282">B</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.tree_case" class="id"><a name="PTree.tree_case" class="">tree_case</a></span> (<span id="m:285" class="id"><a name="m:285" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE.B">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:285">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE.empty">empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE.node">node</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x</span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE.node">node</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x</span> <span class="id">r</span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE.node">node</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">x</span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">r</span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.unroll_tree_case" class="id"><a name="PTree.unroll_tree_case" class="">unroll_tree_case:</a></span> <span class="gallina-kwd">forall</span> <span id="l:287" class="id"><a name="l:287" class="">l</a></span> <span id="o:288" class="id"><a name="o:288" class="">o</a></span> <span id="r:289" class="id"><a name="r:289" class="">r,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.not_trivially_empty">not_trivially_empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:287">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#o:288">o</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:289">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.tree_case">tree_case</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:287">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#o:288">o</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:289">r</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE.node">node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:287">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#o:288">o</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:289">r</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l,</span> <span class="id">o,</span> <span class="id">r;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">auto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_CASE">TREE_CASE</a></span>.<br/>
<br/>
<div class="doc">A recursion principle </div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Section</span> <span id="PTree.TREE_REC" class="id"><a name="PTree.TREE_REC" class="">TREE_REC</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Context</span> <span class="id">{A</span> <span id="B:291" class="id"><a name="B:291" class="">B:</a></span> <span class="id">Type}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="empty:292" class="id"><a name="empty:292" class="">empty:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:291">B</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="node:293" class="id"><a name="node:293" class="">node:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:290">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:291">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:290">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:290">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:291">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:291">B</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.tree_rec'" class="id"><a name="PTree.tree_rec'" class="">tree_rec'</a></span> (<span id="m:294" class="id"><a name="m:294" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.B">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:294">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.node">node</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.empty">empty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_rec':295">tree_rec'</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.node">node</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.empty">empty</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.empty">empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.node">node</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.empty">empty</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_rec':295">tree_rec'</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_rec':295">tree_rec'</a></span> <span class="id">l</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.empty">empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_rec':295">tree_rec'</a></span> <span class="id">l</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_rec':295">tree_rec'</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_rec':295">tree_rec'</a></span> <span class="id">l</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.empty">empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_rec':295">tree_rec'</a></span> <span class="id">l</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_rec':295">tree_rec'</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.tree_rec" class="id"><a name="PTree.tree_rec" class="">tree_rec</a></span> (<span id="m:297" class="id"><a name="m:297" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.B">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:297">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.empty">empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec'">tree_rec'</a></span> <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.unroll_tree_rec" class="id"><a name="PTree.unroll_tree_rec" class="">unroll_tree_rec:</a></span> <span class="gallina-kwd">forall</span> <span id="l:299" class="id"><a name="l:299" class="">l</a></span> <span id="o:300" class="id"><a name="o:300" class="">o</a></span> <span id="r:301" class="id"><a name="r:301" class="">r,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.not_trivially_empty">not_trivially_empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:299">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#o:300">o</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:301">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec">tree_rec</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:299">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#o:300">o</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:301">r</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC.node">node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:299">l</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec">tree_rec</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:299">l</a></span>) <span class="id"><a href="compcert.lib.Maps.html#o:300">o</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:301">r</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec">tree_rec</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:301">r</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l,</span> <span class="id">o,</span> <span class="id">r;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">auto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC">TREE_REC</a></span>.<br/>
<br/>
<div class="doc">A double recursion principle </div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Section</span> <span id="PTree.TREE_REC2" class="id"><a name="PTree.TREE_REC2" class="">TREE_REC2</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Context</span> <span class="id">{A</span> <span id="B:303" class="id"><a name="B:303" class="">B</a></span> <span id="C:304" class="id"><a name="C:304" class="">C:</a></span> <span class="id">Type}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="base:305" class="id"><a name="base:305" class="">base:</a></span> <span class="id"><a href="compcert.lib.Maps.html#C:304">C</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="base1:306" class="id"><a name="base1:306" class="">base1:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:303">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#C:304">C</a></span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="base2:307" class="id"><a name="base2:307" class="">base2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:302">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#C:304">C</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="nodes:316" class="id"><a name="nodes:316" class="">nodes:</a></span> <span class="gallina-kwd">forall</span> (<span id="l1:308" class="id"><a name="l1:308" class="">l1:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:302">A</a></span>) (<span id="o1:309" class="id"><a name="o1:309" class="">o1:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:302">A</a></span>) (<span id="r1:310" class="id"><a name="r1:310" class="">r1:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:302">A</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="l2:311" class="id"><a name="l2:311" class="">l2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:303">B</a></span>) (<span id="o2:312" class="id"><a name="o2:312" class="">o2:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:303">B</a></span>) (<span id="r2:313" class="id"><a name="r2:313" class="">r2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:303">B</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="lrec:314" class="id"><a name="lrec:314" class="">lrec:</a></span> <span class="id"><a href="compcert.lib.Maps.html#C:304">C</a></span>) (<span id="rrec:315" class="id"><a name="rrec:315" class="">rrec:</a></span> <span class="id"><a href="compcert.lib.Maps.html#C:304">C</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#C:304">C</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.tree_rec2'" class="id"><a name="PTree.tree_rec2'" class="">tree_rec2'</a></span> (<span id="m1:317" class="id"><a name="m1:317" class="">m1:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.A">A</a></span>) (<span id="m2:318" class="id"><a name="m2:318" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.B">B</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.C">C</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">m1</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">r1</span> <span class="id">|</span> <span class="id">x1</span> <span class="id">|</span> <span class="id">x1</span> <span class="id">r1</span> <span class="id">|</span> <span class="id">l1</span> <span class="id">|</span> <span class="id">l1</span> <span class="id">r1</span> <span class="id">|</span> <span class="id">l1</span> <span class="id">x1</span> <span class="id">|</span> <span class="id">l1</span> <span class="id">x1</span> <span class="id">r1</span> <span class="id">];</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">m2</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">r2</span> <span class="id">|</span> <span class="id">x2</span> <span class="id">|</span> <span class="id">x2</span> <span class="id">r2</span> <span class="id">|</span> <span class="id">l2</span> <span class="id">|</span> <span class="id">l2</span> <span class="id">r2</span> <span class="id">|</span> <span class="id">l2</span> <span class="id">x2</span> <span class="id">|</span> <span class="id">l2</span> <span class="id">x2</span> <span class="id">r2</span> <span class="id">];</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.nodes">nodes;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[</span> <span class="id">solve</span> <span class="id">[</span> <span class="id">exact</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l1</span>) <span class="id">|</span> <span class="id">exact</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">solve</span> <span class="id">[</span> <span class="id">exact</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x1</span>)  <span class="id">|</span> <span class="id">exact</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">solve</span> <span class="id">[</span> <span class="id">exact</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r1</span>) <span class="id">|</span> <span class="id">exact</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">solve</span> <span class="id">[</span> <span class="id">exact</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l2</span>) <span class="id">|</span> <span class="id">exact</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">solve</span> <span class="id">[</span> <span class="id">exact</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x2</span>)  <span class="id">|</span> <span class="id">exact</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">solve</span> <span class="id">[</span> <span class="id">exact</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r2</span>) <span class="id">|</span> <span class="id">exact</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">solve</span> <span class="id">[</span> <span class="id">exact</span> (<span class="id">tree_rec2'</span> <span class="id">l1</span> <span class="id">l2</span>) <span class="id">|</span> <span class="id">exact</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.base2">base2</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l1</span>)) <span class="id">|</span> <span class="id">exact</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.base1">base1</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l2</span>)) <span class="id">|</span> <span class="id">exact</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.base">base</a></span> <span class="id">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">solve</span> <span class="id">[</span> <span class="id">exact</span> (<span class="id">tree_rec2'</span> <span class="id">r1</span> <span class="id">r2</span>) <span class="id">|</span> <span class="id">exact</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.base2">base2</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r1</span>)) <span class="id">|</span> <span class="id">exact</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.base1">base1</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r2</span>)) <span class="id">|</span> <span class="id">exact</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.base">base</a></span> <span class="id">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">]</span>).<br/>
&nbsp;&nbsp;Defined.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.tree_rec2" class="id"><a name="PTree.tree_rec2" class="">tree_rec2</a></span> (<span id="a:320" class="id"><a name="a:320" class="">a:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.A">A</a></span>) (<span id="b:321" class="id"><a name="b:321" class="">b:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.B">B</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.C">C</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#a:320">a,</a></span> <span class="id"><a href="compcert.lib.Maps.html#b:321">b</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.base">base</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty,</a></span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.base1">base1</a></span> <span class="id"><a href="compcert.lib.Maps.html#b:321">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.base2">base2</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:320">a</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">a',</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">b'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec2'">tree_rec2'</a></span> <span class="id">a'</span> <span class="id">b'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.unroll_tree_rec2_NE" class="id"><a name="PTree.unroll_tree_rec2_NE" class="">unroll_tree_rec2_NE:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l1:324" class="id"><a name="l1:324" class="">l1</a></span> <span id="o1:325" class="id"><a name="o1:325" class="">o1</a></span> <span id="r1:326" class="id"><a name="r1:326" class="">r1,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.not_trivially_empty">not_trivially_empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:324">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#o1:325">o1</a></span> <span class="id"><a href="compcert.lib.Maps.html#r1:326">r1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec2">tree_rec2</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:324">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#o1:325">o1</a></span> <span class="id"><a href="compcert.lib.Maps.html#r1:326">r1</a></span>) <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.base2">base2</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:324">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#o1:325">o1</a></span> <span class="id"><a href="compcert.lib.Maps.html#r1:326">r1</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">l1,</span> <span class="id">o1,</span> <span class="id">r1;</span> <span class="id">try</span> <span class="id">contradiction;</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.unroll_tree_rec2_EN" class="id"><a name="PTree.unroll_tree_rec2_EN" class="">unroll_tree_rec2_EN:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l2:327" class="id"><a name="l2:327" class="">l2</a></span> <span id="o2:328" class="id"><a name="o2:328" class="">o2</a></span> <span id="r2:329" class="id"><a name="r2:329" class="">r2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.not_trivially_empty">not_trivially_empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:327">l2</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:328">o2</a></span> <span class="id"><a href="compcert.lib.Maps.html#r2:329">r2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec2">tree_rec2</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:327">l2</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:328">o2</a></span> <span class="id"><a href="compcert.lib.Maps.html#r2:329">r2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.base1">base1</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:327">l2</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:328">o2</a></span> <span class="id"><a href="compcert.lib.Maps.html#r2:329">r2</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">l2,</span> <span class="id">o2,</span> <span class="id">r2;</span> <span class="id">try</span> <span class="id">contradiction;</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.unroll_tree_rec2_NN" class="id"><a name="PTree.unroll_tree_rec2_NN" class="">unroll_tree_rec2_NN:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l1:330" class="id"><a name="l1:330" class="">l1</a></span> <span id="o1:331" class="id"><a name="o1:331" class="">o1</a></span> <span id="r1:332" class="id"><a name="r1:332" class="">r1</a></span> <span id="l2:333" class="id"><a name="l2:333" class="">l2</a></span> <span id="o2:334" class="id"><a name="o2:334" class="">o2</a></span> <span id="r2:335" class="id"><a name="r2:335" class="">r2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.not_trivially_empty">not_trivially_empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:330">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#o1:331">o1</a></span> <span class="id"><a href="compcert.lib.Maps.html#r1:332">r1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.not_trivially_empty">not_trivially_empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:333">l2</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:334">o2</a></span> <span class="id"><a href="compcert.lib.Maps.html#r2:335">r2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec2">tree_rec2</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:330">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#o1:331">o1</a></span> <span class="id"><a href="compcert.lib.Maps.html#r1:332">r1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:333">l2</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:334">o2</a></span> <span class="id"><a href="compcert.lib.Maps.html#r2:335">r2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2.nodes">nodes</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:330">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#o1:331">o1</a></span> <span class="id"><a href="compcert.lib.Maps.html#r1:332">r1</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:333">l2</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:334">o2</a></span> <span class="id"><a href="compcert.lib.Maps.html#r2:335">r2</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec2">tree_rec2</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:330">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:333">l2</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec2">tree_rec2</a></span> <span class="id"><a href="compcert.lib.Maps.html#r1:332">r1</a></span> <span class="id"><a href="compcert.lib.Maps.html#r2:335">r2</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l1,</span> <span class="id">o1,</span> <span class="id">r1;</span> <span class="id">try</span> <span class="id">contradiction;</span> <span class="id">destruct</span> <span class="id">l2,</span> <span class="id">o2,</span> <span class="id">r2;</span> <span class="id">try</span> <span class="id">contradiction;</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_REC2">TREE_REC2</a></span>.<br/>
<br/>
<div class="doc">An induction principle </div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Section</span> <span id="PTree.TREE_IND" class="id"><a name="PTree.TREE_IND" class="">TREE_IND</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Context</span> <span class="id">{A:</span> <span class="id">Type}</span> (<span id="P:337" class="id"><a name="P:337" class="">P:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:336">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="empty:338" class="id"><a name="empty:338" class="">empty:</a></span> <span class="id"><a href="compcert.lib.Maps.html#P:337">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="node:342" class="id"><a name="node:342" class="">node:</a></span> <span class="gallina-kwd">forall</span> <span id="l:339" class="id"><a name="l:339" class="">l,</a></span> <span class="id"><a href="compcert.lib.Maps.html#P:337">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:339">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">forall</span> <span id="o:340" class="id"><a name="o:340" class="">o</a></span> <span id="r:341" class="id"><a name="r:341" class="">r,</a></span> <span class="id"><a href="compcert.lib.Maps.html#P:337">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:341">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.not_trivially_empty">not_trivially_empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:339">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#o:340">o</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:341">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#P:337">P</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:339">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#o:340">o</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:341">r</a></span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="id">Program</span> <span class="vernacular">Fixpoint</span> <span id="PTree.tree_ind'" class="id"><a name="PTree.tree_ind'" class="">tree_ind'</a></span> (<span id="m:343" class="id"><a name="m:343" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.P">P</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:343">m</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:343">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> @<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.node">node</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.empty">empty</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_ind':344">tree_ind'</a></span> <span class="id">r</span>) <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x</span> <span class="id">=&gt;</span> @<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.node">node</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.empty">empty</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.empty">empty</a></span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> @<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.node">node</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.empty">empty</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_ind':344">tree_ind'</a></span> <span class="id">r</span>) <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> @<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_ind':344">tree_ind'</a></span> <span class="id">l</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.empty">empty</a></span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> @<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_ind':344">tree_ind'</a></span> <span class="id">l</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_ind':344">tree_ind'</a></span> <span class="id">r</span>) <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">=&gt;</span> @<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_ind':344">tree_ind'</a></span> <span class="id">l</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.empty">empty</a></span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> @<span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.node">node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">l</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_ind':344">tree_ind'</a></span> <span class="id">l</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">r</span>) (<span class="id"><a href="compcert.lib.Maps.html#tree_ind':344">tree_ind'</a></span> <span class="id">r</span>) <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.tree_ind" class="id"><a name="PTree.tree_ind" class="">tree_ind</a></span> (<span id="m:346" class="id"><a name="m:346" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.P">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:346">m</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:346">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND.empty">empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind'">tree_ind'</a></span> <span class="id">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.TREE_IND">TREE_IND</a></span>.<br/>
<br/>
<h2> Extensionality property </h2>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.tree'_not_empty" class="id"><a name="PTree.tree'_not_empty" class="">tree'_not_empty:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id">{A}</span> (<span id="m:349" class="id"><a name="m:349" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:348">A</a></span>)<span class="id">,</span> <span class="gallina-kwd">exists</span> <span id="i:350" class="id"><a name="i:350" class="">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get'">get'</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:350">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:349">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m;</span> <span class="id">simpl;</span> <span class="id">try</span> <span class="id">destruct</span> <span class="id">IHm</span> <span class="gallina-kwd">as</span> <span class="id">[p</span> <span class="id">H]</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">p</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH;</a></span> <span class="id">simpl;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH;</a></span> <span class="id">simpl;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">p</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="id">destruct</span> <span class="id">IHm1</span> <span class="gallina-kwd">as</span> <span class="id">[p</span> <span class="id">H];</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">p</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH;</a></span> <span class="id">simpl;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="gallina-kwd">exists</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH;</a></span> <span class="id">simpl;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Corollary</span> <span id="PTree.extensionality_empty" class="id"><a name="PTree.extensionality_empty" class="">extensionality_empty:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id">{A}</span> (<span id="m:352" class="id"><a name="m:352" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:351">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:353" class="id"><a name="i:353" class="">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:353">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:352">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#m:352">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">m</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">m];</span> <span class="id">auto</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.tree'_not_empty">tree'_not_empty</a></span> <span class="id">m</span>) <span class="gallina-kwd">as</span> <span class="id">[i</span> <span class="id">GET]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">elim</span> <span class="id">GET</span>. <span class="id">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.extensionality" class="id"><a name="PTree.extensionality" class="">extensionality:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:354" class="id"><a name="A:354" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="m1:355" class="id"><a name="m1:355" class="">m1</a></span> <span id="m2:356" class="id"><a name="m2:356" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:354">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:357" class="id"><a name="i:357" class="">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:357">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:355">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:357">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:356">m2</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#m1:355">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:356">m2</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">A</span>. <span class="id">induction</span> <span class="id">m1</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind;</a></span> <span class="id">induction</span> <span class="id">m2</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.extensionality_empty">extensionality_empty</a></span>. <span class="id">intros;</span> <span class="id">symmetry;</span> <span class="id">apply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.extensionality_empty">extensionality_empty</a></span>. <span class="id">apply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">IHm1_1</span>. <span class="id">intros</span>. <span class="id">specialize</span> (<span class="id">H1</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">i</span>))<span class="id">;</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">specialize</span> (<span class="id">H1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">IHm1_2</span>. <span class="id">intros</span>. <span class="id">specialize</span> (<span class="id">H1</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">i</span>))<span class="id">;</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Some consequences of extensionality </div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.gsident" class="id"><a name="PTree.gsident" class="">gsident:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id">{A}</span> (<span id="i:359" class="id"><a name="i:359" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:360" class="id"><a name="m:360" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:358">A</a></span>) (<span id="v:361" class="id"><a name="v:361" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:358">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:359">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:360">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:361">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:359">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:361">v</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:360">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:360">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.extensionality">extensionality;</a></span> <span class="id">intros</span> <span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">j</span> <span class="id">i</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.set2" class="id"><a name="PTree.set2" class="">set2:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id">{A}</span> (<span id="i:363" class="id"><a name="i:363" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elt">elt</a></span>) (<span id="m:364" class="id"><a name="m:364" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:362">A</a></span>) (<span id="v1:365" class="id"><a name="v1:365" class="">v1</a></span> <span id="v2:366" class="id"><a name="v2:366" class="">v2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:362">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:363">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#v2:366">v2</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:363">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#v1:365">v1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:364">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:363">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#v2:366">v2</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:364">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.extensionality">extensionality;</a></span> <span class="id">intros</span> <span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">gsspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">j</span> <span class="id">i</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Boolean equality </h2>
<br/>
&nbsp;&nbsp;<span class="vernacular">Section</span> <span id="PTree.BOOLEAN_EQUALITY" class="id"><a name="PTree.BOOLEAN_EQUALITY" class="">BOOLEAN_EQUALITY</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Variable</span> <span id="PTree.BOOLEAN_EQUALITY.A" class="id"><a name="PTree.BOOLEAN_EQUALITY.A" class="">A:</a></span> <span class="gallina-kwd">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Variable</span> <span id="PTree.BOOLEAN_EQUALITY.beqA" class="id"><a name="PTree.BOOLEAN_EQUALITY.beqA" class="">beqA:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.beq'" class="id"><a name="PTree.beq'" class="">beq'</a></span> (<span id="m1:369" class="id"><a name="m1:369" class="">m1</a></span> <span id="m2:370" class="id"><a name="m2:370" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.A">A</a></span>) <span class="id">{struct</span> <span class="id">m1}</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m1:369">m1,</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:370">m2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r1,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#beq':371">beq'</a></span> <span class="id">r1</span> <span class="id">r2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x1,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id">x1</span> <span class="id">x2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x1</span> <span class="id">r1,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x2</span> <span class="id">r2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id">x1</span> <span class="id">x2</span> &amp;&amp; <span class="id"><a href="compcert.lib.Maps.html#beq':371">beq'</a></span> <span class="id">r1</span> <span class="id">r2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l1,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#beq':371">beq'</a></span> <span class="id">l1</span> <span class="id">l2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l1</span> <span class="id">r1,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l2</span> <span class="id">r2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#beq':371">beq'</a></span> <span class="id">l1</span> <span class="id">l2</span> &amp;&amp; <span class="id"><a href="compcert.lib.Maps.html#beq':371">beq'</a></span> <span class="id">r1</span> <span class="id">r2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l1</span> <span class="id">x1,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l2</span> <span class="id">x2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id">x1</span> <span class="id">x2</span> &amp;&amp; <span class="id"><a href="compcert.lib.Maps.html#beq':371">beq'</a></span> <span class="id">l1</span> <span class="id">l2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l1</span> <span class="id">x1</span> <span class="id">r1,</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l2</span> <span class="id">x2</span> <span class="id">r2</span>  <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id">x1</span> <span class="id">x2</span> &amp;&amp; <span class="id"><a href="compcert.lib.Maps.html#beq':371">beq'</a></span> <span class="id">l1</span> <span class="id">l2</span> &amp;&amp; <span class="id"><a href="compcert.lib.Maps.html#beq':371">beq'</a></span> <span class="id">r1</span> <span class="id">r2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.beq" class="id"><a name="PTree.beq" class="">beq</a></span> (<span id="m1:374" class="id"><a name="m1:374" class="">m1</a></span> <span id="m2:375" class="id"><a name="m2:375" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m1:374">m1,</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:375">m2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m1',</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m2'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.beq'">beq'</a></span> <span class="id">m1'</span> <span class="id">m2'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Let</span> <span id="PTree.BOOLEAN_EQUALITY.beq_optA" class="id"><a name="PTree.BOOLEAN_EQUALITY.beq_optA" class="">beq_optA</a></span> (<span id="o1:378" class="id"><a name="o1:378" class="">o1</a></span> <span id="o2:379" class="id"><a name="o2:379" class="">o2:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#o1:378">o1,</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:379">o2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a1,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id">a1</span> <span class="id">a2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.beq_correct_bool" class="id"><a name="PTree.beq_correct_bool" class="">beq_correct_bool:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:382" class="id"><a name="m1:382" class="">m1</a></span> <span id="m2:383" class="id"><a name="m2:383" class="">m2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.beq">beq</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:382">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:383">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> (<span class="gallina-kwd">forall</span> <span id="x:384" class="id"><a name="x:384" class="">x,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.beq_optA">beq_optA</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:384">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:382">m1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:384">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:383">m2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Local</span> <span class="vernacular">Transparent</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">beq_NN:</span> <span class="gallina-kwd">forall</span> <span id="l1:391" class="id"><span id="l1:385" class="id"><a name="l1:391" class="">l1</a></span></span> <span id="o1:392" class="id"><span id="o1:386" class="id"><a name="o1:392" class="">o1</a></span></span> <span id="r1:393" class="id"><span id="r1:387" class="id"><a name="r1:393" class="">r1</a></span></span> <span id="l2:394" class="id"><span id="l2:388" class="id"><a name="l2:394" class="">l2</a></span></span> <span id="o2:395" class="id"><span id="o2:389" class="id"><a name="o2:395" class="">o2</a></span></span> <span id="r2:396" class="id"><span id="r2:390" class="id"><a name="r2:396" class="">r2,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.not_trivially_empty">not_trivially_empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:385">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#o1:386">o1</a></span> <span class="id"><a href="compcert.lib.Maps.html#r1:387">r1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.not_trivially_empty">not_trivially_empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:388">l2</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:389">o2</a></span> <span class="id"><a href="compcert.lib.Maps.html#r2:390">r2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.beq">beq</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:385">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#o1:386">o1</a></span> <span class="id"><a href="compcert.lib.Maps.html#r1:387">r1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:388">l2</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:389">o2</a></span> <span class="id"><a href="compcert.lib.Maps.html#r2:390">r2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.beq">beq</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:385">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:388">l2</a></span> &amp;&amp; <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.beq_optA">beq_optA</a></span> <span class="id"><a href="compcert.lib.Maps.html#o1:386">o1</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:389">o2</a></span> &amp;&amp; <span class="id"><a href="compcert.lib.Maps.html#PTree.beq">beq</a></span> <span class="id"><a href="compcert.lib.Maps.html#r1:387">r1</a></span> <span class="id"><a href="compcert.lib.Maps.html#r2:390">r2</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">l1,</span> <span class="id">o1,</span> <span class="id">r1;</span> <span class="id">try</span> <span class="id">contradiction;</span> <span class="id">destruct</span> <span class="id">l2,</span> <span class="id">o2,</span> <span class="id">r2;</span> <span class="id">try</span> <span class="id">contradiction;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl;</span> <span class="id">rewrite</span> <span class="id">?</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_r">andb_true_r,</a></span> <span class="id">?</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_r">andb_false_r;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_comm">andb_comm;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal;</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#andb_comm">andb_comm;</a></span> <span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m1</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind;</a></span> <span class="id">[|induction</span> <span class="id">m2</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind]</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="id">intros</span>. <span class="id">simpl;</span> <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> <span class="id">m2;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">replace</span> <span class="id">m2</span> <span class="gallina-kwd">with</span> (@<span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.A">A</a></span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.extensionality">extensionality;</a></span> <span class="id">intros</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H</span> <span class="id">x</span>). <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">x</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">simpl;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id">l</span> <span class="id">o</span> <span class="id">r</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">replace</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id">l</span> <span class="id">o</span> <span class="id">r</span>) <span class="gallina-kwd">with</span> (@<span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.A">A</a></span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.extensionality">extensionality;</a></span> <span class="id">intros</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H0</span> <span class="id">x</span>). <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id">l</span> <span class="id">o</span> <span class="id">r</span>))<span class="id">;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="id">rewrite</span> <span class="id">beq_NN</span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">InvBooleans</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span>. <span class="id">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span> <span class="id">apply</span> <span class="id">IHm0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span> <span class="id">apply</span> <span class="id">IHm1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#andb_true_intro">andb_true_intro;</a></span> <span class="id">split;</span> <span class="id">[apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#andb_true_intro">andb_true_intro;</a></span> <span class="id">split|]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span> <span class="id">apply</span> <span class="id">IHm1</span>. <span class="id">intros</span>. <span class="id">specialize</span> (<span class="id">H1</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">x</span>))<span class="id">;</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span> <span class="id">specialize</span> (<span class="id">H1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span> <span class="id">apply</span> <span class="id">IHm0</span>. <span class="id">intros</span>. <span class="id">specialize</span> (<span class="id">H1</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">x</span>))<span class="id">;</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span> <span class="gallina-kwd">in</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.beq_correct" class="id"><a name="PTree.beq_correct" class="">beq_correct:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:397" class="id"><a name="m1:397" class="">m1</a></span> <span id="m2:398" class="id"><a name="m2:398" class="">m2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.beq">beq</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:397">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:398">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> (<span id="x:399" class="id"><a name="x:399" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elt">elt</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:399">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:397">m1,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:399">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:398">m2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">y1,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">y2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id">y1</span> <span class="id">y2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.beq_correct_bool">beq_correct_bool</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#beq_optA">beq_optA</a></span>. <span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="id">specialize</span> (<span class="id">H</span> <span class="id">x</span>). <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">x</span> <span class="id">m1</span>)<span class="id">,</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">x</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span> <span class="id">specialize</span> (<span class="id">H</span> <span class="id">x</span>). <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">x</span> <span class="id">m1</span>)<span class="id">,</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">x</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">intuition</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.BOOLEAN_EQUALITY">BOOLEAN_EQUALITY</a></span>.<br/>
<br/>
<h2> Collective operations </h2>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.prev_append" class="id"><a name="PTree.prev_append" class="">prev_append</a></span> (<span id="i:400" class="id"><a name="i:400" class="">i</a></span> <span id="j:401" class="id"><a name="j:401" class="">j:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) <span class="id">{struct</span> <span class="id">i}</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#i:400">i</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#j:401">j</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">i'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#prev_append:402">prev_append</a></span> <span class="id">i'</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:401">j</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">i'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#prev_append:402">prev_append</a></span> <span class="id">i'</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:401">j</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.prev" class="id"><a name="PTree.prev" class="">prev</a></span> (<span id="i:404" class="id"><a name="i:404" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append">prev_append</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:404">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.prev_append_prev" class="id"><a name="PTree.prev_append_prev" class="">prev_append_prev</a></span> <span id="i:405" class="id"><a name="i:405" class="">i</a></span> <span id="j:406" class="id"><a name="j:406" class="">j:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append">prev_append</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:405">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:406">j</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append">prev_append</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:406">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:405">i</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">j</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">i</span> <span class="gallina-kwd">as</span> <span class="id">[i</span> <span class="id">IH|i</span> <span class="id">IH|]</span>. <span class="id">3:</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">j</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">IH</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">j</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">IH</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.prev_involutive" class="id"><a name="PTree.prev_involutive" class="">prev_involutive</a></span> <span id="i:407" class="id"><a name="i:407" class="">i</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:407">i</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:407">i</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Proof</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_prev">prev_append_prev</a></span> <span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.prev_append_inj" class="id"><a name="PTree.prev_append_inj" class="">prev_append_inj</a></span> <span id="i:408" class="id"><a name="i:408" class="">i</a></span> <span id="j:409" class="id"><a name="j:409" class="">j</a></span> <span id="j':410" class="id"><a name="j':410" class="">j'</a></span> <span class="id">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append">prev_append</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:408">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:409">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append">prev_append</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:408">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j':410">j'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:409">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#j':410">j'</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">j</span> <span class="id">j'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">i</span> <span class="gallina-kwd">as</span> <span class="id">[i</span> <span class="id">Hi|i</span> <span class="id">Hi|];</span> <span class="id">intros</span> <span class="id">j</span> <span class="id">j'</span> <span class="id">H;</span> <span class="id">auto;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Hi</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.map'" class="id"><a name="PTree.map'" class="">map'</a></span> <span class="id">{A</span> <span id="B:412" class="id"><a name="B:412" class="">B}</a></span> (<span id="f:413" class="id"><a name="f:413" class="">f:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:411">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:412">B</a></span>) (<span id="m:414" class="id"><a name="m:414" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:411">A</a></span>) (<span id="i:415" class="id"><a name="i:415" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{struct</span> <span class="id">m}</span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:412">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:414">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> (<span class="id"><a href="compcert.lib.Maps.html#map':416">map'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> (<span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>) <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> (<span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>) <span class="id">x</span>) (<span class="id"><a href="compcert.lib.Maps.html#map':416">map'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> (<span class="id"><a href="compcert.lib.Maps.html#map':416">map'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> (<span class="id"><a href="compcert.lib.Maps.html#map':416">map'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>)) (<span class="id"><a href="compcert.lib.Maps.html#map':416">map'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> (<span class="id"><a href="compcert.lib.Maps.html#map':416">map'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>)) (<span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>) <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> (<span class="id"><a href="compcert.lib.Maps.html#map':416">map'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>)) (<span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>) <span class="id">x</span>) (<span class="id"><a href="compcert.lib.Maps.html#map':416">map'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:413">f</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:415">i</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.map" class="id"><a name="PTree.map" class="">map</a></span> <span class="id">{A</span> <span id="B:419" class="id"><a name="B:419" class="">B}</a></span> (<span id="f:420" class="id"><a name="f:420" class="">f:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:418">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:419">B</a></span>) (<span id="m:421" class="id"><a name="m:421" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:418">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:421">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.map'">map'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:420">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:421">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.gmap'" class="id"><a name="PTree.gmap'" class="">gmap':</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id">{A</span> <span id="B:424" class="id"><a name="B:424" class="">B}</a></span> (<span id="f:425" class="id"><a name="f:425" class="">f:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:423">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:424">B</a></span>) (<span id="i:426" class="id"><a name="i:426" class="">i</a></span> <span id="j:427" class="id"><a name="j:427" class="">j</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:428" class="id"><a name="m:428" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:423">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get'">get'</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:426">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.map'">map'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:425">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:428">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:427">j</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> (<span class="id"><a href="compcert.lib.Maps.html#f:425">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append">prev_append</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:426">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:427">j</a></span>))) (<span class="id"><a href="compcert.lib.Maps.html#PTree.get'">get'</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:426">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:428">m</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">i;</span> <span class="id">intros;</span> <span class="id">destruct</span> <span class="id">m;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.gmap" class="id"><a name="PTree.gmap" class="">gmap:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id">{A</span> <span id="B:430" class="id"><a name="B:430" class="">B}</a></span> (<span id="f:431" class="id"><a name="f:431" class="">f:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:429">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:430">B</a></span>) (<span id="i:432" class="id"><a name="i:432" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:433" class="id"><a name="m:433" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:429">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:432">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.map">map</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:431">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:433">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> (<span class="id"><a href="compcert.lib.Maps.html#f:431">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:432">i</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:432">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:433">m</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">destruct</span> <span class="id">m</span> <span class="gallina-kwd">as</span> <span class="id">[|m];</span> <span class="id">simpl</span>. <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gmap'">gmap'</a></span>. <span class="id">repeat</span> <span class="id">f_equal</span>. <span class="id">exact</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev_involutive">prev_involutive</a></span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.map1'" class="id"><a name="PTree.map1'" class="">map1'</a></span> <span class="id">{A</span> <span id="B:435" class="id"><a name="B:435" class="">B}</a></span> (<span id="f:436" class="id"><a name="f:436" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:434">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:435">B</a></span>) (<span id="m:437" class="id"><a name="m:437" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:434">A</a></span>) <span class="id">{struct</span> <span class="id">m}</span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:435">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:437">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> (<span class="id"><a href="compcert.lib.Maps.html#map1':438">map1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> (<span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> (<span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.lib.Maps.html#map1':438">map1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> (<span class="id"><a href="compcert.lib.Maps.html#map1':438">map1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> (<span class="id"><a href="compcert.lib.Maps.html#map1':438">map1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">l</span>) (<span class="id"><a href="compcert.lib.Maps.html#map1':438">map1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> (<span class="id"><a href="compcert.lib.Maps.html#map1':438">map1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">l</span>) (<span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> (<span class="id"><a href="compcert.lib.Maps.html#map1':438">map1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">l</span>) (<span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.lib.Maps.html#map1':438">map1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:436">f</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.map1" class="id"><a name="PTree.map1" class="">map1</a></span> <span class="id">{A</span> <span id="B:441" class="id"><a name="B:441" class="">B}</a></span> (<span id="f:442" class="id"><a name="f:442" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:440">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:441">B</a></span>) (<span id="m:443" class="id"><a name="m:443" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:440">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:441">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:443">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.map1'">map1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:442">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:443">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.gmap1" class="id"><a name="PTree.gmap1" class="">gmap1:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id">{A</span> <span id="B:446" class="id"><a name="B:446" class="">B}</a></span> (<span id="f:447" class="id"><a name="f:447" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:445">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:446">B</a></span>) (<span id="i:448" class="id"><a name="i:448" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elt">elt</a></span>) (<span id="m:449" class="id"><a name="m:449" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:445">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:448">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.map1">map1</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:447">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:449">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:447">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:448">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:449">m</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">m</span> <span class="gallina-kwd">as</span> <span class="id">[|m];</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">i;</span> <span class="id">induction</span> <span class="id">m;</span> <span class="id">destruct</span> <span class="id">i;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.map_filter1_nonopt" class="id"><a name="PTree.map_filter1_nonopt" class="">map_filter1_nonopt</a></span> <span class="id">{A</span> <span id="B:451" class="id"><a name="B:451" class="">B}</a></span> (<span id="f:452" class="id"><a name="f:452" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:450">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:451">B</a></span>) (<span id="m:453" class="id"><a name="m:453" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:450">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:451">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec">tree_rec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="l:454" class="id"><a name="l:454" class="">l</a></span> <span id="lrec:455" class="id"><a name="lrec:455" class="">lrec</a></span> <span id="o:456" class="id"><a name="o:456" class="">o</a></span> <span id="r:457" class="id"><a name="r:457" class="">r</a></span> <span id="rrec:458" class="id"><a name="rrec:458" class="">rrec</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#lrec:455">lrec</a></span> (<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#o:456">o</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:452">f</a></span> <span class="id">a</span> <span class="gallina-kwd">end</span>) <span class="id"><a href="compcert.lib.Maps.html#rrec:458">rrec</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#m:453">m</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Local</span> <span class="vernacular">Transparent</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.map_filter1" class="id"><a name="PTree.map_filter1" class="">map_filter1</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Eval</span> <span class="id">cbv</span> <span class="id">[map_filter1_nonopt</span> <span class="id">tree_rec</span> <span class="id">tree_rec'</span> <span class="id">Node]</span> <span class="gallina-kwd">in</span> @<span class="id"><a href="compcert.lib.Maps.html#PTree.map_filter1_nonopt">map_filter1_nonopt</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.gmap_filter1" class="id"><a name="PTree.gmap_filter1" class="">gmap_filter1:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id">{A</span> <span id="B:461" class="id"><a name="B:461" class="">B}</a></span> (<span id="f:462" class="id"><a name="f:462" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:460">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:461">B</a></span>) (<span id="m:463" class="id"><a name="m:463" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:460">A</a></span>) (<span id="i:464" class="id"><a name="i:464" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:464">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.map_filter1">map_filter1</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:462">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:463">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:464">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:463">m</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:462">f</a></span> <span class="id">a</span> <span class="gallina-kwd">end</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> @<span class="id"><a href="compcert.lib.Maps.html#PTree.map_filter1">map_filter1</a></span> <span class="gallina-kwd">with</span> @<span class="id"><a href="compcert.lib.Maps.html#PTree.map_filter1_nonopt">map_filter1_nonopt</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.map_filter1_nonopt">map_filter1_nonopt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">f</span>. <span class="id">induction</span> <span class="id">m</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.unroll_tree_rec">unroll_tree_rec</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode;</a></span> <span class="id">destruct</span> <span class="id">i;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.filter1" class="id"><a name="PTree.filter1" class="">filter1</a></span> <span class="id">{A}</span> (<span id="pred:466" class="id"><a name="pred:466" class="">pred:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:465">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span id="m:467" class="id"><a name="m:467" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:465">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:465">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.map_filter1">map_filter1</a></span> (<span class="gallina-kwd">fun</span> <span id="a:468" class="id"><a name="a:468" class="">a</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Maps.html#pred:466">pred</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:468">a</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:468">a</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:467">m</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.gfilter1" class="id"><a name="PTree.gfilter1" class="">gfilter1:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span class="id">{A}</span> (<span id="pred:470" class="id"><a name="pred:470" class="">pred:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:469">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span id="i:471" class="id"><a name="i:471" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elt">elt</a></span>) (<span id="m:472" class="id"><a name="m:472" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:469">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:471">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.filter1">filter1</a></span> <span class="id"><a href="compcert.lib.Maps.html#pred:470">pred</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:472">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:471">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:472">m</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Maps.html#pred:470">pred</a></span> <span class="id">x</span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span> <span class="gallina-kwd">else</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="gallina-kwd">end</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gmap_filter1">gmap_filter1</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Section</span> <span id="PTree.COMBINE" class="id"><a name="PTree.COMBINE" class="">COMBINE</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Variables</span> <span id="PTree.COMBINE.A" class="id"><a name="PTree.COMBINE.A" class="">A</a></span> <span id="PTree.COMBINE.B" class="id"><a name="PTree.COMBINE.B" class="">B</a></span> <span id="PTree.COMBINE.C" class="id"><a name="PTree.COMBINE.C" class="">C:</a></span> <span class="gallina-kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Variable</span> <span id="PTree.COMBINE.f" class="id"><a name="PTree.COMBINE.f" class="">f:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.B">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.C">C</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Hypothesis</span> <span id="PTree.COMBINE.f_none_none" class="id"><a name="PTree.COMBINE.f_none_none" class="">f_none_none:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.f">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Let</span> <span id="PTree.COMBINE.combine_l" class="id"><a name="PTree.COMBINE.combine_l" class="">combine_l</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.map_filter1">map_filter1</a></span> (<span class="gallina-kwd">fun</span> <span id="a:478" class="id"><a name="a:478" class="">a</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.f">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:478">a</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>).<br/>
&nbsp;&nbsp;<span class="vernacular">Let</span> <span id="PTree.COMBINE.combine_r" class="id"><a name="PTree.COMBINE.combine_r" class="">combine_r</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.map_filter1">map_filter1</a></span> (<span class="gallina-kwd">fun</span> <span id="b:479" class="id"><a name="b:479" class="">b</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.f">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#b:479">b</a></span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Let</span> <span id="PTree.COMBINE.combine_nonopt" class="id"><a name="PTree.COMBINE.combine_nonopt" class="">combine_nonopt</a></span> (<span id="m1:480" class="id"><a name="m1:480" class="">m1:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.A">A</a></span>) (<span id="m2:481" class="id"><a name="m2:481" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.B">B</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.C">C</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.tree_rec2">tree_rec2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.combine_r">combine_r</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.combine_l">combine_l</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="l1:482" class="id"><a name="l1:482" class="">l1</a></span> <span id="o1:483" class="id"><a name="o1:483" class="">o1</a></span> <span id="r1:484" class="id"><a name="r1:484" class="">r1</a></span> <span id="l2:485" class="id"><a name="l2:485" class="">l2</a></span> <span id="o2:486" class="id"><a name="o2:486" class="">o2</a></span> <span id="r2:487" class="id"><a name="r2:487" class="">r2</a></span> <span id="lrec:488" class="id"><a name="lrec:488" class="">lrec</a></span> <span id="rrec:489" class="id"><a name="rrec:489" class="">rrec</a></span> <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#lrec:488">lrec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#o1:483">o1,</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:486">o2</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#o1:483">o1</a></span> <span class="id"><a href="compcert.lib.Maps.html#o2:486">o2</a></span> <span class="gallina-kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#rrec:489">rrec</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#m1:480">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:481">m2</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.combine" class="id"><a name="PTree.combine" class="">combine</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Eval</span> <span class="id">cbv</span> <span class="id">[combine_nonopt</span> <span class="id">tree_rec2</span> <span class="id">tree_rec2']</span> <span class="gallina-kwd">in</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.combine_nonopt">combine_nonopt</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.gcombine_l" class="id"><a name="PTree.gcombine_l" class="">gcombine_l:</a></span> <span class="gallina-kwd">forall</span> <span id="m:492" class="id"><a name="m:492" class="">m</a></span> <span id="i:493" class="id"><a name="i:493" class="">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:493">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.combine_l">combine_l</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:492">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.f">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:493">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:492">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#combine_l">combine_l;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gmap_filter1">gmap_filter1</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">i</span> <span class="id">m</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.gcombine_r" class="id"><a name="PTree.gcombine_r" class="">gcombine_r:</a></span> <span class="gallina-kwd">forall</span> <span id="m:494" class="id"><a name="m:494" class="">m</a></span> <span id="i:495" class="id"><a name="i:495" class="">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:495">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.combine_r">combine_r</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:494">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.f">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:495">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:494">m</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#combine_r">combine_r;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gmap_filter1">gmap_filter1</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">i</span> <span class="id">m</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.gcombine" class="id"><a name="PTree.gcombine" class="">gcombine:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="m1:496" class="id"><a name="m1:496" class="">m1:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.A">A</a></span>) (<span id="m2:497" class="id"><a name="m2:497" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.B">B</a></span>) (<span id="i:498" class="id"><a name="i:498" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:498">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.combine">combine</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:496">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:497">m2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.f">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:498">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:496">m1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:498">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:497">m2</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.combine">combine</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE.combine_nonopt">combine_nonopt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m1</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind;</a></span> <span class="id">induction</span> <span class="id">m2</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#combine_nonopt">combine_nonopt;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.unroll_tree_rec2_EN">unroll_tree_rec2_EN</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine_r">gcombine_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#combine_nonopt">combine_nonopt;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.unroll_tree_rec2_NE">unroll_tree_rec2_NE</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine_l">gcombine_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#combine_nonopt">combine_nonopt;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.unroll_tree_rec2_NN">unroll_tree_rec2_NN</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode;</a></span> <span class="id">destruct</span> <span class="id">i;</span> <span class="id">auto</span>. <span class="id">destruct</span> <span class="id">o,</span> <span class="id">o0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.COMBINE">COMBINE</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.combine_commut" class="id"><a name="PTree.combine_commut" class="">combine_commut:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:499" class="id"><a name="A:499" class="">A</a></span> <span id="B:500" class="id"><a name="B:500" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:501" class="id"><a name="f:501" class="">f</a></span> <span id="g:502" class="id"><a name="g:502" class="">g:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:499">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:499">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:500">B</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#f:501">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#g:502">g</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> (<span id="i:503" class="id"><a name="i:503" class="">i</a></span> <span id="j:504" class="id"><a name="j:504" class="">j:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:499">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#f:501">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:503">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:504">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#g:502">g</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:504">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:503">i</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="m1:505" class="id"><a name="m1:505" class="">m1</a></span> <span id="m2:506" class="id"><a name="m2:506" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:499">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.combine">combine</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:501">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:505">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:506">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.combine">combine</a></span> <span class="id"><a href="compcert.lib.Maps.html#g:502">g</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:506">m2</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:505">m1</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.extensionality">extensionality;</a></span> <span class="id">intros</span> <span class="id">i</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">gcombine</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> List of all bindings </h2>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.xelements'" class="id"><a name="PTree.xelements'" class="">xelements'</a></span> <span class="id">{A}</span> (<span id="m:508" class="id"><a name="m:508" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:507">A</a></span>) (<span id="i:509" class="id"><a name="i:509" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="k:510" class="id"><a name="k:510" class="">k:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:507">A</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{struct</span> <span class="id">m}</span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:507">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:508">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#xelements':511">xelements'</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i</a></span>) <span class="id"><a href="compcert.lib.Maps.html#k:510">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x</span> <span class="id">=&gt;</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i,</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:510">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i,</a></span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.lib.Maps.html#xelements':511">xelements'</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i</a></span>) <span class="id"><a href="compcert.lib.Maps.html#k:510">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#xelements':511">xelements'</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i</a></span>) <span class="id"><a href="compcert.lib.Maps.html#k:510">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#xelements':511">xelements'</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#xelements':511">xelements'</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i</a></span>) <span class="id"><a href="compcert.lib.Maps.html#k:510">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#xelements':511">xelements'</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i</a></span>) ((<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i,</a></span> <span class="id">x</span>)<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#xelements':511">xelements'</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i</a></span>) ((<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i,</a></span> <span class="id">x</span>)<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> (<span class="id"><a href="compcert.lib.Maps.html#xelements':511">xelements'</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:509">i</a></span>) <span class="id"><a href="compcert.lib.Maps.html#k:510">k</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.elements" class="id"><a name="PTree.elements" class="">elements</a></span> <span class="id">{A}</span> (<span id="m:514" class="id"><a name="m:514" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:513">A</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:513">A</a></span>) <span class="id">:=</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:514">m</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements'">xelements'</a></span> <span class="id">m'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.xelements" class="id"><a name="PTree.xelements" class="">xelements</a></span> <span class="id">{A}</span> (<span id="m:517" class="id"><a name="m:517" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:516">A</a></span>) (<span id="i:518" class="id"><a name="i:518" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:516">A</a></span>) <span class="id">:=</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:517">m</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements'">xelements'</a></span> <span class="id">m'</span> <span class="id"><a href="compcert.lib.Maps.html#i:518">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.xelements'_append" class="id"><a name="PTree.xelements'_append" class="">xelements'_append:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:520" class="id"><a name="A:520" class="">A</a></span> (<span id="m:521" class="id"><a name="m:521" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:520">A</a></span>) <span id="i:522" class="id"><a name="i:522" class="">i</a></span> <span id="k1:523" class="id"><a name="k1:523" class="">k1</a></span> <span id="k2:524" class="id"><a name="k2:524" class="">k2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements'">xelements'</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:521">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:522">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#k1:523">k1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.lib.Maps.html#k2:524">k2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements'">xelements'</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:521">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:522">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#k1:523">k1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.lib.Maps.html#k2:524">k2</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m;</span> <span class="id">intros;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">f_equal;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">rewrite</span> <span class="id">IHm2,</span> <span class="id">IHm1</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHm</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">rewrite</span> <span class="id">IHm2,</span> <span class="id">&lt;-</span> <span class="id">IHm1</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.xelements_Node" class="id"><a name="PTree.xelements_Node" class="">xelements_Node:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:525" class="id"><a name="A:525" class="">A</a></span> (<span id="l:526" class="id"><a name="l:526" class="">l:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:525">A</a></span>) (<span id="o:527" class="id"><a name="o:527" class="">o:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:525">A</a></span>) (<span id="r:528" class="id"><a name="r:528" class="">r:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:525">A</a></span>) <span id="i:529" class="id"><a name="i:529" class="">i,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:526">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#o:527">o</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:528">r</a></span>) <span class="id"><a href="compcert.lib.Maps.html#i:529">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:526">l</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:529">i</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">++</span> <span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#o:527">o</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> <span class="id">=&gt;</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:529">i,</a></span> <span class="id">v</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">++</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id"><a href="compcert.lib.Maps.html#r:528">r</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:529">i</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="vernacular">Local</span> <span class="vernacular">Transparent</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">destruct</span> <span class="id">l,</span> <span class="id">o,</span> <span class="id">r;</span> <span class="id">simpl;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">?</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements'_append">xelements'_append;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.xelements_correct" class="id"><a name="PTree.xelements_correct" class="">xelements_correct:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:531" class="id"><a name="A:531" class="">A</a></span> (<span id="m:532" class="id"><a name="m:532" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:531">A</a></span>) <span id="i:533" class="id"><a name="i:533" class="">i</a></span> <span id="j:534" class="id"><a name="j:534" class="">j</a></span> <span id="v:535" class="id"><a name="v:535" class="">v,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:533">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:532">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:535">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append">prev_append</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:533">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:534">j</a></span>)<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079">,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:535">v</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:532">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:534">j</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">A</span>. <span class="id">induction</span> <span class="id">m</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements_Node">xelements_Node,</a></span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Coqlib.html#in_app">in_app</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">right;</span> <span class="id">right</span>. <span class="id">apply</span> (<span class="id">IHm2</span> <span class="id">i</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">j</span>))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">left</span>. <span class="id">apply</span> (<span class="id">IHm1</span> <span class="id">i</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">j</span>))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">right;</span> <span class="id">left</span>. <span class="id">subst</span> <span class="id">o</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_prev">prev_append_prev</a></span>. <span class="id">auto</span> <span class="gallina-kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.elements_correct" class="id"><a name="PTree.elements_correct" class="">elements_correct:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:536" class="id"><a name="A:536" class="">A</a></span> (<span id="m:537" class="id"><a name="m:537" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:536">A</a></span>) (<span id="i:538" class="id"><a name="i:538" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="v:539" class="id"><a name="v:539" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:536">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:538">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:537">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:539">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#i:538">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:539">v</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:537">m</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">A</span> <span class="id">m</span> <span class="id">i</span> <span class="id">v</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements_correct">xelements_correct</a></span> <span class="id">m</span> <span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> <span class="id">H</span>). <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_prev">prev_append_prev</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.in_xelements" class="id"><a name="PTree.in_xelements" class="">in_xelements:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:540" class="id"><a name="A:540" class="">A</a></span> (<span id="m:541" class="id"><a name="m:541" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree">tree</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:540">A</a></span>) (<span id="i:542" class="id"><a name="i:542" class="">i</a></span> <span id="k:543" class="id"><a name="k:543" class="">k:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="v:544" class="id"><a name="v:544" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:540">A</a></span>) <span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#k:543">k,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:544">v</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:541">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:542">i</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="j:545" class="id"><a name="j:545" class="">j,</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:543">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append">prev_append</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:545">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:542">i</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:545">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:541">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:544">v</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">A</span>. <span class="id">induction</span> <span class="id">m</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">elim</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements_Node">xelements_Node,</a></span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Coqlib.html#in_app">in_app</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id">H0</span> <span class="gallina-kwd">as</span> <span class="id">[P</span> <span class="id">|</span> <span class="id">[P</span> <span class="id">|</span> <span class="id">P]]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id">IHm1;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">j</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>). <span class="gallina-kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">j</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> <span class="id">o;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">P;</span> <span class="id">intuition</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="gallina-kwd">exists</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">exploit</span> <span class="id">IHm2;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">j</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span>). <span class="gallina-kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">j</span>)<span class="id">;</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.elements_complete" class="id"><a name="PTree.elements_complete" class="">elements_complete:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:546" class="id"><a name="A:546" class="">A</a></span> (<span id="m:547" class="id"><a name="m:547" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:546">A</a></span>) (<span id="i:548" class="id"><a name="i:548" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="v:549" class="id"><a name="v:549" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:546">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#i:548">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:549">v</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:547">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:548">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:547">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:549">v</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">A</span> <span class="id">m</span> <span class="id">i</span> <span class="id">v</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.in_xelements">in_xelements;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">j</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_prev">prev_append_prev</a></span> <span class="gallina-kwd">in</span> <span class="id">P</span>. <span class="id">change</span> <span class="id">i</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append">prev_append</a></span> <span class="id">1</span> <span class="id">i</span>) <span class="gallina-kwd">in</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_inj">prev_append_inj;</a></span> <span class="id">eauto</span>. <span class="id">intros;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.xkeys" class="id"><a name="PTree.xkeys" class="">xkeys</a></span> <span class="id">{A}</span> (<span id="m:551" class="id"><a name="m:551" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:550">A</a></span>) (<span id="i:552" class="id"><a name="i:552" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:551">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:552">i</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.xkeys_Node" class="id"><a name="PTree.xkeys_Node" class="">xkeys_Node:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:553" class="id"><a name="A:553" class="">A</a></span> (<span id="m1:554" class="id"><a name="m1:554" class="">m1:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:553">A</a></span>) <span id="o:555" class="id"><a name="o:555" class="">o</a></span> (<span id="m2:556" class="id"><a name="m2:556" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:553">A</a></span>) <span id="i:557" class="id"><a name="i:557" class="">i,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys">xkeys</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:554">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#o:555">o</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:556">m2</a></span>) <span class="id"><a href="compcert.lib.Maps.html#i:557">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys">xkeys</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:554">m1</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:557">i</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">++</span> <span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#o:555">o</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:557">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="gallina-kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">++</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys">xkeys</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:556">m2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:557">i</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys">xkeys</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements_Node">xelements_Node,</a></span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="id">destruct</span> <span class="id">o;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.in_xkeys" class="id"><a name="PTree.in_xkeys" class="">in_xkeys:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:559" class="id"><a name="A:559" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="m:560" class="id"><a name="m:560" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:559">A</a></span>) (<span id="i:561" class="id"><a name="i:561" class="">i</a></span> <span id="k:562" class="id"><a name="k:562" class="">k:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:562">k</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys">xkeys</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:560">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:561">i</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">exists</span> <span id="j:563" class="id"><a name="j:563" class="">j,</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:562">k</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append">prev_append</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:563">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:561">i</a></span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys">xkeys;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>) <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> <span class="id">H</span> <span class="gallina-kwd">as</span> ((<span class="id">j,</span> <span class="id">v</span>) &amp; <span class="id">-&gt;</span> &amp; <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.in_xelements">in_xelements;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">k</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="gallina-kwd">exists</span> <span class="id">k;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.xelements_keys_norepet" class="id"><a name="PTree.xelements_keys_norepet" class="">xelements_keys_norepet:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:564" class="id"><a name="A:564" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="m:565" class="id"><a name="m:565" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:564">A</a></span>) (<span id="i:566" class="id"><a name="i:566" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys">xkeys</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:565">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:566">i</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">A;</span> <span class="id">induction</span> <span class="id">m</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">assert</span> (<span class="id">NOTIN1:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id">i</span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys">xkeys</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.in_xkeys">in_xkeys;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">j</span> &amp; <span class="id">EQ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_prev">prev_append_prev</a></span> <span class="gallina-kwd">in</span> <span class="id">EQ</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">EQ</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_inj">prev_append_inj</a></span> <span class="gallina-kwd">in</span> <span class="id">EQ</span>. <span class="id">discriminate</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">NOTIN2:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id">i</span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys">xkeys</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.in_xkeys">in_xkeys;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">j</span> &amp; <span class="id">EQ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_prev">prev_append_prev</a></span> <span class="gallina-kwd">in</span> <span class="id">EQ</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">EQ</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_inj">prev_append_inj</a></span> <span class="gallina-kwd">in</span> <span class="id">EQ</span>. <span class="id">discriminate</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">DISJ:</span> <span class="gallina-kwd">forall</span> <span id="x:568" class="id"><span id="x:567" class="id"><a name="x:568" class="">x,</a></span></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:567">x</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys">xkeys</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">i</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:567">x</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys">xkeys</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">i</span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.in_xkeys">in_xkeys</a></span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="id">intros</span> (<span class="id">j1</span> &amp; <span class="id">EQ1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.in_xkeys">in_xkeys</a></span>. <span class="id">eexact</span> <span class="id">H1</span>. <span class="id">intros</span> (<span class="id">j2</span> &amp; <span class="id">EQ2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_prev">prev_append_prev</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">rewrite</span> <span class="id">EQ2</span> <span class="gallina-kwd">in</span> <span class="id">EQ1</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_inj">prev_append_inj</a></span> <span class="gallina-kwd">in</span> <span class="id">EQ1</span>. <span class="id">discriminate</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xkeys_Node">xkeys_Node</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet_append">list_norepet_append</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">o;</span> <span class="id">simpl;</span> <span class="id">auto</span>. <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">subst</span> <span class="id">y</span>. <span class="id">destruct</span> <span class="id">o;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H1</span>. <span class="id">subst</span> <span class="id">x</span>. <span class="id">tauto</span>. <span class="id">eauto</span>. <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.elements_keys_norepet" class="id"><a name="PTree.elements_keys_norepet" class="">elements_keys_norepet:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:569" class="id"><a name="A:569" class="">A</a></span> (<span id="m:570" class="id"><a name="m:570" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:569">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elt">elt</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:569">A</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:570">m</a></span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements_keys_norepet">xelements_keys_norepet</a></span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Remark</span> <span id="PTree.xelements_empty" class="id"><a name="PTree.xelements_empty" class="">xelements_empty:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:571" class="id"><a name="A:571" class="">A</a></span> (<span id="m:572" class="id"><a name="m:572" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:571">A</a></span>) <span id="i:573" class="id"><a name="i:573" class="">i,</a></span> (<span class="gallina-kwd">forall</span> <span id="i:574" class="id"><a name="i:574" class="">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:574">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:572">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:572">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:573">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">replace</span> <span class="id">m</span> <span class="gallina-kwd">with</span> (@<span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">A</span>). <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.extensionality">extensionality;</a></span> <span class="id">intros</span>. <span class="id">symmetry;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.elements_canonical_order'" class="id"><a name="PTree.elements_canonical_order'" class="">elements_canonical_order':</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:575" class="id"><a name="A:575" class="">A</a></span> <span id="B:576" class="id"><a name="B:576" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="R:577" class="id"><a name="R:577" class="">R:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:575">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:576">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span>) (<span id="m:578" class="id"><a name="m:578" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:575">A</a></span>) (<span id="n:579" class="id"><a name="n:579" class="">n:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:576">B</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:580" class="id"><a name="i:580" class="">i,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#option_rel">option_rel</a></span> <span class="id"><a href="compcert.lib.Maps.html#R:577">R</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:580">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:578">m</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:580">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#n:579">n</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="i_x:581" class="id"><a name="i_x:581" class="">i_x</a></span> <span id="i_y:582" class="id"><a name="i_y:582" class="">i_y</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#i_x:581">i_x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#i_y:582">i_y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Maps.html#R:577">R</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#i_x:581">i_x</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#i_y:582">i_y</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:578">m</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#n:579">n</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id">m</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id">m</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>). <span class="id">change</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id">n</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">1</span>%<span class="id">positive</span>. <span class="id">revert</span> <span class="id">m</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind;</a></span> <span class="id">[</span> <span class="id">|</span> <span class="id">induction</span> <span class="id">n</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind];</a></span> <span class="id">intros</span> <span class="id">until</span> <span class="id">p;</span> <span class="id">intros</span> <span class="id">REL</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">replace</span> <span class="id">n</span> <span class="gallina-kwd">with</span> (@<span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">B</span>). <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.extensionality">extensionality;</a></span> <span class="id">intros</span>. <span class="id">specialize</span> (<span class="id">REL</span> <span class="id">i</span>). <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">inv</span> <span class="id">REL;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">replace</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id">l</span> <span class="id">o</span> <span class="id">r</span>) <span class="gallina-kwd">with</span> (@<span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">A</span>). <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.extensionality">extensionality;</a></span> <span class="id">intros</span>. <span class="id">specialize</span> (<span class="id">REL</span> <span class="id">i</span>). <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">inv</span> <span class="id">REL;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements_Node">xelements_Node</a></span>. <span class="id">repeat</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_app">list_forall2_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">IHm</span>. <span class="id">intros</span>. <span class="id">specialize</span> (<span class="id">REL</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">i</span>)). <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span> <span class="gallina-kwd">in</span> <span class="id">REL;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">specialize</span> (<span class="id">REL</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>). <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span> <span class="gallina-kwd">in</span> <span class="id">REL</span>. <span class="id">inv</span> <span class="id">REL;</span> <span class="id">constructor;</span> <span class="id">auto</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_nil">list_forall2_nil</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">IHm0</span>. <span class="id">intros</span>. <span class="id">specialize</span> (<span class="id">REL</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">i</span>)). <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span> <span class="gallina-kwd">in</span> <span class="id">REL;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.elements_canonical_order" class="id"><a name="PTree.elements_canonical_order" class="">elements_canonical_order:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:583" class="id"><a name="A:583" class="">A</a></span> <span id="B:584" class="id"><a name="B:584" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="R:585" class="id"><a name="R:585" class="">R:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:583">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:584">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span>) (<span id="m:586" class="id"><a name="m:586" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:583">A</a></span>) (<span id="n:587" class="id"><a name="n:587" class="">n:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:584">B</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:588" class="id"><a name="i:588" class="">i</a></span> <span id="x:589" class="id"><a name="x:589" class="">x,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:588">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:586">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:589">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="y:590" class="id"><a name="y:590" class="">y,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:588">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#n:587">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:590">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Maps.html#R:585">R</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:589">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:590">y</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:591" class="id"><a name="i:591" class="">i</a></span> <span id="y:592" class="id"><a name="y:592" class="">y,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:591">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#n:587">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:592">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="x:593" class="id"><a name="x:593" class="">x,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:591">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:586">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:593">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Maps.html#R:585">R</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:593">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:592">y</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span> <span id="i_x:594" class="id"><a name="i_x:594" class="">i_x</a></span> <span id="i_y:595" class="id"><a name="i_y:595" class="">i_y</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#i_x:594">i_x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#i_y:595">i_y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Maps.html#R:585">R</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#i_x:594">i_x</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#i_y:595">i_y</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:586">m</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#n:587">n</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_canonical_order'">elements_canonical_order'</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">i</span> <span class="id">m</span>) <span class="gallina-kwd">as</span> <span class="id">[x|]</span> <span class="id">eqn:GM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">y</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">rewrite</span> <span class="id">P;</span> <span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">i</span> <span class="id">n</span>) <span class="gallina-kwd">as</span> <span class="id">[y|]</span> <span class="id">eqn:GN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">x</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.elements_extensional" class="id"><a name="PTree.elements_extensional" class="">elements_extensional:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:596" class="id"><a name="A:596" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="m:597" class="id"><a name="m:597" class="">m</a></span> <span id="n:598" class="id"><a name="n:598" class="">n:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:596">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="i:599" class="id"><a name="i:599" class="">i,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:599">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:597">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:599">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#n:598">n</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:597">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#n:598">n</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">replace</span> <span class="id">n</span> <span class="gallina-kwd">with</span> <span class="id">m;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.extensionality">extensionality;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.xelements_remove" class="id"><a name="PTree.xelements_remove" class="">xelements_remove:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:600" class="id"><a name="A:600" class="">A</a></span> <span id="v:601" class="id"><a name="v:601" class="">v</a></span> (<span id="m:602" class="id"><a name="m:602" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:600">A</a></span>) <span id="i:603" class="id"><a name="i:603" class="">i</a></span> <span id="j:604" class="id"><a name="j:604" class="">j,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:603">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:602">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:601">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="l1:605" class="id"><a name="l1:605" class="">l1</a></span> <span id="l2:606" class="id"><a name="l2:606" class="">l2,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:602">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:604">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:605">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append">prev_append</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:603">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:604">j</a></span>)<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079">,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:601">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:606">l2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">/\</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:603">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:602">m</a></span>) <span class="id"><a href="compcert.lib.Maps.html#j:604">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:605">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:606">l2</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">A;</span> <span class="id">induction</span> <span class="id">m</span> <span class="gallina-kwd">using</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree_ind">tree_ind;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">assert</span> (<span class="id">REMOVE:</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.remove">remove</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id">l</span> <span class="id">o</span> <span class="id">r</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">i</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id">l</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">ii</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">remove</a></span> <span class="id">ii</span> <span class="id">l</span>) <span class="id">o</span> <span class="id">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">ii</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node">Node</a></span> <span class="id">l</span> <span class="id">o</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">remove</a></span> <span class="id">ii</span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{</span> <span class="id">destruct</span> <span class="id">l,</span> <span class="id">o,</span> <span class="id">r,</span> <span class="id">i;</span> <span class="id">reflexivity</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gNode">gNode</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id">REMOVE</span>. <span class="id">destruct</span> <span class="id">i;</span> <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements_Node">xelements_Node</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> (<span class="id">IHm0</span> <span class="id">i</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">j</span>) <span class="id">H0</span>) <span class="gallina-kwd">as</span> (<span class="id">l1</span> &amp; <span class="id">l2</span> &amp; <span class="id">EQ</span> &amp; <span class="id">EQ'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">j</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">o</span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span> <span class="id">=&gt;</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id">j,</span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="gallina-kwd">end</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">l1</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">l2;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ,</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ',</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">destruct</span> (<span class="id">IHm</span> <span class="id">i</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">j</span>) <span class="id">H0</span>) <span class="gallina-kwd">as</span> (<span class="id">l1</span> &amp; <span class="id">l2</span> &amp; <span class="id">EQ</span> &amp; <span class="id">EQ'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">l1;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">l2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">o</span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span> <span class="id">=&gt;</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id">j,</span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="gallina-kwd">end</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">j</span>))<span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ,</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">EQ',</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span> <span class="id">subst</span> <span class="id">o</span>. <span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id">l</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">j</span>))<span class="id">;</span> <span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements">xelements</a></span> <span class="id">r</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">j</span>))<span class="id">;</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_prev">prev_append_prev</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.elements_remove" class="id"><a name="PTree.elements_remove" class="">elements_remove:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:613" class="id"><a name="A:613" class="">A</a></span> <span id="i:614" class="id"><a name="i:614" class="">i</a></span> <span id="v:615" class="id"><a name="v:615" class="">v</a></span> (<span id="m:616" class="id"><a name="m:616" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:613">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:614">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:616">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:615">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="l1:617" class="id"><a name="l1:617" class="">l1</a></span> <span id="l2:618" class="id"><a name="l2:618" class="">l2,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:616">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:617">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> (<span class="id"><a href="compcert.lib.Maps.html#i:614">i,v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:618">l2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:614">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:616">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:617">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:618">l2</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.xelements_remove">xelements_remove</a></span>. <span class="id">eauto</span>. <span class="id">instantiate</span> (<span class="id">1</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.prev_append_prev">prev_append_prev</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<h2> Folding over a tree </h2>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.fold'" class="id"><a name="PTree.fold'" class="">fold'</a></span> <span class="id">{A</span> <span id="B:620" class="id"><a name="B:620" class="">B}</a></span> (<span id="f:621" class="id"><a name="f:621" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:620">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:619">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:620">B</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="i:622" class="id"><a name="i:622" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:623" class="id"><a name="m:623" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:619">A</a></span>) (<span id="v:624" class="id"><a name="v:624" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:620">B</a></span>) <span class="id">{struct</span> <span class="id">m}</span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#B:620">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:623">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#fold':625">fold'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">r</span> <span class="id"><a href="compcert.lib.Maps.html#v:624">v</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:624">v</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#fold':625">fold'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">r</span> (<span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:624">v</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#fold':625">fold'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#v:624">v</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#fold':625">fold'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">r</span> (<span class="id"><a href="compcert.lib.Maps.html#fold':625">fold'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#v:624">v</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#fold':625">fold'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#v:624">v</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#fold':625">fold'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">r</span> (<span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#fold':625">fold'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:621">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#v:624">v</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.prev">prev</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:622">i</a></span>) <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.fold" class="id"><a name="PTree.fold" class="">fold</a></span> <span class="id">{A</span> <span id="B:628" class="id"><a name="B:628" class="">B}</a></span> (<span id="f:629" class="id"><a name="f:629" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:628">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:627">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:628">B</a></span>) (<span id="m:630" class="id"><a name="m:630" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:627">A</a></span>) (<span id="v:631" class="id"><a name="v:631" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:628">B</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:630">m</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#v:631">v</a></span> <span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.fold'">fold'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:629">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> <span class="id">m'</span> <span class="id"><a href="compcert.lib.Maps.html#v:631">v</a></span> <span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.fold'_xelements'" class="id"><a name="PTree.fold'_xelements'" class="">fold'_xelements':</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:633" class="id"><a name="A:633" class="">A</a></span> <span id="B:634" class="id"><a name="B:634" class="">B</a></span> (<span id="f:635" class="id"><a name="f:635" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:634">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:633">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:634">B</a></span>) <span id="m:636" class="id"><a name="m:636" class="">m</a></span> <span id="i:637" class="id"><a name="i:637" class="">i</a></span> <span id="v:638" class="id"><a name="v:638" class="">v</a></span> <span id="l:639" class="id"><a name="l:639" class="">l,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="a:640" class="id"><a name="a:640" class="">a</a></span> <span id="p:641" class="id"><a name="p:641" class="">p</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:635">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:640">a</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:641">p</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:641">p</a></span>)) <span class="id"><a href="compcert.lib.Maps.html#l:639">l</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.fold'">fold'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:635">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:637">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:636">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:638">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="a:642" class="id"><a name="a:642" class="">a</a></span> <span id="p:643" class="id"><a name="p:643" class="">p</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:635">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:642">a</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:643">p</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:643">p</a></span>)) (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements'">xelements'</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:636">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:637">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:639">l</a></span>) <span class="id"><a href="compcert.lib.Maps.html#v:638">v</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m;</span> <span class="id">intros;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHm1,</span> <span class="id">&lt;-</span> <span class="id">IHm2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHm;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHm1</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHm2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.fold_spec" class="id"><a name="PTree.fold_spec" class="">fold_spec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:644" class="id"><a name="A:644" class="">A</a></span> <span id="B:645" class="id"><a name="B:645" class="">B</a></span> (<span id="f:646" class="id"><a name="f:646" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:645">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:644">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:645">B</a></span>) (<span id="v:647" class="id"><a name="v:647" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:645">B</a></span>) (<span id="m:648" class="id"><a name="m:648" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:644">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.fold">fold</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:646">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:648">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:647">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="a:649" class="id"><a name="a:649" class="">a</a></span> <span id="p:650" class="id"><a name="p:650" class="">p</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:646">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:649">a</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:650">p</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:650">p</a></span>)) (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:648">m</a></span>) <span class="id"><a href="compcert.lib.Maps.html#v:647">v</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.fold">fold,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span>. <span class="id">destruct</span> <span class="id">m;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.fold'_xelements'">fold'_xelements'</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Fixpoint</span> <span id="PTree.fold1'" class="id"><a name="PTree.fold1'" class="">fold1'</a></span> <span class="id">{A</span> <span id="B:652" class="id"><a name="B:652" class="">B}</a></span> (<span id="f:653" class="id"><a name="f:653" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:652">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:651">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:652">B</a></span>) (<span id="m:654" class="id"><a name="m:654" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.tree'">tree'</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:651">A</a></span>) (<span id="v:655" class="id"><a name="v:655" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:652">B</a></span>) <span class="id">{struct</span> <span class="id">m}</span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#B:652">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:654">m</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node001">Node001</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#fold1':656">fold1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> <span class="id">r</span> <span class="id"><a href="compcert.lib.Maps.html#v:655">v</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node010">Node010</a></span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:655">v</a></span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node011">Node011</a></span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#fold1':656">fold1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> <span class="id">r</span> (<span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:655">v</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node100">Node100</a></span> <span class="id">l</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#fold1':656">fold1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#v:655">v</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node101">Node101</a></span> <span class="id">l</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#fold1':656">fold1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> <span class="id">r</span> (<span class="id"><a href="compcert.lib.Maps.html#fold1':656">fold1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#v:655">v</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node110">Node110</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#fold1':656">fold1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#v:655">v</a></span>) <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Node111">Node111</a></span> <span class="id">l</span> <span class="id">x</span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#fold1':656">fold1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> <span class="id">r</span> (<span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#fold1':656">fold1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:653">f</a></span> <span class="id">l</span> <span class="id"><a href="compcert.lib.Maps.html#v:655">v</a></span>) <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PTree.fold1" class="id"><a name="PTree.fold1" class="">fold1</a></span> <span class="id">{A</span> <span id="B:659" class="id"><a name="B:659" class="">B}</a></span> (<span id="f:660" class="id"><a name="f:660" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:659">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:658">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:659">B</a></span>) (<span id="m:661" class="id"><a name="m:661" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:658">A</a></span>) (<span id="v:662" class="id"><a name="v:662" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:659">B</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#B:659">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#m:661">m</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Empty">Empty</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#v:662">v</a></span> <span class="id">|</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.Nodes">Nodes</a></span> <span class="id">m'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.fold1'">fold1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:660">f</a></span> <span class="id">m'</span> <span class="id"><a href="compcert.lib.Maps.html#v:662">v</a></span> <span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="PTree.fold1'_xelements'" class="id"><a name="PTree.fold1'_xelements'" class="">fold1'_xelements':</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:664" class="id"><a name="A:664" class="">A</a></span> <span id="B:665" class="id"><a name="B:665" class="">B</a></span> (<span id="f:666" class="id"><a name="f:666" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:665">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:664">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:665">B</a></span>) <span id="m:667" class="id"><a name="m:667" class="">m</a></span> <span id="i:668" class="id"><a name="i:668" class="">i</a></span> <span id="v:669" class="id"><a name="v:669" class="">v</a></span> <span id="l:670" class="id"><a name="l:670" class="">l,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="a:671" class="id"><a name="a:671" class="">a</a></span> <span id="p:672" class="id"><a name="p:672" class="">p</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:666">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:671">a</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:672">p</a></span>)) <span class="id"><a href="compcert.lib.Maps.html#l:670">l</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.fold1'">fold1'</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:666">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:667">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:669">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="a:673" class="id"><a name="a:673" class="">a</a></span> <span id="p:674" class="id"><a name="p:674" class="">p</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:666">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:673">a</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:674">p</a></span>)) (<span class="id"><a href="compcert.lib.Maps.html#PTree.xelements'">xelements'</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:667">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:668">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:670">l</a></span>) <span class="id"><a href="compcert.lib.Maps.html#v:669">v</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> <span class="id">m;</span> <span class="id">simpl;</span> <span class="id">intros;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHm1</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHm2</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHm</span>. <span class="id">auto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHm1</span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHm2</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PTree.fold1_spec" class="id"><a name="PTree.fold1_spec" class="">fold1_spec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="A:675" class="id"><a name="A:675" class="">A</a></span> <span id="B:676" class="id"><a name="B:676" class="">B</a></span> (<span id="f:677" class="id"><a name="f:677" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:676">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:675">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:676">B</a></span>) (<span id="v:678" class="id"><a name="v:678" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:676">B</a></span>) (<span id="m:679" class="id"><a name="m:679" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:675">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.fold1">fold1</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:677">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:679">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:678">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="a:680" class="id"><a name="a:680" class="">a</a></span> <span id="p:681" class="id"><a name="p:681" class="">p</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:677">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:680">a</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:681">p</a></span>)) (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:679">m</a></span>) <span class="id"><a href="compcert.lib.Maps.html#v:678">v</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">m</span> <span class="gallina-kwd">as</span> <span class="id">[|m]</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.fold1'_xelements'">fold1'_xelements'</a></span> <span class="gallina-kwd">with</span> (<span class="id">l</span> <span class="id">:=</span> @<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id">A</span>)).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.empty">empty</a></span> <span class="id">A</span> <span class="id">:</span> <span class="id">simpl</span> <span class="id">never</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">get</a></span> <span class="id">{A}</span> <span class="id">p</span> <span class="id">m</span> <span class="id">:</span> <span class="id">simpl</span> <span class="id">never</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">set</a></span> <span class="id">{A}</span> <span class="id">p</span> <span class="id">x</span> <span class="id">m</span> <span class="id">:</span> <span class="id">simpl</span> <span class="id">never</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Arguments</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.remove">remove</a></span> <span class="id">{A}</span> <span class="id">p</span> <span class="id">m</span> <span class="id">:</span> <span class="id">simpl</span> <span class="id">never</span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#PTree">PTree</a></span>.<br/>
<br/>
<h1> An implementation of maps over type <span class="bracket"><span class="id">positive</span></span> </h1>
<br/>
<span class="vernacular">Module</span> <span id="PMap" class="id"><a name="PMap" class="">PMap</a></span> <span class="id">&lt;:</span> <span class="id"><a href="compcert.lib.Maps.html#MAP">MAP</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PMap.elt" class="id"><a name="PMap.elt" class="">elt</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PMap.elt_eq" class="id"><a name="PMap.elt_eq" class="">elt_eq</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PMap.t" class="id"><a name="PMap.t" class="">t</a></span> (<span id="A:682" class="id"><a name="A:682" class="">A</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id">:=</span> (<span class="id"><a href="compcert.lib.Maps.html#A:682">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:682">A</a></span>)%<span class="id">type</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PMap.init" class="id"><a name="PMap.init" class="">init</a></span> (<span id="A:683" class="id"><a name="A:683" class="">A</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="x:684" class="id"><a name="x:684" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#A:683">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#x:684">x,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:683">A</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PMap.get" class="id"><a name="PMap.get" class="">get</a></span> (<span id="A:685" class="id"><a name="A:685" class="">A</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="i:686" class="id"><a name="i:686" class="">i</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:687" class="id"><a name="m:687" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:685">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:686">i</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:687">m</a></span>) <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span> <span class="id">=&gt;</span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:687">m</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PMap.set" class="id"><a name="PMap.set" class="">set</a></span> (<span id="A:688" class="id"><a name="A:688" class="">A</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="i:689" class="id"><a name="i:689" class="">i</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="x:690" class="id"><a name="x:690" class="">x</a></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#A:688">A</a></span>) (<span id="m:691" class="id"><a name="m:691" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:688">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:691">m,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:689">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:690">x</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:691">m</a></span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PMap.gi" class="id"><a name="PMap.gi" class="">gi:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:692" class="id"><a name="A:692" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:693" class="id"><a name="i:693" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="x:694" class="id"><a name="x:694" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:692">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:693">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.init">init</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:694">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:694">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PMap.gss" class="id"><a name="PMap.gss" class="">gss:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:695" class="id"><a name="A:695" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:696" class="id"><a name="i:696" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="x:697" class="id"><a name="x:697" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:695">A</a></span>) (<span id="m:698" class="id"><a name="m:698" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:695">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:696">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:696">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:697">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:698">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:697">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.set">set</a></span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PMap.gso" class="id"><a name="PMap.gso" class="">gso:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:699" class="id"><a name="A:699" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:700" class="id"><a name="i:700" class="">i</a></span> <span id="j:701" class="id"><a name="j:701" class="">j:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="x:702" class="id"><a name="x:702" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:699">A</a></span>) (<span id="m:703" class="id"><a name="m:703" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:699">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#i:700">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:701">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:700">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:701">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:702">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:703">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:700">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:703">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.set">set</a></span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PMap.gsspec" class="id"><a name="PMap.gsspec" class="">gsspec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:704" class="id"><a name="A:704" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:705" class="id"><a name="i:705" class="">i</a></span> <span id="j:706" class="id"><a name="j:706" class="">j:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="x:707" class="id"><a name="x:707" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:704">A</a></span>) (<span id="m:708" class="id"><a name="m:708" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:704">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:705">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:706">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:707">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:708">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:705">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:706">j</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.lib.Maps.html#x:707">x</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:705">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:708">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">i</span> <span class="id">j</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">e</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">gss</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">gso</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PMap.gsident" class="id"><a name="PMap.gsident" class="">gsident:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:709" class="id"><a name="A:709" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:710" class="id"><a name="i:710" class="">i</a></span> <span id="j:711" class="id"><a name="j:711" class="">j:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:712" class="id"><a name="m:712" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:709">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:711">j</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:710">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:710">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:712">m</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:712">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:711">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:712">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">i</span> <span class="id">j</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">e</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">gss</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">gso;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="PMap.map" class="id"><a name="PMap.map" class="">map</a></span> (<span id="A:713" class="id"><a name="A:713" class="">A</a></span> <span id="B:714" class="id"><a name="B:714" class="">B</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span>) (<span id="f:715" class="id"><a name="f:715" class="">f</a></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#A:713">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:714">B</a></span>) (<span id="m:716" class="id"><a name="m:716" class="">m</a></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:713">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:714">B</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#f:715">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:716">m</a></span>)<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079">,</a></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.map1">PTree.map1</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:715">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:716">m</a></span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PMap.gmap" class="id"><a name="PMap.gmap" class="">gmap:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:717" class="id"><a name="A:717" class="">A</a></span> <span id="B:718" class="id"><a name="B:718" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:719" class="id"><a name="f:719" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:717">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:718">B</a></span>) (<span id="i:720" class="id"><a name="i:720" class="">i:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) (<span id="m:721" class="id"><a name="m:721" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:717">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:720">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.map">map</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:719">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:721">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:719">f</a></span>(<span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:720">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:721">m</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.map">map</a></span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.get">get</a></span>. <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gmap1">PTree.gmap1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id">i</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">m</span>))<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="PMap.set2" class="id"><a name="PMap.set2" class="">set2:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:722" class="id"><a name="A:722" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:723" class="id"><a name="i:723" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.elt">elt</a></span>) (<span id="x:724" class="id"><a name="x:724" class="">x</a></span> <span id="y:725" class="id"><a name="y:725" class="">y:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:722">A</a></span>) (<span id="m:726" class="id"><a name="m:726" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:722">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:723">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:725">y</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:723">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:724">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:726">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#PMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:723">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:725">y</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:726">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.set">set</a></span>. <span class="id">simpl</span>. <span class="id">decEq</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set2">PTree.set2</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#PMap">PMap</a></span>.<br/>
<br/>
<h1> An implementation of maps over any type that injects into type <span class="bracket"><span class="id">positive</span></span> </h1>
<br/>
<span class="vernacular">Module</span> <span class="gallina-kwd">Type</span> <span id="INDEXED_TYPE" class="id"><a name="INDEXED_TYPE" class="">INDEXED_TYPE</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="INDEXED_TYPE.t" class="id"><a name="INDEXED_TYPE.t" class="">t:</a></span> <span class="gallina-kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="INDEXED_TYPE.index" class="id"><a name="INDEXED_TYPE.index" class="">index:</a></span> <span class="id"><a href="compcert.lib.Maps.html#INDEXED_TYPE.t">t</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Axiom</span> <span id="INDEXED_TYPE.index_inj" class="id"><a name="INDEXED_TYPE.index_inj" class="">index_inj:</a></span> <span class="gallina-kwd">forall</span> (<span id="x:729" class="id"><a name="x:729" class="">x</a></span> <span id="y:730" class="id"><a name="y:730" class="">y:</a></span> <span class="id"><a href="compcert.lib.Maps.html#INDEXED_TYPE.t">t</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#INDEXED_TYPE.index">index</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:729">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#INDEXED_TYPE.index">index</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:730">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:729">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:730">y</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="INDEXED_TYPE.eq" class="id"><a name="INDEXED_TYPE.eq" class="">eq:</a></span> <span class="gallina-kwd">forall</span> (<span id="x:732" class="id"><a name="x:732" class="">x</a></span> <span id="y:733" class="id"><a name="y:733" class="">y:</a></span> <span class="id"><a href="compcert.lib.Maps.html#INDEXED_TYPE.t">t</a></span>)<span class="id">,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:733">y}</a></span> <span class="id">+</span> <span class="id">{x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:733">y}</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#INDEXED_TYPE">INDEXED_TYPE</a></span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="IMap" class="id"><a name="IMap" class="">IMap</a></span>(<span class="id">X:</span> <span class="id"><a href="compcert.lib.Maps.html#INDEXED_TYPE">INDEXED_TYPE</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="IMap.elt" class="id"><a name="IMap.elt" class="">elt</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="IMap.elt_eq" class="id"><a name="IMap.elt_eq" class="">elt_eq</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#X.eq">X.eq</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="IMap.t" class="id"><a name="IMap.t" class="">t</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Type</span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.t">PMap.t</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="IMap.init" class="id"><a name="IMap.init" class="">init</a></span> (<span id="A:735" class="id"><a name="A:735" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="x:736" class="id"><a name="x:736" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:735">A</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.init">PMap.init</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:736">x</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="IMap.get" class="id"><a name="IMap.get" class="">get</a></span> (<span id="A:737" class="id"><a name="A:737" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:738" class="id"><a name="i:738" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>) (<span id="m:739" class="id"><a name="m:739" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:737">A</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> (<span class="id"><a href="compcert.lib.Maps.html#X.index">X.index</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:738">i</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:739">m</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="IMap.set" class="id"><a name="IMap.set" class="">set</a></span> (<span id="A:740" class="id"><a name="A:740" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:741" class="id"><a name="i:741" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>) (<span id="v:742" class="id"><a name="v:742" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:740">A</a></span>) (<span id="m:743" class="id"><a name="m:743" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:740">A</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> (<span class="id"><a href="compcert.lib.Maps.html#X.index">X.index</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:741">i</a></span>) <span class="id"><a href="compcert.lib.Maps.html#v:742">v</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:743">m</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="IMap.map" class="id"><a name="IMap.map" class="">map</a></span> (<span id="A:744" class="id"><a name="A:744" class="">A</a></span> <span id="B:745" class="id"><a name="B:745" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:746" class="id"><a name="f:746" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:744">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:745">B</a></span>) (<span id="m:747" class="id"><a name="m:747" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:744">A</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#IMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:745">B</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.map">PMap.map</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:746">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:747">m</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="IMap.gi" class="id"><a name="IMap.gi" class="">gi:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:748" class="id"><a name="A:748" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="x:749" class="id"><a name="x:749" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:748">A</a></span>) (<span id="i:750" class="id"><a name="i:750" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#IMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:750">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#IMap.init">init</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:749">x</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:749">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#IMap.get">get,</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.init">init</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gi">PMap.gi</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="IMap.gss" class="id"><a name="IMap.gss" class="">gss:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:751" class="id"><a name="A:751" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:752" class="id"><a name="i:752" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>) (<span id="x:753" class="id"><a name="x:753" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:751">A</a></span>) (<span id="m:754" class="id"><a name="m:754" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:751">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#IMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:752">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#IMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:752">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:753">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:754">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:753">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#IMap.get">get,</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.set">set</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="IMap.gso" class="id"><a name="IMap.gso" class="">gso:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:755" class="id"><a name="A:755" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:756" class="id"><a name="i:756" class="">i</a></span> <span id="j:757" class="id"><a name="j:757" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>) (<span id="x:758" class="id"><a name="x:758" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:755">A</a></span>) (<span id="m:759" class="id"><a name="m:759" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:755">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#i:756">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:757">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:756">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#IMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:757">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:758">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:759">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:756">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:759">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#IMap.get">get,</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.set">set</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red</span>. <span class="id">intro</span>. <span class="id">apply</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#X.index_inj">X.index_inj</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="IMap.gsspec" class="id"><a name="IMap.gsspec" class="">gsspec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:760" class="id"><a name="A:760" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:761" class="id"><a name="i:761" class="">i</a></span> <span id="j:762" class="id"><a name="j:762" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>) (<span id="x:763" class="id"><a name="x:763" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:760">A</a></span>) (<span id="m:764" class="id"><a name="m:764" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:760">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#IMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:761">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#IMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:762">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:763">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:764">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Maps.html#X.eq">X.eq</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:761">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:762">j</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.lib.Maps.html#x:763">x</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#IMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:761">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:764">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#IMap.get">get,</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.set">set</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span> (<span class="id"><a href="compcert.lib.Maps.html#X.eq">X.eq</a></span> <span class="id">i</span> <span class="id">j</span>)<span class="id">;</span> <span class="id">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">j</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_false">peq_false</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intro</span>. <span class="id">elim</span> <span class="id">n</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#X.index_inj">X.index_inj</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="IMap.gmap" class="id"><a name="IMap.gmap" class="">gmap:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:765" class="id"><a name="A:765" class="">A</a></span> <span id="B:766" class="id"><a name="B:766" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:767" class="id"><a name="f:767" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:765">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:766">B</a></span>) (<span id="i:768" class="id"><a name="i:768" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>) (<span id="m:769" class="id"><a name="m:769" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:765">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#IMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:768">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#IMap.map">map</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:767">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:769">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:767">f</a></span>(<span class="id"><a href="compcert.lib.Maps.html#IMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:768">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:769">m</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#IMap.map">map,</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.get">get</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gmap">PMap.gmap</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="IMap.set2" class="id"><a name="IMap.set2" class="">set2:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:770" class="id"><a name="A:770" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:771" class="id"><a name="i:771" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.elt">elt</a></span>) (<span id="x:772" class="id"><a name="x:772" class="">x</a></span> <span id="y:773" class="id"><a name="y:773" class="">y:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:770">A</a></span>) (<span id="m:774" class="id"><a name="m:774" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:770">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#IMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:771">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:773">y</a></span> (<span class="id"><a href="compcert.lib.Maps.html#IMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:771">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:772">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:774">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#IMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:771">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:773">y</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:774">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#IMap.set">set</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.set2">PMap.set2</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#IMap">IMap</a></span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="ZIndexed" class="id"><a name="ZIndexed" class="">ZIndexed</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ZIndexed.t" class="id"><a name="ZIndexed.t" class="">t</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ZIndexed.index" class="id"><a name="ZIndexed.index" class="">index</a></span> (<span id="z:775" class="id"><a name="z:775" class="">z:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#z:775">z</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">p</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zneg">Zneg</a></span> <span class="id">p</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="ZIndexed.index_inj" class="id"><a name="ZIndexed.index_inj" class="">index_inj:</a></span> <span class="gallina-kwd">forall</span> (<span id="x:777" class="id"><a name="x:777" class="">x</a></span> <span id="y:778" class="id"><a name="y:778" class="">y:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#ZIndexed.index">index</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:777">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#ZIndexed.index">index</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:778">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:777">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:778">y</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#ZIndexed.index">index;</a></span> <span class="id">destruct</span> <span class="id">x;</span> <span class="id">destruct</span> <span class="id">y;</span> <span class="id">intros;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> <span class="id">discriminate;</span> <span class="id">try</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ZIndexed.eq" class="id"><a name="ZIndexed.eq" class="">eq</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#ZIndexed">ZIndexed</a></span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="ZMap" class="id"><a name="ZMap" class="">ZMap</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#IMap">IMap</a></span>(<span class="id"><a href="compcert.lib.Maps.html#ZIndexed">ZIndexed</a></span>).<br/>
<br/>
<span class="vernacular">Module</span> <span id="NIndexed" class="id"><a name="NIndexed" class="">NIndexed</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NIndexed.t" class="id"><a name="NIndexed.t" class="">t</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#N">N</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="NIndexed.index" class="id"><a name="NIndexed.index" class="">index</a></span> (<span id="n:779" class="id"><a name="n:779" class="">n:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#N">N</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#n:779">n</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#N0">N0</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Npos">Npos</a></span> <span class="id">p</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NIndexed.index_inj" class="id"><a name="NIndexed.index_inj" class="">index_inj:</a></span> <span class="gallina-kwd">forall</span> (<span id="x:781" class="id"><a name="x:781" class="">x</a></span> <span id="y:782" class="id"><a name="y:782" class="">y:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#N">N</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#NIndexed.index">index</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:781">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#NIndexed.index">index</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:782">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:781">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:782">y</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#NIndexed.index">index;</a></span> <span class="id">destruct</span> <span class="id">x;</span> <span class="id">destruct</span> <span class="id">y;</span> <span class="id">intros;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> <span class="id">discriminate;</span> <span class="id">try</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="NIndexed.eq" class="id"><a name="NIndexed.eq" class="">eq:</a></span> <span class="gallina-kwd">forall</span> (<span id="x:783" class="id"><a name="x:783" class="">x</a></span> <span id="y:784" class="id"><a name="y:784" class="">y:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#N">N</a></span>)<span class="id">,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:784">y}</a></span> <span class="id">+</span> <span class="id">{x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:784">y}</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#NIndexed">NIndexed</a></span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="NMap" class="id"><a name="NMap" class="">NMap</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#IMap">IMap</a></span>(<span class="id"><a href="compcert.lib.Maps.html#NIndexed">NIndexed</a></span>).<br/>
<br/>
<h1> An implementation of maps over any type with decidable equality </h1>
<br/>
<span class="vernacular">Module</span> <span class="gallina-kwd">Type</span> <span id="EQUALITY_TYPE" class="id"><a name="EQUALITY_TYPE" class="">EQUALITY_TYPE</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="EQUALITY_TYPE.t" class="id"><a name="EQUALITY_TYPE.t" class="">t:</a></span> <span class="gallina-kwd">Type</span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Parameter</span> <span id="EQUALITY_TYPE.eq" class="id"><a name="EQUALITY_TYPE.eq" class="">eq:</a></span> <span class="gallina-kwd">forall</span> (<span id="x:786" class="id"><a name="x:786" class="">x</a></span> <span id="y:787" class="id"><a name="y:787" class="">y:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EQUALITY_TYPE.t">t</a></span>)<span class="id">,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:787">y}</a></span> <span class="id">+</span> <span class="id">{x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:787">y}</a></span>.<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#EQUALITY_TYPE">EQUALITY_TYPE</a></span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="EMap" class="id"><a name="EMap" class="">EMap</a></span>(<span class="id">X:</span> <span class="id"><a href="compcert.lib.Maps.html#EQUALITY_TYPE">EQUALITY_TYPE</a></span>) <span class="id">&lt;:</span> <span class="id"><a href="compcert.lib.Maps.html#MAP">MAP</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="EMap.elt" class="id"><a name="EMap.elt" class="">elt</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="EMap.elt_eq" class="id"><a name="EMap.elt_eq" class="">elt_eq</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#X.eq">X.eq</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="EMap.t" class="id"><a name="EMap.t" class="">t</a></span> (<span id="A:789" class="id"><a name="A:789" class="">A:</a></span> <span class="gallina-kwd">Type</span>) <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:789">A</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="EMap.init" class="id"><a name="EMap.init" class="">init</a></span> (<span id="A:790" class="id"><a name="A:790" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="v:791" class="id"><a name="v:791" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:790">A</a></span>) <span class="id">:=</span> <span class="gallina-kwd">fun</span> (<span class="id">_:</span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#v:791">v</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="EMap.get" class="id"><a name="EMap.get" class="">get</a></span> (<span id="A:792" class="id"><a name="A:792" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="x:793" class="id"><a name="x:793" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>) (<span id="m:794" class="id"><a name="m:794" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:792">A</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#m:794">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:793">x</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="EMap.set" class="id"><a name="EMap.set" class="">set</a></span> (<span id="A:795" class="id"><a name="A:795" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="x:796" class="id"><a name="x:796" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>) (<span id="v:797" class="id"><a name="v:797" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:795">A</a></span>) (<span id="m:798" class="id"><a name="m:798" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:795">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">fun</span> (<span id="y:799" class="id"><a name="y:799" class="">y:</a></span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>) <span class="id">=&gt;</span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Maps.html#X.eq">X.eq</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:799">y</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:796">x</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.lib.Maps.html#v:797">v</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#m:798">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:799">y</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="EMap.gi" class="id"><a name="EMap.gi" class="">gi:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:800" class="id"><a name="A:800" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:801" class="id"><a name="i:801" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.elt">elt</a></span>) (<span id="x:802" class="id"><a name="x:802" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:800">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#EMap.init">init</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:802">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:801">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:802">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="EMap.gss" class="id"><a name="EMap.gss" class="">gss:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:803" class="id"><a name="A:803" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:804" class="id"><a name="i:804" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.elt">elt</a></span>) (<span id="x:805" class="id"><a name="x:805" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:803">A</a></span>) (<span id="m:806" class="id"><a name="m:806" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:803">A</a></span>)<span class="id">,</span> (<span class="id"><a href="compcert.lib.Maps.html#EMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:804">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:805">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:806">m</a></span>) <span class="id"><a href="compcert.lib.Maps.html#i:804">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:805">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#EMap.set">set</a></span>. <span class="id">case</span> (<span class="id"><a href="compcert.lib.Maps.html#X.eq">X.eq</a></span> <span class="id">i</span> <span class="id">i</span>)<span class="id">;</span> <span class="id">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>. <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="EMap.gso" class="id"><a name="EMap.gso" class="">gso:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:807" class="id"><a name="A:807" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:808" class="id"><a name="i:808" class="">i</a></span> <span id="j:809" class="id"><a name="j:809" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.elt">elt</a></span>) (<span id="x:810" class="id"><a name="x:810" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:807">A</a></span>) (<span id="m:811" class="id"><a name="m:811" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:807">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#i:808">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:809">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.lib.Maps.html#EMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:809">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:810">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:811">m</a></span>) <span class="id"><a href="compcert.lib.Maps.html#i:808">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:811">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:808">i</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#EMap.set">set</a></span>. <span class="id">case</span> (<span class="id"><a href="compcert.lib.Maps.html#X.eq">X.eq</a></span> <span class="id">i</span> <span class="id">j</span>)<span class="id">;</span> <span class="id">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="EMap.gsspec" class="id"><a name="EMap.gsspec" class="">gsspec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:812" class="id"><a name="A:812" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:813" class="id"><a name="i:813" class="">i</a></span> <span id="j:814" class="id"><a name="j:814" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.elt">elt</a></span>) (<span id="x:815" class="id"><a name="x:815" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:812">A</a></span>) (<span id="m:816" class="id"><a name="m:816" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:812">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#EMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:813">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#EMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:814">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:815">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:816">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Maps.html#EMap.elt_eq">elt_eq</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:813">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:814">j</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="compcert.lib.Maps.html#x:815">x</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#EMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:813">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:816">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#EMap.get">get,</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.set">set,</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.elt_eq">elt_eq</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="EMap.gsident" class="id"><a name="EMap.gsident" class="">gsident:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:817" class="id"><a name="A:817" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:818" class="id"><a name="i:818" class="">i</a></span> <span id="j:819" class="id"><a name="j:819" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.elt">elt</a></span>) (<span id="m:820" class="id"><a name="m:820" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:817">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#EMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:819">j</a></span> (<span class="id"><a href="compcert.lib.Maps.html#EMap.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:818">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#EMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:818">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:820">m</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:820">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:819">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:820">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#EMap.get">get,</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.set">set</a></span>. <span class="id">case</span> (<span class="id"><a href="compcert.lib.Maps.html#X.eq">X.eq</a></span> <span class="id">j</span> <span class="id">i</span>)<span class="id">;</span> <span class="id">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="EMap.map" class="id"><a name="EMap.map" class="">map</a></span> (<span id="A:821" class="id"><a name="A:821" class="">A</a></span> <span id="B:822" class="id"><a name="B:822" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:823" class="id"><a name="f:823" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:821">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:822">B</a></span>) (<span id="m:824" class="id"><a name="m:824" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:821">A</a></span>) <span class="id">:=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">fun</span> (<span id="x:825" class="id"><a name="x:825" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#f:823">f</a></span>(<span class="id"><a href="compcert.lib.Maps.html#m:824">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:825">x</a></span>).<br/>
&nbsp;&nbsp;<span class="vernacular">Lemma</span> <span id="EMap.gmap" class="id"><a name="EMap.gmap" class="">gmap:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:826" class="id"><a name="A:826" class="">A</a></span> <span id="B:827" class="id"><a name="B:827" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:828" class="id"><a name="f:828" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:826">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:827">B</a></span>) (<span id="i:829" class="id"><a name="i:829" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.elt">elt</a></span>) (<span id="m:830" class="id"><a name="m:830" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:826">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#EMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:829">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#EMap.map">map</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:828">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:830">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:828">f</a></span>(<span class="id"><a href="compcert.lib.Maps.html#EMap.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:829">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:830">m</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#EMap.get">get,</a></span> <span class="id"><a href="compcert.lib.Maps.html#EMap.map">map</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#EMap">EMap</a></span>.<br/>
<br/>
<h1> A partial implementation of trees over any type that injects into type <span class="bracket"><span class="id">positive</span></span> </h1>
<br/>
<span class="vernacular">Module</span> <span id="ITree" class="id"><a name="ITree" class="">ITree</a></span>(<span class="id">X:</span> <span class="id"><a href="compcert.lib.Maps.html#INDEXED_TYPE">INDEXED_TYPE</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ITree.elt" class="id"><a name="ITree.elt" class="">elt</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#X.t">X.t</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ITree.elt_eq" class="id"><a name="ITree.elt_eq" class="">elt_eq</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#X.eq">X.eq</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ITree.t" class="id"><a name="ITree.t" class="">t</a></span> <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Type</span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ITree.empty" class="id"><a name="ITree.empty" class="">empty</a></span> (<span id="A:831" class="id"><a name="A:831" class="">A:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:831">A</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:831">A</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ITree.get" class="id"><a name="ITree.get" class="">get</a></span> (<span id="A:832" class="id"><a name="A:832" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="k:833" class="id"><a name="k:833" class="">k:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>) (<span id="m:834" class="id"><a name="m:834" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:832">A</a></span>)<span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:832">A</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> (<span class="id"><a href="compcert.lib.Maps.html#X.index">X.index</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:833">k</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:834">m</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ITree.set" class="id"><a name="ITree.set" class="">set</a></span> (<span id="A:835" class="id"><a name="A:835" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="k:836" class="id"><a name="k:836" class="">k:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>) (<span id="v:837" class="id"><a name="v:837" class="">v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:835">A</a></span>) (<span id="m:838" class="id"><a name="m:838" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:835">A</a></span>)<span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:835">A</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> (<span class="id"><a href="compcert.lib.Maps.html#X.index">X.index</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:836">k</a></span>) <span class="id"><a href="compcert.lib.Maps.html#v:837">v</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:838">m</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ITree.remove" class="id"><a name="ITree.remove" class="">remove</a></span> (<span id="A:839" class="id"><a name="A:839" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="k:840" class="id"><a name="k:840" class="">k:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>) (<span id="m:841" class="id"><a name="m:841" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:839">A</a></span>)<span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:839">A</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.remove">PTree.remove</a></span> (<span class="id"><a href="compcert.lib.Maps.html#X.index">X.index</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:840">k</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:841">m</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="ITree.gempty" class="id"><a name="ITree.gempty" class="">gempty:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:842" class="id"><a name="A:842" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:843" class="id"><a name="i:843" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:843">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ITree.empty">empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:842">A</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="ITree.gss" class="id"><a name="ITree.gss" class="">gss:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:844" class="id"><a name="A:844" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:845" class="id"><a name="i:845" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>) (<span id="x:846" class="id"><a name="x:846" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:844">A</a></span>) (<span id="m:847" class="id"><a name="m:847" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:844">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:845">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ITree.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:845">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:846">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:847">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:846">x</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="ITree.gso" class="id"><a name="ITree.gso" class="">gso:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:848" class="id"><a name="A:848" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:849" class="id"><a name="i:849" class="">i</a></span> <span id="j:850" class="id"><a name="j:850" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>) (<span id="x:851" class="id"><a name="x:851" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:848">A</a></span>) (<span id="m:852" class="id"><a name="m:852" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:848">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#i:849">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:850">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:849">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ITree.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:850">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:851">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:852">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:849">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:852">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">H;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#X.index_inj">X.index_inj</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="ITree.gsspec" class="id"><a name="ITree.gsspec" class="">gsspec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:853" class="id"><a name="A:853" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:854" class="id"><a name="i:854" class="">i</a></span> <span id="j:855" class="id"><a name="j:855" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>) (<span id="x:856" class="id"><a name="x:856" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:853">A</a></span>) (<span id="m:857" class="id"><a name="m:857" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:853">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:854">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ITree.set">set</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:855">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:856">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:857">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt_eq">elt_eq</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:854">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:855">j</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:856">x</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:854">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:857">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#ITree.elt_eq">elt_eq</a></span> <span class="id">i</span> <span class="id">j</span>). <span class="id">subst</span> <span class="id">j;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.gss">gss</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.gso">gso;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="ITree.grs" class="id"><a name="ITree.grs" class="">grs:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:858" class="id"><a name="A:858" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:859" class="id"><a name="i:859" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>) (<span id="m:860" class="id"><a name="m:860" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:858">A</a></span>)<span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:859">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ITree.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:859">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:860">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grs">PTree.grs</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="ITree.gro" class="id"><a name="ITree.gro" class="">gro:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:861" class="id"><a name="A:861" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:862" class="id"><a name="i:862" class="">i</a></span> <span id="j:863" class="id"><a name="j:863" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>) (<span id="m:864" class="id"><a name="m:864" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:861">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#i:862">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:863">j</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:862">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ITree.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:863">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:864">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:862">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:864">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof83')">Proof.</span></div>
<div class="proofscript" id="proof83">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gro">PTree.gro</a></span>. <span class="id">red;</span> <span class="id">intros;</span> <span class="id">elim</span> <span class="id">H;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#X.index_inj">X.index_inj</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="ITree.grspec" class="id"><a name="ITree.grspec" class="">grspec:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:865" class="id"><a name="A:865" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="i:866" class="id"><a name="i:866" class="">i</a></span> <span id="j:867" class="id"><a name="j:867" class="">j:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>) (<span id="m:868" class="id"><a name="m:868" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:865">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:866">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ITree.remove">remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:867">j</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:868">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="gallina-kwd">if</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt_eq">elt_eq</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:866">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#j:867">j</a></span> <span class="gallina-kwd">then</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="gallina-kwd">else</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:866">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:868">m</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof84')">Proof.</span></div>
<div class="proofscript" id="proof84">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#ITree.elt_eq">elt_eq</a></span> <span class="id">i</span> <span class="id">j</span>). <span class="id">subst</span> <span class="id">j;</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.grs">grs</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.gro">gro;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ITree.beq" class="id"><a name="ITree.beq" class="">beq:</a></span> <span class="gallina-kwd">forall</span> (<span id="A:869" class="id"><a name="A:869" class="">A:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> (<span class="id"><a href="compcert.lib.Maps.html#A:869">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:869">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:869">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:869">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.beq">PTree.beq</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="ITree.beq_sound" class="id"><a name="ITree.beq_sound" class="">beq_sound:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:870" class="id"><a name="A:870" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="eqA:871" class="id"><a name="eqA:871" class="">eqA:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:870">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:870">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span id="t1:872" class="id"><a name="t1:872" class="">t1</a></span> <span id="t2:873" class="id"><a name="t2:873" class="">t2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:870">A</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ITree.beq">beq</a></span> <span class="id"><a href="compcert.lib.Maps.html#eqA:871">eqA</a></span> <span class="id"><a href="compcert.lib.Maps.html#t1:872">t1</a></span> <span class="id"><a href="compcert.lib.Maps.html#t2:873">t2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="x:874" class="id"><a name="x:874" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:874">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#t1:872">t1,</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:874">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#t2:873">t2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">y1,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">y2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#eqA:871">eqA</a></span> <span class="id">y1</span> <span class="id">y2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</span></div>
<div class="proofscript" id="proof85">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.beq">beq,</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span>. <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.beq_correct">PTree.beq_correct</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="vernacular">Definition</span> <span id="ITree.combine" class="id"><a name="ITree.combine" class="">combine:</a></span> <span class="gallina-kwd">forall</span> (<span id="A:875" class="id"><a name="A:875" class="">A</a></span> <span id="B:876" class="id"><a name="B:876" class="">B</a></span> <span id="C:877" class="id"><a name="C:877" class="">C:</a></span> <span class="gallina-kwd">Type</span>)<span class="id">,</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:875">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:876">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#C:877">C</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:875">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:876">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#C:877">C</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.combine">PTree.combine</a></span>.<br/>
&nbsp;&nbsp;<span class="vernacular">Theorem</span> <span id="ITree.gcombine" class="id"><a name="ITree.gcombine" class="">gcombine:</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:878" class="id"><a name="A:878" class="">A</a></span> <span id="B:879" class="id"><a name="B:879" class="">B</a></span> <span id="C:880" class="id"><a name="C:880" class="">C:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:881" class="id"><a name="f:881" class="">f:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:878">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:879">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.lib.Maps.html#C:880">C</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#f:881">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="m1:882" class="id"><a name="m1:882" class="">m1:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:878">A</a></span>) (<span id="m2:883" class="id"><a name="m2:883" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.t">t</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:879">B</a></span>) (<span id="i:884" class="id"><a name="i:884" class="">i:</a></span> <span class="id"><a href="compcert.lib.Maps.html#ITree.elt">elt</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:884">i</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ITree.combine">combine</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:881">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:882">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:883">m2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:881">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:884">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:882">m1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#ITree.get">get</a></span> <span class="id"><a href="compcert.lib.Maps.html#i:884">i</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:883">m2</a></span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#ITree">ITree</a></span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="ZTree" class="id"><a name="ZTree" class="">ZTree</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#ITree">ITree</a></span>(<span class="id"><a href="compcert.lib.Maps.html#ZIndexed">ZIndexed</a></span>).<br/>
<br/>
<h1> Additional properties over trees </h1>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Equivalence.html">Equivalence</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.EquivDec.html">EquivDec</a></span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="Tree_Properties" class="id"><a name="Tree_Properties" class="">Tree_Properties</a></span>(<span class="id">T:</span> <span class="id"><a href="compcert.lib.Maps.html#TREE">TREE</a></span>).<br/>
<br/>
<div class="doc">Two induction principles over <span class="bracket"><span class="id">fold</span></span>. </div>
<br/>
<span class="vernacular">Section</span> <span id="Tree_Properties.TREE_FOLD_IND" class="id"><a name="Tree_Properties.TREE_FOLD_IND" class="">TREE_FOLD_IND</a></span>.<br/>
<br/>
<span class="vernacular">Variables</span> <span id="Tree_Properties.TREE_FOLD_IND.V" class="id"><a name="Tree_Properties.TREE_FOLD_IND.V" class="">V</a></span> <span id="Tree_Properties.TREE_FOLD_IND.A" class="id"><a name="Tree_Properties.TREE_FOLD_IND.A" class="">A:</a></span> <span class="gallina-kwd">Type</span>.<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.TREE_FOLD_IND.f" class="id"><a name="Tree_Properties.TREE_FOLD_IND.f" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.elt">T.elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.V">V</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.A">A</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.TREE_FOLD_IND.P" class="id"><a name="Tree_Properties.TREE_FOLD_IND.P" class="">P:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.V">V</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Type</span>.<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.TREE_FOLD_IND.init" class="id"><a name="Tree_Properties.TREE_FOLD_IND.init" class="">init:</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.A">A</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.TREE_FOLD_IND.m_final" class="id"><a name="Tree_Properties.TREE_FOLD_IND.m_final" class="">m_final:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.V">V</a></span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="Tree_Properties.TREE_FOLD_IND.H_base" class="id"><a name="Tree_Properties.TREE_FOLD_IND.H_base" class="">H_base:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:891" class="id"><a name="m:891" class="">m,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="k:892" class="id"><a name="k:892" class="">k,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:892">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:891">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.P">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:891">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.init">init</a></span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="Tree_Properties.TREE_FOLD_IND.H_rec" class="id"><a name="Tree_Properties.TREE_FOLD_IND.H_rec" class="">H_rec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:894" class="id"><a name="m:894" class="">m</a></span> <span id="a:895" class="id"><a name="a:895" class="">a</a></span> <span id="k:896" class="id"><a name="k:896" class="">k</a></span> <span id="v:897" class="id"><a name="v:897" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:896">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:894">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:897">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:896">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.m_final">m_final</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:897">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.P">P</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.remove">T.remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:896">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:894">m</a></span>) <span class="id"><a href="compcert.lib.Maps.html#a:895">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.P">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:894">m</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:895">a</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:896">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:897">v</a></span>).<br/>
<br/>
<span class="vernacular">Let</span> <span id="Tree_Properties.TREE_FOLD_IND.f'" class="id"><a name="Tree_Properties.TREE_FOLD_IND.f'" class="">f'</a></span> (<span id="p:899" class="id"><a name="p:899" class="">p</a></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#T.elt">T.elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.V">V</a></span>) (<span id="a:900" class="id"><a name="a:900" class="">a:</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.A">A</a></span>) <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:900">a</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:899">p</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#p:899">p</a></span>).<br/>
<br/>
<span class="vernacular">Let</span> <span id="Tree_Properties.TREE_FOLD_IND.P'" class="id"><a name="Tree_Properties.TREE_FOLD_IND.P'" class="">P'</a></span> (<span id="l:901" class="id"><a name="l:901" class="">l:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.elt">T.elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.V">V</a></span>)) (<span id="a:902" class="id"><a name="a:902" class="">a:</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.A">A</a></span>) <span class="id">:</span> <span class="gallina-kwd">Type</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:903" class="id"><a name="m:903" class="">m,</a></span> (<span class="gallina-kwd">forall</span> <span id="k:904" class="id"><a name="k:904" class="">k</a></span> <span id="v:905" class="id"><a name="v:905" class="">v,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#k:904">k,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:905">v</a></span>) <span class="id"><a href="compcert.lib.Maps.html#l:901">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:904">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:903">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:905">v</a></span>) <span class="id">-&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.P">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:903">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:902">a</a></span>.<br/>
<br/>
<span class="vernacular">Let</span> <span id="Tree_Properties.TREE_FOLD_IND.H_base'" class="id"><a name="Tree_Properties.TREE_FOLD_IND.H_base'" class="">H_base':</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.P'">P'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.init">init</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m</span> <span class="id">EQV</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.H_base">H_base</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">k</span> <span class="id">m</span>) <span class="gallina-kwd">as</span> <span class="id">[v|]</span> <span class="id">eqn:G;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">EQV</span> <span class="gallina-kwd">in</span> <span class="id">G</span>. <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Let</span> <span id="Tree_Properties.TREE_FOLD_IND.H_rec'" class="id"><a name="Tree_Properties.TREE_FOLD_IND.H_rec'" class="">H_rec':</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="k:906" class="id"><a name="k:906" class="">k</a></span> <span id="v:907" class="id"><a name="v:907" class="">v</a></span> <span id="l:908" class="id"><a name="l:908" class="">l</a></span> <span id="a:909" class="id"><a name="a:909" class="">a,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~In</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:906">k</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:908">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:906">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.m_final">m_final</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:907">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.P'">P'</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:908">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:909">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.P'">P'</a></span> ((<span class="id"><a href="compcert.lib.Maps.html#k:906">k,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:907">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:908">l</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:909">a</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:906">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:907">v</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#P'">P';</a></span> <span class="id">intros</span> <span class="id">k</span> <span class="id">v</span> <span class="id">l</span> <span class="id">a</span> <span class="id">NOTIN</span> <span class="id">FINAL</span> <span class="id">HR</span> <span class="id">m</span> <span class="id">EQV</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">m0</span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#T.remove">T.remove</a></span> <span class="id">k</span> <span class="id">m</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.H_rec">H_rec</a></span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id">EQV</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id">HR</span>. <span class="id">intros</span> <span class="id">k'</span> <span class="id">v'</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.grspec">T.grspec</a></span>. <span class="id">split;</span> <span class="id">intros;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.elt_eq">T.elt_eq</a></span> <span class="id">k'</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">subst</span> <span class="id">k'</span>. <span class="id">elim</span> <span class="id">NOTIN</span>. <span class="id">change</span> <span class="id">k</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">k,</span> <span class="id">v'</span>)). <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map">List.in_map</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">EQV</span>. <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">EQV</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.fold_ind_aux" class="id"><a name="Tree_Properties.fold_ind_aux" class="">fold_ind_aux:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:910" class="id"><a name="l:910" class="">l,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="k:911" class="id"><a name="k:911" class="">k</a></span> <span id="v:912" class="id"><a name="v:912" class="">v,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#k:911">k,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:912">v</a></span>) <span class="id"><a href="compcert.lib.Maps.html#l:910">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:911">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.m_final">m_final</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:912">v</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:910">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.P'">P'</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:910">l</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_right">List.fold_right</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.f'">f'</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.init">init</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:910">l</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">[k</span> <span class="id">v]</span> <span class="id">l</span> <span class="id">];</span> <span class="id">simpl;</span> <span class="id">intros</span> <span class="id">FINAL</span> <span class="id">NOREPET</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.H_base'">H_base'</a></span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.H_rec'">H_rec'</a></span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">inv</span> <span class="id">NOREPET</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">FINAL</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id">IHl</span>. <span class="id">auto</span>. <span class="id">inv</span> <span class="id">NOREPET;</span> <span class="id">auto</span>.<br/>
Defined.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Tree_Properties.fold_ind" class="id"><a name="Tree_Properties.fold_ind" class="">fold_ind:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.P">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.m_final">m_final</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.fold">T.fold</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.m_final">m_final</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.init">init</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">l'</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#rev">List.rev</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.elements">T.elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.m_final">m_final</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.P'">P'</a></span> <span class="id">l'</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_right">List.fold_right</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.f'">f'</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND.init">init</a></span> <span class="id">l'</span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.fold_ind_aux">fold_ind_aux</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.elements_complete">T.elements_complete</a></span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_rev">List.in_rev</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">l';</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_rev">List.map_rev</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet_rev">list_norepet_rev</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.elements_keys_norepet">T.elements_keys_norepet</a></span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">l',</span> <span class="id"><a href="compcert.lib.Maps.html#f'">f'</a></span> <span class="gallina-kwd">in</span> <span class="id">X;</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left_rev_right">fold_left_rev_right</a></span> <span class="gallina-kwd">in</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.fold_spec">T.fold_spec</a></span>. <span class="id">apply</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">simpl</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_rev">List.in_rev</a></span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.elements_complete">T.elements_complete</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.elements_correct">T.elements_correct</a></span>.<br/>
Defined.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_IND">TREE_FOLD_IND</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="Tree_Properties.TREE_FOLD_REC" class="id"><a name="Tree_Properties.TREE_FOLD_REC" class="">TREE_FOLD_REC</a></span>.<br/>
<br/>
<span class="vernacular">Variables</span> <span id="Tree_Properties.TREE_FOLD_REC.V" class="id"><a name="Tree_Properties.TREE_FOLD_REC.V" class="">V</a></span> <span id="Tree_Properties.TREE_FOLD_REC.A" class="id"><a name="Tree_Properties.TREE_FOLD_REC.A" class="">A:</a></span> <span class="gallina-kwd">Type</span>.<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.TREE_FOLD_REC.f" class="id"><a name="Tree_Properties.TREE_FOLD_REC.f" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.elt">T.elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.V">V</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.A">A</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.TREE_FOLD_REC.P" class="id"><a name="Tree_Properties.TREE_FOLD_REC.P" class="">P:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.V">V</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span>.<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.TREE_FOLD_REC.init" class="id"><a name="Tree_Properties.TREE_FOLD_REC.init" class="">init:</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.A">A</a></span>.<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.TREE_FOLD_REC.m_final" class="id"><a name="Tree_Properties.TREE_FOLD_REC.m_final" class="">m_final:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.V">V</a></span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="Tree_Properties.TREE_FOLD_REC.P_compat" class="id"><a name="Tree_Properties.TREE_FOLD_REC.P_compat" class="">P_compat:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:919" class="id"><a name="m:919" class="">m</a></span> <span id="m':920" class="id"><a name="m':920" class="">m'</a></span> <span id="a:921" class="id"><a name="a:921" class="">a,</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="x:922" class="id"><a name="x:922" class="">x,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:922">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:919">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:922">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m':920">m'</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.P">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:919">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:921">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.P">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#m':920">m'</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:921">a</a></span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="Tree_Properties.TREE_FOLD_REC.H_base" class="id"><a name="Tree_Properties.TREE_FOLD_REC.H_base" class="">H_base:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.P">P</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.empty">T.empty</a></span> <span class="id">_</span>) <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.init">init</a></span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="Tree_Properties.TREE_FOLD_REC.H_rec" class="id"><a name="Tree_Properties.TREE_FOLD_REC.H_rec" class="">H_rec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:925" class="id"><a name="m:925" class="">m</a></span> <span id="a:926" class="id"><a name="a:926" class="">a</a></span> <span id="k:927" class="id"><a name="k:927" class="">k</a></span> <span id="v:928" class="id"><a name="v:928" class="">v,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:927">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:925">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:927">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.m_final">m_final</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:928">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.P">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:925">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:926">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.P">P</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.set">T.set</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:927">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:928">v</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:925">m</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:926">a</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:927">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:928">v</a></span>).<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Tree_Properties.fold_rec" class="id"><a name="Tree_Properties.fold_rec" class="">fold_rec:</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.P">P</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.m_final">m_final</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.fold">T.fold</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.m_final">m_final</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.init">init</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.fold_ind">fold_ind</a></span>. <br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.P_compat">P_compat</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#T.empty">T.empty</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.V">V</a></span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.gempty">T.gempty</a></span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.P_compat">P_compat</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#T.set">T.set</a></span> <span class="id">k</span> <span class="id">v</span> (<span class="id"><a href="compcert.lib.Maps.html#T.remove">T.remove</a></span> <span class="id">k</span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.gsspec">T.gsspec</a></span><span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#T.grspec">T.grspec</a></span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.elt_eq">T.elt_eq</a></span> <span class="id">x</span> <span class="id">k</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC.H_rec">H_rec;</a></span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.grs">T.grs</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.TREE_FOLD_REC">TREE_FOLD_REC</a></span>.<br/>
<br/>
<div class="doc">A nonnegative measure over trees </div>
<br/>
<span class="vernacular">Section</span> <span id="Tree_Properties.MEASURE" class="id"><a name="Tree_Properties.MEASURE" class="">MEASURE</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.MEASURE.V" class="id"><a name="Tree_Properties.MEASURE.V" class="">V:</a></span> <span class="gallina-kwd">Type</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Tree_Properties.cardinal" class="id"><a name="Tree_Properties.cardinal" class="">cardinal</a></span> (<span id="x:931" class="id"><a name="x:931" class="">x:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.MEASURE.V">V</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#length">List.length</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.elements">T.elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:931">x</a></span>).<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Tree_Properties.cardinal_remove" class="id"><a name="Tree_Properties.cardinal_remove" class="">cardinal_remove:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:932" class="id"><a name="x:932" class="">x</a></span> <span id="m:933" class="id"><a name="m:933" class="">m</a></span> <span id="y:934" class="id"><a name="y:934" class="">y,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:932">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:933">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:934">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.cardinal">cardinal</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.remove">T.remove</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:932">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:933">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.cardinal">cardinal</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:933">m</a></span>)%<span class="id">nat</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.cardinal">cardinal;</a></span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#T.elements_remove">T.elements_remove</a></span><span class="id">;</span> <span class="id">eauto</span>. <span class="id">intros</span> (<span class="id">l1</span> &amp; <span class="id">l2</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">P,</span> <span class="id">Q</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>. <span class="id">simpl</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Theorem</span> <span id="Tree_Properties.cardinal_set" class="id"><a name="Tree_Properties.cardinal_set" class="">cardinal_set:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:935" class="id"><a name="x:935" class="">x</a></span> <span id="m:936" class="id"><a name="m:936" class="">m</a></span> <span id="y:937" class="id"><a name="y:937" class="">y,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:935">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:936">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.cardinal">cardinal</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:936">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.cardinal">cardinal</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.set">T.set</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:935">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#y:937">y</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:936">m</a></span>))%<span class="id">nat</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">set</span> (<span class="id">m'</span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#T.set">T.set</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">m</span>).<br/>
&nbsp;&nbsp;<span class="id">replace</span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.cardinal">cardinal</a></span> <span class="id">m</span>) <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.cardinal">cardinal</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.remove">T.remove</a></span> <span class="id">x</span> <span class="id">m'</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.cardinal_remove">cardinal_remove</a></span> <span class="gallina-kwd">with</span> <span class="id">y</span>. <span class="id">unfold</span> <span class="id">m';</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.gss">T.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.cardinal">cardinal</a></span>. <span class="id">f_equal</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.elements_extensional">T.elements_extensional</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id">m'</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.grspec">T.grspec</a></span><span class="id">,</span> <span class="id"><a href="compcert.lib.Maps.html#T.gsspec">T.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.elt_eq">T.elt_eq</a></span> <span class="id">i</span> <span class="id">x</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.MEASURE">MEASURE</a></span>.<br/>
<br/>
<div class="doc">Forall and exists </div>
<br/>
<span class="vernacular">Section</span> <span id="Tree_Properties.FORALL_EXISTS" class="id"><a name="Tree_Properties.FORALL_EXISTS" class="">FORALL_EXISTS</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.FORALL_EXISTS.A" class="id"><a name="Tree_Properties.FORALL_EXISTS.A" class="">A:</a></span> <span class="gallina-kwd">Type</span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Tree_Properties.for_all" class="id"><a name="Tree_Properties.for_all" class="">for_all</a></span> (<span id="m:939" class="id"><a name="m:939" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.FORALL_EXISTS.A">A</a></span>) (<span id="f:940" class="id"><a name="f:940" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.elt">T.elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.FORALL_EXISTS.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#T.fold">T.fold</a></span> (<span class="gallina-kwd">fun</span> <span id="b:941" class="id"><a name="b:941" class="">b</a></span> <span id="x:942" class="id"><a name="x:942" class="">x</a></span> <span id="a:943" class="id"><a name="a:943" class="">a</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#b:941">b</a></span> &amp;&amp; <span class="id"><a href="compcert.lib.Maps.html#f:940">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:942">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:943">a</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:939">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.for_all_correct" class="id"><a name="Tree_Properties.for_all_correct" class="">for_all_correct:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:944" class="id"><a name="m:944" class="">m</a></span> <span id="f:945" class="id"><a name="f:945" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all">for_all</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:944">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:945">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> (<span class="gallina-kwd">forall</span> <span id="x:946" class="id"><a name="x:946" class="">x</a></span> <span id="a:947" class="id"><a name="a:947" class="">a,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:946">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:944">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:947">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:945">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:946">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:947">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof94')">Proof.</span></div>
<div class="proofscript" id="proof94">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m0</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all">for_all</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.fold_rec">fold_rec;</a></span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Extensionality&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">split;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">H2;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">H2;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.gempty">T.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H0;</span> <span class="id">congruence</span>. <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#andb_prop">andb_prop</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span>). <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.gsspec">T.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H3</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.elt_eq">T.elt_eq</a></span> <span class="id">x</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H1;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#andb_true_intro">andb_true_intro</a></span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H1</span>. <span class="id">intros</span>. <span class="id">apply</span> <span class="id">H2</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.gso">T.gso</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H2</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.gss">T.gss</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Definition</span> <span id="Tree_Properties.exists_" class="id"><a name="Tree_Properties.exists_" class="">exists_</a></span> (<span id="m:948" class="id"><a name="m:948" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.FORALL_EXISTS.A">A</a></span>) (<span id="f:949" class="id"><a name="f:949" class="">f:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.elt">T.elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.FORALL_EXISTS.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#T.fold">T.fold</a></span> (<span class="gallina-kwd">fun</span> <span id="b:950" class="id"><a name="b:950" class="">b</a></span> <span id="x:951" class="id"><a name="x:951" class="">x</a></span> <span id="a:952" class="id"><a name="a:952" class="">a</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#b:950">b</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185">||</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:949">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:951">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:952">a</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:948">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.exists_correct" class="id"><a name="Tree_Properties.exists_correct" class="">exists_correct:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:953" class="id"><a name="m:953" class="">m</a></span> <span id="f:954" class="id"><a name="f:954" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.exists_">exists_</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:953">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:954">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> (<span class="gallina-kwd">exists</span> <span id="x:955" class="id"><a name="x:955" class="">x</a></span> <span id="a:956" class="id"><a name="a:956" class="">a,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:955">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:953">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:956">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:954">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:955">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:956">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof95')">Proof.</span></div>
<div class="proofscript" id="proof95">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">m0</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.exists_">exists_</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.fold_rec">fold_rec;</a></span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Extensionality&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">split;</span> <span class="id">intros</span> (<span class="id">x0</span> &amp; <span class="id">a0</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>)<span class="id">;</span> <span class="gallina-kwd">exists</span> <span class="id">x0;</span> <span class="gallina-kwd">exists</span> <span class="id">a0;</span> <span class="id">split;</span> <span class="id">auto;</span> <span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">intros</span>. <span class="id">congruence</span>. <span class="id">destruct</span> <span class="id">H</span> <span class="gallina-kwd">as</span> (<span class="id">x</span> &amp; <span class="id">a</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.gempty">T.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">P;</span> <span class="id">congruence</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;Inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_elim">orb_true_elim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H1</span> <span class="gallina-kwd">in</span> <span class="id">e</span>. <span class="id">destruct</span> <span class="id">e</span> <span class="gallina-kwd">as</span> (<span class="id">x1</span> &amp; <span class="id">a1</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">x1;</span> <span class="gallina-kwd">exists</span> <span class="id">a1;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.gso">T.gso</a></span><span class="id">;</span> <span class="id">auto</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">k;</span> <span class="gallina-kwd">exists</span> <span class="id">v;</span> <span class="id">split;</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.gss">T.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H2</span> <span class="gallina-kwd">as</span> (<span class="id">x1</span> &amp; <span class="id">a1</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_intro">orb_true_intro</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.gsspec">T.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">P</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.elt_eq">T.elt_eq</a></span> <span class="id">x1</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">P</span>. <span class="id">right;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="id">apply</span> <span class="id">H1</span>. <span class="gallina-kwd">exists</span> <span class="id">x1;</span> <span class="gallina-kwd">exists</span> <span class="id">a1;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Tree_Properties.exists_for_all" class="id"><a name="Tree_Properties.exists_for_all" class="">exists_for_all:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:957" class="id"><a name="m:957" class="">m</a></span> <span id="f:958" class="id"><a name="f:958" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.exists_">exists_</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:957">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:958">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all">for_all</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:957">m</a></span> (<span class="gallina-kwd">fun</span> <span id="x:959" class="id"><a name="x:959" class="">x</a></span> <span id="a:960" class="id"><a name="a:960" class="">a</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.lib.Maps.html#f:958">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:959">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:960">a</a></span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof96')">Proof.</span></div>
<div class="proofscript" id="proof96">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.exists_">exists_,</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all">for_all</a></span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#T.fold_spec">T.fold_spec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>). <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Maps.html#T.elements">T.elements</a></span> <span class="id">m</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHl</span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">b;</span> <span class="id">destruct</span> (<span class="id">f</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">a</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">a</span>))<span class="id">;</span> <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Tree_Properties.for_all_exists" class="id"><a name="Tree_Properties.for_all_exists" class="">for_all_exists:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:961" class="id"><a name="m:961" class="">m</a></span> <span id="f:962" class="id"><a name="f:962" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all">for_all</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:961">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:962">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.exists_">exists_</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:961">m</a></span> (<span class="gallina-kwd">fun</span> <span id="x:963" class="id"><a name="x:963" class="">x</a></span> <span id="a:964" class="id"><a name="a:964" class="">a</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.lib.Maps.html#f:962">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:963">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:964">a</a></span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof97')">Proof.</span></div>
<div class="proofscript" id="proof97">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.exists_">exists_,</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all">for_all</a></span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#T.fold_spec">T.fold_spec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>). <span class="id">generalize</span> (<span class="id"><a href="compcert.lib.Maps.html#T.elements">T.elements</a></span> <span class="id">m</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">IHl</span>. <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">b;</span> <span class="id">destruct</span> (<span class="id">f</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">a</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">a</span>))<span class="id">;</span> <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.for_all_false" class="id"><a name="Tree_Properties.for_all_false" class="">for_all_false:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:965" class="id"><a name="m:965" class="">m</a></span> <span id="f:966" class="id"><a name="f:966" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all">for_all</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:965">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:966">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> (<span class="gallina-kwd">exists</span> <span id="x:967" class="id"><a name="x:967" class="">x</a></span> <span id="a:968" class="id"><a name="a:968" class="">a,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:967">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:965">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:968">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:966">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:967">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:968">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof98')">Proof.</span></div>
<div class="proofscript" id="proof98">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all_exists">for_all_exists</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#negb_false_iff">negb_false_iff</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.exists_correct">exists_correct</a></span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">intros</span> (<span class="id">x</span> &amp; <span class="id">a</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>)<span class="id">;</span> <span class="gallina-kwd">exists</span> <span class="id">x;</span> <span class="gallina-kwd">exists</span> <span class="id">a;</span> <span class="id">split;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#negb_true_iff">negb_true_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">Q</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Q;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.exists_false" class="id"><a name="Tree_Properties.exists_false" class="">exists_false:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:969" class="id"><a name="m:969" class="">m</a></span> <span id="f:970" class="id"><a name="f:970" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.exists_">exists_</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:969">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:970">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span> (<span class="gallina-kwd">forall</span> <span id="x:971" class="id"><a name="x:971" class="">x</a></span> <span id="a:972" class="id"><a name="a:972" class="">a,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:971">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:969">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:972">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#f:970">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:971">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#a:972">a</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof99')">Proof.</span></div>
<div class="proofscript" id="proof99">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.exists_for_all">exists_for_all</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#negb_false_iff">negb_false_iff</a></span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all_correct">for_all_correct</a></span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id">H</span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html#negb_true_iff">negb_true_iff</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.FORALL_EXISTS">FORALL_EXISTS</a></span>.<br/>
<br/>
<div class="doc">More about <span class="bracket"><span class="id">beq</span></span> </div>
<br/>
<span class="vernacular">Section</span> <span id="Tree_Properties.BOOLEAN_EQUALITY" class="id"><a name="Tree_Properties.BOOLEAN_EQUALITY" class="">BOOLEAN_EQUALITY</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.BOOLEAN_EQUALITY.A" class="id"><a name="Tree_Properties.BOOLEAN_EQUALITY.A" class="">A:</a></span> <span class="gallina-kwd">Type</span>.<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.BOOLEAN_EQUALITY.beqA" class="id"><a name="Tree_Properties.BOOLEAN_EQUALITY.beqA" class="">beqA:</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.BOOLEAN_EQUALITY.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.BOOLEAN_EQUALITY.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>.<br/>
<br/>
<span class="vernacular">Theorem</span> <span id="Tree_Properties.beq_false" class="id"><a name="Tree_Properties.beq_false" class="">beq_false:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:975" class="id"><a name="m1:975" class="">m1</a></span> <span id="m2:976" class="id"><a name="m2:976" class="">m2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#T.beq">T.beq</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:975">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:976">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x">&lt;-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="x:977" class="id"><a name="x:977" class="">x,</a></span> <span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:977">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:975">m1,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:977">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:976">m2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a1,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id">a1</span> <span class="id">a2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof100')">Proof.</span></div>
<div class="proofscript" id="proof100">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">split;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;beq&nbsp;=&nbsp;false&nbsp;-&gt;&nbsp;existence&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">p1</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="x:980" class="id"><span id="x:978" class="id"><a name="x:980" class="">x</a></span></span> <span id="a1:981" class="id"><span id="a1:979" class="id"><a name="a1:981" class="">a1</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:978">x</a></span> <span class="id">m2</span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a2</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id"><a href="compcert.lib.Maps.html#a1:979">a1</a></span> <span class="id">a2</span> <span class="gallina-kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">p2</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="x:984" class="id"><span id="x:982" class="id"><a name="x:984" class="">x</a></span></span> <span id="a2:985" class="id"><span id="a2:983" class="id"><a name="a2:985" class="">a2</a></span></span> <span class="id">=&gt;</span> <span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:982">x</a></span> <span class="id">m1</span> <span class="gallina-kwd">with</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a1</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id">a1</span> <span class="id"><a href="compcert.lib.Maps.html#a2:983">a2</a></span> <span class="gallina-kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all">for_all</a></span> <span class="id">m1</span> <span class="id">p1</span>) <span class="id">eqn:F1;</span> <span class="id">[destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all">for_all</a></span> <span class="id">m2</span> <span class="id">p2</span>) <span class="id">eqn:F2</span> <span class="id">|</span> <span class="id">idtac]</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">cut</span> (<span class="id"><a href="compcert.lib.Maps.html#T.beq">T.beq</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id">m1</span> <span class="id">m2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>). <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all_correct">for_all_correct</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.beq_correct">T.beq_correct</a></span><span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m1</span>) <span class="gallina-kwd">as</span> <span class="id">[a1|]</span> <span class="id">eqn:X1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">F1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">X1</span>). <span class="id">unfold</span> <span class="id">p1</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m2</span>) <span class="gallina-kwd">as</span> <span class="id">[a2|]</span> <span class="id">eqn:X2;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">F2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">X2</span>). <span class="id">unfold</span> <span class="id">p2</span>. <span class="id">rewrite</span> <span class="id">X1</span>. <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all_false">for_all_false</a></span> <span class="gallina-kwd">in</span> <span class="id">F2</span>. <span class="id">destruct</span> <span class="id">F2</span> <span class="gallina-kwd">as</span> (<span class="id">x</span> &amp; <span class="id">a</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">x</span>. <span class="id">rewrite</span> <span class="id">P</span>. <span class="id">unfold</span> <span class="id">p2</span> <span class="gallina-kwd">in</span> <span class="id">Q</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m1</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.for_all_false">for_all_false</a></span> <span class="gallina-kwd">in</span> <span class="id">F1</span>. <span class="id">destruct</span> <span class="id">F1</span> <span class="gallina-kwd">as</span> (<span class="id">x</span> &amp; <span class="id">a</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span class="id">x</span>. <span class="id">rewrite</span> <span class="id">P</span>. <span class="id">unfold</span> <span class="id">p1</span> <span class="gallina-kwd">in</span> <span class="id">Q</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="comment">(*&nbsp;existence&nbsp;-&gt;&nbsp;beq&nbsp;=&nbsp;false&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H</span> <span class="gallina-kwd">as</span> <span class="id">[x</span> <span class="id">P]</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.beq">T.beq</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.BOOLEAN_EQUALITY.beqA">beqA</a></span> <span class="id">m1</span> <span class="id">m2</span>) <span class="id">eqn:E;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.beq_correct">T.beq_correct</a></span> <span class="gallina-kwd">in</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">E</span> <span class="id">x</span>). <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m1</span>)<span class="id">;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">tauto</span> <span class="id">||</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.BOOLEAN_EQUALITY">BOOLEAN_EQUALITY</a></span>.<br/>
<br/>
<div class="doc">Extensional equality between trees </div>
<br/>
<span class="vernacular">Section</span> <span id="Tree_Properties.EXTENSIONAL_EQUALITY" class="id"><a name="Tree_Properties.EXTENSIONAL_EQUALITY" class="">EXTENSIONAL_EQUALITY</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.EXTENSIONAL_EQUALITY.A" class="id"><a name="Tree_Properties.EXTENSIONAL_EQUALITY.A" class="">A:</a></span> <span class="gallina-kwd">Type</span>.<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.EXTENSIONAL_EQUALITY.eqA" class="id"><a name="Tree_Properties.EXTENSIONAL_EQUALITY.eqA" class="">eqA:</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.EXTENSIONAL_EQUALITY.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.EXTENSIONAL_EQUALITY.A">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="Tree_Properties.EXTENSIONAL_EQUALITY.eqAeq" class="id"><a name="Tree_Properties.EXTENSIONAL_EQUALITY.eqAeq" class="">eqAeq:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#Equivalence">Equivalence</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.EXTENSIONAL_EQUALITY.eqA">eqA</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Tree_Properties.Equal" class="id"><a name="Tree_Properties.Equal" class="">Equal</a></span> (<span id="m1:989" class="id"><a name="m1:989" class="">m1</a></span> <span id="m2:990" class="id"><a name="m2:990" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.EXTENSIONAL_EQUALITY.A">A</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:991" class="id"><a name="x:991" class="">x,</a></span> <span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:991">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:989">m1,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#x:991">x</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:990">m2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a1,</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a2</span> <span class="id">=&gt;</span> <span class="id">a1</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Equivalence.html#8730e86b8eb9bce5d2bc1904420697e0">===</a></span> <span class="id">a2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">|</span> <span class="id">_,</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.Equal_refl" class="id"><a name="Tree_Properties.Equal_refl" class="">Equal_refl:</a></span> <span class="gallina-kwd">forall</span> <span id="m:992" class="id"><a name="m:992" class="">m,</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal">Equal</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:992">m</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:992">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof101')">Proof.</span></div>
<div class="proofscript" id="proof101">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.Equal_sym" class="id"><a name="Tree_Properties.Equal_sym" class="">Equal_sym:</a></span> <span class="gallina-kwd">forall</span> <span id="m1:993" class="id"><a name="m1:993" class="">m1</a></span> <span id="m2:994" class="id"><a name="m2:994" class="">m2,</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal">Equal</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:993">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:994">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal">Equal</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:994">m2</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:993">m1</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof102')">Proof.</span></div>
<div class="proofscript" id="proof102">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">generalize</span> (<span class="id">H</span> <span class="id">x</span>). <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m1</span>)<span class="id">;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">intros;</span> <span class="id">symmetry;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.Equal_trans" class="id"><a name="Tree_Properties.Equal_trans" class="">Equal_trans:</a></span> <span class="gallina-kwd">forall</span> <span id="m1:995" class="id"><a name="m1:995" class="">m1</a></span> <span id="m2:996" class="id"><a name="m2:996" class="">m2</a></span> <span id="m3:997" class="id"><a name="m3:997" class="">m3,</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal">Equal</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:995">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:996">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal">Equal</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:996">m2</a></span> <span class="id"><a href="compcert.lib.Maps.html#m3:997">m3</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal">Equal</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:995">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m3:997">m3</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof103')">Proof.</span></div>
<div class="proofscript" id="proof103">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">generalize</span> (<span class="id">H</span> <span class="id">x</span>) (<span class="id">H0</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m1</span>)<span class="id">;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">tauto;</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m3</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">transitivity</span> <span class="id">a0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="Tree_Properties.Equal_Equivalence" class="id"><a name="Tree_Properties.Equal_Equivalence" class="">Equal_Equivalence</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#Equivalence">Equivalence</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal">Equal</a></span> <span class="id">:=</span> <span class="id">{</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#Equivalence_Reflexive">Equivalence_Reflexive</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal_refl">Equal_refl;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#Equivalence_Symmetric">Equivalence_Symmetric</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal_sym">Equal_sym;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#Equivalence_Transitive">Equivalence_Transitive</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal_trans">Equal_trans</a></span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="Tree_Properties.EXTENSIONAL_EQUALITY.eqAdec" class="id"><a name="Tree_Properties.EXTENSIONAL_EQUALITY.eqAdec" class="">eqAdec:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.EquivDec.html#EqDec">EqDec</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.EXTENSIONAL_EQUALITY.A">A</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.EXTENSIONAL_EQUALITY.eqA">eqA</a></span>.<br/>
<br/>
<span class="id">Program</span> <span class="vernacular">Definition</span> <span id="Tree_Properties.Equal_dec" class="id"><a name="Tree_Properties.Equal_dec" class="">Equal_dec</a></span> (<span id="m1:999" class="id"><a name="m1:999" class="">m1</a></span> <span id="m2:1000" class="id"><a name="m2:1000" class="">m2:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.EXTENSIONAL_EQUALITY.A">A</a></span>) <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">{</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:999">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Equivalence.html#8730e86b8eb9bce5d2bc1904420697e0">===</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:1000">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">}</a></span> <span class="id">+</span> <span class="id">{</span> <span class="id"><a href="compcert.lib.Maps.html#m1:999">m1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Equivalence.html#4d60a26a1a9a35af6019d82673a2f7d1">=/=</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:1000">m2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da">}</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#T.beq">T.beq</a></span> (<span class="gallina-kwd">fun</span> <span id="a1:1001" class="id"><a name="a1:1001" class="">a1</a></span> <span id="a2:1002" class="id"><a name="a2:1002" class="">a2</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> (<span class="id"><a href="compcert.lib.Maps.html#a1:1001">a1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.EquivDec.html#eb3806316e6d55ef1c2f326183b9bb25">==</a></span> <span class="id"><a href="compcert.lib.Maps.html#a2:1002">a2</a></span>)) <span class="id"><a href="compcert.lib.Maps.html#m1:999">m1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:1000">m2</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#left">left</a></span> <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#right">right</a></span> <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof104')">Next Obligation.</span></div>
<div class="proofscript" id="proof104">
&nbsp;&nbsp;<span class="id">rename</span> <span class="id">Heq_anonymous</span> <span class="id">into</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">symmetry</span> <span class="gallina-kwd">in</span> <span class="id">B</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.beq_correct">T.beq_correct</a></span> <span class="gallina-kwd">in</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">generalize</span> (<span class="id">B</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m1</span>)<span class="id">;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool_true">proj_sumbool_true;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof105')">Next Obligation.</span></div>
<div class="proofscript" id="proof105">
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.lib.Maps.html#T.beq">T.beq</a></span> (<span class="gallina-kwd">fun</span> <span id="a1:1005" class="id"><span id="a1:1003" class="id"><a name="a1:1005" class="">a1</a></span></span> <span id="a2:1006" class="id"><span id="a2:1004" class="id"><a name="a2:1006" class="">a2</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> (<span class="id"><a href="compcert.lib.Maps.html#a1:1003">a1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.EquivDec.html#eb3806316e6d55ef1c2f326183b9bb25">==</a></span> <span class="id"><a href="compcert.lib.Maps.html#a2:1004">a2</a></span>)) <span class="id">m1</span> <span class="id">m2</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.beq_correct">T.beq_correct</a></span><span class="id">;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id">H</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m1</span>)<span class="id">;</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">x</span> <span class="id">m2</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool_is_true">proj_sumbool_is_true;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Equivalence.html#equiv">equiv,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#complement">complement</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="id">Global</span> <span class="vernacular">Instance</span> <span id="Tree_Properties.Equal_EqDec" class="id"><a name="Tree_Properties.Equal_EqDec" class="">Equal_EqDec</a></span> <span class="id">:</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.EquivDec.html#EqDec">EqDec</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.EXTENSIONAL_EQUALITY.A">A</a></span>) <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal">Equal</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.Equal_dec">Equal_dec</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.EXTENSIONAL_EQUALITY">EXTENSIONAL_EQUALITY</a></span>.<br/>
<br/>
<div class="doc">Creating a tree from a list of (key, value) pairs. </div>
<br/>
<span class="vernacular">Section</span> <span id="Tree_Properties.OF_LIST" class="id"><a name="Tree_Properties.OF_LIST" class="">OF_LIST</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="Tree_Properties.OF_LIST.A" class="id"><a name="Tree_Properties.OF_LIST.A" class="">A:</a></span> <span class="gallina-kwd">Type</span>.<br/>
<br/>
<span class="vernacular">Let</span> <span id="Tree_Properties.OF_LIST.f" class="id"><a name="Tree_Properties.OF_LIST.f" class="">f</a></span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> (<span id="m:1008" class="id"><a name="m:1008" class="">m:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.OF_LIST.A">A</a></span>) (<span id="k_v:1009" class="id"><a name="k_v:1009" class="">k_v:</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.elt">T.elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.OF_LIST.A">A</a></span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#T.set">T.set</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#k_v:1009">k_v</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#k_v:1009">k_v</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:1008">m</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="Tree_Properties.of_list" class="id"><a name="Tree_Properties.of_list" class="">of_list</a></span> (<span id="l:1010" class="id"><a name="l:1010" class="">l:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.elt">T.elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.OF_LIST.A">A</a></span>)) <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.OF_LIST.A">A</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.OF_LIST.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1010">l</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.empty">T.empty</a></span> <span class="id">_</span>).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.in_of_list" class="id"><a name="Tree_Properties.in_of_list" class="">in_of_list:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:1011" class="id"><a name="l:1011" class="">l</a></span> <span id="k:1012" class="id"><a name="k:1012" class="">k</a></span> <span id="v:1013" class="id"><a name="v:1013" class="">v,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1012">k</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list">of_list</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1011">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1013">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#k:1012">k,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1013">v</a></span>) <span class="id"><a href="compcert.lib.Maps.html#l:1011">l</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof106')">Proof.</span></div>
<div class="proofscript" id="proof106">
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">REC:</span> <span class="gallina-kwd">forall</span> <span id="k:1018" class="id"><span id="k:1014" class="id"><a name="k:1018" class="">k</a></span></span> <span id="v:1019" class="id"><span id="v:1015" class="id"><a name="v:1019" class="">v</a></span></span> <span id="l:1020" class="id"><span id="l:1016" class="id"><a name="l:1020" class="">l</a></span></span> <span id="m:1021" class="id"><span id="m:1017" class="id"><a name="m:1021" class="">m,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1014">k</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.OF_LIST.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1016">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:1017">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1015">v</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#k:1014">k,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1015">v</a></span>) <span class="id"><a href="compcert.lib.Maps.html#l:1016">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1014">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:1017">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1015">v</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">induction</span> <span class="id">l</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">[k1</span> <span class="id">v1]</span> <span class="id">l];</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">apply</span> <span class="id">IHl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#f">f</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.gsspec">T.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.elt_eq">T.elt_eq</a></span> <span class="id">k</span> <span class="id">k1</span>). <span class="id">inv</span> <span class="id">H</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">REC</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.gempty">T.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">intuition</span> <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.of_list_dom" class="id"><a name="Tree_Properties.of_list_dom" class="">of_list_dom:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:1022" class="id"><a name="l:1022" class="">l</a></span> <span id="k:1023" class="id"><a name="k:1023" class="">k,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1023">k</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1022">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">exists</span> <span id="v:1024" class="id"><a name="v:1024" class="">v,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1023">k</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list">of_list</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1022">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1024">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof107')">Proof.</span></div>
<div class="proofscript" id="proof107">
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">REC:</span> <span class="gallina-kwd">forall</span> <span id="k:1030" class="id"><span id="k:1025" class="id"><a name="k:1030" class="">k</a></span></span> <span id="l:1031" class="id"><span id="l:1026" class="id"><a name="l:1031" class="">l</a></span></span> <span id="m:1032" class="id"><span id="m:1027" class="id"><a name="m:1032" class="">m,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1025">k</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1026">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> (<span class="gallina-kwd">exists</span> <span id="v:1033" class="id"><span id="v:1028" class="id"><a name="v:1033" class="">v,</a></span></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1025">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:1027">m</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1028">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="v:1034" class="id"><span id="v:1029" class="id"><a name="v:1034" class="">v,</a></span></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1025">k</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.OF_LIST.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1026">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:1027">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1029">v</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">induction</span> <span class="id">l</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">[k1</span> <span class="id">v1]</span> <span class="id">l];</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">apply</span> <span class="id">IHl</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#f">f;</a></span> <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#T.gsspec">T.gsspec</a></span>. <span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.elt_eq">T.elt_eq</a></span> <span class="id">k</span> <span class="id">k1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right;</span> <span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intuition</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">REC</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="Tree_Properties.of_list_unchanged" class="id"><a name="Tree_Properties.of_list_unchanged" class="">of_list_unchanged:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="k:1035" class="id"><a name="k:1035" class="">k</a></span> <span id="l:1036" class="id"><a name="l:1036" class="">l</a></span> <span id="m:1037" class="id"><a name="m:1037" class="">m,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~In</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1035">k</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1036">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1035">k</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">List.fold_left</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.OF_LIST.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1036">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:1037">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1035">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:1037">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof108')">Proof.</span></div>
<div class="proofscript" id="proof108">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">[k1</span> <span class="id">v1]</span> <span class="id">l];</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
<span class="id">-</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">rewrite</span> <span class="id">IHl</span> <span class="gallina-kwd">by</span> <span class="id">tauto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#f">f;</a></span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.gso">T.gso</a></span><span class="id">;</span> <span class="id">intuition</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.of_list_unique" class="id"><a name="Tree_Properties.of_list_unique" class="">of_list_unique:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="k:1038" class="id"><a name="k:1038" class="">k</a></span> <span id="v:1039" class="id"><a name="v:1039" class="">v</a></span> <span id="l1:1040" class="id"><a name="l1:1040" class="">l1</a></span> <span id="l2:1041" class="id"><a name="l2:1041" class="">l2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~In</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1038">k</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:1041">l2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1038">k</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list">of_list</a></span> (<span class="id"><a href="compcert.lib.Maps.html#l1:1040">l1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6">++</a></span> (<span class="id"><a href="compcert.lib.Maps.html#k:1038">k,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1039">v</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:1041">l2</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1039">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof109')">Proof.</span></div>
<div class="proofscript" id="proof109">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list">of_list</a></span>. <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left_app">fold_left_app</a></span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list_unchanged">of_list_unchanged</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#f">f;</a></span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.gss">T.gss</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.of_list_norepet" class="id"><a name="Tree_Properties.of_list_norepet" class="">of_list_norepet:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="l:1042" class="id"><a name="l:1042" class="">l</a></span> <span id="k:1043" class="id"><a name="k:1043" class="">k</a></span> <span id="v:1044" class="id"><a name="v:1044" class="">v,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1042">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#k:1043">k,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1044">v</a></span>) <span class="id"><a href="compcert.lib.Maps.html#l:1042">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1043">k</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list">of_list</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1042">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1044">v</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof110')">Proof.</span></div>
<div class="proofscript" id="proof110">
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">REC:</span> <span class="gallina-kwd">forall</span> <span id="k:1049" class="id"><span id="k:1045" class="id"><a name="k:1049" class="">k</a></span></span> <span id="v:1050" class="id"><span id="v:1046" class="id"><a name="v:1050" class="">v</a></span></span> <span id="l:1051" class="id"><span id="l:1047" class="id"><a name="l:1051" class="">l</a></span></span> <span id="m:1052" class="id"><span id="m:1048" class="id"><a name="m:1052" class="">m,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1047">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#k:1045">k,</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1046">v</a></span>) <span class="id"><a href="compcert.lib.Maps.html#l:1047">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1045">k</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.OF_LIST.f">f</a></span> <span class="id"><a href="compcert.lib.Maps.html#l:1047">l</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:1048">m</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.lib.Maps.html#v:1046">v</a></span>).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">induction</span> <span class="id">l</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">|</span> <span class="id">[k1</span> <span class="id">v1]</span> <span class="id">l];</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list_unchanged">of_list_unchanged</a></span> <span class="gallina-kwd">by</span> <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.gss">T.gss</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">apply</span> <span class="id">REC;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.of_list_elements" class="id"><a name="Tree_Properties.of_list_elements" class="">of_list_elements:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m:1053" class="id"><a name="m:1053" class="">m</a></span> <span id="k:1054" class="id"><a name="k:1054" class="">k,</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1054">k</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list">of_list</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.elements">T.elements</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:1053">m</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1054">k</a></span> <span class="id"><a href="compcert.lib.Maps.html#m:1053">m</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof111')">Proof.</span></div>
<div class="proofscript" id="proof111">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">k</span> <span class="id">m</span>) <span class="gallina-kwd">as</span> <span class="id">[v|]</span> <span class="id">eqn:M</span>.<br/>
<span class="id">-</span> <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list_norepet">of_list_norepet</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.elements_keys_norepet">T.elements_keys_norepet</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.elements_correct">T.elements_correct</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
<span class="id">-</span> <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">k</span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list">of_list</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.elements">T.elements</a></span> <span class="id">m</span>))) <span class="gallina-kwd">as</span> <span class="id">[v|]</span> <span class="id">eqn:M';</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.in_of_list">in_of_list</a></span> <span class="gallina-kwd">in</span> <span class="id">M'</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#T.elements_complete">T.elements_complete</a></span> <span class="gallina-kwd">in</span> <span class="id">M'</span>. <span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.OF_LIST">OF_LIST</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="Tree_Properties.of_list_related" class="id"><a name="Tree_Properties.of_list_related" class="">of_list_related:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:1055" class="id"><a name="A:1055" class="">A</a></span> <span id="B:1056" class="id"><a name="B:1056" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="R:1057" class="id"><a name="R:1057" class="">R:</a></span> <span class="id"><a href="compcert.lib.Maps.html#A:1055">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Maps.html#B:1056">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span>) <span id="k:1058" class="id"><a name="k:1058" class="">k</a></span> <span id="l1:1059" class="id"><a name="l1:1059" class="">l1</a></span> <span id="l2:1060" class="id"><a name="l2:1060" class="">l2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="gallina-kwd">fun</span> <span id="ka:1061" class="id"><a name="ka:1061" class="">ka</a></span> <span id="kb:1062" class="id"><a name="kb:1062" class="">kb</a></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#ka:1061">ka</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#kb:1062">kb</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.lib.Maps.html#R:1057">R</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#ka:1061">ka</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#kb:1062">kb</a></span>)) <span class="id"><a href="compcert.lib.Maps.html#l1:1059">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:1060">l2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#option_rel">option_rel</a></span> <span class="id"><a href="compcert.lib.Maps.html#R:1057">R</a></span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1058">k</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list">of_list</a></span> <span class="id"><a href="compcert.lib.Maps.html#l1:1059">l1</a></span>)) (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id"><a href="compcert.lib.Maps.html#k:1058">k</a></span> (<span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list">of_list</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:1060">l2</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof112')">Proof.</span></div>
<div class="proofscript" id="proof112">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">k</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties.of_list">of_list</a></span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">R'</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> <span id="ka:1065" class="id"><span id="ka:1063" class="id"><a name="ka:1065" class="">ka</a></span></span> <span id="kb:1066" class="id"><span id="kb:1064" class="id"><a name="kb:1066" class="">kb</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#ka:1063">ka</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#kb:1064">kb</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id">R</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#ka:1063">ka</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#kb:1064">kb</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">fa</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> (<span id="m:1069" class="id"><span id="m:1067" class="id"><a name="m:1069" class="">m</a></span></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id">A</span>) (<span id="k_v:1070" class="id"><span id="k_v:1068" class="id"><a name="k_v:1070" class="">k_v</a></span></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#T.elt">T.elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id">A</span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#T.set">T.set</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#k_v:1068">k_v</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#k_v:1068">k_v</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:1067">m</a></span>).<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">fb</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> (<span id="m:1073" class="id"><span id="m:1071" class="id"><a name="m:1073" class="">m</a></span></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#T.t">T.t</a></span> <span class="id">B</span>) (<span id="k_v:1074" class="id"><span id="k_v:1072" class="id"><a name="k_v:1074" class="">k_v</a></span></span> <span class="id">:</span> <span class="id"><a href="compcert.lib.Maps.html#T.elt">T.elt</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4">*</a></span> <span class="id">B</span>) <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#T.set">T.set</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.lib.Maps.html#k_v:1072">k_v</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.lib.Maps.html#k_v:1072">k_v</a></span>) <span class="id"><a href="compcert.lib.Maps.html#m:1071">m</a></span>).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">REC:</span> <span class="gallina-kwd">forall</span> <span id="l1:1079" class="id"><span id="l1:1075" class="id"><a name="l1:1079" class="">l1</a></span></span> <span id="l2:1080" class="id"><span id="l2:1076" class="id"><a name="l2:1080" class="">l2,</a></span></span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id">R'</span> <span class="id"><a href="compcert.lib.Maps.html#l1:1075">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#l2:1076">l2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="m1:1081" class="id"><span id="m1:1077" class="id"><a name="m1:1081" class="">m1</a></span></span> <span id="m2:1082" class="id"><span id="m2:1078" class="id"><a name="m2:1082" class="">m2,</a></span></span> <span class="id"><a href="compcert.lib.Coqlib.html#option_rel">option_rel</a></span> <span class="id">R</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">k</span> <span class="id"><a href="compcert.lib.Maps.html#m1:1077">m1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">k</span> <span class="id"><a href="compcert.lib.Maps.html#m2:1078">m2</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#option_rel">option_rel</a></span> <span class="id">R</span> (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">k</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id">fa</span> <span class="id"><a href="compcert.lib.Maps.html#l1:1075">l1</a></span> <span class="id"><a href="compcert.lib.Maps.html#m1:1077">m1</a></span>)) (<span class="id"><a href="compcert.lib.Maps.html#T.get">T.get</a></span> <span class="id">k</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id">fb</span> <span class="id"><a href="compcert.lib.Maps.html#l2:1076">l2</a></span> <span class="id"><a href="compcert.lib.Maps.html#m2:1078">m2</a></span>))).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">induction</span> <span class="id">1;</span> <span class="id">intros;</span> <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">apply</span> <span class="id">IHlist_forall2</span>. <span class="id">unfold</span> <span class="id">fa,</span> <span class="id">fb</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#T.gsspec">T.gsspec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H</span> <span class="gallina-kwd">as</span> <span class="id">[E</span> <span class="id">F]</span>. <span class="id">rewrite</span> <span class="id">E</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#T.elt_eq">T.elt_eq</a></span> <span class="id">k</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">b1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">REC;</span> <span class="id">auto</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#T.gempty">T.gempty</a></span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties">Tree_Properties</a></span>.<br/>
<br/>
<span class="vernacular">Module</span> <span id="PTree_Properties" class="id"><a name="PTree_Properties" class="">PTree_Properties</a></span> <span class="id">:=</span> <span class="id"><a href="compcert.lib.Maps.html#Tree_Properties">Tree_Properties</a></span>(<span class="id"><a href="compcert.lib.Maps.html#PTree">PTree</a></span>).<br/>
<br/>
<h1> Useful notations </h1>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;a ! b&quot;</span> <span class="id">:=</span> (<span class="id"><a href="compcert.lib.Maps.html#get">PTree.get</a></span> <span class="id">b</span> <span class="id">a</span>) (<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">1</span>).<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;a !! b&quot;</span> <span class="id">:=</span> (<span class="id"><a href="compcert.lib.Maps.html#get">PMap.get</a></span> <span class="id">b</span> <span class="id">a</span>) (<span class="gallina-kwd">at</span> <span class="id">level</span> <span class="id">1</span>).<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
