
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Inliningspec</title>
<meta name="description" content="Documentation of Coq module Inliningspec" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      <li><details id="compcert"><summary>compcert</summary>
          <ul>
          <li><details id="compcert.backend"><summary>backend</summary>
          <ul>
          <li><a href="compcert.backend.Allocation.html">Allocation</a></li>
<li><a href="compcert.backend.Allocproof.html">Allocproof</a></li>
<li><a href="compcert.backend.Asmgenproof0.html">Asmgenproof0</a></li>
<li><a href="compcert.backend.Bounds.html">Bounds</a></li>
<li><a href="compcert.backend.CleanupLabels.html">CleanupLabels</a></li>
<li><a href="compcert.backend.CleanupLabelsproof.html">CleanupLabelsproof</a></li>
<li><a href="compcert.backend.Cminor.html">Cminor</a></li>
<li><a href="compcert.backend.CminorSel.html">CminorSel</a></li>
<li><a href="compcert.backend.Cminortyping.html">Cminortyping</a></li>
<li><a href="compcert.backend.Constprop.html">Constprop</a></li>
<li><a href="compcert.backend.Constpropproof.html">Constpropproof</a></li>
<li><a href="compcert.backend.Conventions.html">Conventions</a></li>
<li><a href="compcert.backend.CSE.html">CSE</a></li>
<li><a href="compcert.backend.CSEdomain.html">CSEdomain</a></li>
<li><a href="compcert.backend.CSEproof.html">CSEproof</a></li>
<li><a href="compcert.backend.Deadcode.html">Deadcode</a></li>
<li><a href="compcert.backend.Deadcodeproof.html">Deadcodeproof</a></li>
<li><a href="compcert.backend.Debugvar.html">Debugvar</a></li>
<li><a href="compcert.backend.Debugvarproof.html">Debugvarproof</a></li>
<li><a href="compcert.backend.Inlining.html">Inlining</a></li>
<li><a href="compcert.backend.Inliningproof.html">Inliningproof</a></li>
<li><a href="compcert.backend.Inliningspec.html">Inliningspec</a></li>
<li><a href="compcert.backend.Kildall.html">Kildall</a></li>
<li><a href="compcert.backend.Linear.html">Linear</a></li>
<li><a href="compcert.backend.Linearize.html">Linearize</a></li>
<li><a href="compcert.backend.Linearizeproof.html">Linearizeproof</a></li>
<li><a href="compcert.backend.Lineartyping.html">Lineartyping</a></li>
<li><a href="compcert.backend.Liveness.html">Liveness</a></li>
<li><a href="compcert.backend.Locations.html">Locations</a></li>
<li><a href="compcert.backend.LTL.html">LTL</a></li>
<li><a href="compcert.backend.Mach.html">Mach</a></li>
<li><a href="compcert.backend.NeedDomain.html">NeedDomain</a></li>
<li><a href="compcert.backend.Registers.html">Registers</a></li>
<li><a href="compcert.backend.Renumber.html">Renumber</a></li>
<li><a href="compcert.backend.Renumberproof.html">Renumberproof</a></li>
<li><a href="compcert.backend.RTL.html">RTL</a></li>
<li><a href="compcert.backend.RTLgen.html">RTLgen</a></li>
<li><a href="compcert.backend.RTLgenproof.html">RTLgenproof</a></li>
<li><a href="compcert.backend.RTLgenspec.html">RTLgenspec</a></li>
<li><a href="compcert.backend.RTLtyping.html">RTLtyping</a></li>
<li><a href="compcert.backend.SelectDiv.html">SelectDiv</a></li>
<li><a href="compcert.backend.SelectDivproof.html">SelectDivproof</a></li>
<li><a href="compcert.backend.Selection.html">Selection</a></li>
<li><a href="compcert.backend.Selectionproof.html">Selectionproof</a></li>
<li><a href="compcert.backend.SplitLong.html">SplitLong</a></li>
<li><a href="compcert.backend.SplitLongproof.html">SplitLongproof</a></li>
<li><a href="compcert.backend.Stacking.html">Stacking</a></li>
<li><a href="compcert.backend.Stackingproof.html">Stackingproof</a></li>
<li><a href="compcert.backend.Tailcall.html">Tailcall</a></li>
<li><a href="compcert.backend.Tailcallproof.html">Tailcallproof</a></li>
<li><a href="compcert.backend.Tunneling.html">Tunneling</a></li>
<li><a href="compcert.backend.Tunnelingproof.html">Tunnelingproof</a></li>
<li><a href="compcert.backend.Unusedglob.html">Unusedglob</a></li>
<li><a href="compcert.backend.Unusedglobproof.html">Unusedglobproof</a></li>
<li><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></li>
<li><a href="compcert.backend.ValueDomain.html">ValueDomain</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cfrontend"><summary>cfrontend</summary>
          <ul>
          <li><a href="compcert.cfrontend.Cexec.html">Cexec</a></li>
<li><a href="compcert.cfrontend.Clight.html">Clight</a></li>
<li><a href="compcert.cfrontend.ClightBigstep.html">ClightBigstep</a></li>
<li><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></li>
<li><a href="compcert.cfrontend.Cminorgenproof.html">Cminorgenproof</a></li>
<li><a href="compcert.cfrontend.Cop.html">Cop</a></li>
<li><a href="compcert.cfrontend.Csem.html">Csem</a></li>
<li><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></li>
<li><a href="compcert.cfrontend.Cshmgen.html">Cshmgen</a></li>
<li><a href="compcert.cfrontend.Cshmgenproof.html">Cshmgenproof</a></li>
<li><a href="compcert.cfrontend.Cstrategy.html">Cstrategy</a></li>
<li><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></li>
<li><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></li>
<li><a href="compcert.cfrontend.Ctyping.html">Ctyping</a></li>
<li><a href="compcert.cfrontend.Initializers.html">Initializers</a></li>
<li><a href="compcert.cfrontend.Initializersproof.html">Initializersproof</a></li>
<li><a href="compcert.cfrontend.SimplExpr.html">SimplExpr</a></li>
<li><a href="compcert.cfrontend.SimplExprproof.html">SimplExprproof</a></li>
<li><a href="compcert.cfrontend.SimplExprspec.html">SimplExprspec</a></li>
<li><a href="compcert.cfrontend.SimplLocals.html">SimplLocals</a></li>
<li><a href="compcert.cfrontend.SimplLocalsproof.html">SimplLocalsproof</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.common"><summary>common</summary>
          <ul>
          <li><a href="compcert.common.AST.html">AST</a></li>
<li><a href="compcert.common.Behaviors.html">Behaviors</a></li>
<li><a href="compcert.common.Builtins.html">Builtins</a></li>
<li><a href="compcert.common.Builtins0.html">Builtins0</a></li>
<li><a href="compcert.common.Determinism.html">Determinism</a></li>
<li><a href="compcert.common.Errors.html">Errors</a></li>
<li><a href="compcert.common.Events.html">Events</a></li>
<li><a href="compcert.common.Globalenvs.html">Globalenvs</a></li>
<li><a href="compcert.common.Linking.html">Linking</a></li>
<li><a href="compcert.common.Memdata.html">Memdata</a></li>
<li><a href="compcert.common.Memory.html">Memory</a></li>
<li><a href="compcert.common.Memtype.html">Memtype</a></li>
<li><a href="compcert.common.Separation.html">Separation</a></li>
<li><a href="compcert.common.Smallstep.html">Smallstep</a></li>
<li><a href="compcert.common.Switch.html">Switch</a></li>
<li><a href="compcert.common.Unityping.html">Unityping</a></li>
<li><a href="compcert.common.Values.html">Values</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.cparser"><summary>cparser</summary>
          <ul>
          <li><a href="compcert.cparser.Cabs.html">Cabs</a></li>
<li><a href="compcert.cparser.Parser.html">Parser</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.driver"><summary>driver</summary>
          <ul>
          <li><a href="compcert.driver.Compiler.html">Compiler</a></li>
<li><a href="compcert.driver.Complements.html">Complements</a></li>
<li><a href="compcert.driver.Compopts.html">Compopts</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.lib"><summary>lib</summary>
          <ul>
          <li><a href="compcert.lib.Axioms.html">Axioms</a></li>
<li><a href="compcert.lib.BoolEqual.html">BoolEqual</a></li>
<li><a href="compcert.lib.Coqlib.html">Coqlib</a></li>
<li><a href="compcert.lib.Decidableplus.html">Decidableplus</a></li>
<li><a href="compcert.lib.Floats.html">Floats</a></li>
<li><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></li>
<li><a href="compcert.lib.Heaps.html">Heaps</a></li>
<li><a href="compcert.lib.IEEE754_extra.html">IEEE754_extra</a></li>
<li><a href="compcert.lib.Integers.html">Integers</a></li>
<li><a href="compcert.lib.Intv.html">Intv</a></li>
<li><a href="compcert.lib.IntvSets.html">IntvSets</a></li>
<li><a href="compcert.lib.Iteration.html">Iteration</a></li>
<li><a href="compcert.lib.Lattice.html">Lattice</a></li>
<li><a href="compcert.lib.Maps.html">Maps</a></li>
<li><a href="compcert.lib.Ordered.html">Ordered</a></li>
<li><a href="compcert.lib.Parmov.html">Parmov</a></li>
<li><a href="compcert.lib.Postorder.html">Postorder</a></li>
<li><a href="compcert.lib.UnionFind.html">UnionFind</a></li>
<li><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></li>
<li><a href="compcert.lib.Zbits.html">Zbits</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86"><summary>x86</summary>
          <ul>
          <li><a href="compcert.x86.Asm.html">Asm</a></li>
<li><a href="compcert.x86.Asmgen.html">Asmgen</a></li>
<li><a href="compcert.x86.Asmgenproof.html">Asmgenproof</a></li>
<li><a href="compcert.x86.Asmgenproof1.html">Asmgenproof1</a></li>
<li><a href="compcert.x86.Builtins1.html">Builtins1</a></li>
<li><a href="compcert.x86.CombineOp.html">CombineOp</a></li>
<li><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></li>
<li><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></li>
<li><a href="compcert.x86.ConstpropOpproof.html">ConstpropOpproof</a></li>
<li><a href="compcert.x86.Conventions1.html">Conventions1</a></li>
<li><a href="compcert.x86.Machregs.html">Machregs</a></li>
<li><a href="compcert.x86.NeedOp.html">NeedOp</a></li>
<li><a href="compcert.x86.Op.html">Op</a></li>
<li><a href="compcert.x86.SelectLong.html">SelectLong</a></li>
<li><a href="compcert.x86.SelectLongproof.html">SelectLongproof</a></li>
<li><a href="compcert.x86.SelectOp.html">SelectOp</a></li>
<li><a href="compcert.x86.SelectOpproof.html">SelectOpproof</a></li>
<li><a href="compcert.x86.Stacklayout.html">Stacklayout</a></li>
<li><a href="compcert.x86.ValueAOp.html">ValueAOp</a></li>
          </ul>
          </details>
          </li>
<li><details id="compcert.x86_64"><summary>x86_64</summary>
          <ul>
          <li><a href="compcert.x86_64.Archi.html">Archi</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="Flocq"><summary>Flocq</summary>
          <ul>
          <li><details id="Flocq.Calc"><summary>Calc</summary>
          <ul>
          <li><a href="Flocq.Calc.Bracket.html">Bracket</a></li>
<li><a href="Flocq.Calc.Div.html">Div</a></li>
<li><a href="Flocq.Calc.Operations.html">Operations</a></li>
<li><a href="Flocq.Calc.Plus.html">Plus</a></li>
<li><a href="Flocq.Calc.Round.html">Round</a></li>
<li><a href="Flocq.Calc.Sqrt.html">Sqrt</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Core"><summary>Core</summary>
          <ul>
          <li><a href="Flocq.Core.Core.html">Core</a></li>
<li><a href="Flocq.Core.Defs.html">Defs</a></li>
<li><a href="Flocq.Core.Digits.html">Digits</a></li>
<li><a href="Flocq.Core.FIX.html">FIX</a></li>
<li><a href="Flocq.Core.Float_prop.html">Float_prop</a></li>
<li><a href="Flocq.Core.FLT.html">FLT</a></li>
<li><a href="Flocq.Core.FLX.html">FLX</a></li>
<li><a href="Flocq.Core.FTZ.html">FTZ</a></li>
<li><a href="Flocq.Core.Generic_fmt.html">Generic_fmt</a></li>
<li><a href="Flocq.Core.Raux.html">Raux</a></li>
<li><a href="Flocq.Core.Round_NE.html">Round_NE</a></li>
<li><a href="Flocq.Core.Round_pred.html">Round_pred</a></li>
<li><a href="Flocq.Core.Ulp.html">Ulp</a></li>
<li><a href="Flocq.Core.Zaux.html">Zaux</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.IEEE754"><summary>IEEE754</summary>
          <ul>
          <li><a href="Flocq.IEEE754.Binary.html">Binary</a></li>
<li><a href="Flocq.IEEE754.BinarySingleNaN.html">BinarySingleNaN</a></li>
<li><a href="Flocq.IEEE754.Bits.html">Bits</a></li>
          </ul>
          </details>
          </li>
<li><details id="Flocq.Prop"><summary>Prop</summary>
          <ul>
          <li><a href="Flocq.Prop.Div_sqrt_error.html">Div_sqrt_error</a></li>
<li><a href="Flocq.Prop.Double_rounding.html">Double_rounding</a></li>
<li><a href="Flocq.Prop.Mult_error.html">Mult_error</a></li>
<li><a href="Flocq.Prop.Plus_error.html">Plus_error</a></li>
<li><a href="Flocq.Prop.Relative.html">Relative</a></li>
<li><a href="Flocq.Prop.Round_odd.html">Round_odd</a></li>
<li><a href="Flocq.Prop.Sterbenz.html">Sterbenz</a></li>
          </ul>
          </details>
          </li>
          </ul>
          </details>
          </li>
<li><details id="MenhirLib"><summary>MenhirLib</summary>
          <ul>
          <li><a href="MenhirLib.Alphabet.html">Alphabet</a></li>
<li><a href="MenhirLib.Automaton.html">Automaton</a></li>
<li><a href="MenhirLib.Grammar.html">Grammar</a></li>
<li><a href="MenhirLib.Interpreter.html">Interpreter</a></li>
<li><a href="MenhirLib.Interpreter_complete.html">Interpreter_complete</a></li>
<li><a href="MenhirLib.Interpreter_correct.html">Interpreter_correct</a></li>
<li><a href="MenhirLib.Main.html">Main</a></li>
<li><a href="MenhirLib.Validator_classes.html">Validator_classes</a></li>
<li><a href="MenhirLib.Validator_complete.html">Validator_complete</a></li>
<li><a href="MenhirLib.Validator_safe.html">Validator_safe</a></li>
          </ul>
          </details>
          </li>
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module Inliningspec</h1>
<br/>
<div class="doc">RTL function inlining: relational specification </div>
<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.lib.Wfsimpl.html">Wfsimpl</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span> <span class="id"><a href="compcert.backend.Registers.html">Registers</a></span> <span class="id"><a href="compcert.backend.RTL.html">RTL</a></span>.<br/>
<span class="vernacular">Require</span> <span class="vernacular">Import</span> <span class="id"><a href="compcert.backend.Inlining.html">Inlining</a></span>.<br/>
<br/>
<h2> Soundness of function environments. </h2>
<br/>
<div class="doc">A compile-time function environment is compatible with a whole
  program if the following condition holds. </div>
<br/>
<span class="vernacular">Definition</span> <span id="fenv_compat" class="id"><a name="fenv_compat" class="">fenv_compat</a></span> (<span id="p:1" class="id"><a name="p:1" class="">p:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) (<span id="fenv:2" class="id"><a name="fenv:2" class="">fenv:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#funenv">funenv</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:3" class="id"><a name="id:3" class="">id</a></span> <span id="f:4" class="id"><a name="f:4" class="">f,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#fenv:2">fenv!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:4">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#p:1">p</a></span>)<span class="id">!id</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:4">f</a></span>)).<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="funenv_program_compat" class="id"><a name="funenv_program_compat" class="">funenv_program_compat:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="p:5" class="id"><a name="p:5" class="">p,</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv_compat">fenv_compat</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#p:5">p</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#funenv_program">funenv_program</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#p:5">p</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">P</span> <span class="id">:=</span> <span class="gallina-kwd">fun</span> (<span id="dm:10" class="id"><span id="dm:6" class="id"><a name="dm:10" class="">dm:</a></span></span> <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> (<span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>)) (<span id="fenv:11" class="id"><span id="fenv:7" class="id"><a name="fenv:11" class="">fenv:</a></span></span> <span class="id"><a href="compcert.backend.Inlining.html#funenv">funenv</a></span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:12" class="id"><span id="id:8" class="id"><a name="id:12" class="">id</a></span></span> <span id="f:13" class="id"><span id="f:9" class="id"><a name="f:13" class="">f,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#fenv:7">fenv!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:9">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#dm:6">dm!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:9">f</a></span>))).<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">REMOVE:</span> <span class="gallina-kwd">forall</span> <span id="dm:18" class="id"><span id="dm:14" class="id"><a name="dm:18" class="">dm</a></span></span> <span id="fenv:19" class="id"><span id="fenv:15" class="id"><a name="fenv:19" class="">fenv</a></span></span> <span id="id:20" class="id"><span id="id:16" class="id"><a name="id:20" class="">id</a></span></span> <span id="g:21" class="id"><span id="g:17" class="id"><a name="g:21" class="">g,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id"><a href="compcert.backend.Inliningspec.html#dm:14">dm</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv:15">fenv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#id:16">id</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#g:17">g</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#dm:14">dm</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">PTree.remove</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#id:16">id</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv:15">fenv</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">unfold</span> <span class="id">P;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">ADD:</span> <span class="gallina-kwd">forall</span> <span id="io:26" class="id"><span id="io:22" class="id"><a name="io:26" class="">io</a></span></span> <span id="dm:27" class="id"><span id="dm:23" class="id"><a name="dm:27" class="">dm</a></span></span> <span id="fenv:28" class="id"><span id="fenv:24" class="id"><a name="fenv:28" class="">fenv</a></span></span> <span id="idg:29" class="id"><span id="idg:25" class="id"><a name="idg:29" class="">idg,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id"><a href="compcert.backend.Inliningspec.html#dm:23">dm</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv:24">fenv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#idg:25">idg</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#idg:25">idg</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#dm:23">dm</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#add_globdef">add_globdef</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#io:22">io</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv:24">fenv</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#idg:25">idg</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">intros</span> <span class="id">io</span> <span class="id">dm</span> <span class="id">fenv</span> <span class="id">[id</span> <span class="id">g];</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">g</span> <span class="gallina-kwd">as</span> <span class="id">[</span> <span class="id">[f|ef]</span> <span class="id">|</span> <span class="id">v];</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inlining.html#should_inline">should_inline</a></span> <span class="id">io</span> <span class="id">id</span> <span class="id">f</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>)<span class="id">;</span> <span class="id">auto</span>. <span class="id">inv</span> <span class="id">H0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">REC:</span> <span class="gallina-kwd">forall</span> <span id="p:36" class="id"><span id="p:30" class="id"><a name="p:36" class="">p</a></span></span> <span id="l:37" class="id"><span id="l:31" class="id"><a name="l:37" class="">l</a></span></span> <span id="dm:38" class="id"><span id="dm:32" class="id"><a name="dm:38" class="">dm</a></span></span> <span id="fenv:39" class="id"><span id="fenv:33" class="id"><a name="fenv:39" class="">fenv,</a></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id"><a href="compcert.backend.Inliningspec.html#dm:32">dm</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv:33">fenv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="x:40" class="id"><span id="x:34" class="id"><a name="x:40" class="">x</a></span></span> <span id="idg:41" class="id"><span id="idg:35" class="id"><a name="idg:41" class="">idg</a></span></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#idg:35">idg</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#idg:35">idg</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#x:34">x</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:31">l</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#dm:32">dm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#add_globdef">add_globdef</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#p:30">p</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:31">l</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv:33">fenv</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">{</span> <span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span> <span class="id">apply</span> <span class="id">IHl</span>. <span class="id">apply</span> <span class="id">ADD;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">}</span><br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">REC</span>. <span class="id">red;</span> <span class="id">intros</span>.  <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="fenv_compat_linkorder" class="id"><a name="fenv_compat_linkorder" class="">fenv_compat_linkorder:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cunit:42" class="id"><a name="cunit:42" class="">cunit</a></span> <span id="prog:43" class="id"><a name="prog:43" class="">prog</a></span> <span id="fenv:44" class="id"><a name="fenv:44" class="">fenv,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#cunit:42">cunit</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#prog:43">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv_compat">fenv_compat</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#cunit:42">cunit</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv:44">fenv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv_compat">fenv_compat</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#prog:43">prog</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv:44">fenv</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">apply</span> <span class="id">H0</span> <span class="gallina-kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.common.Linking.html#prog_defmap_linkorder">prog_defmap_linkorder</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H1</span>) <span class="gallina-kwd">as</span> (<span class="id">gd'</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">Q</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Properties of shifting </h2>
<br/>
<span class="vernacular">Lemma</span> <span id="shiftpos_eq" class="id"><a name="shiftpos_eq" class="">shiftpos_eq:</a></span> <span class="gallina-kwd">forall</span> <span id="x:45" class="id"><a name="x:45" class="">x</a></span> <span id="y:46" class="id"><a name="y:46" class="">y,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:45">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#y:46">y</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:45">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#y:46">y</a></span>) <span class="id">-</span> <span class="id">1</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span>. <span class="id">zify</span>.  <span class="id">try</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Pos2Z.inj_sub">Pos2Z.inj_sub</a></span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">zify</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="shiftpos_inj" class="id"><a name="shiftpos_inj" class="">shiftpos_inj:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:47" class="id"><a name="x:47" class="">x</a></span> <span id="y:48" class="id"><a name="y:48" class="">y</a></span> <span id="n:49" class="id"><a name="n:49" class="">n,</a></span> <span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:47">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#n:49">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#y:48">y</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#n:49">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:47">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#y:48">y</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id">x</span> <span class="id">n</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id">y</span> <span class="id">n</span>)) <span class="gallina-kwd">by</span> <span class="id">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_eq">shiftpos_eq</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">x</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">y</span>) <span class="gallina-kwd">by</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="shiftpos_diff" class="id"><a name="shiftpos_diff" class="">shiftpos_diff:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:50" class="id"><a name="x:50" class="">x</a></span> <span id="y:51" class="id"><a name="y:51" class="">y</a></span> <span id="n:52" class="id"><a name="n:52" class="">n,</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:50">x</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#y:51">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:50">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#n:52">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#y:51">y</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#n:52">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">red;</span> <span class="id">intros</span>. <span class="id">elim</span> <span class="id">H</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_inj">shiftpos_inj;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="shiftpos_above" class="id"><a name="shiftpos_above" class="">shiftpos_above:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:53" class="id"><a name="x:53" class="">x</a></span> <span id="n:54" class="id"><a name="n:54" class="">n,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#n:54">n</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:53">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#n:54">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple;</a></span> <span class="id">zify</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_eq">shiftpos_eq</a></span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="shiftpos_not_below" class="id"><a name="shiftpos_not_below" class="">shiftpos_not_below:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:55" class="id"><a name="x:55" class="">x</a></span> <span id="n:56" class="id"><a name="n:56" class="">n,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:55">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#n:56">n</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#n:56">n</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_above">shiftpos_above</a></span> <span class="id">x</span> <span class="id">n</span>). <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="shiftpos_below" class="id"><a name="shiftpos_below" class="">shiftpos_below:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:57" class="id"><a name="x:57" class="">x</a></span> <span id="n:58" class="id"><a name="n:58" class="">n,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:57">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#n:58">n</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.add">Pos.add</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:57">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#n:58">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt;</a></span> <span class="id">zify</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_eq">shiftpos_eq</a></span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="shiftpos_le" class="id"><a name="shiftpos_le" class="">shiftpos_le:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="x:59" class="id"><a name="x:59" class="">x</a></span> <span id="y:60" class="id"><a name="y:60" class="">y</a></span> <span id="n:61" class="id"><a name="n:61" class="">n,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:59">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#y:60">y</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:59">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#n:61">n</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#shiftpos">shiftpos</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#y:60">y</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#n:61">n</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">zify</span>. <span class="id">rewrite</span> <span class="id">!</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_eq">shiftpos_eq</a></span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<br/>
<h2> Working with the state monad </h2>
<br/>
<span class="vernacular">Remark</span> <span id="bind_inversion" class="id"><a name="bind_inversion" class="">bind_inversion:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:62" class="id"><a name="A:62" class="">A</a></span> <span id="B:63" class="id"><a name="B:63" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:64" class="id"><a name="f:64" class="">f:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#mon">mon</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#A:62">A</a></span>) (<span id="g:65" class="id"><a name="g:65" class="">g:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#A:62">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#mon">mon</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#B:63">B</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span id="y:66" class="id"><a name="y:66" class="">y:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#B:63">B</a></span>) (<span id="s1:67" class="id"><a name="s1:67" class="">s1</a></span> <span id="s3:68" class="id"><a name="s3:68" class="">s3:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#state">state</a></span>) (<span id="i:69" class="id"><a name="i:69" class="">i:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#sincr">sincr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s1:67">s1</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s3:68">s3</a></span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#bind">bind</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:64">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#g:65">g</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s1:67">s1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#y:66">y</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s3:68">s3</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:69">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="x:70" class="id"><a name="x:70" class="">x,</a></span> <span class="gallina-kwd">exists</span> <span id="s2:71" class="id"><a name="s2:71" class="">s2,</a></span> <span class="gallina-kwd">exists</span> <span id="i1:72" class="id"><a name="i1:72" class="">i1,</a></span> <span class="gallina-kwd">exists</span> <span id="i2:73" class="id"><a name="i2:73" class="">i2,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#f:64">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s1:67">s1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:70">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s2:71">s2</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i1:72">i1</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#g:65">g</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:70">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s2:71">s2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#y:66">y</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s3:68">s3</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i2:73">i2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#bind">bind;</a></span> <span class="id">intros</span>. <span class="id">destruct</span> (<span class="id">f</span> <span class="id">s1</span>). <span class="gallina-kwd">exists</span> <span class="id">x;</span> <span class="gallina-kwd">exists</span> <span class="id">s';</span> <span class="gallina-kwd">exists</span> <span class="id">I</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">g</span> <span class="id">x</span> <span class="id">s'</span>). <span class="id">inv</span> <span class="id">H</span>. <span class="gallina-kwd">exists</span> <span class="id">I0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Ltac</span> <span class="id">monadInv1</span> <span class="id">H</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">type</span> <span class="id">of</span> <span class="id">H</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H;</span> <span class="id">clear</span> <span class="id">H;</span> <span class="id">try</span> <span class="id">subst</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id"><a href="compcert.backend.Inlining.html#ret">ret</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H;</span> <span class="id">clear</span> <span class="id">H;</span> <span class="id">try</span> <span class="id">subst</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id"><a href="compcert.backend.Inlining.html#bind">bind</a></span> <span class="id">?F</span> <span class="id">?G</span> <span class="id">?S</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">?X</span> <span class="id">?S'</span> <span class="id">?I</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span class="id">x</span> <span class="id">:=</span> <span class="id">fresh</span> <span class="id">&quot;x&quot;</span> <span class="gallina-kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span class="id">s</span> <span class="id">:=</span> <span class="id">fresh</span> <span class="id">&quot;s&quot;</span> <span class="gallina-kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span class="id">i1</span> <span class="id">:=</span> <span class="id">fresh</span> <span class="id">&quot;INCR&quot;</span> <span class="gallina-kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span class="id">i2</span> <span class="id">:=</span> <span class="id">fresh</span> <span class="id">&quot;INCR&quot;</span> <span class="gallina-kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span class="id">EQ1</span> <span class="id">:=</span> <span class="id">fresh</span> <span class="id">&quot;EQ&quot;</span> <span class="gallina-kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span> <span class="id">EQ2</span> <span class="id">:=</span> <span class="id">fresh</span> <span class="id">&quot;EQ&quot;</span> <span class="gallina-kwd">in</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inliningspec.html#bind_inversion">bind_inversion</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">F</span> <span class="id">G</span> <span class="id">X</span> <span class="id">S</span> <span class="id">S'</span> <span class="id">I</span> <span class="id">H</span>) <span class="gallina-kwd">as</span> <span class="id">[x</span> <span class="id">[s</span> <span class="id">[i1</span> <span class="id">[i2</span> <span class="id">[EQ1</span> <span class="id">EQ2]]]]];</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clear</span> <span class="id">H;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> (<span class="id">monadInv1</span> <span class="id">EQ2</span>)))))))<br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Ltac</span> <span class="id">monadInv</span> <span class="id">H</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">type</span> <span class="id">of</span> <span class="id">H</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id"><a href="compcert.backend.Inlining.html#ret">ret</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span> <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id"><a href="compcert.backend.Inlining.html#bind">bind</a></span> <span class="id">?F</span> <span class="id">?G</span> <span class="id">?S</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">?X</span> <span class="id">?S'</span> <span class="id">?I</span>) <span class="id">=&gt;</span> <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id">?F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">progress</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>) <span class="id">||</span> <span class="id">unfold</span> <span class="id">F</span> <span class="gallina-kwd">in</span> <span class="id">H</span>)<span class="id">;</span> <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id">?F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">progress</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>) <span class="id">||</span> <span class="id">unfold</span> <span class="id">F</span> <span class="gallina-kwd">in</span> <span class="id">H</span>)<span class="id">;</span> <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id">?F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">progress</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>) <span class="id">||</span> <span class="id">unfold</span> <span class="id">F</span> <span class="gallina-kwd">in</span> <span class="id">H</span>)<span class="id">;</span> <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id">?F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">progress</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>) <span class="id">||</span> <span class="id">unfold</span> <span class="id">F</span> <span class="gallina-kwd">in</span> <span class="id">H</span>)<span class="id">;</span> <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id">?F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">progress</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>) <span class="id">||</span> <span class="id">unfold</span> <span class="id">F</span> <span class="gallina-kwd">in</span> <span class="id">H</span>)<span class="id">;</span> <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id">?F</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">progress</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>) <span class="id">||</span> <span class="id">unfold</span> <span class="id">F</span> <span class="gallina-kwd">in</span> <span class="id">H</span>)<span class="id">;</span> <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id">?F</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">progress</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>) <span class="id">||</span> <span class="id">unfold</span> <span class="id">F</span> <span class="gallina-kwd">in</span> <span class="id">H</span>)<span class="id">;</span> <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id">?F</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">=&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">progress</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>) <span class="id">||</span> <span class="id">unfold</span> <span class="id">F</span> <span class="gallina-kwd">in</span> <span class="id">H</span>)<span class="id">;</span> <span class="id">monadInv1</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Fixpoint</span> <span id="mlist_iter2" class="id"><a name="mlist_iter2" class="">mlist_iter2</a></span> <span class="id">{A</span> <span id="B:75" class="id"><a name="B:75" class="">B:</a></span> <span class="id">Type}</span> (<span id="f:76" class="id"><a name="f:76" class="">f:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#A:74">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#B:75">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#mon">mon</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span id="l:77" class="id"><a name="l:77" class="">l:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#A:74">A*B</a></span>))<span class="id">:</span> <span class="id"><a href="compcert.backend.Inlining.html#mon">mon</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Inliningspec.html#l:77">l</a></span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Inlining.html#ret">ret</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> (<span class="id">x,y</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id">l'</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.backend.Inlining.html#bbeef38f67325be53cb9324ba9182131">do</a></span> <span id="z:80" class="id"><a name="z:80" class="">z</a></span> <span class="id"><a href="compcert.backend.Inlining.html#bbeef38f67325be53cb9324ba9182131">&lt;-</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:76">f</a></span> <span class="id">x</span> <span class="id">y;</span> <span class="id"><a href="compcert.backend.Inliningspec.html#mlist_iter2:78">mlist_iter2</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:76">f</a></span> <span class="id">l'</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="mlist_iter2_fold" class="id"><a name="mlist_iter2_fold" class="">mlist_iter2_fold:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:81" class="id"><a name="A:81" class="">A</a></span> <span id="B:82" class="id"><a name="B:82" class="">B:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:83" class="id"><a name="f:83" class="">f:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#A:81">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#B:82">B</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#mon">mon</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) <span id="l:84" class="id"><a name="l:84" class="">l</a></span> <span id="s:85" class="id"><a name="s:85" class="">s,</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="i:86" class="id"><a name="i:86" class="">i,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#mlist_iter2">mlist_iter2</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:83">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#l:84">l</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:85">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> (<span class="gallina-kwd">fun</span> <span id="a:87" class="id"><a name="a:87" class="">a</a></span> <span id="p:88" class="id"><a name="p:88" class="">p</a></span> <span class="id">=&gt;</span> <span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:83">f</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#p:88">p</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#p:88">p</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#a:87">a</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id">_</span> <span class="id">s2</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">s2</span> <span class="gallina-kwd">end</span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:84">l</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:85">s</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#i:86">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id"><a href="compcert.backend.Inlining.html#sincr_refl">sincr_refl</a></span> <span class="id">s</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span> <span class="gallina-kwd">as</span> <span class="id">[x</span> <span class="id">y]</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#bind">bind</a></span>. <span class="id">simpl</span>. <span class="id">destruct</span> (<span class="id">f</span> <span class="id">x</span> <span class="id">y</span> <span class="id">s</span>) <span class="gallina-kwd">as</span> <span class="id">[xx</span> <span class="id">s1</span> <span class="id">i1]</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">IHl</span> <span class="id">s1</span>) <span class="gallina-kwd">as</span> <span class="id">[i2</span> <span class="id">EQ]</span>. <span class="id">rewrite</span> <span class="id">EQ</span>. <span class="id">econstructor;</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="ptree_mfold_spec" class="id"><a name="ptree_mfold_spec" class="">ptree_mfold_spec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span id="A:89" class="id"><a name="A:89" class="">A:</a></span> <span class="gallina-kwd">Type</span>) (<span id="f:90" class="id"><a name="f:90" class="">f:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#A:89">A</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#mon">mon</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) <span id="t:91" class="id"><a name="t:91" class="">t</a></span> <span id="s:92" class="id"><a name="s:92" class="">s</a></span> <span id="x:93" class="id"><a name="x:93" class="">x</a></span> <span id="s':94" class="id"><a name="s':94" class="">s'</a></span> <span id="i:95" class="id"><a name="i:95" class="">i,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#ptree_mfold">ptree_mfold</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:90">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#t:91">t</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:92">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:93">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':94">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:95">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> <span id="i':96" class="id"><a name="i':96" class="">i',</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#mlist_iter2">mlist_iter2</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:90">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">PTree.elements</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#t:91">t</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#s:92">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':94">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i':96">i'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inliningspec.html#mlist_iter2_fold">mlist_iter2_fold</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">PTree.elements</a></span> <span class="id">t</span>) <span class="id">s</span>) <span class="gallina-kwd">as</span> <span class="id">[i'</span> <span class="id">EQ]</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#ptree_mfold">ptree_mfold</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.fold_spec">PTree.fold_spec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="id">eexact</span> <span class="id">EQ</span>.<br/>
Qed.</div>
<br/>
<h2> Relational specification of the translation of moves </h2>
<br/>
<span class="vernacular">Inductive</span> <span id="tr_moves" class="id"><a name="tr_moves" class="">tr_moves</a></span> (<span id="c:97" class="id"><a name="c:97" class="">c:</a></span> <span class="id"><a href="compcert.backend.RTL.html#code">code</a></span>) <span class="id">:</span> <span class="id"><a href="compcert.backend.RTL.html#node">node</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#node">node</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_moves_cons" class="id"><a name="tr_moves_cons" class="">tr_moves_cons:</a></span> <span class="gallina-kwd">forall</span> <span id="pc1:100" class="id"><a name="pc1:100" class="">pc1</a></span> <span id="src:101" class="id"><a name="src:101" class="">src</a></span> <span id="srcs:102" class="id"><a name="srcs:102" class="">srcs</a></span> <span id="dst:103" class="id"><a name="dst:103" class="">dst</a></span> <span id="dsts:104" class="id"><a name="dsts:104" class="">dsts</a></span> <span id="pc2:105" class="id"><a name="pc2:105" class="">pc2</a></span> <span id="pc3:106" class="id"><a name="pc3:106" class="">pc3,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_moves:98">tr_moves</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:97">c</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc1:100">pc1</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#srcs:102">srcs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#dsts:104">dsts</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc2:105">pc2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:97">c!pc2</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Iop">Iop</a></span> <span class="id"><a href="compcert.x86.Op.html#Omove">Omove</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#src:101">src</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#dst:103">dst</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc3:106">pc3</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_moves:98">tr_moves</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:97">c</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc1:100">pc1</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#src:101">src</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#srcs:102">srcs</a></span>) (<span class="id"><a href="compcert.backend.Inliningspec.html#dst:103">dst</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#::list_scope:x_'::'_x">::</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#dsts:104">dsts</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#pc3:106">pc3</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_moves_nil" class="id"><a name="tr_moves_nil" class="">tr_moves_nil:</a></span> <span class="gallina-kwd">forall</span> <span id="srcs:107" class="id"><a name="srcs:107" class="">srcs</a></span> <span id="dsts:108" class="id"><a name="dsts:108" class="">dsts</a></span> <span id="pc:109" class="id"><a name="pc:109" class="">pc,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#srcs:107">srcs</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#dsts:108">dsts</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_moves:98">tr_moves</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:97">c</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:109">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#srcs:107">srcs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#dsts:108">dsts</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:109">pc</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="add_moves_unchanged" class="id"><a name="add_moves_unchanged" class="">add_moves_unchanged:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="srcs:110" class="id"><a name="srcs:110" class="">srcs</a></span> <span id="dsts:111" class="id"><a name="dsts:111" class="">dsts</a></span> <span id="pc2:112" class="id"><a name="pc2:112" class="">pc2</a></span> <span id="s:113" class="id"><a name="s:113" class="">s</a></span> <span id="pc1:114" class="id"><a name="pc1:114" class="">pc1</a></span> <span id="s':115" class="id"><a name="s':115" class="">s'</a></span> <span id="i:116" class="id"><a name="i:116" class="">i</a></span> <span id="pc:117" class="id"><a name="pc:117" class="">pc,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#add_moves">add_moves</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#srcs:110">srcs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#dsts:111">dsts</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc2:112">pc2</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:113">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc1:114">pc1</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':115">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:116">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:117">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:113">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25">\/</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':115">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#pc:117">pc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':115">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:113">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">srcs;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">dsts;</span> <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span> <span class="id">s0</span>)<span class="id">!pc</span>. <span class="id">eapply</span> <span class="id">IHsrcs;</span> <span class="id">eauto</span>. <span class="id">monadInv</span> <span class="id">EQ;</span> <span class="id">simpl</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">EQ;</span> <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">INCR0;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="add_moves_spec" class="id"><a name="add_moves_spec" class="">add_moves_spec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="srcs:118" class="id"><a name="srcs:118" class="">srcs</a></span> <span id="dsts:119" class="id"><a name="dsts:119" class="">dsts</a></span> <span id="pc2:120" class="id"><a name="pc2:120" class="">pc2</a></span> <span id="s:121" class="id"><a name="s:121" class="">s</a></span> <span id="pc1:122" class="id"><a name="pc1:122" class="">pc1</a></span> <span id="s':123" class="id"><a name="s':123" class="">s'</a></span> <span id="i:124" class="id"><a name="i:124" class="">i</a></span> <span id="c:125" class="id"><a name="c:125" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#add_moves">add_moves</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#srcs:118">srcs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#dsts:119">dsts</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc2:120">pc2</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:121">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc1:122">pc1</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':123">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:124">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="pc:126" class="id"><a name="pc:126" class="">pc,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:121">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#pc:126">pc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:126">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':123">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:125">c!pc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':123">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_moves">tr_moves</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:125">c</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc1:122">pc1</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#srcs:118">srcs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#dsts:119">dsts</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc2:120">pc2</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">srcs;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_moves_nil">tr_moves_nil;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">dsts;</span> <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_moves_nil">tr_moves_nil;</a></span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_moves_cons">tr_moves_cons</a></span> <span class="gallina-kwd">with</span> <span class="id">x</span>. <span class="id">eapply</span> <span class="id">IHsrcs;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inversion</span> <span class="id">INCR</span>. <span class="id">apply</span> <span class="id">H0;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.backend.Inliningspec.html#add_moves_unchanged">add_moves_unchanged;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">INCR;</span> <span class="id">inversion</span> <span class="id">INCR0;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<h2> Relational specification of CFG expansion </h2>
<br/>
<span class="vernacular">Section</span> <span id="INLINING_SPEC" class="id"><a name="INLINING_SPEC" class="">INLINING_SPEC</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="INLINING_SPEC.fenv" class="id"><a name="INLINING_SPEC.fenv" class="">fenv:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#funenv">funenv</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="context_below" class="id"><a name="context_below" class="">context_below</a></span> (<span id="ctx1:128" class="id"><a name="ctx1:128" class="">ctx1</a></span> <span id="ctx2:129" class="id"><a name="ctx2:129" class="">ctx2:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#context">context</a></span>)<span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.add">Pos.add</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx1:128">ctx1</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#ctx1:128">ctx1</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id"><a href="compcert.backend.Inliningspec.html#ctx2:129">ctx2</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="context_stack_call" class="id"><a name="context_stack_call" class="">context_stack_call</a></span> (<span id="ctx1:130" class="id"><a name="ctx1:130" class="">ctx1</a></span> <span id="ctx2:131" class="id"><a name="ctx2:131" class="">ctx2:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#context">context</a></span>)<span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx1:130">ctx1</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd">/\</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx1:130">ctx1</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx1:130">ctx1</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx2:131">ctx2</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>).<br/>
<br/>
<span class="vernacular">Definition</span> <span id="context_stack_tailcall" class="id"><a name="context_stack_tailcall" class="">context_stack_tailcall</a></span> (<span id="ctx1:132" class="id"><a name="ctx1:132" class="">ctx1:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#context">context</a></span>) (<span id="f:133" class="id"><a name="f:133" class="">f:</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span>) (<span id="ctx2:134" class="id"><a name="ctx2:134" class="">ctx2:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#context">context</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx2:134">ctx2</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx1:132">ctx1</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#min_alignment">min_alignment</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:133">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>)).<br/>
<br/>
<span class="vernacular">Section</span> <span id="INLINING_SPEC.INLINING_BODY_SPEC" class="id"><a name="INLINING_SPEC.INLINING_BODY_SPEC" class="">INLINING_BODY_SPEC</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="INLINING_SPEC.INLINING_BODY_SPEC.stacksize" class="id"><a name="INLINING_SPEC.INLINING_BODY_SPEC.stacksize" class="">stacksize:</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="vernacular">Inductive</span> <span id="tr_instr" class="id"><a name="tr_instr" class="">tr_instr:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#context">context</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#node">node</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#instruction">instruction</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#code">code</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_nop" class="id"><a name="tr_nop" class="">tr_nop:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:140" class="id"><a name="ctx:140" class="">ctx</a></span> <span id="pc:141" class="id"><a name="pc:141" class="">pc</a></span> <span id="c:142" class="id"><a name="c:142" class="">c</a></span> <span id="s:143" class="id"><a name="s:143" class="">s,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:142">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:140">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:141">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Inop">Inop</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:140">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:143">s</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:140">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:141">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Inop">Inop</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:143">s</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:142">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_op" class="id"><a name="tr_op" class="">tr_op:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:144" class="id"><a name="ctx:144" class="">ctx</a></span> <span id="pc:145" class="id"><a name="pc:145" class="">pc</a></span> <span id="c:146" class="id"><a name="c:146" class="">c</a></span> <span id="op:147" class="id"><a name="op:147" class="">op</a></span> <span id="args:148" class="id"><a name="args:148" class="">args</a></span> <span id="res:149" class="id"><a name="res:149" class="">res</a></span> <span id="s:150" class="id"><a name="s:150" class="">s,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:149">res</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:144">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:146">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:144">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:145">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Iop">Iop</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sop">sop</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:144">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#op:147">op</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:144">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:148">args</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:144">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:149">res</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:144">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:150">s</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:144">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:145">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Iop">Iop</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#op:147">op</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:148">args</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:149">res</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:150">s</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:146">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_load" class="id"><a name="tr_load" class="">tr_load:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:151" class="id"><a name="ctx:151" class="">ctx</a></span> <span id="pc:152" class="id"><a name="pc:152" class="">pc</a></span> <span id="c:153" class="id"><a name="c:153" class="">c</a></span> <span id="chunk:154" class="id"><a name="chunk:154" class="">chunk</a></span> <span id="addr:155" class="id"><a name="addr:155" class="">addr</a></span> <span id="args:156" class="id"><a name="args:156" class="">args</a></span> <span id="res:157" class="id"><a name="res:157" class="">res</a></span> <span id="s:158" class="id"><a name="s:158" class="">s,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:157">res</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:151">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:153">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:151">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:152">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Iload">Iload</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#chunk:154">chunk</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#saddr">saddr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:151">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#addr:155">addr</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:151">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:156">args</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:151">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:157">res</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:151">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:158">s</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:151">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:152">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Iload">Iload</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#chunk:154">chunk</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#addr:155">addr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:156">args</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:157">res</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:158">s</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:153">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_store" class="id"><a name="tr_store" class="">tr_store:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:159" class="id"><a name="ctx:159" class="">ctx</a></span> <span id="pc:160" class="id"><a name="pc:160" class="">pc</a></span> <span id="c:161" class="id"><a name="c:161" class="">c</a></span> <span id="chunk:162" class="id"><a name="chunk:162" class="">chunk</a></span> <span id="addr:163" class="id"><a name="addr:163" class="">addr</a></span> <span id="args:164" class="id"><a name="args:164" class="">args</a></span> <span id="src:165" class="id"><a name="src:165" class="">src</a></span> <span id="s:166" class="id"><a name="s:166" class="">s,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:161">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:159">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:160">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Istore">Istore</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#chunk:162">chunk</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#saddr">saddr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:159">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#addr:163">addr</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:159">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:164">args</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:159">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#src:165">src</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:159">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:166">s</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:159">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:160">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Istore">Istore</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#chunk:162">chunk</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#addr:163">addr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:164">args</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#src:165">src</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:166">s</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:161">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_call" class="id"><a name="tr_call" class="">tr_call:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:167" class="id"><a name="ctx:167" class="">ctx</a></span> <span id="pc:168" class="id"><a name="pc:168" class="">pc</a></span> <span id="c:169" class="id"><a name="c:169" class="">c</a></span> <span id="sg:170" class="id"><a name="sg:170" class="">sg</a></span> <span id="ros:171" class="id"><a name="ros:171" class="">ros</a></span> <span id="args:172" class="id"><a name="args:172" class="">args</a></span> <span id="res:173" class="id"><a name="res:173" class="">res</a></span> <span id="s:174" class="id"><a name="s:174" class="">s,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:173">res</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:167">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:169">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:167">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:168">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Icall">Icall</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#sg:170">sg</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sros">sros</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:167">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ros:171">ros</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:167">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:172">args</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:167">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:173">res</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:167">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:174">s</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:167">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:168">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Icall">Icall</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#sg:170">sg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ros:171">ros</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:172">args</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:173">res</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:174">s</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:169">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_call_inlined" class="id"><a name="tr_call_inlined" class="">tr_call_inlined:forall</a></span> <span id="ctx:175" class="id"><a name="ctx:175" class="">ctx</a></span> <span id="pc:176" class="id"><a name="pc:176" class="">pc</a></span> <span id="sg:177" class="id"><a name="sg:177" class="">sg</a></span> <span id="id:178" class="id"><a name="id:178" class="">id</a></span> <span id="args:179" class="id"><a name="args:179" class="">args</a></span> <span id="res:180" class="id"><a name="res:180" class="">res</a></span> <span id="s:181" class="id"><a name="s:181" class="">s</a></span> <span id="c:182" class="id"><a name="c:182" class="">c</a></span> <span id="f:183" class="id"><a name="f:183" class="">f</a></span> <span id="pc1:184" class="id"><a name="pc1:184" class="">pc1</a></span> <span id="ctx':185" class="id"><a name="ctx':185" class="">ctx',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:180">res</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:175">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.fenv">fenv!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:183">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:182">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:175">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:176">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Inop">Inop</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc1:184">pc1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_moves">tr_moves</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:182">c</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc1:184">pc1</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:175">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:179">args</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx':185">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:183">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span>)) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx':185">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:183">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody:137">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx':185">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:183">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:182">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx':185">ctx'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:175">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:181">s,</a></span> <span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:175">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:180">res</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#context_below">context_below</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:175">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx':185">ctx'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#context_stack_call">context_stack_call</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:175">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx':185">ctx'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:175">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:176">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Icall">Icall</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#sg:177">sg</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id">_</span> <span class="id"><a href="compcert.backend.Inliningspec.html#id:178">id</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#args:179">args</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:180">res</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:181">s</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:182">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_tailcall" class="id"><a name="tr_tailcall" class="">tr_tailcall:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:186" class="id"><a name="ctx:186" class="">ctx</a></span> <span id="pc:187" class="id"><a name="pc:187" class="">pc</a></span> <span id="c:188" class="id"><a name="c:188" class="">c</a></span> <span id="sg:189" class="id"><a name="sg:189" class="">sg</a></span> <span id="ros:190" class="id"><a name="ros:190" class="">ros</a></span> <span id="args:191" class="id"><a name="args:191" class="">args,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:188">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:186">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:187">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Itailcall">Itailcall</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#sg:189">sg</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sros">sros</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:186">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ros:190">ros</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:186">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:191">args</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:186">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:186">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:187">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Itailcall">Itailcall</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#sg:189">sg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ros:190">ros</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:191">args</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:188">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_tailcall_call" class="id"><a name="tr_tailcall_call" class="">tr_tailcall_call:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:192" class="id"><a name="ctx:192" class="">ctx</a></span> <span id="pc:193" class="id"><a name="pc:193" class="">pc</a></span> <span id="c:194" class="id"><a name="c:194" class="">c</a></span> <span id="sg:195" class="id"><a name="sg:195" class="">sg</a></span> <span id="ros:196" class="id"><a name="ros:196" class="">ros</a></span> <span id="args:197" class="id"><a name="args:197" class="">args</a></span> <span id="res:198" class="id"><a name="res:198" class="">res</a></span> <span id="s:199" class="id"><a name="s:199" class="">s,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:194">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:192">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:193">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Icall">Icall</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#sg:195">sg</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sros">sros</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:192">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ros:196">ros</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:192">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:197">args</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#res:198">res</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:199">s</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:192">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Inliningspec.html#s:199">s,</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:198">res</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:192">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:193">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Itailcall">Itailcall</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#sg:195">sg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ros:196">ros</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:197">args</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:194">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_tailcall_inlined" class="id"><a name="tr_tailcall_inlined" class="">tr_tailcall_inlined:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:200" class="id"><a name="ctx:200" class="">ctx</a></span> <span id="pc:201" class="id"><a name="pc:201" class="">pc</a></span> <span id="sg:202" class="id"><a name="sg:202" class="">sg</a></span> <span id="id:203" class="id"><a name="id:203" class="">id</a></span> <span id="args:204" class="id"><a name="args:204" class="">args</a></span> <span id="c:205" class="id"><a name="c:205" class="">c</a></span> <span id="f:206" class="id"><a name="f:206" class="">f</a></span> <span id="pc1:207" class="id"><a name="pc1:207" class="">pc1</a></span> <span id="ctx':208" class="id"><a name="ctx':208" class="">ctx',</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.fenv">fenv!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:206">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:205">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:200">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:201">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.RTL.html#Inop">Inop</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc1:207">pc1</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_moves">tr_moves</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:205">c</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc1:207">pc1</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:200">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:204">args</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx':208">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:206">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span>)) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx':208">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:206">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody:137">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx':208">ctx'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:206">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:205">c</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx':208">ctx'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:200">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#context_below">context_below</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:200">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx':208">ctx'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#context_stack_tailcall">context_stack_tailcall</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:200">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:206">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx':208">ctx'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:200">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:201">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Itailcall">Itailcall</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#sg:202">sg</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id">_</span> <span class="id"><a href="compcert.backend.Inliningspec.html#id:203">id</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#args:204">args</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:205">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_builtin" class="id"><a name="tr_builtin" class="">tr_builtin:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:209" class="id"><a name="ctx:209" class="">ctx</a></span> <span id="pc:210" class="id"><a name="pc:210" class="">pc</a></span> <span id="c:211" class="id"><a name="c:211" class="">c</a></span> <span id="ef:212" class="id"><a name="ef:212" class="">ef</a></span> <span id="args:213" class="id"><a name="args:213" class="">args</a></span> <span id="res:214" class="id"><a name="res:214" class="">res</a></span> <span id="s:215" class="id"><a name="s:215" class="">s,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:214">res</a></span> <span class="gallina-kwd">with</span> <span class="id"><a href="compcert.common.AST.html#BR">BR</a></span> <span class="id">r</span> <span class="id">=&gt;</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id">r</span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:209">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> <span class="gallina-kwd">end</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:211">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:209">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:210">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Ibuiltin">Ibuiltin</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ef:212">ef</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sbuiltinarg">sbuiltinarg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:209">ctx</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#args:213">args</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#sbuiltinres">sbuiltinres</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:209">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:214">res</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:209">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:215">s</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:209">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:210">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Ibuiltin">Ibuiltin</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ef:212">ef</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:213">args</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#res:214">res</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:215">s</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:211">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_cond" class="id"><a name="tr_cond" class="">tr_cond:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:217" class="id"><a name="ctx:217" class="">ctx</a></span> <span id="pc:218" class="id"><a name="pc:218" class="">pc</a></span> <span id="cond:219" class="id"><a name="cond:219" class="">cond</a></span> <span id="args:220" class="id"><a name="args:220" class="">args</a></span> <span id="s1:221" class="id"><a name="s1:221" class="">s1</a></span> <span id="s2:222" class="id"><a name="s2:222" class="">s2</a></span> <span id="c:223" class="id"><a name="c:223" class="">c,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:223">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:217">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:218">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Icond">Icond</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#cond:219">cond</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:217">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:220">args</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:217">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s1:221">s1</a></span>) (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:217">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s2:222">s2</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:217">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:218">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Icond">Icond</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#cond:219">cond</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#args:220">args</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s1:221">s1</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s2:222">s2</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:223">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_jumptable" class="id"><a name="tr_jumptable" class="">tr_jumptable:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:224" class="id"><a name="ctx:224" class="">ctx</a></span> <span id="pc:225" class="id"><a name="pc:225" class="">pc</a></span> <span id="r:226" class="id"><a name="r:226" class="">r</a></span> <span id="tbl:227" class="id"><a name="tbl:227" class="">tbl</a></span> <span id="c:228" class="id"><a name="c:228" class="">c,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:228">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:224">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:225">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Ijumptable">Ijumptable</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:224">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#r:226">r</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:224">ctx</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#tbl:227">tbl</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:224">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:225">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Ijumptable">Ijumptable</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#r:226">r</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#tbl:227">tbl</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:228">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_return" class="id"><a name="tr_return" class="">tr_return:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:229" class="id"><a name="ctx:229" class="">ctx</a></span> <span id="pc:230" class="id"><a name="pc:230" class="">pc</a></span> <span id="or:231" class="id"><a name="or:231" class="">or</a></span> <span id="c:232" class="id"><a name="c:232" class="">c,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:232">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:229">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:230">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Ireturn">Ireturn</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#sreg">sreg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:229">ctx</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#or:231">or</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:229">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:229">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:230">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Ireturn">Ireturn</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#or:231">or</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:232">c</a></span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_return_inlined" class="id"><a name="tr_return_inlined" class="">tr_return_inlined:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:233" class="id"><a name="ctx:233" class="">ctx</a></span> <span id="pc:234" class="id"><a name="pc:234" class="">pc</a></span> <span id="or:235" class="id"><a name="or:235" class="">or</a></span> <span id="c:236" class="id"><a name="c:236" class="">c</a></span> <span id="rinfo:237" class="id"><a name="rinfo:237" class="">rinfo,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:236">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:233">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:234">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#inline_return">inline_return</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:233">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#or:235">or</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#rinfo:237">rinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:233">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#rinfo:237">rinfo</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:233">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:234">pc</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Ireturn">Ireturn</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#or:235">or</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#c:236">c</a></span><br/>
<br/>
<span class="gallina-kwd">with</span> <span id="tr_funbody" class="id"><a name="tr_funbody" class="">tr_funbody:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#context">context</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#code">code</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_funbody_intro" class="id"><a name="tr_funbody_intro" class="">tr_funbody_intro:</a></span> <span class="gallina-kwd">forall</span> <span id="ctx:238" class="id"><a name="ctx:238" class="">ctx</a></span> <span id="f:239" class="id"><a name="f:239" class="">f</a></span> <span id="c:240" class="id"><a name="c:240" class="">c,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r:241" class="id"><a name="r:241" class="">r,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#r:241">r</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:239">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#r:241">r</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:238">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="pc:242" class="id"><a name="pc:242" class="">pc</a></span> <span id="i:243" class="id"><a name="i:243" class="">i,</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:239">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:243">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr:136">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:238">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:242">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:243">i</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:240">c</a></span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:238">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:239">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Inlining.html#min_alignment">min_alignment</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:239">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:238">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:238">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:238">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:238">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.stacksize">stacksize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody:137">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:238">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:239">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:240">c</a></span>.<br/>
<br/>
<span class="vernacular">Definition</span> <span id="fenv_agree" class="id"><a name="fenv_agree" class="">fenv_agree</a></span> (<span id="fe:244" class="id"><a name="fe:244" class="">fe:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#funenv">funenv</a></span>) <span class="id">:</span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="id:245" class="id"><a name="id:245" class="">id</a></span> <span id="f:246" class="id"><a name="f:246" class="">f,</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fe:244">fe!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:246">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.fenv">fenv!id</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:246">f</a></span>.<br/>
<br/>
<span class="vernacular">Section</span> <span id="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR" class="id"><a name="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR" class="">EXPAND_INSTR</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe" class="id"><a name="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe" class="">fe:</a></span> <span class="id"><a href="compcert.backend.Inlining.html#funenv">funenv</a></span>.<br/>
<span class="vernacular">Hypothesis</span> <span id="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.FE" class="id"><a name="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.FE" class="">FE:</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv_agree">fenv_agree</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span>.<br/>
<br/>
<span class="vernacular">Variable</span> <span id="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec" class="id"><a name="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec" class="">rec:</a></span> <span class="gallina-kwd">forall</span> <span id="fe':249" class="id"><a name="fe':249" class="">fe',</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#size_fenv">size_fenv</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fe':249">fe'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#size_fenv">size_fenv</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span>)%<span class="id">nat</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#context">context</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#mon">mon</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span> <span id="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec_unchanged" class="id"><a name="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec_unchanged" class="">rec_unchanged:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fe':251" class="id"><a name="fe':251" class="">fe'</a></span> (<span id="L:252" class="id"><a name="L:252" class="">L:</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#size_fenv">size_fenv</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fe':251">fe'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#size_fenv">size_fenv</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span>)%<span class="id">nat</span>) <span id="ctx:253" class="id"><a name="ctx:253" class="">ctx</a></span> <span id="f:254" class="id"><a name="f:254" class="">f</a></span> <span id="s:255" class="id"><a name="s:255" class="">s</a></span> <span id="x:256" class="id"><a name="x:256" class="">x</a></span> <span id="s':257" class="id"><a name="s':257" class="">s'</a></span> <span id="i:258" class="id"><a name="i:258" class="">i</a></span> <span id="pc:259" class="id"><a name="pc:259" class="">pc,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec">rec</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fe':251">fe'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#L:252">L</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:253">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:254">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:255">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:256">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':257">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:258">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:253">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#s:255">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:259">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:253">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':257">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:255">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="set_instr_other" class="id"><a name="set_instr_other" class="">set_instr_other:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="pc:261" class="id"><a name="pc:261" class="">pc</a></span> <span id="instr:262" class="id"><a name="instr:262" class="">instr</a></span> <span id="s:263" class="id"><a name="s:263" class="">s</a></span> <span id="x:264" class="id"><a name="x:264" class="">x</a></span> <span id="s':265" class="id"><a name="s':265" class="">s'</a></span> <span id="i:266" class="id"><a name="i:266" class="">i</a></span> <span id="pc':267" class="id"><a name="pc':267" class="">pc',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#set_instr">set_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:261">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:262">instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:263">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:264">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':265">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:266">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#pc':267">pc'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:261">pc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':265">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:263">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">monadInv</span> <span class="id">H;</span> <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Remark</span> <span id="set_instr_same" class="id"><a name="set_instr_same" class="">set_instr_same:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="pc:268" class="id"><a name="pc:268" class="">pc</a></span> <span id="instr:269" class="id"><a name="instr:269" class="">instr</a></span> <span id="s:270" class="id"><a name="s:270" class="">s</a></span> <span id="x:271" class="id"><a name="x:271" class="">x</a></span> <span id="s':272" class="id"><a name="s':272" class="">s'</a></span> <span id="i:273" class="id"><a name="i:273" class="">i</a></span> <span id="c:274" class="id"><a name="c:274" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#set_instr">set_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:268">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:269">instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:270">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:271">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':272">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:273">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:274">c!</a></span>(<span class="id"><a href="compcert.backend.Inliningspec.html#pc:268">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':272">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:274">c!</a></span>(<span class="id"><a href="compcert.backend.Inliningspec.html#pc:268">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:269">instr</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">H0</span>. <span class="id">monadInv</span> <span class="id">H;</span> <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="expand_instr_unchanged" class="id"><a name="expand_instr_unchanged" class="">expand_instr_unchanged:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ctx:275" class="id"><a name="ctx:275" class="">ctx</a></span> <span id="pc:276" class="id"><a name="pc:276" class="">pc</a></span> <span id="instr:277" class="id"><a name="instr:277" class="">instr</a></span> <span id="s:278" class="id"><a name="s:278" class="">s</a></span> <span id="x:279" class="id"><a name="x:279" class="">x</a></span> <span id="s':280" class="id"><a name="s':280" class="">s'</a></span> <span id="i:281" class="id"><a name="i:281" class="">i</a></span> <span id="pc':282" class="id"><a name="pc':282" class="">pc',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#expand_instr">expand_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec">rec</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:275">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:276">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:277">instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:278">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:279">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':280">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:281">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:275">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#s:278">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc':282">pc'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:278">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#pc':282">pc'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x">&lt;&gt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:275">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:276">pc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':280">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:278">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id"><a href="compcert.backend.Inliningspec.html#set_instr_other">set_instr_other;</a></span> <span class="id">intros</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#expand_instr">expand_instr</a></span> <span class="gallina-kwd">in</span> <span class="id">H;</span> <span class="id">destruct</span> <span class="id">instr;</span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inlining.html#can_inline">can_inline</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span> <span class="id">s1</span>). <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#inline_function">inline_function</a></span> <span class="gallina-kwd">in</span> <span class="id">EQ</span>. <span class="id">monadInv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id">s2</span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>). <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id">s5</span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#add_moves_unchanged">add_moves_unchanged;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">inversion</span> <span class="id">INCR5</span>. <span class="id">inversion</span> <span class="id">INCR3</span>. <span class="id">monadInv</span> <span class="id">EQ1;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id">s4</span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec_unchanged">rec_unchanged;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">monadInv</span> <span class="id">EQ;</span> <span class="id">simpl</span>. <span class="id">monadInv</span> <span class="id">EQ1;</span> <span class="id">simpl</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">monadInv</span> <span class="id">EQ1;</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">EQ;</span> <span class="id">simpl</span>. <span class="id">monadInv</span> <span class="id">EQ1;</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;tailcall&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inlining.html#can_inline">can_inline</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span> <span class="id">s1</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span> <span class="id">ctx</span>) <span class="gallina-kwd">as</span> <span class="id">[[rpc</span> <span class="id">rreg]|];</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#inline_tail_function">inline_tail_function</a></span> <span class="gallina-kwd">in</span> <span class="id">EQ</span>. <span class="id">monadInv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id">s2</span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>). <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id">s5</span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#add_moves_unchanged">add_moves_unchanged;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">inversion</span> <span class="id">INCR5</span>. <span class="id">inversion</span> <span class="id">INCR3</span>. <span class="id">monadInv</span> <span class="id">EQ1;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id">s4</span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec_unchanged">rec_unchanged;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">monadInv</span> <span class="id">EQ;</span> <span class="id">simpl</span>. <span class="id">monadInv</span> <span class="id">EQ1;</span> <span class="id">simpl</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">monadInv</span> <span class="id">EQ1;</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">EQ;</span> <span class="id">simpl</span>. <span class="id">monadInv</span> <span class="id">EQ1;</span> <span class="id">simpl</span>. <span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span> <span class="id">ctx</span>) <span class="gallina-kwd">as</span> <span class="id">[[rpc</span> <span class="id">rreg]|];</span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iter_expand_instr_unchanged" class="id"><a name="iter_expand_instr_unchanged" class="">iter_expand_instr_unchanged:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ctx:283" class="id"><a name="ctx:283" class="">ctx</a></span> <span id="pc:284" class="id"><a name="pc:284" class="">pc</a></span> <span id="l:285" class="id"><a name="l:285" class="">l</a></span> <span id="s:286" class="id"><a name="s:286" class="">s</a></span> <span id="x:287" class="id"><a name="x:287" class="">x</a></span> <span id="s':288" class="id"><a name="s':288" class="">s'</a></span> <span id="i:289" class="id"><a name="i:289" class="">i,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#mlist_iter2">mlist_iter2</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#expand_instr">expand_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec">rec</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:283">ctx</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:285">l</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:286">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:287">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':288">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:289">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:283">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#s:286">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:284">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:286">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181">~In</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:284">pc</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:283">ctx</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:285">l</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:285">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':288">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:286">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span> <span class="gallina-kwd">as</span> <span class="id">[pc1</span> <span class="id">instr1];</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> ((<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span> <span class="id">s0</span>)<span class="id">!pc</span>).<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">IHl;</span> <span class="id">eauto</span>. <span class="id">destruct</span> <span class="id">INCR;</span> <span class="id">extlia</span>. <span class="id">destruct</span> <span class="id">INCR;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#expand_instr_unchanged">expand_instr_unchanged;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="expand_cfg_rec_unchanged" class="id"><a name="expand_cfg_rec_unchanged" class="">expand_cfg_rec_unchanged:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ctx:290" class="id"><a name="ctx:290" class="">ctx</a></span> <span id="f:291" class="id"><a name="f:291" class="">f</a></span> <span id="s:292" class="id"><a name="s:292" class="">s</a></span> <span id="x:293" class="id"><a name="x:293" class="">x</a></span> <span id="s':294" class="id"><a name="s':294" class="">s'</a></span> <span id="i:295" class="id"><a name="i:295" class="">i</a></span> <span id="pc:296" class="id"><a name="pc:296" class="">pc,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#expand_cfg_rec">expand_cfg_rec</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec">rec</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:290">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:291">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:292">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:293">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':294">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:295">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:290">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#s:292">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:296">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:290">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':294">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:292">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#expand_cfg_rec">expand_cfg_rec</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">inversion</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> ((<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span> <span class="id">s0</span>)<span class="id">!pc</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningspec.html#ptree_mfold_spec">ptree_mfold_spec;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[INCR'</span> <span class="id">ITER]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#iter_expand_instr_unchanged">iter_expand_instr_unchanged;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">s0;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">s0;</span> <span class="id">simpl</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[pc1</span> <span class="id">[A</span> <span class="id">B]]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">pc</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="gallina-kwd">in</span> <span class="id">H1</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_not_below">shiftpos_not_below;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_keys_norepet">PTree.elements_keys_norepet</a></span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">s0;</span> <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Hypothesis</span> <span id="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec_spec" class="id"><a name="INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec_spec" class="">rec_spec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fe':297" class="id"><a name="fe':297" class="">fe'</a></span> (<span id="L:298" class="id"><a name="L:298" class="">L:</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#size_fenv">size_fenv</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fe':297">fe'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x">&lt;</a></span> <span class="id"><a href="compcert.backend.Inlining.html#size_fenv">size_fenv</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span>)%<span class="id">nat</span>) <span id="ctx:299" class="id"><a name="ctx:299" class="">ctx</a></span> <span id="f:300" class="id"><a name="f:300" class="">f</a></span> <span id="s:301" class="id"><a name="s:301" class="">s</a></span> <span id="x:302" class="id"><a name="x:302" class="">x</a></span> <span id="s':303" class="id"><a name="s':303" class="">s'</a></span> <span id="i:304" class="id"><a name="i:304" class="">i</a></span> <span id="c:305" class="id"><a name="c:305" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec">rec</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fe':297">fe'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#L:298">L</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:299">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:300">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:301">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:302">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':303">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:304">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#fenv_agree">fenv_agree</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fe':297">fe'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:299">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#50efadf7a9f9d41adb2b162cbba3bda7">+</a></span> <span class="id"><a href="compcert.backend.RTL.html#max_pc_function">max_pc_function</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:300">f</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#s:301">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:299">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.RTL.html#max_reg_function">max_reg_function</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:300">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.add">Pos.add</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:299">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:299">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id"><a href="compcert.backend.Inliningspec.html#s:301">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextreg">st_nextreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:299">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:299">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:300">f</a></span>) <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Inlining.html#min_alignment">min_alignment</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:300">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:299">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:299">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':303">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_stksize">st_stksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.stacksize">stacksize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="pc:306" class="id"><a name="pc:306" class="">pc,</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:299">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#pc:306">pc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:306">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':303">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:305">c!pc</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':303">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:299">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:300">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:305">c</a></span>.<br/>
<br/>
<span class="vernacular">Remark</span> <span id="min_alignment_pos" class="id"><a name="min_alignment_pos" class="">min_alignment_pos:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="sz:308" class="id"><a name="sz:308" class="">sz,</a></span> <span class="id"><a href="compcert.backend.Inlining.html#min_alignment">min_alignment</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#sz:308">sz</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#::Z_scope:x_'&gt;'_x">&gt;</a></span> <span class="id">0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#min_alignment">min_alignment</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">1</span>). <span class="id">lia</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">2</span>). <span class="id">lia</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id">4</span>)<span class="id">;</span> <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Ltac</span> <span class="id">inv_incr</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span> <span class="id">goal</span> <span class="gallina-kwd">with</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">[</span> <span class="id">H:</span> <span class="id"><a href="compcert.backend.Inlining.html#sincr">sincr</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">|-</span> <span class="id">_</span> <span class="id">]</span> <span class="id">=&gt;</span> <span class="id">destruct</span> <span class="id">H;</span> <span class="id">inv_incr</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span class="id">_</span> <span class="id">=&gt;</span> <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="expand_instr_spec" class="id"><a name="expand_instr_spec" class="">expand_instr_spec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ctx:309" class="id"><a name="ctx:309" class="">ctx</a></span> <span id="pc:310" class="id"><a name="pc:310" class="">pc</a></span> <span id="instr:311" class="id"><a name="instr:311" class="">instr</a></span> <span id="s:312" class="id"><a name="s:312" class="">s</a></span> <span id="x:313" class="id"><a name="x:313" class="">x</a></span> <span id="s':314" class="id"><a name="s':314" class="">s'</a></span> <span id="i:315" class="id"><a name="i:315" class="">i</a></span> <span id="c:316" class="id"><a name="c:316" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#expand_instr">expand_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec">rec</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:309">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:310">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:311">instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:312">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:313">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':314">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:315">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="r:317" class="id"><a name="r:317" class="">r,</a></span> <span class="id"><a href="compcert.backend.RTL.html#instr_defs">instr_defs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:311">instr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#r:317">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#r:317">r</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:309">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:309">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:310">pc</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#s:312">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:309">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#50efadf7a9f9d41adb2b162cbba3bda7">+</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:309">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id"><a href="compcert.backend.Inliningspec.html#s:312">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextreg">st_nextreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:309">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:309">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':314">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_stksize">st_stksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.stacksize">stacksize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="pc':318" class="id"><a name="pc':318" class="">pc',</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:312">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#pc':318">pc'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc':318">pc'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':314">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:316">c!pc'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':314">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#c:316">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:309">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:310">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':314">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!</span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:309">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:310">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:309">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:310">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:311">instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:316">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">until</span> <span class="id">c;</span> <span class="id">intros</span> <span class="id">EXP</span> <span class="id">DEFS</span> <span class="id">OPC</span> <span class="id">OREG</span> <span class="id">STK1</span> <span class="id">STK2</span> <span class="id">STK3</span> <span class="id">S1</span> <span class="id">S2</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id"><a href="compcert.backend.Inliningspec.html#set_instr_same">set_instr_same;</a></span> <span class="id">intros</span> <span class="id">BASE</span>.<br/>
&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#expand_instr">expand_instr</a></span> <span class="gallina-kwd">in</span> <span class="id">EXP;</span> <span class="id">destruct</span> <span class="id">instr;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">DEFS;</span><br/>
&nbsp;&nbsp;<span class="id">try</span> (<span class="id">econstructor;</span> <span class="id">eauto;</span> <span class="id">fail</span>).<br/>
<span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inlining.html#can_inline">can_inline</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span> <span class="id">s1</span>) <span class="gallina-kwd">as</span> <span class="id">[|id</span> <span class="id">f</span> <span class="id">P</span> <span class="id">Q]</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;not&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_call">tr_call;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">s1</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">EXP</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#inline_function">inline_function</a></span> <span class="gallina-kwd">in</span> <span class="id">EQ;</span> <span class="id">monadInv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">ctx'</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Inlining.html#callcontext">callcontext</a></span> <span class="id">ctx</span> <span class="id">x1</span> <span class="id">x2</span> (<span class="id"><a href="compcert.backend.RTL.html#max_reg_function">max_reg_function</a></span> <span class="id">f</span>) (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f</span>) <span class="id">n</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">EQ0;</span> <span class="id">inversion</span> <span class="id">EQ1;</span> <span class="id">inversion</span> <span class="id">EQ</span>. <span class="id">inv_incr</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_call_inlined">tr_call_inlined</a></span> <span class="gallina-kwd">with</span> (<span class="id">pc1</span> <span class="id">:=</span> <span class="id">x0</span>) (<span class="id">ctx'</span> <span class="id">:=</span> <span class="id">ctx'</span>) (<span class="id">f</span> <span class="id">:=</span> <span class="id">f</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">BASE;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#add_moves_spec">add_moves_spec;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">S1</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#set_instr_other">set_instr_other;</a></span> <span class="id">eauto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#node">node;</a></span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">extlia</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec_spec">rec_spec;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">id0</span> <span class="id">id</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">subst</span> <span class="id">s2;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">subst</span> <span class="id">s3;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_divides">align_divides</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#min_alignment_pos">min_alignment_pos</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a">+</a></span> <span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span> <span class="id">ctx</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx'</span>). <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_le">align_le</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#min_alignment_pos">min_alignment_pos</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id">S1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id">s1</span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc0</span>). <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#set_instr_other">set_instr_other;</a></span> <span class="id">eauto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#node">node</a></span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#add_moves_unchanged">add_moves_unchanged;</a></span> <span class="id">eauto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#node">node</a></span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">extlia</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl</span>. <span class="id">subst</span> <span class="id">s2;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl</span>. <span class="id">split</span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_le">align_le</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#min_alignment_pos">min_alignment_pos</a></span>.<br/>
<span class="comment">(*&nbsp;tailcall&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inlining.html#can_inline">can_inline</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span> <span class="id">s1</span>) <span class="gallina-kwd">as</span> <span class="id">[|id</span> <span class="id">f</span> <span class="id">P</span> <span class="id">Q]</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;not&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span> <span class="id">ctx</span>) <span class="gallina-kwd">as</span> <span class="id">[[rpc</span> <span class="id">rreg]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;turned&nbsp;into&nbsp;a&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_tailcall_call">tr_tailcall_call;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;preserved&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_tailcall">tr_tailcall;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">s1</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">EXP</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#inline_function">inline_function</a></span> <span class="gallina-kwd">in</span> <span class="id">EQ;</span> <span class="id">monadInv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">ctx'</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Inlining.html#tailcontext">tailcontext</a></span> <span class="id">ctx</span> <span class="id">x1</span> <span class="id">x2</span> (<span class="id"><a href="compcert.backend.RTL.html#max_reg_function">max_reg_function</a></span> <span class="id">f</span>) (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f</span>)) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">EQ0;</span> <span class="id">inversion</span> <span class="id">EQ1;</span> <span class="id">inversion</span> <span class="id">EQ</span>. <span class="id">inv_incr</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_tailcall_inlined">tr_tailcall_inlined</a></span> <span class="gallina-kwd">with</span> (<span class="id">pc1</span> <span class="id">:=</span> <span class="id">x0</span>) (<span class="id">ctx'</span> <span class="id">:=</span> <span class="id">ctx'</span>) (<span class="id">f</span> <span class="id">:=</span> <span class="id">f</span>)<span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">BASE;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#add_moves_spec">add_moves_spec;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">S1</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#set_instr_other">set_instr_other;</a></span> <span class="id">eauto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#node">node;</a></span> <span class="id">extlia</span>. <span class="id">extlia</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec_spec">rec_spec;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">id0</span> <span class="id">id</span>)<span class="id">;</span> <span class="id">try</span> <span class="id">discriminate</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">subst</span> <span class="id">s3;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">subst</span> <span class="id">s2;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">subst</span> <span class="id">s3;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_divides">align_divides</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#min_alignment_pos">min_alignment_pos</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span> <span class="id">ctx'</span>). <span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_le">align_le</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#min_alignment_pos">min_alignment_pos</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id">S1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id">s1</span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>))<span class="id">!pc0</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#set_instr_other">set_instr_other;</a></span> <span class="id">eauto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#node">node</a></span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#add_moves_unchanged">add_moves_unchanged;</a></span> <span class="id">eauto</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#node">node</a></span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">extlia</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">simpl</span>.<br/>
<span class="id">subst</span> <span class="id">s2;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">red;</span> <span class="id">auto</span>.<br/>
<span class="comment">(*&nbsp;builtin&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_builtin">tr_builtin;</a></span> <span class="id">eauto</span>. <span class="id">destruct</span> <span class="id">b;</span> <span class="id">eauto</span>.<br/>
<span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span> <span class="id">ctx</span>) <span class="gallina-kwd">as</span> <span class="id">[[rpc</span> <span class="id">rreg]</span> <span class="id">|</span> <span class="id">]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inlined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_return_inlined">tr_return_inlined;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;unchanged&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_return">tr_return;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="iter_expand_instr_spec" class="id"><a name="iter_expand_instr_spec" class="">iter_expand_instr_spec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ctx:319" class="id"><a name="ctx:319" class="">ctx</a></span> <span id="l:320" class="id"><a name="l:320" class="">l</a></span> <span id="s:321" class="id"><a name="s:321" class="">s</a></span> <span id="x:322" class="id"><a name="x:322" class="">x</a></span> <span id="s':323" class="id"><a name="s':323" class="">s'</a></span> <span id="i:324" class="id"><a name="i:324" class="">i</a></span> <span id="c:325" class="id"><a name="c:325" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#mlist_iter2">mlist_iter2</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#expand_instr">expand_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec">rec</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:319">ctx</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:320">l</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:321">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:322">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':323">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:324">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">_</span> <span class="id">_</span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:320">l</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="pc:326" class="id"><a name="pc:326" class="">pc</a></span> <span id="instr:327" class="id"><a name="instr:327" class="">instr</a></span> <span id="r:328" class="id"><a name="r:328" class="">r,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#pc:326">pc,</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:327">instr</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:320">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#instr_defs">instr_defs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:327">instr</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#r:328">r</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#r:328">r</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:319">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="pc:329" class="id"><a name="pc:329" class="">pc</a></span> <span id="instr:330" class="id"><a name="instr:330" class="">instr,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#pc:329">pc,</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:330">instr</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:320">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:319">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:329">pc</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#s:321">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:319">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#50efadf7a9f9d41adb2b162cbba3bda7">+</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:319">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id"><a href="compcert.backend.Inliningspec.html#s:321">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextreg">st_nextreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:319">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:319">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':323">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_stksize">st_stksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.stacksize">stacksize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="pc':331" class="id"><a name="pc':331" class="">pc',</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:321">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#pc':331">pc'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc':331">pc'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':323">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:325">c!pc'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':323">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="pc:332" class="id"><a name="pc:332" class="">pc</a></span> <span id="instr:333" class="id"><a name="instr:333" class="">instr,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#pc:332">pc,</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:333">instr</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:320">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:325">c!</a></span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:319">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:332">pc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':323">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!</span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:319">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:332">pc</a></span>)) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="pc:334" class="id"><a name="pc:334" class="">pc</a></span> <span id="instr:335" class="id"><a name="instr:335" class="">instr,</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#pc:334">pc,</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:335">instr</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#l:320">l</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_instr">tr_instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:319">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:334">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#instr:335">instr</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:325">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">l;</span> <span class="id">simpl;</span> <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">a</span> <span class="gallina-kwd">as</span> <span class="id">[pc1</span> <span class="id">instr1];</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">*</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">inv_incr</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">A:</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id">ctx</span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id">s0</span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">B:</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id">ctx</span> <span class="id">pc</span>) (<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span> <span class="id">s</span>)) <span class="gallina-kwd">by</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="gallina-kwd">in</span> <span class="id">B</span>. <span class="id">generalize</span> (<span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_above">shiftpos_above</a></span> <span class="id">pc</span> (<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span> <span class="id">ctx</span>)). <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H9</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;same&nbsp;pc&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#expand_instr_spec">expand_instr_spec;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> ((<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span> <span class="id">s'</span>)<span class="id">!pc'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H7</span>. <span class="id">auto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#iter_expand_instr_unchanged">iter_expand_instr_unchanged;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_map_compose">list_map_compose</a></span> <span class="gallina-kwd">in</span> <span class="id">H9</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[[pc0</span> <span class="id">instr0]</span> <span class="id">[P</span> <span class="id">Q]]</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id">ctx</span> <span class="id">pc0</span>) (<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span> <span class="id">s</span>)) <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> ((<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span> <span class="id">s'</span>)<span class="id">!</span>(<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id">ctx</span> <span class="id">pc</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id">H8;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#iter_expand_instr_unchanged">iter_expand_instr_unchanged;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id">ctx</span> <span class="id">pc</span>) (<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span> <span class="id">s</span>)) <span class="gallina-kwd">by</span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">intros</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_map_compose">list_map_compose</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">[[pc0</span> <span class="id">instr0]</span> <span class="id">[P</span> <span class="id">Q]]</span>. <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">pc0</span>) <span class="gallina-kwd">by</span> (<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_inj">shiftpos_inj;</a></span> <span class="id">eauto</span>). <span class="id">subst</span> <span class="id">pc0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">elim</span> <span class="id">H12</span>. <span class="id">change</span> <span class="id">pc</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">pc,</span> <span class="id">instr0</span>)). <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map">List.in_map</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;older&nbsp;pc&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv_incr</span>. <span class="id">eapply</span> <span class="id">IHl;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span>. <span class="id">eapply</span> <span class="id">H2</span>. <span class="id">right;</span> <span class="id">eauto</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros;</span> <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">H7;</span> <span class="id">auto</span>. <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="expand_cfg_rec_spec" class="id"><a name="expand_cfg_rec_spec" class="">expand_cfg_rec_spec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="ctx:336" class="id"><a name="ctx:336" class="">ctx</a></span> <span id="f:337" class="id"><a name="f:337" class="">f</a></span> <span id="s:338" class="id"><a name="s:338" class="">s</a></span> <span id="x:339" class="id"><a name="x:339" class="">x</a></span> <span id="s':340" class="id"><a name="s':340" class="">s'</a></span> <span id="i:341" class="id"><a name="i:341" class="">i</a></span> <span id="c:342" class="id"><a name="c:342" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#expand_cfg_rec">expand_cfg_rec</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.fe">fe</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR.rec">rec</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:336">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:337">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:338">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:339">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':340">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:341">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:336">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#50efadf7a9f9d41adb2b162cbba3bda7">+</a></span> <span class="id"><a href="compcert.backend.RTL.html#max_pc_function">max_pc_function</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:337">f</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#s:338">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:336">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.RTL.html#max_reg_function">max_reg_function</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:337">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:336">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#50efadf7a9f9d41adb2b162cbba3bda7">+</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:336">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id"><a href="compcert.backend.Inliningspec.html#s:338">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextreg">st_nextreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:336">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:336">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:337">f</a></span>) <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Inlining.html#min_alignment">min_alignment</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:337">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:336">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:336">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':340">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_stksize">st_stksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.stacksize">stacksize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="pc':343" class="id"><a name="pc':343" class="">pc',</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:336">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#pc':343">pc'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc':343">pc'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':340">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:342">c!pc'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':340">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:336">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:337">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:342">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#expand_cfg_rec">expand_cfg_rec</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>. <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">inversion</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">H1</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#max_reg_function_params">max_reg_function_params;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Inliningspec.html#ptree_mfold_spec">ptree_mfold_spec;</a></span> <span class="id">eauto</span>. <span class="id">intros</span> <span class="id">[INCR'</span> <span class="id">ITER]</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#iter_expand_instr_spec">iter_expand_instr_spec;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_keys_norepet">PTree.elements_keys_norepet</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> <span class="id">H1</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#max_reg_function_def">max_reg_function_def</a></span> <span class="gallina-kwd">with</span> (<span class="id">i</span> <span class="id">:=</span> <span class="id">instr</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id">pc0</span> (<span class="id"><a href="compcert.backend.RTL.html#max_pc_function">max_pc_function</a></span> <span class="id">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#max_pc_function_sound">max_pc_function_sound</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_below">shiftpos_below</a></span>. <span class="id">subst</span> <span class="id">s0;</span> <span class="id">simpl;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">subst</span> <span class="id">s0;</span> <span class="id">simpl;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">H8;</span> <span class="id">auto</span>. <span class="id">subst</span> <span class="id">s0;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">H11;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id">H8</span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_above">shiftpos_above</a></span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id">pc0</span> (<span class="id"><a href="compcert.backend.RTL.html#max_pc_function">max_pc_function</a></span> <span class="id">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#max_pc_function_sound">max_pc_function_sound</a></span>. <span class="id">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span><span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span>. <span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#shiftpos_below">shiftpos_below</a></span>. <span class="id">inversion</span> <span class="id">i;</span> <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span><span class="id">;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">auto</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">INCR0</span>. <span class="id">subst</span> <span class="id">s0;</span> <span class="id">simpl</span> <span class="gallina-kwd">in</span> <span class="id">STKSIZE;</span> <span class="id">extlia</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.EXPAND_INSTR">EXPAND_INSTR</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="expand_cfg_unchanged" class="id"><a name="expand_cfg_unchanged" class="">expand_cfg_unchanged:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fe:344" class="id"><a name="fe:344" class="">fe</a></span> <span id="ctx:345" class="id"><a name="ctx:345" class="">ctx</a></span> <span id="f:346" class="id"><a name="f:346" class="">f</a></span> <span id="s:347" class="id"><a name="s:347" class="">s</a></span> <span id="x:348" class="id"><a name="x:348" class="">x</a></span> <span id="s':349" class="id"><a name="s':349" class="">s'</a></span> <span id="i:350" class="id"><a name="i:350" class="">i</a></span> <span id="pc:351" class="id"><a name="pc:351" class="">pc,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#expand_cfg">expand_cfg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fe:344">fe</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:345">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:346">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:347">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:348">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':349">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:350">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:345">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#s:347">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc:351">pc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:345">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':349">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:347">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">fe0;</span> <span class="id">pattern</span> <span class="id">fe0</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_ind">well_founded_ind</a></span> <span class="gallina-kwd">with</span> (<span class="id">R</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Wf_nat.html#ltof">ltof</a></span> <span class="id">_</span> <span class="id"><a href="compcert.backend.Inlining.html#size_fenv">size_fenv</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Wf_nat.html#well_founded_ltof">well_founded_ltof</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#expand_cfg">expand_cfg</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Wfsimpl.html#unroll_Fixm">unroll_Fixm</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#expand_cfg_rec_unchanged">expand_cfg_rec_unchanged;</a></span> <span class="id">eauto</span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="expand_cfg_spec" class="id"><a name="expand_cfg_spec" class="">expand_cfg_spec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="fe:352" class="id"><a name="fe:352" class="">fe</a></span> <span id="ctx:353" class="id"><a name="ctx:353" class="">ctx</a></span> <span id="f:354" class="id"><a name="f:354" class="">f</a></span> <span id="s:355" class="id"><a name="s:355" class="">s</a></span> <span id="x:356" class="id"><a name="x:356" class="">x</a></span> <span id="s':357" class="id"><a name="s':357" class="">s'</a></span> <span id="i:358" class="id"><a name="i:358" class="">i</a></span> <span id="c:359" class="id"><a name="c:359" class="">c,</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#expand_cfg">expand_cfg</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fe:352">fe</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:353">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:354">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s:355">s</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#R">R</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#x:356">x</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':357">s'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#i:358">i</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#fenv_agree">fenv_agree</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fe:352">fe</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:353">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#50efadf7a9f9d41adb2b162cbba3bda7">+</a></span> <span class="id"><a href="compcert.backend.RTL.html#max_pc_function">max_pc_function</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:354">f</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#s:355">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:353">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.RTL.html#max_reg_function">max_reg_function</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:354">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:353">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dreg">dreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.PArith.BinPos.html#50efadf7a9f9d41adb2b162cbba3bda7">+</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:353">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mreg">mreg</a></span>)) <span class="id"><a href="compcert.backend.Inliningspec.html#s:355">s</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextreg">st_nextreg</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:353">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:353">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#mstk">mstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:354">f</a></span>) <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Inlining.html#min_alignment">min_alignment</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:354">f</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#5cd21895b4d5f127eb2c0acb80e8d6fc">|</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:353">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>)) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:353">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4">&gt;=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#s':357">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_stksize">st_stksize</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e">&lt;=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC.stacksize">stacksize</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span> <span id="pc':360" class="id"><a name="pc':360" class="">pc',</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:353">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dpc">dpc</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#pc':360">pc'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#pc':360">pc'</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':357">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_nextnode">st_nextnode</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:359">c!pc'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#s':357">s'</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#st_code">st_code</a></span>)<span class="id">!pc'</span>) <span class="id">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:353">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:354">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#c:359">c</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">fe0;</span> <span class="id">pattern</span> <span class="id">fe0</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_ind">well_founded_ind</a></span> <span class="gallina-kwd">with</span> (<span class="id">R</span> <span class="id">:=</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Wf_nat.html#ltof">ltof</a></span> <span class="id">_</span> <span class="id"><a href="compcert.backend.Inlining.html#size_fenv">size_fenv</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Wf_nat.html#well_founded_ltof">well_founded_ltof</a></span>.<br/>
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#expand_cfg">expand_cfg</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>. <span class="id">rewrite</span> <span class="id"><a href="compcert.lib.Wfsimpl.html#unroll_Fixm">unroll_Fixm</a></span> <span class="gallina-kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#expand_cfg_rec_spec">expand_cfg_rec_spec;</a></span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">intros</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#expand_cfg_unchanged">expand_cfg_unchanged;</a></span> <span class="id">eauto</span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC.INLINING_BODY_SPEC">INLINING_BODY_SPEC</a></span>.<br/>
<br/>
<span class="vernacular">End</span> <span class="id"><a href="compcert.backend.Inliningspec.html#INLINING_SPEC">INLINING_SPEC</a></span>.<br/>
<br/>
<h2> Relational specification of the translation of a function </h2>
<br/>
<span class="vernacular">Inductive</span> <span id="tr_function" class="id"><a name="tr_function" class="">tr_function:</a></span> <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span> <span class="gallina-kwd">Prop</span> <span class="id">:=</span><br/>
&nbsp;&nbsp;<span class="id">|</span> <span id="tr_function_intro" class="id"><a name="tr_function_intro" class="">tr_function_intro:</a></span> <span class="gallina-kwd">forall</span> <span id="p:363" class="id"><a name="p:363" class="">p</a></span> <span id="fenv:364" class="id"><a name="fenv:364" class="">fenv</a></span> <span id="f:365" class="id"><a name="f:365" class="">f</a></span> <span id="f':366" class="id"><a name="f':366" class="">f'</a></span> <span id="ctx:367" class="id"><a name="ctx:367" class="">ctx,</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#fenv_compat">fenv_compat</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#p:363">p</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv:364">fenv</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_funbody">tr_funbody</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv:364">fenv</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f':366">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:367">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:365">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f':366">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:367">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#dstk">dstk</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#ctx:367">ctx</a></span>.(<span class="id"><a href="compcert.backend.Inlining.html#retinfo">retinfo</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#f':366">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_sig">fn_sig</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:365">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_sig">fn_sig</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#f':366">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#sregs">sregs</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:367">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:365">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#f':366">f'</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.backend.Inlining.html#spc">spc</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#ctx:367">ctx</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:365">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">0</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;=</a></span> <span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f':366">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#bdb3edde5f841a282ce8fc1b00e3d211">&lt;</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_function:361">tr_function</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#p:363">p</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:365">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f':366">f'</a></span>.<br/>
<br/>
<span class="vernacular">Lemma</span> <span id="tr_function_linkorder" class="id"><a name="tr_function_linkorder" class="">tr_function_linkorder:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cunit:368" class="id"><a name="cunit:368" class="">cunit</a></span> <span id="prog:369" class="id"><a name="prog:369" class="">prog</a></span> <span id="f:370" class="id"><a name="f:370" class="">f</a></span> <span id="f':371" class="id"><a name="f':371" class="">f',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#cunit:368">cunit</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#prog:369">prog</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_function">tr_function</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#cunit:368">cunit</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:370">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f':371">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_function">tr_function</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#prog:369">prog</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:370">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f':371">f'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">econstructor;</span> <span class="id">eauto</span>. <span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#fenv_compat_linkorder">fenv_compat_linkorder;</a></span> <span class="id">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="vernacular">Lemma</span> <span id="transf_function_spec" class="id"><a name="transf_function_spec" class="">transf_function_spec:</a></span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> <span id="cunit:372" class="id"><a name="cunit:372" class="">cunit</a></span> <span id="f:373" class="id"><a name="f:373" class="">f</a></span> <span id="f':374" class="id"><a name="f':374" class="">f',</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inlining.html#transf_function">transf_function</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#funenv_program">funenv_program</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#cunit:372">cunit</a></span>) <span class="id"><a href="compcert.backend.Inliningspec.html#f:373">f</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a">=</a></span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f':374">f'</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x">-&gt;</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Inliningspec.html#tr_function">tr_function</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#cunit:372">cunit</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f:373">f</a></span> <span class="id"><a href="compcert.backend.Inliningspec.html#f':374">f'</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="compcert.backend.Inlining.html#transf_function">transf_function</a></span> <span class="gallina-kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> (<span class="id">fenv</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Inlining.html#funenv_program">funenv_program</a></span> <span class="id">cunit</span>) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.backend.Inlining.html#expand_function">expand_function</a></span> <span class="id">fenv</span> <span class="id">f</span> <span class="id"><a href="compcert.backend.Inlining.html#initstate">initstate</a></span>) <span class="gallina-kwd">as</span> <span class="id">[ctx</span> <span class="id">s</span> <span class="id">i]</span> <span class="id">eqn:?</span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id"><a href="compcert.backend.Inlining.html#st_stksize">st_stksize</a></span> <span class="id">s</span>) <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>)<span class="id">;</span> <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">Heqr</span>. <span class="id">set</span> (<span class="id">ctx</span> <span class="id">:=</span> <span class="id"><a href="compcert.backend.Inlining.html#initcontext">initcontext</a></span> <span class="id">x</span> <span class="id">x0</span> (<span class="id"><a href="compcert.backend.RTL.html#max_reg_function">max_reg_function</a></span> <span class="id">f</span>) (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span> <span class="id">f</span>)) <span class="gallina-kwd">in</span> <span class="id">*</span>.<br/>
<span class="vernacular">Opaque</span> <span class="id"><a href="compcert.backend.Inlining.html#initstate">initstate</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">INCR3</span>. <span class="id">inversion</span> <span class="id">EQ1</span>. <span class="id">inversion</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#tr_function_intro">tr_function_intro</a></span> <span class="gallina-kwd">with</span> <span class="id">fenv</span> <span class="id">ctx;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#funenv_program_compat">funenv_program_compat</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="compcert.backend.Inliningspec.html#expand_cfg_spec">expand_cfg_spec</a></span> <span class="gallina-kwd">with</span> (<span class="id">fe</span> <span class="id">:=</span> <span class="id">fenv</span>)<span class="id">;</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red;</span> <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">ctx;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H1;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H2;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H3;</span> <span class="id">simpl</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id">ctx;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H0;</span> <span class="id">rewrite</span> <span class="id">&lt;-</span> <span class="id">H1;</span> <span class="id">simpl</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">extlia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">split;</span> <span class="id">auto</span>. <span class="id">destruct</span> <span class="id">INCR2</span>. <span class="id">destruct</span> <span class="id">INCR1</span>. <span class="id">destruct</span> <span class="id">INCR0</span>. <span class="id">destruct</span> <span class="id">INCR</span>.<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">change</span> <span class="id">0</span> <span class="gallina-kwd">with</span> (<span class="id"><a href="compcert.backend.Inlining.html#st_stksize">st_stksize</a></span> <span class="id"><a href="compcert.backend.Inlining.html#initstate">initstate</a></span>). <span class="id">lia</span>.<br/>
Qed.</div>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
