
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.lebesgue_measure</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.lebesgue_measure" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>

<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">
<h1 class="title">Module mathcomp.analysis.lebesgue_measure</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">all_ssreflect</span> <span class="id">ssralg</span> <span class="id">ssrnum</span> <span class="id">ssrint</span> <span class="id">interval</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">finmap</span> <span class="id">fingroup</span> <span class="id">perm</span> <span class="id">rat</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html">mathcomp_extra</a></span> <span class="id"><a href="mathcomp.classical.boolp.html">boolp</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html">classical_sets</a></span> <span class="id"><a href="mathcomp.classical.functions.html">functions</a></span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.cardinality.html">cardinality</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html">fsbigop</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.reals.html">reals</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html">ereal</a></span> <span class="id"><a href="mathcomp.analysis.signed.html">signed</a></span> <span class="id"><a href="mathcomp.analysis.topology.html">topology</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html">numfun</a></span> <span class="id"><a href="mathcomp.analysis.normedtype.html">normedtype</a></span>.<br/>
<span class="kwd">From</span> <span class="id">HB</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">structures</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.sequences.html">sequences</a></span> <span class="id"><a href="mathcomp.analysis.esum.html">esum</a></span> <span class="id"><a href="mathcomp.analysis.measure.html">measure</a></span> <span class="id"><a href="mathcomp.analysis.real_interval.html">real_interval</a></span> <span class="id"><a href="mathcomp.analysis.realfun.html">realfun</a></span> <span class="id"><a href="mathcomp.analysis.exp.html">exp</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="mathcomp.analysis.lebesgue_stieltjes_measure.html">lebesgue_stieltjes_measure</a></span>.<br/>
<br/>
<pre class="ssrdoc">
                           Lebesgue Measure                                
                                                                           
This file contains a formalization of the Lebesgue measure using the       
Measure Extension theorem from measure.v and further develops the theory   
of measurable functions.                                                   
                                                                           
Main reference:                                                            
- Daniel Li, Int√©gration et applications, 2016                             
- Achim Klenke, Probability Theory 2nd edition, 2014                       
                                                                           
     lebesgue_measure == the Lebesgue measure                              
             ps_infty == inductive definition of the powerset              
                         {0, {-oo}, {+oo}, {-oo,+oo}}                      
        emeasurable G == sigma-algebra over \bar R built out of the        
                         measurables G of a sigma-algebra over R           
    elebesgue_measure == the Lebesgue measure extended to \bar R           
                                                                           
The modules RGenOInfty, RGenInftyO, RGenCInfty, RGenOpens provide proofs   
of equivalence between the sigma-algebra generated by list of intervals    
and the sigma-algebras generated by open rays, closed rays, and open       
intervals.                                                                 
                                                                           
The modules ErealGenOInfty, ErealGenCInfty, ErealGenInftyO provide proofs  
of equivalence between emeasurable and the sigma-algebras generated open   
rays and closed rays.                                                      
                                                                           
    vitali_cover A B V == V is a Vitali cover of A, here B is a            
                          collection of non-empty closed balls             
                                                                           
</pre>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="kwd">Arguments</span>.<br/>
<span class="id">Unset</span> <span class="id">Strict</span> <span class="kwd">Implicit</span>.<br/>
<span class="id">Unset</span> <span class="id">Printing</span> <span class="kwd">Implicit</span> <span class="id">Defensive</span>.<br/>
<span class="kwd">Import</span> <span class="id">Order.TTheory</span> <span class="id">GRing.Theory</span> <span class="id">Num.Def</span> <span class="id">Num.Theory</span>.<br/>
<span class="kwd">Import</span> <span class="id">numFieldTopology.Exports</span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id">LebesgueMeasure</span>.<br/>
<span class="kwd">Section</span> <span class="id">hlength</span>.<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">realType</span>}.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">i</span> <span class="id">j</span> : <span class="id">interval</span> <span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">hlength</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.boolp.html#asboolT">set</a></span> (<span class="id">ocitv_type</span> <span class="id">R</span>)) : \<span class="id"><a href="mathcomp.classical.boolp.html#asboolT">bar</a></span> <span class="id">R</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">i</span> := <span class="id">Rhull</span> <span class="id">A</span> <span class="kwd">in</span> <span class="id">i</span>.2 - <span class="id">i</span>.1.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength0</span> : <span class="id">hlength</span> (<span class="id"><a name="LebesgueMeasure.hlength_setT">set0</a></span> : <span class="id">set</span> <span class="id">R</span>) = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">hlength</span> <span class="id">Rhull0</span> /= <span class="id">subee</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_singleton</span> (<span class="id"><a name="LebesgueMeasure.hlength_itv">r</a></span> : <span class="id">R</span>) : <span class="id">hlength</span> `[<span class="id">r</span>, <span class="id">r</span>] = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
<span class="id">rewrite</span> /<span class="id">hlength</span> /= <span class="id">asboolT</span>// <span class="id">sup_itvcc</span>//= <span class="id">asboolT</span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">asboolT</span> <span class="id">inf_itvcc</span>//= ?<span class="id">subee</span>// <span class="id">inE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_setT</span> : <span class="id">hlength</span> <span class="id">setT</span> = +<span class="id">oo</span>%<span class="id"><a href="mathcomp.analysis.real_interval.html#lt_ereal_bnd">E</a></span> :&gt; \<span class="id">bar</span> <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">hlength</span> <span class="id">RhullT</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_itv</span> <span class="id">i</span> : <span class="id">hlength</span> [<span class="id">set</span>` <span class="id">i</span>] = <span class="kwd">if</span> <span class="id">i</span>.2 &gt; <span class="id">i</span>.1 <span class="kwd">then</span> <span class="id">i</span>.2 - <span class="id">i</span>.1 <span class="kwd">else</span> 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
<span class="id">case</span>: <span class="id">ltP</span> =&gt; [/<span class="id">lt_ereal_bnd</span>/<span class="id">neitvP</span> <span class="id">i12</span>|]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">hlength</span> <span class="id">set_itvK</span>.<br/>
<span class="id">rewrite</span> <span class="id">le_eqVlt</span> =&gt; /<span class="id">orP</span>[|/<span class="id">lt_ereal_bnd</span> <span class="id">i12</span>]; <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength0">last</a></span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength_singleton">_</a></span> : [<span class="id">set</span>` <span class="id">i</span>] = <span class="id">set0</span>) ?<span class="id">hlength0</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>/<span class="id">negPn</span>; <span class="id">rewrite</span> -/(<span class="id">neitv</span> <span class="id">_</span>) <span class="id">neitvE</span> -<span class="id"><a href="mathcomp.classical.set_interval.html#set_itvE">leNgt</a></span> (<span class="id">ltW</span> <span class="id">i12</span>).<br/>
<span class="id">case</span>: <span class="id">i</span> =&gt; -[<span class="id">ba</span> <span class="id">a</span>|[|]] [<span class="id">bb</span> <span class="id">b</span>|[|]] //=.<br/>
- <span class="id"><a href="mathcomp.classical.set_interval.html#neitv">rewrite</a></span> /= =&gt; /<span class="id">eqP</span>[-&gt;{<span class="id">b</span>}]; <span class="id">move</span>: <span class="id">ba</span> <span class="id">bb</span> =&gt; -[] []; <span class="id">try</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_num">rewrite</a></span> <span class="id">set_itvE</span> <span class="id">hlength0</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">hlength_singleton</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">set_itvE</span> <span class="id">hlength0</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.set_interval.html#set_itvE">_</a></span>; <span class="id">rewrite</span> <span class="id">set_itvE</span> <span class="id">hlength0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_finite_fin_num</span> <span class="id">i</span> : <span class="id">neitv</span> <span class="id">i</span> -&gt; <span class="id">hlength</span> [<span class="id">set</span>` <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ltNyr">i</a></span>] &lt; +<span class="id">oo</span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id">i</span>.1 : \<span class="id">bar</span> <span class="id">R</span>) \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span>) /\ ((<span class="id">i</span>.2 : \<span class="id">bar</span> <span class="id">R</span>) \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength">move</a></span>: <span class="id">i</span> =&gt; [[<span class="id">ba</span> <span class="id">a</span>|[]] [<span class="id">bb</span> <span class="id">b</span>|[]]] /<span class="id">neitvP</span> //=; <span class="id">do</span> ?<span class="kwd">by</span> <span class="id">rewrite</span> ?<span class="id">set_itvE</span> ?<span class="id">eqxx</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">hlength_itv</span> /= <span class="id">ltry</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">hlength_itv</span> /= <span class="id">ltNyr</span>.<br/>
<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength_itv">move</a></span>=&gt; <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">hlength_itv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">finite_hlength_itv</span> <span class="id">i</span> : <span class="id">neitv</span> <span class="id">i</span> -&gt; <span class="id">hlength</span> [<span class="id">set</span>` <span class="id">i</span>] &lt; +<span class="id">oo</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.real_interval.html#lt_ereal_bnd">hlength</a></span> [<span class="id">set</span>` <span class="id">i</span>] = (<span class="id">fine</span> <span class="id">i</span>.2)%:<span class="id">E</span> - (<span class="id">fine</span> <span class="id">i</span>.1)%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="id">move</span>=&gt; <span class="id">i0</span> <span class="id">ioo</span>; <span class="id"><a name="LebesgueMeasure.hlength_infty_bnd">have</a></span> [<span class="id">ri1</span> <span class="id">ri2</span>] := <span class="id"><a name="b:8">hlength_finite_fin_num</a></span> <span class="id">i0</span> <span class="id">ioo</span>.<br/>
<span class="id">rewrite</span> !<span class="id">fineK</span>// <span class="id">hlength_itv</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; //.<br/>
<span class="id">rewrite</span> -<span class="id">leNgt</span> <span class="id">le_eqVlt</span> =&gt; /<span class="id">predU1P</span>[-&gt;|]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subee</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">lt_ereal_bnd</span>/<span class="id">ltW</span>; <span class="id">rewrite</span> <span class="id">leNgt</span>; <span class="id">move</span>: <span class="id">i0</span> =&gt; /<span class="id">neitvP</span> =&gt; -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_infty_bnd</span> <span class="id">b</span> <span class="id">r</span> :<br/>
&nbsp;&nbsp;<span class="id">hlength</span> [<span class="id">set</span>` <span class="id">Interval</span> -<span class="id">oo</span>%<span class="id">O</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">r</span>)] = +<span class="id">oo</span> :&gt; \<span class="id">bar</span> <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">hlength_itv</span> /= <span class="id">ltNyr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_bnd_infty</span> <span class="id">b</span> <span class="id">r</span> :<br/>
&nbsp;&nbsp;<span class="id">hlength</span> [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">r</span>) +<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength_itv">oo</a></span>%<span class="id">O</span>] = +<span class="id">oo</span> :&gt; \<span class="id">bar</span> <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">hlength_itv</span> /= <span class="id">ltry</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">infinite_hlength_itv</span> <span class="id">i</span> : <span class="id">hlength</span> [<span class="id">set</span>` <span class="id">i</span>] = +<span class="id">oo</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">s</span> <span class="id">r</span>, <span class="id">i</span> = <span class="id">Interval</span> -<span class="id">oo</span>%<span class="id">O</span> (<span class="id">BSide</span> <span class="id">s</span> <span class="id">r</span>) \/ <span class="id">i</span> = <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">s</span> <span class="id">r</span>) +<span class="id">oo</span>%<span class="id">O</span>)<br/>
&nbsp;&nbsp;\/ <span class="id">i</span> = `]-<span class="id">oo</span>, +<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength_itv">oo</a></span>[.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
<span class="id">rewrite</span> <span class="id">hlength_itv</span>; <span class="id">case</span>: <span class="id">i</span> =&gt; -[<span class="id">ba</span> <span class="id">a</span>|[]] [<span class="id">bb</span> <span class="id">b</span>|[]] //= =&gt; [|<span class="id">_</span>|<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#suber_ge0">_</a></span>|].<br/>
- <span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span>.<br/>
- <span class="kwd">by</span> <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">ba</span>, <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">a</a></span>; <span class="id">right</span>.<br/>
- <span class="kwd">by</span> <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">bb</span>, <span class="id">b</span>; <span class="id">left</span>.<br/>
- <span class="kwd">by</span> <span class="id">right</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_itv_ge0</span> <span class="id">i</span> : 0 &lt;= <span class="id">hlength</span> [<span class="id">set</span>` <span class="id">i</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
<span class="id">rewrite</span> <span class="id">hlength_itv</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; //; <span class="id">case</span>: (<span class="id">i</span>.1 : \<span class="id">bar</span> <span class="id">_</span>) =&gt; [<span class="id">r</span>| |].<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">suber_ge0</span>//; <span class="id">exact</span>: <span class="id">ltW</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltNge</span> <span class="id">leey</span>.<br/>
- <span class="kwd">by</span> <span class="id">case</span>: (<span class="id">i</span>.2 : \<span class="id">bar</span> <span class="id">_</span>) =&gt; //= [<span class="id">r</span> <span class="id">_</span>]; <span class="id">rewrite</span> <span class="id">leey</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_Rhull</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">R</span>) : <span class="id">hlength</span> [<span class="id">set</span>` <span class="id">Rhull</span> <span class="id">A</span>] = <span class="id">hlength</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">hlength</span> <span class="id">Rhull_involutive</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_hlength_itv</span> <span class="id">i</span> <span class="id">j</span> : {<span class="id">subset</span> <span class="id">i</span> &lt;= <span class="id">j</span>} -&gt; <span class="id">hlength</span> [<span class="id">set</span>` <span class="id">i</span>] &lt;= <span class="id">hlength</span> [<span class="id">set</span>` <span class="id">j</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
<span class="id">set</span> <span class="id">I</span> := [<span class="id">set</span>` <span class="id">i</span>]; <span class="id">set</span> <span class="id">J</span> := [<span class="id">set</span>` <span class="id">j</span>].<br/>
<span class="id">have</span> [-&gt;|/<span class="id">set0P</span> <span class="id">I0</span>] := <span class="id">eqVneq</span> <span class="id">I</span> <span class="id">set0</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">hlength0</span> <span class="id">hlength_itv_ge0</span>.<br/>
<span class="id">have</span> [<span class="id">J0</span>|/<span class="id">set0P</span> <span class="id">J0</span>] := <span class="id">eqVneq</span> <span class="id">J</span> <span class="id"><a href="mathcomp.analysis.reals.html#le_sup">set0</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id">subset_itvP</span>; <span class="id">rewrite</span> -/<span class="id">J</span> <span class="id">J0</span> <span class="id">subset0</span> -/<span class="id">I</span> =&gt; -&gt;.<br/>
<span class="id">move</span>=&gt; /<span class="id">subset_itvP</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#has_ubound">ij</a></span>; <span class="id">apply</span>: <span class="id">lee_sub</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">ui</span>|<span class="id">ui</span>] := <span class="id">asboolP</span> (<span class="id">has_ubound</span> <span class="id">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">uj</span> /=|<span class="id">uj</span>] := <span class="id"><a href="mathcomp.classical.classical_sets.html#has_lbound">asboolP</a></span> (<span class="id">has_ubound</span> <span class="id">J</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">leey</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_fin</span> <span class="id">le_sup</span> // =&gt; <span class="id">r</span> <span class="id">Ir</span>; <span class="kwd">exists</span> <span class="id">r</span>; <span class="id">split</span> =&gt; //; <span class="id">apply</span>: <span class="id">ij</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">uj</span> /=|//] := <span class="id">asboolP</span> (<span class="id">has_ubound</span> <span class="id">J</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.reals.html#le_sup">move</a></span>: <span class="id">ui</span>; <span class="id"><a href="mathcomp.analysis.reals.html#has_inf_supN">have</a></span> := <span class="id">subset_has_ubound</span> <span class="id">ij</span> <span class="id">uj</span>.<br/>
<span class="id">have</span> [<span class="id">lj</span> /=|<span class="id">lj</span>] := <span class="id">asboolP</span> (<span class="id">has_lbound</span> <span class="id">J</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">leNye</span>.<br/>
<span class="id">have</span> [<span class="id">li</span> /=|<span class="id">li</span>] := <span class="id">asboolP</span> (<span class="id">has_lbound</span> <span class="id">I</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: <span class="id"><a name="A:19">li</a></span>; <span class="id">have</span> := <span class="id">subset_has_lbound</span> <span class="id">ij</span> <span class="id">lj</span>.<br/>
<span class="id">rewrite</span> <span class="id">lee_fin</span> <span class="id">ler_oppl</span> <span class="id">opprK</span> <span class="id">le_sup</span>// ?<span class="id">has_inf_supN</span>//; <span class="id">last</span> <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength_Rhull">nonemptyN</a></span>.<br/>
<span class="id">move</span>=&gt; <span class="id">r</span> [<span class="id">r</span>' <span class="id">Ir</span>' &lt;-{<span class="id">r</span>}]; <span class="kwd">exists</span> (- <span class="id">r</span>')%<span class="id">R</span>.<br/>
<span class="kwd">by</span> <span class="id">split</span> =&gt; //; <span class="kwd">exists</span> <span class="id">r</span>' =&gt; //; <span class="id">apply</span>: <span class="id">ij</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_hlength</span> : {<span class="id">homo</span> <span class="id">hlength</span> : <span class="id">A</span> <span class="id">B</span> / (<span class="id">A</span> `&lt;=` <span class="id">B</span>) &gt;-&gt; <span class="id">A</span> &lt;= <span class="id">B</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
<span class="id">move</span>=&gt; <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength_ge0">b</a></span> /<span class="id">le_Rhull</span> /<span class="id">le_hlength_itv</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">hlength_Rhull</span> <span class="id">a</span>) (<span class="id">hlength_Rhull</span> <span class="id">b</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_ge0</span> <span class="id">I</span> : (0 &lt;= <span class="id">hlength</span> <span class="id">I</span>)%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">hlength0</span> <span class="id">le_hlength</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">hlength</span>.<br/>
#[<span class="id">local</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (0%:<span class="id">E</span> &lt;= <span class="id">hlength</span> <span class="id">_</span>) =&gt; <span class="id">solve</span>[<span class="id">apply</span>: <span class="id">hlength_ge0</span>] : <span class="id">core</span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id">hlength_extension</span>.<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">realType</span>}.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id">hlength</span> := (@<span class="id">hlength</span> <span class="id">R</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_semi_additive</span> : <span class="id">semi_additive</span> <span class="id">hlength</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
<span class="id">move</span>=&gt; /= <span class="id">I</span> <span class="id">n</span> /(<span class="id">_</span> <span class="id">_</span>)/<span class="id">cid2</span>-/<span class="id">all_sig</span>[<span class="id">b</span>]/<span class="id">all_and2</span>[<span class="id">_</span>]/(<span class="id">_</span> <span class="id">_</span>)/<span class="id">esym</span>-/<span class="id">funext</span> {<span class="id">I</span>}-&gt;.<br/>
<span class="id">move</span>=&gt; <span class="id">Itriv</span> [[/= <span class="id">a1</span> <span class="id">a2</span>] <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength0">_</a></span>] /<span class="id">esym</span> /[<span class="id">dup</span>] + -&gt;.<br/>
<span class="id">rewrite</span> <span class="id">hlength_itv</span> ?<span class="id">lte_fin</span>/= -<span class="id">EFinB</span>.<br/>
<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_pred">case</a></span>: <span class="id">ifPn</span> =&gt; <span class="id">a12</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">I</span> <span class="id">i</span> :=  `](<span class="id">b</span> <span class="id">i</span>).1, (<span class="id">b</span> <span class="id">i</span>).2]%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">set_itv_ge</span>//= -(<span class="id">bigcup_mkord</span> <span class="id">_</span> <span class="id">I</span>) /<span class="id">I</span> =&gt; /<span class="id">bigcup0P</span> <span class="id">I0</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_bigr</span> =&gt; <span class="id">i</span> <span class="id">_</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">I0</span>//= <span class="id">hlength0</span>; <span class="id">rewrite</span> <span class="id">big1</span>.<br/>
<span class="id">set</span> <span class="id">A</span> := `]<span class="id">a1</span>, <span class="id">a2</span>]%<span class="id">classic</span>.<br/>
<span class="id">rewrite</span> -<span class="id">bigcup_pred</span>; <span class="id">set</span> <span class="id">P</span> := <span class="id">xpredT</span>; <span class="id">rewrite</span> (<span class="id">eq_bigl</span> <span class="id">P</span>)//.<br/>
<span class="id">move</span>: <span class="id">P</span> =&gt; <span class="id">P</span>; <span class="id">have</span> [<span class="id">p</span>] := <span class="id">ubnP</span> #|<span class="id">P</span>|; <span class="id">elim</span>: <span class="id">p</span> =&gt; // <span class="id">p</span> <span class="id">IHp</span> <span class="kwd">in</span> <span class="id">P</span> <span class="id">a2</span> <span class="id">a12</span> <span class="id">A</span> *.<br/>
<span class="id">rewrite</span> <span class="id">ltnS</span> =&gt; <span class="id">cP</span> /<span class="id">esym</span> <span class="id">AE</span>.<br/>
<span class="id">have</span> : <span class="id">A</span> <span class="id">a2</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">A</span> /= <span class="id">in_itv</span>/= <span class="id">lexx</span> <span class="id">andbT</span>.<br/>
<span class="id">rewrite</span> <span class="id">AE</span>/= =&gt; -[<span class="id">i</span> /= <span class="id">Pi</span>] <span class="id">a2bi</span>.<br/>
<span class="id">case</span>: (<span class="id">boolP</span> ((<span class="id">b</span> <span class="id">i</span>).1 &lt; (<span class="id">b</span> <span class="id">i</span>).2)) =&gt; <span class="id">bi</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">itv_ge</span> <span class="kwd">in</span> <span class="id">a2bi</span>.<br/>
<span class="id">have</span> {}<span class="id">a2bi</span> : <span class="id">a2</span> = (<span class="id">b</span> <span class="id">i</span>).2.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#addeC">itvP</a></span> <span class="id">a2bi</span>)/=.<br/>
&nbsp;&nbsp;<span class="id">suff</span>: <span class="id">A</span> (<span class="id">b</span> <span class="id">i</span>).2 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">itvP</span>-&gt;.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">AE</span>; <span class="kwd">exists</span> <span class="id">i</span>=&gt; //=; <span class="id">rewrite</span> <span class="id">in_itv</span>/= <span class="id">lexx</span> <span class="id">andbT</span>.<br/>
<span class="id">rewrite</span> {<span class="id">a2</span>}<span class="id">a2bi</span> <span class="kwd">in</span> <span class="id">a12</span> <span class="id">A</span> <span class="id">AE</span> *.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#subee">bigD1</a></span> <span class="id">i</span>)//= <span class="id">hlength_itv</span> ?<span class="id">lte_fin</span>/= <span class="id">bi</span> !<span class="id">EFinD</span> -<span class="id">addeA</span>.<br/>
<span class="id">congr</span> (<span class="id">_</span> + <span class="id">_</span>)%<span class="id">E</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">addeC</span> -<span class="id">sube_eq</span>// 1?<span class="id">adde_defC</span>//.<br/>
<span class="id">rewrite</span> ?<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">EFinN</a></span> <span class="id">oppeK</span> <span class="id">addeC</span>; <span class="id">apply</span>/<span class="id">eqP</span>.<br/>
<span class="id">case</span>: (<span class="id">eqVneq</span> <span class="id">a1</span> (<span class="id">b</span> <span class="id">i</span>).1) =&gt; <span class="id">a1bi</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> {<span class="id">a1</span>}<span class="id">a1bi</span> <span class="kwd">in</span> <span class="id">a12</span> <span class="id">A</span> <span class="id">AE</span> {<span class="id">IHp</span>} *; <span class="id">rewrite</span> <span class="id">subee</span> ?<span class="id">big1</span>// =&gt; <span class="id">j</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; /<span class="id">andP</span>[<span class="id">Pj</span> <span class="id">Nji</span>]; <span class="id">rewrite</span> <span class="id">hlength_itv</span> ?<span class="id">lte_fin</span>/=; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; <span class="id">bj</span>//.<br/>
&nbsp;&nbsp;<span class="id">exfalso</span>; <span class="id">have</span> /<span class="id">trivIsetP</span>/(<span class="id">_</span> <span class="id">j</span> <span class="id">i</span> <span class="id">I</span> <span class="id">I</span> <span class="id">Nji</span>) := <span class="id">Itriv</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">m</span> := ((<span class="id">b</span> <span class="id">j</span>).1 + (<span class="id">b</span> <span class="id">j</span>).2) / 2%:<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">mbj</span> : `](<span class="id">b</span> <span class="id">j</span>).1, (<span class="id">b</span> <span class="id">j</span>).2]%<span class="id">classic</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /= !<span class="id">in_itv</span>/= ?(<span class="id">midf_lt</span>, <span class="id">midf_le</span>)//= <span class="id">ltW</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">subset0</span> =&gt; /(<span class="id">_</span> <span class="id">m</span>); <span class="id">apply</span>; <span class="id">split</span>=&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">suff</span>: <span class="id">A</span> <span class="id">m</span> <span class="kwd">by</span> []; <span class="id">rewrite</span> <span class="id">AE</span>; <span class="kwd">exists</span> <span class="id">j</span> =&gt; //.<br/>
<span class="id">have</span> <span class="id">a1b2</span> <span class="id">j</span> : <span class="id">P</span> <span class="id">j</span> -&gt; (<span class="id">b</span> <span class="id">j</span>).1 &lt; (<span class="id">b</span> <span class="id">j</span>).2 -&gt; <span class="id">a1</span> &lt;= (<span class="id">b</span> <span class="id">j</span>).2.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Pj</span> <span class="id">bj</span>; <span class="id">suff</span> /<span class="id">itvP</span>-&gt; : <span class="id">A</span> (<span class="id">b</span> <span class="id">j</span>).2 <span class="kwd">by</span> [].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">AE</span>; <span class="kwd">exists</span> <span class="id">j</span> =&gt; //=; <span class="id">rewrite</span> ?<span class="id">in_itv</span>/= <span class="id">bj</span>//=.<br/>
<span class="id">have</span> <span class="id">a1b</span> <span class="id">j</span> : <span class="id">P</span> <span class="id">j</span> -&gt; (<span class="id">b</span> <span class="id">j</span>).1 &lt; (<span class="id">b</span> <span class="id">j</span>).2 -&gt; <span class="id">a1</span> &lt;= (<span class="id">b</span> <span class="id">j</span>).1.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Pj</span> <span class="id">bj</span>; <span class="id">case</span>: <span class="id">ltP</span>=&gt; // <span class="id">bj1a</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span> : <span class="id">A</span> <span class="id">a1</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">A</span>/= <span class="id">in_itv</span>/= <span class="id">ltxx</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">AE</span>; <span class="kwd">exists</span> <span class="id">j</span>; <span class="id">rewrite</span> //= <span class="id">in_itv</span>/= <span class="id">bj1a</span>//= <span class="id">a1b2</span>.<br/>
<span class="id">have</span> <span class="id">bbi2</span> <span class="id">j</span> : <span class="id">P</span> <span class="id">j</span> -&gt; (<span class="id">b</span> <span class="id">j</span>).1 &lt; (<span class="id">b</span> <span class="id">j</span>).2 -&gt; (<span class="id">b</span> <span class="id">j</span>).2 &lt;= (<span class="id">b</span> <span class="id">i</span>).2.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Pj</span> <span class="id">bj</span>; <span class="id">suff</span> /<span class="id">itvP</span>-&gt; : <span class="id">A</span> (<span class="id">b</span> <span class="id">j</span>).2 <span class="kwd">by</span> [].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">AE</span>; <span class="kwd">exists</span> <span class="id">j</span> =&gt; //=; <span class="id">rewrite</span> ?<span class="id">in_itv</span>/= <span class="id">bj</span>//=.<br/>
<span class="id">apply</span>/<span class="id">IHp</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lt_neqAle</span> <span class="id">a1bi</span>/= <span class="id">a1b</span>.<br/>
- <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#topredE">cP</a></span>)// -(<span class="id">cardID</span> (<span class="id">pred1</span> <span class="id">i</span>) <span class="id">P</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> (<span class="id">_</span> &lt; <span class="id">X</span> + <span class="id">_</span>)%<span class="id">N</span>](@<span class="id">eq_card</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">pred1</span> <span class="id">i</span>)); <span class="id">last</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">first</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">j</span>; <span class="id">rewrite</span> !<span class="id">inE</span> <span class="id">andbC</span>; <span class="id">case</span>: <span class="id">eqVneq</span> =&gt; // -&gt;.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> ?<span class="id">card1</span> ?<span class="id">ltnS</span>// <span class="id">subset_leq_card</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">fintype.subsetP</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">j</a></span>; <span class="id">rewrite</span> -<span class="id">topredE</span>/= !<span class="id">inE</span> <span class="id">andbC</span>.<br/>
<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>=&gt; /= [<span class="id">x</span> [<span class="id">j</span>/= /<span class="id">andP</span>[<span class="id">Pj</span> <span class="id">Nji</span>]]|<span class="id">x</span>/= <span class="id">xabi</span>].<br/>
&nbsp;&nbsp;<span class="id">case</span>: (<span class="id">boolP</span> ((<span class="id">b</span> <span class="id">j</span>).1 &lt; (<span class="id">b</span> <span class="id">j</span>).2)) =&gt; <span class="id">bj</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">itv_ge</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">subitvP</span>; <span class="id">rewrite</span> <span class="id">subitvE</span> ?<span class="id">bnd_simp</span> <span class="id">a1b</span>//= <span class="id">leNgt</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">trivIsetP</span>/(<span class="id">_</span> <span class="id">j</span> <span class="id">i</span> <span class="id">I</span> <span class="id">I</span> <span class="id">Nji</span>) := <span class="id">Itriv</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">subset0</span> =&gt; /(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">_</a></span> (<span class="id">b</span> <span class="id">j</span>).2); <span class="id">apply</span>: <span class="id">contra_notN</span> =&gt; /= <span class="id">bi1j2</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">in_itv</span>/= <span class="id">bj</span> !<span class="id">lexx</span> <span class="id">bi1j2</span> <span class="id">bbi2</span>.<br/>
<span class="id">have</span>: <span class="id">A</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">A</span>/= <span class="id">in_itv</span>/= (<span class="id">itvP</span> <span class="id">xabi</span>)/= <span class="id">ltW</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">bi</span>) ?(<span class="id">itvP</span> <span class="id">xabi</span>).<br/>
<span class="id">rewrite</span> <span class="id">AE</span> =&gt; -[<span class="id">j</span> /= <span class="id">Pj</span> <span class="id">xbj</span>].<br/>
<span class="kwd">exists</span> <span class="id">j</span> =&gt; //=.<br/>
<span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span>=&gt; //; <span class="id">apply</span>: <span class="id">contraTneq</span> <span class="id">xbj</span> =&gt; -&gt;.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_itv</span>/= <span class="id">le_gtF</span>// (<span class="id">itvP</span> <span class="id">xabi</span>).<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isContent.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">R</span><br/>
&nbsp;&nbsp;<span class="id">hlength</span> <span class="id">hlength_ge0</span> <span class="id">hlength_semi_additive</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Extern</span> 0 ((<span class="id">_</span> .-<span class="id">ocitv</span>).-<span class="id">measurable</span> <span class="id">_</span>) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id">is_ocitv</span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_sigma_sub_additive</span> :<br/>
&nbsp;&nbsp;<span class="id">sigma_sub_additive</span> (<span class="id">hlength</span> : <span class="id">set</span> (<span class="id">ocitv_type</span> <span class="id">R</span>) -&gt; <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
<span class="id">move</span>=&gt; <span class="id">I</span> <span class="id">A</span> /(<span class="id">_</span> <span class="id">_</span>)/<span class="id">cid2</span>-/<span class="id">all_sig</span>[<span class="id">b</span>]/<span class="id">all_and2</span>[<span class="id">_</span>]/(<span class="id">_</span> <span class="id">_</span>)/<span class="id">esym</span> <span class="id">AE</span>.<br/>
<span class="id">move</span>=&gt; [<span class="id">a</span> <span class="id">_</span> &lt;-]; <span class="id">rewrite</span> <span class="id">hlength_itv</span> ?<span class="id">lte_fin</span>/= -<span class="id">EFinB</span> =&gt; <span class="id">lebig</span>.<br/>
<span class="id">case</span>: <span class="id">ifPn</span> =&gt; <span class="id">a12</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">nneseries_esum</span>// <span class="id">esum_ge0</span>.<br/>
<span class="id">apply</span>/<span class="id">lee_addgt0Pr</span> =&gt; <span class="id">_</span> /<span class="id">posnumP</span>[<span class="id">e</span>].<br/>
<span class="id">rewrite</span> [<span class="id">e</span>%:<span class="id">num</span>]<span class="id">splitr</span> [<span class="kwd">in</span> <span class="id">leRHS</span>]<span class="id">EFinD</span> <span class="id">addeA</span> -<span class="id">lee_subl_addr</span>//.<br/>
<span class="id">apply</span>: <span class="id">le_trans</span> (<span class="id">epsilon_trick</span> <span class="id">_</span> <span class="id"><a name="i:34">_</a></span> <span class="id">_</span>) =&gt; //=.<br/>
<span class="id">have</span> <span class="id">eVn_gt0</span> <span class="id">n</span> : 0 &lt; <span class="id">e</span>%:<span class="id">num</span> / 2 / (2 ^ <span class="id">n</span>.+1)%:<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">divr_gt0</span>// <span class="id">ltr0n</span>// <span class="id">expn_gt0</span>.<br/>
<span class="id">have</span> <span class="id">eVn_ge0</span> <span class="id">n</span> := <span class="id">ltW</span> (<span class="id">eVn_gt0</span> <span class="id">n</span>).<br/>
<span class="id">pose</span> <span class="id">Aoo</span> <span class="id">i</span> : <span class="id">set</span> (<span class="id">ocitv_type</span> <span class="id">R</span>) :=<br/>
&nbsp;&nbsp;`](<span class="id">b</span> <span class="id">i</span>).1, (<span class="id">b</span> <span class="id">i</span>).2 + <span class="id">e</span>%:<span class="id">num</span> / 2 / (2 ^ <span class="id">i</span>.+1)%:<span class="id">R</span>[%<span class="id">classic</span>.<br/>
<span class="id">pose</span> <span class="id">Aoc</span> <span class="id">i</span> : <span class="id">set</span> (<span class="id">ocitv_type</span> <span class="id">R</span>) :=<br/>
&nbsp;&nbsp;`](<span class="id">b</span> <span class="id">i</span>).1, (<span class="id">b</span> <span class="id">i</span>).2 + <span class="id">e</span>%:<span class="id"><a href="mathcomp.classical.classical_sets.html#subset_trans">num</a></span> / 2 / (2 ^ <span class="id">i</span>.+1)%:<span class="id">R</span>]%<span class="id">classic</span>.<br/>
<span class="id">have</span>: `[<span class="id">a</span>.1 + <span class="id">e</span>%:<span class="id">num</span> / 2, <span class="id">a</span>.2] `&lt;=` \<span class="id">bigcup_i</span> <span class="id">Aoo</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">subset_trans</span> <span class="id">_</span> `]<span class="id">a</span>.1, <span class="id">a</span>.2]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> /= !<span class="id">in_itv</span> /= =&gt; /<span class="id"><a href="mathcomp.analysis.normedtype.html#segment_compact">andP</a></span>[+ -&gt; //].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">lt_le_trans</span>-&gt; //; <span class="id">rewrite</span> <span class="id">ltr_addl</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (<span class="id">subset_trans</span> <span class="id">lebig</span>); <span class="id">apply</span>: <span class="id">subset_bigcup</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">AE</span> /<span class="id">Aoo</span>/=.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> !<span class="id">in_itv</span> /= =&gt; /<span class="id">andP</span>[-&gt; /<span class="id">le_lt_trans</span>-&gt;]//=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_addl</span>.<br/>
<span class="id">have</span> := @<span class="id">segment_compact</span> <span class="id">_</span> (<span class="id">a</span>.1 + <span class="id">e</span>%:<span class="id">num</span> / 2) <span class="id">a</span>.2; <span class="id">rewrite</span> <span class="id">compact_cover</span>.<br/>
<span class="id">move</span>=&gt; /[<span class="id">apply</span>]-[<span class="id">i</span> <span class="id">_</span>|<span class="id">X</span> <span class="id">_</span> <span class="id">Xc</span>]; <span class="id">first</span> <span class="id">exact</span>: <span class="id">interval_open</span>.<br/>
<span class="id">have</span>: `](<span class="id">a</span>.1 + <span class="id">e</span>%:<span class="id">num</span> / 2), <span class="id">a</span>.2] `&lt;=` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span>` <span class="id">X</span>]) <span class="id">Aoc</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">x</span> /<span class="id">subset_itv_oc_cc</span> /<span class="id">Xc</span> [<span class="id">i</span> /= <span class="id">Xi</span>] <span class="id">Aooix</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">i</span> =&gt; //; <span class="id">apply</span>: <span class="id">subset_itv_oo_oc</span> <span class="id">Aooix</span>.<br/>
<span class="id">have</span> /[<span class="id">apply</span>] := @<span class="id">content_sub_fsum</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;[<span class="id">the</span> <span class="id">content</span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id">hlength</span> : <span class="id">set</span> (<span class="id">ocitv_type</span> <span class="id">R</span>) -&gt; <span class="id">_</span>] <span class="id">_</span> [<span class="id"><a href="mathcomp.analysis.esum.html#esum_ge">set</a></span>` <span class="id">X</span>].<br/>
<span class="id">move</span>=&gt; /(<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)/<span class="id">Box</span>[]//=; <span class="id">apply</span>: <span class="id">le_le_trans</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">hlength_itv</span> ?<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_finite">lte_fin</a></span> -?<span class="id">EFinD</span>/= -<span class="id">addrA</span> -<span class="id">opprD</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">ltP</span> =&gt; //; <span class="id">rewrite</span> <span class="id">lee_fin</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength_itv">subr_le0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">nneseries_esum</span>//; <span class="id">last</span> <span class="kwd">by</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">move</a></span>=&gt; *; <span class="id">rewrite</span> <span class="id">adde_ge0</span>//= ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#adde_ge0">lee_fin</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">esum_ge</span>//; <span class="kwd">exists</span> [<span class="id">set</span>` <span class="id">X</span>] =&gt; //; <span class="id">rewrite</span> <span class="id">fsbig_finite</span>// ?<span class="id">set_fsetK</span>//=.<br/>
<span class="id">rewrite</span> <span class="id">fsbig_finite</span>//= <span class="id">set_fsetK</span>//.<br/>
<span class="id">rewrite</span> <span class="id">lee_sum</span> // =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> ?<span class="id">AE</span>// !<span class="id">hlength_itv</span>/= ?<span class="id">lte_fin</span> -?<span class="id">EFinD</span>/=.<br/>
<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength_sigma_sub_additive">do</a></span> !<span class="id">case</span>: <span class="id">ifPn</span> =&gt; //= ?; <span class="id">do</span> ?<span class="kwd">by</span> <span class="id">rewrite</span> ?<span class="id">adde_ge0</span> ?<span class="id">lee_fin</span>// ?<span class="id">subr_ge0</span>// ?<span class="id">ltW</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_stieltjes_measure.html#ocitv_type">addrAC</a></span>.<br/>
<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength_extension.R">rewrite</a></span> <span class="id">addrAC</span> <span class="id">lee_fin</span> <span class="id">ler_add</span>// <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">subr_le0</a></span> <span class="id">leNgt</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">Content_SubSigmaAdditive_isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="id">hlength</span> <span class="id">hlength_sigma_sub_additive</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">hlength_sigma_finite</span> : <span class="id">sigma_finite</span> <span class="id">setT</span> (<span class="id">hlength</span> : <span class="id">set</span> (<span class="id">ocitv_type</span> <span class="id">R</span>) -&gt; <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
<span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">k</span> : <span class="id">nat</span> =&gt; `] (- <span class="id">k</span>%:<span class="id">R</span>)%<span class="id"><a href="mathcomp.analysis.measure.html#Measure.on">R</a></span>, <span class="id">k</span>%:<span class="id">R</span>]%<span class="id">classic</span>); <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">bigcup_itvT</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">split</span> =&gt; //; <span class="id">rewrite</span> <span class="id">hlength_itv</span>/= -<span class="id">EFinB</span>; <span class="id">case</span>: <span class="id">ifP</span>; <span class="id"><a href="mathcomp.analysis.measure.html#measure_extension_sigma_finite">rewrite</a></span> <span class="id">ltry</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure.hlength_sigma_finite">lebesgue_measure</a></span> := <span class="id">measure_extension</span> [<span class="id">the</span> <span class="id">measure</span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id">hlength</span>].<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">Measure.on</span> <span class="id">lebesgue_measure</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">sigmaT_finite_lebesgue_measure</span> : <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#LebesgueMeasure">sigma_finite</a></span> <span class="id">setT</span> <span class="id">lebesgue_measure</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
 <span class="id">exact</span>/<span class="id">measure_extension_sigma_finite</span>/<span class="id">hlength_sigma_finite</span>. Qed.</div>
<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#salgebraType">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id">isSigmaFinite.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="id">lebesgue_measure</span> <span class="id">sigmaT_finite_lebesgue_measure</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">hlength_extension</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">LebesgueMeasure</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">lebesgue_measure</span> {<span class="id">R</span> : <span class="id">realType</span>} :<br/>
&nbsp;&nbsp;<span class="id">set</span> [<span class="id">the</span> <span class="id">measurableType</span> <span class="id">_</span>.-<span class="id">sigma</span> <span class="id">of</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">salgebraType</span> <span class="id">R</span>.-<span class="id">ocitv</span>.-<span class="id">measurable</span>] -&gt; \<span class="id">bar</span> <span class="id">R</span> :=<br/>
&nbsp;&nbsp;[<span class="id">the</span> <span class="id">measure</span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id">lebesgue_stieltjes_measure</span> [<span class="id">the</span> <span class="id">cumulative</span> <span class="id">_</span> <span class="id">of</span> <span class="id">idfun</span>]].<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">R</span> : <span class="id">realType</span>) := <span class="id">Measure.on</span> (@<span class="id">lebesgue_measure</span> <span class="id">R</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a name="ps_pinfty">_</a></span> (<span class="id">R</span> : <span class="id">realType</span>) :=<br/>
&nbsp;&nbsp;<span class="id">SigmaFiniteContent.on</span> (@<span class="id">lebesgue_measure</span> <span class="id">R</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">ps_infty</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="kwd">Type</span>}.<br/>
<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#ps_infty">Local</a></span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">ps_infty</span> : <span class="id">set</span> \<span class="id">bar</span> <span class="id">T</span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id">ps_infty0</span> : <span class="id">ps_infty</span> <span class="id">set0</span><br/>
| <span class="id">ps_ninfty</span> : <span class="id">ps_infty</span> [<span class="id">set</span> -<span class="id">oo</span>]<br/>
| <span class="id">ps_pinfty</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">ps_infty</a></span> [<span class="id">set</span> +<span class="id">oo</span>]<br/>
| <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#ps_infty.T">ps_inftys</a></span> : <span class="id">ps_infty</span> [<span class="id">set</span> -<span class="id">oo</span>; +<span class="id">oo</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">ps_inftyP</span> (<span class="id">A</span> : <span class="id">set</span> \<span class="id">bar</span> <span class="id">T</span>) : <span class="id">ps_infty</span> <span class="id">A</span> &lt;-&gt; <span class="id">A</span> `&lt;=` [<span class="id">set</span> -<span class="id">oo</span>; +<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
<span class="id">split</span> =&gt; [[]//|<span class="id">Aoo</span>].<br/>
<span class="kwd">by</span> <span class="id">have</span> [] := <span class="id">subset_set2</span> <span class="id">Aoo</span>; <span class="id">move</span>=&gt; -&gt;; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setCU_Efin</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">B</span> : <span class="id">set</span> \<span class="id">bar</span> <span class="id">T</span>) : <span class="id">ps_infty</span> <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;~` (<span class="id">EFin</span> @` <span class="id">A</span>) `&amp;` ~` <span class="id">B</span> = (<span class="id">EFin</span> @` ~` <span class="id">A</span>) `|` ([<span class="id">set</span> -<span class="id">oo</span>%<span class="id">E</span>; +<span class="id">oo</span>%<span class="id">E</span>] `&amp;` ~` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
<span class="id">move</span>=&gt; <span class="id">ps_inftyB</span>.<br/>
<span class="id">have</span> -&gt; : ~` (<span class="id">EFin</span> @` <span class="id">A</span>) = <span class="id">EFin</span> @` (~` <span class="id">A</span>) `|` [<span class="id">set</span> -<span class="id">oo</span>; +<span class="id"><a name="salgebra_ereal">oo</a></span>]%<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">EFin_setC</span> <span class="id">setDKU</span> // =&gt; <span class="id">x</span> [|] -&gt; -[].<br/>
<span class="id">rewrite</span> <span class="id">setIUl</span>; <span class="id">congr</span> (<span class="id">_</span> `|` <span class="id">_</span>); <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; -[<span class="id">x</span>| |]; <span class="id">split</span>; <span class="id">try</span> <span class="kwd">by</span> <span class="id">case</span>.<br/>
<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">move</a></span>=&gt; [] <span class="id">x</span>' <span class="id">Ax</span>' [] &lt;-{<span class="id">x</span>}; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFin">split</a></span>; [<span class="kwd">exists</span> <span class="id">x</span>'|<span class="id"><a name="A:51">case</a></span>: <span class="id">ps_inftyB</span> =&gt; // -[]].<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">ps_infty</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#emeasurable">salgebra_ereal</a></span>.<br/>
<span class="kwd">Variables</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">G</span> : <span class="id">set</span> (<span class="id"><a href="mathcomp.analysis.measure.html#measurable0">set</a></span> <span class="id">R</span>)).<br/>
<span class="kwd">Let</span> <span class="id">measurableR</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">R</span>) := <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">emeasurable</span> : <span class="id">set</span> (<span class="id">set</span> \<span class="id"><a name="X:53">bar</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">R</a></span>) :=<br/>
&nbsp;&nbsp;[<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#salgebra_ereal.R">set</a></span> <span class="id">EFin</span> @` <span class="id">A</span> `|` <span class="id">B</span> | <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#emeasurable">A</a></span> <span class="kwd">in</span> <span class="id">measurableR</span> &amp; <span class="id">B</span> <span class="kwd">in</span> <span class="id">ps_infty</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">emeasurable0</span> : <span class="id">emeasurable</span> <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
<span class="kwd">exists</span> <span class="id">set0</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableC">measurable0</a></span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">set0</span>; <span class="id">rewrite</span> ?<span class="id">setU0</span>// ?<span class="id">image_set0</span>//; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">emeasurableC</span> (<span class="id">X</span> : <span class="id">set</span> \<span class="id">bar</span> <span class="id">R</span>) : <span class="id">emeasurable</span> <span class="id">X</span> -&gt; <span class="id">emeasurable</span> (~` <span class="id">X</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
<span class="id">move</span> =&gt; -[<span class="id">A</span> <span class="id">mA</span>] [<span class="id">B</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#salgebra_ereal.R">PooB</a></span> &lt;-]; <span class="id">rewrite</span> <span class="id">setCU</span> <span class="id">setCU_Efin</span> //.<br/>
<span class="kwd">exists</span> (~` <span class="id">A</span>); [<span class="id">exact</span>: <span class="id">measurableC</span> | <span class="kwd">exists</span> ([<span class="id">set</span> -<span class="id">oo</span>%<span class="id">E</span>; +<span class="id">oo</span>%<span class="id">E</span>] `&amp;` ~` <span class="id">B</span>) =&gt; //].<br/>
<span class="id">case</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">PooB</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setC0</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDidPl">setIT</a></span>; <span class="id">constructor</span>.<br/>
- <span class="id">rewrite</span> <span class="id">setIUl</span> <span class="id">setICr</span> <span class="id">set0U</span> -<span class="id">setDE</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">_</span> -&gt;] := @<span class="id">setDidPl</span> (\<span class="id">bar</span> <span class="id">R</span>) [<span class="id">set</span> +<span class="id">oo</span>%<span class="id">E</span>] [<span class="id">set</span> -<span class="id">oo</span>%<span class="id">E</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; // -[-&gt;].<br/>
- <span class="id">rewrite</span> <span class="id">setIUl</span> <span class="id">setICr</span> <span class="id">setU0</span> -<span class="id">setDE</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">_</span> -&gt;] := @<span class="id">setDidPl</span> (\<span class="id">bar</span> <span class="id"><a name="i:56">R</a></span>) [<span class="id">set</span> -<span class="id">oo</span>%<span class="id">E</span>] [<span class="id">set</span> +<span class="id">oo</span>%<span class="id">E</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; // -[-&gt;].<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setICr</span>; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcupT_emeasurable</span> (<span class="id">F</span> : (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">set</a></span> \<span class="id">bar</span> <span class="id">R</span>)^<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#salgebra_ereal.R">nat</a></span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">emeasurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt; <span class="id">emeasurable</span> (\<span class="id">bigcup_i</span> (<span class="id">F</span> <span class="id">i</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
<span class="id">move</span>=&gt; <span class="id">mF</span>; <span class="id">pose</span> <span class="id">P</span> := <span class="kwd">fun</span> <span class="id">i</span> <span class="id">j</span> =&gt; <span class="id">measurableR</span> <span class="id">j</span>.1 /\ <span class="id">ps_infty</span> <span class="id">j</span>.2 /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">F</span> <span class="id">i</span> = [<span class="id">set</span> <span class="id">x</span>%:<span class="id">E</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">j</span>.1] `|` <span class="id">j</span>.2.<br/>
<span class="id">have</span> [<span class="id">f</span> <span class="id">fi</span>] : {<span class="id">f</span> : <span class="id">nat</span> -&gt; (<span class="id">set</span> <span class="id">R</span>) * (<span class="id">set</span> \<span class="id">bar</span> <span class="id">R</span>) &amp; <span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> (<span class="id">f</span> <span class="id">i</span>) }.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">choice</span> =&gt; <span class="id">i</span>; <span class="id">have</span> [<span class="id">x</span> <span class="id">mx</span> [<span class="id">y</span> <span class="id">PSoo</span>'<span class="id">y</span>] <span class="id">xy</span>] := <span class="id">mF</span> <span class="id">i</span>; <span class="kwd">exists</span> (<span class="id">x</span>, <span class="id">y</span>).<br/>
<span class="kwd">exists</span> (\<span class="id">bigcup_i</span> (<span class="id">f</span> <span class="id">i</span>).1).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcupT_measurable</span> =&gt; <span class="id">i</span>; <span class="id">exact</span>: (<span class="id">fi</span> <span class="id">i</span>).1.<br/>
<span class="kwd">exists</span> (\<span class="id">bigcup_i</span> (<span class="id">f</span> <span class="id">i</span>).2).<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">ps_inftyP</span> =&gt; <span class="id">x</span> [<span class="id">n</span> <span class="id">_</span>] <span class="id">fn2x</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">ps_inftyP</span> : <span class="id">ps_infty</span>(<span class="id">f</span> <span class="id">n</span>).2 <span class="kwd">by</span> <span class="id">have</span> [<span class="id">_</span> []] := <span class="id">fi</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>.<br/>
<span class="id">rewrite</span> [<span class="id">RHS</span>](@<span class="id">eq_bigcupr</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">i</span> =&gt; [<span class="id">set</span> <span class="id">x</span>%:<span class="id">E</span> | <span class="id">x</span> <span class="kwd">in</span> (<span class="id">f</span> <span class="id">i</span>).1] `|` (<span class="id">f</span> <span class="id">i</span>).2)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">have</span> [<span class="id">_</span> []] := <span class="id">fi</span> <span class="id">i</span>.<br/>
<span class="id">rewrite</span> <span class="id">bigcupU</span>; <span class="id">congr</span> (<span class="id">_</span> `|` <span class="id">_</span>).<br/>
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">i</span> /=; <span class="id">split</span>=&gt; [[<span class="id">r</span> [<span class="id">n</span> <span class="id">_</span> <span class="id">fn1r</span> &lt;-{<span class="id">i</span>}]]|[<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#bigcupT_emeasurable">n</a></span> <span class="id">_</span> [<span class="id">r</span> <span class="id">fn1r</span> &lt;-{<span class="id">i</span>}]]];<br/>
&nbsp;<span class="kwd">by</span> [<span class="kwd">exists</span> <span class="id">n</span> =&gt; //; <span class="kwd">exists</span> <span class="id">r</span> | <span class="kwd">exists</span> <span class="id">r</span> =&gt; //; <span class="kwd">exists</span> <span class="id">n</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">ereal_isMeasurable</span> :<br/>
&nbsp;&nbsp;<span class="id">isMeasurable</span> <span class="id">default_measure_display</span> (\<span class="id">bar</span> <span class="id">R</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a name="punct_eitv_bndy">isMeasurable.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">Pointed.class</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">emeasurable0</span> <span class="id">emeasurableC</span> <span class="id">bigcupT_emeasurable</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">salgebra_ereal</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">puncture_ereal_itv</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realDomainType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">y</span> : <span class="id">R</span>) (<span class="id">b</span> : <span class="id">bool</span>).<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">punct_eitv_bndy</span> <span class="id">b</span> <span class="id">y</span> : [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">y</span>%:<span class="id">E</span>) +<span class="id">oo</span>%<span class="id">O</span>] =<br/>
&nbsp;&nbsp;<span class="id">EFin</span> @` [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">y</span>) +<span class="id">oo</span>%<span class="id">O</span>] `|` [<span class="id">set</span> +<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>; <span class="id">rewrite</span> /= <span class="id">in_itv</span> <span class="id">andbT</span>.<br/>
- <span class="id">move</span>: <span class="id">x</span> =&gt; [<span class="id">x</span>| |] <span class="id">yxb</span>; [|<span class="kwd">by</span> <span class="id">right</span>|<span class="kwd">by</span> <span class="id">case</span>: <span class="id">b</span> <span class="id">yxb</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">x</span> =&gt; //; <span class="id">rewrite</span> <span class="id">in_itv</span> /= <span class="id">andbT</span>; <span class="id">case</span>: <span class="id">b</span> <span class="id">yxb</span>.<br/>
- <span class="id">move</span>=&gt; [[<span class="id">r</span>]|-&gt;].<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_itv</span> /= <span class="id">andbT</span> =&gt; <span class="id">yxb</span> &lt;-; <span class="id">case</span>: <span class="id">b</span> <span class="id">yxb</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">case</span>: <span class="id">b</span> =&gt; /=; <span class="id">rewrite</span> ?(<span class="id">ltry</span>, <span class="id">leey</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">punct_eitv_Nybnd</span> <span class="id">b</span> <span class="id">y</span> : [<span class="id">set</span>` <span class="id">Interval</span> -<span class="id">oo</span>%<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">O</a></span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">y</span>%:<span class="id">E</span>)] =<br/>
&nbsp;&nbsp;[<span class="id">set</span> -<span class="id">oo</span>%<span class="id">E</span>] `|` <span class="id">EFin</span> @` [<span class="id">set</span> <span class="id">x</span> | <span class="id">x</span> \<span class="kwd">in</span> <span class="id">Interval</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ltNyr">oo</a></span>%<span class="id">O</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">y</span>)].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>; <span class="id">rewrite</span> /= <span class="id">in_itv</span>.<br/>
- <span class="id"><a name="punct_eitv_setTR">move</a></span>: <span class="id">x</span> =&gt; [<span class="id">x</span>| |] <span class="id">yxb</span>; [|<span class="kwd">by</span> <span class="id">case</span>: <span class="id">b</span> <span class="id">yxb</span>|<span class="kwd">by</span> <span class="id">left</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">right</span>; <span class="kwd">exists</span> <span class="id">x</span> =&gt; //; <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">rewrite</a></span> <span class="id">in_itv</span> /= <span class="id">andbT</span>; <span class="id">case</span>: <span class="id">b</span> <span class="id">yxb</span>.<br/>
- <span class="id">move</span>=&gt; [-&gt;|[<span class="id">r</span>]].<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">case</span>: <span class="id">b</span> =&gt; /=; <span class="id">rewrite</span> ?(<span class="id">ltNyr</span>, <span class="id">leNye</span>).<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_itv</span> /= =&gt; <span class="id">yxb</span> &lt;-; <span class="id">case</span>: <span class="id">b</span> <span class="id">yxb</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">punct_eitv_setTR</span> : <span class="id">range</span> (@<span class="id">EFin</span> <span class="id">R</span>) `|` [<span class="id">set</span> +<span class="id">oo</span>] = [<span class="id">set</span>~ -<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [<span class="id">a</span> [[<span class="id">a</span>' <span class="id">_</span> &lt;-]|-&gt;]|] //.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span>| |] //= <span class="id">_</span>; [<span class="id">left</span>; <span class="kwd">exists</span> <span class="id">x</span>|<span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">punct_eitv_setTL</span> : <span class="id"><a name="measurableTypeR">range</a></span> (@<span class="id">EFin</span> <span class="id">R</span>) `|` [<span class="id">set</span> -<span class="id">oo</span>] = [<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#salgebra_R_ssets.R">set</a></span>~ +<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [<span class="id">a</span> [[<span class="id">a</span>' <span class="id">_</span> &lt;-]|-&gt;]|] //.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span>| |] //= <span class="id">_</span>; [<span class="id">left</span>; <span class="kwd">exists</span> <span class="id">x</span>|<span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">puncture_ereal_itv</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">salgebra_R_ssets</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#salgebra_R_ssets.R">realType</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">measurableTypeR</span> := <span class="id">salgebraType</span> (<span class="id">R</span>.-<span class="id">ocitv</span>.-<span class="id">measurable</span>).<br/>
<span class="kwd">Definition</span> <span class="id">measurableR</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id"><a href="mathcomp.analysis.measure.html#bigcupT_measurable">R</a></span>) :=<br/>
&nbsp;&nbsp;(<span class="id">R</span>.-<span class="id">ocitv</span>.-<span class="id">measurable</span>).-<span class="id">sigma</span>.-<span class="id">measurable</span>.<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">R_isMeasurable</span> :<br/>
&nbsp;&nbsp;<span class="id">isMeasurable</span> <span class="id">default_measure_display</span> <span class="id">R</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.real_interval.html#set1_bigcap_oc">isMeasurable.Build</a></span> <span class="id">_</span> <span class="id">measurableTypeR</span> (<span class="id">Pointed.class</span> <span class="id">R</span>) <span class="id">measurableR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">measurable0</span> (@<span class="id">measurableC</span> <span class="id">_</span> <span class="id">_</span>) (@<span class="id">bigcupT_measurable</span> <span class="id">_</span> <span class="id">_</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_set1</span> (<span class="id">r</span> : <span class="id">R</span>) : <span class="id">measurable</span> [<span class="id">set</span> <span class="id">r</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
<span class="id">rewrite</span> <span class="id">set1_bigcap_oc</span>; <span class="id">apply</span>: <span class="id">bigcap_measurable</span> =&gt; <span class="id">k</span> // <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#salgebra_R_ssets.R">is_ocitv</a></span>.<br/>
Qed.</div>
#[<span class="id">local</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">measurable_set1</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_itv</span> (<span class="id">i</span> : <span class="id">interval</span> <span class="id">R</span>) : <span class="id">measurable</span> [<span class="id">set</span>` <span class="id">i</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
<span class="id">have</span> <span class="id">moc</span> (<span class="id">a</span> <span class="id">b</span> : <span class="id">R</span>) : <span class="id">measurable</span> `]<span class="id">a</span>, <span class="id">b</span>]%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="id">apply</span>: <span class="id">is_ocitv</span>.<br/>
<span class="id">have</span> <span class="id">mopoo</span> (<span class="id">x</span> : <span class="id">R</span>) : <span class="id">measurable</span> `]<span class="id">x</span>, +<span class="id">oo</span>[%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">itv_bnd_infty_bigcup</span>; <span class="id">exact</span>: <span class="id">bigcup_measurable</span>.<br/>
<span class="id">have</span> <span class="id">mnooc</span> (<span class="id">x</span> : <span class="id">R</span>) : <span class="id">measurable</span> `]-<span class="id">oo</span>, <span class="id">x</span>]%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setCitvr</span>; <span class="id">exact</span>/<span class="id">measurableC</span>.<br/>
<span class="id">have</span> <span class="id">ooE</span> (<span class="id">a</span> <span class="id">b</span> : <span class="id">R</span>) : `]<span class="id">a</span>, <span class="id">b</span>[%<span class="id">classic</span> = `]<span class="id">a</span>, <span class="id">b</span>]%<span class="id">classic</span> `\ <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: (<span class="id"><a href="mathcomp.analysis.measure.html#measurable">boolP</a></span> (<span class="id">a</span> &lt; <span class="id">b</span>)) =&gt; <span class="id">ab</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">set_itv_ge</span> ?<span class="id">set0D</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setUitv1</span>// <span class="id">setUDK</span>// =&gt; <span class="id">x</span> [-&gt;]; <span class="id">rewrite</span> /= <span class="id">in_itv</span>/= <span class="id">ltxx</span> <span class="id">andbF</span>.<br/>
<span class="id">have</span> <span class="id">moo</span> (<span class="id"><a name="b:92">a</a></span> <span class="id">b</span> : <span class="id">R</span>) : <span class="id">measurable</span> `]<span class="id">a</span>, <span class="id">b</span>[%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ooE</span>; <span class="id">exact</span>: <span class="id">measurableD</span>.<br/>
<span class="id">have</span> <span class="id">mcc</span> (<span class="id">a</span> <span class="id">b</span> : <span class="id">R</span>) : <span class="id">measurable</span> `[<span class="id">a</span>, <span class="id">b</span>]%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurableU">case</a></span>: (<span class="id">boolP</span> (<span class="id">a</span> &lt;= <span class="id">b</span>)) =&gt; <span class="id">ab</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itv_ge</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setU1itv</span>//; <span class="id">apply</span>/<span class="id">measurableU</span>.<br/>
<span class="id">have</span> <span class="id">mco</span> (<span class="id">a</span> <span class="id">b</span> : <span class="id">R</span>) : <span class="id">measurable</span> `[<span class="id">a</span>, <span class="id">b</span>[%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: (<span class="id">boolP</span> (<span class="id">a</span> &lt; <span class="id">b</span>)) =&gt; <span class="id">ab</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itv_ge</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setU1itv</span>//; <span class="id">apply</span>/<span class="id">measurableU</span>.<br/>
<span class="id">have</span> <span class="id">oooE</span> (<span class="id">b</span> : <span class="id">R</span>) : `]-<span class="id">oo</span>, <span class="id">b</span>[%<span class="id">classic</span> = `]-<span class="id">oo</span>, <span class="id">b</span>]%<span class="id">classic</span> `\ <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setUitv1</span>// <span class="id">setUDK</span>// =&gt; <span class="id">x</span> [-&gt;]; <span class="id">rewrite</span> /= <span class="id">in_itv</span>/= <span class="id">ltxx</span>.<br/>
<span class="id">case</span>: <span class="id">i</span> =&gt; [[[] <span class="id">a</span>|[]] [[] <span class="id">b</span>|[]]] =&gt; //; <span class="id">do</span> ?<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itv_ge</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setU1itv</span>//; <span class="id">exact</span>/<span class="id">measurableU</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">oooE</span>; <span class="id">exact</span>/<span class="id">measurableD</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itv_infty_infty</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;(<span class="id">ereal_isMeasurable</span> (<span class="id">R</span>.-<span class="id">ocitv</span>.-<span class="id">measurable</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_image_EFin</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">R</span>) : <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_image_EFin">measurableR</a></span> <span class="id">A</span> -&gt; <span class="id">measurable</span> (<span class="id">EFin</span> @` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mA</span>; <span class="kwd">exists</span> <span class="id">A</span> =&gt; //; <span class="kwd">exists</span> <span class="id">set0</span>; [<span class="id">constructor</span>|<span class="id">rewrite</span> <span class="id">setU0</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">emeasurable_set1</span> (<span class="id">x</span> : \<span class="id">bar</span> <span class="id">R</span>) : <span class="id">measurable</span> [<span class="id">set</span> <span class="id">x</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
<span class="id">case</span>: <span class="id">x</span> =&gt; [<span class="id">r</span>| |].<br/>
- <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#image_set0">rewrite</a></span> -<span class="id">image_set1</span>; <span class="id">apply</span>: <span class="id">measurable_image_EFin</span>; <span class="id">apply</span>: <span class="id">measurable_set1</span>.<br/>
- <span class="kwd">exists</span> <span class="id">set0</span> =&gt; //; [<span class="kwd">exists</span> [<span class="id">set</span> +<span class="id">oo</span>%<span class="id">E</span>]; [<span class="kwd">by</span> <span class="id">constructor</span>|]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">image_set0</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#salgebra_R_ssets.R">set0U</a></span>.<br/>
- <span class="kwd">exists</span> <span class="id">set0</span> =&gt; //; [<span class="kwd">exists</span> [<span class="id">set</span> -<span class="id">oo</span>%<span class="id">E</span>]; [<span class="kwd">by</span> <span class="id">constructor</span>|]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">image_set0</span> <span class="id">set0U</span>.<br/>
Qed.</div>
#[<span class="id">local</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">emeasurable_set1</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__itv_cpinfty_pinfty</span> : `[+<span class="id">oo</span>%<span class="id">E</span>, +<span class="id">oo</span>[%<span class="id">classic</span> = [<span class="id">set</span> +<span class="id">oo</span>%<span class="id">E</span>] :&gt; <span class="id">set</span> (\<span class="id">bar</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">itv_cyy</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">itv_cyy</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">itv_cpinfty_pinfty</span> := <span class="id">__deprecated__itv_cpinfty_pinfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="__deprecated__itv_cninfty_pinfty">__deprecated__itv_opinfty_pinfty</a></span> : `]+<span class="id">oo</span>%<span class="id">E</span>, +<span class="id">oo</span>[%<span class="id">classic</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">set0</a></span> :&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#salgebra_R_ssets.R">R</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.real_interval.html#itv_cNyy">itv_oyy</a></span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">itv_oyy</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">itv_opinfty_pinfty</span> := <span class="id">__deprecated__itv_opinfty_pinfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__itv_cninfty_pinfty</span> : `[-<span class="id">oo</span>%<span class="id">E</span>, +<span class="id">oo</span>[%<span class="id">classic</span> = <span class="id">setT</span> :&gt; <span class="id">set</span> (\<span class="id">bar</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">itv_cNyy</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">itv_cNyy</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">itv_cninfty_pinfty</span> := <span class="id">__deprecated__itv_cninfty_pinfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__itv_oninfty_pinfty</span> :<br/>
&nbsp;&nbsp;`]-<span class="id">oo</span>%<span class="id">E</span>, +<span class="id">oo</span>[%<span class="id">classic</span> = ~` [<span class="id">set</span> -<span class="id">oo</span>]%<span class="id">E</span> :&gt; <span class="id">set</span> (\<span class="id">bar</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">itv_oNyy</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">itv_oNyy</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">itv_oninfty_pinfty</span> := <span class="id">__deprecated__itv_oninfty_pinfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id">emeasurable_itv_bndy</span> <span class="id">b</span> (<span class="id">y</span> : \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable</span> [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">y</span>) +<span class="id">oo</span>%<span class="id">O</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
<span class="id">move</span>: <span class="id">y</span> =&gt; [<span class="id">y</span>| |].<br/>
- <span class="kwd">exists</span> [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">y</span>) +<span class="id">oo</span>%<span class="id">O</span>]; <span class="id">first</span> <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">set</span> +<span class="id">oo</span>%<span class="id">E</span>]; [<span class="id">constructor</span>|<span class="id">rewrite</span> -<span class="id">punct_eitv_bndy</span>].<br/>
- <span class="kwd">by</span> <span class="id">case</span>: <span class="id">b</span>; <span class="id">rewrite</span> ?<span class="id">itv_oyy</span> ?<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#salgebra_R_ssets.R">itv_cyy</a></span>.<br/>
- <span class="id">case</span>: <span class="id">b</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">itv_cNyy</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">itv_oNyy</span>; <span class="id">exact</span>/<span class="id">measurableC</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">emeasurable_itv_Nybnd</span> <span class="id">b</span> (<span class="id">y</span> : \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable</span> [<span class="id">set</span>` <span class="id">Interval</span> -<span class="id">oo</span>%<span class="id">O</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">y</span>)].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setCitvr</span>; <span class="id">exact</span>/<span class="id">measurableC</span>/<span class="id">emeasurable_itv_bndy</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">emeasurable_itv</span> (<span class="id">i</span> : <span class="id">interval</span> (\<span class="id">bar</span> <span class="id">R</span>)) :<br/>
&nbsp;&nbsp;<span class="id">measurable</span> ([<span class="id">set</span>` <span class="id"><a name="elebesgue_measure">i</a></span>]%<span class="id">classic</span> : <span class="id">set</span> \<span class="id">bar</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
<span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>]<span class="id">setCK</span>; <span class="id">apply</span>: <span class="id">measurableC</span>.<br/>
<span class="id">rewrite</span> <span class="id">set_interval.setCitv</span> /=; <span class="id">apply</span>: <span class="id">measurableU</span> =&gt; [|].<br/>
- <span class="kwd">by</span> <span class="id">move</span>: <span class="id">i</span> =&gt; [[<span class="id">b1</span> <span class="id">i1</span>|[|]] <span class="id">i2</span>] /=; <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#elebesgue_measure">rewrite</a></span> ?<span class="id">set_interval.set_itvE</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>: <span class="id">i</span> =&gt; [<span class="id">i1</span> [<span class="id">b2</span> <span class="id">i2</span>|[|]]] /=; <span class="id">rewrite</span> ?<span class="id">set_interval.set_itvE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">elebesgue_measure</span> : <span class="id">set</span> \<span class="id">bar</span> <span class="id">R</span> -&gt; \<span class="id">bar</span> <span class="id">R</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">S</span> =&gt; <span class="id">lebesgue_measure</span> (<span class="id">fine</span> @` (<span class="id">S</span> `\` [<span class="id">set</span> -<span class="id">oo</span>; +<span class="id">oo</span>]%<span class="id">E</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">elebesgue_measure0</span> : <span class="id">elebesgue_measure</span> <span class="id">set0</span> = 0%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">elebesgue_measure</span> <span class="id">set0D</span> <span class="id">image_set0</span> <span class="id">measure0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_image_fine</span> (<span class="id">X</span> : <span class="id">set</span> \<span class="id">bar</span> <span class="id">R</span>) : <span class="id">measurable</span> <span class="id">X</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> [<span class="id">set</span> <span class="id">fine</span> <span class="id">x</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">X</span> `\` [<span class="id">set</span> -<span class="id">oo</span>; +<span class="id">oo</span>]%<span class="id">E</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
<span class="id">case</span> =&gt; <span class="id">Y</span> <span class="id">mY</span> [<span class="id">X</span>' [ | &lt;-{<span class="id">X</span>} | &lt;-{<span class="id">X</span>} | &lt;-{<span class="id">X</span>} ]].<br/>
- <span class="id">rewrite</span> <span class="id">setU0</span> =&gt; &lt;-{<span class="id">X</span>}.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">Y</span>) // <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span> [[<span class="id">x</span>' <span class="id">Yx</span>' &lt;-{<span class="id">x</span>}/= <span class="id">_</span> &lt;-//]]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Yr</span>; <span class="kwd">exists</span> <span class="id">r</span>%:<span class="id">E</span>; <span class="id">split</span> =&gt; [|[]//]; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
- <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">Y</span>) // <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">x</span> [[[<span class="id">x</span>' <span class="id">Yx</span>' &lt;- <span class="id">_</span> &lt;-//]|]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; &lt;-; <span class="id">rewrite</span> <span class="id">not_orP</span> =&gt; -[]/(<span class="id">_</span> <span class="id">erefl</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">Yr</a></span>; <span class="kwd">exists</span> <span class="id">r</span>%:<span class="id">E</span> =&gt; //; <span class="id">split</span> =&gt; [|[]//]; <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
- <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">Y</span>) // <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">x</span> [[[<span class="id">x</span>' <span class="id">Yx</span>' &lt;-{<span class="id">x</span>} <span class="id">_</span> &lt;-//]|]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; -&gt;; <span class="id">rewrite</span> <span class="id">not_orP</span> =&gt; -[<span class="id">_</span>]/(<span class="id">_</span> <span class="id">erefl</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Yr</span>; <span class="kwd">exists</span> <span class="id">r</span>%:<span class="id">E</span> =&gt; //; <span class="id">split</span> =&gt; [|[]//]; <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
- <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">Y</span>) // <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setDUl</span> <span class="id">setDv</span> <span class="id">setU0</span> =&gt; -[<span class="id">_</span> [[<span class="id">x</span>' <span class="id">Yx</span>' &lt;-]] <span class="id">_</span> &lt;-].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Yr</span>; <span class="kwd">exists</span> <span class="id">r</span>%:<span class="id">E</span> =&gt; //; <span class="id">split</span> =&gt; [|[]//]; <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">elebesgue_measure_ge0</span> <span class="id">X</span> : (0 &lt;= <span class="id">elebesgue_measure</span> <span class="id">X</span>)%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
 <span class="id">exact</span>/<span class="id">measure_ge0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">semi_sigma_additive_elebesgue_measure</span> :<br/>
&nbsp;&nbsp;<span class="id">semi_sigma_additive</span> <span class="id">elebesgue_measure</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
<span class="id">move</span>=&gt; /= <span class="id">F</span> <span class="id">mF</span> <span class="id">tF</span> <span class="id">mUF</span>; <span class="id">rewrite</span> /<span class="id">elebesgue_measure</span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">lebesgue_measure</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">bigcup_n</span> (<span class="id">fine</span> @` (<span class="id">F</span> <span class="id">n</span> `\` [<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">set</a></span> -<span class="id">oo</span>; +<span class="id">oo</span>]%<span class="id">E</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span> [[<span class="id">n</span> <span class="id">_</span> <span class="id">Fnx</span> <span class="id">xoo</span> &lt;-]]]; <span class="kwd">exists</span> <span class="id">n</span> =&gt; //; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">n</span> <span class="id">_</span> [<span class="id">x</span> [<span class="id">Fnx</span> <span class="id">xoo</span> &lt;-{<span class="id">r</span>}]]]; <span class="kwd">exists</span> <span class="id">x</span> =&gt; //; <span class="id">split</span> =&gt; //; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="id">apply</span>: (@<span class="id">measure_semi_sigma_additive</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">the</span> <span class="id">measure</span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> (@<span class="id">lebesgue_measure</span> <span class="id">R</span>)]<br/>
&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">fine</span> @` (<span class="id">F</span> <span class="id">n</span> `\` [<span class="id">set</span> -<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">oo</a></span>; +<span class="id">oo</span>]%<span class="id">E</span>))).<br/>
- <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">have</span> := <span class="id">mF</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">X</span> <span class="id">mX</span> [<span class="id">X</span>' <span class="id">mX</span>']] <span class="id">XX</span>'<span class="id">Fn</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">measurable_image_fine</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">XX</span>'<span class="id">Fn</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">measurableU</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">measurable_image_EFin</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">mX</span>' =&gt; //; <span class="id">exact</span>: <span class="id">measurableU</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">x</span> [[<span class="id">a</span> [<span class="id">Fia</span> <span class="id">aoo</span> <span class="id">ax</span>] [<span class="id">b</span> [<span class="id">Fjb</span> <span class="id">boo</span>] <span class="id">bx</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">move</span>: <span class="id">tF</span> =&gt; /(<span class="id">_</span> <span class="id">i</span> <span class="id">j</span> <span class="id">Logic.I</span> <span class="id">Logic.I</span>); <span class="id">apply</span>.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.boolp.html#not_orP">suff</a></span> <span class="id">ab</span> : <span class="id">a</span> = <span class="id">b</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">a</span>; <span class="id">split</span> =&gt; //; <span class="id"><a href="mathcomp.classical.boolp.html#not_orP">rewrite</a></span> <span class="id">ab</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>: <span class="id">a</span> <span class="id">b</span> {<span class="id">Fia</span> <span class="id">Fjb</span>} <span class="id">aoo</span> <span class="id">boo</span> <span class="id"><a href="mathcomp.classical.boolp.html#not_orP">ax</a></span> <span class="id">bx</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">a</span>| |] [<span class="id">b</span>| |] /=.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.boolp.html#not_orP">move</a></span>=&gt; <span class="id">_</span> <span class="id">_</span> -&gt; -&gt;.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">not_orP</span> =&gt; -[<span class="id">_</span>]/(<span class="id">_</span> <span class="id">erefl</span>).<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">not_orP</span> =&gt; -[]/(<span class="id">_</span> <span class="id">erefl</span>).<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">not_orP</span> =&gt; -[<span class="id">_</span>]/(<span class="id">_</span> <span class="id">erefl</span>).<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">not_orP</span> =&gt; -[<span class="id">_</span>]/(<span class="id">_</span> <span class="id">erefl</span>).<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">not_orP</span> =&gt; -[<span class="id">_</span>]/(<span class="id">_</span> <span class="id">erefl</span>).<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">not_orP</span> =&gt; -[]/(<span class="id">_</span> <span class="id">erefl</span>).<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">not_orP</span> =&gt; -[]/(<span class="id">_</span> <span class="id">erefl</span>).<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">not_orP</span> =&gt; -[]/(<span class="id">_</span> <span class="id">erefl</span>).<br/>
- <span class="id">move</span>: <span class="id">mUF</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> {1}/<span class="id">measurable</span> /<span class="id">emeasurable</span> /= =&gt; -[<span class="id">X</span> <span class="id">mX</span> [<span class="id">Y</span> []]] {<span class="id">Y</span>}.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">setU0</span> =&gt; <span class="id">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">X</span>) // <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span> =&gt; [|<span class="id">Xr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; -[<span class="id">n</span> <span class="id">_</span> [<span class="id">x</span> [<span class="id">Fnx</span> <span class="id">xoo</span> &lt;-{<span class="id">r</span>}]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> : (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">x</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">h</span> =&gt; -[<span class="id">x</span>' <span class="id">Xx</span>' &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">n</span> <span class="id">_</span> <span class="id">Fnr</span>] : (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">r</span>%:<span class="id">E</span> <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">h</span>; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; //; <span class="kwd">exists</span> <span class="id">r</span>%:<span class="id"><a name="n:121">E</a></span> =&gt; //; <span class="id">split</span> =&gt; //; <span class="id">case</span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">X</span>) // <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span> =&gt; [|<span class="id">Xr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; -[<span class="id">n</span> <span class="id">_</span> [<span class="id">x</span> [<span class="id">Fnx</span> <span class="id">xoo</span> &lt;-]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> : (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">x</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">n</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">h</span> =&gt; -[[<span class="id">x</span>' <span class="id">Xx</span>' &lt;-//]|<span class="id">xoo</span>']; <span class="id">move</span>/<span class="id">not_orP</span> : <span class="id">xoo</span> =&gt; -[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">n</span> <span class="id">_</span> <span class="id">Fnr</span>] : (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">r</span>%:<span class="id">E</span> <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">h</span>; <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; //; <span class="kwd">exists</span> <span class="id">r</span>%:<span class="id">E</span> =&gt; //; <span class="id"><a href="mathcomp.classical.boolp.html#not_orP">split</a></span> =&gt; //; <span class="id">case</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;NB:&nbsp;almost&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;previous&nbsp;one,&nbsp;factorize?*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">X</span>) // <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span> =&gt; [|<span class="id">Xr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; -[<span class="id">n</span> <span class="id">_</span> [<span class="id">x</span> [<span class="id">Fnx</span> <span class="id">xoo</span> &lt;-]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> : (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">x</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">h</span> =&gt; -[[<span class="id">x</span>' <span class="id">Xx</span>' &lt;-//]|<span class="id">xoo</span>']; <span class="id">move</span>/<span class="id">not_orP</span> : <span class="id">xoo</span> =&gt; -[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">n</span> <span class="id">_</span> <span class="id">Fnr</span>] : (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">r</span>%:<span class="id">E</span> <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">h</span>; <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; //; <span class="kwd">exists</span> <span class="id">r</span>%:<span class="id">E</span> =&gt; //; <span class="id">split</span> =&gt; //; <span class="id">case</span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">X</span>) // <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span> =&gt; [|<span class="id">Xr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; -[<span class="id">n</span> <span class="id">_</span> [<span class="id">x</span> [<span class="id">Fnx</span> <span class="id">xoo</span> &lt;-]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> : (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">x</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">h</span> =&gt; -[[<span class="id">x</span>' <span class="id">Xx</span>' &lt;-//]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">n</span> <span class="id">_</span> <span class="id">Fnr</span>] : (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) <span class="id"><a href="mathcomp.analysis.measure.html#measurable">r</a></span>%:<span class="id">E</span> <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">h</span>; <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; //; <span class="kwd">exists</span> <span class="id">r</span>%:<span class="id">E</span> =&gt; //; <span class="id">split</span> =&gt; //; <span class="id">case</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">elebesgue_measure</span><br/>
&nbsp;&nbsp;<span class="id">elebesgue_measure0</span> <span class="id">elebesgue_measure_ge0</span><br/>
&nbsp;&nbsp;<span class="id">semi_sigma_additive_elebesgue_measure</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">salgebra_R_ssets</span>.<br/>
#[<span class="id">global</span>]<br/>
<span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable</span> [<span class="id">set</span> <span class="id">_</span>]) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id">measurable_set1</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">emeasurable_set1</span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>]<br/>
<span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable</span> [<span class="id">set</span>` <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#emeasurable_itv">_</a></span>] ) =&gt; <span class="id">exact</span>: <span class="id">measurable_itv</span> : <span class="id">core</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.2", <span class="id">note</span>="<span class="id">use</span> `<span class="id">emeasurable_itv</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">emeasurable_itv_bnd_pinfty</span> := <span class="id">emeasurable_itv</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.2", <span class="id">note</span>="<span class="id">use</span> `<span class="id">emeasurable_itv</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">emeasurable_itv_ninfty_bnd</span> := <span class="id">emeasurable_itv</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fine</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">D</span> : <span class="id">set</span> (\<span class="id">bar</span> <span class="id">R</span>)) : <span class="id">measurable</span> <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">fine</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
<span class="id">move</span>=&gt; <span class="id">mD</span> <span class="id">_</span> /= <span class="id">B</span> <span class="id">mB</span>; <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> `&amp;` <span class="id">_</span> = <span class="kwd">if</span> 0%<span class="id">R</span> \<span class="kwd">in</span> <span class="id">B</span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">D</span> `&amp;` ((<span class="id">EFin</span> @` <span class="id">B</span>) `|` [<span class="id">set</span> -<span class="id">oo</span>; +<span class="id">oo</span>]%<span class="id">E</span>) <span class="kwd">else</span> <span class="id">D</span> `&amp;` <span class="id">EFin</span> @` <span class="id">B</span>); <span class="id">last</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">first</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>=&gt; [[<span class="id">r</span> [<span class="id">Dr</span> <span class="id">Br</span>]|[<span class="id">Doo</span> <span class="id">B0</span>]|[<span class="id">Doo</span> <span class="id">B0</span>]]|[<span class="id">r</span>| |]].<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span> =&gt; <span class="id">_</span>; <span class="id">split</span> =&gt; //; <span class="id">left</span>; <span class="kwd">exists</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">r</a></span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableI">mem_set</a></span>//; <span class="id">split</span> =&gt; //; <span class="id">right</span>; <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_image_EFin">right</a></span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mem_set</span>//; <span class="id"><a href="mathcomp.analysis.measure.html#measurableU">split</a></span> =&gt; //; <span class="id">right</span>; <span class="id">left</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span> =&gt; [<span class="id">_</span> [<span class="id">Dr</span> [[<span class="id">s</span> + [<span class="id">sr</span>]]|[]//]]|<span class="id">_</span> [<span class="id">Dr</span> [<span class="id">s</span> + [<span class="id">sr</span>]]]]; <span class="id">rewrite</span> <span class="id">sr</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span> =&gt; [/[!<span class="id">inE</span>] <span class="id">B0</span> [<span class="id">Doo</span> [[]//|]] [//|<span class="id">_</span>]|<span class="id">B0</span> [<span class="id">Doo</span>//] []].<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span> =&gt; [/[!<span class="id">inE</span>] <span class="id">B0</span> [<span class="id">Doo</span> [[]//|]] [//|<span class="id">_</span>]|<span class="id">B0</span> [<span class="id">Doo</span>//] []].<br/>
<span class="id">case</span>: <span class="id">ifPn</span> =&gt; <span class="id">B0</span>; <span class="id">apply</span>/<span class="id">measurableI</span> =&gt; //; <span class="id">last</span> <span class="id">exact</span>: <span class="id">measurable_image_EFin</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableU</span>; [<span class="id">exact</span>: <span class="id"><a name="lebesgue_measure_itv.lebesgue_measure_itvoc">measurable_image_EFin</a></span>|<span class="id">exact</span>: <span class="id">measurableU</span>].<br/>
Qed.</div>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.lebesgue_stieltjes_measure.html#Cumulative.Exports.cumulative">fine</a></span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">exact</span>: <span class="id">measurable_fine</span>] : <span class="id">core</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id"><a href="mathcomp.analysis.measure.html#measure_extension">measurable_fine</a></span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_fine</span> := <span class="id">measurable_fine</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">lebesgue_measure_itv</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">lebesgue_measure_itvoc</span> (<span class="id">a</span> <span class="id">b</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;(<span class="id">lebesgue_measure</span> (`]<span class="id">a</span>, <span class="id">b</span>] : <span class="id">set</span> <span class="id">R</span>) =<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#lim">wlength</a></span> [<span class="id">the</span> <span class="id">cumulative</span> <span class="id">_</span> <span class="id">of</span> <span class="id">idfun</span>] `]<span class="id">a</span>, <span class="id">b</span>])%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
<span class="id">rewrite</span> /<span class="id">lebesgue_measure</span>/= /<span class="id">lebesgue_stieltjes_measure</span>/= /<span class="id">measure_extension</span>/=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">measurable_mu_extE</span>//; <span class="id">exact</span>: <span class="id">is_ocitv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">lebesgue_measure_itvoo_subr1</span> (<span class="id">a</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">lebesgue_measure</span> (`]<span class="id">a</span> - 1, <span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Exports.subsetPset">a</a></span>[%<span class="id">classic</span> : <span class="id">set</span> <span class="id">R</span>) = 1%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">itv_bnd_open_bigcup</a></span>//; <span class="id">transitivity</span> (<span class="id">lim</span> (<span class="id">lebesgue_measure</span> \<span class="id">o</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">k</span> =&gt; `]<span class="id">a</span> - 1, <span class="id">a</span> - <span class="id">k</span>.+1%:<span class="id">R</span>^-1]%<span class="id">classic</span> : <span class="id">set</span> <span class="id">R</span>))).<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">esym</span>/<span class="id">cvg_lim</span> =&gt; //; <span class="id">apply</span>: <span class="id">nondecreasing_cvg_mu</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">m</span> <span class="id">nm</span>; <span class="id">apply</span>/<span class="id">subsetPset</span> =&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> !<span class="id">in_itv</span>/= =&gt; /<span class="id">andP</span>[-&gt;/=].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id">le_trans</span>; <span class="id">apply</span>; <span class="id">rewrite</span> <span class="id">ler_sub</span>// <span class="id">ler_pinv</span> ?<span class="id">ler_nat</span>//;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinB">inE</a></span> <span class="id">ltr0n</span> <span class="id">andbT</span> <span class="id">unitfE</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> \<span class="id">o</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#subee">_</a></span> = (<span class="kwd">fun</span> <span class="id">n</span> =&gt; (1 - <span class="id">n</span>.+1%:<span class="id">R</span>^-1)%:<span class="id">E</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span> /=; <span class="id">rewrite</span> <span class="id">lebesgue_measure_itvoc</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [-&gt;|<span class="id">n0</span>] := <span class="id">eqVneq</span> <span class="id">n</span> 0%<span class="id">N</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.signed.html#posnumP">invr1</a></span> <span class="id">subrr</span> <span class="id">set_itvoc0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">wlength_itv</span>/= <span class="id">lte_fin</span> <span class="id">ifT</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ler_lt_sub</span>// <span class="id">invr_lt1</span> ?<span class="id">unitfE</span>// <span class="id">ltr1n</span> <span class="id">ltnS</span> <span class="id">lt0n</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> !(<span class="id">EFinB</span>,<span class="id">EFinN</span>) <span class="id">fin_num_oppeB</span>// <span class="id">addeAC</span> <span class="id">addeA</span> <span class="id">subee</span>// <span class="id">add0e</span>.<br/>
<span class="id">apply</span>/<span class="id">cvg_lim</span> =&gt; //=; <span class="id">apply</span>/<span class="id">fine_cvgP</span>; <span class="id">split</span> =&gt; /=; <span class="id">first</span> <span class="id">exact</span>: <span class="id">nearW</span>.<br/>
<span class="id">apply</span>/(@<span class="id">cvgrPdist_lt</span> <span class="id">_</span> [<span class="id">pseudoMetricNormedZmodType</span> <span class="id">R</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_measure_itv.R">of</a></span> <span class="id">R</span>^<span class="id">o</span>]) =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>].<br/>
<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">opprB</span> <span class="id">addrCA</span> <span class="id">subrr</span> <span class="id">addr0</span> <span class="id">ger0_norm</span>//.<br/>
<span class="kwd">by</span> <span class="id">near</span>: <span class="id">n</span>; <span class="id">exact</span>: <span class="id">near_infty_natSinv_lt</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lebesgue_measure_set1</span> (<span class="id">a</span> : <span class="id">R</span>) : <span class="id">lebesgue_measure</span> [<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_num_oppeB">set</a></span> <span class="id">a</span>] = 0%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
<span class="id">suff</span> : (<span class="id">lebesgue_measure</span> (`]<span class="id">a</span> - 1, <span class="id">a</span>]%<span class="id">classic</span>%<span class="id">R</span> : <span class="id">set</span> <span class="id">R</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lebesgue_measure</span> (`]<span class="id">a</span> - 1, <span class="id">a</span>[%<span class="id">classic</span>%<span class="id">R</span> : <span class="id">set</span> <span class="id">R</span>) +<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lebesgue_measure</span> [<span class="id">set</span> <span class="id">a</span>])%<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">lebesgue_measure_itvoo_subr1</span> <span class="id">lebesgue_measure_itvoc</span> =&gt; /<span class="id">eqP</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">wlength_itv</span> <span class="id">lte_fin</span> <span class="id">ltr_subl_addr</span> <span class="id"><a name="lebesgue_measure_itv.lebesgue_measure_itvoo">ltr_addl</a></span> <span class="id">ltr01</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_measure_itv.R">X</a></span> <span class="kwd">in</span> <span class="id">X</span> == <span class="id">_</span>]/= <span class="id">EFinN</span> <span class="id">EFinB</span> <span class="id">fin_num_oppeB</span>// <span class="id">addeA</span> <span class="id">subee</span>// <span class="id">add0e</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idfun">addeC</a></span> -<span class="id">sube_eq</span> ?<span class="id">fin_num_adde_defl</span>// <span class="id">subee</span>// =&gt; /<span class="id">eqP</span>.<br/>
<span class="id">rewrite</span> -<span class="id">setUitv1</span>// ?<span class="id">bnd_simp</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_subl_addr</span> <span class="id">ltr_addl</span>.<br/>
<span class="id">rewrite</span> <span class="id">measureU</span> //; <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> []/=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_itv</span>/= =&gt; + <span class="id">xa</span>; <span class="id">rewrite</span> <span class="id">xa</span> <span class="id">ltxx</span> <span class="id">andbF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">lebesgue_measure_itvoo</span> (<span class="id">a</span> <span class="id">b</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">R</a></span>) :<br/>
&nbsp;&nbsp;(<span class="id">lebesgue_measure</span> (`]<span class="id">a</span>, <span class="id">b</span>[ : <span class="id">set</span> <span class="id">R</span>) =<br/>
&nbsp;&nbsp;&nbsp;<span class="id">wlength</span> [<span class="id">the</span> <span class="id">cumulative</span> <span class="id">_</span> <span class="id">of</span> <span class="id">idfun</span>] `]<span class="id">a</span>, <span class="id">b</span>[)%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
<span class="id">have</span> [<span class="id">ab</span>|<span class="id">ba</span>] := <span class="id">ltP</span> <span class="id">a</span> <span class="id">b</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itv_ge</span> ?<span class="id">measure0</span>// -<span class="id">leNgt</span>.<br/>
<span class="id">have</span> := <span class="id">lebesgue_measure_itvoc</span> <span class="id">a</span> <span class="id">b</span>.<br/>
<span class="id">rewrite</span> 2!<span class="id">wlength_itv</span> =&gt; &lt;-; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.set_interval.html#set_itv_ge">setUitv1</a></span>// <span class="id">measureU</span>//.<br/>
- <span class="kwd">by</span> <span class="id">have</span> /= -&gt; := <span class="id">lebesgue_measure_set1</span> <span class="id">b</span>; <span class="id">rewrite</span> <span class="id">adde0</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> [/= + <span class="id">xb</span>]; <span class="id">rewrite</span> <span class="id">in_itv</span>/= <span class="id">xb</span> <span class="id">ltxx</span> <span class="id">andbF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">lebesgue_measure_itvcc</span> (<span class="id">a</span> <span class="id">b</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">R</a></span>) :<br/>
&nbsp;&nbsp;(<span class="id">lebesgue_measure</span> (`[<span class="id">a</span>, <span class="id">b</span>] : <span class="id">set</span> <span class="id">R</span>) =<br/>
&nbsp;&nbsp;&nbsp;<span class="id">wlength</span> [<span class="id">the</span> <span class="id">cumulative</span> <span class="id">_</span> <span class="id">of</span> <span class="id">idfun</span>] `[<span class="id">a</span>, <span class="id">b</span>])%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
<span class="id">have</span> [<span class="id">ab</span>|<span class="id">ba</span>] := <span class="id">leP</span> <span class="id">a</span> <span class="id">b</span>; <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_measure_itv.R">last</a></span> <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.lebesgue_stieltjes_measure.html#wlength">rewrite</a></span> <span class="id">set_itv_ge</span> ?<span class="id">measure0</span>// -<span class="id">leNgt</span>.<br/>
<span class="id">have</span> := <span class="id">lebesgue_measure_itvoc</span> <span class="id">a</span> <span class="id">b</span>.<br/>
<span class="id">rewrite</span> 2!<span class="id">wlength_itv</span> =&gt; &lt;-; <span class="id">rewrite</span> -<span class="id">setU1itv</span>// <span class="id">measureU</span>//.<br/>
- <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_measure_itv.lebesgue_measure_itvoo">have</a></span> /= -&gt; := <span class="id">lebesgue_measure_set1</span> <span class="id">a</span>; <span class="id">rewrite</span> <span class="id">add0e</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> [/= -&gt;]; <span class="id">rewrite</span> <span class="id">in_itv</span>/= <span class="id">ltxx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">lebesgue_measure_itvco</span> (<span class="id">a</span> <span class="id">b</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">R</a></span>) :<br/>
&nbsp;&nbsp;(<span class="id">lebesgue_measure</span> (`[<span class="id">a</span>, <span class="id">b</span>[ : <span class="id">set</span> <span class="id">R</span>) =<br/>
&nbsp;&nbsp;&nbsp;<span class="id">wlength</span> [<span class="id">the</span> <span class="id">cumulative</span> <span class="id">_</span> <span class="id">of</span> <span class="id">idfun</span>] `[<span class="id">a</span>, <span class="id">b</span>[)%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_measure_itv.R">have</a></span> [<span class="id">ab</span>|<span class="id">ba</span>] := <span class="id">ltP</span> <span class="id">a</span> <span class="id">b</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itv_ge</span> ?<span class="id">measure0</span>// -<span class="id">leNgt</span>.<br/>
<span class="id">have</span> := <span class="id">lebesgue_measure_itvoo</span> <span class="id">a</span> <span class="id">b</span>.<br/>
<span class="id">rewrite</span> 2!<span class="id">wlength_itv</span> =&gt; &lt;-; <span class="id">rewrite</span> -<span class="id">setU1itv</span>// <span class="id">measureU</span>//.<br/>
- <span class="kwd">by</span> <span class="id">have</span> /= -&gt; := <span class="id">lebesgue_measure_set1</span> <span class="id">a</span>; <span class="id">rewrite</span> <span class="id">add0e</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> [/= -&gt;]; <span class="id">rewrite</span> <span class="id">in_itv</span>/= <span class="id">ltxx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">lebesgue_measure_itv_bnd</span> (<span class="id">x</span> <span class="id">y</span> : <span class="id">bool</span>) (<span class="id">a</span> <span class="id">b</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">lebesgue_measure</span> ([<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">x</span> <span class="id">a</span>) (<span class="id">BSide</span> <span class="id">y</span> <span class="id">b</span>)] : <span class="id">set</span> <span class="id">R</span>) =<br/>
&nbsp;&nbsp;<span class="id">wlength</span> [<span class="id">the</span> <span class="id"><a name="lebesgue_measure_itv.lebesgue_measure_itv_bnd_infty">cumulative</a></span> <span class="id">_</span> <span class="id">of</span> <span class="id">idfun</span>] [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_measure">x</a></span> <span class="id">a</span>) (<span class="id">BSide</span> <span class="id">y</span> <span class="id">b</span>)].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
<span class="kwd">by</span> <span class="id">move</span>: <span class="id">x</span> <span class="id">y</span> =&gt; [|] [|]; [<span class="id">exact</span>: <span class="id">lebesgue_measure_itvco</span> |<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">lebesgue_measure_itvcc</span> | <span class="id">exact</span>: <span class="id">lebesgue_measure_itvoo</span> |<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">lebesgue_measure_itvoc</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">limnatR</span> : <span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">k</span> =&gt; (<span class="id">k</span>%:<span class="id">R</span>)%:<span class="id">E</span> : \<span class="id">bar</span> <span class="id">R</span>) = +<span class="id">oo</span>%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_lim</span> =&gt; //; <span class="id">apply</span>/<span class="id">cvgenyP</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">lebesgue_measure_itv_bnd_infty</span> <span class="id">x</span> (<span class="id">a</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">lebesgue_measure</span> ([<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">x</span> <span class="id">a</span>) +<span class="id">oo</span>%<span class="id">O</span>] : <span class="id">set</span> <span class="id">R</span>) = +<span class="id">oo</span>%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
<span class="id">rewrite</span> <span class="id">itv_bnd_infty_bigcup</span>; <span class="id">transitivity</span> (<span class="id">lim</span> (<span class="id">lebesgue_measure</span> \<span class="id">o</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">k</span> =&gt; [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">x</span> <span class="id">a</span>) (<span class="id">BRight</span> (<span class="id"><a name="k:162">a</a></span> + <span class="id">k</span>%:<span class="id">R</span>))] : <span class="id">set</span> <span class="id">R</span>))).<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">esym</span>/<span class="id">cvg_lim</span> =&gt; //; <span class="id">apply</span>: <span class="id">nondecreasing_cvg_mu</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
&nbsp;&nbsp;+ <span class="id">move</span>=&gt; <span class="id">m</span> <span class="id">n</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinD">mn</a></span>; <span class="id">apply</span>/<span class="id">subsetPset</span> =&gt; <span class="id">r</span>/=; <span class="id">rewrite</span> !<span class="id">in_itv</span>/= =&gt; /<span class="id">andP</span>[-&gt;/=].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">le_trans</span>; <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_measure">apply</a></span>; <span class="id">rewrite</span> <span class="id">ler_add</span>// <span class="id">ler_nat</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> \<span class="id">o</span> <span class="id">_</span> = (<span class="kwd">fun</span> <span class="id">k</span> =&gt; <span class="id">k</span>%:<span class="id">R</span>%:<span class="id">E</span>))//.<br/>
<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.real_interval.html#itv_infty_bnd_bigcup">funext</a></span> =&gt; <span class="id">n</span> /=; <span class="id">rewrite</span> <span class="id">lebesgue_measure_itv_bnd</span> <span class="id">wlength_itv</span>/=.<br/>
<span class="id">rewrite</span> <span class="id">lte_fin</span>;  <span class="id">have</span> [-&gt;|<span class="id">n0</span>] := <span class="id">eqVneq</span> <span class="id">n</span> 0%<span class="id">N</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">addr0</span> <span class="id">ltxx</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_addl</span> <span class="id">ltr0n</span> <span class="id">lt0n</span> <span class="id">n0</span> <span class="id">EFinD</span> <span class="id">addeAC</span> <span class="id">EFinN</span> <span class="id">subee</span> ?<span class="id">add0e</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">lebesgue_measure_itv_infty_bnd</span> <span class="id">y</span> (<span class="id">b</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">lebesgue_measure</span> ([<span class="id">set</span>` <span class="id">Interval</span> -<span class="id">oo</span>%<span class="id">O</span> (<span class="id">BSide</span> <span class="id">y</span> <span class="id">b</span>)] : <span class="id">set</span> <span class="id">R</span>) = +<span class="id">oo</span>%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
<span class="id">rewrite</span> <span class="id">itv_infty_bnd_bigcup</span>; <span class="id">transitivity</span> (<span class="id">lim</span> (<span class="id">lebesgue_measure</span> \<span class="id">o</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">k</span> =&gt; [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BLeft</span> (<span class="id">b</span> - <span class="id">k</span>%:<span class="id">R</span>)) (<span class="id">BSide</span> <span class="id">y</span> <span class="id">b</span>)] : <span class="id">set</span> <span class="id">R</span>))).<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">esym</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">cvg_lim</a></span> =&gt; //; <span class="id">apply</span>: <span class="id">nondecreasing_cvg_mu</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
&nbsp;&nbsp;+ <span class="id">move</span>=&gt; <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">apply</span>/<span class="id">subsetPset</span> =&gt; <span class="id">r</span>/=; <span class="id">rewrite</span> !<span class="id">in_itv</span>/= =&gt; /<span class="id">andP</span>[+ -&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">andbT</span>; <span class="id"><a name="lebesgue_measure_itv.lebesgue_measure_itv_infty_infty">apply</a></span>: <span class="id">le_trans</span>; <span class="id">rewrite</span> <span class="id">ler_sub</span>// <span class="id">ler_nat</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> \<span class="id">o</span> <span class="id">_</span> = (<span class="kwd">fun</span> <span class="id">k</span> : <span class="id">nat</span> =&gt; <span class="id">k</span>%:<span class="id"><a href="mathcomp.classical.classical_sets.html#set">R</a></span>%:<span class="id">E</span>))//.<br/>
<span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span> /=; <span class="id">rewrite</span> <span class="id">lebesgue_measure_itv_bnd</span> <span class="id">wlength_itv</span>/= <span class="id">lte_fin</span>.<br/>
<span class="id">have</span> [-&gt;|<span class="id">n0</span>] := <span class="id">eqVneq</span> <span class="id">n</span> 0%<span class="id">N</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.measure.html#measureU">rewrite</a></span> <span class="id">subr0</span> <span class="id">ltxx</span>.<br/>
<span class="id">rewrite</span> <span class="id">ltr_subl_addr</span> <span class="id">ltr_addl</span> <span class="id">ltr0n</span> <span class="id">lt0n</span> <span class="id">n0</span> <span class="id">EFinN</span> <span class="id">EFinB</span> <span class="id">fin_num_oppeB</span>// <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">addeA</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subee</span>// <span class="id">add0e</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">lebesgue_measure_itv_infty_infty</span> :<br/>
&nbsp;&nbsp;<span class="id">lebesgue_measure</span> ([<span class="id">set</span>` <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_measure_itv.lebesgue_measure_itv_bnd_infty">Interval</a></span> -<span class="id">oo</span>%<span class="id">O</span> +<span class="id">oo</span>%<span class="id">O</span>] : <span class="id">set</span> <span class="id">R</span>) = +<span class="id">oo</span>%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
<span class="id">rewrite</span> <span class="id">set_itv_infty_infty</span> -(<span class="id">setUv</span> (`]-<span class="id">oo</span>, 0[)) <span class="id">setCitv</span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_measure_itv.R">_</a></span> `|` (<span class="id">X</span> `|` <span class="id">_</span>) ]<span class="id">set_itvE</span> <span class="id">set0U</span> <span class="id">measureU</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; //= <span class="id">x</span> [] /= /[<span class="id">swap</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">in_itv</span>/= <span class="id">andbT</span> <span class="id">ltNge</span> =&gt; -&gt;//.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> (<span class="id">X</span> + <span class="id">_</span>)%<span class="id">E</span>]<span class="id">lebesgue_measure_itv_infty_bnd</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> (<span class="id">_</span> + <span class="id">X</span>)%<span class="id">E</span>]<span class="id">lebesgue_measure_itv_bnd_infty</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lebesgue_measure_itv</span> (<span class="id">i</span> : <span class="id">interval</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">lebesgue_measure</span> ([<span class="id">set</span>` <span class="id">i</span>] : <span class="id">set</span> <span class="id">R</span>) = (<span class="kwd">if</span> <span class="id">i</span>.1 &lt; <span class="id">i</span>.2 <span class="kwd">then</span> <span class="id">i</span>.2 - <span class="id"><a href="mathcomp.analysis.measure.html#measure0">i</a></span>.1 <span class="kwd">else</span> 0)%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
<span class="id">move</span>: <span class="id">i</span> =&gt; [[<span class="id">x</span> <span class="id">a</span>|[|]]] [<span class="id">y</span> <span class="id">b</span>|[|]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lebesgue_measure_itv_bnd</span> <span class="id">wlength_itv</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itvE</span> ?<span class="id">measure0</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lebesgue_measure_itv_bnd_infty</span>/= <span class="id"><a href="mathcomp.classical.classical_sets.html#set">ltry</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lebesgue_measure_itv_infty_bnd</span>/= <span class="id">ltNyr</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itvE</span> ?<span class="id">measure0</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lebesgue_measure_itv_infty_infty</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itvE</span> ?<span class="id">measure0</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itvE</span> ?<span class="id">measure0</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itvE</span> ?<span class="id">measure0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">lebesgue_measure_itv</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measurable_ball</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_ball</span> (<span class="id">x</span> : <span class="id">R</span>) <span class="id">e</span> : <span class="id">measurable</span> (<span class="id">ball</span> <span class="id">x</span> <span class="id">e</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ball_itv</span>; <span class="id">exact</span>: <span class="id">measurable_itv</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lebesgue_measure_ball</span> (<span class="id">x</span> <span class="id">r</span> : <span class="id">R</span>) : (0 &lt;= <span class="id">r</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">lebesgue_measure</span> (<span class="id">ball</span> <span class="id">x</span> <span class="id">r</span>) = (<span class="id">r</span> *+ 2)%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
<span class="id">rewrite</span> <span class="id">le_eqVlt</span> =&gt; /<span class="id">orP</span>[/<span class="id">eqP</span> &lt;-|<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">r0</a></span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">ball0</span> <span class="id">_</span> <span class="id">_</span>).2// <span class="id">measure0</span> <span class="id">mul0rn</span>.<br/>
<span class="id">rewrite</span> <span class="id">ball_itv</span> <span class="id">lebesgue_measure_itv</span>/= <span class="id">lte_fin</span> <span class="id">ltr_subl_addr</span> -<span class="id">addrA</span> <span class="id">ltr_addl</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">addr_gt0</span> // -<span class="id">EFinD</span> <span class="id">addrAC</span> <span class="id">opprD</span> <span class="id">opprK</span> <span class="id">addrA</span> <span class="id">subrr</span> <span class="id">add0r</span> -<span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">mulr2n</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_closed_ball</span> (<span class="id">x</span> : <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_fun_measurable.R">R</a></span>) <span class="id">r</span> : <span class="id">measurable</span> (<span class="id">closed_ball</span> <span class="id">x</span> <span class="id">r</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
<span class="id">have</span> [<span class="id">r0</span>|<span class="id">r0</span>] := <span class="id">leP</span> <span class="id">r</span> 0; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_fun_measurable.R">closed_ball0</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">closed_ball_itv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lebesgue_measure_closed_ball</span> (<span class="id">x</span> <span class="id">r</span> : <span class="id">R</span>) : 0 &lt;= <span class="id">r</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">lebesgue_measure</span> (<span class="id">closed_ball</span> <span class="id">x</span> <span class="id">r</span>) = (<span class="id">r</span> *+ 2)%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
<span class="id">rewrite</span> <span class="id">le_eqVlt</span> =&gt; /<span class="id"><a href="mathcomp.analysis.measure.html#measurable">predU1P</a></span>[&lt;-|<span class="id">r0</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mul0rn</span> <span class="id">closed_ball0</span>.<br/>
<span class="id">rewrite</span> <span class="id">closed_ball_itv</span>// <span class="id">lebesgue_measure_itv</span>/= <span class="id">lte_fin</span> -<span class="id">ltr_subl_addl</span> <span class="id">addrAC</span>.<br/>
<span class="id">rewrite</span> <span class="id">subrr</span> <span class="id">add0r</span> <span class="id">gtr_opp</span>// ?<span class="id">mulr_gt0</span>// -<span class="id">EFinD</span>; <span class="id">congr</span> (<span class="id">_</span>%:<span class="id">E</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">opprB</span> <span class="id">addrAC</span> <span class="id">addrCA</span> <span class="id">subrr</span> <span class="id">addr0</span> -<span class="id">mulr2n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measurable_ball</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">lebesgue_measure_rat</span> (<span class="id">R</span> : <span class="id">realType</span>) :<br/>
&nbsp;&nbsp;<span class="id">lebesgue_measure</span> (<span class="id">range</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_itv_infty_c">ratr</a></span> : <span class="id">set</span> <span class="id">R</span>) = 0%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_fun_measurable.mf">have</a></span> /<span class="id">pcard_eqP</span>/<span class="id">bijPex</span>[<span class="id">f</span> <span class="id">bijf</span>] := <span class="id">card_rat</span>; <span class="id">set</span> <span class="id">f1</span> := '<span class="id">pinv_</span>(<span class="kwd">fun</span>=&gt; 0) <span class="id">setT</span> <span class="id">f</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_num">range</a></span> <span class="id">_</span> = \<span class="id">bigcup_n</span> [<span class="id">set</span> <span class="id">ratr</span> (<span class="id">f1</span> <span class="id">n</span>)]); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; [<span class="id">_</span> [<span class="id">q</span> <span class="id">_</span> &lt;-]|<span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> /= -&gt;]]; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">f1</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">f</span> <span class="id">q</span>) =&gt; //=; <span class="id">rewrite</span> /<span class="id">f1</span> <span class="id">pinvKV</span>// ?<span class="id">in_setE</span>// =&gt; <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_fun_measurable.D">x</a></span> <span class="id">y</span> <span class="id">_</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bij_inj</span>; <span class="id">rewrite</span> -<span class="id">setTT_bijective</span>.<br/>
<span class="id">rewrite</span> <span class="id">measure_bigcup</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">trivIsetP</span> =&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ij</span>; <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; //= <span class="id">_</span> [/= -&gt;].<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; /<span class="id">fmorph_inj</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">set_bij_inj</span> /[<span class="id">apply</span>] := <span class="id">bijpinv_bij</span> (<span class="kwd">fun</span>=&gt; 0) <span class="id">bijf</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_setE</span> =&gt; /(<span class="id">_</span> <span class="id">Logic.I</span> <span class="id">Logic.I</span>); <span class="id">exact</span>/<span class="id">eqP</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eseries0</span>// =&gt; <span class="id">n</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">lebesgue_measure_set1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">measurable_fun_measurable</span>.<br/>
<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fineK">Local</a></span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Context</span> <span class="id"><a href="mathcomp.analysis.reals.html#floor">d</a></span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">measurableType</a></span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>).<br/>
<span class="kwd">Hypotheses</span> (<span class="id">mD</span> : <span class="id">measurable</span> <span class="id">D</span>) (<span class="id">mf</span> : <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">y</span> : \<span class="id">bar</span> <span class="id">R</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">emeasurable_fun_c_infty</span> <span class="id">y</span> : <span class="id">measurable</span> (<span class="id">D</span> `&amp;` [<span class="id">set</span> <span class="id">x</span> | <span class="id">y</span> &lt;= <span class="id">f</span> <span class="id">x</span>]).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">preimage_itv_c_infty</span>; <span class="id">exact</span>/<span class="id">mf</span>/<span class="id">emeasurable_itv</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">emeasurable_fun_o_infty</span> <span class="id">y</span> :  <span class="id">measurable</span> (<span class="id">D</span> `&amp;` [<span class="id">set</span> <span class="id">x</span> | <span class="id">y</span> &lt; <span class="id"><a name="y:208">f</a></span> <span class="id">x</span>]).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">preimage_itv_o_infty</span>; <span class="id">exact</span>/<span class="id">mf</span>/<span class="id">emeasurable_itv</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">emeasurable_fun_infty_o</span> <span class="id">y</span> : <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_fun_measurable.mf">measurable</a></span> (<span class="id">D</span> `&amp;` [<span class="id">set</span> <span class="id">x</span> | <span class="id">f</span> <span class="id">x</span> &lt; <span class="id">y</span>]).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">preimage_itv_infty_o</span>; <span class="id">exact</span>/<span class="id">mf</span>/<span class="id">emeasurable_itv</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">emeasurable_fun_infty_c</span> <span class="id">y</span> : <span class="id">measurable</span> (<span class="id">D</span> `&amp;` [<span class="id">set</span> <span class="id">x</span> | <span class="id">f</span> <span class="id">x</span> &lt;= <span class="id">y</span>]).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">preimage_itv_infty_c</span>; <span class="id">exact</span>/<span class="id">mf</span>/<span class="id">emeasurable_itv</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">emeasurable_fin_num</span> : <span class="id">measurable</span> (<span class="id">D</span> `&amp;` [<span class="id"><a name="A:214">set</a></span> <span class="id">x</span> | <span class="id">f</span> <span class="id">x</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span>]).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
<span class="id">rewrite</span> [<span class="id"><a name="RGenOInfty.measurable_itv_bnd_infty">X</a></span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> =<br/>
&nbsp;&nbsp;\<span class="id">bigcup_k</span> (<span class="id">D</span> `&amp;` ([<span class="id">set</span>  <span class="id">x</span> | - <span class="id">k</span>%:<span class="id">R</span>%:<span class="id">E</span> &lt;= <span class="id">f</span> <span class="id">x</span>] `&amp;` [<span class="id">set</span> <span class="id">x</span> | <span class="id">f</span> <span class="id">x</span> &lt;= <span class="id">k</span>%:<span class="id">R</span>%:<span class="id">E</span>]))).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">bigcupT_measurable</span> =&gt; <span class="id">k</span>; <span class="id">rewrite</span> -(<span class="id">setIid</span> <span class="id">D</span>) <span class="id">setIACA</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableI</span>; [<span class="id">exact</span>: <span class="id">emeasurable_fun_c_infty</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">emeasurable_fun_infty_c</span>].<br/>
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id"><a name="a:218">t</a></span>; <span class="id">split</span> =&gt; [/= [<span class="id">Dt</span> <span class="id">ft</span>]|].<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">ft0</span>|<span class="id">ft0</span>] := <span class="id">leP</span> 0%<span class="id">R</span> (<span class="id">fine</span> (<span class="id">f</span> <span class="id">t</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> `|<span class="id">ceil</span> (<span class="id">fine</span> (<span class="id">f</span> <span class="id">t</span>))|%<span class="id">N</span> =&gt; //=; <span class="id">split</span> =&gt; //; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -{2}(<span class="id">fineK</span> <span class="id">ft</span>)// <span class="id">lee_fin</span> (<span class="id">le_trans</span> <span class="id">_</span> <span class="id">ft0</span>)// <span class="id">ler_oppl</span> <span class="id">oppr0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">natr_absz</span> <span class="id">ger0_norm</span> ?<span class="id">ceil_ge0</span>// -(<span class="id">fineK</span> <span class="id">ft</span>) <span class="id">lee_fin</span> <span class="id">ceil_ge</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> `|<span class="id">floor</span> (<span class="id">fine</span> (<span class="id">f</span> <span class="id">t</span>))|%<span class="id">N</span> =&gt; //=; <span class="id">split</span> =&gt; //; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">natr_absz</span> <span class="id">ltr0_norm</span> ?<span class="id">floor_lt0</span>// <span class="id">EFinN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_sub">rewrite</a></span> -{2}(<span class="id">fineK</span> <span class="id">ft</span>) <span class="id">lee_fin</span> <span class="id">mulrNz</span> <span class="id">opprK</span> <span class="id">floor_le</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">fineK</span> <span class="id">ft</span>)// <span class="id">lee_fin</span> (<span class="id">le_trans</span> (<span class="id">ltW</span> <span class="id">ft0</span>)).<br/>
<span class="id">move</span>=&gt; [<span class="id">n</span> <span class="id">_</span>] [/= <span class="id">Dt</span> [<span class="id">nft</span> <span class="id">fnt</span>]]; <span class="id">split</span> =&gt; //; <span class="id">rewrite</span> <span class="id">fin_numElt</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> <span class="id">_</span> <span class="id">nft</span>) ?<span class="id">ltNyr</span>//= (<span class="id">le_lt_trans</span> <span class="id">fnt</span>)// <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#RGenOInfty">ltry</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">emeasurable_neq</span> <span class="id">y</span> : <span class="id">measurable</span> (<span class="id">D</span> `&amp;` [<span class="id">set</span> <span class="id"><a name="RGenInftyO.rgeninftyo.R">x</a></span> | <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">f</a></span> <span class="id">x</span> != <span class="id">y</span>]).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
<span class="id">rewrite</span> (<span class="id">_</span> : [<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#RGenInftyO.rgeninftyo.R">set</a></span> <span class="id">x</span> | <span class="id">f</span> <span class="id">x</span> != <span class="id"><a name="RGenInftyO.G">y</a></span>] = <span class="id">f</span> @^-1` (<span class="id">setT</span> `\ <span class="id">y</span>)).<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">mf</span>/<span class="id">measurableD</span>.<br/>
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>; <span class="id"><a name="b:224">last</a></span> <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#RGenInftyO.G">rewrite</a></span> /<span class="id">preimage</span> /= =&gt; -[<span class="id">_</span> /<span class="id">eqP</span>].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /= =&gt; <span class="id">ft0</span>; <span class="id">rewrite</span> /<span class="id">preimage</span> /=; <span class="id">split</span> =&gt; //; <span class="id">exact</span>/<span class="id">eqP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measurable_fun_measurable</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id">RGenOInfty</span>.<br/>
<span class="kwd">Section</span> <span class="id">rgenoinfty</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id"><a href="mathcomp.classical.set_interval.html#setCitvl">x</a></span> <span class="id">y</span> <span class="id">z</span> : <span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">G</span> := [<span class="id">set</span> <span class="id">A</span> | <span class="kwd">exists</span> <span class="id">x</span>, <span class="id">A</span> = `]<span class="id">x</span>, +<span class="id">oo</span>[%<span class="id">classic</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_itv_bnd_infty</span> <span class="id">b</span> <span class="id">x</span> :<br/>
&nbsp;&nbsp;<span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">x</span>) +<span class="id">oo</span>%<span class="id">O</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
<span class="id">case</span>: <span class="id">b</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="id">eexists</span>; <span class="id">reflexivity</span>.<br/>
<span class="id"><a href="mathcomp.classical.set_interval.html#set_itv_splitD">rewrite</a></span> <span class="id">itv_c_inftyEbigcap</span>; <span class="id">apply</span>: <span class="id">bigcapT_measurable</span> =&gt; <span class="id">k</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="id">eexists</span>; <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_itv_bounded</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> : <span class="id">a</span> != +<span class="id">oo</span>%<span class="id">O</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span>` <span class="id">Interval</span> <span class="id">a</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">x</span>)].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
<span class="id">case</span>: <span class="id">a</span> =&gt; [<span class="id">a</span> <span class="id">r</span> <span class="id">_</span>|[<span class="id">_</span>|//]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itv_splitD</span>; <span class="id">apply</span>: <span class="id">measurableD</span> =&gt; //;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">measurable_itv_bnd_infty</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setCitvr</span>; <span class="id">apply</span>: <span class="id">measurableC</span>; <span class="id">apply</span>: <span class="id">measurable_itv_bnd_infty</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurableE</span> : (@<span class="id">ocitv</span> <span class="id">R</span>).-<span class="id">sigma</span>.-<span class="id">measurable</span> = <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id"><a name="RGenCInfty">smallest_sigma_algebra</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">I</span> [<span class="id">x</span> <span class="id"><a name="RGenCInfty.rgencinfty.R">_</a></span> &lt;-]; <span class="id">exact</span>: <span class="id">measurable_itv_bounded</span>.<br/>
<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#RGenCInfty.rgencinfty.R">exact</a></span>: <span class="id">smallest_sigma_algebra</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>' /= [<span class="id">x</span> -&gt;]; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">rgenoinfty</span>.<br/>
<span class="kwd">End</span> <span class="id">RGenOInfty</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id">RGenInftyO</span>.<br/>
<span class="kwd">Section</span> <span class="id">rgeninftyo</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : <span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">G</span> := [<span class="id">set</span> <span class="id">A</span> | <span class="kwd">exists</span> <span class="id">x</span>, <span class="id">A</span> = `]-<span class="id">oo</span>, <span class="id">x</span>[%<span class="id">classic</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_itv_bnd_infty</span> <span class="id">b</span> <span class="id">x</span> :<br/>
&nbsp;&nbsp;<span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span>` <span class="id">Interval</span> -<span class="id">oo</span>%<span class="id">O</span> (<span class="id">BSide</span> <span class="id"><a name="RGenCInfty.measurable_itv_bounded">b</a></span> <span class="id">x</span>)].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
<span class="id">case</span>: <span class="id">b</span>; <span class="id"><a name="a:234">first</a></span> <span class="kwd">by</span> <span class="id">apply</span> <span class="id">sub_sigma_algebra</span>; <span class="id">eexists</span>; <span class="id">reflexivity</span>.<br/>
<span class="id">rewrite</span> -<span class="id">setCitvr</span> <span class="id">itv_o_inftyEbigcup</span>; <span class="id">apply</span>/<span class="id">measurableC</span>/<span class="id">bigcupT_measurable</span> =&gt; <span class="id">n</span>.<br/>
<span class="id">rewrite</span> -<span class="id">setCitvl</span>; <span class="id">apply</span>: <span class="id">measurableC</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="id">eexists</span>; <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_itv_bounded</span> <span class="id">a</span> <span class="id">b</span> <span class="id">x</span> : <span class="id">a</span> != -<span class="id">oo</span>%<span class="id">O</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">x</span>) <span class="id">a</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
<span class="id">case</span>: <span class="id">a</span> =&gt; [<span class="id">a</span> <span class="id">r</span> <span class="id">_</span>|[//|<span class="id">_</span>]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itv_splitD</span>; <span class="id">apply</span>/<span class="id">measurableD</span> =&gt; //;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">setCitvl</span>; <span class="id">apply</span>: <span class="id">measurableC</span>; <span class="id">exact</span>: <span class="id">measurable_itv_bnd_infty</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setCitvl</span>; <span class="id">apply</span>: <span class="id">measurableC</span>; <span class="id">apply</span>: <span class="id">measurable_itv_bnd_infty</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurableE</span> : (@<span class="id">ocitv</span> <span class="id">R</span>).-<span class="id">sigma</span>.-<span class="id">measurable</span> = <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">smallest_sigma_algebra</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">I</span> [<span class="id">x</span> <span class="id">_</span> &lt;-]; <span class="id">apply</span>: <span class="id">measurable_itv_bounded</span>.<br/>
<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">smallest_sigma_algebra</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>' /= [<span class="id">x</span> -&gt;]; <span class="id">apply</span>: <span class="id">measurable_itv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">rgeninftyo</span>.<br/>
<span class="kwd">End</span> <span class="id">RGenInftyO</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id">RGenCInfty</span>.<br/>
<span class="kwd">Section</span> <span class="id">rgencinfty</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id"><a href="mathcomp.analysis.real_interval.html#itv_bnd_inftyEbigcup">x</a></span> <span class="id">y</span> <span class="id">z</span> : <span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">G</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">R</span>) := [<span class="id">set</span> <span class="id">A</span> | <span class="kwd">exists</span> <span class="id">x</span>, <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#RGenOpens.measurable_itvoo">A</a></span> = `[<span class="id">x</span>, +<span class="id">oo</span>[%<span class="id">classic</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_itv_bnd_infty</span> <span class="id">b</span> <span class="id">x</span> :<br/>
&nbsp;&nbsp;<span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">x</span>) +<span class="id">oo</span>%<span class="id">O</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
<span class="id">case</span>: <span class="id">b</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="kwd">exists</span> <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">set_itv_c_infty</span>.<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#bigcapT_measurable">rewrite</a></span> <span class="id">itv_o_inftyEbigcup</span>; <span class="id">apply</span>: <span class="id">bigcupT_measurable</span> =&gt; <span class="id">k</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="id">eexists</span>; <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_itv_bounded</span> <span class="id">a</span> <span class="id">b</span> <span class="id">y</span> : <span class="id">a</span> != +<span class="id">oo</span>%<span class="id">O</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span>` <span class="id">Interval</span> <span class="id">a</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">y</span>)].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
<span class="id">case</span>: <span class="id">a</span> =&gt; [<span class="id">a</span> <span class="id">r</span> <span class="id">_</span>|[<span class="id">_</span>|//]].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">set_itv_splitD</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableD</span>; <span class="id">apply</span>: <span class="id">measurable_itv_bnd_infty</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setCitvr</span>; <span class="id">apply</span>: <span class="id">measurableC</span>; <span class="id">apply</span>: <span class="id">measurable_itv_bnd_infty</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableC">measurableE</a></span> : (@<span class="id">ocitv</span> <span class="id">R</span>).-<span class="id">sigma</span>.-<span class="id">measurable</span> = <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_stieltjes_measure.html#ocitv">smallest_sigma_algebra</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">I</span> [<span class="id">x</span> <span class="id">_</span> &lt;-]; <span class="id">apply</span>: <span class="id">measurable_itv_bounded</span>.<br/>
<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">smallest_sigma_algebra</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>' /= [<span class="id">x</span> -&gt;]; <span class="id">apply</span>: <span class="id">measurable_itv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">rgencinfty</span>.<br/>
<span class="kwd">End</span> <span class="id">RGenCInfty</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id">RGenOpens</span>.<br/>
<span class="kwd">Section</span> <span class="id">rgenopens</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_itv">x</a></span> <span class="id">y</span> <span class="id">z</span> : <span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">G</span> := [<span class="id">set</span> <span class="id">A</span> | <span class="kwd">exists</span> <span class="id">x</span> <span class="id">y</span>, <span class="id">A</span> = `]<span class="id">x</span>, <span class="id">y</span>[%<span class="id"><a name="erealwithrays">classic</a></span>].<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Lemma</span> <span class="id">measurable_itvoo</span> <span class="id">x</span> <span class="id">y</span> : <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> `]<span class="id">x</span>, <span class="id">y</span>[%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
 <span class="kwd">by</span> <span class="id">apply</span> <span class="id">sub_sigma_algebra</span>; <span class="id">eexists</span>; <span class="id">eexists</span>; <span class="id"><a name="b:257">reflexivity</a></span>. Qed.</div>
<br/>
<span class="id">Local</span> <span class="kwd">Lemma</span> <span class="id">measurable_itv_o_infty</span> <span class="id">x</span> : <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> `]<span class="id">x</span>, +<span class="id">oo</span>[%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
<span class="id">rewrite</span> <span class="id">itv_bnd_inftyEbigcup</span>; <span class="id">apply</span>: <span class="id">bigcupT_measurable</span> =&gt; <span class="id">i</span>.<br/>
<span class="id">exact</span>: <span class="id">measurable_itvoo</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_itv_bnd_infty</span> <span class="id">b</span> <span class="id">x</span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">G</a></span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">x</span>) +<span class="id">oo</span>%<span class="id">O</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
<span class="id">case</span>: <span class="id">b</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">measurable_itv_o_infty</span>.<br/>
<span class="id">rewrite</span> <span class="id">itv_c_inftyEbigcap</span>; <span class="id">apply</span>: <span class="id">bigcapT_measurable</span> =&gt; <span class="id">k</span>.<br/>
<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">measurable_itv_o_infty</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_itv_infty_bnd</span> <span class="id">b</span> <span class="id">x</span> :<br/>
&nbsp;&nbsp;<span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span>` <span class="id"><a name="s:260">Interval</a></span> -<span class="id">oo</span>%<span class="id">O</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">x</span>)].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setCitvr</span>; <span class="id">apply</span>: <span class="id">measurableC</span>; <span class="id">exact</span>: <span class="id">measurable_itv_bnd_infty</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_itv_bounded</span> <span class="id">a</span> <span class="id">x</span> <span class="id">b</span> <span class="id">y</span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#erealwithrays.R">G</a></span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">a</span> <span class="id">x</span>) (<span class="id">BSide</span> <span class="id">b</span> <span class="id">y</span>)].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
<span class="id">move</span>: <span class="id">a</span> <span class="id">b</span> =&gt; [] []; <span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>]<span class="id">setCK</span> <span class="id">setCitv</span>;<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a name="eitv_bnd_infty">measurableC</a></span>; <span class="id">apply</span>: <span class="id">measurableU</span>; <span class="id">try</span> <span class="id">solve</span>[<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">measurable_itv_infty_bnd</span>|<span class="id">exact</span>: <span class="id">measurable_itv_bnd_infty</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurableE</span> : (@<span class="id">ocitv</span> <span class="id">R</span>).-<span class="id">sigma</span>.-<span class="id">measurable</span> = <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">smallest_sigma_algebra</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">I</span> [<span class="id">x</span> <span class="id">_</span> &lt;-]; <span class="id">apply</span>: <span class="id">measurable_itv_bounded</span>.<br/>
<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">smallest_sigma_algebra</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>' /= [<span class="id">x</span> [<span class="id">y</span> -&gt;]]; <span class="id">apply</span>: <span class="id">measurable_itv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">rgenopens</span>.<br/>
<span class="kwd">End</span> <span class="id">RGenOpens</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">erealwithrays</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">r</span> <span class="id">s</span> : <span class="id">R</span>).<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">EFin_itv_bnd_infty</span> <span class="id">b</span> <span class="id">r</span> : <span class="id">EFin</span> @` [<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">r</span>) +<span class="id">oo</span>%<span class="id">O</span>] =<br/>
&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BSide</span> <span class="id">b</span> <span class="id">r</span>%:<span class="id">E</span>) +<span class="id">oo</span>%<span class="id">O</span>] `\ +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [<span class="id">x</span> [<span class="id">s</span> /<span class="id">itvP</span> <span class="id">rs</span> &lt;-]|<span class="id">x</span> []].<br/>
&nbsp;&nbsp;<span class="id">split</span> =&gt; //=; <span class="id">rewrite</span> <span class="id">in_itv</span> /=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">b</span> <span class="kwd">in</span> <span class="id">rs</span> *; <span class="id"><a name="b:265">rewrite</a></span> /= ?(<span class="id">lee_fin</span>, <span class="id">lte_fin</span>) <span class="id">rs</span>.<br/>
<span class="id">move</span>: <span class="id">x</span> =&gt; [<span class="id">s</span>|<span class="id">_</span> /(<span class="id">_</span> <span class="id">erefl</span>)|] //=; <span class="id">rewrite</span> <span class="id">in_itv</span> /= <span class="id">andbT</span>; <span class="id">last</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">first</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">b</span> =&gt; /=; <span class="id">rewrite</span> 1?(<span class="id">leNgt</span>,<span class="id">ltNge</span>) 1?(<span class="id">ltNyr</span>, <span class="id">leNye</span>).<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">b</span> =&gt; /=; <span class="id">rewrite</span> 1?(<span class="id">lte_fin</span>,<span class="id">lee_fin</span>) =&gt; <span class="id">rs</span> <span class="id">_</span>;<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">s</span> =&gt; //; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinD">rewrite</a></span> <span class="id">in_itv</span> /= <span class="id">rs</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">EFin_itv</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">r</a></span> : [<span class="id">set</span> <span class="id">s</span> | <span class="id">r</span>%:<span class="id">E</span> &lt; <span class="id">s</span>%:<span class="id">E</span>] = `]<span class="id">r</span>, +<span class="id">oo</span>[%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof83')">Proof.</span></div>
<div class="proofscript" id="proof83">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">s</span>; <span class="id">split</span> =&gt; [|]; <span class="id">rewrite</span> /= <span class="id">lte_fin</span> <span class="id">in_itv</span>/= <span class="id">andbT</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_EFin_setT</span> : @<span class="id">EFin</span> <span class="id">R</span> @^-1` [<span class="id">set</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">x</a></span> | <span class="id">x</span> \<span class="kwd">in</span> `]-<span class="id">oo</span>%<span class="id">E</span>, +<span class="id">oo</span>[] = <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof84')">Proof.</span></div>
<div class="proofscript" id="proof84">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itvE</span> <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span>=&gt; // <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id">preimage</span> /= <span class="id">ltNyr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eitv_bnd_infty</span> <span class="id">b</span> <span class="id">r</span> : `[<span class="id">r</span>%:<span class="id">E</span>, +<span class="id">oo</span>[%<span class="id">classic</span> =<br/>
&nbsp;&nbsp;\<span class="id">bigcap_k</span> [<span class="id">set</span>` <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinD">Interval</a></span> (<span class="id">BSide</span> <span class="id">b</span> (<span class="id">r</span> - <span class="id">k</span>.+1%:<span class="id">R</span>^-1)%:<span class="id">E</span>) +<span class="id">oo</span>%<span class="id">O</span>] :&gt; <span class="id">set</span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</span></div>
<div class="proofscript" id="proof85">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [|].<br/>
- <span class="id">move</span>: <span class="id">x</span> =&gt; [<span class="id">s</span> /=| <span class="id">_</span> <span class="id">n</span> <span class="id">_</span>|//].<br/>
&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id">in_itv</span> /= <span class="id">andbT</span> <span class="id">lee_fin</span> =&gt; <span class="id">rs</span> <span class="id">n</span> <span class="id">_</span> /=; <span class="id">rewrite</span> <span class="id">in_itv</span>/= <span class="id">andbT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span>: <span class="id">b</span> =&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_fin</span> <span class="id">ler_subl_addl</span> (<span class="id">le_trans</span> <span class="id">rs</span>)// <span class="id">ler_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lte_fin</span> <span class="id">ltr_subl_addl</span> (<span class="id">le_lt_trans</span> <span class="id">rs</span>)// <span class="id">ltr_addr</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> /= <span class="id">in_itv</span> /= <span class="id">andbT</span>; <span class="id">case</span>: <span class="id">b</span> =&gt; /=; <span class="id">rewrite</span> <span class="id">lteey</span>.<br/>
- <span class="id">move</span>: <span class="id">x</span> =&gt; [<span class="id">s</span>| |/(<span class="id">_</span> 0%<span class="id">N</span> <span class="id">Logic.I</span>)] /=; <span class="id">rewrite</span> ?<span class="id">in_itv</span>/= ?<span class="id">leey</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">h</span>; <span class="id">rewrite</span> <span class="id">lee_fin</span> <span class="id">leNgt</span> <span class="id">andbT</span>; <span class="id">apply</span>/<span class="id">negP</span> =&gt; /<span class="id">ltr_add_invr</span>[<span class="id">k</span> <span class="id">skr</span>].<br/>
&nbsp;&nbsp;<span class="id">have</span> {<span class="id">h</span>} := <span class="id">h</span> <span class="id">k</span> <span class="id">Logic.I</span>; <span class="id">rewrite</span> /= <span class="id">in_itv</span> /= <span class="id"><a name="k:269">andbT</a></span>; <span class="id">case</span>: <span class="id">b</span> =&gt; /=.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">rewrite</a></span> <span class="id">lee_fin</span> <span class="id">ler_subl_addr</span> <span class="id">leNgt</span> <span class="id">skr</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lte_fin</span> <span class="id">ltr_subl_addr</span> <span class="id">ltNge</span> (<span class="id">ltW</span> <span class="id">skr</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eitv_infty_bnd</span> <span class="id">b</span> <span class="id">r</span> : `]-<span class="id">oo</span>, <span class="id">r</span>%:<span class="id">E</span>]%<span class="id">classic</span> =<br/>
&nbsp;&nbsp;\<span class="id">bigcap_k</span> [<span class="id">set</span>` <span class="id">Interval</span> -<span class="id">oo</span>%<span class="id">O</span> (<span class="id">BSide</span> <span class="id">b</span> (<span class="id">r</span>%:<span class="id">E</span> + <span class="id">k</span>.+1%:<span class="id">R</span>^-1%:<span class="id">E</span>))] :&gt; <span class="id">set</span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [|].<br/>
- <span class="id">move</span>: <span class="id">x</span> =&gt; [<span class="id">s</span> /=|//|<span class="id">_</span> <span class="id">n</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id">in_itv</span> /= <span class="id">lee_fin</span> =&gt; <span class="id">sr</span> <span class="id">n</span> <span class="id">_</span>; <span class="id">rewrite</span> /= <span class="id">in_itv</span> /= -<span class="id">EFinD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="ErealGenOInfty.erealgenoinfty">case</a></span>: <span class="id">b</span> =&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lte_fin</span> (<span class="id">le_lt_trans</span> <span class="id">sr</span>)// <span class="id">ltr_addl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#ErealGenOInfty.erealgenoinfty.R">rewrite</a></span> <span class="id">lee_fin</span> (<span class="id">le_trans</span> <span class="id">sr</span>)// <span class="id">ler_addl</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> /= <span class="id">in_itv</span> /= -<span class="id">EFinD</span>; <span class="id">case</span>: <span class="id">b</span> =&gt; //=; <span class="id">rewrite</span> <span class="id">lteNye</span>.<br/>
- <span class="id">move</span>: <span class="id"><a name="ErealGenOInfty.measurable_set1Ny">x</a></span> =&gt; [<span class="id">s</span>|/(<span class="id">_</span> 0%<span class="id">N</span> <span class="id">Logic.I</span>)|]/=; <span class="id">rewrite</span> !<span class="id">in_itv</span>/= ?<span class="id">leNye</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#bigcap_measurable">b</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">h</span>; <span class="id">rewrite</span> <span class="id">lee_fin</span> <span class="id">leNgt</span>; <span class="id">apply</span>/<span class="id">negP</span> =&gt; /<span class="id">ltr_add_invr</span>[<span class="id">k</span> <span class="id">rks</span>].<br/>
&nbsp;&nbsp;<span class="id">have</span> {<span class="id">h</span>} := <span class="id">h</span> <span class="id">k</span> <span class="id">Logic.I</span>; <span class="id">rewrite</span> /= <span class="id">in_itv</span> /= -<span class="id">EFinD</span>; <span class="id">case</span>: <span class="id">b</span> =&gt; /=.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lte_fin</span> <span class="id">ltNge</span> (<span class="id">ltW</span> <span class="id">rks</span>).<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_fin</span> <span class="id">leNgt</span> <span class="id">rks</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eset1Ny</span> :<br/>
&nbsp;&nbsp;[<span class="id">set</span> -<span class="id">oo</span>] = \<span class="id">bigcap_k</span> `]-<span class="id">oo</span>, (-<span class="id">k</span>%:<span class="id">R</span>%:<span class="id">E</span>)[%<span class="id">classic</span> :&gt; <span class="id">set</span> (\<span class="id"><a href="mathcomp.analysis.measure.html#bigcapT_measurable">bar</a></span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>=&gt; [<span class="id">_</span> -&gt; <span class="id">i</span> <span class="id">_</span> |]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> /= <span class="id">in_itv</span> /= <span class="id">ltNyr</span>.<br/>
<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#emeasurable">move</a></span>=&gt; [<span class="id">r</span>|/(<span class="id">_</span> <span class="id"><a href="mathcomp.analysis.lebesgue_stieltjes_measure.html#ocitv">O</a></span> <span class="id">Logic.I</span>)|]//.<br/>
<span class="id">move</span>=&gt; /(<span class="id">_</span> `|<span class="id">floor</span> <span class="id">r</span>|%<span class="id">N</span> <span class="id">Logic.I</span>); <span class="id">rewrite</span> /= <span class="id">in_itv</span>/= <span class="id">ltNge</span>.<br/>
<span class="id">rewrite</span> <span class="id">lee_fin</span>; <span class="id">have</span> [<span class="id">r0</span>|<span class="id">r0</span>] := <span class="id">leP</span> 0%<span class="id">R</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> <span class="id">r0</span>) // <span class="id">ler_oppl</span> <span class="id">oppr0</span> <span class="id">ler0n</span>.<br/>
<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#emeasurableC">rewrite</a></span> <span class="id">ler_oppl</span> -<span class="id">abszN</span> <span class="id">natr_absz</span> <span class="id">gtr0_norm</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_oppr</span> <span class="id">oppr0</span> <span class="id">floor_lt0</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mulrNz</span> <span class="id">ler_oppl</span> <span class="id">opprK</span> <span class="id">floor_le</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eset1y</span> : [<span class="id">set</span> +<span class="id">oo</span>] = \<span class="id">bigcap_k</span> `]<span class="id">k</span>%:<span class="id">R</span>%:<span class="id">E</span>, +<span class="id">oo</span>[%<span class="id">classic</span> :&gt; <span class="id">set</span> (\<span class="id">bar</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>=&gt; [<span class="id">_</span> -&gt; <span class="id">i</span> <span class="id">_</span>/=|]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_itv</span> /= <span class="id">ltry</span>.<br/>
<span class="id">move</span>=&gt; [<span class="id">r</span>| |/(<span class="id">_</span> <span class="id">O</span> <span class="id">Logic.I</span>)] // /(<span class="id">_</span> `|<span class="id">ceil</span> <span class="id">r</span>|%<span class="id">N</span> <span class="id">Logic.I</span>); <span class="id">rewrite</span> /= <span class="id">in_itv</span> /=.<br/>
<span class="id">rewrite</span> <span class="id">andbT</span> <span class="id">lte_fin</span> <span class="id">ltNge</span>.<br/>
<span class="id">have</span> [<span class="id">r0</span>|<span class="id"><a href="mathcomp.analysis.measure.html#measurableU">r0</a></span>] := <span class="id">ltP</span> 0%<span class="id">R</span> <span class="id">r</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">r0</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">natr_absz</span> <span class="id">gtr0_norm</span> // ?<span class="id">ceil_ge</span>// <span class="id">ceil_gt0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">erealwithrays</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id">ErealGenOInfty</span>.<br/>
<span class="kwd">Section</span> <span class="id">erealgenoinfty</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFin">x</a></span> <span class="id">y</span> <span class="id">z</span> : \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">r</span> <span class="id">s</span> : <span class="id">R</span>).<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">G</span> := [<span class="id">set</span> <span class="id">A</span> : <span class="id">set</span> \<span class="id">bar</span> <span class="id">R</span> | <span class="kwd">exists</span> <span class="id"><a href="mathcomp.analysis.measure.html#sub_sigma_algebra">r</a></span>, <span class="id">A</span> = `]<span class="id">r</span>%:<span class="id">E</span>, +<span class="id">oo</span>[%<span class="id">classic</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_set1Ny</span> : <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span> -<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#image_set0">eset1Ny</a></span>; <span class="id">apply</span>: <span class="id">bigcap_measurable</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> -<span class="id">setCitvr</span>; <span class="id">apply</span>: <span class="id">measurableC</span>; <span class="id">rewrite</span> (<span class="id">eitv_bnd_infty</span> <span class="id">false</span>).<br/>
<span class="id">apply</span>: <span class="id">bigcap_measurable</span> =&gt; <span class="id">j</span> <span class="id">_</span>; <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (- (<span class="id">i</span>%:<span class="id">R</span> + <span class="id">j</span>.+1%:<span class="id">R</span>^-1))%<span class="id">R</span>; <span class="id">rewrite</span> <span class="id">opprD</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_set1y</span> : <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span> +<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
<span class="id">rewrite</span> <span class="id">eset1y</span>; <span class="id">apply</span>: <span class="id">bigcapT_measurable</span> =&gt; <span class="id">i</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="kwd">exists</span> <span class="id">i</span>%:<span class="id">R</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurableE</span> : <span class="id">emeasurable</span> (@<span class="id">ocitv</span> <span class="id">R</span>) = <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
<span class="id">apply</span>/<span class="id"><a name="r:275">seteqP</a></span>; <span class="id">split</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">smallest_sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">emeasurable0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">rewrite</span> <span class="id">setTD</span>; <span class="id">exact</span>: <span class="id">emeasurableC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">exact</span>: <span class="id">bigcupT_emeasurable</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">r</span> -&gt;]; <span class="id">rewrite</span> /<span class="id">emeasurable</span> /=.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> `]<span class="id"><a name="ErealGenCInfty.measurable_set1y">r</a></span>, +<span class="id">oo</span>[%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">RGenOInfty.measurableE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">RGenOInfty.measurable_itv_bnd_infty</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">set</span> +<span class="id">oo</span>]; [<span class="id">constructor</span>|<span class="id">rewrite</span> -<span class="id">punct_eitv_bndy</span>].<br/>
<span class="id">move</span>=&gt; <span class="id">A</span> [<span class="id">B</span> <span class="id">mB</span> [<span class="id">C</span> <span class="id">mC</span>]] &lt;-; <span class="id">apply</span>: <span class="id">measurableU</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id">mC</span>; [<span class="kwd">by</span> []|<span class="id">exact</span>: <span class="id">measurable_set1Ny</span>|<span class="id">exact</span>: <span class="id">measurable_set1y</span>|].<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableU</span>; [<span class="id">exact</span>: <span class="id">measurable_set1Ny</span>|<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#ErealGenCInfty.erealgencinfty.R">measurable_set1y</a></span>].<br/>
<span class="id">rewrite</span> <span class="id">RGenOInfty.measurableE</span> <span class="kwd">in</span> <span class="id">mB</span>.<br/>
<span class="id">have</span> <span class="id">smB</span> := <span class="id">smallest_sub</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mB</span>.<br/>
<span class="comment">(*&nbsp;BUG:&nbsp;elim/smB&nbsp;:&nbsp;_.&nbsp;fails&nbsp;!!&nbsp;*)</span><br/>
<span class="id">apply</span>: (<span class="id">smB</span> (<span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> \<span class="id">o</span> (<span class="id">image</span>^~ <span class="id">EFin</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">r</span> -&gt;]/=; <span class="id">rewrite</span> <span class="id">EFin_itv_bnd_infty</span>; <span class="id">apply</span>: <span class="id">measurableD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span> =&gt; /=; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">measurable_set1y</span>.<br/>
<span class="id">split</span>=&gt; /= [|<span class="id">D</span> <span class="id">mD</span>|<span class="id">F</span> <span class="id">mF</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">image_set0</span>.<br/>
- <span class="id">rewrite</span> <span class="id">setTD</span> <span class="id">EFin_setC</span>; <span class="id">apply</span>: <span class="id">measurableD</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">measurableC</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableU</span>; [<span class="id">exact</span>: <span class="id">measurable_set1Ny</span>| <span class="id">exact</span>: <span class="id">measurable_set1y</span>].<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">EFin_bigcup</span>; <span class="id"><a href="mathcomp.analysis.measure.html#measurableU">apply</a></span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">i</span> <span class="id">_</span> ; <span class="id">exact</span>: <span class="id">mF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">erealgenoinfty</span>.<br/>
<span class="kwd">End</span> <span class="id">ErealGenOInfty</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id">ErealGenCInfty</span>.<br/>
<span class="kwd">Section</span> <span class="id">erealgencinfty</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">r</span> <span class="id">s</span> : <span class="id">R</span>).<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">G</span> := [<span class="id">set</span> <span class="id">A</span> : <span class="id">set</span> \<span class="id">bar</span> <span class="id">R</span> | <span class="kwd">exists</span> <span class="id">r</span>, <span class="id">A</span> = `[<span class="id">r</span>%:<span class="id">E</span>, +<span class="id">oo</span>[%<span class="id">classic</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_set1Ny</span> : <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span> -<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
<span class="id">rewrite</span> <span class="id">eset1Ny</span>; <span class="id">apply</span>: <span class="id">bigcapT_measurable</span>=&gt; <span class="id">i</span>; <span class="id">rewrite</span> -<span class="id">setCitvr</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableC</span>; <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="kwd">exists</span> (- <span class="id">i</span>%:<span class="id">R</span>)%<span class="id">R</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_set1y</span> : <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> [<span class="id">set</span> +<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
<span class="id">rewrite</span> <span class="id">eset1y</span>; <span class="id">apply</span>: <span class="id">bigcap_measurable</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> -<span class="id">setCitvl</span>; <span class="id">apply</span>: <span class="id">measurableC</span>; <span class="id">rewrite</span> (<span class="id">eitv_infty_bnd</span> <span class="id">true</span>).<br/>
<span class="id">apply</span>: <span class="id">bigcap_measurable</span> =&gt; <span class="id">j</span> <span class="id">_</span>; <span class="id">rewrite</span> -<span class="id">setCitvr</span>; <span class="id">apply</span>: <span class="id">measurableC</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="kwd">exists</span> (<span class="id">i</span>%:<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#ErealGenInftyO.erealgeninftyo.R">R</a></span> + <span class="id">j</span>.+1%:<span class="id">R</span>^-1)%<span class="id">R</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurableE</span> : <span class="id">emeasurable</span> (@<span class="id">ocitv</span> <span class="id">R</span>) = <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof94')">Proof.</span></div>
<div class="proofscript" id="proof94">
<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">smallest_sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">emeasurable0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">rewrite</span> <span class="id">setTD</span>; <span class="id">exact</span>: <span class="id">emeasurableC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">exact</span>: <span class="id">bigcupT_emeasurable</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">r</span> -&gt;]/=; <span class="kwd">exists</span> `[<span class="id"><a href="mathcomp.analysis.measure.html#sub_sigma_algebra">r</a></span>, +<span class="id">oo</span>[%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">RGenOInfty.measurableE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">RGenOInfty.measurable_itv_bnd_infty</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">set</span> +<span class="id">oo</span>]; [<span class="id">constructor</span>|<span class="id">rewrite</span> -<span class="id">punct_eitv_bndy</span>].<br/>
<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">A</span>' <span class="id">mA</span>' [<span class="id">C</span> <span class="id">mC</span>]] &lt;-; <span class="id">apply</span>: <span class="id">measurableU</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id">mC</span>; [<span class="kwd">by</span> []|<span class="id">exact</span>: <span class="id">measurable_set1Ny</span>| <span class="id">exact</span>: <span class="id">measurable_set1y</span>|].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableU</span>; [<span class="id">exact</span>: <span class="id">measurable_set1Ny</span>|<span class="id">exact</span>: <span class="id">measurable_set1y</span>].<br/>
<span class="id">rewrite</span> <span class="id">RGenCInfty.measurableE</span> <span class="kwd">in</span> <span class="id">mA</span>'.<br/>
<span class="id">have</span> <span class="id">smA</span>' := <span class="id">smallest_sub</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mA</span>'.<br/>
<span class="comment">(*&nbsp;BUG:&nbsp;elim/smA'&nbsp;:&nbsp;_.&nbsp;fails&nbsp;!!&nbsp;*)</span><br/>
<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#strace">apply</a></span>: (<span class="id">smA</span>' (<span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> \<span class="id">o</span> (<span class="id">image</span>^~ <span class="id">EFin</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">r</span> -&gt;]/=; <span class="id">rewrite</span> <span class="id">EFin_itv_bnd_infty</span>; <span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">apply</a></span>: <span class="id">measurableD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span> =&gt; /=; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">measurable_set1y</span>.<br/>
<span class="id">split</span>=&gt; /= [|<span class="id">D</span> <span class="id">mD</span>|<span class="id">F</span> <span class="id">mF</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">image_set0</span>.<br/>
- <span class="id">rewrite</span> <span class="id">setTD</span> <span class="id">EFin_setC</span>; <span class="id">apply</span>: <span class="id">measurableD</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">measurableC</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableU</span>; [<span class="id">exact</span>: <span class="id">measurable_set1Ny</span>|<span class="id">exact</span>: <span class="id">measurable_set1y</span>].<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">EFin_bigcup</span>; <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#setIUr">exact</a></span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#setICr">mF</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">erealgencinfty</span>.<br/>
<span class="kwd">End</span> <span class="id">ErealGenCInfty</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id">ErealGenInftyO</span>.<br/>
<span class="kwd">Section</span> <span class="id">erealgeninftyo</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">G</span> := [<span class="id">set</span> <span class="id">A</span> : <span class="id">set</span> \<span class="id">bar</span> <span class="id">R</span> | <span class="kwd">exists</span> <span class="id">r</span>, <span class="id">A</span> = `]-<span class="id">oo</span>, <span class="id">r</span>%:<span class="id">E</span>[%<span class="id">classic</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurableE</span> : <span class="id">emeasurable</span> (@<span class="id">ocitv</span> <span class="id">R</span>) = <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof95')">Proof.</span></div>
<div class="proofscript" id="proof95">
<span class="id">rewrite</span> <span class="id">ErealGenCInfty.measurableE</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">smallest_sigma_algebra</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">x</span> -&gt;]; <span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span>.-<span class="id">measurable</span> <span class="id">X</span>]<span class="id">setCK</span>; <span class="id">apply</span>: <span class="id">measurableC</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="kwd">exists</span> <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">setCitvr</span>.<br/>
<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">smallest_sigma_algebra</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Gx</span>; <span class="id">rewrite</span> -(<span class="id">setCK</span> <span class="id">x</span>); <span class="id">apply</span>: <span class="id">measurableC</span>; <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">Gx</span> =&gt; <span class="id">y</span> -&gt;; <span class="kwd">exists</span> <span class="id">y</span>; <span class="id">rewrite</span> <span class="id">setCitvl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">erealgeninftyo</span>.<br/>
<span class="kwd">End</span> <span class="id">ErealGenInftyO</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">trace</span>.<br/>
<span class="kwd">Variable</span> (<span class="id">T</span> : <span class="kwd">Type</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">G</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>)) (<span class="id">A</span> <span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">strace</span> <span class="id">G</span> <span class="id">D</span> := [<span class="id">set</span> <span class="id">x</span> `&amp;` <span class="id">D</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">G</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">stracexx</span> <span class="id">G</span> <span class="id">D</span> : <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#is_interval_measurable">G</a></span> <span class="id">D</span> -&gt; <span class="id">strace</span> <span class="id">G</span> <span class="id">D</span> <span class="id">D</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof96')">Proof.</span></div>
<div class="proofscript" id="proof96">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">strace</span> /=; <span class="kwd">exists</span> <span class="id">D</span> =&gt; //; <span class="id">rewrite</span> <span class="id">setIid</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigma_algebra_strace</span> <span class="id">G</span> <span class="id">D</span> :<br/>
&nbsp;&nbsp;<span class="id">sigma_algebra</span> <span class="id">setT</span> <span class="id">G</span> -&gt; <span class="id">sigma_algebra</span> <span class="id">D</span> (<span class="id">strace</span> <span class="id">G</span> <span class="id">D</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof97')">Proof.</span></div>
<div class="proofscript" id="proof97">
<span class="id">move</span>=&gt; [<span class="id">G0</span> <span class="id">GC</span> <span class="id">GU</span>]; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">set0</span> =&gt; //; <span class="id">rewrite</span> <span class="id">set0I</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">S</span> [<span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">mA</a></span> <span class="id">ADS</span>]; <span class="id">have</span> <span class="id">mCA</span> := <span class="id">GC</span> <span class="id">_</span> <span class="id">mA</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> : <span class="id">strace</span> <span class="id">G</span> <span class="id">D</span> (<span class="id">D</span> `&amp;` ~` <span class="id"><a href="mathcomp.analysis.measure.html#measurable">A</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIC</span>; <span class="kwd">exists</span> (<span class="id">setT</span> `\` <span class="id">A</span>) =&gt; //; <span class="id">rewrite</span> <span class="id">setTD</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">setDE</span> =&gt; <span class="id">trDA</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">DADS</span> : <span class="id">D</span> `\` <span class="id">A</span> = <span class="id">D</span> `\` <span class="id">S</span> <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">ADS</span> !<span class="id">setDE</span> <span class="id">setCI</span> <span class="id">setIUr</span> <span class="id">setICr</span> <span class="id">setU0</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">DADS</span> <span class="kwd">in</span> <span class="id">trDA</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">S</span> <span class="id">mS</span>; <span class="id">have</span> /<span class="id">choice</span>[<span class="id">M</span> <span class="id">GM</span>] : <span class="kwd">forall</span> <span class="id">n</span>, <span class="kwd">exists</span> <span class="id">A</span>, <span class="id">G</span> <span class="id">A</span> /\ <span class="id">S</span> <span class="id">n</span> = <span class="id">A</span> `&amp;` <span class="id">D</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">have</span> [<span class="id">A</span> <span class="id">mA</span> <span class="id">ADSn</span>] := <span class="id"><a href="mathcomp.classical.classical_sets.html#set">mS</a></span> <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (\<span class="id">bigcup_i</span> (<span class="id">M</span> <span class="id">i</span>)); <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span> <span class="id">GU</span> =&gt; <span class="id">i</span>;  <span class="id">exact</span>: (<span class="id">GM</span> <span class="id">i</span>).1.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setI_bigcupl</span>; <span class="id">apply</span> <span class="id">eq_bigcupr</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> (<span class="id">GM</span> <span class="id">i</span>).2.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">trace</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">strace_measurable</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">measurable</span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">strace</span> <span class="id">measurable</span> <span class="id">A</span> `&lt;=` <span class="id">measurable</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof98')">Proof.</span></div>
<div class="proofscript" id="proof98">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mA</span>=&gt; <span class="id">_</span> [<span class="id">C</span> <span class="id">mC</span> &lt;-]; <span class="id">apply</span>: <span class="id">measurableI</span>. Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_interval_measurable</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id"><a name="open_continuous_measurable_fun">I</a></span> : <span class="id">set</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">is_interval</span> <span class="id">I</span> -&gt; <span class="id"><a name="D:307">measurable</a></span> <span class="id">I</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof99')">Proof.</span></div>
<div class="proofscript" id="proof99">
 <span class="kwd">by</span> <span class="id">move</span>/<span class="id">is_intervalP</span> =&gt; -&gt;; <span class="id">exact</span>: <span class="id">measurable_itv</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">coutinuous_measurable</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">open_measurable</span> (<span class="id">U</span> : <span class="id">set</span> <span class="id">R</span>) : <span class="id">open</span> <span class="id">U</span> -&gt; <span class="id">measurable</span> <span class="id">U</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof100')">Proof.</span></div>
<div class="proofscript" id="proof100">
<span class="id">move</span>=&gt; /<span class="id">open_bigcup_rat</span> -&gt;; <span class="id">rewrite</span> <span class="id">bigcup_mkcond</span>; <span class="id"><a name="f:309">apply</a></span>: <span class="id">bigcupT_measurable_rat</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">q</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">ifPn</a></span> =&gt; // <span class="id">qfab</span>; <span class="id">apply</span>: <span class="id">is_interval_measurable</span> =&gt; //.<br/>
<span class="id">exact</span>: <span class="id">is_interval_bigcup_ointsub</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">open_measurable_subspace</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">R</span>) (<span class="id">U</span> : <span class="id">set</span> (<span class="id">subspace</span> <span class="id">D</span>)) :<br/>
&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">D</span> -&gt; <span class="id">open</span> <span class="id">U</span> -&gt; <span class="id">measurable</span> (<span class="id">D</span> `&amp;` <span class="id">U</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof101')">Proof.</span></div>
<div class="proofscript" id="proof101">
<span class="id">move</span>=&gt; <span class="id"><a name="D:311">mD</a></span> /<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">open_subspaceP</a></span> [<span class="id">V</span> [<span class="id">oV</span>] <span class="id">VD</span>]; <span class="id">rewrite</span> <span class="id">setIC</span> -<span class="id">VD</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //; <span class="id">exact</span>: <span class="id">open_measurable</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">closed_measurable</span> (<span class="id">U</span> : <span class="id">set</span> <span class="id">R</span>) : <span class="id">closed</span> <span class="id">U</span> -&gt; <span class="id">measurable</span> <span class="id">U</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof102')">Proof.</span></div>
<div class="proofscript" id="proof102">
 <span class="kwd">by</span> <span class="id">move</span>/<span class="id">closed_openC</span>/<span class="id">open_measurable</span>/<span class="id">measurableC</span>; <span class="id">rewrite</span> <span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">compact_measurable</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">R</span>) : <span class="id">compact</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof103')">Proof.</span></div>
<div class="proofscript" id="proof103">
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">compact_closed</span> =&gt; /(<span class="id">_</span> (@<span class="id">Rhausdorff</span> <span class="id">R</span>)); <span class="id">exact</span>: <span class="id">closed_measurable</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subspace_continuous_measurable_fun</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">R</span>) (<span class="id">f</span> : <span class="id">subspace</span> <span class="id">D</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_itv">measurable</a></span> <span class="id">D</span> -&gt; <span class="id">continuous</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof104')">Proof.</span></div>
<div class="proofscript" id="proof104">
<span class="id">move</span>=&gt; <span class="id">mD</span> /<span class="id">continuousP</span> <span class="id">cf</span>; <span class="id">apply</span>: (<span class="id">measurability</span> (<span class="id">RGenOpens.measurableE</span> <span class="id">R</span>)).<br/>
<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">_</span> [<span class="id">a</span> [<span class="id">b</span> -&gt;] &lt;-]]; <span class="id">apply</span>: <span class="id">open_measurable_subspace</span> =&gt; //.<br/>
<span class="id">exact</span>/<span class="id">cf</span>/<span class="id">interval_open</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Corollary</span> <span class="id">open_continuous_measurable_fun</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">R</span>) (<span class="id">f</span> : <span class="id">R</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">open</span> <span class="id">D</span> -&gt; {<span class="kwd">in</span> <span class="id">D</span>, <span class="id">continuous</span> <span class="id">f</span>} -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof105')">Proof.</span></div>
<div class="proofscript" id="proof105">
<span class="id">move</span>=&gt; <span class="id">oD</span>; <span class="id">rewrite</span> -(<span class="id">continuous_open_subspace</span> <span class="id">f</span> <span class="id">oD</span>).<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">subspace_continuous_measurable_fun</span>; <span class="id">exact</span>: <span class="id">open_measurable</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">continuous_measurable_fun</span> (<span class="id">f</span> : <span class="id">R</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">continuous</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> <span class="id">setT</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof106')">Proof.</span></div>
<div class="proofscript" id="proof106">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">cf</span>; <span class="id">apply</span>: <span class="id">open_continuous_measurable_fun</span> =&gt; //; <span class="id">exact</span>: <span class="id">openT</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">coutinuous_measurable</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">standard_measurable_fun</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">Types</a></span> <span class="id">D</span> : <span class="id">set</span> <span class="id">R</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_oppr</span> <span class="id">D</span> : <span class="id">measurable_fun</span> <span class="id">D</span> (-%<span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof107')">Proof.</span></div>
<div class="proofscript" id="proof107">
<span class="id">apply</span>: <span class="id">measurable_funTS</span> =&gt; /=; <span class="id">apply</span>: <span class="id">continuous_measurable_fun</span>.<br/>
<span class="id">exact</span>: (@<span class="id">opp_continuous</span> <span class="id"><a name="D:320">R</a></span> [<span class="id">the</span> <span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id"><a name="x:322">o</a></span>]).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_normr</span> <span class="id">D</span> : <span class="id">measurable_fun</span> <span class="id">D</span> (@<span class="id">normr</span> <span class="id">_</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof108')">Proof.</span></div>
<div class="proofscript" id="proof108">
<span class="id">move</span>=&gt; <span class="id">mD</span>; <span class="id">apply</span>: (<span class="id">measurability</span> (<span class="id">RGenOInfty.measurableE</span> <span class="id">R</span>)) =&gt; //.<br/>
<span class="id">move</span>=&gt; /= <span class="id">_</span> [<span class="id">_</span> [<span class="id">x</span> -&gt;] &lt;-]; <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //.<br/>
<span class="id">have</span> [<span class="id">x0</span>|<span class="id">x0</span>] := <span class="id">leP</span> 0 <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = `]-<span class="id">oo</span>, (- <span class="id">x</span>)[ `|` `]<span class="id">x</span>, +<span class="id">oo</span>[)%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableU</span>; <span class="id">apply</span>: <span class="id">measurable_itv</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span> =&gt; [|[|]]; <span class="id">rewrite</span> <span class="id">preimage_itv</span> ?<span class="id">in_itv</span> ?<span class="id">andbT</span>/=.<br/>
&nbsp;&nbsp;- <span class="id">have</span> [<span class="id">r0</span>|<span class="id">r0</span>] := <span class="id">leP</span> 0 <span class="id">r</span>; [<span class="id">rewrite</span> <span class="id">ger0_norm</span>|<span class="id">rewrite</span> <span class="id">ltr0_norm</span>] =&gt; // <span class="id">xr</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_exprn">rewrite</a></span> 2!<span class="id">in_itv</span>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">right</span>; <span class="id">rewrite</span> <span class="id">xr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">left</span>; <span class="id">rewrite</span> <span class="id">ltr_oppr</span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">rx</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ler0_norm</span> 1?<span class="id">ltr_oppr</span>// (<span class="id">le_trans</span> (<span class="id">ltW</span> <span class="id">rx</span>))// <span class="id">ler_oppl</span> <span class="id">oppr0</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_itv</span> /= <span class="id">andbT</span> =&gt; <span class="id">xr</span>; <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> <span class="id">_</span> (<span class="id">ler_norm</span> <span class="id">_</span>)).<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">setT</span>)// <span class="id">predeqE</span> =&gt; <span class="id">r</span>.<br/>
<span class="kwd">by</span> <span class="id">split</span> =&gt; // <span class="id">_</span>; <span class="id">rewrite</span> /= <span class="id">in_itv</span> /= <span class="id">andbT</span> (<span class="id">lt_le_trans</span> <span class="id">x0</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_mulrl</span> <span class="id">D</span> (<span class="id">k</span> : <span class="id">R</span>) : <span class="id">measurable_fun</span> <span class="id">D</span> ( *%<span class="id">R</span> <span class="id">k</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof109')">Proof.</span></div>
<div class="proofscript" id="proof109">
<span class="id">apply</span>: <span class="id">measurable_funTS</span> =&gt; /=.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">continuous_measurable_fun</span>; <span class="id">exact</span>: <span class="id">mulrl_continuous</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_mulrr</span> <span class="id">D</span> (<span class="id">k</span> : <span class="id">R</span>) : <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span> * <span class="id">k</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof110')">Proof.</span></div>
<div class="proofscript" id="proof110">
<span class="id">apply</span>: <span class="id">measurable_funTS</span> =&gt; /=.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">continuous_measurable_fun</span>; <span class="id">exact</span>: <span class="id">mulrr_continuous</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_exprn</span> <span class="id">D</span> <span class="id">n</span> : <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span> ^+ <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof111')">Proof.</span></div>
<div class="proofscript" id="proof111">
<span class="id">apply</span> <span class="id">measurable_funTS</span> =&gt; /=.<br/>
<span class="kwd">by</span> <span class="id">apply</span> <span class="id">continuous_measurable_fun</span>; <span class="id">exact</span>: <span class="id">exprn_continuous</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">standard_measurable_fun</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> (-%<span class="id">R</span>)) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">exact</span>: <span class="id">measurable_oppr</span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> <span class="id">normr</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">exact</span>: <span class="id">measurable_normr</span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> ( *%<span class="id">R</span> <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">exact</span>: <span class="id">measurable_mulrl</span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id"><a name="q:330">_</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span> ^+ <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">exact</span>: <span class="id">measurable_exprn</span>] : <span class="id">core</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_exprn</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_sqr</span> := <span class="id">measurable_exprn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_oppr</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_opp</span> := <span class="id">measurable_oppr</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_oppr</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_funN</span> := <span class="id">measurable_oppr</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_normr</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_normr</span> := <span class="id">measurable_normr</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id"><a name="measurable_funB">since</a></span>="<span class="id">mathcomp</span>-<span class="id"><a name="D:340">analysis</a></span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_exprn</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_exprn</span> := <span class="id">measurable_exprn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id"><a name="measurable_funM">note</a></span>="<span class="id">use</span> `<span class="id">measurable_mulrl</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_funrM</span> := <span class="id">measurable_mulrl</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measurable_fun_realType</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id"><a name="x:346">T</a></span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">R</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_funD</span> <span class="id">D</span> <span class="id">f</span> <span class="id">g</span> :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">g</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">f</span> \+ <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof112')">Proof.</span></div>
<div class="proofscript" id="proof112">
<span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">mg</span> <span class="id">mD</span>; <span class="id">apply</span>: (<span class="id">measurability</span> (<span class="id">RGenOInfty.measurableE</span> <span class="id">R</span>)) =&gt; //.<br/>
<span class="id">move</span>=&gt; /= <span class="id">_</span> [<span class="id">_</span> [<span class="id">a</span> -&gt;] &lt;-]; <span class="id">rewrite</span> <span class="id">preimage_itv_o_infty</span>.<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">rewrite</a></span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = \<span class="id">bigcup_</span>(<span class="id">q</span> : <span class="id">rat</span>)<br/>
&nbsp;&nbsp;((<span class="id">D</span> `&amp;` [<span class="id">set</span> <span class="id">x</span> | <span class="id">ratr</span> <span class="id">q</span> &lt; <span class="id">f</span> <span class="id">x</span>]) `&amp;` (<span class="id">D</span> `&amp;` [<span class="id">set</span> <span class="id">x</span> | <span class="id">a</span> - <span class="id">ratr</span> <span class="id">q</span> &lt; <span class="id">g</span> <span class="id">x</span>]))).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">bigcupT_measurable_rat</span> =&gt; <span class="id">q</span>; <span class="id">apply</span>: <span class="id">measurableI</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">preimage_itv_o_infty</span>; <span class="id">apply</span>: <span class="id">mf</span> =&gt; //; <span class="id">apply</span>: <span class="id">measurable_itv</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">preimage_itv_o_infty</span>; <span class="id">apply</span>: <span class="id">mg</span> =&gt; //; <span class="id">apply</span>: <span class="id">measurable_itv</span>.<br/>
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; [|[<span class="id">r</span> <span class="id">_</span>] []/= [<span class="id">Dx</span> <span class="id">rfx</span>]] /= =&gt; [[<span class="id">Dx</span>]|[<span class="id">_</span>]].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">ltr_subl_addr</span> =&gt; /<span class="id">rat_in_itvoo</span>[<span class="id">r</span>]; <span class="id">rewrite</span> <span class="id">inE</span> /= =&gt; /<span class="id">itvP</span> <span class="id">h</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">r</span> =&gt; //; <span class="id">rewrite</span> <span class="id">setIACA</span> <span class="id">setIid</span>; <span class="id">split</span> =&gt; //; <span class="id">split</span> =&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">h</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_subl_addr</span> <span class="id">addrC</span> -<span class="id">ltr_subl_addr</span> <span class="id">h</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_subl_addr</span>=&gt; <span class="id">afg</span>; <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> <span class="id">afg</span>)// <span class="id">addrC</span> <span class="id">ler_add2r</span> <span class="id"><a href="mathcomp.classical.boolp.html#eq_fun">ltW</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_funB</span> <span class="id">D</span> <span class="id">f</span> <span class="id">g</span> : <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">g</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">f</span> \- <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof113')">Proof.</span></div>
<div class="proofscript" id="proof113">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ? ?; <span class="id">apply</span>: <span class="id">measurable_funD</span> =&gt;//; <span class="id">exact</span>: <span class="id">measurableT_comp</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_funM</span> <span class="id">D</span> <span class="id">f</span> <span class="id">g</span> :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id"><a name="measurable_maxr">f</a></span> -&gt; <span class="id">measurable_fun</span> <span class="id"><a name="g:361">D</a></span> <span class="id">g</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">f</span> \* <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof114')">Proof.</span></div>
<div class="proofscript" id="proof114">
<span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">mg</span>; <span class="id">rewrite</span> (<span class="id">_</span> : (<span class="id">_</span> \* <span class="id">_</span>) = (<span class="kwd">fun</span> <span class="id">x</span> =&gt; 2%:<span class="id">R</span>^-1 * (<span class="id">f</span> <span class="id">x</span> + <span class="id">g</span> <span class="id">x</span>) ^+ 2)<br/>
&nbsp;&nbsp;\- (<span class="kwd">fun</span> <span class="id">x</span> =&gt; 2%:<span class="id">R</span>^-1 * (<span class="id">f</span> <span class="id">x</span> ^+ 2)) \- (<span class="kwd">fun</span> <span class="id">x</span> =&gt; 2%:<span class="id">R</span>^-1 * (<span class="id">g</span> <span class="id">x</span> ^+ 2))).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">measurable_funB</span>; <span class="id">first</span> <span class="id">apply</span>: <span class="id">measurable_funB</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span>: <span class="id">measurableT_comp</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableT_comp</span> (<span class="id">measurable_exprn</span> <span class="id">_</span>) <span class="id">_</span>; <span class="id">exact</span>: <span class="id">measurable_funD</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span>: <span class="id">measurableT_comp</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">measurableT_comp</span> (<span class="id">measurable_exprn</span> <span class="id">_</span>) <span class="id">_</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span>: <span class="id">measurableT_comp</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">measurableT_comp</span> (<span class="id">measurable_exprn</span> <span class="id"><a name="D:365">_</a></span>) <span class="id"><a name="h:366">_</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> -2!<span class="id">mulrBr</span> <span class="id">sqrrD</span> (<span class="id">addrC</span> (<span class="id">f</span> <span class="id">x</span> ^+ 2)) -<span class="id">addrA</span>.<br/>
<span class="id">rewrite</span> -(<span class="id">addrA</span> (<span class="id">f</span> <span class="id">x</span> * <span class="id">g</span> <span class="id">x</span> *+ 2)) -<span class="id">opprB</span> <span class="id">opprK</span> (<span class="id">addrC</span> (<span class="id">g</span> <span class="id">x</span> ^+ 2)) <span class="id">addrK</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">mulr_natr</span> (<span class="id">f</span> <span class="id">x</span> * <span class="id">g</span> <span class="id">x</span>)) -(<span class="id">mulrC</span> 2) <span class="id">mulrA</span> <span class="id">mulVr</span> ?<span class="id">mul1r</span>// <span class="id">unitfE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fun_ltr</span> <span class="id">D</span> <span class="id">f</span> <span class="id">g</span> : <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">g</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">f</span> <span class="id">x</span> &lt; <span class="id">g</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof115')">Proof.</span></div>
<div class="proofscript" id="proof115">
<span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">mg</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_itv">mD</a></span> <span class="id">Y</span> <span class="id">mY</span>; <span class="id">have</span> [| | |] := <span class="id">set_bool</span> <span class="id">Y</span> =&gt; /<span class="id">eqP</span> -&gt;.<br/>
- <span class="id">under</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_fun_realType.T">eq_fun</a></span> <span class="id">do</span> <span class="id">rewrite</span> -<span class="id">subr_gt0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">preimage_true</span> -<span class="id">preimage_itv_o_infty</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">measurable_funB</span> <span class="id">mg</span> <span class="id">mf</span>) =&gt; //; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
- <span class="id">under</span> <span class="id">eq_fun</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">ltNge</span> -<span class="id">subr_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">preimage_false</span> <span class="id">set_predC</span> <span class="id">setCK</span> -<span class="id">preimage_itv_c_infty</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">measurable_funB</span> <span class="id">mf</span> <span class="id">mg</span>) =&gt; //; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">preimage_set0</span> <span class="id">setI0</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">preimage_setT</span> <span class="id">setIT</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_maxr</span> <span class="id">D</span> <span class="id">f</span> <span class="id">g</span> :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">g</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">f</span> \<span class="id">max</span> <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof116')">Proof.</span></div>
<div class="proofscript" id="proof116">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#has_lbound">mf</a></span> <span class="id">mg</span> <span class="id">mD</span>; <span class="id">move</span>: (<span class="id">mD</span>); <span class="id">apply</span>: <span class="id">measurable_fun_if</span> =&gt; //;<br/>
&nbsp;&nbsp;[<span class="id">exact</span>: <span class="id">measurable_fun_ltr</span>|<span class="id">exact</span>: <span class="id">measurable_funS</span> <span class="id">mg</span>|<span class="id">exact</span>: <span class="id">measurable_funS</span> <span class="id">mf</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_minr</span> <span class="id">D</span> <span class="id"><a name="x:383">f</a></span> <span class="id">g</span> :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">g</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">f</span> \<span class="id">min</span> <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof117')">Proof.</span></div>
<div class="proofscript" id="proof117">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">mg</span> <span class="id">mD</span>; <span class="id">move</span>: (<span class="id">mD</span>); <span class="id">apply</span>: <span class="id">measurable_fun_if</span> =&gt; //;<br/>
&nbsp;[<span class="id">exact</span>: <span class="id">measurable_fun_ltr</span>|<span class="id">exact</span>: <span class="id">measurable_funS</span> <span class="id">mf</span>|<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.reals.html#inf">measurable_funS</a></span> <span class="id">mg</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fun_sups</span> <span class="id">D</span> (<span class="id">h</span> : (<span class="id">T</span> -&gt; <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">n</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>, <span class="id">D</span> <span class="id">t</span> -&gt; <span class="id">has_ubound</span> (<span class="id">range</span> (<span class="id">h</span> ^~ <span class="id">t</span>))) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id"><a href="mathcomp.analysis.measure.html#eq_measurable_fun">m</a></span>, <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">h</span> <span class="id">m</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">sups</span> (<span class="id">h</span> ^~ <span class="id">x</span>) <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof118')">Proof.</span></div>
<div class="proofscript" id="proof118">
<span class="id">move</span>=&gt; <span class="id">f_ub</span> <span class="id">mf</span> <span class="id">mD</span>; <span class="id">apply</span>: (<span class="id">measurability</span> (<span class="id">RGenOInfty.measurableE</span> <span class="id">R</span>)) =&gt; //.<br/>
<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">_</span> [<span class="id">x</span> -&gt;] &lt;-]; <span class="id">rewrite</span> <span class="id">sups_preimage</span> // <span class="id">setI_bigcupr</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span> /= <span class="id">nk</span>; <span class="id">apply</span>: <span class="id">mf</span> =&gt; //; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fun_infs</span> <span class="id">D</span> (<span class="id">h</span> : (<span class="id"><a name="h:389">T</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_fun_realType.T">R</a></span>)^<span class="id">nat</span>) <span class="id">n</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>, <span class="id">D</span> <span class="id"><a name="m:391">t</a></span> -&gt; <span class="id">has_lbound</span> (<span class="id">range</span> (<span class="id">h</span> ^~ <span class="id">t</span>))) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">h</span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">infs</span> (<span class="id">h</span> ^~ <span class="id">x</span>) <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof119')">Proof.</span></div>
<div class="proofscript" id="proof119">
<span class="id">move</span>=&gt; <span class="id">lb_f</span> <span class="id">mf</span> <span class="id">mD</span>; <span class="id">apply</span>: (<span class="id">measurability</span> (<span class="id">RGenInftyO.measurableE</span> <span class="id">R</span>)) =&gt;//.<br/>
<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">_</span> [<span class="id">x</span> -&gt;] &lt;-]; <span class="id">rewrite</span> <span class="id">infs_preimage</span> // <span class="id">setI_bigcupr</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span> /= <span class="id">nk</span>; <span class="id">apply</span>: <span class="id">mf</span> =&gt; //; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fun_limn_sup</span> <span class="id">D</span> (<span class="id">h</span> : (<span class="id">T</span> -&gt; <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>, <span class="id">D</span> <span class="id">t</span> -&gt; <span class="id">has_ubound</span> (<span class="id">range</span> (<span class="id"><a href="mathcomp.analysis.normedtype.html#cvg_seq_bounded">h</a></span> ^~ <span class="id">t</span>))) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>, <span class="id">D</span> <span class="id">t</span> -&gt; <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_fun_realType.R">has_lbound</a></span> (<span class="id">range</span> (<span class="id">h</span> ^~ <span class="id">t</span>))) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">measurable_fun</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#bounded_fun_has_lbound">D</a></span> (<span class="id">h</span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">limn_sup</span> (<span class="id">h</span> ^~ <span class="id">x</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof120')">Proof.</span></div>
<div class="proofscript" id="proof120">
<span class="id">move</span>=&gt; <span class="id">f_ub</span> <span class="id">f_lb</span> <span class="id">mf</span>.<br/>
<span class="id">have</span> : {<span class="kwd">in</span> <span class="id">D</span>, (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">inf</span> [<span class="id">set</span> <span class="id">sups</span> (<span class="id">h</span> ^~ <span class="id">x</span>) <span class="id">n</span> | <span class="id">n</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">n</span> | 0 &lt;= <span class="id">n</span>]%<span class="id">N</span>])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=1 (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">limn_sup</span> (<span class="id">h</span>^~ <span class="id">x</span>))}.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">t</span>; <span class="id">rewrite</span> <span class="id">inE</span> =&gt; <span class="id">Dt</span>; <span class="id">apply</span>/<span class="id">esym</span>/<span class="id">cvg_lim</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">Rhausdorff</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> --&gt; <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">inf</span> (<span class="id">range</span> (<span class="id">sups</span> (<span class="id">h</span>^~<span class="id">t</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">cvg_sups_inf</span>; [<span class="id">exact</span>: <span class="id">f_ub</span>|<span class="id">exact</span>: <span class="id">f_lb</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">congr</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">inf</a></span> [<span class="id">set</span> <span class="id">_</span> | <span class="id">_</span> <span class="kwd">in</span> <span class="id">_</span>]); <span class="id">rewrite</span> <span class="id">predeqE</span>.<br/>
<span class="id">move</span>/<span class="id">eq_measurable_fun</span>; <span class="id">apply</span>; <span class="id">apply</span>: <span class="id">measurable_fun_infs</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">t</span> <span class="id">Dt</span>; <span class="id">have</span> [<span class="id">M</span> <span class="id">hM</span>] := <span class="id">f_lb</span> <span class="id">_</span> <span class="id">Dt</span>; <span class="kwd">exists</span> <span class="id">M</span> =&gt; <span class="id">_</span> [<span class="id">m</span> /= <span class="id">nm</span> &lt;-].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">h</span> <span class="id">m</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">t</a></span>)) //; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span> <span class="id">hM</span> =&gt; /=; <span class="kwd">exists</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sup_ub</span>; [<span class="id">exact</span>/<span class="id">has_ubound_sdrop</span>/<span class="id">f_ub</span>|<span class="kwd">exists</span> <span class="id">m</span> =&gt; /=].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">k</a></span>; <span class="id">exact</span>: <span class="id">measurable_fun_sups</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fun_cvg</span> <span class="id">D</span> (<span class="id">h</span> : (<span class="id">T</span> -&gt; <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">f</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">m</span>, <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">h</span> <span class="id">m</span>)) -&gt; (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">D</span> <span class="id">x</span> -&gt; <span class="id">h</span> ^~ <span class="id">x</span> --&gt; <span class="id">f</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof121')">Proof.</span></div>
<div class="proofscript" id="proof121">
<span class="id">move</span>=&gt; <span class="id">mf_</span> <span class="id">f_f</span>; <span class="id">have</span> <span class="id">fE</span> <span class="id">x</span> : <span class="id">D</span> <span class="id">x</span> -&gt; <span class="id">f</span> <span class="id">x</span> = <span class="id">limn_sup</span> (<span class="id">h</span> ^~ <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Dx</span>; <span class="id">have</span> /<span class="id">cvg_lim</span>  &lt;-// := @<span class="id">cvg_sups</span> <span class="id">_</span> (<span class="id">h</span> ^~ <span class="id">x</span>) (<span class="id">f</span> <span class="id">x</span>) (<span class="id">f_f</span> <span class="id">_</span> <span class="id">Dx</span>).<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">Rhausdorff</span>.<br/>
<span class="id">apply</span>: (@<span class="id">eq_measurable_fun</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a name="measurable_fun_ln">_</a></span> <span class="id">_</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">limn_sup</span> (<span class="id">h</span> ^~ <span class="id">x</span>))).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id"><a name="R:397">inE</a></span> =&gt; <span class="id">Dx</span>; <span class="id">rewrite</span> -<span class="id">fE</span>.<br/>
<span class="id">apply</span>: (@<span class="id">measurable_fun_limn_sup</span> <span class="id">_</span> <span class="id">h</span>) =&gt; // <span class="id">t</span> <span class="id">Dt</span>.<br/>
- <span class="id">apply</span>/<span class="id">bounded_fun_has_ubound</span>/(@<span class="id">cvg_seq_bounded</span> <span class="id">_</span> [<span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>]).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="id">eexists</span>; <span class="id">exact</span>: <span class="id">f_f</span>.<br/>
- <span class="id">apply</span>/<span class="id">bounded_fun_has_lbound</span>/(@<span class="id">cvg_seq_bounded</span> <span class="id">_</span> [<span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>]).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.exp.html#powR">cvg_ex</a></span>; <span class="id">eexists</span>; <span class="id">exact</span>: <span class="id">f_f</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measurable_fun_realType</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">measurable_fun_limn_sup</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_lim_sup</span> := <span class="id">measurable_fun_limn_sup</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_ln</span> (<span class="id">R</span> : <span class="id">realType</span>) : <span class="id">measurable_fun</span> [<span class="id">set</span>~ (0:<span class="id">R</span>)] (@<span class="id">ln</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof122')">Proof.</span></div>
<div class="proofscript" id="proof122">
<span class="id">rewrite</span> (<span class="id">_</span> : [<span class="id">set</span>~ 0] = `]-<span class="id">oo</span>, 0[ `|` `]0, +<span class="id">oo</span>[); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">setCitv</span> `[0, 0]); <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; [|]<span class="id">x</span>/=;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">in_itv</span>/= -<span class="id">eq_le</span> <span class="id">eq_sym</span>; [<span class="id">move</span>/<span class="id">eqP</span>/<span class="id">negbTE</span> =&gt; -&gt;|<span class="id">move</span>/<span class="id">negP</span>/<span class="id">eqP</span>].<br/>
<span class="id">apply</span>/<span class="id">measurable_funU</span> =&gt; //; <span class="id">split</span>.<br/>
- <span class="id">apply</span>/(@<span class="id">measurable_restrict</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">setT</span>) =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> \<span class="id">_</span> <span class="id">_</span> = <span class="id">cst</span> (0:<span class="id">R</span>))//; <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">y</span>; <span class="id">rewrite</span> <span class="id">patchE</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span> =&gt; //; <span class="id">rewrite</span> <span class="id">inE</span>/= <span class="id">in_itv</span>/= =&gt; <span class="id">y0</span>; <span class="id">rewrite</span> <span class="id">ln0</span>// <span class="id">ltW</span>.<br/>
- <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_powR">have</a></span> : {<span class="kwd">in</span> `]0, +<span class="id">oo</span>[%<span class="id">classic</span>, <span class="id">continuous</span> (@<span class="id">ln</span> <span class="id">R</span>)}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">inE</span>/= <span class="id">in_itv</span>/= <span class="id">andbT</span> =&gt; <span class="id">x0</span>; <span class="id">exact</span>: <span class="id"><a name="measurable_fun_max">continuous_ln</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">continuous_open_subspace</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">interval_open</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id">subspace_continuous_measurable_fun</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">apply</a></span>; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
Qed.</div>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> (@<span class="id">ln</span> <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id">measurable_ln</span>] : <span class="id">core</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_ln</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_ln</span> := <span class="id"><a name="measurable_abse">measurable_ln</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_expR</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#abse">R</a></span> : <span class="id">realType</span>) : <span class="id">measurable_fun</span> [<span class="id"><a href="mathcomp.analysis.measure.html#measurability">set</a></span>: <span class="id">R</span>] <span class="id">expR</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof123')">Proof.</span></div>
<div class="proofscript" id="proof123">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">continuous_measurable_fun</span>; <span class="id">exact</span>: <span class="id">continuous_expR</span>. Qed.</div>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> <span class="id">expR</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#setIUr">solve</a></span> [<span class="id">apply</span>: <span class="id">measurable_expR</span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_powR</span> (<span class="id">R</span> : <span class="id">realType</span>) <span class="id">p</span> :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> [<span class="id">set</span>: <span class="id">R</span>] (@<span class="id">powR</span> <span class="id">R</span> ^~ <span class="id">p</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof124')">Proof.</span></div>
<div class="proofscript" id="proof124">
<span class="id">apply</span>: <span class="id">measurable_fun_if</span> =&gt; //.<br/>
- <span class="id">apply</span>: (<span class="id">measurable_fun_bool</span> <span class="id">true</span>); <span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> @^-1` <span class="id">_</span> = [<span class="id">set</span> 0])//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; [<span class="id">_</span> /<span class="id">eqP</span> -&gt;//|<span class="id">_</span> -&gt; /=]; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
- <span class="id">rewrite</span> <span class="id">setTI</span>; <span class="id">apply</span>: <span class="id">measurableT_comp</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> @^-1` <span class="id">_</span> = [<span class="id">set</span>~ 0]); <span class="id">first</span> <span class="id">exact</span>: <span class="id">measurableT_comp</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; [<span class="id">x</span> /<span class="id">negP</span>/<span class="id">negP</span>/<span class="id">eqP</span>|<span class="id">x</span> <span class="id">x0</span>]//=; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">exact</a></span>/<span class="id">negbTE</span>/<span class="id">eqP</span>.<br/>
Qed.</div>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> (@<span class="id">powR</span> <span class="id">_</span> ^~ <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id">measurable_powR</span>] : <span class="id">core</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_powR</span>` <span class="id"><a href="mathcomp.analysis.measure.html#measurability">instead</a></span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_power_pos</span> := <span class="id">measurable_powR</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.4", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_powR</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_power_pos</span> := <span class="id">measurable_powR</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_maxr</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun_max</a></span> := <span class="id">measurable_maxr</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">standard_emeasurable_fun</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_EFin</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">R</span>) : <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">EFin</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof125')">Proof.</span></div>
<div class="proofscript" id="proof125">
<span class="id">move</span>=&gt; <span class="id">mD</span>; <span class="id">apply</span>: (<span class="id">measurability</span> (<span class="id">ErealGenOInfty.measurableE</span> <span class="id">R</span>)) =&gt; //.<br/>
<span class="id">move</span>=&gt; /= <span class="id">_</span> [<span class="id">_</span> [<span class="id">x</span> -&gt;]] &lt;-; <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">preimage_itv_o_infty</span> <span class="id">EFin_itv</span>; <span class="id"><a name="emeasurable_fun_minus">exact</a></span>: <span class="id">measurable_itv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_abse</span> (<span class="id">D</span> : <span class="id">set</span> (\<span class="id">bar</span> <span class="id">R</span>)) : <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">abse</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof126')">Proof.</span></div>
<div class="proofscript" id="proof126">
<span class="id">move</span>=&gt; <span class="id">mD</span>; <span class="id">apply</span>: (<span class="id">measurability</span> (<span class="id"><a name="measurable_fun_abse">ErealGenOInfty.measurableE</a></span> <span class="id">R</span>)) =&gt; //.<br/>
<span class="id">move</span>=&gt; /= <span class="id">_</span> [<span class="id">_</span> [<span class="id">x</span> -&gt;] &lt;-].<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> @^-1` <span class="id">X</span>](<span class="id">punct_eitv_bndy</span> <span class="id">_</span> <span class="id">x</span>) <span class="id">preimage_setU</span> <span class="id">setIUr</span>.<br/>
<span class="id">apply</span>: <span class="id">measurableU</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">preimage_abse_pinfty</span>; <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //; <span class="id">exact</span>: <span class="id">measurableU</span>.<br/>
<span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //; <span class="kwd">exists</span> (<span class="id">normr</span> @^-1` `]<span class="id">x</span>, +<span class="id">oo</span>[%<span class="id">classic</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>]<span class="id">setTI</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurable_normr</span> =&gt; //; <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
<span class="kwd">exists</span> <span class="id">set0</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">constructor</span>.<br/>
<span class="id">rewrite</span> <span class="id">setU0</span> <span class="id">predeqE</span> =&gt; -[<span class="id">y</span>| |]; <span class="id">split</span> =&gt; /= =&gt; -[<span class="id">r</span>];<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> ?/= /= ?<span class="id">in_itv</span> /= ?<span class="id">andbT</span> =&gt; <span class="id">xr</span>//.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">ry</span>]; <span class="kwd">exists</span> `|<span class="id">y</span>| =&gt; //=; <span class="id">rewrite</span> <span class="id">in_itv</span>/= <span class="id">andbT</span> -<span class="id">ry</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">ry</span>]; <span class="kwd">exists</span> <span class="id">y</span> =&gt; //=; <span class="id">rewrite</span> /= <span class="id">in_itv</span>/= <span class="id">andbT</span> -<span class="id">ry</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_oppe</span> (<span class="id">D</span> : <span class="id">set</span> (\<span class="id">bar</span> <span class="id">R</span>)) :<br/>
&nbsp;&nbsp;<span class="id"><a name="T:413">measurable_fun</a></span> <span class="id">D</span> (-%<span class="id">E</span> : \<span class="id">bar</span> <span class="id">R</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof127')">Proof.</span></div>
<div class="proofscript" id="proof127">
<span class="id">move</span>=&gt; <span class="id">mD</span>; <span class="id">apply</span>: (<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">measurability</a></span> (<span class="id">ErealGenCInfty.measurableE</span> <span class="id">R</span>)) =&gt; //.<br/>
<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">_</span> [<span class="id">x</span> -&gt;] &lt;-]; <span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> @^-1` <span class="id"><a name="x:416">_</a></span> = `]-<span class="id">oo</span>, (- <span class="id">x</span>)%:<span class="id">E</span>]%<span class="id">classic</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //; <span class="id">exact</span>: <span class="id">emeasurable_itv</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">y</span>; <span class="id">rewrite</span> <span class="id">preimage_itv</span> !<span class="id">in_itv</span>/= <span class="id">andbT</span> <span class="id">in_itv</span> <span class="id">lee_oppr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">standard_emeasurable_fun</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> <span class="id">abse</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">exact</span>: <span class="id">measurable_abse</span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> <span class="id">EFin</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">exact</span>: <span class="id">measurable_EFin</span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> (-%<span class="id">E</span>)) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">exact</span>: <span class="id">measurable_oppe</span>] : <span class="id">core</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_oppe</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">emeasurable_fun_minus</span> := <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#emeasurable_fun.T">measurable_oppe</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_abse</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_abse</span> := <span class="id"><a href="mathcomp.analysis.measure.html#measurability">measurable_abse</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_EFin</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_EFin</span> := <span class="id">measurable_EFin</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">EFin_measurable_fun</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">EFin</span> \<span class="id">o</span> <span class="id">g</span>) &lt;-&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof128')">Proof.</span></div>
<div class="proofscript" id="proof128">
<span class="id">split</span>=&gt; [<span class="id">mf</span> <span class="id">mD</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurability">A</a></span> <span class="id">mA</span>|]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mg</span>; <span class="id">exact</span>: <span class="id">measurableT_comp</span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id"><a href="mathcomp.analysis.sequences.html#esups_preimage">_</a></span> = <span class="id">D</span> `&amp;` (<span class="id">EFin</span> \<span class="id">o</span> <span class="id">g</span>) @^-1` (<span class="id">EFin</span> @` <span class="id">A</span>)).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">mf</span> =&gt; //; <span class="kwd">exists</span> <span class="id">A</span> =&gt; //; <span class="kwd">exists</span> <span class="id">set0</span>; [<span class="id">constructor</span>|<span class="id">rewrite</span> <span class="id">setU0</span>].<br/>
<span class="id"><a name="f:434">congr</a></span> (<span class="id">_</span> `&amp;` <span class="id">_</span>);<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#emeasurable_fun.R">rewrite</a></span> <span class="id">eqEsubset</span>; <span class="id">split</span>=&gt; [|? []/= <span class="id">_</span> /[<span class="id">swap</span>] -[-&gt;//]].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; ? ?; <span class="id">exact</span>: <span class="id">preimage_image</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_er_map</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurability">measurableType</a></span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurableE">d</a></span>) (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">f</span> : <span class="id">R</span> -&gt; <span class="id">R</span>)<br/>
&nbsp;&nbsp;: <span class="id">measurable_fun</span> <span class="id">setT</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> [<span class="id"><a href="mathcomp.analysis.measure.html#measurable">set</a></span>: \<span class="id">bar</span> <span class="id">R</span>] (<span class="id">er_map</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof129')">Proof.</span></div>
<div class="proofscript" id="proof129">
<span class="id">move</span>=&gt; <span class="id">mf</span>;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">er_map</span> <span class="id">_</span> =<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="kwd">if</span> <span class="id">x</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> <span class="kwd">then</span> (<span class="id">f</span> (<span class="id">fine</span> <span class="id">x</span>))%:<span class="id">E</span> <span class="kwd">else</span> <span class="id">x</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">funext</span>=&gt; -[].<br/>
<span class="id">apply</span>: <span class="id">measurable_fun_ifT</span> =&gt; //=.<br/>
+ <span class="id">apply</span>: (<span class="id">measurable_fun_bool</span> <span class="id">true</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">preimage</span>/= -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>]<span class="id">setTI</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">emeasurable_fin_num</span>.<br/>
+ <span class="id">exact</span>/<span class="id">EFin_measurable_fun</span>/<span class="id">measurableT_comp</span>.<br/>
Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">measurable_er_map</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_er_map</span> := <span class="id">measurable_er_map</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">emeasurable_fun</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Context</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#emeasurable_fun.R">d</a></span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurableType</a></span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fun_einfs</span> <span class="id">D</span> (<span class="id">f</span> : (<span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id"><a name="D:442">f</a></span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">einfs</a></span> (<span class="id">f</span> ^~ <span class="id">x</span>) <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof130')">Proof.</span></div>
<div class="proofscript" id="proof130">
<span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">n</span> <span class="id">mD</span>.<br/>
<span class="id">apply</span>: (<span class="id">measurability</span> (<span class="id">ErealGenCInfty.measurableE</span> <span class="id">R</span>)) =&gt; //.<br/>
<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">_</span> [<span class="id">x</span> -&gt;] &lt;-]; <span class="id">rewrite</span> <span class="id">einfs_preimage</span> -<span class="id">bigcapIr</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; /=.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcap_measurable</span> =&gt; ? ?; <span class="id">exact</span>/<span class="id">mf</span>/<span class="id">emeasurable_itv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fun_esups</span> <span class="id">D</span> (<span class="id">f</span> : (<span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">f</span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">esups</span> (<span class="id">f</span> ^~ <span class="id">x</span>) <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof131')">Proof.</span></div>
<div class="proofscript" id="proof131">
<span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">n</span> <span class="id">mD</span>; <span class="id">apply</span>: (<span class="id">measurability</span> (<span class="id">ErealGenOInfty.measurableE</span> <span class="id">R</span>)) =&gt; //.<br/>
<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">_</span> [<span class="id"><a name="x:453">x</a></span> -&gt;] &lt;-];<span class="id">rewrite</span> <span class="id">esups_preimage</span> <span class="id">setI_bigcupr</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; ? ?; <span class="id">exact</span>/<span class="id">mf</span>/<span class="id">emeasurable_itv</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_maxe</span> <span class="id">D</span> (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">g</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">maxe</span> (<span class="id">f</span> <span class="id">x</span>) (<span class="id">g</span> <span class="id">x</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof132')">Proof.</span></div>
<div class="proofscript" id="proof132">
<span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">mg</span> <span class="id">mD</span>; <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">apply</a></span>: (<span class="id">measurability</span> (<span class="id">ErealGenCInfty.measurableE</span> <span class="id">R</span>)) =&gt; //.<br/>
<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">_</span> [<span class="id">x</span> -&gt;] &lt;-]; <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#emeasurable_fun.T">X</a></span>](<span class="id">_</span> : <span class="id">_</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">D</span> `&amp;` <span class="id">f</span> @^-1` `[<span class="id">x</span>%:<span class="id">E</span>, +<span class="id">oo</span>[) `|` (<span class="id">D</span> `&amp;` <span class="id">g</span> @^-1` `[<span class="id">x</span>%:<span class="id">E</span>, +<span class="id">oo</span>[)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span> /=; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> !/= /= !<span class="id">in_itv</span> /= !<span class="id">andbT</span> <span class="id">le_maxr</span> =&gt; -[<span class="id">Dx</span> /<span class="id">orP</span>[|]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tauto</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [|]; <span class="id">rewrite</span> !/= /= !<span class="id">in_itv</span>/= !<span class="id">andbT</span> <span class="id">le_maxr</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">Dx</span> -&gt;]//; <span class="id">rewrite</span> <span class="id"><a name="x:469">orbT</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableU</span>; [<span class="id">exact</span>/<span class="id">mf</span>/<span class="id">emeasurable_itv</span>| <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">exact</a></span>/<span class="id">mg</span>/<span class="id">emeasurable_itv</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_funepos</span> <span class="id">D</span> (<span class="id">f</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span>^\+.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof133')">Proof.</span></div>
<div class="proofscript" id="proof133">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mf</span>; <span class="id">exact</span>: <span class="id">measurable_maxe</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_funeneg</span> <span class="id">D</span> (<span class="id">f</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span>^\-.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof134')">Proof.</span></div>
<div class="proofscript" id="proof134">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mf</span>; <span class="id">apply</span>: <span class="id">measurable_maxe</span> =&gt; //; <span class="id">exact</span>: <span class="id">measurableT_comp</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_mine</span> <span class="id">D</span> (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; \<span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">bar</a></span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">g</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">mine</span> (<span class="id">f</span> <span class="id">x</span>) (<span class="id">g</span> <span class="id">x</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof135')">Proof.</span></div>
<div class="proofscript" id="proof135">
<span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">mg</span>; <span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id">_</span>) = (<span class="kwd">fun</span> <span class="id">x</span> =&gt; - <span class="id">maxe</span> (- <span class="id">f</span> <span class="id">x</span>) (- <span class="id">g</span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">measurableT_comp</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurable_maxe</span>; <span class="id">exact</span>: <span class="id">measurableT_comp</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">oppe_max</span> !<span class="id">oppeK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fun_limn_esup</span> <span class="id">D</span> (<span class="id">f</span> : (<span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">f</span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">limn_esup</span> (<span class="id">f</span> ^~ <span class="id">x</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof136')">Proof.</span></div>
<div class="proofscript" id="proof136">
<span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">mD</span>; <span class="id">rewrite</span> (<span class="id">_</span> :  (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id">_</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">ereal_inf</span> [<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_funeneg">set</a></span> <span class="id">esups</span> (<span class="id">f</span>^~ <span class="id">x</span>) <span class="id">n</span> | <span class="id">n</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">n</span> | <span class="id">n</span> &gt;= 0]%<span class="id">N</span>])).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurable_fun_einfs</span> =&gt; // <span class="id">k</span>; <span class="id">exact</span>: <span class="id">measurable_fun_esups</span>.<br/>
<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">t</span>; <span class="id">apply</span>/<span class="id">cvg_lim</span> =&gt; //.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> --&gt; <span class="id">X</span>](<span class="id"><a name="lebesgue_regularity_outer">_</a></span> : <span class="id">_</span> = <span class="id">ereal_inf</span> (<span class="id">range</span> (<span class="id">esups</span> (<span class="id">f</span>^~<span class="id">t</span>)))).<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_regularity.R">exact</a></span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable">cvg_esups_inf</a></span>.<br/>
<span class="kwd">by</span> <span class="id">congr</span> (<span class="id">ereal_inf</span> [<span class="id">set</span> <span class="id">_</span> | <span class="id">_</span> <span class="kwd">in</span> <span class="id">_</span>]); <span class="id"><a name="U:475">rewrite</a></span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_regularity.R">predeqE</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">emeasurable_fun_cvg</span> <span class="id">D</span> (<span class="id">f_</span> : (<span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">m</span>, <span class="id">measurable_fun</span> <span class="id">D</span> (<span class="id">f_</span> <span class="id">m</span>)) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">D</span> <span class="id">x</span> -&gt; <span class="id">f_</span> ^~ <span class="id">x</span> --&gt; <span class="id">f</span> <span class="id">x</span>) -&gt; <span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof137')">Proof.</span></div>
<div class="proofscript" id="proof137">
<span class="id">move</span>=&gt; <span class="id">mf_</span> <span class="id">f_f</span>; <span class="id">have</span> <span class="id">fE</span> <span class="id">x</span> : <span class="id">D</span> <span class="id">x</span> -&gt; <span class="id">f</span> <span class="id">x</span> = <span class="id">limn_esup</span> (<span class="id">f_</span>^~ <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Dx</span>; <span class="id">have</span> /<span class="id">cvg_lim</span>  &lt;-// := @<span class="id">cvg_esups</span> <span class="id">_</span> (<span class="id">f_</span>^~<span class="id">x</span>) (<span class="id">f</span> <span class="id">x</span>) (<span class="id">f_f</span> <span class="id">x</span> <span class="id">Dx</span>).<br/>
<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">apply</a></span>: (<span class="id">eq_measurable_fun</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">limn_esup</span> (<span class="id">f_</span> ^~ <span class="id">x</span>))) =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">inE</span> =&gt; <span class="id">Dx</span>; <span class="id">rewrite</span> <span class="id">fE</span>.<br/>
<span class="id">exact</span>: <span class="id">measurable_fun_limn_esup</span>.<br/>
Qed.</div>
<span class="kwd">End</span> <span class="id">emeasurable_fun</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">emeasurable_fun_cvg</span> {<span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">D</span>} <span class="id">f_</span>.<br/>
<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurableT_comp</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">emeasurable_funN</span> := <span class="id">measurableT_comp</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_maxe</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">emeasurable_fun_max</span> := <span class="id">measurable_maxe</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#bnd_simp">mathcomp</a></span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_mine</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">emeasurable_fun_min</span> := <span class="id">measurable_mine</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_funepos</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">emeasurable_fun_funepos</span> := <span class="id">measurable_funepos</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">use</span> `<span class="id">measurable_funeneg</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">emeasurable_fun_funeneg</span> := <span class="id">measurable_funeneg</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">measurable_fun_limn_esup</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_lim_esup</span> := <span class="id">measurable_fun_limn_esup</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">lebesgue_regularity</span>.<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">realType</span>}.<br/>
<span class="kwd">Let</span> <span class="id">mu</span> := [<span class="id">the</span> <span class="id">measure</span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> @<span class="id">lebesgue_measure</span> <span class="id">R</span>].<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">lebesgue_regularity_outer</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">R</span>) (<span class="id">eps</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">D</span> -&gt; <span class="id">mu</span> <span class="id">D</span> &lt; +<span class="id">oo</span> -&gt; (0 &lt; <span class="id">eps</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">U</span> : <span class="id">set</span> <span class="id">R</span>, [/\ <span class="id">open</span> <span class="id">U</span> , <span class="id">D</span> `&lt;=` <span class="id">U</span> &amp; <span class="id">mu</span> (<span class="id">U</span> `\` <span class="id">D</span>) &lt; <span class="id">eps</span>%:<span class="id">E</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof138')">Proof.</span></div>
<div class="proofscript" id="proof138">
<span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.analysis.normedtype.html#interval_open">mD</a></span> <span class="id">muDpos</span> <span class="id">epspos</span>.<br/>
<span class="id">have</span> /<span class="id">ereal_inf_lt</span>[<span class="id">z</span> [<span class="id">M</span>' <span class="id">covDM</span> <span class="id">sMz</span> <span class="id">zDe</span>]] : <span class="id">mu</span> <span class="id">D</span> &lt; <span class="id">mu</span> <span class="id">D</span> + (<span class="id">eps</span> / 2)%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lte_spaddre</span> ?<span class="id">lte_fin</span> ?<span class="id">divr_gt0</span>// <span class="id">ge0_fin_numE</span>.<br/>
<span class="id">pose</span> <span class="id">e2</span> <span class="id">n</span> := (<span class="id">eps</span> / 2) / (2 ^ <span class="id"><a name="n:494">n</a></span>.+1)%:<span class="id">R</span>.<br/>
<span class="id">have</span> <span class="id">e2pos</span> <span class="id">n</span> : (0 &lt; <span class="id">e2</span> <span class="id">n</span>)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> ?<span class="id">divr_gt0</span>.<br/>
<span class="id">pose</span> <span class="id">M</span> <span class="id">n</span> := <span class="kwd">if</span> <span class="id">pselect</span> (<span class="id">M</span>' <span class="id">n</span> = <span class="id">set0</span>) <span class="kwd">then</span> <span class="id">set0</span> <span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(`] <span class="id">inf</span> (<span class="id">M</span>' <span class="id">n</span>), <span class="id">sup</span> (<span class="id">M</span>' <span class="id">n</span>) + <span class="id">e2</span> <span class="id">n</span> [%<span class="id">classic</span>)%<span class="id">R</span>.<br/>
<span class="id">have</span> <span class="id">muM</span> <span class="id">n</span> : <span class="id">mu</span> (<span class="id">M</span> <span class="id">n</span>) &lt;= <span class="id">mu</span> (<span class="id">M</span>' <span class="id">n</span>) + (<span class="id">e2</span> <span class="id">n</span>)%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">M</span>; <span class="id">case</span>: <span class="id">pselect</span> =&gt; /= [-&gt;|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">measure0</span> <span class="id"><a href="mathcomp.analysis.lebesgue_stieltjes_measure.html#wlength_itv">add0e</a></span> <span class="id">lee_fin</span> <span class="id">ltW</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">ocitvP</span>[-&gt; //| [[<span class="id">a</span> <span class="id">b</span> /= <span class="id">alb</span> -&gt; <span class="id">ab0</span>]]] : <span class="id">ocitv</span> (<span class="id">M</span>' <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">covDM</span>  =&gt; /(<span class="id">_</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">inf_itv</span>// <span class="id">sup_itv</span>//.<br/>
&nbsp;&nbsp;<span class="id">have</span> -&gt; : (`]<span class="id">a</span>, (<span class="id">b</span> + <span class="id">e2</span> <span class="id">n</span>)%<span class="id">R</span>[ = `]<span class="id">a</span>, <span class="id">b</span>] `|` `]<span class="id">b</span>, (<span class="id">b</span> + <span class="id">e2</span> <span class="id">n</span>)%<span class="id">R</span>[ )%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">funext</span>=&gt; <span class="id">r</span> /=; <span class="id">rewrite</span> (@<span class="id">itv_splitU</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">BRight</span> <span class="id">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#interval_open">rewrite</a></span> <span class="id">propeqE</span>; <span class="id">split</span>=&gt; /<span class="id">orP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">bnd_simp</span> (<span class="id">ltW</span> <span class="id">alb</span>)/= <span class="id">ltr_spaddr</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">measureU</span>/=.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> !<span class="id">lebesgue_measure_itv</span>/= !<span class="id">lte_fin</span> <span class="id">alb</span> <span class="id">ltr_spaddr</span>//=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">EFinD</span> (<span class="id">b</span> + <span class="id">e2</span> <span class="id">n</span>)) (<span class="id">addrC</span> <span class="id">b</span>) <span class="id">addrK</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_regularity.R">exact</a></span>: <span class="id">is_ocitv</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">open_measurable</span>; <span class="id">exact</span>: <span class="id">interval_open</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_regularity.R">eqEsubset</a></span>; <span class="id">split</span> =&gt; // <span class="id">r</span> []/<span class="id">andP</span> [<span class="id">_</span> +] /<span class="id">andP</span>[+ <span class="id">_</span>] /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">bnd_simp</span> =&gt; /<span class="id">le_lt_trans</span> /[<span class="id">apply</span>]; <span class="id">rewrite</span> <span class="id">ltxx</span>.<br/>
<span class="id">pose</span> <span class="id">U</span> := \<span class="id">bigcup_n</span> <span class="id">M</span> <span class="id">n</span>.<br/>
<span class="kwd">exists</span> <span class="id">U</span>; <span class="id">have</span> <span class="id">DU</span> : <span class="id">D</span> `&lt;=` <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: (<span class="id">covDM</span>) =&gt; <span class="id">_</span> /<span class="id">subset_trans</span>; <span class="id">apply</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#nondecreasing_cvg_mu">subset_bigcup</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">M</span> =&gt; <span class="id">n</span> <span class="id">_</span> <span class="id">x</span>; <span class="id">case</span>: <span class="id">pselect</span> =&gt; [/= -&gt; //|].<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">ocitvP</span> [-&gt; //| [[/= <span class="id">a</span> <span class="id">b</span> <span class="id">alb</span> -&gt; <span class="id">mn</span>]]] : <span class="id">ocitv</span> (<span class="id">M</span>' <span class="id">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">covDM</span> =&gt; /(<span class="id">_</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /= !<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">in_itv</a></span>/= =&gt; /<span class="id">andP</span>[<span class="id">ax</span> <span class="id">xb</span>]; <span class="id">rewrite</span> ?<span class="id">inf_itv</span> ?<span class="id">sup_itv</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ax</span>/= (<span class="id">le_lt_trans</span> <span class="id">xb</span>)// <span class="id">ltr_spaddr</span>.<br/>
<span class="id">have</span> <span class="id">mM</span> <span class="id">n</span> : <span class="id">measurable</span> (<span class="id">M</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.real_interval.html#bigcup_itvT">rewrite</a></span> /<span class="id">M</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#setIT">case</a></span>: <span class="id">pselect</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; /= <span class="id">_</span>; <span class="id">exact</span>: <span class="id">measurable0</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /= <span class="id">_</span>; <span class="id">apply</span>: <span class="id">open_measurable</span>; <span class="id">apply</span>: <span class="id">interval_open</span>.<br/>
<span class="id">have</span> <span class="id">muU</span> : <span class="id">mu</span> <span class="id">U</span> &lt; <span class="id">mu</span> <span class="id">D</span> + <span class="id">eps</span>%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> (\<span class="id">sum_</span>(<span class="id">n</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">M</span> <span class="id">n</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">outer_measure_sigma_subadditive</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> (\<span class="id">sum_</span>(<span class="id">n</span> &lt;<span class="id">oo</span>) (<span class="id">mu</span> (<span class="id">M</span>' <span class="id">n</span>) + (<span class="id">e2</span> <span class="id">n</span>)%:<span class="id">E</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_nneseries</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">le_lt_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">epsilon_trick</span> =&gt; //; <span class="id">rewrite</span> <span class="id">divr_ge0</span>// <span class="id">ltW</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> {2}[<span class="id">eps</span>]<span class="id">splitr</span> <span class="id">EFinD</span> <span class="id">addeA</span> <span class="id">lte_le_add</span>//.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">rewrite</a></span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">zDe</span>)// -<span class="id">sMz</span> <span class="id">lee_nneseries</span>// =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /= -<span class="id">wlength_Rhull</span> <span class="id">wlength_itv</span> !<span class="id">er_map_idfun</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">lebesgue_measure_itv</span> <span class="id">le_measure</span>//= ?<span class="id">inE</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine_abse">covDM</a></span> =&gt; /(<span class="id">_</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#gee0_abs">i</a></span>) + <span class="id">_</span>; <span class="id">exact</span>: <span class="id">sub_sigma_algebra</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">measurable_itv</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">sub_Rhull</span>.<br/>
<span class="id">split</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">bigcup_open</span> =&gt; <span class="id">n</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">M</span>; <span class="id">case</span>: <span class="id">pselect</span> =&gt; /= <span class="id">_</span>; [<span class="id">exact</span>: <span class="id">open0</span>|<span class="id">exact</span>: <span class="id">interval_open</span>].<br/>
<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_regularity.R">rewrite</a></span> <span class="id">measureD</span>//=.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIidr</span>// <span class="id">lte_subel_addl</span>// <span class="id">ge0_fin_numE</span>// (<span class="id">lt_le_trans</span> <span class="id">muU</span>)// <span class="id">leey</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">mM</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> <span class="id">muU</span>)// <span class="id">leey</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lebesgue_nearly_bounded</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">R</span>) (<span class="id">eps</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">D</span> -&gt; <span class="id">mu</span> <span class="id">D</span> &lt; +<span class="id">oo</span> -&gt; (0 &lt; <span class="id">eps</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">ab</span> : <span class="id">R</span> * <span class="id">R</span>, <span class="id">mu</span> (<span class="id">D</span> `\` [<span class="id">set</span>` `[<span class="id">ab</span>.1,<span class="id">ab</span>.2]]) &lt; <span class="id">eps</span>%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof139')">Proof.</span></div>
<div class="proofscript" id="proof139">
<span class="id">move</span>=&gt; <span class="id">mD</span> <span class="id">Dfin</span> <span class="id">epspos</span>; <span class="id">pose</span> <span class="id">Dn</span> <span class="id">n</span> := <span class="id">D</span> `&amp;` [<span class="id">set</span>` `[-(<span class="id">n</span>%:<span class="id">R</span>), <span class="id">n</span>%:<span class="id">R</span>]]%<span class="id">R</span>.<br/>
<span class="id">have</span> <span class="id">mDn</span> <span class="id">n</span> : <span class="id">measurable</span> (<span class="id">Dn</span> <span class="id">n</span>) <span class="kwd">by</span> <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
<span class="id">have</span> : <span class="id">mu</span> \<span class="id">o</span> <span class="id">Dn</span> --&gt; <span class="id">mu</span> (\<span class="id">bigcup_n</span> <span class="id">Dn</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">nondecreasing_cvg_mu</span> =&gt; //.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; // ? <span class="id">_</span>; <span class="id">exact</span>: <span class="id">mDn</span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">m</span> <span class="id">nm</span>; <span class="id">apply</span>/<span class="id">subsetPset</span>; <span class="id">apply</span>: <span class="id">setIS</span> =&gt; <span class="id">z</span> /=; <span class="id">rewrite</span> !<span class="id">in_itv</span>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; /<span class="id">andP</span>[<span class="id">nz</span> <span class="id">zn</span>]; <span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> <span class="id">nz</span>)/= ?(<span class="id">le_trans</span> <span class="id">zn</span>) ?<span class="id">ler_nat</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ler_oppl</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDIr">opprK</a></span> <span class="id">ler_nat</span>.<br/>
<span class="id">rewrite</span> -<span class="id">setI_bigcupr</span>; <span class="id">rewrite</span> <span class="id">bigcup_itvT</span> <span class="id">setIT</span>.<br/>
<span class="id">have</span> <span class="id">finDn</span> <span class="id">n</span> : <span class="id">mu</span> (<span class="id">Dn</span> <span class="id">n</span>) \<span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">is</a></span> <span class="id">a</span> <span class="id">fin_num</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ge0_fin_numE</span>// (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">Dfin</span>)//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">le_measure</span>// ?<span class="id">inE</span>//=; [<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#closed_measurable">exact</a></span>: <span class="id">mDn</span>|<span class="id">exact</span>: <span class="id">subIsetl</span>].<br/>
<span class="id">have</span> <span class="id">finD</span> : <span class="id">mu</span> <span class="id">D</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">fin_num_abs</span> <span class="id">gee0_abs</span>.<br/>
<span class="id">rewrite</span> -[<span class="id">mu</span> <span class="id">D</span>]<span class="id">fineK</span>// =&gt; /<span class="id">fine_cvg</span>/(<span class="id">_</span> (<span class="id">interior</span> (<span class="id">ball</span> (<span class="id">fine</span> (<span class="id">mu</span> <span class="id">D</span>)) <span class="id">eps</span>)))[].<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">nbhs_interior</span>/(<span class="id">nbhsx_ballx</span> <span class="id">_</span> (<span class="id">PosNum</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">epspos</a></span>)).<br/>
<span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">_</span> /(<span class="id">_</span> <span class="id">_</span> (<span class="id">leqnn</span> <span class="id">n</span>))/<span class="id">interior_subset</span> <span class="id">muDN</span>.<br/>
<span class="kwd">exists</span> (-<span class="id">n</span>%:<span class="id">R</span>, <span class="id">n</span>%:<span class="id">R</span>)%<span class="id">R</span>; <span class="id">rewrite</span> <span class="id">measureD</span>//=.<br/>
<span class="id">move</span>: <span class="id">muDN</span>; <span class="id">rewrite</span> /<span class="id">ball</span>/= /<span class="id">ereal_ball</span>/= -<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_regularity_outer">fineB</a></span>//=; <span class="id">last</span> <span class="id">exact</span>: <span class="id">finDn</span>.<br/>
<span class="id">rewrite</span> -<span class="id">lte_fin</span>; <span class="id">apply</span>: <span class="id">le_lt_trans</span>.<br/>
<span class="id">have</span> <span class="id">finDDn</span> : <span class="id">mu</span> <span class="id">D</span> - <span class="id">mu</span> (<span class="id">Dn</span> <span class="id">n</span>) \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span><br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> ?<span class="id">fin_numB</span> ?<span class="id">finD</span> /= ?(<span class="id">finDn</span> <span class="id">n</span>).<br/>
<span class="id">rewrite</span> -<span class="id">fine_abse</span> // <span class="id">gee0_abs</span> ?<span class="id">sube_ge0</span> ?<span class="id">finD</span> ?(<span class="id">finDn</span> <span class="id">_</span>) //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -[<span class="id">_</span> - <span class="id">_</span>]<span class="id">fineK</span> // <span class="id">lte_fin</span> <span class="id">fine</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">le_measure</span>// ?<span class="id">inE</span>//; [<span class="id">exact</span>: <span class="id">measurableI</span> |<span class="id">exact</span>: <span class="id">subIsetl</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lebesgue_regularity_inner</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">R</span>) (<span class="id">eps</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">D</span> -&gt; <span class="id">mu</span> <span class="id">D</span> &lt; +<span class="id">oo</span> -&gt; (0 &lt; <span class="id">eps</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">V</span> : <span class="id">set</span> <span class="id">R</span>, [/\ <span class="id">compact</span> <span class="id">V</span> , <span class="id">V</span> `&lt;=` <span class="id">D</span> &amp; <span class="id">mu</span> (<span class="id">D</span> `\` <span class="id">V</span>) &lt; <span class="id">eps</span>%:<span class="id">E</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof140')">Proof.</span></div>
<div class="proofscript" id="proof140">
<span class="id">move</span>=&gt; <span class="id">mD</span> <span class="id">finD</span> <span class="id">epspos</span>.<br/>
<span class="id">wlog</span> : <span class="id">eps</span> <span class="id">epspos</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0U">D</a></span> <span class="id">mD</span> <span class="id">finD</span> / <span class="kwd">exists</span> <span class="id">ab</span> : <span class="id">R</span> * <span class="id">R</span>, <span class="id">D</span> `&lt;=` `[<span class="id">ab</span>.1, <span class="id">ab</span>.2]%<span class="id">classic</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">WL</span>; <span class="id">have</span> [] := @<span class="id">lebesgue_nearly_bounded</span> <span class="id">_</span> (<span class="id">eps</span> / 2)%<span class="id">R</span> <span class="id">mD</span> <span class="id">finD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">divr_gt0</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>=&gt; <span class="id">a</span> <span class="id">b</span> /= <span class="id">muDabe</span>; <span class="id">have</span> [] := <span class="id">WL</span> (<span class="id">eps</span> / 2) <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#open_measurable">D</a></span> `&amp;` `[<span class="id">a</span>,<span class="id">b</span>]).<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">divr_gt0</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">finD</span>)// <span class="id">le_measure</span>// <span class="id">inE</span>//; <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">a</span>, <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">V</span> [/= <span class="id">cptV</span> <span class="id">VDab</span> <span class="id"><a name="lebesgue_regularity.lebesgue_regularity_innerE_bounded">Dabeps2</a></span>]; <span class="kwd">exists</span> (<span class="id">V</span> `&amp;` `[<span class="id">a</span>, <span class="id">b</span>]); <span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span>: (<span class="id">subclosed_compact</span> <span class="id">_</span> <span class="id">cptV</span>) =&gt; //; <span class="id">apply</span>: <span class="id">closedI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">compact_closed</span> =&gt; //; <span class="id">exact</span>: <span class="id">Rhausdorff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">interval_closed</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; ? [/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">VDab</a></span> []].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">setDIr</span> (<span class="id">setU_id2r</span> ((<span class="id">D</span> `&amp;` `[<span class="id">a</span>, <span class="id">b</span>]) `\` <span class="id">V</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.analysis.measure.html#le_outer_measure">z</a></span> ; <span class="id">rewrite</span> <span class="id">setDE</span> <span class="id">setCI</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_addgt0Pr">setCK</a></span> =&gt; -[?|?];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">propext</span>; <span class="id">split</span> =&gt; [[]|[[]]].<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">mV</span> : <span class="id">measurable</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#setDKU">closed_measurable</a></span>; <span class="id">apply</span>: <span class="id">compact_closed</span> =&gt; //; <span class="id">exact</span>: <span class="id">Rhausdorff</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">eps</span>]<span class="id">splitr</span> <span class="id">EFinD</span> (<span class="id">measureU</span> <span class="id">mu</span>) // ?<span class="id">lte_add</span> //.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableD</span> =&gt; //; <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">measurableD</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">z</span> // [[[<span class="id">_</span> + <span class="id">_</span>] [<span class="id">_</span>]]].<br/>
<span class="id">case</span>=&gt; -[<span class="id">a</span> <span class="id">b</span>] /= <span class="id">Dab</span>; <span class="id">pose</span> <span class="id"><a href="mathcomp.analysis.topology.html#compact">D</a></span>' := `[<span class="id">a</span>,<span class="id">b</span>] `\` <span class="id">D</span>.<br/>
<span class="id">have</span> <span class="id">mD</span>' : <span class="id">measurable</span> <span class="id">D</span>' <span class="kwd">by</span> <span class="id">exact</span>: <span class="id">measurableD</span>.<br/>
<span class="id">have</span> [] := <span class="id">lebesgue_regularity_outer</span> <span class="id">mD</span>' <span class="id">_</span> <span class="id">epspos</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">mu</span> `[<span class="id">a</span>,<span class="id">b</span>]%<span class="id">classic</span>))//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">le_measure</span> ?<span class="id">inE</span>//; <span class="id">exact</span>: <span class="id">subIsetl</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /= <span class="id">lebesgue_measure_itv</span> //= -<span class="id">EFinD</span> -<span class="id">fun_if</span> <span class="id">ltry</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">U</span> [<span class="id">oU</span> /<span class="id">subsetC</span> + <span class="id">mDeps</span>]; <span class="id">rewrite</span> <span class="id">setCI</span> <span class="id">setCK</span> =&gt; <span class="id">nCD</span>'.<br/>
<span class="kwd">exists</span> (`[<span class="id">a</span>, <span class="id">b</span>] `&amp;` ~` <span class="id">U</span>); <span class="id">split</span>.<br/>
- <span class="id">apply</span>: (<span class="id">subclosed_compact</span> <span class="id">_</span> (@<span class="id">segment_compact</span> <span class="id">_</span> <span class="id">a</span> <span class="id">b</span>)) =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">closedI</span>; [<span class="id">exact</span>: <span class="id">interval_closed</span> | <span class="id">exact</span>: <span class="id">open_closedC</span>].<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">z</span> [<span class="id">abz</span>] /<span class="id">nCD</span>'[].<br/>
- <span class="id">rewrite</span> <span class="id">setDE</span> <span class="id">setCI</span> <span class="id">setIUr</span> <span class="id">setCK</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">_</span> `&amp;` ~` <span class="id">_</span> ](<span class="id">iffRL</span> (<span class="id">disjoints_subset</span> <span class="id">_</span> <span class="id">_</span>)) ?<span class="id">setCK</span> // <span class="id">set0U</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>: <span class="id">mDeps</span>; <span class="id">rewrite</span> /<span class="id">D</span>' ?<span class="id">setDE</span> <span class="id"><a href="mathcomp.analysis.measure.html#bigcup_measurable">setCI</a></span> <span class="id">setIUr</span> <span class="id">setCK</span> [<span class="id">U</span> `&amp;` <span class="id">D</span>]<span class="id">setIC</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span> =&gt; /(<span class="id">le_lt_trans</span> <span class="id">_</span>); <span class="id">apply</span>; <span class="id">apply</span>: <span class="id">le_measure</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span> =&gt; ?; <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span>; <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //; <span class="id">exact</span>: <span class="id">open_measurable</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">inE</span>; <span class="id">apply</span>: <span class="id">measurableU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_regularity_inner">measurableI</a></span>; [<span class="id">exact</span>: <span class="id">open_measurable</span>|<span class="id">exact</span>: <span class="id">measurableC</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //; <span class="id">exact</span>: <span class="id">open_measurable</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">lebesgue_regularity_innerE_bounded</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">R</span>) : <span class="id">measurable</span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">A</span> &lt; +<span class="id">oo</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">A</span> = <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#lebesgue_regularity.mu">ereal_sup</a></span> [<span class="id">set</span> <span class="id">mu</span> <span class="id">K</span> | <span class="id">K</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">K</span> | <span class="id">compact</span> <span class="id">K</span> /\ <span class="id">K</span> `&lt;=` <span class="id">A</span>]].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof141')">Proof.</span></div>
<div class="proofscript" id="proof141">
<span class="id">move</span>=&gt; <span class="id">mA</span> <span class="id">muA</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span>; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ub_ereal_sup</span> =&gt; /= <span class="id">x</span> [<span class="id">B</span> /= [<span class="id">cB</span> <span class="id">BA</span> &lt;-{<span class="id">x</span>}]]; <span class="id">exact</span>: <span class="id">le_outer_measure</span>.<br/>
<span class="id">apply</span>/<span class="id">lee_addgt0Pr</span> =&gt; <span class="id">e</span> <span class="id">e0</span>.<br/>
<span class="id">have</span> [<span class="id"><a href="mathcomp.analysis.measure.html#measurableI">B</a></span> [<span class="id">cB</span> <span class="id">BA</span> /= <span class="id">ABe</span>]] := <span class="id">lebesgue_regularity_inner</span> <span class="id">mA</span> <span class="id">muA</span> <span class="id">e0</span>.<br/>
<span class="id">rewrite</span> -{1}(<span class="id">setDKU</span> <span class="id">BA</span>) (@<span class="id"><a href="mathcomp.analysis.measure.html#measureIr">le_trans</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">mu</span> <span class="id">B</span> + <span class="id">mu</span> (<span class="id">A</span> `\` <span class="id">B</span>)))//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">outer_measureU2</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_add</span>//; [<span class="id">apply</span>: <span class="id">ereal_sup_ub</span> =&gt; /=; <span class="kwd">exists</span> <span class="id">B</span>|<span class="id">exact</span>/<span class="id">ltW</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lebesgue_regularity_inner_sup</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">R</span>) : <span class="id">measurable</span> <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a name="mu:529">mu</a></span> <span class="id">D</span> = <span class="id">ereal_sup</span> [<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#egorov.T">set</a></span> <span class="id">mu</span> <span class="id">K</span> | <span class="id">K</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">K</span> | <span class="id">compact</span> <span class="id">K</span> /\ <span class="id">K</span> `&lt;=` <span class="id">D</span>]].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof142')">Proof.</span></div>
<div class="proofscript" id="proof142">
<span class="id">move</span>=&gt; <span class="id">mD</span>; <span class="id">have</span> [?|] := <span class="id">ltP</span> (<span class="id">mu</span> <span class="id">D</span>) +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">lebesgue_regularity_innerE_bounded</span>.<br/>
<span class="id">have</span> /<span class="id">sigma_finiteP</span> [<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#egorov.R">F</a></span> <span class="id">RFU</span> [<span class="id">Fsub</span> <span class="id">ffin</span>]] :=<br/>
&nbsp;&nbsp;<span class="id">sigmaT_finite_lebesgue_stieltjes_measure</span> [<span class="id">the</span> @<span class="id">cumulative</span> <span class="id">R</span> <span class="id">of</span> <span class="id">idfun</span>]<br/>
&nbsp;&nbsp;<span class="comment">(*TODO:&nbsp;sigma_finiteT&nbsp;mu&nbsp;should&nbsp;be&nbsp;enough&nbsp;but&nbsp;does&nbsp;not&nbsp;seem&nbsp;to&nbsp;work&nbsp;with&nbsp;older<br/>
&nbsp;&nbsp;&nbsp;&nbsp;versions&nbsp;of&nbsp;MathComp/Coq&nbsp;(Coq&nbsp;&lt;=&nbsp;8.15?)&nbsp;*)</span>.<br/>
<span class="id">rewrite</span> <span class="id">leye_eq</span> =&gt; /<span class="id">eqP</span> /[<span class="id">dup</span>] + -&gt;.<br/>
<span class="id">have</span> {1}-&gt; : <span class="id">D</span> = \<span class="id">bigcup_n</span> (<span class="id">F</span> <span class="id">n</span> `&amp;` <span class="id">D</span>) <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setI_bigcupl</span> -<span class="id"><a name="z:538">RFU</a></span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#egorov.T">setTI</a></span>.<br/>
<span class="id">move</span>=&gt; <span class="id">FDp</span>; <span class="id">apply</span>/<span class="id">esym</span>/<span class="id">eq_infty</span> =&gt; <span class="id">M</span>.<br/>
<span class="id">have</span> : (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">mu</span> (<span class="id">F</span> <span class="id">n</span> `&amp;` <span class="id">D</span>)) @ \<span class="id">oo</span> --&gt; +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">FDp</span>; <span class="id">apply</span>: <span class="id">nondecreasing_cvg_mu</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //; <span class="id">exact</span>: (<span class="id">ffin</span> <span class="id">i</span>).1.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">exact</span>: (<span class="id">measurableI</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">ffin</span> <span class="id">i</span>).1).<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">m</span> <span class="id">nm</span>; <span class="id">apply</span>/<span class="id">subsetPset</span>; <span class="id">apply</span>: <span class="id">setSI</span>; <span class="id">exact</span>/<span class="id">subsetPset</span>/<span class="id">Fsub</span>.<br/>
<span class="id">move</span>/<span class="id">cvgey_ge</span> =&gt; /(<span class="id">_</span> (<span class="id">M</span> + 1)%<span class="id">R</span>) [<span class="id">N</span> <span class="id">_</span> /(<span class="id">_</span> <span class="id">_</span> (<span class="id">lexx</span> <span class="id">N</span>))].<br/>
<span class="id">have</span> [<span class="id">mFN</span> <span class="id">FNoo</span>] := <span class="id">ffin</span> <span class="id"><a href="mathcomp.analysis.measure.html#bigcup_measurable">N</a></span>.<br/>
<span class="id">have</span> [] := @<span class="id">lebesgue_regularity_inner</span> (<span class="id">F</span> <span class="id">N</span> `&amp;` <span class="id">D</span>) <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ltr01</span>.<br/>
- <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> (<span class="id">ffin</span> <span class="id">N</span>).2)//= <span class="id">measureIl</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">V</span> [/[<span class="id">dup</span>] /<span class="id">compact_measurable</span> <span class="id">mV</span> <span class="id">cptV</span> <span class="id">VFND</span>] <span class="id">FDV1</span> <span class="id">M1FD</span>.<br/>
<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id"><a name="n:553">_</a></span> (<span class="id">mu</span> <span class="id">V</span>))//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">ereal_sup_ub</span>; <span class="kwd">exists</span> <span class="id">V</span> =&gt; //=; <span class="id">split</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: (<span class="id">subset_trans</span> <span class="id">VFND</span> (@<span class="id">subIsetr</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)).<br/>
<span class="id">rewrite</span> -(@<span class="id">lee_add2lE</span> <span class="id">_</span> 1)// {1}<span class="id">addeC</span> -<span class="id">EFinD</span> (<span class="id">le_trans</span> <span class="id">M1FD</span>)//.<br/>
<span class="id">rewrite</span> /<span class="id">mu</span> (@<span class="id">measureDI</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">F</span> <span class="id">N</span> `&amp;` <span class="id">D</span>) <span class="id">_</span> <span class="id">_</span> <span class="id">mV</span>)/=; <span class="id">last</span> <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
<span class="id">rewrite</span> <span class="id">ltW</span>// <span class="id">lte_le_add</span> // ?<span class="id">ge0_fin_numE</span> //; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.topology.html#nbhsx_ballx">measureIr</a></span>//; <span class="id">apply</span>: <span class="id">measurableI</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setIA</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> (<span class="id">ffin</span> <span class="id">N</span>).2)// <span class="id">measureIl</span>//; <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">lebesgue_regularity</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">egorov</span>.<br/>
<br/>
<span class="kwd">Context</span> <span class="id">d</span> {<span class="id">R</span> : <span class="id">realType</span>} {<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>}.<br/>
<span class="kwd">Context</span> (<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">pointwise_almost_uniform</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f_</span> : (<span class="id">T</span> -&gt; <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">eps</span> : <span class="id">R</span>):<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">measurable_fun</span> <span class="id">A</span> (<span class="id">f_</span> <span class="id">n</span>)) -&gt; <span class="id">measurable_fun</span> <span class="id">A</span> <span class="id">g</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">mu</span> <span class="id">A</span> &lt; +<span class="id">oo</span> -&gt; (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">A</span> <span class="id">x</span> -&gt; <span class="id">f_</span> ^~ <span class="id">x</span> --&gt; <span class="id">g</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;(0 &lt; <span class="id">eps</span>)%<span class="id">R</span> -&gt; <span class="kwd">exists</span> <span class="id">B</span>, [/\ <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#egorov.R">measurable</a></span> <span class="id">B</span>, <span class="id">mu</span> <span class="id">B</span> &lt; <span class="id">eps</span>%:<span class="id">E</span> &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#egorov.mu">uniform</a></span> <span class="id">A</span> `\` <span class="id">B</span>, <span class="id">f_</span> --&gt; <span class="id">g</span>}].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof143')">Proof.</span></div>
<div class="proofscript" id="proof143">
<span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">mg</span> <span class="id">mA</span> <span class="id">finA</span> <span class="id">fptwsg</span> <span class="id">epspos</span>; <span class="id">pose</span> <span class="id">h</span> <span class="id">q</span> (<span class="id">z</span> : <span class="id">T</span>) : <span class="id">R</span> := `|<span class="id">f_</span> <span class="id">q</span> <span class="id">z</span> - <span class="id">g</span> <span class="id">z</span>|%<span class="id">R</span>.<br/>
<span class="id">have</span> <span class="id">mfunh</span> <span class="id">q</span> : <span class="id">measurable_fun</span> <span class="id">A</span> (<span class="id">h</span> <span class="id">q</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">apply</a></span>: <span class="id">measurableT_comp</span>; [<span class="id">exact</span>: <span class="id">measurable_normr</span> |<span class="id">exact</span>: <span class="id">measurable_funB</span>].<br/>
<span class="id">pose</span> <span class="id">E</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#fine_cvg">k</a></span> <span class="id">n</span> := \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">j</span> : <span class="id">nat</span> | (<span class="id">n</span> &lt;= <span class="id">j</span>)%<span class="id">N</span> ])<br/>
&nbsp;&nbsp;(<span class="id">A</span> `&amp;` [<span class="id">set</span> <span class="id">x</span> | (<span class="id">h</span> <span class="id">i</span> <span class="id">x</span> &gt;= <span class="id">k</span>.+1%:<span class="id">R</span>^-1)%<span class="id"><a href="mathcomp.analysis.topology.html#open_interior">R</a></span>]).<br/>
<span class="id">have</span> <span class="id">Einc</span> <span class="id">k</span> : <span class="id">nonincreasing_seq</span> (<span class="id">E</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">m</span> <span class="id">nm</span>; <span class="id">apply</span>/<span class="id">asboolP</span> =&gt; <span class="id">z</span> [<span class="id">i</span>] /= /(<span class="id">leq_trans</span> <span class="id">_</span>) <span class="id">mi</span> [? ?].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">i</span> =&gt; //; <span class="id">apply</span>: <span class="id">mi</span>.<br/>
<span class="id">have</span> <span class="id">mE</span> <span class="id">k</span> <span class="id">n</span> : <span class="id">measurable</span> (<span class="id">E</span> <span class="id">k</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">q</span> /= ?.<br/>
&nbsp;&nbsp;<span class="id">have</span> -&gt; : [<span class="id">set</span> <span class="id">x</span> | <span class="id">h</span> <span class="id">q</span> <span class="id">x</span> &gt;= <span class="id">k</span>.+1%:<span class="id">R</span>^-1]%<span class="id">R</span> = (<span class="id">h</span> <span class="id">q</span>)@^-1` (`[<span class="id">k</span>.+1%:<span class="id">R</span>^-1, +<span class="id">oo</span>[).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id"><a href="mathcomp.analysis.measure.html#le_measure">z</a></span>; <span class="id">rewrite</span> /= <span class="id">in_itv</span> /= <span class="id">Bool.andb_true_r</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">mfunh</span>.<br/>
<span class="id">have</span> <span class="id">nEcvg</span> <span class="id">x</span> <span class="id">k</span> : <span class="kwd">exists</span> <span class="id">n</span>, <span class="id">A</span> <span class="id">x</span> -&gt; (~` (<span class="id"><a name="k:560">E</a></span> <span class="id">k</span> <span class="id">n</span>)) <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span> : (<span class="id">pselect</span> (<span class="id">A</span> <span class="id">x</span>)); <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span> =&gt; ?; <span class="kwd">exists</span> <span class="id">point</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Ax</span>; <span class="id">have</span> [] := <span class="id">fptwsg</span> <span class="id">_</span> <span class="id">Ax</span> (<span class="id">interior</span> (<span class="id">ball</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">g</a></span> <span class="id">x</span>) (<span class="id">k</span>.+1%:<span class="id">R</span>^-1))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">open_nbhs_nbhs</span>; <span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">open_interior</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">ki0</span> : ((0:<span class="id">R</span>) &lt; <span class="id">k</span>.+1%:<span class="id">R</span>^-1)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">invr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">k</span>.+1%:<span class="id">R</span>^-1 = (<span class="id"><a href="mathcomp.analysis.measure.html#bigcup_measurable">PosNum</a></span> <span class="id">ki0</span>)%:<span class="id">num</span> ) //; <span class="id">exact</span>: <span class="id">nbhsx_ballx</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">N</span> <span class="id">_</span> <span class="id">Nk</span>; <span class="kwd">exists</span> <span class="id">N</span>.+1 =&gt; <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id">E</span> <span class="id">setC_bigcup</span> =&gt; <span class="id">i</span> /= /<span class="id">ltnW</span> <span class="id">Ni</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">not_andP</span>; <span class="id">right</span>; <span class="id">apply</span>/<span class="id">negP</span>; <span class="id">rewrite</span> /<span class="id">h</span> -<span class="id">real_ltNge</span> // <span class="id">distrC</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: (<span class="id">Nk</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.topology.html#uniform_restrict_cvg">Ni</a></span>) =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[?]; <span class="id">apply</span>; <span class="id">exact</span>: <span class="id">ball_norm_center</span>.<br/>
<span class="id">have</span> <span class="id">Ek0</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#nbhs_ex">k</a></span> : (\<span class="id">bigcap_n</span> (<span class="id"><a href="mathcomp.analysis.topology.html#filterS">E</a></span> <span class="id">k</span> <span class="id">n</span>)) = <span class="id">set0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; // <span class="id">z</span> /=; <span class="id">suff</span> : (~` \<span class="id">bigcap_n</span> <span class="id">E</span> <span class="id">k</span> <span class="id">n</span>) <span class="id">z</span> <span class="kwd">by</span> <span class="id">done</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">setC_bigcap</span>; <span class="id">case</span> : (<span class="id"><a href="mathcomp.classical.functions.html#patch">pselect</a></span> (<span class="id">A</span> <span class="id">z</span>)) =&gt; [<span class="id">Az</span> | <span class="id">nAz</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> [<span class="id">N</span> /(<span class="id">_</span> <span class="id">Az</span>) ?] := <span class="id">nEcvg</span> <span class="id">z</span> <span class="id">k</span>; <span class="kwd">exists</span> <span class="id">N</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">O</span>; <span class="id">rewrite</span> // /<span class="id">E</span> <span class="id">setC_bigcup</span> =&gt; <span class="id">n</span> ? [].<br/>
<span class="id">have</span> <span class="id">badn</span>' : <span class="kwd">forall</span> <span class="id">k</span>, <span class="kwd">exists</span> <span class="id">n</span>, <span class="id">mu</span> (<span class="id">E</span> <span class="id">k</span> <span class="id">n</span>) &lt; ((<span class="id">eps</span>/2) / (2 ^ <span class="id">k</span>.+1)%:<span class="id">R</span>)%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">pose</span> <span class="id">ek</span> :<span class="id">R</span> := <span class="id">eps</span>/2 / (2 ^ <span class="id">k</span>.+1)%:<span class="id">R</span>; <span class="id">have</span> : <span class="id">mu</span> \<span class="id">o</span> <span class="id">E</span> <span class="id">k</span> --&gt; (0%<span class="id">R</span>)%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">measure0</span> <span class="id">mu</span>) -(<span class="id">Ek0</span> <span class="id">k</span>); <span class="id">apply</span>: <span class="id">nonincreasing_cvg_mu</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span>: (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">finA</span>); <span class="id">apply</span>: <span class="id">le_measure</span>; <span class="id">rewrite</span> ?<span class="id">inE</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? [? <span class="id">_</span> []].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcap_measurable</span> =&gt; ?.<br/>
&nbsp;&nbsp;<span class="id">case</span>/<span class="id">fine_cvg</span>/(<span class="id">_</span> (<span class="id">interior</span> (<span class="id">ball</span> (0:<span class="id">R</span>) <span class="id">ek</span>))%<span class="id">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">open_nbhs_nbhs</span>; <span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">open_interior</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">ekpos</span> : (0 &lt; <span class="id">ek</span>)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">divr_gt0</span> // <span class="id">divr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: <span class="id">ek</span> <span class="id">ekpos</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">ek</span>]; <span class="id">exact</span>: <span class="id">nbhsx_ballx</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">N</span> <span class="id">_</span> /(<span class="id">_</span> <span class="id">N</span> (<span class="id">leqnn</span> <span class="id">_</span>))/<span class="id">interior_subset</span> <span class="id">muEN</span>; <span class="kwd">exists</span> <span class="id">N</span>; <span class="id">move</span>: <span class="id">muEN</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">ball</span> /= <span class="id">distrC</span> <span class="id">subr0</span> <span class="id">ger0_norm</span> // -[<span class="id">x</span> <span class="kwd">in</span> <span class="id">x</span> &lt; <span class="id">_</span>]<span class="id"><a href="mathcomp.analysis.measure.html#measurable_funS">fineK</a></span> ?<span class="id">ge0_fin_numE</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>:(<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">finA</span>); <span class="id">apply</span> <span class="id">le_measure</span>; <span class="id">rewrite</span> ?<span class="id">inE</span>// =&gt; ? [? <span class="id">_</span> []].<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#measurableI">pose</a></span> <span class="id">badn</span> <span class="id">k</span> := <span class="id">projT1</span> (<span class="id">cid</span> (<span class="id">badn</span>' <span class="id">k</span>)); <span class="kwd">exists</span> (\<span class="id">bigcup_k</span> (<span class="id">E</span> <span class="id">k</span> (<span class="id">badn</span> <span class="id">k</span>))); <span class="id">split</span>.<br/>
- <span class="id">exact</span>: <span class="id">bigcup_measurable</span>.<br/>
- <span class="id">apply</span>: (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">eps</span>/2)%<span class="id">R</span>%:<span class="id">E</span>); <span class="id">first</span> <span class="id">last</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lte_fin</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">ltr_pdivr_mulr</a></span> // <span class="id">ltr_pmulr</span> // <span class="id">Rint_ltr_addr1</span> // ?<span class="id">Rint1</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">le_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: (<span class="id">measure_sigma_sub_additive</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">k</span> =&gt; <span class="id">mE</span> <span class="id">k</span> (<span class="id">badn</span> <span class="id">k</span>)) <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#measureU0">_</a></span>) =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">bigcup_measurable</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#egorov">le_trans</a></span>; <span class="id">first</span> <span class="id">last</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (@<span class="id">epsilon_trick0</span> <span class="id">R</span> <span class="id">_</span> <span class="id">xpredT</span>); <span class="id">rewrite</span> <span class="id">divr_ge0</span> //; <span class="id">exact</span>: <span class="id">ltW</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_nneseries</span> // =&gt; <span class="id">n</span> <span class="id">_</span>; <span class="id">exact</span>/<span class="id">ltW</span>/(<span class="id">projT2</span> (<span class="id">cid</span> (<span class="id">badn</span>' <span class="id">_</span>))).<br/>
<span class="id">apply</span>/<span class="id">uniform_restrict_cvg</span> =&gt; /= <span class="id">U</span> /=; <span class="id">rewrite</span> ?<span class="id">uniform_nbhsT</span>.<br/>
<span class="id">case</span>/<span class="id">nbhs_ex</span> =&gt; <span class="id">del</span> /<span class="id">filterS</span>; <span class="id">apply</span>.<br/>
<span class="id">have</span> [<span class="id">N</span> <span class="id">_</span> /(<span class="id">_</span> <span class="id">N</span>)/(<span class="id">_</span> (<span class="id">leqnn</span> <span class="id">_</span>)) <span class="id">Ndel</span>] := <span class="id">near_infty_natSinv_lt</span> <span class="id">del</span>.<br/>
<span class="kwd">exists</span> (<span class="id">badn</span> <span class="id">N</span>) =&gt; // <span class="id">r</span> <span class="id">badNr</span> <span class="id">x</span>.<br/>
<span class="id">rewrite</span> /<span class="id">patch</span>; <span class="id">case</span> <span class="id">xAB</span>: (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span> `\` <span class="id">_</span>) =&gt; //; <span class="id">apply</span>: (<span class="id">lt_trans</span> <span class="id">_</span> <span class="id">Ndel</span>).<br/>
<span class="id">move</span>/<span class="id">set_mem</span>: <span class="id">xAB</span>; <span class="id">rewrite</span> <span class="id">setDE</span>; <span class="id">case</span> =&gt; <span class="id">Ax</span>; <span class="id">rewrite</span> <span class="id">setC_bigcup</span> =&gt; /(<span class="id">_</span> <span class="id">N</span> <span class="id">I</span>).<br/>
<span class="id">rewrite</span> /<span class="id">E</span> <span class="id">setC_bigcup</span> =&gt; /(<span class="id">_</span> <span class="id">r</span>) /=; <span class="id">rewrite</span> /<span class="id">h</span> =&gt; /(<span class="id">_</span> <span class="id">badNr</span>) /<span class="id">not_andP</span> [] //.<br/>
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">negP</span>; <span class="id">rewrite</span> <span class="id">real_ltNge</span> // <span class="id">distrC</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ae_pointwise_almost_uniform</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f_</span> : (<span class="id">T</span> -&gt; <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">eps</span> : <span class="id">R</span>):<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">measurable_fun</span> <span class="id">A</span> (<span class="id">f_</span> <span class="id">n</span>)) -&gt; <span class="id">measurable_fun</span> <span class="id">A</span> <span class="id">g</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">mu</span> <span class="id">A</span> &lt; +<span class="id">oo</span> -&gt; {<span class="id">ae</span> <span class="id">mu</span>, (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">A</span> <span class="id">x</span> -&gt; <span class="id">f_</span> ^~ <span class="id">x</span> --&gt; <span class="id">g</span> <span class="id">x</span>)} -&gt;<br/>
&nbsp;&nbsp;(0 &lt; <span class="id">eps</span>)%<span class="id">R</span> -&gt; <span class="kwd">exists</span> <span class="id">B</span>, [/\ <span class="id">measurable</span> <span class="id">B</span>, <span class="id">mu</span> <span class="id">B</span> &lt; <span class="id">eps</span>%:<span class="id">E</span> &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">uniform</span> <span class="id">A</span> `\` <span class="id">B</span>, (<span class="kwd">fun</span> <span class="id">n</span> =&gt; (<span class="id">f_</span> <span class="id">n</span> : <span class="id">T</span> -&gt; <span class="id">R</span>)) --&gt; <span class="id">g</span>}].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof144')">Proof.</span></div>
<div class="proofscript" id="proof144">
<span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">mg</span> <span class="id">mA</span> <span class="id">Afin</span> [<span class="id">C</span> [<span class="id">mC</span> <span class="id">C0</span> <span class="id">nC</span>] <span class="id">epspos</span>].<br/>
<span class="id">have</span> [<span class="id">B</span> [<span class="id">mB</span> <span class="id">Beps</span> <span class="id">Bunif</span>]] : <span class="kwd">exists</span> <span class="id">B</span>, [/\ <span class="id">d</span>.-<span class="id">measurable</span> <span class="id">B</span>, <span class="id">mu</span> <span class="id">B</span> &lt; <span class="id">eps</span>%:<span class="id">E</span> &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">uniform</span> (<span class="id">A</span> `\` <span class="id">C</span>) `\` <span class="id">B</span>,  <span class="id">f_</span> --&gt; <span class="id">g</span>}].<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">pointwise_almost_uniform</span> =&gt; //.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">apply</span> : (<span class="id">measurable_funS</span> <span class="id">mA</span> <span class="id">_</span> (<span class="id">mf</span> <span class="id">n</span>)) =&gt; ? [].<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span> : (<span class="id">measurable_funS</span> <span class="id">mA</span> <span class="id">_</span> (<span class="id">mg</span>)) =&gt; ? [].<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //; <span class="id">exact</span>: <span class="id">measurableC</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span>: (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">Afin</span>); <span class="id">apply</span>: <span class="id">le_measure</span>; <span class="id">rewrite</span> ?<span class="id">inE</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //; <span class="id">exact</span>: <span class="id">measurableC</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">setDE</span>; <span class="id">case</span> =&gt; <span class="id">Ax</span> /(<span class="id">subsetC</span> <span class="id">nC</span>); <span class="id">rewrite</span> <span class="id">setCK</span>; <span class="id">exact</span>.<br/>
<span class="kwd">exists</span> (<span class="id">B</span> `|` <span class="id">C</span>); <span class="id">split</span>.<br/>
- <span class="id">exact</span>: <span class="id">measurableU</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">Beps</span>); <span class="id">rewrite</span> <span class="id">measureU0</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUC</span> -<span class="id">setDDl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">egorov</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">vitali_cover</span> {<span class="id">R</span> : <span class="id">realType</span>} (<span class="id">E</span> : <span class="id">set</span> <span class="id">R</span>) <span class="id">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">B</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">R</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) :=<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">is_ball</span> (<span class="id">B</span> <span class="id">i</span>)) /\<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">E</span> <span class="id">x</span> -&gt; <span class="kwd">forall</span> <span class="id">e</span> : <span class="id">R</span>, 0 &lt; <span class="id">e</span> -&gt; <span class="kwd">exists</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[/\ <span class="id">D</span> <span class="id">i</span>, <span class="id">B</span> <span class="id">i</span> <span class="id">x</span> &amp; (<span class="id">radius</span> (<span class="id">B</span> <span class="id">i</span>))%:<span class="id">num</span> &lt; <span class="id">e</span>].<br/>
<br/>
<span class="kwd">Section</span> <span class="id">vitali_theorem</span>.<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">realType</span>} (<span class="id">A</span> : <span class="id">set</span> <span class="id">R</span>) (<span class="id">B</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> <span class="id">R</span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id">B0</span> : <span class="kwd">forall</span> <span class="id">i</span>, (0 &lt; (<span class="id">radius</span> (<span class="id">B</span> <span class="id">i</span>))%:<span class="id">num</span>)%<span class="id">R</span>.<br/>
<span class="kwd">Notation</span> <span class="id">mu</span> := (@<span class="id">lebesgue_measure</span> <span class="id">R</span>).<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">vitali_theorem</span> (<span class="id">V</span> : <span class="id">set</span> <span class="id">nat</span>) : <span class="id">vitali_cover</span> <span class="id">A</span> <span class="id">B</span> <span class="id">V</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">D</span>, [/\ <span class="id">countable</span> <span class="id">D</span>, <span class="id">D</span> `&lt;=` <span class="id">V</span>, <span class="id">trivIset</span> <span class="id">D</span> (<span class="id">closure</span> \<span class="id">o</span> <span class="id">B</span>) &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">A</span> `\` \<span class="id">bigcup_</span>(<span class="id">k</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">closure</span> (<span class="id">B</span> <span class="id">k</span>)) = 0].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof145')">Proof.</span></div>
<div class="proofscript" id="proof145">
<span class="id">move</span>=&gt; <span class="id">ABV</span>.<br/>
<span class="id">wlog</span> <span class="id">VB1</span> : <span class="id">V</span> <span class="id">ABV</span> / <span class="kwd">forall</span> <span class="id">i</span>, <span class="id">V</span> <span class="id">i</span> -&gt; ((<span class="id">radius</span> (<span class="id">B</span> <span class="id">i</span>))%:<span class="id">num</span> &lt;= 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">wlg</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">V</span>' := <span class="id">V</span> `\` [<span class="id">set</span> <span class="id">i</span> | (<span class="id">radius</span> (<span class="id">B</span> <span class="id">i</span>))%:<span class="id">num</span> &gt; 1]%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> : <span class="id">vitali_cover</span> <span class="id">A</span> <span class="id">B</span> <span class="id">V</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span>: <span class="id">ABV</span>.1|<span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Ax</span> <span class="id">e</span> <span class="id">e0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> : (0 &lt; <span class="id">minr</span> <span class="id">e</span> 1)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lt_minr</span>// <span class="id">e0</span>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; /(<span class="id">ABV</span>.2 <span class="id">x</span> <span class="id">Ax</span>)[<span class="id">i</span> [<span class="id">Vi</span> <span class="id">ix</span> <span class="id">ie</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">i</span>; <span class="id">split</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">split</span> =&gt; //=; <span class="id">rewrite</span> <span class="id">ltNge</span>; <span class="id">apply</span>/<span class="id">negP</span>/<span class="id">negPn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ltW</span> <span class="id">ie</span>))// <span class="id">le_minl</span> <span class="id">lexx</span> <span class="id">orbT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> <span class="id">ie</span>)// <span class="id">le_minl</span> <span class="id">lexx</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>/<span class="id">wlg</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">V</span>'<span class="id">B1</span> <span class="id">i</span> : <span class="id">V</span>' <span class="id">i</span> -&gt; ((<span class="id">radius</span> (<span class="id">B</span> <span class="id">i</span>))%:<span class="id">num</span> &lt;= 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">Vi</span> /=]; <span class="id">rewrite</span> <span class="id">ltNge</span> =&gt; /<span class="id">negP</span>/<span class="id">negPn</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; /(<span class="id">_</span> <span class="id">V</span>'<span class="id">B1</span>)[<span class="id">D</span> [<span class="id">cD</span> <span class="id">DV</span>' <span class="id">tD</span> <span class="id">h</span>]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">D</span>; <span class="id">split</span> =&gt; //; <span class="id">apply</span>: (<span class="id">subset_trans</span> <span class="id">DV</span>') =&gt; ? [].<br/>
<span class="id">have</span> [<span class="id">D</span> [<span class="id">cD</span> <span class="id">DV</span> <span class="id">tDB</span> <span class="id">Dintersect</span>]] := <span class="id">vitali_lemma_infinite</span> <span class="id">ABV</span>.1 <span class="id">B0</span> <span class="id">VB1</span>.<br/>
<span class="kwd">exists</span> <span class="id">D</span>; <span class="id">split</span> =&gt; //.<br/>
<span class="id">pose</span> <span class="id">Z</span> <span class="id">r</span> := (<span class="id">A</span> `\` \<span class="id">bigcup_</span>(<span class="id">k</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">closure</span> (<span class="id">B</span> <span class="id">k</span>)) `&amp;` <span class="id">ball</span> (0%<span class="id">R</span>:<span class="id">R</span>) <span class="id">r</span>.<br/>
<span class="id">suff</span>: <span class="kwd">forall</span> <span class="id">r</span> : {<span class="id">posnum</span> <span class="id">R</span>}, <span class="id">mu</span> (<span class="id">Z</span> <span class="id">r</span>%:<span class="id">num</span>) = 0.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Zr</span>; <span class="id">have</span> {}<span class="id">Zr</span> <span class="id">n</span> : <span class="id">mu</span> (<span class="id">Z</span> <span class="id">n</span>%:<span class="id">R</span>) = 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">n</span> =&gt; [|<span class="id">n</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">Z</span> (<span class="id">ball0</span> <span class="id">_</span> <span class="id">_</span>).2// <span class="id">setI0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">Zr</span> (<span class="id">PosNum</span> (<span class="id">ltr0Sn</span> <span class="id">_</span> <span class="id">n</span>))).<br/>
&nbsp;&nbsp;<span class="id">set</span> <span class="id">F</span> := <span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">Z</span> <span class="id">n</span>%:<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> : <span class="id">mu</span> (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) &lt;= \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">outer_measure_sigma_subadditive</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">eseries0</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id">F</span> <span class="id">Zr</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">F</span> -<span class="id">setI_bigcupr</span> <span class="id">bigcup_ballT</span> <span class="id">setIT</span> <span class="id">measure_le0</span> =&gt; /<span class="id">eqP</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">r</span>.<br/>
<span class="id">pose</span> <span class="id">E</span> := [<span class="id">set</span> <span class="id">i</span> | <span class="id">D</span> <span class="id">i</span> /\ <span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>) `&amp;` <span class="id">ball</span> (0%<span class="id">R</span>:<span class="id">R</span>) <span class="id">r</span>%:<span class="id">num</span> !=<span class="id">set0</span>].<br/>
<span class="id">pose</span> <span class="id">F</span> := <span class="id">vitali_collection_partition</span> <span class="id">B</span> <span class="id">E</span> 1.<br/>
<span class="id">have</span> <span class="id">E_partition</span> : <span class="id">E</span> = \<span class="id">bigcup_n</span> (<span class="id">F</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">cover_vitali_collection_partition</span>// =&gt; <span class="id">i</span> [] /<span class="id">DV</span> /<span class="id">VB1</span>.<br/>
<span class="id">have</span> <span class="id">EBr2</span> <span class="id">n</span> : <span class="id">E</span> <span class="id">n</span> -&gt; <span class="id">closure</span> (<span class="id">B</span> <span class="id">n</span>) `&lt;=` (<span class="id">ball</span> (0:<span class="id">R</span>) (<span class="id">r</span>%:<span class="id">num</span> + 2))%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">Dn</span>] [<span class="id">x</span>] =&gt; -[<span class="id">Bnx</span> <span class="id">rx</span>] <span class="id">y</span> /= <span class="id">Bny</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>: <span class="id">rx</span>; <span class="id">rewrite</span> /<span class="id">ball</span> /= !<span class="id">sub0r</span> !<span class="id">normrN</span> =&gt; <span class="id">rx</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">subrK</span> <span class="id">x</span> <span class="id">y</span>) (<span class="id">le_lt_trans</span> (<span class="id">ler_norm_add</span> <span class="id">_</span> <span class="id">_</span>))//.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">addrC</span> <span class="id">ltr_le_add</span>// -(<span class="id">subrK</span> (<span class="id">cpoint</span> (<span class="id">B</span> <span class="id">n</span>)) <span class="id">y</span>) -(<span class="id">addrA</span> (<span class="id">y</span> - <span class="id">_</span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ler_norm_add</span> <span class="id">_</span> <span class="id">_</span>))// (<span class="id">_</span> : 2 = 1 + 1)%<span class="id">R</span>// <span class="id">ler_add</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">distrC</span>; <span class="id">have</span> := <span class="id">is_ball_closureP</span> (<span class="id">ABV</span>.1 <span class="id">n</span>) <span class="id">Bny</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">le_trans</span>; <span class="id">apply</span>; <span class="id">rewrite</span> <span class="id">VB1</span>//; <span class="id">exact</span>: <span class="id">DV</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> := <span class="id">is_ball_closureP</span> (<span class="id">ABV</span>.1 <span class="id">n</span>) <span class="id">Bnx</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">le_trans</span>; <span class="id">apply</span>; <span class="id">rewrite</span> <span class="id">VB1</span>//; <span class="id">exact</span>: <span class="id">DV</span>.<br/>
<span class="id">have</span> <span class="id">measurable_closure</span> (<span class="id">C</span> : <span class="id">set</span> <span class="id">R</span>) : <span class="id">is_ball</span> <span class="id">C</span> -&gt; <span class="id">measurable</span> (<span class="id">closure</span> <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">ballC</span>; <span class="id">rewrite</span> <span class="id">is_ball_closure</span>//; <span class="id">exact</span>: <span class="id">measurable_closed_ball</span>.<br/>
<span class="id">move</span>: <span class="id">ABV</span> =&gt; [<span class="id">is_ballB</span> <span class="id">ABV</span>].<br/>
<span class="id">have</span> {}<span class="id">EBr2</span> : \<span class="id">esum_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">E</span>) <span class="id">mu</span> (<span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>)) &lt;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">ball</span> (0:<span class="id">R</span>) (<span class="id">r</span>%:<span class="id">num</span> + 2))%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">set_mem_set</span> <span class="id">E</span>) -<span class="id">nneseries_esum</span>// -<span class="id">measure_bigcup</span>//; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_trivIset</span> <span class="id">tDB</span> =&gt; ? [].<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">le_measure</span>; <span class="id">rewrite</span> ?<span class="id">inE</span>; [|<span class="id">exact</span>: <span class="id">measurable_ball</span>|<span class="id">exact</span>: <span class="id">bigcup_sub</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; *; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
<span class="id">have</span> <span class="id">finite_set_F</span> <span class="id">i</span> : <span class="id">finite_set</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">contrapT</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">M</span> := `|<span class="id">ceil</span> ((<span class="id">r</span>%:<span class="id">num</span> + 2) *+ 2 / (1 / (2 ^ <span class="id">i</span>.+1)%:<span class="id">R</span>))|.+1.<br/>
&nbsp;&nbsp;<span class="id">move</span>/(<span class="id">infinite_set_fset</span> <span class="id">M</span>) =&gt; [/= <span class="id">C</span>] <span class="id">CsubFi</span> <span class="id">McardC</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">MC</span> : (<span class="id">M</span>%:<span class="id">R</span> * (1 / (2 ^ <span class="id">i</span>.+1)%:<span class="id">R</span>))%:<span class="id">E</span> &lt;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> [<span class="id">set</span>` <span class="id">C</span>]) <span class="id">closure</span> (<span class="id">B</span> <span class="id">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">measure_bigcup</span> <span class="id">_</span> [<span class="id">set</span>` <span class="id">C</span>])//; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? <span class="id">_</span>; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_trivIset</span> <span class="id">tDB</span>; <span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">subset_trans</span> <span class="id">CsubFi</span>) =&gt; <span class="id">x</span> [[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /= <span class="id">nneseries_esum</span>//= <span class="id">set_mem_set</span>// <span class="id">esum_fset</span>// <span class="id">fsbig_finite</span>//=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">set_fsetK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (\<span class="id">sum_</span>(<span class="id">i0</span> &lt;- <span class="id">C</span>) (1 / (2 ^ <span class="id">i</span>.+1)%:<span class="id">R</span>)%:<span class="id">E</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">under</span> <span class="id">eq_bigr</span> <span class="id">do</span> <span class="id">rewrite</span> -(<span class="id">mul1r</span> (<span class="id">_</span> / <span class="id">_</span>)) <span class="id">EFinM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">ge0_sume_distrl</span>// <span class="id">EFinM</span> <span class="id">lee_wpmul2r</span>// <span class="id">sumEFin</span> <span class="id">lee_fin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">natr_sum</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">cst</span> 1%<span class="id">N</span>)) <span class="id">ler_nat</span> -<span class="id">card_fset_sum1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">big_seq</span> [<span class="kwd">in</span> <span class="id">leRHS</span>]<span class="id">big_seq</span>; <span class="id">apply</span>: <span class="id">lee_sum</span> =&gt; // <span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; /<span class="id">CsubFi</span>[<span class="id">_</span> /<span class="id">andP</span>[+ <span class="id">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">lte_fin</span> =&gt; /<span class="id">ltW</span>/<span class="id">le_trans</span>; <span class="id">apply</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">is_ball_closure</span> (<span class="id">is_ballB</span> <span class="id">_</span>))// <span class="id">lebesgue_measure_closed_ball</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_fin</span> <span class="id">mulr2n</span> <span class="id">ler_addr</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">CFi</span> : <span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> [<span class="id">set</span>` <span class="id">C</span>]) <span class="id">closure</span> (<span class="id">B</span> <span class="id">j</span>)) &lt;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">i</span>) <span class="id">closure</span> (<span class="id">B</span> <span class="id">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">le_measure</span> =&gt; //; <span class="id">rewrite</span> ?<span class="id">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">bigcup_fset</span>; <span class="id">apply</span>: <span class="id">bigsetU_measurable</span> =&gt; *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; *; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span>: <span class="id">bigcup_sub</span> =&gt; <span class="id">j</span> <span class="id">Cj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/(@<span class="id">bigcup_sup</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">closure</span> \<span class="id">o</span> <span class="id">B</span>))/<span class="id">CsubFi</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">Fir2</span> : <span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">i</span>) <span class="id">closure</span> (<span class="id">B</span> <span class="id">j</span>)) &lt;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">ball</span> (0:<span class="id">R</span>) (<span class="id">r</span>%:<span class="id">num</span> + 2))%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> <span class="id">EBr2</span>)// -(<span class="id">set_mem_set</span> <span class="id">E</span>) -<span class="id">nneseries_esum</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E_partition</span> -<span class="id">measure_bigcup</span>//=; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? <span class="id">_</span>; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">trivIset_bigcup</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">sub_trivIset</span> <span class="id">tDB</span> =&gt; ? [[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">m</span> <span class="id">i0</span> <span class="id">j</span> <span class="id">nm</span> [[<span class="id">Di0</span> <span class="id">_</span>] <span class="id">_</span>] [[<span class="id">Dj</span> <span class="id">_</span>] <span class="id">_</span>]; <span class="id">exact</span>: <span class="id">tDB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">le_measure</span>; <span class="id">rewrite</span> ?<span class="id">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; *; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; *; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; /= <span class="id">x</span> [<span class="id">n</span> <span class="id">Fni</span> <span class="id">Bnx</span>]; <span class="kwd">exists</span> <span class="id">n</span> =&gt; //; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> {<span class="id">CFi</span> <span class="id">Fir2</span>} := <span class="id">le_trans</span> <span class="id">MC</span> (<span class="id">le_trans</span> <span class="id">CFi</span> <span class="id">Fir2</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">negP</span>; <span class="id">rewrite</span> -<span class="id">ltNge</span> <span class="id">lebesgue_measure_ball</span>// <span class="id">lte_fin</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -(@<span class="id">natr1</span> <span class="id">_</span> `| <span class="id">_</span> |%<span class="id">N</span>) <span class="id">natr_absz</span> <span class="id">ger0_norm</span> ?<span class="id">ceil_ge0</span>// -<span class="id">ltr_pdivr_mulr</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">ltr_subl_addr</span> (<span class="id">lt_le_trans</span> <span class="id">_</span> (<span class="id">ceil_ge</span> <span class="id">_</span>))// <span class="id">ltr_subl_addr</span> <span class="id">ltr_addl</span>.<br/>
<span class="id">have</span> <span class="id">mur2_fin_num_</span> : <span class="id">mu</span> (<span class="id">ball</span> (0:<span class="id">R</span>) (<span class="id">r</span>%:<span class="id">num</span> + 2))%<span class="id">R</span> &lt; +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lebesgue_measure_ball</span>// <span class="id">ltry</span>.<br/>
<span class="id">have</span> <span class="id">FE</span> : \<span class="id">sum_</span>(<span class="id">n</span> &lt;<span class="id">oo</span>) \<span class="id">esum_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">mu</span> (<span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>)) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">E</span>) <span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">E_partition</span> <span class="id">bigcup_bigcup</span>; <span class="id">apply</span>/<span class="id">esym</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (\<span class="id">sum_</span>(<span class="id">n</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">measure_semi_bigcup</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; *; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span>: <span class="id">trivIsetT_bigcup</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">trivIsetP</span> =&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ij</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">disjoint_vitali_collection_partition</span> =&gt; // <span class="id">k</span> -[] /<span class="id">DV</span> /<span class="id">VB1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">E_partition</span>; <span class="id">apply</span>: <span class="id">sub_trivIset</span> <span class="id">tDB</span> =&gt; <span class="id">x</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> -<span class="id">bigcup_bigcup</span>; <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">eq_eseriesr</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>)))).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">bigcup_mkcond</span> <span class="id">measure_semi_bigcup</span>//; <span class="id">last</span> 3 <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">j</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; // <span class="id">_</span>; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/(<span class="id">trivIset_mkcond</span> <span class="id">_</span> <span class="id">_</span>).1; <span class="id">apply</span>: <span class="id">sub_trivIset</span> <span class="id">tDB</span> =&gt; <span class="id">x</span> [[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">bigcup_mkcond</span>; <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">esum_mkcond</span>//= <span class="id">nneseries_esum</span>// -<span class="id">fun_true</span>//=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_esum</span> <span class="id">do</span> <span class="id">rewrite</span> (<span class="id">fun_if</span> <span class="id">mu</span>) (<span class="id">measure0</span> [<span class="id">the</span> <span class="id">measure</span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id">mu</span>]).<br/>
<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">measure_le0</span>.<br/>
<span class="id">apply</span>/<span class="id">lee_addgt0Pr</span> =&gt; <span class="id">_</span> /<span class="id">posnumP</span>[<span class="id">e</span>]; <span class="id">rewrite</span> <span class="id">add0e</span>.<br/>
<span class="id">have</span> [<span class="id">N</span> <span class="id">F5e</span>] : <span class="kwd">exists</span> <span class="id">N</span>, \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">n</span> &lt;<span class="id">oo</span>) \<span class="id">esum_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">mu</span> (<span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>)) &lt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;5%:<span class="id">R</span>^-1%:<span class="id">E</span> * <span class="id">e</span>%:<span class="id">num</span>%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">f</span> <span class="id">n</span> := \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">foo</span> : \<span class="id">sum_</span>(<span class="id">k</span> &lt;<span class="id">oo</span>) (<span class="id">mu</span> \<span class="id">o</span> <span class="id">f</span>) <span class="id">k</span> &lt; +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">f</span> /= [<span class="id">ltLHS</span>](<span class="id">_</span> : <span class="id">_</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">n</span> &lt;<span class="id">oo</span>) \<span class="id">esum_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">mu</span> (<span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">eq_eseriesr</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">k</span> =&gt; <span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">k</span>) <span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>)))) =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">measure_bigcup</span>//=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">nneseries_esum</span>// <span class="id">set_mem_set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">j</span> <span class="id">D</span>'<span class="id">ij</span>; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_trivIset</span> <span class="id">tDB</span> =&gt; // <span class="id">x</span> [[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">FE</span> (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">mu</span> (<span class="id">ball</span> (0 : <span class="id">R</span>) (<span class="id">r</span>%:<span class="id">num</span> + 2))%<span class="id">R</span>))//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> <span class="id">EBr2</span>)// <span class="id">measure_bigcup</span>//=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">nneseries_esum</span>// <span class="id">set_mem_set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_trivIset</span> <span class="id">tDB</span> =&gt; // <span class="id">x</span> [].<br/>
&nbsp;&nbsp;<span class="id">have</span> : \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">k</span> &lt;<span class="id">oo</span>) (<span class="id">mu</span> \<span class="id">o</span> <span class="id">f</span>) <span class="id">k</span> @[<span class="id">N</span> --&gt; \<span class="id">oo</span>] --&gt; 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">nneseries_tail_cvg</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">f</span> /= =&gt; /<span class="id">fine_fcvg</span> /=.<br/>
&nbsp;&nbsp;<span class="id">move</span>/(@<span class="id">cvgrPdist_lt</span> <span class="id">_</span> [<span class="id">pseudoMetricNormedZmodType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>]).<br/>
&nbsp;&nbsp;<span class="id">have</span> : (0 &lt; 5%:<span class="id">R</span>^-1 * <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mulr_gt0</span>// <span class="id">invr_gt0</span>// <span class="id">ltr0n</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; /[<span class="id">swap</span>] /[<span class="id">apply</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">near_map</span> =&gt; -[<span class="id">N</span> <span class="id">_</span>]/(<span class="id">_</span> <span class="id">_</span> (<span class="id">leqnn</span> <span class="id">N</span>)) <span class="id">h</span>; <span class="kwd">exists</span> <span class="id">N</span>; <span class="id">move</span>: <span class="id">h</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">sub0r</span> <span class="id">normrN</span> <span class="id">ger0_norm</span>//; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">fine_ge0</span>// <span class="id">nneseries_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">lte_fin</span>; <span class="id">apply</span>: <span class="id">le_lt_trans</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> <span class="id">X</span> : \<span class="id">bar</span> <span class="id">R</span> := (<span class="id">X</span> <span class="kwd">in</span> <span class="id">fine</span> <span class="id">X</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">Xoo</span> : <span class="id">X</span> &lt; +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">le_lt_trans</span> <span class="id">foo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">nneseries_split</span> <span class="id">N</span>)// <span class="id">lee_addr</span>//; <span class="id">exact</span>: <span class="id">sume_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">fineK</span> ?<span class="id">ge0_fin_numE</span>//; <span class="id">last</span> <span class="id">exact</span>: <span class="id">nneseries_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">lee_nneseries</span> =&gt; //; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">esum_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">Nn</span>; <span class="id">rewrite</span> <span class="id">measure_bigcup</span>//=.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">nneseries_esum</span>// <span class="id">set_mem_set</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">measurable_closure</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_trivIset</span> <span class="id">tDB</span> =&gt; <span class="id">x</span> [[]].<br/>
<span class="id">pose</span> <span class="id">K</span> := \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> `<span class="id">I_N</span>) \<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">i</span>) <span class="id">closure</span> (<span class="id">B</span> <span class="id">j</span>).<br/>
<span class="id">have</span> <span class="id">closedK</span> : <span class="id">closed</span> <span class="id">K</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">closed_bigcup</span> =&gt; //= <span class="id">i</span> <span class="id">iN</span>; <span class="id">apply</span>: <span class="id">closed_bigcup</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">j</span> <span class="id">Fij</span>; <span class="id">exact</span>: <span class="id">closed_closure</span>.<br/>
<span class="id">have</span> <span class="id">ZNF5</span> : <span class="id">Z</span> <span class="id">r</span>%:<span class="id">num</span> `&lt;=`<br/>
&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> ~` `<span class="id">I_N</span>) \<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">i</span>) <span class="id">closure</span> (5%:<span class="id">R</span> *` <span class="id">B</span> <span class="id">j</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">z</span> <span class="id">Zz</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">Kz</span> : ~ <span class="id">K</span> <span class="id">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">K</span> =&gt; -[<span class="id">n</span> /= <span class="id">nN</span> [<span class="id">m</span>] [[<span class="id">Dm</span> <span class="id">_</span>] <span class="id">_</span>] <span class="id">Bmz</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">Zz</span> =&gt; -[<span class="id">_</span> + <span class="id">_</span>]; <span class="id">apply</span>; <span class="kwd">exists</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">i</span> [<span class="id">Vi</span> <span class="id">Biz</span> <span class="id">Bir</span> <span class="id">BiK0</span>]] : <span class="kwd">exists</span> <span class="id">i</span>, [/\ <span class="id">V</span> <span class="id">i</span>, (<span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>)) <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>) `&lt;=` <span class="id">ball</span> (0%<span class="id">R</span>:<span class="id">R</span>) <span class="id">r</span>%:<span class="id">num</span> &amp; <span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>) `&amp;` <span class="id">K</span> = <span class="id">set0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span>: <span class="id">Zz</span> =&gt; -[<span class="id">Az</span> <span class="id">notDBz</span>]; <span class="id">rewrite</span> /<span class="id">ball</span>/= <span class="id">sub0r</span> <span class="id">normrN</span> =&gt; <span class="id">rz</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">d</span> <span class="id">dzr</span> <span class="id">zdK0</span>] : <span class="kwd">exists2</span> <span class="id">d</span> : {<span class="id">posnum</span> <span class="id">R</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">d</span>%:<span class="id">num</span> &lt; <span class="id">r</span>%:<span class="id">num</span> - `|<span class="id">z</span>|)%<span class="id">R</span> &amp; <span class="id">closed_ball</span> <span class="id">z</span> <span class="id">d</span>%:<span class="id">num</span> `&amp;` <span class="id">K</span> = <span class="id">set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">d</span>/= <span class="id">d0</span> <span class="id">dzK</span>] := (@<span class="id">closed_disjoint_closed_ball</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>] <span class="id">_</span> <span class="id">_</span> <span class="id">closedK</span> <span class="id">Kz</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">rz0</span> : (0 &lt; <span class="id">minr</span> ((<span class="id">r</span>%:<span class="id">num</span> - `|<span class="id">z</span>|) / 2) (<span class="id">d</span> / 2))%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lt_minr</span> (<span class="id">divr_gt0</span> <span class="id">d0</span>)//= <span class="id">andbT</span> <span class="id">divr_gt0</span>// <span class="id">subr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">PosNum</span> <span class="id">rz0</span>) =&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lt_minl</span> <span class="id">ltr_pdivr_mulr</span>// <span class="id">ltr_pmulr</span> ?<span class="id">subr_gt0</span>// <span class="id">ltr1n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">dzK</span> =&gt; //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">sub0r</span> <span class="id">normrN</span> <span class="id">gtr0_norm</span>// <span class="id">lt_minl</span> (<span class="id">ltr_pdivr_mulr</span> <span class="id">d</span> <span class="id">d</span>)//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_pmulr</span>// <span class="id">ltr1n</span> <span class="id">orbT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">N0_gt0</span> : (0 &lt; <span class="id">d</span>%:<span class="id">num</span> / 2)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">divr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">i</span> [<span class="id">Vi</span> <span class="id">Biz</span> <span class="id">BiN0</span>]] := <span class="id">ABV</span> <span class="id">_</span> <span class="id">Az</span> <span class="id">_</span> <span class="id">N0_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">i</span>; <span class="id">split</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">subset_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">Biy</span>; <span class="id">rewrite</span> /<span class="id">ball</span>/= <span class="id">sub0r</span> <span class="id">normrN</span> -(@<span class="id">subrK</span> <span class="id">_</span> (<span class="id">cpoint</span> (<span class="id">B</span> <span class="id">i</span>)) <span class="id">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_lt_trans</span> (<span class="id">ler_norm_add</span> <span class="id">_</span> <span class="id">_</span>))//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">d</span>%:<span class="id">num</span> / 2 + `|<span class="id">cpoint</span> (<span class="id">B</span> <span class="id">i</span>)|)%<span class="id">R</span>)//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ler_add2r</span>// <span class="id">distrC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">is_ball_closureP</span> (<span class="id">is_ballB</span> <span class="id">i</span>) <span class="id">Biy</span>))// <span class="id">ltW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -(@<span class="id">subrK</span> <span class="id">_</span> <span class="id">z</span> (<span class="id">cpoint</span> (<span class="id">B</span> <span class="id">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">d</span>%:<span class="id">num</span> / 2 + `|<span class="id">cpoint</span> (<span class="id">B</span> <span class="id">i</span>) - <span class="id">z</span>| + `|<span class="id">z</span>|)%<span class="id">R</span>)//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -[<span class="id">leRHS</span>]<span class="id">addrA</span> <span class="id">ler_add2l</span>//; <span class="id">exact</span>: <span class="id">ler_norm_add</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">d</span>%:<span class="id">num</span> + `|<span class="id">z</span>|)%<span class="id">R</span>)//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">leRHS</span>](<span class="id">splitr</span> <span class="id">d</span>%:<span class="id">num</span>) -!<span class="id">addrA</span> <span class="id">ler_add2l</span>// <span class="id">ler_add2r</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ltW</span> (<span class="id">is_ballP</span> (<span class="id">is_ballB</span> <span class="id">i</span>) <span class="id">Biz</span>)))// <span class="id">ltW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: <span class="id">dzr</span>; <span class="id">rewrite</span> -<span class="id">ltr_subr_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">subsetI_eq0</span> <span class="id">zdK0</span> =&gt; // <span class="id">y</span> <span class="id">Biy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">closed_ballE</span> <span class="id">_</span> [<span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>])//= /<span class="id">closed_ball_</span>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -(@<span class="id">subrK</span> <span class="id">_</span> (<span class="id">cpoint</span> (<span class="id">B</span> <span class="id">i</span>)) <span class="id">z</span>) -(<span class="id">addrA</span> (<span class="id">z</span> - <span class="id">_</span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ler_norm_add</span> <span class="id">_</span> <span class="id">_</span>))// [<span class="kwd">in</span> <span class="id">leRHS</span>](<span class="id">splitr</span> <span class="id">d</span>%:<span class="id">num</span>) <span class="id">ler_add</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">distrC</span> (<span class="id">le_trans</span> (<span class="id">ltW</span> (<span class="id">is_ballP</span> (<span class="id">is_ballB</span> <span class="id">i</span>) <span class="id">Biz</span>)))// <span class="id">ltW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">is_ball_closureP</span> (<span class="id">is_ballB</span> <span class="id">i</span>) <span class="id">Biy</span>))// <span class="id">ltW</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">j</span> [<span class="id">Ej</span> <span class="id">Bij0</span> <span class="id">Bij5</span>]] : <span class="kwd">exists</span> <span class="id">j</span>, [/\ <span class="id">E</span> <span class="id">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>) `&amp;` <span class="id">closure</span> (<span class="id">B</span> <span class="id">j</span>) !=<span class="id">set0</span> &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">closure</span> (<span class="id">B</span> <span class="id">i</span>) `&lt;=` <span class="id">closure</span> (5%:<span class="id">R</span> *` <span class="id">B</span> <span class="id">j</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">j</span> [<span class="id">Dj</span> <span class="id">Bij0</span> <span class="id">Bij2</span> <span class="id">Bij5</span>]] := <span class="id">Dintersect</span> <span class="id">_</span> <span class="id">Vi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">j</span>; <span class="id">split</span> =&gt; //; <span class="id">split</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: <span class="id">Bij0</span>; <span class="id">rewrite</span> <span class="id">setIC</span>; <span class="id">exact</span>: <span class="id">subsetI_neq0</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">BjK</span> : ~ (<span class="id">closure</span> (<span class="id">B</span> <span class="id">j</span>) `&lt;=` <span class="id">K</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">BjK</span>; <span class="id">move</span>/<span class="id">eqP</span> : <span class="id">BiK0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">negP</span>/<span class="id">set0P</span>; <span class="id">move</span>: <span class="id">Bij0</span>; <span class="id">exact</span>: <span class="id">subsetI_neq0</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">k</span> <span class="id">NK</span> <span class="id">Fkj</span>] : (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> ~` `<span class="id">I_N</span>) <span class="id">F</span> <span class="id">i</span>) <span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">Ej</span>; <span class="id">rewrite</span> <span class="id">E_partition</span> =&gt; -[<span class="id">k</span> <span class="id">_</span> <span class="id">Fkj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">k</span> =&gt; //= <span class="id">kN</span>; <span class="id">apply</span>: <span class="id">BjK</span> =&gt; <span class="id">x</span> <span class="id">Bjx</span>; <span class="kwd">exists</span> <span class="id">k</span> =&gt; //; <span class="kwd">exists</span> <span class="id">j</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">k</span> =&gt; //; <span class="kwd">exists</span> <span class="id">j</span> =&gt; //; <span class="id">exact</span>: <span class="id">Bij5</span>.<br/>
<span class="id">have</span> {}<span class="id">ZNF5</span> : <span class="id">mu</span> (<span class="id">Z</span> <span class="id">r</span>%:<span class="id">num</span>) &lt;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">m</span> &lt;<span class="id">oo</span>) \<span class="id">esum_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">m</span>) <span class="id">mu</span> (<span class="id">closure</span> (5%:<span class="id">R</span> *` <span class="id">B</span> <span class="id">i</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> ~` `<span class="id">I_N</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">i</span>) <span class="id">closure</span> (5%:<span class="id">R</span> *` <span class="id">B</span> <span class="id">j</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">le_outer_measure</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (\<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">mu</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">i</span>) <span class="id">closure</span> (5%:<span class="id">R</span> *` <span class="id">B</span> <span class="id">j</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">measure_sigma_sub_additive_tail</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurable_closure</span>; <span class="id">exact</span>: <span class="id">is_scale_ball</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span>' <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurable_closure</span>; <span class="id">exact</span>: <span class="id">is_scale_ball</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">lee_nneseries</span> =&gt; // <span class="id">n</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -[<span class="kwd">in</span> <span class="id">leRHS</span>](<span class="id">set_mem_set</span> (<span class="id">F</span> <span class="id">n</span>)) -<span class="id">nneseries_esum</span>// <span class="id">bigcup_mkcond</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">eseries_mkcond</span> [<span class="id">leRHS</span>](<span class="id">_</span> : <span class="id">_</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">mu</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> <span class="id">F</span> <span class="id">n</span> <span class="kwd">then</span> <span class="id">closure</span> (5%:<span class="id">R</span> *` <span class="id">B</span> <span class="id">i</span>) <span class="kwd">else</span> <span class="id">set0</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">under</span> [<span class="id">RHS</span>]<span class="id">eq_bigr</span> <span class="id">do</span> <span class="id">rewrite</span> (<span class="id">fun_if</span> <span class="id">mu</span>) <span class="id">measure0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">measure_sigma_sub_additive</span> =&gt; //.<br/>
&nbsp;&nbsp;+ <span class="id">move</span>=&gt; <span class="id">m</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; // <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurable_closure</span>; <span class="id">exact</span>: <span class="id">is_scale_ball</span>.<br/>
&nbsp;&nbsp;+ <span class="id">apply</span>: <span class="id">bigcup_measurable</span> =&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; // <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurable_closure</span>; <span class="id">exact</span>: <span class="id">is_scale_ball</span>.<br/>
<span class="id">apply</span>/(<span class="id">le_trans</span> <span class="id">ZNF5</span>).<br/>
<span class="id">move</span>/<span class="id">ltW</span>: <span class="id">F5e</span>; <span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> -&gt; <span class="id">_</span>](@<span class="id">lee_pdivl_mull</span> <span class="id">R</span> 5%:<span class="id">R</span>) ?<span class="id">ltr0n</span>//.<br/>
<span class="id">rewrite</span> -<span class="id">nneseriesZl</span>//; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">exact</span>: <span class="id">esum_ge0</span>.<br/>
<span class="id">apply</span>: <span class="id">le_trans</span>; <span class="id">apply</span>: <span class="id">lee_nneseries</span> =&gt; //; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">exact</span>: <span class="id">esum_ge0</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> -(<span class="id">set_mem_set</span> (<span class="id">F</span> <span class="id">n</span>)) -<span class="id">nneseries_esum</span>// -<span class="id">nneseries_esum</span>// -<span class="id">nneseriesZl</span>//.<br/>
<span class="id">apply</span>: <span class="id">lee_nneseries</span> =&gt; // <span class="id">m</span> <span class="id">mFn</span>.<br/>
<span class="id">rewrite</span> (<span class="id">ballE</span> (<span class="id">is_ballB</span> <span class="id">m</span>))// <span class="id">closure_ball</span> <span class="id">lebesgue_measure_closed_ball</span>//.<br/>
<span class="id">rewrite</span> <span class="id">scale_ballE</span>// <span class="id">closure_ball</span> <span class="id">lebesgue_measure_closed_ball</span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">EFinM</span> <span class="id">mulrnAr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">vitali_theorem</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/tree/yoshihiro503%40generate_index">a fork of coq2html</a></div>
</body>
</html>
