
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.kernel</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.kernel" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>

<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">
<h1 class="title">Module mathcomp.analysis.kernel</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">HB</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">structures</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">all_ssreflect</span> <span class="id">ssralg</span> <span class="id">ssrnum</span> <span class="id">ssrint</span> <span class="id">interval</span> <span class="id">finmap</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html">mathcomp_extra</a></span> <span class="id"><a href="mathcomp.classical.boolp.html">boolp</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html">classical_sets</a></span> <span class="id"><a href="mathcomp.classical.functions.html">functions</a></span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.cardinality.html">cardinality</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html">fsbigop</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.reals.html">reals</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html">ereal</a></span> <span class="id"><a href="mathcomp.analysis.signed.html">signed</a></span> <span class="id"><a href="mathcomp.analysis.topology.html">topology</a></span> <span class="id"><a href="mathcomp.analysis.normedtype.html">normedtype</a></span> <span class="id"><a href="mathcomp.analysis.sequences.html">sequences</a></span> <span class="id"><a href="mathcomp.analysis.esum.html">esum</a></span> <span class="id"><a href="mathcomp.analysis.measure.html">measure</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.numfun.html">numfun</a></span> <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html">lebesgue_measure</a></span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html">lebesgue_integral</a></span>.<br/>
<br/>
<div class="ssrdoc markdown">
# Kernels                                                                  
                                                                           
This file provides a formation of kernels, s-finite kernels, finite        
kernels, subprobability kernels, and probability kernels. The main         
formalized result is the fact that s-finite kernels are stable by          
composition.                                                               
Reference:                                                                 
- R. Affeldt, C. Cohen, A. Saito. Semantics of probabilistic programs      
  using s-finite kernels in Coq. CPP 2023                                  
                                                                           
```                                                                        
      R.-ker X ~&gt; Y == kernel from X to Y where X and Y are of type        
                       measurableType                                      
                       The HB class is Kernel.                             
  measure_fam_uub k == the kernel k is uniformly upper-bounded             
    R.-sfker X ~&gt; Y == s-finite kernel                                     
                       The HB class is SFiniteKernel.                      
     R.-fker X ~&gt; Y == finite kernel                                       
                       The HB class is FiniteKernel.                       
    R.-spker X ~&gt; Y == subprobability kernel                               
                       The HB class is SubProbabilityKernel.               
     R.-pker X ~&gt; Y == probability kernel                                  
                       The HB class is ProbabilityKernel.                  
            kseries == countable sum of kernels                            
                       It is declared as an instance of the structure      
                       Kernel. It is also an instance of the structure     
                       SFiniteKernel if the sum is over s-finite kernels.  
              kzero == kernel defined using the mzero measure              
          kdirac mf == kernel defined by a measurable function             
           mset U r == the set of probability measures mu such that        
                       mu U &lt; r                                            
               pset == the sets mset U r with U measurable and r \in [0,1] 
       pprobability == the measurable type generated by pset               
     kprobability m == kernel defined by a probability measure             
         kadd k1 k2 == lifting of the addition of measures to kernels      
             l \; k == composition of kernels                              
```                                                                        
                                                                           
</div>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="kwd">Arguments</span>.<br/>
<span class="id">Unset</span> <span class="id">Strict</span> <span class="kwd">Implicit</span>.<br/>
<span class="id">Unset</span> <span class="id">Printing</span> <span class="kwd">Implicit</span> <span class="id">Defensive</span>.<br/>
<span class="kwd">Import</span> <span class="id">Order.TTheory</span> <span class="id">GRing.Theory</span> <span class="id">Num.Def</span> <span class="id">Num.Theory</span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.topology.html#numFieldTopology.Exports">numFieldTopology.Exports</a></span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ring_scope</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">R</span> .-<span class="id">ker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 42, <span class="id">format</span> "<span class="id">R</span> .-<span class="id">ker</span>  <span class="id">X</span>  ~&gt;  <span class="id">Y</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">R</span> .-<span class="id">sfker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 42, <span class="id">format</span> "<span class="id">R</span> .-<span class="id">sfker</span>  <span class="id">X</span>  ~&gt;  <span class="id">Y</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">R</span> .-<span class="id">fker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 42, <span class="id">format</span> "<span class="id">R</span> .-<span class="id">fker</span>  <span class="id">X</span>  ~&gt;  <span class="id">Y</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">R</span> .-<span class="id">spker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 42, <span class="id">format</span> "<span class="id">R</span> .-<span class="id">spker</span>  <span class="id">X</span>  ~&gt;  <span class="id">Y</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">R</span> .-<span class="id">pker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 42, <span class="id">format</span> "<span class="id">R</span> .-<span class="id">pker</span>  <span class="id">X</span>  ~&gt;  <span class="id">Y</span>").<br/>
<br/>
<span class="id"><a name="isKernel">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">isKernel</span> <span class="id"><a name="d:1">d</a></span> <span class="id"><a name="d':2">d</a></span>' (<span class="id"><a name="X:3">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:4">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="R:5">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id"><a name="k:6">k</a></span> : <span class="id">X</span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) := {<br/>
&nbsp;&nbsp;<span class="id"><a name="measurable_kernel:8">measurable_kernel</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id"><a name="U:7">U</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id">X</span>] (<span class="id">k</span> ^~ <span class="id">U</span>) }.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">kernel</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">Kernel</span> <span class="id"><a name="d:15">d</a></span> <span class="id"><a name="d':16">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:17">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:18">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:19">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) :=<br/>
&nbsp;&nbsp;{ <span class="id"><a name="k:20">k</a></span> &amp; <span class="id"><a href="mathcomp.analysis.kernel.html#isKernel">isKernel</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">k</span> }.<br/>
<span class="kwd">Notation</span> "<span class="id">R</span> .-<span class="id">ker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>" := (<span class="id"><a href="mathcomp.analysis.kernel.html#kernel">kernel</a></span> <span class="id">X</span>%<span class="id">type</span> <span class="id">Y</span> <span class="id">R</span>).<br/>
<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> {<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kernel_measurable_eq_cst">kernel_measurable_eq_cst</a></span> <span class="id"><a name="d:23">d</a></span> <span class="id"><a name="d':24">d</a></span>' (<span class="id"><a name="T:25">T</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="T':26">T</a></span>' : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:27">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id"><a name="f:28">f</a></span> : <span class="id">R</span>.-<span class="id">ker</span> <span class="id">T</span> ~&gt; <span class="id">T</span>') <span class="id"><a name="k:29">k</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> [<span class="id">set</span> <span class="id"><a name="t:30">t</a></span> | <span class="id">f</span> <span class="id">t</span> [<span class="id">set</span>: <span class="id">T</span>'] == <span class="id">k</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = (<span class="id">f</span> ^~ <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>) @^-1` [<span class="id">set</span> <span class="id">k</span>]); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; <span class="id">t</span>/= /<span class="id">eqP</span>.<br/>
<span class="id">have</span> /(<span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span> [<span class="id">set</span> <span class="id">k</span>]) := <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> <span class="id">f</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span>; <span class="id">exact</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kernel_measurable_neq_cst">kernel_measurable_neq_cst</a></span> <span class="id"><a name="d:32">d</a></span> <span class="id"><a name="d':33">d</a></span>' (<span class="id"><a name="T:34">T</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="T':35">T</a></span>' : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:36">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>)  (<span class="id"><a name="f:37">f</a></span> : <span class="id">R</span>.-<span class="id">ker</span> <span class="id">T</span> ~&gt; <span class="id">T</span>') <span class="id"><a name="k:38">k</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> [<span class="id">set</span> <span class="id"><a name="t:39">t</a></span> | <span class="id">f</span> <span class="id">t</span> [<span class="id">set</span>: <span class="id">T</span>'] != <span class="id">k</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = (<span class="id">f</span> ^~ <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>) @^-1` [<span class="id">set</span>~ <span class="id">k</span>]); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; <span class="id">t</span> /<span class="id">eqP</span>.<br/>
<span class="id">have</span> /(<span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span> [<span class="id">set</span>~ <span class="id">k</span>]) := <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> <span class="id">f</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span>; <span class="id">apply</span> =&gt; //; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableC">measurableC</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kernel_measurable_fun_eq_cst">kernel_measurable_fun_eq_cst</a></span> <span class="id"><a name="d:41">d</a></span> <span class="id"><a name="d':42">d</a></span>' (<span class="id"><a name="T:43">T</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="T':44">T</a></span>' : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:45">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id"><a name="f:46">f</a></span> : <span class="id">R</span>.-<span class="id">ker</span> <span class="id">T</span> ~&gt; <span class="id">T</span>') <span class="id"><a name="k:47">k</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id">T</span>] (<span class="kwd">fun</span> <span class="id"><a name="t:48">t</a></span> =&gt; <span class="id">f</span> <span class="id">t</span> [<span class="id">set</span>: <span class="id">T</span>'] == <span class="id">k</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
<span class="id">move</span>=&gt; <span class="id">_</span> /= <span class="id">B</span> <span class="id">mB</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span>.<br/>
<span class="id">have</span> [/<span class="id">eqP</span>-&gt;|/<span class="id">eqP</span>-&gt;|/<span class="id">eqP</span>-&gt;|/<span class="id">eqP</span>-&gt;] := <span class="id"><a href="mathcomp.classical.classical_sets.html#set_bool">set_bool</a></span> <span class="id">B</span>.<br/>
- <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kernel_measurable_eq_cst">kernel_measurable_eq_cst</a></span>.<br/>
- <span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> @^-1` <span class="id">_</span> = [<span class="id">set</span> <span class="id"><a name="b:49">b</a></span> | <span class="id">f</span> <span class="id">b</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> != <span class="id">k</span>]); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; [<span class="id">t</span> /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbT">negbT</a></span>//|<span class="id">t</span> /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span>].<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kernel_measurable_neq_cst">kernel_measurable_neq_cst</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_set0">preimage_set0</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_setT">preimage_setT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eq_kernel">eq_kernel</a></span> <span class="id"><a name="d:52">d</a></span> <span class="id"><a name="d':53">d</a></span>' (<span class="id"><a name="T:54">T</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="T':55">T</a></span>' : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="R:56">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id"><a name="k1:57">k1</a></span> <span class="id"><a name="k2:58">k2</a></span> : <span class="id">R</span>.-<span class="id">ker</span> <span class="id">T</span> ~&gt; <span class="id">T</span>') :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id"><a name="x:59">x</a></span> <span class="id"><a name="U:60">U</a></span>, <span class="id">k1</span> <span class="id">x</span> <span class="id">U</span> = <span class="id">k2</span> <span class="id">x</span> <span class="id">U</span>) -&gt; <span class="id">k1</span> = <span class="id">k2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
<span class="id">move</span>: <span class="id">k1</span> <span class="id">k2</span> =&gt; [<span class="id">m1</span> [[?]]] [<span class="id">m2</span> [[?]]] /= <span class="id">k12</span>.<br/>
<span class="id">have</span> ? : <span class="id">m1</span> = <span class="id">m2</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">t</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.measure.html#eq_measure">eq_measure</a></span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">U</span>; <span class="id">rewrite</span> <span class="id">k12</span>.<br/>
<span class="kwd">by</span> <span class="id">subst</span> <span class="id">m1</span>; <span class="id">f_equal</span>; <span class="id">f_equal</span>; <span class="id">f_equal</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#Prop_irrelevance">Prop_irrelevance</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="kseries">kseries</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:61">d</a></span> <span class="id"><a name="d':62">d</a></span>' (<span class="id"><a name="X:63">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:64">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:65">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="kseries.k">k</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#kseries.R">R</a></span>.-<span class="id">ker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kseries.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kseries.Y">Y</a></span>)^<span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="kseries">kseries</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kseries.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kseries.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kseries.R">R</a></span>} :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id"><a name="x:67">x</a></span> =&gt; [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measure.Exports.measure">measure</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#mseries">mseries</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kseries.k">k</a></span> ^~ <span class="id">x</span>) 0].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_kseries">measurable_fun_kseries</a></span> (<span class="id"><a name="U:68">U</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kseries.Y">Y</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kseries.X">X</a></span>] (<span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> ^~ <span class="id">U</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
<span class="id">move</span>=&gt; <span class="id">mU</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_emeasurable_fun_sum">ge0_emeasurable_fun_sum</a></span> =&gt; // <span class="id">n</span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_6">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#Build">isKernel.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_kseries">measurable_fun_kseries</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="integral_kseries">integral_kseries</a></span> <span class="id"><a name="d:69">d</a></span> <span class="id"><a name="d':70">d</a></span>' (<span class="id"><a name="X:71">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:72">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;(<span class="id"><a name="R:73">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id"><a name="k:74">k</a></span> : (<span class="id">R</span>.-<span class="id">ker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>)^<span class="id">nat</span>) (<span class="id"><a name="f:75">f</a></span> : <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) <span class="id"><a name="x:76">x</a></span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id"><a name="y:77">y</a></span>, 0 &lt;= <span class="id">f</span> <span class="id">y</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id">Y</span>] <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> <span class="id">k</span> <span class="id">x</span>]<span class="id">_y</span> (<span class="id">f</span> <span class="id">y</span>) = \<span class="id">sum_</span>(<span class="id"><a name="i:79">i</a></span> &lt;<span class="id">oo</span>) \<span class="id">int</span>[<span class="id">k</span> <span class="id">i</span> <span class="id">x</span>]<span class="id">_y</span> (<span class="id">f</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">f0</span> <span class="id">mf</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span>/= <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_integral_measure_series">ge0_integral_measure_series</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="measure_fam_uub">measure_fam_uub</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:87">d</a></span> <span class="id"><a name="d':88">d</a></span>' (<span class="id"><a name="X:89">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:90">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:91">R</a></span> : <span class="id">numFieldType</span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="measure_fam_uub.k">k</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub.R">R</a></span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="measure_fam_uub">measure_fam_uub</a></span> := <span class="kwd">exists</span> <span class="id"><a name="r:93">r</a></span>, <span class="kwd">forall</span> <span class="id"><a name="x:94">x</a></span>, <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub.k">k</a></span> <span class="id">x</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub.Y">Y</a></span>] &lt; <span class="id">r</span>%:<span class="id">E</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measure_fam_uubP">measure_fam_uubP</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id"><a name="r:95">r</a></span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub.R">R</a></span>}, <span class="kwd">forall</span> <span class="id"><a name="x:96">x</a></span>, <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub.k">k</a></span> <span class="id">x</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub.Y">Y</a></span>] &lt; <span class="id">r</span>%:<span class="id">num</span>%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
<span class="id">split</span> =&gt; [|] [<span class="id">r</span> <span class="id">kr</span>]; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">r</span>%:<span class="id">num</span>.<br/>
<span class="id">suff</span> <span class="id">r_gt0</span> : (0 &lt; <span class="id">r</span>)%<span class="id">R</span> <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id"><a href="mathcomp.analysis.signed.html#PosNum">PosNum</a></span> <span class="id">r_gt0</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>; <span class="id">apply</span>: (<span class="id">le_lt_trans</span> <span class="id">_</span> (<span class="id">kr</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#point">point</a></span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span>.<br/>
<br/>
<span class="id"><a name="Kernel_isSFinite_subdef">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">Kernel_isSFinite_subdef</span> <span class="id"><a name="d:97">d</a></span> <span class="id"><a name="d':98">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:99">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:100">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:101">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k:102">k</a></span> : <span class="id">X</span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) := {<br/>
&nbsp;&nbsp;<span class="id"><a name="sfinite_kernel_subdef:108">sfinite_kernel_subdef</a></span> : <span class="kwd">exists2</span> <span class="id"><a name="s:103">s</a></span> : (<span class="id">R</span>.-<span class="id">ker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>)^<span class="id">nat</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id"><a name="n:104">n</a></span>, <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span> (<span class="id">s</span> <span class="id">n</span>) &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id"><a name="x:106">x</a></span> <span class="id"><a name="U:107">U</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; <span class="id">k</span> <span class="id">x</span> <span class="id">U</span> = <span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> <span class="id">s</span> <span class="id">x</span> <span class="id">U</span> }.<br/>
<br/>
<span class="id"><a name="SFiniteKernel">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">SFiniteKernel</span> <span class="id"><a name="d:115">d</a></span> <span class="id"><a name="d':116">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:117">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:118">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:119">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) :=<br/>
&nbsp;&nbsp;{ <span class="id"><a name="k:120">k</a></span> <span class="id">of</span> @<span class="id"><a href="mathcomp.analysis.kernel.html#Kernel">Kernel</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">R</span> <span class="id">k</span> &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#Kernel_isSFinite_subdef">Kernel_isSFinite_subdef</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">k</span> }.<br/>
<span class="kwd">Notation</span> "<span class="id">R</span> .-<span class="id">sfker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>" := (<span class="id"><a href="mathcomp.analysis.kernel.html#type">SFiniteKernel.type</a></span> <span class="id">X</span>%<span class="id">type</span> <span class="id">Y</span> <span class="id">R</span>).<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite_kernel_subdef">sfinite_kernel_subdef</a></span> {<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eq_sfkernel">eq_sfkernel</a></span> <span class="id"><a name="d:123">d</a></span> <span class="id"><a name="d':124">d</a></span>' (<span class="id"><a name="T:125">T</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="T':126">T</a></span>' : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="R:127">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id"><a name="k1:128">k1</a></span> <span class="id"><a name="k2:129">k2</a></span> : <span class="id">R</span>.-<span class="id">sfker</span> <span class="id">T</span> ~&gt; <span class="id">T</span>') :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id"><a name="x:130">x</a></span> <span class="id"><a name="U:131">U</a></span>, <span class="id">k1</span> <span class="id">x</span> <span class="id">U</span> = <span class="id">k2</span> <span class="id">x</span> <span class="id">U</span>) -&gt; <span class="id">k1</span> = <span class="id">k2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
<span class="id">move</span>: <span class="id">k1</span> <span class="id">k2</span> =&gt; [<span class="id">m1</span> [[?] [?]]] [<span class="id">m2</span> [[?] [?]]] /= <span class="id">k12</span>.<br/>
<span class="id">have</span> ? : <span class="id">m1</span> = <span class="id">m2</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">t</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.measure.html#eq_measure">eq_measure</a></span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">U</span>; <span class="id">rewrite</span> <span class="id">k12</span>.<br/>
<span class="kwd">by</span> <span class="id">subst</span> <span class="id">m1</span>; <span class="id">f_equal</span>; <span class="id">f_equal</span>; <span class="id">f_equal</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#Prop_irrelevance">Prop_irrelevance</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="SFiniteKernel_isFinite">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">SFiniteKernel_isFinite</span> <span class="id"><a name="d:132">d</a></span> <span class="id"><a name="d':133">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:134">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:135">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:136">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k:137">k</a></span> : <span class="id">X</span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) := {<br/>
&nbsp;&nbsp;<span class="id"><a name="measure_uub:138">measure_uub</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span> <span class="id">k</span> }.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">finite_kernel</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">FiniteKernel</span> <span class="id"><a name="d:145">d</a></span> <span class="id"><a name="d':146">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:147">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:148">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:149">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) :=<br/>
&nbsp;&nbsp;{ <span class="id"><a name="k:150">k</a></span> <span class="id">of</span> @<span class="id"><a href="mathcomp.analysis.kernel.html#SFiniteKernel">SFiniteKernel</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">k</span> &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#SFiniteKernel_isFinite">SFiniteKernel_isFinite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">k</span> }.<br/>
<span class="kwd">Notation</span> "<span class="id">R</span> .-<span class="id">fker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>" := (<span class="id"><a href="mathcomp.analysis.kernel.html#finite_kernel">finite_kernel</a></span> <span class="id">X</span>%<span class="id">type</span> <span class="id">Y</span> <span class="id">R</span>).<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> {<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>} <span class="id">_</span>.<br/>
<br/>
<span class="id"><a name="Kernel_isFinite">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">Kernel_isFinite</span> <span class="id"><a name="d:153">d</a></span> <span class="id"><a name="d':154">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:155">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:156">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:157">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k:158">k</a></span> : <span class="id">X</span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#isKernel">isKernel</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">k</span> := {<br/>
&nbsp;&nbsp;<span class="id"><a name="measure_uub:159">measure_uub</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span> <span class="id">k</span> }.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="kzero">kzero</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:166">d</a></span> <span class="id"><a name="d':167">d</a></span>' (<span class="id"><a name="X:168">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:169">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:170">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="kzero">kzero</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kzero.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kzero.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kzero.R">R</a></span>} :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">_</span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kzero.X">X</a></span> =&gt; [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measure.Exports.measure">measure</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#mzero">mzero</a></span>].<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="kzero.measurable_fun_kzero">measurable_fun_kzero</a></span> <span class="id"><a name="U:171">U</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kzero.X">X</a></span>] (<span class="id"><a href="mathcomp.analysis.kernel.html#kzero">kzero</a></span> ^~ <span class="id">U</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ?/=; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_cst">measurable_cst</a></span>. Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_21">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.kernel.html#Build">isKernel.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kzero.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kzero.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kzero.R">R</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kzero">kzero</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kzero.measurable_fun_kzero">measurable_fun_kzero</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kzero_uub">kzero_uub</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kzero">kzero</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
 <span class="kwd">by</span> <span class="kwd">exists</span> 1%<span class="id">R</span> =&gt; /= <span class="id">t</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.measure.html#mzero">mzero</a></span>/=. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kzero">kzero</a></span>.<br/>
<br/>
<span class="id"><a name="Builders_23">HB.builders</a></span> <span class="kwd">Context</span> <span class="id"><a name="d:172">d</a></span> <span class="id"><a name="d':173">d</a></span>' (<span class="id"><a name="X:174">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:175">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;(<span class="id"><a name="R:176">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) <span class="id"><a name="k:177">k</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#Kernel_isFinite">Kernel_isFinite</a></span> <span class="id">d</span> <span class="id">d</span>' <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">k</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="Builders_23.Builders_23.sfinite_finite">sfinite_finite</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">exists2</span> <span class="id"><a name="k_:184">k_</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.R">R</a></span>.-<span class="id">ker</span> <span class="id">_</span> ~&gt; <span class="id">_</span>)^<span class="id">nat</span>, <span class="kwd">forall</span> <span class="id"><a name="n:185">n</a></span>, <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span> (<span class="id">k_</span> <span class="id">n</span>) &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id"><a name="x:187">x</a></span> <span class="id"><a name="U:188">U</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.k">k</a></span> <span class="id">x</span> <span class="id">U</span> = <span class="id"><a href="mathcomp.analysis.measure.html#mseries">mseries</a></span> (<span class="id">k_</span> ^~ <span class="id">x</span>) 0 <span class="id">U</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id"><a name="n:189">n</a></span> =&gt; <span class="kwd">if</span> <span class="id">n</span> <span class="id">is</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span> <span class="kwd">then</span> [<span class="id">the</span> <span class="id">_</span>.-<span class="id">ker</span> <span class="id">_</span> ~&gt; <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.k">k</a></span>] <span class="kwd">else</span><br/>
&nbsp;&nbsp;[<span class="id">the</span> <span class="id">_</span>.-<span class="id">ker</span> <span class="id">_</span> ~&gt; <span class="id">_</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.analysis.kernel.html#kzero">kzero</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.R">R</a></span>]).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span> =&gt; [|<span class="id">_</span>]; [<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.measure_uub">measure_uub</a></span>|<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kzero_uub">kzero_uub</a></span>].<br/>
<span class="id">move</span>=&gt; <span class="id">t</span> <span class="id">U</span> <span class="id">mU</span>/=; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.measure.html#mseries">mseries</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#nneseries_split">nneseries_split</a></span> 1%<span class="id">N</span>)// <span class="id">big_ord_recl</span>/= <span class="id">big_ord0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#adde0">adde0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.sequences.html#ereal_series">ereal_series</a></span> (@<span class="id"><a href="mathcomp.analysis.sequences.html#eq_eseriesr">eq_eseriesr</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span>=&gt; 0%<span class="id">E</span>)); <span class="id">last</span> <span class="kwd">by</span> <span class="id">case</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.sequences.html#eseries0">eseries0</a></span>// <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#adde0">adde0</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="Builders_23.HB_unnamed_factory_25">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.kernel.html#Kernel_isSFinite_subdef.Build">Kernel_isSFinite_subdef.Build</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.d">d</a></span> <span class="id">d</span>' <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.R">R</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.k">k</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.sfinite_finite">sfinite_finite</a></span>.<br/>
<br/>
<span class="id"><a name="Builders_23.HB_unnamed_factory_27">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.kernel.html#SFiniteKernel_isFinite.Build">SFiniteKernel_isFinite.Build</a></span>  <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.d">d</a></span> <span class="id">d</span>' <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.R">R</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23.k">k</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.measure_uub">measure_uub</a></span>.<br/>
<br/>
<span class="id"><a href="mathcomp.analysis.kernel.html#Builders_23.Builders_23">HB.end</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="sfinite">sfinite</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:193">d</a></span> <span class="id"><a name="d':194">d</a></span>' (<span class="id"><a name="X:195">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:196">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>').<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="sfinite.R">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id"><a name="sfinite.k">k</a></span> : <span class="id">R</span>.-<span class="id">sfker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.Y">Y</a></span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="sfinite.s">s</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.R">R</a></span>})^<span class="id">nat</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#exist2">exist2</a></span> <span class="id">x</span> <span class="id">_</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.boolp.html#cid2">cid2</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite_kernel_subdef">sfinite_kernel_subdef</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.k">k</a></span>) <span class="kwd">in</span> <span class="id">x</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="sfinite.ms">ms</a></span> <span class="id"><a name="n:199">n</a></span> : @<span class="id"><a href="mathcomp.analysis.kernel.html#isKernel">isKernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.d">d</a></span> <span class="id">d</span>' <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.s">s</a></span> <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
<span class="id">split</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.s">s</a></span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#cid2">cid2</a></span> =&gt; /= <span class="id">s</span>' <span class="id">s</span>'<span class="id">_uub</span> <span class="id">kE</span>.<br/>
<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="sfinite.hb_instance_29">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id"><a name="n:200">n</a></span> := <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.ms">ms</a></span> <span class="id">n</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="sfinite.s_uub">s_uub</a></span> <span class="id"><a name="n:201">n</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.s">s</a></span> <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.s">s</a></span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#cid2">cid2</a></span>. Qed.</div>
<br/>
<span class="id"><a name="sfinite.hb_instance_32">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id"><a name="n:202">n</a></span> := @<span class="id"><a href="mathcomp.analysis.kernel.html#Build">Kernel_isFinite.Build</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.d">d</a></span> <span class="id">d</span>' <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.s">s</a></span> <span class="id">n</span>) (<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.s_uub">s_uub</a></span> <span class="id">n</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sfinite_kernel">sfinite_kernel</a></span> : <span class="kwd">exists</span> <span class="id"><a name="s:203">s</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.R">R</a></span>.-<span class="id">fker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.Y">Y</a></span>)^<span class="id">nat</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id"><a name="x:204">x</a></span> <span class="id"><a name="U:205">U</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.k">k</a></span> <span class="id">x</span> <span class="id">U</span> = <span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> <span class="id">s</span> <span class="id">x</span> <span class="id">U</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
<span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id"><a name="n:206">n</a></span> =&gt; [<span class="id">the</span> <span class="id">_</span>.-<span class="id">fker</span> <span class="id">_</span> ~&gt; <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.s">s</a></span> <span class="id">n</span>]) =&gt; <span class="id">x</span> <span class="id">U</span> <span class="id">mU</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.s">s</a></span> /= /<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite.s">s</a></span>; <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#cid2">cid2</a></span> =&gt; ? ? -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite">sfinite</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sfinite_kernel_measure">sfinite_kernel_measure</a></span> <span class="id"><a name="d:208">d</a></span> <span class="id"><a name="d':209">d</a></span>' (<span class="id"><a name="Z:210">Z</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="X:211">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="R:212">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id"><a name="k:213">k</a></span> : <span class="id">R</span>.-<span class="id">sfker</span> <span class="id">Z</span> ~&gt; <span class="id">X</span>) (<span class="id"><a name="z:214">z</a></span> : <span class="id">Z</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#sfinite_measure">sfinite_measure</a></span> (<span class="id">k</span> <span class="id">z</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
<span class="id">have</span> [<span class="id">s</span> <span class="id">ks</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite_kernel">sfinite_kernel</a></span> <span class="id">k</span>.<br/>
<span class="kwd">exists</span> (<span class="id">s</span> ^~ <span class="id">z</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">have</span> [<span class="id">r</span> <span class="id">snr</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> (<span class="id">s</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#lty_fin_num_fun">lty_fin_num_fun</a></span>; <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> (<span class="id">snr</span> <span class="id">_</span>))// <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">U</span> <span class="id">mU</span>; <span class="id">rewrite</span> <span class="id">ks</span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="hb_instance_38">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="d:215">d</a></span> <span class="id"><a name="d':216">d</a></span>' (<span class="id"><a name="X:217">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:218">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:219">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.kernel.html#Build">Kernel_isFinite.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">R</span> (@<span class="id"><a href="mathcomp.analysis.kernel.html#kzero">kzero</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="mathcomp.analysis.kernel.html#kzero_uub">kzero_uub</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span>).<br/>
<br/>
<span class="id"><a name="Kernel_isSFinite">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">Kernel_isSFinite</span> <span class="id"><a name="d:220">d</a></span> <span class="id"><a name="d':221">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:222">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:223">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:224">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k:225">k</a></span> : <span class="id">X</span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#isKernel">isKernel</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">k</span> := {<br/>
&nbsp;&nbsp;<span class="id"><a name="sfinite:229">sfinite</a></span> : <span class="kwd">exists</span> <span class="id"><a name="s:226">s</a></span> : (<span class="id">R</span>.-<span class="id">fker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>)^<span class="id">nat</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id"><a name="x:227">x</a></span> <span class="id"><a name="U:228">U</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; <span class="id">k</span> <span class="id">x</span> <span class="id">U</span> = <span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> <span class="id">s</span> <span class="id">x</span> <span class="id">U</span> }.<br/>
<br/>
<span class="id"><a name="Builders_46">HB.builders</a></span> <span class="kwd">Context</span> <span class="id"><a name="d:236">d</a></span> <span class="id"><a name="d':237">d</a></span>' (<span class="id"><a name="X:238">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:239">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;(<span class="id"><a name="R:240">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) <span class="id"><a name="k:241">k</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#Kernel_isSFinite">Kernel_isSFinite</a></span> <span class="id">d</span> <span class="id">d</span>' <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">k</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Builders_46.sfinite_subdef">sfinite_subdef</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#Kernel_isSFinite_subdef">Kernel_isSFinite_subdef</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_46.Builders_46.d">d</a></span> <span class="id">d</span>' <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_46.Builders_46.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_46.Builders_46.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_46.Builders_46.R">R</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_46.Builders_46.k">k</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
<span class="id">split</span>; <span class="id">have</span> [<span class="id">s</span> <span class="id">sE</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_46.sfinite">sfinite</a></span>; <span class="kwd">exists</span> <span class="id">s</span> =&gt; //.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="Builders_46.HB_unnamed_factory_48">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=  <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_46.sfinite_subdef">sfinite_subdef</a></span>.<br/>
<br/>
<span class="id"><a href="mathcomp.analysis.kernel.html#Builders_46.Builders_46">HB.end</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="sfkseries">sfkseries</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:248">d</a></span> <span class="id"><a name="d':249">d</a></span>' (<span class="id"><a name="X:250">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:251">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:252">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variables</span> <span class="id"><a name="sfkseries.k">k</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.R">R</a></span>.-<span class="id">sfker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.Y">Y</a></span>)^<span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="sfkseries.sfinite_kseries">sfinite_kseries</a></span> : <span class="kwd">exists2</span> <span class="id"><a name="k_:254">k_</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.R">R</a></span>.-<span class="id">ker</span> <span class="id">_</span> ~&gt; <span class="id">_</span>)^<span class="id">nat</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id"><a name="n:255">n</a></span>, <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span> (<span class="id">k_</span> <span class="id">n</span>) &amp;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id"><a name="x:257">x</a></span> <span class="id"><a name="U:258">U</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.k">k</a></span> <span class="id">x</span> <span class="id">U</span> = <span class="id"><a href="mathcomp.analysis.measure.html#mseries">mseries</a></span> (<span class="id">k_</span> ^~ <span class="id">x</span>) 0 <span class="id">U</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
<span class="id">have</span> /<span class="id"><a href="mathcomp.classical.cardinality.html#ppcard_eqP">ppcard_eqP</a></span>[<span class="id">f</span>] : ([<span class="id">set</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>] #= [<span class="id">set</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> * <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>])%<span class="id">card</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.cardinality.html#card_eq_sym">card_eq_sym</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.cardinality.html#card_nat2">card_nat2</a></span>.<br/>
<span class="id">pose</span> <span class="id">p</span> <span class="id"><a name="n:259">n</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.R">R</a></span>.-<span class="id">fker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.Y">Y</a></span>)^<span class="id">nat</span> := <span class="id">sval</span> (<span class="id"><a href="mathcomp.classical.boolp.html#cid">cid</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#sfinite_kernel">sfinite_kernel</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.k">k</a></span> <span class="id">n</span>))).<br/>
<span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id"><a name="i:261">i</a></span> =&gt; <span class="id">p</span> (<span class="id">f</span> <span class="id">i</span>).1 (<span class="id">f</span> <span class="id">i</span>).2).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">have</span> [<span class="id">r</span> <span class="id">Hr</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> (<span class="id">p</span> (<span class="id">f</span> <span class="id">n</span>).1 (<span class="id">f</span> <span class="id">n</span>).2).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">r</span> =&gt; <span class="id">x</span> /=; <span class="id">exact</span>: <span class="id">Hr</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">U</span> <span class="id">mU</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> /<span class="id"><a href="mathcomp.analysis.measure.html#mseries">mseries</a></span>/= /<span class="id"><a href="mathcomp.analysis.measure.html#mseries">mseries</a></span>/=.<br/>
<span class="id">have</span> <span class="id">kE</span> <span class="id">i</span> : <span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.k">k</a></span> <span class="id">i</span> <span class="id">x</span> <span class="id">U</span> = \<span class="id">sum_</span>(<span class="id"><a name="j:264">j</a></span> &lt;<span class="id">oo</span>) <span class="id">p</span> <span class="id">i</span> <span class="id">j</span> <span class="id">x</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">p</span> /<span class="id">sval</span>/=; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#cid">cid</a></span> =&gt; <span class="id">k_</span> -&gt;.<br/>
<span class="id">transitivity</span> (\<span class="id">esum_</span>(<span class="id"><a name="l:270">l</a></span> <span class="kwd">in</span> [<span class="id">set</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>] `*` [<span class="id">set</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>]) <span class="id">p</span> <span class="id">l</span>.1 <span class="id">l</span>.2 <span class="id">x</span> <span class="id">U</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> `*` <span class="id">_</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> `*`` (<span class="kwd">fun</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>)); <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -(@<span class="id"><a href="mathcomp.analysis.esum.html#esum_esum">esum_esum</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id"><a name="i:272">i</a></span> <span class="id"><a name="j:273">j</a></span> =&gt; <span class="id">p</span> <span class="id">i</span> <span class="id">j</span> <span class="id">x</span> <span class="id">U</span>))//.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.esum.html#nneseries_esum">nneseries_esum</a></span>// -<span class="id"><a href="mathcomp.classical.classical_sets.html#fun_true">fun_true</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.esum.html#eq_esum">eq_esum</a></span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">kE</span>// <span class="id"><a href="mathcomp.analysis.esum.html#nneseries_esum">nneseries_esum</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.analysis.esum.html#reindex_esum">reindex_esum</a></span> [<span class="id">set</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>] <span class="id">_</span> <span class="id">f</span>)//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> := @<span class="id"><a href="mathcomp.classical.functions.html#bijTT">bijTT</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.functions.html#setTT_bijective">setTT_bijective</a></span>/= -[<span class="kwd">in</span> <span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">set_bij</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.X">X</a></span> <span class="id">_</span> -&gt; <span class="id">_</span>](@<span class="id"><a href="mathcomp.classical.classical_sets.html#setMTT">setMTT</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.esum.html#nneseries_esum">nneseries_esum</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#fun_true">fun_true</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.esum.html#eq_esum">eq_esum</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_50">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#Build">Kernel_isSFinite_subdef.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.k">k</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries.sfinite_kseries">sfinite_kseries</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkseries">sfkseries</a></span>.<br/>
<br/>
<span class="id"><a name="FiniteKernel_isSubProbability">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">FiniteKernel_isSubProbability</span> <span class="id"><a name="d:279">d</a></span> <span class="id"><a name="d':280">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:281">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:282">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:283">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k:284">k</a></span> : <span class="id">X</span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) := {<br/>
&nbsp;&nbsp;<span class="id"><a name="sprob_kernel:286">sprob_kernel</a></span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> [<span class="id">set</span> <span class="id">k</span> <span class="id">x</span> [<span class="id">set</span>: <span class="id">Y</span>] | <span class="id"><a name="x:285">x</a></span> <span class="kwd">in</span> [<span class="id">set</span>: <span class="id">X</span>]] &lt;= 1 }.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">sprobability_kernel</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">SubProbabilityKernel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="d:293">d</a></span> <span class="id"><a name="d':294">d</a></span>' (<span class="id"><a name="X:295">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:296">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:297">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) :=<br/>
&nbsp;&nbsp;{ <span class="id"><a name="k:298">k</a></span> <span class="id">of</span> @<span class="id"><a href="mathcomp.analysis.kernel.html#FiniteKernel">FiniteKernel</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">k</span> &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#FiniteKernel_isSubProbability">FiniteKernel_isSubProbability</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">k</span> }.<br/>
<span class="kwd">Notation</span> "<span class="id">R</span> .-<span class="id">spker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>" := (<span class="id"><a href="mathcomp.analysis.kernel.html#sprobability_kernel">sprobability_kernel</a></span> <span class="id">X</span>%<span class="id">type</span> <span class="id">Y</span> <span class="id">R</span>).<br/>
<br/>
<span class="id"><a name="Kernel_isSubProbability">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">Kernel_isSubProbability</span> <span class="id"><a name="d:301">d</a></span> <span class="id"><a name="d':302">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:303">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:304">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:305">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k:306">k</a></span> : <span class="id">X</span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#isKernel">isKernel</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">k</span> := {<br/>
&nbsp;&nbsp;<span class="id"><a name="sprob_kernel:308">sprob_kernel</a></span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> [<span class="id">set</span> <span class="id">k</span> <span class="id">x</span> [<span class="id">set</span>: <span class="id">Y</span>] | <span class="id"><a name="x:307">x</a></span> <span class="kwd">in</span> [<span class="id">set</span>: <span class="id">X</span>]] &lt;= 1 }.<br/>
<br/>
<span class="id"><a name="Builders_60">HB.builders</a></span> <span class="kwd">Context</span> <span class="id"><a name="d:315">d</a></span> <span class="id"><a name="d':316">d</a></span>' (<span class="id"><a name="X:317">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:318">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;(<span class="id"><a name="R:319">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) <span class="id"><a name="k:320">k</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#Kernel_isSubProbability">Kernel_isSubProbability</a></span> <span class="id">d</span> <span class="id">d</span>' <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">k</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="Builders_60.Builders_60.finite">finite</a></span> : @<span class="id"><a href="mathcomp.analysis.kernel.html#Kernel_isFinite">Kernel_isFinite</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_60.Builders_60.d">d</a></span> <span class="id">d</span>' <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_60.Builders_60.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_60.Builders_60.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_60.Builders_60.R">R</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_60.Builders_60.k">k</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
<span class="id">split</span>; <span class="kwd">exists</span> 2%<span class="id">R</span> =&gt; /= ?; <span class="id">rewrite</span> (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> 1%:<span class="id">E</span>) ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> ?<span class="id">ltr1n</span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_60.sprob_kernel">sprob_kernel</a></span>)//; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_ub">ereal_sup_ub</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="Builders_60.HB_unnamed_factory_62">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_60.Builders_60.finite">finite</a></span>.<br/>
<br/>
<span class="id"><a name="Builders_60.HB_unnamed_factory_65">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.kernel.html#FiniteKernel_isSubProbability.Build">FiniteKernel_isSubProbability.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_60.Builders_60.k">k</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_60.sprob_kernel">sprob_kernel</a></span>.<br/>
<br/>
<span class="id"><a href="mathcomp.analysis.kernel.html#Builders_60.Builders_60">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="SubProbability_isProbability">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">SubProbability_isProbability</span> <span class="id"><a name="d:327">d</a></span> <span class="id"><a name="d':328">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:329">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:330">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:331">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k:332">k</a></span> : <span class="id">X</span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) := {<br/>
&nbsp;&nbsp;<span class="id"><a name="prob_kernel:334">prob_kernel</a></span> : <span class="kwd">forall</span> <span class="id"><a name="x:333">x</a></span>, <span class="id">k</span> <span class="id">x</span> [<span class="id">set</span>: <span class="id">Y</span>] = 1 }.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">probability_kernel</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">ProbabilityKernel</span> <span class="id"><a name="d:341">d</a></span> <span class="id"><a name="d':342">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:343">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:344">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:345">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) :=<br/>
&nbsp;&nbsp;{ <span class="id"><a name="k:346">k</a></span> <span class="id">of</span> @<span class="id"><a href="mathcomp.analysis.kernel.html#SubProbabilityKernel">SubProbabilityKernel</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">k</span> &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#SubProbability_isProbability">SubProbability_isProbability</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">k</span> }.<br/>
<span class="kwd">Notation</span> "<span class="id">R</span> .-<span class="id">pker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>" := (<span class="id"><a href="mathcomp.analysis.kernel.html#probability_kernel">probability_kernel</a></span> <span class="id">X</span>%<span class="id">type</span> <span class="id">Y</span> <span class="id">R</span>).<br/>
<br/>
<span class="id"><a name="Kernel_isProbability">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">Kernel_isProbability</span> <span class="id"><a name="d:349">d</a></span> <span class="id"><a name="d':350">d</a></span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="X:351">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:352">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:353">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k:354">k</a></span> : <span class="id">X</span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#isKernel">isKernel</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">k</span> := {<br/>
&nbsp;&nbsp;<span class="id"><a name="prob_kernel:356">prob_kernel</a></span> : <span class="kwd">forall</span> <span class="id"><a name="x:355">x</a></span>, <span class="id">k</span> <span class="id">x</span> [<span class="id">set</span>: <span class="id">Y</span>] = 1 }.<br/>
<br/>
<span class="id"><a name="Builders_76">HB.builders</a></span> <span class="kwd">Context</span> <span class="id"><a name="d:363">d</a></span> <span class="id"><a name="d':364">d</a></span>' (<span class="id"><a name="X:365">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:366">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;(<span class="id"><a name="R:367">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) <span class="id"><a name="k:368">k</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#Kernel_isProbability">Kernel_isProbability</a></span> <span class="id">d</span> <span class="id">d</span>' <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">k</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="Builders_76.Builders_76.sprob_kernel">sprob_kernel</a></span> : @<span class="id"><a href="mathcomp.analysis.kernel.html#Kernel_isSubProbability">Kernel_isSubProbability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_76.Builders_76.d">d</a></span> <span class="id">d</span>' <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_76.Builders_76.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_76.Builders_76.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_76.Builders_76.R">R</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_76.Builders_76.k">k</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
<span class="kwd">by</span> <span class="id">split</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ub_ereal_sup">ub_ereal_sup</a></span> =&gt; <span class="id">x</span> [<span class="id">y</span> <span class="id">_</span> &lt;-{<span class="id">x</span>}]; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_76.prob_kernel">prob_kernel</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="Builders_76.HB_unnamed_factory_78">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_76.Builders_76.sprob_kernel">sprob_kernel</a></span>.<br/>
<br/>
<span class="id"><a name="Builders_76.HB_unnamed_factory_82">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.kernel.html#SubProbability_isProbability.Build">SubProbability_isProbability.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_76.Builders_76.k">k</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#Builders_76.prob_kernel">prob_kernel</a></span>.<br/>
<br/>
<span class="id"><a href="mathcomp.analysis.kernel.html#Builders_76.Builders_76">HB.end</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finite_kernel_measure">finite_kernel_measure</a></span> <span class="id"><a name="d:375">d</a></span> <span class="id"><a name="d':376">d</a></span>' (<span class="id"><a name="X:377">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="Y:378">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:379">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id"><a name="k:380">k</a></span> : <span class="id">R</span>.-<span class="id">fker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>) (<span class="id"><a name="x:381">x</a></span> : <span class="id">X</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#fin_num_fun">fin_num_fun</a></span> (<span class="id">k</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
<span class="id">have</span> [<span class="id">r</span> <span class="id">k_r</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> <span class="id">k</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#lty_fin_num_fun">lty_fin_num_fun</a></span>; <span class="id">rewrite</span> (@<span class="id">lt_trans</span> <span class="id">_</span> <span class="id">_</span> <span class="id">r</span>%:<span class="id">E</span>) ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ltey">ltey</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="measurable_prod_subset_kernel">measurable_prod_subset_kernel</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:382">d</a></span> <span class="id"><a name="d':383">d</a></span>' (<span class="id"><a name="X:384">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:385">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:386">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.Y">Y</a></span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="measurable_prod_subset_kernel.xsection_kernel">xsection_kernel</a></span>.<br/>
<span class="kwd">Variable</span> (<span class="id"><a name="measurable_prod_subset_kernel.xsection_kernel.k">k</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.R">R</a></span>.-<span class="id">ker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.Y">Y</a></span>) (<span class="id"><a name="measurable_prod_subset_kernel.xsection_kernel.D">D</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.Y">Y</a></span>) (<span class="id"><a name="measurable_prod_subset_kernel.xsection_kernel.mD">mD</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">D</span>).<br/>
<span class="kwd">Let</span> <span class="id"><a name="measurable_prod_subset_kernel.xsection_kernel.kD">kD</a></span> <span class="id"><a name="x:390">x</a></span> := <span class="id"><a href="mathcomp.analysis.measure.html#mrestr">mrestr</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.k">k</a></span> <span class="id">x</span>) <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.mD">mD</a></span>.<br/>
<span class="id"><a name="measurable_prod_subset_kernel.xsection_kernel.hb_instance_84">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id"><a name="x:391">x</a></span> := <span class="id"><a href="mathcomp.analysis.measure.html#Measure.on">Measure.on</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.kD">kD</a></span> <span class="id">x</span>).<br/>
<span class="kwd">Let</span> <span class="id"><a name="measurable_prod_subset_kernel.xsection_kernel.phi">phi</a></span> <span class="id"><a name="A:392">A</a></span> := <span class="kwd">fun</span> <span class="id"><a name="x:393">x</a></span> =&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.kD">kD</a></span> <span class="id">x</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span> <span class="id">A</span> <span class="id">x</span>).<br/>
<span class="kwd">Let</span> <span class="id"><a name="measurable_prod_subset_kernel.xsection_kernel.XY">XY</a></span> := [<span class="id">set</span> <span class="id"><a name="A:394">A</a></span> | <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">A</span> /\ <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.X">X</a></span>] (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.phi">phi</a></span> <span class="id">A</span>)].<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="measurable_prod_subset_kernel.xsection_kernel.phiM">phiM</a></span> (<span class="id"><a name="A:395">A</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.X">X</a></span>) <span class="id"><a name="B:396">B</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.phi">phi</a></span> (<span class="id">A</span> `*` <span class="id">B</span>) = (<span class="kwd">fun</span> <span class="id"><a name="x:397">x</a></span> =&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.kD">kD</a></span> <span class="id">x</span> <span class="id">B</span> * (\1<span class="id">_A</span> <span class="id">x</span>)%:<span class="id">E</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#indicE">indicE</a></span> /<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.phi">phi</a></span>/=.<br/>
<span class="id">have</span> [<span class="id">xA</span>|<span class="id">xA</span>] := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span>); <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mule1">mule1</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#in_xsectionM">in_xsectionM</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mule0">mule0</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_xsectionM">notin_xsectionM</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#set0I">set0I</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measure0">measure0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_prod_subset_xsection_kernel">measurable_prod_subset_xsection_kernel</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id"><a name="x:398">x</a></span>, <span class="kwd">exists</span> <span class="id"><a name="M:399">M</a></span>, <span class="kwd">forall</span> <span class="id"><a name="X:400">X</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">X</span> -&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.kD">kD</a></span> <span class="id">x</span> <span class="id">X</span> &lt; <span class="id">M</span>%:<span class="id">E</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> `&lt;=` <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.XY">XY</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
<span class="id">move</span>=&gt; <span class="id">kD_ub</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_prod_measurableType">measurable_prod_measurableType</a></span>.<br/>
<span class="id">set</span> <span class="id">C</span> := [<span class="id">set</span> <span class="id">A</span> `*` <span class="id">B</span> | <span class="id"><a name="A:401">A</a></span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> &amp; <span class="id"><a name="B:402">B</a></span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span>].<br/>
<span class="id">have</span> <span class="id">CI</span> : <span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> <span class="id">_</span> [<span class="id">X1</span> <span class="id">mX1</span> [<span class="id">X2</span> <span class="id">mX2</span> &lt;-]] [<span class="id">Y1</span> <span class="id">mY1</span> [<span class="id">Y2</span> <span class="id">mY2</span> &lt;-]].<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">X1</span> `&amp;` <span class="id">Y1</span>); <span class="id">first</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableI">measurableI</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">X2</span> `&amp;` <span class="id">Y2</span>); [<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableI">measurableI</a></span>|<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setMI">setMI</a></span>].<br/>
<span class="id">have</span> <span class="id">CT</span> : <span class="id">C</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> =&gt; //; <span class="kwd">exists</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> =&gt; //; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setMTT">setMTT</a></span>.<br/>
<span class="id">have</span> <span class="id">CXY</span> : <span class="id">C</span> `&lt;=` <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.XY">XY</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">A</span> <span class="id">mA</span> [<span class="id">B</span> <span class="id">mB</span> &lt;-]]; <span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableM">measurableM</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.phiM">phiM</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#emeasurable_funM">emeasurable_funM</a></span> =&gt; //; <span class="id">first</span> <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableI">measurableI</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>; <span class="id">rewrite</span> (<span class="id">_</span> : \1<span class="id">_</span> <span class="id">_</span> = <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#mindic">mindic</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.R">R</a></span> <span class="id">mA</span>).<br/>
<span class="id">suff</span> <span class="id">monoB</span> : <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class">monotone_class</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.XY">XY</a></span> <span class="kwd">by</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset">monotone_class_subset</a></span>.<br/>
<span class="id">split</span> =&gt; //; [<span class="id">exact</span>: <span class="id">CXY</span>| |<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#xsection_ndseq_closed">xsection_ndseq_closed</a></span>].<br/>
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">BA</span> [<span class="id">mA</span> <span class="id">mphiA</span>] [<span class="id">mB</span> <span class="id">mphiB</span>]; <span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableD">measurableD</a></span>.<br/>
<span class="id">suff</span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.phi">phi</a></span> (<span class="id">A</span> `\` <span class="id">B</span>) = (<span class="kwd">fun</span> <span class="id"><a name="x:407">x</a></span> =&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.phi">phi</a></span> <span class="id">A</span> <span class="id">x</span> - <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.phi">phi</a></span> <span class="id">B</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; -&gt;; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#emeasurable_funB">emeasurable_funB</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel.phi">phi</a></span>/= <span class="id"><a href="mathcomp.classical.classical_sets.html#xsectionD">xsectionD</a></span>// <span class="id"><a href="mathcomp.analysis.measure.html#measureD">measureD</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIidr">setIidr</a></span>//; <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#le_xsection">le_xsection</a></span>.<br/>
- <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#measurable_xsection">measurable_xsection</a></span>.<br/>
- <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#measurable_xsection">measurable_xsection</a></span>.<br/>
- <span class="id">have</span> [<span class="id">M</span> <span class="id">kM</span>] := <span class="id">kD_ub</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">lt_le_trans</span> (<span class="id">kM</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span> <span class="id">A</span> <span class="id">x</span>) <span class="id">_</span>)) ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span>//.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#measurable_xsection">measurable_xsection</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel.xsection_kernel">xsection_kernel</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_kernel">measurable_prod_subset_kernel</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="measurable_fun_xsection_finite_kernel">measurable_fun_xsection_finite_kernel</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:408">d</a></span> <span class="id"><a name="d':409">d</a></span>' (<span class="id"><a name="X:410">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:411">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:412">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="measurable_fun_xsection_finite_kernel.k">k</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.R">R</a></span>.-<span class="id">fker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.Y">Y</a></span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.Y">Y</a></span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="measurable_fun_xsection_finite_kernel.phi">phi</a></span> <span class="id"><a name="A:414">A</a></span> := <span class="kwd">fun</span> <span class="id"><a name="x:415">x</a></span> =&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.k">k</a></span> <span class="id">x</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span> <span class="id">A</span> <span class="id">x</span>).<br/>
<span class="kwd">Let</span> <span class="id"><a name="measurable_fun_xsection_finite_kernel.XY">XY</a></span> := [<span class="id">set</span> <span class="id"><a name="A:416">A</a></span> | <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">A</span> /\ <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.X">X</a></span>] (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.phi">phi</a></span> <span class="id">A</span>)].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_xsection_finite_kernel">measurable_fun_xsection_finite_kernel</a></span> <span class="id"><a name="A:417">A</a></span> :<br/>
&nbsp;&nbsp;<span class="id">A</span> \<span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.X">X</a></span>] (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.phi">phi</a></span> <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
<span class="id">move</span>: <span class="id">A</span>; <span class="id">suff</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> `&lt;=` <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.XY">XY</a></span> <span class="kwd">by</span> <span class="id">move</span>=&gt; + <span class="id">A</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> =&gt; /[<span class="id">apply</span>] -[].<br/>
<span class="id">move</span>=&gt; /= <span class="id">A</span> <span class="id">mA</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.XY">XY</a></span>/=; <span class="id">split</span> =&gt; //; <span class="id">rewrite</span> (<span class="id">_</span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.phi">phi</a></span> <span class="id">_</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id"><a name="x:418">x</a></span> =&gt; <span class="id"><a href="mathcomp.analysis.measure.html#mrestr">mrestr</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.k">k</a></span> <span class="id">x</span>) <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span> <span class="id">A</span> <span class="id">x</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span>//=; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.measure.html#mrestr">mrestr</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIT">setIT</a></span>.<br/>
<span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_prod_subset_xsection_kernel">measurable_prod_subset_xsection_kernel</a></span> =&gt; // <span class="id">x</span>.<br/>
<span class="id">have</span> [<span class="id">r</span> <span class="id">hr</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel.k">k</a></span>; <span class="kwd">exists</span> <span class="id">r</span> =&gt; <span class="id">B</span> <span class="id">mB</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> (<span class="id">hr</span> <span class="id">x</span>)) // /<span class="id"><a href="mathcomp.analysis.measure.html#mrestr">mrestr</a></span> /= <span class="id"><a href="mathcomp.classical.classical_sets.html#setIT">setIT</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#le_measure">le_measure</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel">measurable_fun_xsection_finite_kernel</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="measurable_fun_integral_finite_sfinite">measurable_fun_integral_finite_sfinite</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:421">d</a></span> <span class="id"><a name="d':422">d</a></span>' (<span class="id"><a name="X:423">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:424">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:425">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="measurable_fun_integral_finite_sfinite.k">k</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.R">R</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_xsection_integral">measurable_fun_xsection_integral</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="l:427">l</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.R">R</a></span>})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k_:428">k_</a></span> : ({<span class="id">nnsfun</span> [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.Y">Y</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.R">R</a></span>})^<span class="id">nat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="ndk_:429">ndk_</a></span> : <span class="id">nondecreasing_seq</span> (<span class="id">k_</span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.Y">Y</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.R">R</a></span>)^<span class="id">nat</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k_k:431">k_k</a></span> : <span class="kwd">forall</span> <span class="id"><a name="z:430">z</a></span>, <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFin">EFin</a></span> \<span class="id">o</span> (<span class="id">k_</span> ^~ <span class="id">z</span>) --&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.k">k</a></span> <span class="id">z</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id"><a name="n:432">n</a></span> <span class="id"><a name="r:433">r</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span>] (<span class="kwd">fun</span> <span class="id"><a name="x:434">x</a></span> =&gt; <span class="id">l</span> <span class="id">x</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span> (<span class="id">k_</span> <span class="id">n</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) <span class="id">x</span>))) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span>] (<span class="kwd">fun</span> <span class="id"><a name="x:435">x</a></span> =&gt; \<span class="id">int</span>[<span class="id">l</span> <span class="id">x</span>]<span class="id">_y</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.k">k</a></span> (<span class="id">x</span>, <span class="id">y</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
<span class="id">move</span>=&gt; <span class="id">h</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id"><a name="x:437">x</a></span> =&gt; <span class="id">_</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id"><a name="x:438">x</a></span> =&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#limn_esup">limn_esup</a></span> (<span class="kwd">fun</span> <span class="id"><a name="n:439">n</a></span> =&gt; \<span class="id">int</span>[<span class="id">l</span> <span class="id">x</span>]<span class="id">_y</span> (<span class="id">k_</span> <span class="id">n</span> (<span class="id">x</span>, <span class="id">y</span>))%:<span class="id">E</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="mathcomp.analysis.topology.html#lim">lim</a></span> (<span class="kwd">fun</span> <span class="id"><a name="n:449">n</a></span> =&gt; \<span class="id">int</span>[<span class="id">l</span> <span class="id">x</span>]<span class="id">_y</span> (<span class="id">k_</span> <span class="id">n</span> (<span class="id">x</span>, <span class="id">y</span>))%:<span class="id">E</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_limn_esupE">is_cvg_limn_esupE</a></span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.sequences.html#ereal_nondecreasing_is_cvgn">ereal_nondecreasing_is_cvgn</a></span> =&gt; <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_le_integral">ge0_le_integral</a></span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.boolp.html#lefP">lefP</a></span>/<span class="id">ndk_</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#monotone_convergence">monotone_convergence</a></span>//.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> =&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym</a></span>/<span class="id"><a href="mathcomp.analysis.topology.html#cvg_lim">cvg_lim</a></span> =&gt; //; <span class="id">exact</span>: <span class="id">k_k</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">_</span> <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.boolp.html#lefP">lefP</a></span>/<span class="id">ndk_</span>.<br/>
<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#measurable_fun_limn_esup">measurable_fun_limn_esup</a></span> =&gt; <span class="id">n</span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span>](<span class="id">_</span> : <span class="id">_</span> = (<span class="kwd">fun</span> <span class="id"><a name="x:457">x</a></span> =&gt; \<span class="id">int</span>[<span class="id">l</span> <span class="id">x</span>]<span class="id">_y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id">sum_</span>(<span class="id"><a name="r:459">r</a></span> \<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#range">range</a></span> (<span class="id">k_</span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">r</span> * \1<span class="id">_</span>(<span class="id">k_</span> <span class="id">n</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) (<span class="id">x</span>, <span class="id">y</span>))%:<span class="id">E</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> =&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfunE">fimfunE</a></span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span>](<span class="id">_</span> : <span class="id">_</span> = (<span class="kwd">fun</span> <span class="id"><a name="x:476">x</a></span> =&gt; \<span class="id">sum_</span>(<span class="id"><a name="r:477">r</a></span> \<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#range">range</a></span> (<span class="id">k_</span> <span class="id">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id">int</span>[<span class="id">l</span> <span class="id">x</span>]<span class="id">_y</span> (<span class="id">r</span> * \1<span class="id">_</span>(<span class="id">k_</span> <span class="id">n</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) (<span class="id">x</span>, <span class="id">y</span>))%:<span class="id">E</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_integral_fsum">ge0_integral_fsum</a></span>//.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> =&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.ereal.html#fsumEFin">fsumEFin</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> =&gt; [//|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">m</span> <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#nnfun_muleindic_ge0">nnfun_muleindic_ge0</a></span>.<br/>
<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#emeasurable_fun_fsum">emeasurable_fun_fsum</a></span> =&gt; // <span class="id">r</span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span>](<span class="id">_</span> : <span class="id">_</span> = (<span class="kwd">fun</span> <span class="id"><a name="x:498">x</a></span> =&gt; <span class="id">r</span>%:<span class="id">E</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">int</span>[<span class="id">l</span> <span class="id">x</span>]<span class="id">_y</span> (\1<span class="id">_</span>(<span class="id">k_</span> <span class="id">n</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) (<span class="id">x</span>, <span class="id">y</span>))%:<span class="id">E</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span>; <span class="id">under</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinM">EFinM</a></span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">r0</span>|<span class="id">r0</span>] := <span class="id">leP</span> 0%<span class="id">R</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_integralZl">ge0_integralZl</a></span>//; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral0_eq">integral0_eq</a></span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#preimage_nnfun0">preimage_nnfun0</a></span>// <span class="id"><a href="mathcomp.analysis.numfun.html#indic0">indic0</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mule0">mule0</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral0_eq">integral0_eq</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mule0">mule0</a></span>// =&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#preimage_nnfun0">preimage_nnfun0</a></span>// <span class="id"><a href="mathcomp.analysis.numfun.html#indic0">indic0</a></span>.<br/>
<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#measurable_funeM">measurable_funeM</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id"><a name="x:505">x</a></span> =&gt; <span class="id">_</span>) = (<span class="kwd">fun</span> <span class="id"><a name="x:506">x</a></span> =&gt; <span class="id">l</span> <span class="id">x</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span> (<span class="id">k_</span> <span class="id">n</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) <span class="id">x</span>))).<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">h</span>.<br/>
<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral_indic">integral_indic</a></span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id"><a name="x:511">x</a></span> =&gt; <span class="id">_</span>) = <span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span> (<span class="id">k_</span> <span class="id">n</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#measurable_xsection">measurable_xsection</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span>=&gt; <span class="id">y</span>/= /[!<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>].<br/>
<span class="id">congr</span> (<span class="id">l</span> <span class="id">x</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">y1</span>/=; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span>/= <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#propext">propext</a></span>; <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_integral_finite_kernel">measurable_fun_integral_finite_kernel</a></span> (<span class="id"><a name="l:514">l</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.R">R</a></span>.-<span class="id">fker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.Y">Y</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k0:516">k0</a></span> : <span class="kwd">forall</span> <span class="id"><a name="z:515">z</a></span>, 0 &lt;= <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.k">k</a></span> <span class="id">z</span>) (<span class="id"><a name="mk:517">mk</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.Y">Y</a></span>] <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.k">k</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span>] (<span class="kwd">fun</span> <span class="id"><a name="x:518">x</a></span> =&gt; \<span class="id">int</span>[<span class="id">l</span> <span class="id">x</span>]<span class="id">_y</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.k">k</a></span> (<span class="id">x</span>, <span class="id">y</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
<span class="id">have</span> [<span class="id">k_</span> [<span class="id">ndk_</span> <span class="id">k_k</span>]] := <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#approximation">approximation</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span> <span class="id">mk</span> (<span class="kwd">fun</span> <span class="id"><a name="x:520">x</a></span> <span class="id">_</span> =&gt; <span class="id">k0</span> <span class="id">x</span>).<br/>
<span class="id">apply</span>: (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_integral">measurable_fun_xsection_integral</a></span> <span class="id">ndk_</span> (<span class="id">k_k</span> ^~ <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">Logic.I</a></span>)) =&gt; <span class="id">n</span> <span class="id">r</span>.<br/>
<span class="id">have</span> [<span class="id">l_</span> <span class="id">hl_</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> <span class="id">l</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel">measurable_fun_xsection_finite_kernel</a></span> =&gt; // /[!<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_integral_sfinite_kernel">measurable_fun_integral_sfinite_kernel</a></span> (<span class="id"><a name="l:521">l</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.R">R</a></span>.-<span class="id">sfker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.Y">Y</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k0:523">k0</a></span> : <span class="kwd">forall</span> <span class="id"><a name="t:522">t</a></span>, 0 &lt;= <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.k">k</a></span> <span class="id">t</span>) (<span class="id"><a name="mk:524">mk</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.Y">Y</a></span>] <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.k">k</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.X">X</a></span>] (<span class="kwd">fun</span> <span class="id"><a name="x:525">x</a></span> =&gt; \<span class="id">int</span>[<span class="id">l</span> <span class="id">x</span>]<span class="id">_y</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite.k">k</a></span> (<span class="id">x</span>, <span class="id">y</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
<span class="id">have</span> [<span class="id">k_</span> [<span class="id">ndk_</span> <span class="id">k_k</span>]] := <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#approximation">approximation</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span> <span class="id">mk</span> (<span class="kwd">fun</span> <span class="id"><a name="xy:527">xy</a></span> <span class="id">_</span> =&gt; <span class="id">k0</span> <span class="id">xy</span>).<br/>
<span class="id">apply</span>: (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_integral">measurable_fun_xsection_integral</a></span> <span class="id">ndk_</span> (<span class="id">k_k</span> ^~ <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">Logic.I</a></span>)) =&gt; <span class="id">n</span> <span class="id">r</span>.<br/>
<span class="id">have</span> [<span class="id">l_</span> <span class="id">hl_</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite_kernel">sfinite_kernel</a></span> <span class="id">l</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id"><a name="x:528">x</a></span> =&gt; <span class="id">_</span>) = (<span class="kwd">fun</span> <span class="id"><a name="x:529">x</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#mseries">mseries</a></span> (<span class="id">l_</span> ^~ <span class="id">x</span>) 0 (<span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span> (<span class="id">k_</span> <span class="id">n</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) <span class="id">x</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">hl_</span>//; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#measurable_xsection">measurable_xsection</a></span>.<br/>
<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_emeasurable_fun_sum">ge0_emeasurable_fun_sum</a></span> =&gt; // <span class="id">m</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_finite_kernel">measurable_fun_xsection_finite_kernel</a></span> =&gt; // /[!<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_sfinite">measurable_fun_integral_finite_sfinite</a></span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_integral">measurable_fun_xsection_integral</a></span> {<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>} <span class="id">k</span> <span class="id">l</span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_kernel">measurable_fun_integral_finite_kernel</a></span> {<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>} <span class="id">k</span> <span class="id">l</span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_sfinite_kernel">measurable_fun_integral_sfinite_kernel</a></span> {<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>} <span class="id">k</span> <span class="id">l</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="kdirac">kdirac</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:534">d</a></span> <span class="id"><a name="d':535">d</a></span>' (<span class="id"><a name="X:536">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:537">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:538">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="kdirac.f">f</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.X">X</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.Y">Y</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="kdirac">kdirac</a></span> (<span class="id"><a name="mf:540">mf</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.X">X</a></span>] <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.f">f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.R">R</a></span>} :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id"><a name="x:541">x</a></span> =&gt; [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measure.Exports.measure">measure</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#dirac">dirac</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.f">f</a></span> <span class="id">x</span>)].<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="kdirac.mf">mf</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.X">X</a></span>] <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.f">f</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="kdirac.measurable_fun_kdirac">measurable_fun_kdirac</a></span> <span class="id"><a name="U:543">U</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.X">X</a></span>] (<span class="id"><a href="mathcomp.analysis.kernel.html#kdirac">kdirac</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.mf">mf</a></span> ^~ <span class="id">U</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
<span class="id">move</span>=&gt; <span class="id">mU</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id"><a name="x:544">x</a></span> =&gt; <span class="id">_</span>) = <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#mindic">mindic</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.R">R</a></span> <span class="id">mU</span> \<span class="id">o</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.f">f</a></span>)//; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_90">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.analysis.kernel.html#Build">isKernel.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kdirac">kdirac</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.mf">mf</a></span>)<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.measurable_fun_kdirac">measurable_fun_kdirac</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="kdirac.kdirac_prob">kdirac_prob</a></span> <span class="id"><a name="x:547">x</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac">kdirac</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.mf">mf</a></span> <span class="id">x</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> = 1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#kdirac">kdirac</a></span>/= <span class="id"><a href="mathcomp.analysis.measure.html#diracT">diracT</a></span>. Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_92">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.analysis.kernel.html#Build">Kernel_isProbability.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.kernel.html#kdirac">kdirac</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.mf">mf</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac.kdirac_prob">kdirac_prob</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac">kdirac</a></span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kdirac">kdirac</a></span> {<span class="id">d</span> <span class="id">d</span>' <span class="id">X</span> <span class="id">Y</span> <span class="id">R</span> <span class="id">f</span>}.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="dist_salgebra_instance">dist_salgebra_instance</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:548">d</a></span> (<span class="id"><a name="T:549">T</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="R:550">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="dist_salgebra_instance.p0">p0</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Probability.Exports.probability">probability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.T">T</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.R">R</a></span> := [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Probability.Exports.probability">probability</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#dirac">dirac</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#point">point</a></span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="prob_pointed">prob_pointed</a></span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Class">Pointed.Class</a></span><br/>
&nbsp;&nbsp;(<span class="id">Choice.Class</span> <span class="id"><a href="mathcomp.classical.boolp.html#gen_eqMixin">gen_eqMixin</a></span> (<span class="id">Choice.Class</span> <span class="id"><a href="mathcomp.classical.boolp.html#gen_eqMixin">gen_eqMixin</a></span> <span class="id"><a href="mathcomp.classical.boolp.html#gen_choiceMixin">gen_choiceMixin</a></span>)) <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.p0">p0</a></span>.<br/>
<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="probability_eqType">probability_eqType</a></span> := <span class="id">EqType</span> (<span class="id"><a href="mathcomp.analysis.measure.html#Probability.Exports.probability">probability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.T">T</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.R">R</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#prob_pointed">prob_pointed</a></span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="probability_choiceType">probability_choiceType</a></span> := <span class="id">ChoiceType</span> (<span class="id"><a href="mathcomp.analysis.measure.html#Probability.Exports.probability">probability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.T">T</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.R">R</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#prob_pointed">prob_pointed</a></span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="probability_ptType">probability_ptType</a></span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.PointedType">PointedType</a></span> (<span class="id"><a href="mathcomp.analysis.measure.html#Probability.Exports.probability">probability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.T">T</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.R">R</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#prob_pointed">prob_pointed</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mset">mset</a></span> (<span class="id"><a name="U:551">U</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.T">T</a></span>) (<span class="id"><a name="r:552">r</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.R">R</a></span>) := [<span class="id">set</span> <span class="id"><a name="mu:553">mu</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Probability.Exports.probability">probability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.T">T</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.R">R</a></span> | <span class="id">mu</span> <span class="id">U</span> &lt; <span class="id">r</span>%:<span class="id">E</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lt0_mset">lt0_mset</a></span> (<span class="id"><a name="U:554">U</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.T">T</a></span>) (<span class="id"><a name="r:555">r</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.R">R</a></span>) : (<span class="id">r</span> &lt; 0)%<span class="id">R</span> -&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#mset">mset</a></span> <span class="id">U</span> <span class="id">r</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
<span class="id">move</span>=&gt; <span class="id">r0</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; // <span class="id">x</span>/=.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>; <span class="id">rewrite</span> -<span class="id">leNgt</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> 0)// <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> <span class="id">ltW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="gt1_mset">gt1_mset</a></span> (<span class="id"><a name="U:556">U</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.T">T</a></span>) (<span class="id"><a name="r:557">r</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.R">R</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; (1 &lt; <span class="id">r</span>)%<span class="id">R</span> -&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#mset">mset</a></span> <span class="id">U</span> <span class="id">r</span> = [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.measure.html#Probability.Exports.probability">probability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.T">T</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.R">R</a></span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
<span class="id">move</span>=&gt; <span class="id">mU</span> <span class="id">r1</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; // <span class="id">x</span>/= <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#mset">mset</a></span>/= (<span class="id">le_lt_trans</span> (<span class="id"><a href="mathcomp.analysis.measure.html#probability_le1">probability_le1</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="pset">pset</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.analysis.measure.html#Probability.Exports.probability">probability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.T">T</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance.R">R</a></span>)) :=<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#mset">mset</a></span> <span class="id">U</span> <span class="id">r</span> | <span class="id"><a name="r:558">r</a></span> <span class="kwd">in</span> `[0%<span class="id">R</span>,1%<span class="id">R</span>] &amp; <span class="id"><a name="U:559">U</a></span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="pprobability">pprobability</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#pset">pset</a></span>.-<span class="id">sigma</span> :=<br/>
&nbsp;&nbsp;[<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#salgebraType">salgebraType</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#pset">pset</a></span>].<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#dist_salgebra_instance">dist_salgebra_instance</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="kprobability">kprobability</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:560">d</a></span> <span class="id"><a name="d':561">d</a></span>' (<span class="id"><a name="X:562">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:563">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:564">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="kprobability.P">P</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.X">X</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#pprobability">pprobability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.R">R</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="kprobability">kprobability</a></span> (<span class="id"><a name="mP:566">mP</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.X">X</a></span>] <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.P">P</a></span>)<br/>
&nbsp;&nbsp;: <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.R">R</a></span>} := <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.P">P</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="kprobability.mP">mP</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.X">X</a></span>] <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.P">P</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="kprobability.measurable_fun_kprobability">measurable_fun_kprobability</a></span> <span class="id"><a name="U:568">U</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.X">X</a></span>] (<span class="id"><a href="mathcomp.analysis.kernel.html#kprobability">kprobability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.mP">mP</a></span> ^~ <span class="id">U</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
<span class="id">move</span>=&gt; <span class="id">mU</span>.<br/>
<span class="id">apply</span>: (<span class="id"><a href="mathcomp.analysis.measure.html#measurability">measurability</a></span> (<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#ErealGenInftyO.measurableE">ErealGenInftyO.measurableE</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.R">R</a></span>)) =&gt; <span class="id">_</span> /= -[<span class="id">_</span> [<span class="id">r</span> -&gt;] &lt;-].<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_itv_infty_o">preimage_itv_infty_o</a></span> -/(<span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.P">P</a></span> @^-1` <span class="id"><a href="mathcomp.analysis.kernel.html#mset">mset</a></span> <span class="id">U</span> <span class="id">r</span>).<br/>
<span class="id">have</span> [<span class="id">r0</span>|<span class="id">r0</span>] := <span class="id">leP</span> 0%<span class="id">R</span> <span class="id">r</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.kernel.html#lt0_mset">lt0_mset</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_set0">preimage_set0</a></span>.<br/>
<span class="id">have</span> [<span class="id">r1</span>|<span class="id">r1</span>] := <span class="id">leP</span> <span class="id">r</span> 1%<span class="id">R</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.kernel.html#gt1_mset">gt1_mset</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_setT">preimage_setT</a></span>.<br/>
<span class="id">move</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.mP">mP</a></span> =&gt; /(<span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#mset">mset</a></span> <span class="id">U</span> <span class="id">r</span>)); <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span>; <span class="id">apply</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#sub_sigma_algebra">sub_sigma_algebra</a></span>; <span class="kwd">exists</span> <span class="id">r</span> =&gt; /=; [<span class="id">rewrite</span> <span class="id">in_itv</span>/= <span class="id">r0</span>|<span class="kwd">exists</span> <span class="id">U</span>].<br/>
Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_101">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.kernel.html#Build">isKernel.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kprobability">kprobability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.mP">mP</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.measurable_fun_kprobability">measurable_fun_kprobability</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="kprobability.kprobability_prob">kprobability_prob</a></span> <span class="id"><a name="x:569">x</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability">kprobability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.mP">mP</a></span> <span class="id">x</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.Y">Y</a></span>] = 1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#kprobability">kprobability</a></span>/= <span class="id"><a href="mathcomp.analysis.measure.html#probability_setT">probability_setT</a></span>. Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_103">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.kernel.html#Build">Kernel_isProbability.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kprobability">kprobability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.mP">mP</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability.kprobability_prob">kprobability_prob</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kprobability">kprobability</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="kadd">kadd</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:570">d</a></span> <span class="id"><a name="d':571">d</a></span>' (<span class="id"><a name="X:572">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:573">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:574">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variables</span> <span class="id"><a name="kadd.k1">k1</a></span> <span class="id"><a name="kadd.k2">k2</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kadd.R">R</a></span>.-<span class="id">ker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kadd.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kadd.Y">Y</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="kadd">kadd</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kadd.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kadd.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kadd.R">R</a></span>} :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id"><a name="x:577">x</a></span> =&gt; [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measure.Exports.measure">measure</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_add">measure_add</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kadd.k1">k1</a></span> <span class="id">x</span>) (<span class="id"><a href="mathcomp.analysis.kernel.html#kadd.k2">k2</a></span> <span class="id">x</span>)].<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="kadd.measurable_fun_kadd">measurable_fun_kadd</a></span> <span class="id"><a name="U:578">U</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kadd.X">X</a></span>] (<span class="id"><a href="mathcomp.analysis.kernel.html#kadd">kadd</a></span> ^~ <span class="id">U</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
<span class="id">move</span>=&gt; <span class="id">mU</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#kadd">kadd</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id">_</span>) = (<span class="kwd">fun</span> <span class="id"><a name="x:579">x</a></span> =&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kadd.k1">k1</a></span> <span class="id">x</span> <span class="id">U</span> + <span class="id"><a href="mathcomp.analysis.kernel.html#kadd.k2">k2</a></span> <span class="id">x</span> <span class="id">U</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.measure.html#measure_addE">measure_addE</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#emeasurable_funD">emeasurable_funD</a></span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_116">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.kernel.html#Build">isKernel.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kadd">kadd</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kadd.measurable_fun_kadd">measurable_fun_kadd</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kadd">kadd</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="sfkadd">sfkadd</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:582">d</a></span> <span class="id"><a name="d':583">d</a></span>' (<span class="id"><a name="X:584">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:585">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:586">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variables</span> <span class="id"><a name="sfkadd.k1">k1</a></span> <span class="id"><a name="sfkadd.k2">k2</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.R">R</a></span>.-<span class="id">sfker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.Y">Y</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="sfkadd.sfinite_kadd">sfinite_kadd</a></span> : <span class="kwd">exists2</span> <span class="id"><a name="k_:589">k_</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.R">R</a></span>.-<span class="id">ker</span> <span class="id">_</span> ~&gt; <span class="id">_</span>)^<span class="id">nat</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id"><a name="n:590">n</a></span>, <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span> (<span class="id">k_</span> <span class="id">n</span>) &amp;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id"><a name="x:592">x</a></span> <span class="id"><a name="U:593">U</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#kadd">kadd</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.k1">k1</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.k2">k2</a></span> <span class="id">x</span> <span class="id">U</span> = <span class="id"><a href="mathcomp.analysis.measure.html#mseries">mseries</a></span> (<span class="id">k_</span> ^~ <span class="id">x</span>) 0 <span class="id">U</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
<span class="id">have</span> [<span class="id">f1</span> <span class="id">hk1</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite_kernel">sfinite_kernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.k1">k1</a></span>; <span class="id">have</span> [<span class="id">f2</span> <span class="id">hk2</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite_kernel">sfinite_kernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.k2">k2</a></span>.<br/>
<span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id"><a name="n:594">n</a></span> =&gt; [<span class="id">the</span> <span class="id">_</span>.-<span class="id">ker</span> <span class="id">_</span> ~&gt; <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kadd">kadd</a></span> (<span class="id">f1</span> <span class="id">n</span>) (<span class="id">f2</span> <span class="id">n</span>)]).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">r1</span> <span class="id">f1r1</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> (<span class="id">f1</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">r2</span> <span class="id">f2r2</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> (<span class="id">f2</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">r1</span> + <span class="id">r2</span>)%<span class="id">R</span> =&gt; <span class="id">x</span>/=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.measure.html#msum">msum</a></span> !<span class="id">big_ord_recr</span>/= <span class="id">big_ord0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#add0e">add0e</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinD">EFinD</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_add">lte_add</a></span>.<br/>
<span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">U</span> <span class="id">mU</span>.<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#kadd">kadd</a></span>/= -/(<span class="id"><a href="mathcomp.analysis.measure.html#measure_add">measure_add</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.k1">k1</a></span> <span class="id">x</span>) (<span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.k2">k2</a></span> <span class="id">x</span>)) <span class="id"><a href="mathcomp.analysis.measure.html#measure_addE">measure_addE</a></span> <span class="id">hk1</span>//= <span class="id">hk2</span>//=.<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.measure.html#mseries">mseries</a></span> -<span class="id"><a href="mathcomp.analysis.sequences.html#nneseriesD">nneseriesD</a></span>//; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.sequences.html#eq_eseriesr">eq_eseriesr</a></span> =&gt; <span class="id">n</span> <span class="id">_</span> /=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -/(<span class="id"><a href="mathcomp.analysis.measure.html#measure_add">measure_add</a></span> (<span class="id">f1</span> <span class="id">n</span> <span class="id">x</span>) (<span class="id">f2</span> <span class="id">n</span> <span class="id">x</span>)) <span class="id"><a href="mathcomp.analysis.measure.html#measure_addE">measure_addE</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="sfkadd.hb_instance_118">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id"><a name="t:596">t</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#Build">Kernel_isSFinite_subdef.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kadd">kadd</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.k1">k1</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.k2">k2</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd.sfinite_kadd">sfinite_kadd</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#sfkadd">sfkadd</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="fkadd">fkadd</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:597">d</a></span> <span class="id"><a name="d':598">d</a></span>' (<span class="id"><a name="X:599">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:600">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:601">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variables</span> <span class="id"><a name="fkadd.k1">k1</a></span> <span class="id"><a name="fkadd.k2">k2</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.R">R</a></span>.-<span class="id">fker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.Y">Y</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="fkadd.kadd_finite_uub">kadd_finite_uub</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kadd">kadd</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.k1">k1</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.k2">k2</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
<span class="id">have</span> [<span class="id">f1</span> <span class="id">hk1</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.k1">k1</a></span>; <span class="id">have</span> [<span class="id">f2</span> <span class="id">hk2</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.k2">k2</a></span>.<br/>
<span class="kwd">exists</span> (<span class="id">f1</span> + <span class="id">f2</span>)%<span class="id">R</span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#kadd">kadd</a></span> /=.<br/>
<span class="id">rewrite</span> -/(<span class="id"><a href="mathcomp.analysis.measure.html#measure_add">measure_add</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.k1">k1</a></span> <span class="id">x</span>) (<span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.k2">k2</a></span> <span class="id">x</span>)).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_addE">measure_addE</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinD">EFinD</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_add">lte_add</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="fkadd.hb_instance_121">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id"><a name="t:604">t</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#Build">Kernel_isFinite.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kadd">kadd</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.k1">k1</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.k2">k2</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd.kadd_finite_uub">kadd_finite_uub</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#fkadd">fkadd</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_mnormalize">measurable_fun_mnormalize</a></span> <span class="id"><a name="d:605">d</a></span> <span class="id"><a name="d':606">d</a></span>' (<span class="id"><a name="X:607">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="Y:608">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:609">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id"><a name="k:610">k</a></span> : <span class="id">R</span>.-<span class="id">ker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id">X</span>] (<span class="kwd">fun</span> <span class="id"><a name="x:611">x</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Probability.Exports.probability">probability</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#mnormalize">mnormalize</a></span> (<span class="id">k</span> <span class="id">x</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#point">point</a></span>] : <span class="id"><a href="mathcomp.analysis.kernel.html#pprobability">pprobability</a></span> <span class="id">Y</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
<span class="id">apply</span>: (@<span class="id"><a href="mathcomp.analysis.measure.html#measurability">measurability</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;(@<span class="id"><a href="mathcomp.analysis.kernel.html#pset">pset</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#pprobability">pprobability</a></span> <span class="id">Y</span> <span class="id">R</span>)))) =&gt; //.<br/>
<span class="id">move</span>=&gt; <span class="id">_</span> -[<span class="id">_</span> [<span class="id">r</span> <span class="id">r01</span>] [<span class="id">Ys</span> <span class="id">mYs</span> &lt;-]] &lt;-.<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.measure.html#mnormalize">mnormalize</a></span> /<span class="id"><a href="mathcomp.analysis.kernel.html#mset">mset</a></span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#preimage">preimage</a></span>/=.<br/>
<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#emeasurable_fun_infty_o">emeasurable_fun_infty_o</a></span> =&gt; //.<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.measure.html#mnormalize">mnormalize</a></span>/=.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id"><a name="x:612">x</a></span> =&gt; <span class="id">_</span>) = (<span class="kwd">fun</span> <span class="id"><a name="x:613">x</a></span> =&gt; <span class="kwd">if</span> (<span class="id">k</span> <span class="id">x</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> == 0) || (<span class="id">k</span> <span class="id">x</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> == +<span class="id">oo</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> \<span class="id">d_point</span> <span class="id">Ys</span> <span class="kwd">else</span> <span class="id">k</span> <span class="id">x</span> <span class="id">Ys</span> * ((<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">fine</a></span> (<span class="id">k</span> <span class="id">x</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>))^-1)%:<span class="id">E</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span>/=; <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span>.<br/>
<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun_if">measurable_fun_if</a></span> =&gt; //.<br/>
- <span class="id">apply</span>: (<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun_bool">measurable_fun_bool</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span>) =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> @^-1` <span class="id">_</span> = [<span class="id">set</span> <span class="id"><a name="t:618">t</a></span> | <span class="id">k</span> <span class="id">t</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> == 0] `|`<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">set</span> <span class="id"><a name="t:619">t</a></span> | <span class="id">k</span> <span class="id">t</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> == +<span class="id">oo</span>]); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span>=&gt; <span class="id">x</span> /= /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orP">orP</a></span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableU">measurableU</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kernel_measurable_eq_cst">kernel_measurable_eq_cst</a></span>.<br/>
- <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#emeasurable_funM">emeasurable_funM</a></span>; <span class="id">first</span> <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurable_funTS">measurable_funTS</a></span>/<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id"><a href="mathcomp.analysis.measure.html#measurable_comp">measurable_comp</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">set</span> <span class="id"><a name="r:624">r</a></span> : <span class="id">R</span> | <span class="id">r</span> != 0%<span class="id">R</span>]).<br/>
&nbsp;&nbsp;+ <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#open_measurable">open_measurable</a></span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; /= <span class="id">_</span> [<span class="id">x</span> /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#norP">norP</a></span>[<span class="id">s0</span> <span class="id">soo</span>]] &lt;-; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#eqe">eqe</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fineK">fineK</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ge0_fin_numE">ge0_fin_numE</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ltey">ltey</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#open_continuous_measurable_fun">open_continuous_measurable_fun</a></span> =&gt; //; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#in_setP">in_setP</a></span> =&gt; <span class="id">x</span> /= <span class="id">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.normedtype.html#inv_continuous">inv_continuous</a></span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> =&gt; //; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurable_funS">measurable_funS</a></span>/<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="knormalize">knormalize</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:626">d</a></span> <span class="id"><a name="d':627">d</a></span>' (<span class="id"><a name="X:628">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:629">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:630">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="knormalize.f">f</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.R">R</a></span>.-<span class="id">ker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.Y">Y</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="knormalize">knormalize</a></span> (<span class="id"><a name="P:632">P</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Probability.Exports.probability">probability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.R">R</a></span>) : <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.R">R</a></span>} :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id"><a name="x:633">x</a></span> =&gt; [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measure.Exports.measure">measure</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#mnormalize">mnormalize</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.f">f</a></span> <span class="id">x</span>) <span class="id">P</span>].<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="knormalize.P">P</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Probability.Exports.probability">probability</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.Y">Y</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.R">R</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="knormalize.measurable_fun_knormalize">measurable_fun_knormalize</a></span> <span class="id"><a name="U:635">U</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.X">X</a></span>] (<span class="id"><a href="mathcomp.analysis.kernel.html#knormalize">knormalize</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.P">P</a></span> ^~ <span class="id">U</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
<span class="id">move</span>=&gt; <span class="id">mU</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#knormalize">knormalize</a></span>/= /<span class="id"><a href="mathcomp.analysis.measure.html#mnormalize">mnormalize</a></span> /=.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id">_</span>) = (<span class="kwd">fun</span> <span class="id"><a name="x:636">x</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.f">f</a></span> <span class="id">x</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> == 0 <span class="kwd">then</span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.P">P</a></span> <span class="id">U</span> <span class="kwd">else</span> <span class="kwd">if</span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.f">f</a></span> <span class="id">x</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> == +<span class="id">oo</span> <span class="kwd">then</span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.P">P</a></span> <span class="id">U</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.f">f</a></span> <span class="id">x</span> <span class="id">U</span> * (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">fine</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.f">f</a></span> <span class="id">x</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>))^-1%:<span class="id">E</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span>; <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> =&gt; [/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orP">orP</a></span>[-&gt;//|-&gt;]|]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negb_or">negb_or</a></span>=&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> -&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> -&gt;].<br/>
<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun_if">measurable_fun_if</a></span> =&gt; //; [<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kernel_measurable_fun_eq_cst">kernel_measurable_fun_eq_cst</a></span>|].<br/>
<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun_if">measurable_fun_if</a></span> =&gt; //.<br/>
- <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.X">X</a></span>](<span class="id">_</span> : <span class="id">_</span> = [<span class="id">set</span> <span class="id"><a name="t:639">t</a></span> | <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.f">f</a></span> <span class="id">t</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> != 0]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kernel_measurable_neq_cst">kernel_measurable_neq_cst</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; [<span class="id">x</span> /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbT">negbT</a></span>//|<span class="id">x</span> /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span>].<br/>
- <span class="id">apply</span>: (@<span class="id"><a href="mathcomp.analysis.measure.html#measurable_funS">measurable_funS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>) =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kernel_measurable_fun_eq_cst">kernel_measurable_fun_eq_cst</a></span>.<br/>
- <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#emeasurable_funM">emeasurable_funM</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> := <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.f">f</a></span> <span class="id">U</span> <span class="id">mU</span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_funS">measurable_funS</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id"><a href="mathcomp.analysis.measure.html#measurable_comp">measurable_comp</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">set</span> <span class="id"><a name="r:643">r</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.R">R</a></span> | <span class="id">r</span> != 0%<span class="id">R</span>]) =&gt; //.<br/>
&nbsp;&nbsp;+ <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#open_measurable">open_measurable</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">move</span>=&gt; /= <span class="id">r</span> [<span class="id">t</span>] [] [<span class="id">_</span> <span class="id">ft0</span>] <span class="id">ftoo</span> <span class="id">ftr</span>; <span class="id">apply</span>/<span class="id">eqP</span> =&gt; <span class="id">r0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: (<span class="id">ftr</span>); <span class="id">rewrite</span> <span class="id">r0</span> =&gt; /<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine_eq0">fine_eq0</a></span> ?<span class="id">ft0</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ge0_fin_numE">ge0_fin_numE</a></span>// <span class="id">lt_neqAle</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span> <span class="id">ftoo</span>.<br/>
&nbsp;&nbsp;+ <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#open_continuous_measurable_fun">open_continuous_measurable_fun</a></span> =&gt; //; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#in_setP">in_setP</a></span> =&gt; <span class="id">x</span> /= <span class="id">x0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.normedtype.html#inv_continuous">inv_continuous</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> =&gt; //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> := <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.f">f</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_funS">measurable_funS</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_128">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.analysis.kernel.html#Build">isKernel.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#knormalize">knormalize</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.P">P</a></span>)<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.measurable_fun_knormalize">measurable_fun_knormalize</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="knormalize.knormalize1">knormalize1</a></span> <span class="id"><a name="x:645">x</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize">knormalize</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.P">P</a></span> <span class="id">x</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.Y">Y</a></span>] = 1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#knormalize">knormalize</a></span>/= <span class="id"><a href="mathcomp.analysis.measure.html#probability_setT">probability_setT</a></span>. Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_130">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.kernel.html#Build">Kernel_isProbability.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.kernel.html#knormalize">knormalize</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.P">P</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize.knormalize1">knormalize1</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#knormalize">knormalize</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="kcomp_def">kcomp_def</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d1:646">d1</a></span> <span class="id"><a name="d2:647">d2</a></span> <span class="id"><a name="d3:648">d3</a></span> (<span class="id"><a name="X:649">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d1</span>) (<span class="id"><a name="Y:650">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d2</span>)<br/>
&nbsp;&nbsp;(<span class="id"><a name="Z:651">Z</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d3</span>) (<span class="id"><a name="R:652">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="kcomp_def.l">l</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_def.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_def.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_def.R">R</a></span>}.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="kcomp_def.k">k</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_def.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_def.Y">Y</a></span>)%<span class="id">type</span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_def.Z">Z</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_def.R">R</a></span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="kcomp">kcomp</a></span> <span class="id"><a name="x:655">x</a></span> <span class="id"><a name="U:656">U</a></span> := \<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_def.l">l</a></span> <span class="id">x</span>]<span class="id">_y</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_def.k">k</a></span> (<span class="id">x</span>, <span class="id">y</span>) <span class="id">U</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_def">kcomp_def</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="kcomp_is_measure">kcomp_is_measure</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d1:658">d1</a></span> <span class="id"><a name="d2:659">d2</a></span> <span class="id"><a name="d3:660">d3</a></span> (<span class="id"><a name="X:661">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d1</span>) (<span class="id"><a name="Y:662">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d2</span>)<br/>
&nbsp;(<span class="id"><a name="Z:663">Z</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d3</span>) (<span class="id"><a name="R:664">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="kcomp_is_measure.l">l</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.R">R</a></span>.-<span class="id">ker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.Y">Y</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="kcomp_is_measure.k">k</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.R">R</a></span>.-<span class="id">ker</span> [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.Y">Y</a></span>] ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="kcomp_is_measure.kcomp0">kcomp0</a></span> <span class="id"><a name="x:667">x</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.k">k</a></span> <span class="id">x</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span> (<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> 0)) ?<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral0">integral0</a></span>// =&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure0">measure0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="kcomp_is_measure.kcomp_ge0">kcomp_ge0</a></span> <span class="id"><a name="x:668">x</a></span> <span class="id"><a name="U:669">U</a></span> : 0 &lt;= <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.k">k</a></span> <span class="id">x</span> <span class="id">U</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
 <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral_ge0">integral_ge0</a></span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="kcomp_is_measure.kcomp_sigma_additive">kcomp_sigma_additive</a></span> <span class="id"><a name="x:670">x</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#semi_sigma_additive">semi_sigma_additive</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.k">k</a></span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
<span class="id">move</span>=&gt; <span class="id">U</span> <span class="id">mU</span> <span class="id">tU</span> <span class="id">mUU</span>; <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> --&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.X">X</a></span>](<span class="id">_</span> : <span class="id">_</span> =<br/>
&nbsp;&nbsp;\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.l">l</a></span> <span class="id">x</span>]<span class="id">_y</span> (\<span class="id">sum_</span>(<span class="id"><a name="n:672">n</a></span> &lt;<span class="id">oo</span>) <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.k">k</a></span> (<span class="id">x</span>, <span class="id">y</span>) (<span class="id">U</span> <span class="id">n</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> =&gt; <span class="id">V</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym</a></span>/<span class="id"><a href="mathcomp.analysis.topology.html#cvg_lim">cvg_lim</a></span> =&gt; //; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.measure.html#measure_semi_sigma_additive">measure_semi_sigma_additive</a></span>.<br/>
<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#cvg_closeP">cvg_closeP</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_nneseries">is_cvg_nneseries</a></span> =&gt; <span class="id">n</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral_ge0">integral_ge0</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.topology.html#closeE">closeE</a></span>// <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral_nneseries">integral_nneseries</a></span>// =&gt; <span class="id">n</span>.<br/>
<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.k">k</a></span> <span class="id">_</span> (<span class="id">mU</span> <span class="id">n</span>)) <span class="id">_</span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="kcomp_is_measure.hb_instance_143">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id"><a name="x:693">x</a></span> := <span class="id"><a href="mathcomp.analysis.measure.html#isMeasure.Build">isMeasure.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.R">R</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.k">k</a></span> <span class="id">x</span>) (<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.kcomp0">kcomp0</a></span> <span class="id">x</span>) (<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.kcomp_ge0">kcomp_ge0</a></span> <span class="id">x</span>) (@<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.kcomp_sigma_additive">kcomp_sigma_additive</a></span> <span class="id">x</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mkcomp">mkcomp</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.Z">Z</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.R">R</a></span>} := <span class="kwd">fun</span> <span class="id"><a name="x:694">x</a></span> =&gt;<br/>
&nbsp;&nbsp;[<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measure.Exports.measure">measure</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure.k">k</a></span> <span class="id">x</span>].<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_is_measure">kcomp_is_measure</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">l</span> \; <span class="id">k</span>" := (<span class="id"><a href="mathcomp.analysis.kernel.html#mkcomp">mkcomp</a></span> <span class="id">l</span> <span class="id">k</span>) : <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="KCOMP_FINITE_KERNEL">KCOMP_FINITE_KERNEL</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="KCOMP_FINITE_KERNEL.kcomp_finite_kernel_kernel">kcomp_finite_kernel_kernel</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:695">d</a></span> <span class="id"><a name="d':696">d</a></span>' <span class="id"><a name="d3:697">d3</a></span> (<span class="id"><a name="X:698">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:699">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;(<span class="id"><a name="Z:700">Z</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d3</span>) (<span class="id"><a name="R:701">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id"><a name="l:702">l</a></span> : <span class="id">R</span>.-<span class="id">fker</span> <span class="id">X</span> ~&gt; <span class="id">Y</span>)<br/>
&nbsp;&nbsp;(<span class="id"><a name="k:703">k</a></span> : <span class="id">R</span>.-<span class="id">ker</span> [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">_</span> <span class="id">of</span> <span class="id">X</span> * <span class="id">Y</span>] ~&gt; <span class="id">Z</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="KCOMP_FINITE_KERNEL.measurable_fun_kcomp_finite">measurable_fun_kcomp_finite</a></span> <span class="id"><a name="U:704">U</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_kernel.X">X</a></span>] ((<span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_kernel.l">l</a></span> \; <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_kernel.k">k</a></span>) ^~ <span class="id">U</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
<span class="id">move</span>=&gt; <span class="id">mU</span>; <span class="id">apply</span>: (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_finite_kernel">measurable_fun_integral_finite_kernel</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_kernel.k">k</a></span> ^~ <span class="id">U</span>)) =&gt; //=.<br/>
<span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="KCOMP_FINITE_KERNEL.HB_unnamed_factory_149">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#isKernel.Build">isKernel.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_kernel.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_kernel.Z">Z</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_kernel.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_kernel.l">l</a></span> \; <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_kernel.k">k</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.measurable_fun_kcomp_finite">measurable_fun_kcomp_finite</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_kernel">kcomp_finite_kernel_kernel</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite">kcomp_finite_kernel_finite</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:705">d</a></span> <span class="id"><a name="d':706">d</a></span>' <span class="id"><a name="d3:707">d3</a></span> (<span class="id"><a name="X:708">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:709">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;(<span class="id"><a name="Z:710">Z</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d3</span>) (<span class="id"><a name="R:711">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.l">l</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.R">R</a></span>.-<span class="id">fker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.Y">Y</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.k">k</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.R">R</a></span>.-<span class="id">fker</span> [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.Y">Y</a></span>] ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.mkcomp_finite">mkcomp_finite</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uub">measure_fam_uub</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#mkcomp">mkcomp</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.k">k</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
<span class="id">have</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uubP">measure_fam_uubP</a></span>[<span class="id">r</span> <span class="id">hr</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.k">k</a></span>.<br/>
<span class="id">have</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uubP">measure_fam_uubP</a></span>[<span class="id">s</span> <span class="id">hs</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#measure_uub">measure_uub</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.l">l</a></span>.<br/>
<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.kernel.html#measure_fam_uubP">measure_fam_uubP</a></span>; <span class="kwd">exists</span> (<span class="id"><a href="mathcomp.analysis.signed.html#PosNum">PosNum</a></span> [<span class="id">gt0</span> <span class="id">of</span> (<span class="id">r</span>%:<span class="id">num</span> * <span class="id">s</span>%:<span class="id">num</span>)%<span class="id">R</span>]) =&gt; <span class="id">x</span> /=.<br/>
<span class="id">apply</span>: (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> (\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.l">l</a></span> <span class="id">x</span>]<span class="id">__</span> <span class="id">r</span>%:<span class="id">num</span>%:<span class="id">E</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_le_integral">ge0_le_integral</a></span> =&gt; //.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.k">k</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span>) <span class="id">_</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">exact</span>/<span class="id">ltW</span>/<span class="id">hr</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral_cst">integral_cst</a></span>//= <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinM">EFinM</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_pmul2l">lte_pmul2l</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="KCOMP_FINITE_KERNEL.HB_unnamed_factory_151">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#Kernel_isFinite.Build">Kernel_isFinite.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.Z">Z</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.l">l</a></span> \; <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.k">k</a></span>) <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite.mkcomp_finite">mkcomp_finite</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL.kcomp_finite_kernel_finite">kcomp_finite_kernel_finite</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL">KCOMP_FINITE_KERNEL</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="kcomp_sfinite_kernel">kcomp_sfinite_kernel</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:714">d</a></span> <span class="id"><a name="d':715">d</a></span>' <span class="id"><a name="d3:716">d3</a></span> (<span class="id"><a name="X:717">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:718">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;(<span class="id"><a name="Z:719">Z</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d3</span>) (<span class="id"><a name="R:720">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="kcomp_sfinite_kernel.l">l</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.R">R</a></span>.-<span class="id">sfker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.Y">Y</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="kcomp_sfinite_kernel.k">k</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.R">R</a></span>.-<span class="id">sfker</span> [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.Y">Y</a></span>] ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_FINITE_KERNEL">KCOMP_FINITE_KERNEL</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mkcomp_sfinite">mkcomp_sfinite</a></span> : <span class="kwd">exists</span> <span class="id"><a name="k_:723">k_</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.R">R</a></span>.-<span class="id">fker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.Z">Z</a></span>)^<span class="id">nat</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id"><a name="x:724">x</a></span> <span class="id"><a name="U:725">U</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; (<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.l">l</a></span> \; <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.k">k</a></span>) <span class="id">x</span> <span class="id">U</span> = <span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> <span class="id">k_</span> <span class="id">x</span> <span class="id">U</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
<span class="id">have</span> [<span class="id">k_</span> <span class="id">hk_</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite_kernel">sfinite_kernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.k">k</a></span>; <span class="id">have</span> [<span class="id">l_</span> <span class="id">hl_</span>] := <span class="id"><a href="mathcomp.analysis.kernel.html#sfinite_kernel">sfinite_kernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.l">l</a></span>.<br/>
<span class="id">have</span> [<span class="id">kl</span> <span class="id">hkl</span>] : <span class="kwd">exists</span> <span class="id"><a name="kl:726">kl</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.R">R</a></span>.-<span class="id">fker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.Z">Z</a></span>) ^<span class="id">nat</span>, <span class="kwd">forall</span> <span class="id"><a name="x:727">x</a></span> <span class="id"><a name="U:728">U</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">esum_</span>(<span class="id"><a name="i:729">i</a></span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>) (<span class="id">l_</span> <span class="id">i</span>.2 \; <span class="id">k_</span> <span class="id">i</span>.1) <span class="id">x</span> <span class="id">U</span> = \<span class="id">sum_</span>(<span class="id"><a name="i:730">i</a></span> &lt;<span class="id">oo</span>) <span class="id">kl</span> <span class="id">i</span> <span class="id">x</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id"><a href="mathcomp.classical.cardinality.html#ppcard_eqP">ppcard_eqP</a></span>[<span class="id">f</span>] : ([<span class="id">set</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>] #= [<span class="id">set</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> * <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>])%<span class="id">card</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.cardinality.html#card_eq_sym">card_eq_sym</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.cardinality.html#card_nat2">card_nat2</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id"><a name="i:736">i</a></span> =&gt; [<span class="id">the</span> <span class="id">_</span>.-<span class="id">fker</span> <span class="id">_</span> ~&gt; <span class="id">_</span> <span class="id">of</span> <span class="id">l_</span> (<span class="id">f</span> <span class="id">i</span>).2 \; <span class="id">k_</span> (<span class="id">f</span> <span class="id">i</span>).1]) =&gt; <span class="id">x</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.analysis.esum.html#reindex_esum">reindex_esum</a></span> [<span class="id">set</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>] <span class="id">_</span> <span class="id">f</span>)// <span class="id"><a href="mathcomp.analysis.esum.html#nneseries_esum">nneseries_esum</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#fun_true">fun_true</a></span>.<br/>
<span class="kwd">exists</span> <span class="id">kl</span> =&gt; <span class="id">x</span> <span class="id">U</span> <span class="id">mU</span>.<br/>
<span class="id">transitivity</span> (([<span class="id">the</span> <span class="id">_</span>.-<span class="id">ker</span> <span class="id">_</span> ~&gt; <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> <span class="id">l_</span>] \;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">the</span> <span class="id">_</span>.-<span class="id">ker</span> <span class="id">_</span> ~&gt; <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kseries">kseries</a></span> <span class="id">k_</span>]) <span class="id">x</span> <span class="id">U</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /= /<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span> [<span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>](<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_measure_integral">eq_measure_integral</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.l">l</a></span> <span class="id">x</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">rewrite</span> <span class="id">hl_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> =&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">hk_</span>.<br/>
<span class="id">rewrite</span> /= /<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span>/= <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral_nneseries">integral_nneseries</a></span>//=; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> (<span class="id">k_</span> <span class="id">n</span>) <span class="id">_</span> <span class="id">mU</span>) <span class="id">_</span>.<br/>
<span class="id">transitivity</span> (\<span class="id">sum_</span>(<span class="id"><a name="i:738">i</a></span> &lt;<span class="id">oo</span>) \<span class="id">sum_</span>(<span class="id"><a name="j:741">j</a></span> &lt;<span class="id">oo</span>) (<span class="id">l_</span> <span class="id">j</span> \; <span class="id">k_</span> <span class="id">i</span>) <span class="id">x</span> <span class="id">U</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.sequences.html#eq_eseriesr">eq_eseriesr</a></span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kseries">integral_kseries</a></span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> (<span class="id">k_</span> <span class="id">i</span>) <span class="id">_</span> <span class="id">mU</span>) <span class="id">_</span>.<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.measure.html#mseries">mseries</a></span> -<span class="id">hkl</span>/=.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> `*`` (<span class="kwd">fun</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>)); <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span>.<br/>
<span class="id">rewrite</span> -(@<span class="id"><a href="mathcomp.analysis.esum.html#esum_esum">esum_esum</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id"><a name="i:774">i</a></span> <span class="id"><a name="j:775">j</a></span> =&gt; (<span class="id">l_</span> <span class="id">j</span> \; <span class="id">k_</span> <span class="id">i</span>) <span class="id">x</span> <span class="id">U</span>))//.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.esum.html#nneseries_esum">nneseries_esum</a></span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.sequences.html#nneseries_ge0">nneseries_ge0</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#fun_true">fun_true</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.esum.html#eq_esum">eq_esum</a></span> =&gt; /= <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.esum.html#nneseries_esum">nneseries_esum</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#fun_true">fun_true</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_mkcomp_sfinite">measurable_fun_mkcomp_sfinite</a></span> <span class="id"><a name="U:780">U</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.X">X</a></span>] ((<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.l">l</a></span> \; <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.k">k</a></span>) ^~ <span class="id">U</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
<span class="id">move</span>=&gt; <span class="id">mU</span>; <span class="id">apply</span>: (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_sfinite_kernel">measurable_fun_integral_sfinite_kernel</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel.k">k</a></span> ^~ <span class="id">U</span>)) =&gt; //.<br/>
<span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#kcomp_sfinite_kernel">kcomp_sfinite_kernel</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="KCOMP_SFINITE_KERNEL">KCOMP_SFINITE_KERNEL</a></span>.<br/>
<span class="kwd">Section</span> <span class="id"><a name="KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel">kcomp_sfinite_kernel</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:781">d</a></span> <span class="id"><a name="d':782">d</a></span>' <span class="id"><a name="d3:783">d3</a></span> (<span class="id"><a name="X:784">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:785">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;(<span class="id"><a name="Z:786">Z</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d3</span>) (<span class="id"><a name="R:787">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.l">l</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.R">R</a></span>.-<span class="id">sfker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.Y">Y</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.k">k</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.R">R</a></span>.-<span class="id">sfker</span> [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.Y">Y</a></span>] ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.Z">Z</a></span>.<br/>
<br/>
<span class="id"><a name="KCOMP_SFINITE_KERNEL.HB_unnamed_factory_156">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#isKernel.Build">isKernel.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.Z">Z</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.l">l</a></span> \; <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.k">k</a></span>) (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_mkcomp_sfinite">measurable_fun_mkcomp_sfinite</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.k">k</a></span>).<br/>
<br/>
#[<span class="id">export</span>]<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.kernel.html#Kernel_isSFinite.Build">Kernel_isSFinite.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.X">X</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.Z">Z</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.R">R</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.l">l</a></span> \; <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.k">k</a></span>) (<span class="id"><a href="mathcomp.analysis.kernel.html#mkcomp_sfinite">mkcomp_sfinite</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel.k">k</a></span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL.kcomp_sfinite_kernel">kcomp_sfinite_kernel</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#KCOMP_SFINITE_KERNEL">KCOMP_SFINITE_KERNEL</a></span>.<br/>
<span class="id">HB.export</span> <span class="id">KCOMP_SFINITE_KERNEL</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="measurable_fun_preimage_integral">measurable_fun_preimage_integral</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:790">d</a></span> <span class="id"><a name="d':791">d</a></span>' (<span class="id"><a name="X:792">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:793">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:794">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="measurable_fun_preimage_integral.k">k</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.R">R</a></span>)<br/>
&nbsp;&nbsp;(<span class="id"><a name="measurable_fun_preimage_integral.k_">k_</a></span> : ({<span class="id">nnsfun</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.R">R</a></span>}) ^<span class="id">nat</span>)<br/>
&nbsp;&nbsp;(<span class="id"><a name="measurable_fun_preimage_integral.ndk_">ndk_</a></span> : <span class="id">nondecreasing_seq</span> (<span class="id">k_</span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.Y">Y</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.R">R</a></span>)^<span class="id">nat</span>))<br/>
&nbsp;&nbsp;(<span class="id"><a name="measurable_fun_preimage_integral.k_k">k_k</a></span> : <span class="kwd">forall</span> <span class="id"><a name="z:798">z</a></span>, [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.Y">Y</a></span>] <span class="id">z</span> -&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFin">EFin</a></span> \<span class="id">o</span> (<span class="id">k_</span> ^~ <span class="id">z</span>) --&gt; <span class="id">k</span> <span class="id">z</span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="measurable_fun_preimage_integral.k_2">k_2</a></span> : (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.Y">Y</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.R">R</a></span>)^<span class="id">nat</span> := <span class="kwd">fun</span> <span class="id"><a name="n:800">n</a></span> =&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_">k_</a></span> <span class="id">n</span> \<span class="id">o</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#snd">snd</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="measurable_fun_preimage_integral.k_2_ge0">k_2_ge0</a></span> <span class="id"><a name="n:801">n</a></span> <span class="id"><a name="x:802">x</a></span> : (0 &lt;= <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_2">k_2</a></span> <span class="id">n</span> <span class="id">x</span>)%<span class="id">R</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="id"><a name="measurable_fun_preimage_integral.hb_instance_161">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id"><a name="n:803">n</a></span> := @<span class="id"><a href="mathcomp.analysis.numfun.html#isNonNegFun.Build">isNonNegFun.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_2_ge0">k_2_ge0</a></span> <span class="id">n</span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="measurable_fun_preimage_integral.mk_2">mk_2</a></span> <span class="id"><a name="n:804">n</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.Y">Y</a></span>] (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_2">k_2</a></span> <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> =&gt; //; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_snd">measurable_snd</a></span>. Qed.</div>
<br/>
<span class="id"><a name="measurable_fun_preimage_integral.hb_instance_164">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id"><a name="n:805">n</a></span> := @<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#isMeasurableFun.Build">isMeasurableFun.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.mk_2">mk_2</a></span> <span class="id">n</span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="measurable_fun_preimage_integral.fk_2">fk_2</a></span> <span class="id"><a name="n:806">n</a></span> : <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#range">range</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_2">k_2</a></span> <span class="id">n</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
<span class="id">have</span> := <span class="id"><a href="mathcomp.classical.cardinality.html#fimfunP">fimfunP</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_">k_</a></span> <span class="id">n</span>).<br/>
<span class="id">suff</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#range">range</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_">k_</a></span> <span class="id">n</span>) = <span class="id"><a href="mathcomp.classical.classical_sets.html#range">range</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_2">k_2</a></span> <span class="id">n</span>) <span class="kwd">by</span> <span class="id">move</span>=&gt; &lt;-.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; <span class="id">r</span> [<span class="id">y</span> ?] &lt;-; [<span class="kwd">exists</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#point">point</a></span>, <span class="id">y</span>)|<span class="kwd">exists</span> <span class="id">y</span>.2].<br/>
Qed.</div>
<br/>
<span class="id"><a name="measurable_fun_preimage_integral.hb_instance_167">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id"><a name="n:807">n</a></span> := @<span class="id"><a href="mathcomp.classical.cardinality.html#FiniteImage.Build">FiniteImage.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.fk_2">fk_2</a></span> <span class="id">n</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_preimage_integral">measurable_fun_preimage_integral</a></span> (<span class="id"><a name="l:808">l</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.X">X</a></span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.Y">Y</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.R">R</a></span>}) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id"><a name="n:809">n</a></span> <span class="id"><a name="r:810">r</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.X">X</a></span>] (<span class="id">l</span> ^~ (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_">k_</a></span> <span class="id">n</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]))) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.X">X</a></span>] (<span class="kwd">fun</span> <span class="id"><a name="x:811">x</a></span> =&gt; \<span class="id">int</span>[<span class="id">l</span> <span class="id">x</span>]<span class="id">_z</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k">k</a></span> <span class="id">z</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
<span class="id">move</span>=&gt; <span class="id">h</span>; <span class="id">apply</span>: (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_xsection_integral">measurable_fun_xsection_integral</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k">k</a></span> \<span class="id">o</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#snd">snd</a></span>) <span class="id">l</span><br/>
&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id"><a name="n:813">n</a></span> =&gt; [<span class="id">the</span> {<span class="id">nnsfun</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_2">k_2</a></span> <span class="id">n</span>])) =&gt; /=.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_2">k_2</a></span> =&gt; <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#lefP">lefP</a></span> =&gt; -[<span class="id">x</span> <span class="id">y</span>] /=; <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.boolp.html#lefP">lefP</a></span>/<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.ndk_">ndk_</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span> <span class="id">y</span>]; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_k">k_k</a></span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">r</span> <span class="id">_</span> /= <span class="id">B</span> <span class="id">mB</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> := <span class="id">h</span> <span class="id">n</span> <span class="id">r</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span> <span class="id">B</span> <span class="id">mB</span>; <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span> : (<span class="id">l</span> ^~ (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_">k_</a></span> <span class="id">n</span> @^-1` [<span class="id">set</span> <span class="id">r</span>])) @^-1` <span class="id">B</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id"><a name="x:815">x</a></span> =&gt; <span class="id">l</span> <span class="id">x</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">xsection</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_2">k_2</a></span> <span class="id">n</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) <span class="id">x</span>)) @^-1` <span class="id">B</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; -&gt;.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; <span class="id">x</span>/=;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#comp_preimage">comp_preimage</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral.k_">k_</a></span> <span class="id">n</span>)) <span class="id"><a href="mathcomp.classical.classical_sets.html#xsection_preimage_snd">xsection_preimage_snd</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral">measurable_fun_preimage_integral</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_integral_kernel">measurable_fun_integral_kernel</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="d:816">d</a></span> <span class="id"><a name="d':817">d</a></span>' (<span class="id"><a name="X:818">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:819">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>') (<span class="id"><a name="R:820">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="l:821">l</a></span> : <span class="id">X</span> -&gt; {<span class="id">measure</span> <span class="id">set</span> <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="ml:823">ml</a></span> : <span class="kwd">forall</span> <span class="id"><a name="U:822">U</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id">X</span>] (<span class="id">l</span> ^~ <span class="id">U</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="k:824">k</a></span> : <span class="id">Y</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) (<span class="id"><a name="k0:826">k0</a></span> : <span class="kwd">forall</span> <span class="id"><a name="z:825">z</a></span>, 0 &lt;= <span class="id">k</span> <span class="id">z</span>) (<span class="id"><a name="mk:827">mk</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id">Y</span>] <span class="id">k</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id">X</span>] (<span class="kwd">fun</span> <span class="id"><a name="x:828">x</a></span> =&gt; \<span class="id">int</span>[<span class="id">l</span> <span class="id">x</span>]<span class="id">_y</span> <span class="id">k</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
<span class="id">have</span> [<span class="id">k_</span> [<span class="id">ndk_</span> <span class="id">k_k</span>]] := <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#approximation">approximation</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span> <span class="id">mk</span> (<span class="kwd">fun</span> <span class="id"><a name="x:830">x</a></span> <span class="id">_</span> =&gt; <span class="id">k0</span> <span class="id">x</span>).<br/>
<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_preimage_integral">measurable_fun_preimage_integral</a></span> <span class="id">ndk_</span> <span class="id">k_k</span>) =&gt; <span class="id">n</span> <span class="id">r</span>; <span class="id">exact</span>/<span class="id">ml</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="integral_kcomp">integral_kcomp</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="d:831">d</a></span> <span class="id"><a name="d2:832">d2</a></span> <span class="id"><a name="d3:833">d3</a></span> (<span class="id"><a name="X:834">X</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id"><a name="Y:835">Y</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d2</span>)<br/>
&nbsp;&nbsp;(<span class="id"><a name="Z:836">Z</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">d3</span>) (<span class="id"><a name="R:837">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>).<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="integral_kcomp.l">l</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.R">R</a></span>.-<span class="id">sfker</span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.X">X</a></span> ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.Y">Y</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a name="integral_kcomp.k">k</a></span> : <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.R">R</a></span>.-<span class="id">sfker</span> [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#Measurable.Exports.measurableType">measurableType</a></span> <span class="id">_</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.X">X</a></span> * <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.Y">Y</a></span>] ~&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.Z">Z</a></span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="integral_kcomp.integral_kcomp_indic">integral_kcomp_indic</a></span> <span class="id"><a name="x:840">x</a></span> <span class="id"><a name="E:841">E</a></span> (<span class="id"><a name="mE:842">mE</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">E</span>) :<br/>
&nbsp;&nbsp;\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> <span class="id">x</span>]<span class="id">_z</span> (\1<span class="id">_E</span> <span class="id">z</span>)%:<span class="id">E</span> = \<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.l">l</a></span> <span class="id">x</span>]<span class="id">_y</span> (\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> (<span class="id">x</span>, <span class="id">y</span>)]<span class="id">_z</span> (\1<span class="id">_E</span> <span class="id">z</span>)%:<span class="id">E</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral_indic">integral_indic</a></span>//= /<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> =&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral_indic">integral_indic</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="integral_kcomp.integral_kcomp_nnsfun">integral_kcomp_nnsfun</a></span> <span class="id"><a name="x:846">x</a></span> (<span class="id"><a name="f:847">f</a></span> : {<span class="id">nnsfun</span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.Z">Z</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.R">R</a></span>}) :<br/>
&nbsp;&nbsp;\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> <span class="id">x</span>]<span class="id">_z</span> (<span class="id">f</span> <span class="id">z</span>)%:<span class="id">E</span> = \<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.l">l</a></span> <span class="id">x</span>]<span class="id">_y</span> (\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> (<span class="id">x</span>, <span class="id">y</span>)]<span class="id">_z</span> (<span class="id">f</span> <span class="id">z</span>)%:<span class="id">E</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
<span class="id">under</span> [<span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS</a></span>]<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfunE">fimfunE</a></span> -<span class="id"><a href="mathcomp.analysis.ereal.html#fsumEFin">fsumEFin</a></span>//.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_integral_fsum">ge0_integral_fsum</a></span>//; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">r</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> =&gt; [//|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">fr</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) <span class="kwd">by</span> <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#measurable_sfunP">measurable_sfunP</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">_</span> : \1<span class="id">__</span> = <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#mindic">mindic</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.R">R</a></span> <span class="id">fr</span>).<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">r</span> <span class="id">z</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinM">EFinM</a></span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#nnfun_muleindic_ge0">nnfun_muleindic_ge0</a></span>.<br/>
<span class="id">under</span> [<span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">z</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.numfun.html#fimfunE">fimfunE</a></span> -<span class="id"><a href="mathcomp.analysis.ereal.html#fsumEFin">fsumEFin</a></span>//; <span class="id">over</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /= <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_integral_fsum">ge0_integral_fsum</a></span>//; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">r</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> =&gt; [//|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">fr</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) <span class="kwd">by</span> <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#measurable_sfunP">measurable_sfunP</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">_</span> : \1<span class="id">__</span> = <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#mindic">mindic</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.R">R</a></span> <span class="id">fr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">r</span> <span class="id">z</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinM">EFinM</a></span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#nnfun_muleindic_ge0">nnfun_muleindic_ge0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">r</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integralZl_indic">integralZl_indic</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id"><a name="r:851">r</a></span> =&gt; <span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]))//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">r0</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#preimage_nnfun0">preimage_nnfun0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral_indic">integral_indic</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#setIT">setIT</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">over</span>.<br/>
&nbsp;&nbsp;<span class="id">over</span>.<br/>
<span class="id">rewrite</span> /= <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_integral_fsum">ge0_integral_fsum</a></span>//; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">r</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#measurable_funeM">measurable_funeM</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> (<span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) <span class="id">_</span>) <span class="id">_</span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">y</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> := <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#mulemu_ge0">mulemu_ge0</a></span> (<span class="kwd">fun</span> <span class="id"><a name="n:854">n</a></span> =&gt; <span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">n</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#preimage_nnfun0">preimage_nnfun0</a></span>.<br/>
<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> =&gt; <span class="id">r</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integralZl_indic">integralZl_indic</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id"><a name="r:855">r</a></span> =&gt; <span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]))//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#preimage_nnfun0">preimage_nnfun0</a></span>.<br/>
<span class="id">rewrite</span> /= <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.integral_kcomp_indic">integral_kcomp_indic</a></span>; <span class="id">last</span> <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#measurable_sfunP">measurable_sfunP</a></span>.<br/>
<span class="id">have</span> [<span class="id">r0</span>|<span class="id">r0</span>] := <span class="id">leP</span> 0%<span class="id">R</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_integralZl">ge0_integralZl</a></span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> (<span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">r</span>]) <span class="id">_</span>) <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">congr</span> (<span class="id">_</span> * <span class="id">_</span>); <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> =&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral_indic">integral_indic</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#setIT">setIT</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral0_eq">integral0_eq</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mule0">mule0</a></span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral0_eq">integral0_eq</a></span>// =&gt; <span class="id">z</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#preimage_nnfun0">preimage_nnfun0</a></span>// <span class="id"><a href="mathcomp.analysis.numfun.html#indic0">indic0</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral0_eq">integral0_eq</a></span>// =&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#preimage_nnfun0">preimage_nnfun0</a></span>// <span class="id"><a href="mathcomp.analysis.measure.html#measure0">measure0</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mule0">mule0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="integral_kcomp">integral_kcomp</a></span> <span class="id"><a name="x:858">x</a></span> <span class="id"><a name="f:859">f</a></span> : (<span class="kwd">forall</span> <span class="id"><a name="z:860">z</a></span>, 0 &lt;= <span class="id">f</span> <span class="id">z</span>) -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.Z">Z</a></span>] <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> <span class="id">x</span>]<span class="id">_z</span> <span class="id">f</span> <span class="id">z</span> = \<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.l">l</a></span> <span class="id">x</span>]<span class="id">_y</span> (\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> (<span class="id">x</span>, <span class="id">y</span>)]<span class="id">_z</span> <span class="id">f</span> <span class="id">z</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
<span class="id">move</span>=&gt; <span class="id">f0</span> <span class="id">mf</span>.<br/>
<span class="id">have</span> [<span class="id">f_</span> [<span class="id">ndf_</span> <span class="id">f_f</span>]] := <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#approximation">approximation</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span> <span class="id">mf</span> (<span class="kwd">fun</span> <span class="id"><a name="z:864">z</a></span> <span class="id">_</span> =&gt; <span class="id">f0</span> <span class="id">z</span>).<br/>
<span class="id">transitivity</span> (\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#kcomp">kcomp</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.l">l</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> <span class="id">x</span>]<span class="id">_z</span> (<span class="id"><a href="mathcomp.analysis.topology.html#lim">lim</a></span> ((<span class="id">f_</span> <span class="id">n</span> <span class="id">z</span>)%:<span class="id">E</span> @[<span class="id"><a name="n:866">n</a></span> --&gt; \<span class="id">oo</span>]))).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> =&gt; <span class="id">z</span> <span class="id">_</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym</a></span>/<span class="id"><a href="mathcomp.analysis.topology.html#cvg_lim">cvg_lim</a></span> =&gt; //=; <span class="id">exact</span>: <span class="id">f_f</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#monotone_convergence">monotone_convergence</a></span>//; <span class="id">last</span> 3 <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">z</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">z</span> <span class="id">_</span> <span class="id">a</span> <span class="id">b</span> /<span class="id">ndf_</span> /<span class="id"><a href="mathcomp.classical.boolp.html#lefP">lefP</a></span> <span class="id">ab</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id">_</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id"><a name="n:871">n</a></span> =&gt; \<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.l">l</a></span> <span class="id">x</span>]<span class="id">_y</span> (\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> (<span class="id">x</span>, <span class="id">y</span>)]<span class="id">_z</span> (<span class="id">f_</span> <span class="id">n</span> <span class="id">z</span>)%:<span class="id">E</span>)))//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.integral_kcomp_nnsfun">integral_kcomp_nnsfun</a></span>.<br/>
<span class="id">transitivity</span> (\<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.l">l</a></span> <span class="id">x</span>]<span class="id">_y</span> <span class="id"><a href="mathcomp.analysis.topology.html#lim">lim</a></span> (<span class="kwd">fun</span> <span class="id"><a name="n:881">n</a></span> =&gt; \<span class="id">int</span>[<span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> (<span class="id">x</span>, <span class="id">y</span>)]<span class="id">_z</span> (<span class="id">f_</span> <span class="id">n</span> <span class="id">z</span>)%:<span class="id">E</span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#monotone_convergence">monotone_convergence</a></span>//; <span class="id">last</span> 3 <span class="id">first</span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.kernel.html#measurable_fun_integral_kernel">measurable_fun_integral_kernel</a></span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">U</span> <span class="id">mU</span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableT_comp">measurableT_comp</a></span> (<span class="id"><a href="mathcomp.analysis.kernel.html#measurable_kernel">measurable_kernel</a></span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp.k">k</a></span> <span class="id">_</span> <span class="id">mU</span>) <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">z</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">y</span> <span class="id">_</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#integral_ge0">integral_ge0</a></span> =&gt; // <span class="id">z</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">_</span> <span class="id">a</span> <span class="id">b</span> <span class="id">ab</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#ge0_le_integral">ge0_le_integral</a></span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">z</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">z</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>: <span class="id">ab</span> =&gt; /<span class="id">ndf_</span> /<span class="id"><a href="mathcomp.classical.boolp.html#lefP">lefP</a></span> <span class="id">ab</span> <span class="id">z</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> =&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#monotone_convergence">monotone_convergence</a></span>//; <span class="id">last</span> 3 <span class="id">first</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.lebesgue_measure.html#EFin_measurable_fun">EFin_measurable_fun</a></span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">z</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">z</span> <span class="id">_</span> <span class="id">a</span> <span class="id">b</span> /<span class="id">ndf_</span> /<span class="id"><a href="mathcomp.classical.boolp.html#lefP">lefP</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.lebesgue_integral.html#eq_integral">eq_integral</a></span> =&gt; <span class="id">z</span> <span class="id">_</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#cvg_lim">cvg_lim</a></span> =&gt; //; <span class="id">exact</span>: <span class="id">f_f</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.kernel.html#integral_kcomp">integral_kcomp</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/tree/yoshihiro503%40generate_index">a fork of coq2html</a></div>
</body>
</html>
